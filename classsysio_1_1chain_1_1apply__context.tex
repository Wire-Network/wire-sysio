\doxysection{sysio\+::chain\+::apply\+\_\+context Class Reference}
\hypertarget{classsysio_1_1chain_1_1apply__context}{}\label{classsysio_1_1chain_1_1apply__context}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}}


{\ttfamily \#include $<$apply\+\_\+context.\+hpp$>$}



Collaboration diagram for sysio\+::chain\+::apply\+\_\+context\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_1_1generic__index}{generic\+\_\+index}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a87005d2140a4c7884277d2c775a86000}{apply\+\_\+context}} (\mbox{\hyperlink{classsysio_1_1chain_1_1controller}{controller}} \&con, \mbox{\hyperlink{classsysio_1_1chain_1_1transaction__context}{transaction\+\_\+context}} \&trx\+\_\+ctx, \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} action\+\_\+ordinal, \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} depth=0)
\begin{DoxyCompactList}\small\item\em class \doxylink{classsysio_1_1chain_1_1apply__context_1_1generic__index}{generic\+\_\+index} \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a3d55f08ae8c014eb7cca9d36b43e8220}{exec\+\_\+one}} ()
\begin{DoxyCompactList}\small\item\em Execution methods\+: \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aac87c3bc66a6e05318bfd25c3373fee5}{exec}} ()
\item 
void \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a95ccf1ed89aab0118938c309fbf91d1f}{execute\+\_\+inline}} (\mbox{\hyperlink{structsysio_1_1chain_1_1action}{action}} \&\&\mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}})
\item 
void \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aeacd5c6ae20ee332af568149057df884}{execute\+\_\+context\+\_\+free\+\_\+inline}} (\mbox{\hyperlink{structsysio_1_1chain_1_1action}{action}} \&\&\mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}})
\item 
void \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac09c8f3118154bb22b0bd50526e138fa}{schedule\+\_\+deferred\+\_\+transaction}} (const \mbox{\hyperlink{namespacesysio_1_1chain_a896515137d9a7844105786ee3a6b1d47}{uint128\+\_\+t}} \&sender\+\_\+id, \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} payer, \mbox{\hyperlink{structsysio_1_1chain_1_1transaction}{transaction}} \&\&trx, bool replace\+\_\+existing)
\item 
bool \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a2310a1978f97847e770f7525391d0abc}{cancel\+\_\+deferred\+\_\+transaction}} (const \mbox{\hyperlink{namespacesysio_1_1chain_a896515137d9a7844105786ee3a6b1d47}{uint128\+\_\+t}} \&sender\+\_\+id, \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} sender)
\item 
bool \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a11dd9c8743b410d5007894bbc786f4ce}{cancel\+\_\+deferred\+\_\+transaction}} (const \mbox{\hyperlink{namespacesysio_1_1chain_a896515137d9a7844105786ee3a6b1d47}{uint128\+\_\+t}} \&sender\+\_\+id)
\item 
void \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a7dbd347239af8b3540db7830b6e2f11e}{require\+\_\+authorization}} (const \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} \&account)
\begin{DoxyCompactList}\small\item\em Authorization methods\+: \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a87b5bd0a6ac8461dd9c1486561a0c314}{has\+\_\+authorization}} (const \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} \&account) const
\item 
void \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a3ddf99ea046e7ab8192cf8d4309090ed}{require\+\_\+authorization}} (const \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} \&account, const \mbox{\hyperlink{namespacesysio_1_1chain_aacc541763fed17ee490b6ac42b7bb77a}{permission\+\_\+name}} \&permission)
\item 
bool \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa3b1a676573b8e03823646f92da39365}{is\+\_\+account}} (const \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} \&account) const
\begin{DoxyCompactList}\small\item\em \doxylink{classsysio_1_1chain_1_1apply__context_aac87c3bc66a6e05318bfd25c3373fee5}{exec()} \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ae13927eb37e92ff57b4a4bfa78e91616}{get\+\_\+code\+\_\+hash}} (\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} account, \mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}} \&code\+\_\+sequence, \mbox{\hyperlink{classfc_1_1sha256}{fc\+::sha256}} \&code\+\_\+hash, \mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}} \&\mbox{\hyperlink{classsysio_1_1chain_1_1wasm__interface_a9053d9e65167e5f241f1f3f27b175f9c}{vm\+\_\+type}}, \mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}} \&vm\+\_\+version) const
\item 
void \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a00a749f7d122e141a87aab3767d3349c}{require\+\_\+recipient}} (\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} account)
\item 
bool \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_adecf61df18e643021f05df3cdfb97127}{has\+\_\+recipient}} (\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} account) const
\item 
void \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ae25be4ae1a013df520cc4855e64921f2}{console\+\_\+append}} (std\+::string\+\_\+view val)
\begin{DoxyCompactList}\small\item\em Console methods\+: \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a49f2feb0d0ce2cb21c74f871432392e9}{update\+\_\+db\+\_\+usage}} (const \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} \&payer, \mbox{\hyperlink{stdint_8h_a414156feea104f8f75b4ed9e3121b2f6}{int64\+\_\+t}} delta)
\begin{DoxyCompactList}\small\item\em Database methods\+: \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a525b0d91b1afb457e7371ff689fcefda}{db\+\_\+store\+\_\+i64}} (\mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}} scope, \mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}} table, const \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} \&payer, \mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}} \mbox{\hyperlink{code__cache_8cpp_aa0efefe21f4700d78692edc823e763be}{id}}, const char \texorpdfstring{$\ast$}{*}buffer, size\+\_\+t buffer\+\_\+size)
\item 
void \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ab42c195679823907132298609509f36c}{db\+\_\+update\+\_\+i64}} (int iterator, \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} payer, const char \texorpdfstring{$\ast$}{*}buffer, size\+\_\+t buffer\+\_\+size)
\item 
void \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_abd131f26bc83416fb97a05392ae68429}{db\+\_\+remove\+\_\+i64}} (int iterator)
\item 
int \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a5fb0e439b9a43df576ddea6c944759c1}{db\+\_\+get\+\_\+i64}} (int iterator, char \texorpdfstring{$\ast$}{*}buffer, size\+\_\+t buffer\+\_\+size)
\item 
int \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a78451562bdb87ec31112731f61acde2e}{db\+\_\+next\+\_\+i64}} (int iterator, \mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}} \&primary)
\item 
int \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ab6bf0461d3d359d5da63bf8d0338ccab}{db\+\_\+previous\+\_\+i64}} (int iterator, \mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}} \&primary)
\item 
int \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a4a6ba829713d78125e8f5b5cc7296137}{db\+\_\+find\+\_\+i64}} (\mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}} code, \mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}} scope, \mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}} table, \mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}} \mbox{\hyperlink{code__cache_8cpp_aa0efefe21f4700d78692edc823e763be}{id}})
\item 
int \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a253f4304ce47515f5a74bd4fa3f95368}{db\+\_\+lowerbound\+\_\+i64}} (\mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}} code, \mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}} scope, \mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}} table, \mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}} \mbox{\hyperlink{code__cache_8cpp_aa0efefe21f4700d78692edc823e763be}{id}})
\item 
int \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6b0aadc926e14c0a8a5f6cc3441ad00c}{db\+\_\+upperbound\+\_\+i64}} (\mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}} code, \mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}} scope, \mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}} table, \mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}} \mbox{\hyperlink{code__cache_8cpp_aa0efefe21f4700d78692edc823e763be}{id}})
\item 
int \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ad9d6d21fd254111b1845499ad82982d2}{db\+\_\+end\+\_\+i64}} (\mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}} code, \mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}} scope, \mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}} table)
\item 
int \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ad5802c20d949ac1ef66c269abd9f4c09}{get\+\_\+action}} (\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} type, \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} index, char \texorpdfstring{$\ast$}{*}buffer, size\+\_\+t buffer\+\_\+size) const
\begin{DoxyCompactList}\small\item\em Misc methods\+: \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a4e7c7a187705892ae97250316ca9b38f}{get\+\_\+context\+\_\+free\+\_\+data}} (\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} index, char \texorpdfstring{$\ast$}{*}buffer, size\+\_\+t buffer\+\_\+size) const
\item 
\mbox{\hyperlink{classfc_1_1vector}{vector}}$<$ \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} $>$ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a2252a9a9740608f9dea5071a929cfe8f}{get\+\_\+active\+\_\+producers}} () const
\item 
\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}} \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a2ef781fcd0596791a3edb004b4f5c8c5}{next\+\_\+global\+\_\+sequence}} ()
\item 
\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}} \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_acb20a8d75fff438efadb4976a6fdce31}{next\+\_\+recv\+\_\+sequence}} (const \mbox{\hyperlink{classsysio_1_1chain_1_1account__metadata__object}{account\+\_\+metadata\+\_\+object}} \&receiver\+\_\+account)
\item 
\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}} \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa5a5520ad95838d777834dd408a2c71d}{next\+\_\+auth\+\_\+sequence}} (\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} \mbox{\hyperlink{classfc_1_1actor}{actor}})
\item 
void \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a18d1df4bf3df1229cbfd0bcdce63c06c}{add\+\_\+ram\+\_\+usage}} (\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} account, \mbox{\hyperlink{stdint_8h_a414156feea104f8f75b4ed9e3121b2f6}{int64\+\_\+t}} ram\+\_\+delta)
\item 
void \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a89069192fcd50a9ebbe656f8868e7b90}{finalize\+\_\+trace}} (\mbox{\hyperlink{structsysio_1_1chain_1_1action__trace}{action\+\_\+trace}} \&trace, const \mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} \&start)
\item 
bool \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6d7b2bfa2d819a34e9b5ba2ba709290a}{is\+\_\+context\+\_\+free}} () const
\item 
bool \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a47102cc1544ba9fd37577eba8265ce2c}{is\+\_\+privileged}} () const
\item 
\mbox{\hyperlink{namespacesysio_1_1chain_a7a1685bcc352cda9e45f055932069428}{action\+\_\+name}} \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_acdf53b50a5ac7b57b79ab281bcf24b23}{get\+\_\+receiver}} () const
\item 
const \mbox{\hyperlink{structsysio_1_1chain_1_1action}{action}} \& \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a2d651027c7e796f25382b24e58def3ef}{get\+\_\+action}} () const
\item 
\mbox{\hyperlink{namespacesysio_1_1chain_a7a1685bcc352cda9e45f055932069428}{action\+\_\+name}} \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ab4925e2f0208b9a6bd084c1d25ee218d}{get\+\_\+sender}} () const
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsysio_1_1chain_1_1controller}{controller}} \& \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}
\begin{DoxyCompactList}\small\item\em Fields\+: \end{DoxyCompactList}\item 
\mbox{\hyperlink{classchainbase_1_1database}{chainbase\+::database}} \& \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}
\begin{DoxyCompactList}\small\item\em database where state is stored \end{DoxyCompactList}\item 
\mbox{\hyperlink{classsysio_1_1chain_1_1transaction__context}{transaction\+\_\+context}} \& \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\+\_\+context}}
\begin{DoxyCompactList}\small\item\em transaction context in which the action is running \end{DoxyCompactList}\item 
std\+::vector$<$ char $>$ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a1c52613df7c14b4120213492f01a6dac}{action\+\_\+return\+\_\+value}}
\item 
\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_1_1generic__index}{generic\+\_\+index}}$<$ \mbox{\hyperlink{namespacesysio_1_1chain_a42c00d654b5b7f86a0e48b817a2cf76f}{index64\+\_\+object}} $>$ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_afdf8013faed3968597f89ea864295e9e}{idx64}}
\item 
\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_1_1generic__index}{generic\+\_\+index}}$<$ \mbox{\hyperlink{namespacesysio_1_1chain_ad0c5e87e826d54fc3433f2cf38786f38}{index128\+\_\+object}} $>$ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a8ed72869a07898bf164ce4a276812b4f}{idx128}}
\item 
\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_1_1generic__index}{generic\+\_\+index}}$<$ \mbox{\hyperlink{namespacesysio_1_1chain_a1df9b5f56e841471ba5d048993924dda}{index256\+\_\+object}}, \mbox{\hyperlink{namespacesysio_1_1chain_a896515137d9a7844105786ee3a6b1d47}{uint128\+\_\+t}} \texorpdfstring{$\ast$}{*}, const \mbox{\hyperlink{namespacesysio_1_1chain_a896515137d9a7844105786ee3a6b1d47}{uint128\+\_\+t}} \texorpdfstring{$\ast$}{*} $>$ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_af166128976eea68e664566554667d043}{idx256}}
\item 
\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_1_1generic__index}{generic\+\_\+index}}$<$ \mbox{\hyperlink{namespacesysio_1_1chain_ae2c037c54f3984f40809cbe4571abcfa}{index\+\_\+double\+\_\+object}} $>$ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a5987dcbf745594e73592c9bee4bdb126}{idx\+\_\+double}}
\item 
\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_1_1generic__index}{generic\+\_\+index}}$<$ \mbox{\hyperlink{namespacesysio_1_1chain_a52abfa935a8f9d7da62050f50e2997ba}{index\+\_\+long\+\_\+double\+\_\+object}} $>$ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a36b3d29222bf2b1305189c30596b2622}{idx\+\_\+long\+\_\+double}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a15f2962cf55ed75da1cae67309e844d5}{schedule\+\_\+action}} (\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} ordinal\+\_\+of\+\_\+action\+\_\+to\+\_\+schedule, \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} receiver, bool context\+\_\+free)
\item 
\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a31ef2b2f7484563f029fe31f2ffcabd9}{schedule\+\_\+action}} (\mbox{\hyperlink{structsysio_1_1chain_1_1action}{action}} \&\&act\+\_\+to\+\_\+schedule, \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} receiver, bool context\+\_\+free)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{apply__context_8hpp_source_l00018}{18}} of file \mbox{\hyperlink{apply__context_8hpp_source}{apply\+\_\+context.\+hpp}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a87005d2140a4c7884277d2c775a86000}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!apply\_context@{apply\_context}}
\index{apply\_context@{apply\_context}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{apply\_context()}{apply\_context()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a87005d2140a4c7884277d2c775a86000} 
sysio\+::chain\+::apply\+\_\+context\+::apply\+\_\+context (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classsysio_1_1chain_1_1controller}{controller}} \&}]{con}{, }\item[{\mbox{\hyperlink{classsysio_1_1chain_1_1transaction__context}{transaction\+\_\+context}} \&}]{trx\+\_\+ctx}{, }\item[{\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}}}]{action\+\_\+ordinal}{, }\item[{\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}}}]{depth}{ = {\ttfamily 0}}\end{DoxyParamCaption})}

Constructor 

Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00034}{34}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00035\ :\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}(con)}
\DoxyCodeLine{00036\ ,\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}(con.mutable\_db())}
\DoxyCodeLine{00037\ ,\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}(trx\_ctx)}
\DoxyCodeLine{00038\ ,recurse\_depth(depth)}
\DoxyCodeLine{00039\ ,first\_receiver\_action\_ordinal(action\_ordinal)}
\DoxyCodeLine{00040\ ,action\_ordinal(action\_ordinal)}
\DoxyCodeLine{00041\ ,\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_afdf8013faed3968597f89ea864295e9e}{idx64}}(*\textcolor{keyword}{this})}
\DoxyCodeLine{00042\ ,\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a8ed72869a07898bf164ce4a276812b4f}{idx128}}(*\textcolor{keyword}{this})}
\DoxyCodeLine{00043\ ,\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_af166128976eea68e664566554667d043}{idx256}}(*\textcolor{keyword}{this})}
\DoxyCodeLine{00044\ ,\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a5987dcbf745594e73592c9bee4bdb126}{idx\_double}}(*\textcolor{keyword}{this})}
\DoxyCodeLine{00045\ ,\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a36b3d29222bf2b1305189c30596b2622}{idx\_long\_double}}(*\textcolor{keyword}{this})}
\DoxyCodeLine{00046\ \{}
\DoxyCodeLine{00047\ \ \ \ action\_trace\&\ trace\ =\ trx\_ctx.get\_action\_trace(action\_ordinal);}
\DoxyCodeLine{00048\ \ \ \ act\ =\ \&trace.act;}
\DoxyCodeLine{00049\ \ \ \ receiver\ =\ trace.receiver;}
\DoxyCodeLine{00050\ \ \ \ context\_free\ =\ trace.context\_free;}
\DoxyCodeLine{00051\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a18d1df4bf3df1229cbfd0bcdce63c06c}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!add\_ram\_usage@{add\_ram\_usage}}
\index{add\_ram\_usage@{add\_ram\_usage}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{add\_ram\_usage()}{add\_ram\_usage()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a18d1df4bf3df1229cbfd0bcdce63c06c} 
void sysio\+::chain\+::apply\+\_\+context\+::add\+\_\+ram\+\_\+usage (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}}}]{account}{, }\item[{\mbox{\hyperlink{stdint_8h_a414156feea104f8f75b4ed9e3121b2f6}{int64\+\_\+t}}}]{ram\+\_\+delta}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l01050}{1050}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01051\ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.add\_ram\_usage(\ account,\ ram\_delta\ );}
\DoxyCodeLine{01052\ }
\DoxyCodeLine{01053\ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{bn_8cpp_a8b0eadcc506862e9d751ab45185053aa}{p}}\ =\ \_account\_ram\_deltas.emplace(\ account,\ ram\_delta\ );}
\DoxyCodeLine{01054\ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{bn_8cpp_a8b0eadcc506862e9d751ab45185053aa}{p}}.second\ )\ \{}
\DoxyCodeLine{01055\ \ \ \ \ \ \ \mbox{\hyperlink{bn_8cpp_a8b0eadcc506862e9d751ab45185053aa}{p}}.first-\/>delta\ +=\ ram\_delta;}
\DoxyCodeLine{01056\ \ \ \ \}}
\DoxyCodeLine{01057\ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_a18d1df4bf3df1229cbfd0bcdce63c06c_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a11dd9c8743b410d5007894bbc786f4ce}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!cancel\_deferred\_transaction@{cancel\_deferred\_transaction}}
\index{cancel\_deferred\_transaction@{cancel\_deferred\_transaction}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{cancel\_deferred\_transaction()}{cancel\_deferred\_transaction()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a11dd9c8743b410d5007894bbc786f4ce} 
bool sysio\+::chain\+::apply\+\_\+context\+::cancel\+\_\+deferred\+\_\+transaction (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_a896515137d9a7844105786ee3a6b1d47}{uint128\+\_\+t}} \&}]{sender\+\_\+id}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{apply__context_8hpp_source_l00502}{502}} of file \mbox{\hyperlink{apply__context_8hpp_source}{apply\+\_\+context.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00502\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a2310a1978f97847e770f7525391d0abc}{cancel\_deferred\_transaction}}(sender\_id,\ receiver);\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=209pt]{classsysio_1_1chain_1_1apply__context_a11dd9c8743b410d5007894bbc786f4ce_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=209pt]{classsysio_1_1chain_1_1apply__context_a11dd9c8743b410d5007894bbc786f4ce_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a2310a1978f97847e770f7525391d0abc}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!cancel\_deferred\_transaction@{cancel\_deferred\_transaction}}
\index{cancel\_deferred\_transaction@{cancel\_deferred\_transaction}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{cancel\_deferred\_transaction()}{cancel\_deferred\_transaction()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a2310a1978f97847e770f7525391d0abc} 
bool sysio\+::chain\+::apply\+\_\+context\+::cancel\+\_\+deferred\+\_\+transaction (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_a896515137d9a7844105786ee3a6b1d47}{uint128\+\_\+t}} \&}]{sender\+\_\+id}{, }\item[{\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}}}]{sender}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00626}{626}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00626\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00627\ \ \ \ \textcolor{keyword}{auto}\&\ generated\_transaction\_idx\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}.\mbox{\hyperlink{classchainbase_1_1database_afaea057692a8bbbf3f506b64c60308b6}{get\_mutable\_index}}<\mbox{\hyperlink{namespacesysio_1_1chain_a9e9842ee49526c2423e014a696edc602}{generated\_transaction\_multi\_index}}>();}
\DoxyCodeLine{00628\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}*\ gto\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}.\mbox{\hyperlink{classchainbase_1_1database_aa5a2ca0da0092693ac49b36b7ec6817a}{find}}<generated\_transaction\_object,by\_sender\_id>(boost::make\_tuple(sender,\ sender\_id));}
\DoxyCodeLine{00629\ \ \ \ \textcolor{keywordflow}{if}\ (\ gto\ )\ \{}
\DoxyCodeLine{00630\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{auto}\ dm\_logger\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a4f6404b355a3a4bf7fb60c92e85443d1}{get\_deep\_mind\_logger}}())\ \{}
\DoxyCodeLine{00631\ \ \ \ \ \ \ \ \ \ dm\_logger-\/>on\_cancel\_deferred(\mbox{\hyperlink{classsysio_1_1chain_1_1deep__mind__handler_a78bf0c79493a90c71cb28aa761f44fd2a334c4a4c42fdb79d7ebc3e73b517e6f8}{deep\_mind\_handler::operation\_qualifier::none}},\ *gto);}
\DoxyCodeLine{00632\ \ \ \ \ \ \ \ \ \ dm\_logger-\/>on\_ram\_trace(\mbox{\hyperlink{deep__mind_8hpp_aaaa2f1dbd522de03ccbaa73f01db5f50}{RAM\_EVENT\_ID}}(\textcolor{stringliteral}{"{}\$\{id\}"{}},\ (\textcolor{stringliteral}{"{}id"{}},\ gto-\/>id)),\ \textcolor{stringliteral}{"{}deferred\_trx"{}},\ \textcolor{stringliteral}{"{}cancel"{}},\ \textcolor{stringliteral}{"{}deferred\_trx\_cancel"{}});}
\DoxyCodeLine{00633\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00634\ }
\DoxyCodeLine{00635\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a18d1df4bf3df1229cbfd0bcdce63c06c}{add\_ram\_usage}}(\ gto-\/>payer,\ -\/(\mbox{\hyperlink{namespacesysio_1_1chain_1_1config_a2772c77657b1f6fda680bbe8f7282d13}{config::billable\_size\_v<generated\_transaction\_object>}}\ +\ gto-\/>packed\_trx.size())\ );}
\DoxyCodeLine{00636\ \ \ \ \ \ \ generated\_transaction\_idx.remove(*gto);}
\DoxyCodeLine{00637\ \ \ \ \}}
\DoxyCodeLine{00638\ \ \ \ \textcolor{keywordflow}{return}\ gto;}
\DoxyCodeLine{00639\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_a2310a1978f97847e770f7525391d0abc_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_ae25be4ae1a013df520cc4855e64921f2}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!console\_append@{console\_append}}
\index{console\_append@{console\_append}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{console\_append()}{console\_append()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_ae25be4ae1a013df520cc4855e64921f2} 
void sysio\+::chain\+::apply\+\_\+context\+::console\+\_\+append (\begin{DoxyParamCaption}\item[{std\+::string\+\_\+view}]{val}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{apply__context_8hpp_source_l00547}{547}} of file \mbox{\hyperlink{apply__context_8hpp_source}{apply\+\_\+context.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \ \_pending\_console\_output\ +=\ val;}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsysio_1_1chain_1_1apply__context_ad9d6d21fd254111b1845499ad82982d2}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!db\_end\_i64@{db\_end\_i64}}
\index{db\_end\_i64@{db\_end\_i64}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{db\_end\_i64()}{db\_end\_i64()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_ad9d6d21fd254111b1845499ad82982d2} 
int sysio\+::chain\+::apply\+\_\+context\+::db\+\_\+end\+\_\+i64 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}}}]{code}{, }\item[{\mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}}}]{scope}{, }\item[{\mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}}}]{table}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l01019}{1019}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01019\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01020\ \ \ \ \textcolor{comment}{//require\_read\_lock(\ code,\ scope\ );\ //\ redundant?}}
\DoxyCodeLine{01021\ }
\DoxyCodeLine{01022\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}*\ tab\ =\ find\_table(\ code,\ scope,\ table\ );}
\DoxyCodeLine{01023\ \ \ \ \textcolor{keywordflow}{if}(\ !tab\ )\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{01024\ }
\DoxyCodeLine{01025\ \ \ \ \textcolor{keywordflow}{return}\ keyval\_cache.cache\_table(\ *tab\ );}
\DoxyCodeLine{01026\ \}}

\end{DoxyCode}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a4a6ba829713d78125e8f5b5cc7296137}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!db\_find\_i64@{db\_find\_i64}}
\index{db\_find\_i64@{db\_find\_i64}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{db\_find\_i64()}{db\_find\_i64()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a4a6ba829713d78125e8f5b5cc7296137} 
int sysio\+::chain\+::apply\+\_\+context\+::db\+\_\+find\+\_\+i64 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}}}]{code}{, }\item[{\mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}}}]{scope}{, }\item[{\mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}}}]{table}{, }\item[{\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}}}]{id}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00973}{973}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00973\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00974\ \ \ \ \textcolor{comment}{//require\_read\_lock(\ code,\ scope\ );\ //\ redundant?}}
\DoxyCodeLine{00975\ }
\DoxyCodeLine{00976\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}*\ tab\ =\ find\_table(\ code,\ scope,\ table\ );}
\DoxyCodeLine{00977\ \ \ \ \textcolor{keywordflow}{if}(\ !tab\ )\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00978\ }
\DoxyCodeLine{00979\ \ \ \ \textcolor{keyword}{auto}\ table\_end\_itr\ =\ keyval\_cache.cache\_table(\ *tab\ );}
\DoxyCodeLine{00980\ }
\DoxyCodeLine{00981\ \ \ \ \textcolor{keyword}{const}\ key\_value\_object*\ obj\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}.\mbox{\hyperlink{classchainbase_1_1database_aa5a2ca0da0092693ac49b36b7ec6817a}{find}}<key\_value\_object,\ by\_scope\_primary>(\ boost::make\_tuple(\ tab-\/>id,\ \textcolor{keywordtype}{id}\ )\ );}
\DoxyCodeLine{00982\ \ \ \ \textcolor{keywordflow}{if}(\ !obj\ )\ \textcolor{keywordflow}{return}\ table\_end\_itr;}
\DoxyCodeLine{00983\ }
\DoxyCodeLine{00984\ \ \ \ \textcolor{keywordflow}{return}\ keyval\_cache.add(\ *obj\ );}
\DoxyCodeLine{00985\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_a4a6ba829713d78125e8f5b5cc7296137_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a5fb0e439b9a43df576ddea6c944759c1}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!db\_get\_i64@{db\_get\_i64}}
\index{db\_get\_i64@{db\_get\_i64}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{db\_get\_i64()}{db\_get\_i64()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a5fb0e439b9a43df576ddea6c944759c1} 
int sysio\+::chain\+::apply\+\_\+context\+::db\+\_\+get\+\_\+i64 (\begin{DoxyParamCaption}\item[{int}]{iterator}{, }\item[{char \texorpdfstring{$\ast$}{*}}]{buffer}{, }\item[{size\+\_\+t}]{buffer\+\_\+size}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00914}{914}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00914\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00915\ \ \ \ \textcolor{keyword}{const}\ key\_value\_object\&\ obj\ =\ keyval\_cache.get(\ iterator\ );}
\DoxyCodeLine{00916\ }
\DoxyCodeLine{00917\ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}\ =\ obj.value.size();}
\DoxyCodeLine{00918\ \ \ \ \textcolor{keywordflow}{if}(\ buffer\_size\ ==\ 0\ )\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}};}
\DoxyCodeLine{00919\ }
\DoxyCodeLine{00920\ \ \ \ \textcolor{keyword}{auto}\ copy\_size\ =\ std::min(\ buffer\_size,\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}\ );}
\DoxyCodeLine{00921\ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_ae785d5badbf1f08b491af31f32a135a1}{memcpy}}(\ buffer,\ obj.value.data(),\ copy\_size\ );}
\DoxyCodeLine{00922\ }
\DoxyCodeLine{00923\ \ \ \ \textcolor{keywordflow}{return}\ copy\_size;}
\DoxyCodeLine{00924\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=342pt]{classsysio_1_1chain_1_1apply__context_a5fb0e439b9a43df576ddea6c944759c1_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a253f4304ce47515f5a74bd4fa3f95368}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!db\_lowerbound\_i64@{db\_lowerbound\_i64}}
\index{db\_lowerbound\_i64@{db\_lowerbound\_i64}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{db\_lowerbound\_i64()}{db\_lowerbound\_i64()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a253f4304ce47515f5a74bd4fa3f95368} 
int sysio\+::chain\+::apply\+\_\+context\+::db\+\_\+lowerbound\+\_\+i64 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}}}]{code}{, }\item[{\mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}}}]{scope}{, }\item[{\mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}}}]{table}{, }\item[{\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}}}]{id}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00987}{987}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00987\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00988\ \ \ \ \textcolor{comment}{//require\_read\_lock(\ code,\ scope\ );\ //\ redundant?}}
\DoxyCodeLine{00989\ }
\DoxyCodeLine{00990\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}*\ tab\ =\ find\_table(\ code,\ scope,\ table\ );}
\DoxyCodeLine{00991\ \ \ \ \textcolor{keywordflow}{if}(\ !tab\ )\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00992\ }
\DoxyCodeLine{00993\ \ \ \ \textcolor{keyword}{auto}\ table\_end\_itr\ =\ keyval\_cache.cache\_table(\ *tab\ );}
\DoxyCodeLine{00994\ }
\DoxyCodeLine{00995\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{namespacehost__functions__tests__1_a8496a24b5236a2dc07bb4f2930d88342}{idx}}\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}.\mbox{\hyperlink{classchainbase_1_1database_a4d5297635dcf70be481d9b600da9bc13}{get\_index}}<\mbox{\hyperlink{namespacesysio_1_1chain_aac1a2c1330fcb6c8002d59d4d1de5858}{key\_value\_index}},\ by\_scope\_primary>();}
\DoxyCodeLine{00996\ \ \ \ \textcolor{keyword}{auto}\ itr\ =\ \mbox{\hyperlink{namespacehost__functions__tests__1_a8496a24b5236a2dc07bb4f2930d88342}{idx}}.lower\_bound(\ boost::make\_tuple(\ tab-\/>id,\ \textcolor{keywordtype}{id}\ )\ );}
\DoxyCodeLine{00997\ \ \ \ \textcolor{keywordflow}{if}(\ itr\ ==\ \mbox{\hyperlink{namespacehost__functions__tests__1_a8496a24b5236a2dc07bb4f2930d88342}{idx}}.end()\ )\ \textcolor{keywordflow}{return}\ table\_end\_itr;}
\DoxyCodeLine{00998\ \ \ \ \textcolor{keywordflow}{if}(\ itr-\/>t\_id\ !=\ tab-\/>id\ )\ \textcolor{keywordflow}{return}\ table\_end\_itr;}
\DoxyCodeLine{00999\ }
\DoxyCodeLine{01000\ \ \ \ \textcolor{keywordflow}{return}\ keyval\_cache.add(\ *itr\ );}
\DoxyCodeLine{01001\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_a253f4304ce47515f5a74bd4fa3f95368_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a78451562bdb87ec31112731f61acde2e}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!db\_next\_i64@{db\_next\_i64}}
\index{db\_next\_i64@{db\_next\_i64}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{db\_next\_i64()}{db\_next\_i64()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a78451562bdb87ec31112731f61acde2e} 
int sysio\+::chain\+::apply\+\_\+context\+::db\+\_\+next\+\_\+i64 (\begin{DoxyParamCaption}\item[{int}]{iterator}{, }\item[{\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}} \&}]{primary}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00926}{926}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00926\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00927\ \ \ \ \textcolor{keywordflow}{if}(\ iterator\ <\ -\/1\ )\ \textcolor{keywordflow}{return}\ -\/1;\ \textcolor{comment}{//\ cannot\ increment\ past\ end\ iterator\ of\ table}}
\DoxyCodeLine{00928\ }
\DoxyCodeLine{00929\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ obj\ =\ keyval\_cache.get(\ iterator\ );\ \textcolor{comment}{//\ Check\ for\ iterator\ !=\ -\/1\ happens\ in\ this\ call}}
\DoxyCodeLine{00930\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{namespacehost__functions__tests__1_a8496a24b5236a2dc07bb4f2930d88342}{idx}}\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}.\mbox{\hyperlink{classchainbase_1_1database_a4d5297635dcf70be481d9b600da9bc13}{get\_index}}<\mbox{\hyperlink{namespacesysio_1_1chain_aac1a2c1330fcb6c8002d59d4d1de5858}{key\_value\_index}},\ by\_scope\_primary>();}
\DoxyCodeLine{00931\ }
\DoxyCodeLine{00932\ \ \ \ \textcolor{keyword}{auto}\ itr\ =\ \mbox{\hyperlink{namespacehost__functions__tests__1_a8496a24b5236a2dc07bb4f2930d88342}{idx}}.iterator\_to(\ obj\ );}
\DoxyCodeLine{00933\ \ \ \ ++itr;}
\DoxyCodeLine{00934\ }
\DoxyCodeLine{00935\ \ \ \ \textcolor{keywordflow}{if}(\ itr\ ==\ \mbox{\hyperlink{namespacehost__functions__tests__1_a8496a24b5236a2dc07bb4f2930d88342}{idx}}.end()\ ||\ itr-\/>t\_id\ !=\ obj.t\_id\ )\ \textcolor{keywordflow}{return}\ keyval\_cache.get\_end\_iterator\_by\_table\_id(obj.t\_id);}
\DoxyCodeLine{00936\ }
\DoxyCodeLine{00937\ \ \ \ primary\ =\ itr-\/>primary\_key;}
\DoxyCodeLine{00938\ \ \ \ \textcolor{keywordflow}{return}\ keyval\_cache.add(\ *itr\ );}
\DoxyCodeLine{00939\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_a78451562bdb87ec31112731f61acde2e_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_ab6bf0461d3d359d5da63bf8d0338ccab}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!db\_previous\_i64@{db\_previous\_i64}}
\index{db\_previous\_i64@{db\_previous\_i64}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{db\_previous\_i64()}{db\_previous\_i64()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_ab6bf0461d3d359d5da63bf8d0338ccab} 
int sysio\+::chain\+::apply\+\_\+context\+::db\+\_\+previous\+\_\+i64 (\begin{DoxyParamCaption}\item[{int}]{iterator}{, }\item[{\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}} \&}]{primary}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00941}{941}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00941\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00942\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{namespacehost__functions__tests__1_a8496a24b5236a2dc07bb4f2930d88342}{idx}}\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}.\mbox{\hyperlink{classchainbase_1_1database_a4d5297635dcf70be481d9b600da9bc13}{get\_index}}<\mbox{\hyperlink{namespacesysio_1_1chain_aac1a2c1330fcb6c8002d59d4d1de5858}{key\_value\_index}},\ by\_scope\_primary>();}
\DoxyCodeLine{00943\ }
\DoxyCodeLine{00944\ \ \ \ \textcolor{keywordflow}{if}(\ iterator\ <\ -\/1\ )\ \textcolor{comment}{//\ is\ end\ iterator}}
\DoxyCodeLine{00945\ \ \ \ \{}
\DoxyCodeLine{00946\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ tab\ =\ keyval\_cache.find\_table\_by\_end\_iterator(iterator);}
\DoxyCodeLine{00947\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ tab,\ invalid\_table\_iterator,\ \textcolor{stringliteral}{"{}not\ a\ valid\ end\ iterator"{}}\ );}
\DoxyCodeLine{00948\ }
\DoxyCodeLine{00949\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ itr\ =\ \mbox{\hyperlink{namespacehost__functions__tests__1_a8496a24b5236a2dc07bb4f2930d88342}{idx}}.upper\_bound(tab-\/>id);}
\DoxyCodeLine{00950\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{namespacehost__functions__tests__1_a8496a24b5236a2dc07bb4f2930d88342}{idx}}.begin()\ ==\ \mbox{\hyperlink{namespacehost__functions__tests__1_a8496a24b5236a2dc07bb4f2930d88342}{idx}}.end()\ ||\ itr\ ==\ \mbox{\hyperlink{namespacehost__functions__tests__1_a8496a24b5236a2dc07bb4f2930d88342}{idx}}.begin()\ )\ \textcolor{keywordflow}{return}\ -\/1;\ \textcolor{comment}{//\ Empty\ table}}
\DoxyCodeLine{00951\ }
\DoxyCodeLine{00952\ \ \ \ \ \ \ -\/-\/itr;}
\DoxyCodeLine{00953\ }
\DoxyCodeLine{00954\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ itr-\/>t\_id\ !=\ tab-\/>id\ )\ \textcolor{keywordflow}{return}\ -\/1;\ \textcolor{comment}{//\ Empty\ table}}
\DoxyCodeLine{00955\ }
\DoxyCodeLine{00956\ \ \ \ \ \ \ primary\ =\ itr-\/>primary\_key;}
\DoxyCodeLine{00957\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ keyval\_cache.add(*itr);}
\DoxyCodeLine{00958\ \ \ \ \}}
\DoxyCodeLine{00959\ }
\DoxyCodeLine{00960\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ obj\ =\ keyval\_cache.get(iterator);\ \textcolor{comment}{//\ Check\ for\ iterator\ !=\ -\/1\ happens\ in\ this\ call}}
\DoxyCodeLine{00961\ }
\DoxyCodeLine{00962\ \ \ \ \textcolor{keyword}{auto}\ itr\ =\ \mbox{\hyperlink{namespacehost__functions__tests__1_a8496a24b5236a2dc07bb4f2930d88342}{idx}}.iterator\_to(obj);}
\DoxyCodeLine{00963\ \ \ \ \textcolor{keywordflow}{if}(\ itr\ ==\ \mbox{\hyperlink{namespacehost__functions__tests__1_a8496a24b5236a2dc07bb4f2930d88342}{idx}}.begin()\ )\ \textcolor{keywordflow}{return}\ -\/1;\ \textcolor{comment}{//\ cannot\ decrement\ past\ beginning\ iterator\ of\ table}}
\DoxyCodeLine{00964\ }
\DoxyCodeLine{00965\ \ \ \ -\/-\/itr;}
\DoxyCodeLine{00966\ }
\DoxyCodeLine{00967\ \ \ \ \textcolor{keywordflow}{if}(\ itr-\/>t\_id\ !=\ obj.t\_id\ )\ \textcolor{keywordflow}{return}\ -\/1;\ \textcolor{comment}{//\ cannot\ decrement\ past\ beginning\ iterator\ of\ table}}
\DoxyCodeLine{00968\ }
\DoxyCodeLine{00969\ \ \ \ primary\ =\ itr-\/>primary\_key;}
\DoxyCodeLine{00970\ \ \ \ \textcolor{keywordflow}{return}\ keyval\_cache.add(*itr);}
\DoxyCodeLine{00971\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_ab6bf0461d3d359d5da63bf8d0338ccab_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_abd131f26bc83416fb97a05392ae68429}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!db\_remove\_i64@{db\_remove\_i64}}
\index{db\_remove\_i64@{db\_remove\_i64}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{db\_remove\_i64()}{db\_remove\_i64()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_abd131f26bc83416fb97a05392ae68429} 
void sysio\+::chain\+::apply\+\_\+context\+::db\+\_\+remove\+\_\+i64 (\begin{DoxyParamCaption}\item[{int}]{iterator}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00878}{878}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00878\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00879\ \ \ \ \textcolor{keyword}{const}\ key\_value\_object\&\ obj\ =\ keyval\_cache.get(\ iterator\ );}
\DoxyCodeLine{00880\ }
\DoxyCodeLine{00881\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ table\_obj\ =\ keyval\_cache.get\_table(\ obj.t\_id\ );}
\DoxyCodeLine{00882\ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ table\_obj.code\ ==\ receiver,\ table\_access\_violation,\ \textcolor{stringliteral}{"{}db\ access\ violation"{}}\ );}
\DoxyCodeLine{00883\ }
\DoxyCodeLine{00884\ \textcolor{comment}{//\ \ \ require\_write\_lock(\ table\_obj.scope\ );}}
\DoxyCodeLine{00885\ }
\DoxyCodeLine{00886\ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{auto}\ dm\_logger\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a4f6404b355a3a4bf7fb60c92e85443d1}{get\_deep\_mind\_logger}}())\ \{}
\DoxyCodeLine{00887\ \ \ \ \ \ \ std::string\ event\_id\ =\ \mbox{\hyperlink{deep__mind_8hpp_aaaa2f1dbd522de03ccbaa73f01db5f50}{RAM\_EVENT\_ID}}(\textcolor{stringliteral}{"{}\$\{table\_code\}:\$\{scope\}:\$\{table\_name\}:\$\{primkey\}"{}},}
\DoxyCodeLine{00888\ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}table\_code"{}},\ table\_obj.code)}
\DoxyCodeLine{00889\ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}scope"{}},\ table\_obj.scope)}
\DoxyCodeLine{00890\ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}table\_name"{}},\ table\_obj.table)}
\DoxyCodeLine{00891\ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}primkey"{}},\ \mbox{\hyperlink{catch__reporter__console_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}(obj.primary\_key))}
\DoxyCodeLine{00892\ \ \ \ \ \ \ );}
\DoxyCodeLine{00893\ \ \ \ \ \ \ dm\_logger-\/>on\_ram\_trace(std::move(event\_id),\ \textcolor{stringliteral}{"{}table\_row"{}},\ \textcolor{stringliteral}{"{}remove"{}},\ \textcolor{stringliteral}{"{}primary\_index\_remove"{}});}
\DoxyCodeLine{00894\ \ \ \ \}}
\DoxyCodeLine{00895\ }
\DoxyCodeLine{00896\ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a49f2feb0d0ce2cb21c74f871432392e9}{update\_db\_usage}}(\ obj.payer,\ \ -\/(obj.value.size()\ +\ \mbox{\hyperlink{namespacesysio_1_1chain_1_1config_a2772c77657b1f6fda680bbe8f7282d13}{config::billable\_size\_v<key\_value\_object>}})\ );}
\DoxyCodeLine{00897\ }
\DoxyCodeLine{00898\ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{auto}\ dm\_logger\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a4f6404b355a3a4bf7fb60c92e85443d1}{get\_deep\_mind\_logger}}())\ \{}
\DoxyCodeLine{00899\ \ \ \ \ \ \ dm\_logger-\/>on\_db\_remove\_i64(table\_obj,\ obj);}
\DoxyCodeLine{00900\ \ \ \ \}}
\DoxyCodeLine{00901\ }
\DoxyCodeLine{00902\ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}.\mbox{\hyperlink{classchainbase_1_1database_a9ebc006075e8fc2e84357a0e068b58d4}{modify}}(\ table\_obj,\ [\&](\ \textcolor{keyword}{auto}\&\ t\ )\ \{}
\DoxyCodeLine{00903\ \ \ \ \ \ \ -\/-\/t.count;}
\DoxyCodeLine{00904\ \ \ \ \});}
\DoxyCodeLine{00905\ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}.\mbox{\hyperlink{classchainbase_1_1database_ac6bb29708e4fdfb6899028e3c351fe0b}{remove}}(\ obj\ );}
\DoxyCodeLine{00906\ }
\DoxyCodeLine{00907\ \ \ \ \textcolor{keywordflow}{if}\ (table\_obj.count\ ==\ 0)\ \{}
\DoxyCodeLine{00908\ \ \ \ \ \ \ remove\_table(table\_obj);}
\DoxyCodeLine{00909\ \ \ \ \}}
\DoxyCodeLine{00910\ }
\DoxyCodeLine{00911\ \ \ \ keyval\_cache.remove(\ iterator\ );}
\DoxyCodeLine{00912\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_abd131f26bc83416fb97a05392ae68429_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a525b0d91b1afb457e7371ff689fcefda}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!db\_store\_i64@{db\_store\_i64}}
\index{db\_store\_i64@{db\_store\_i64}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{db\_store\_i64()}{db\_store\_i64()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a525b0d91b1afb457e7371ff689fcefda} 
int sysio\+::chain\+::apply\+\_\+context\+::db\+\_\+store\+\_\+i64 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}}}]{scope}{, }\item[{\mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}}}]{table}{, }\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} \&}]{payer}{, }\item[{\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}}}]{id}{, }\item[{const char \texorpdfstring{$\ast$}{*}}]{buffer}{, }\item[{size\+\_\+t}]{buffer\+\_\+size}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00778}{778}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00778\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00779\ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a525b0d91b1afb457e7371ff689fcefda}{db\_store\_i64}}(\ receiver,\ scope,\ table,\ payer,\ \textcolor{keywordtype}{id},\ buffer,\ buffer\_size);}
\DoxyCodeLine{00780\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=195pt]{classsysio_1_1chain_1_1apply__context_a525b0d91b1afb457e7371ff689fcefda_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=195pt]{classsysio_1_1chain_1_1apply__context_a525b0d91b1afb457e7371ff689fcefda_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_ab42c195679823907132298609509f36c}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!db\_update\_i64@{db\_update\_i64}}
\index{db\_update\_i64@{db\_update\_i64}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{db\_update\_i64()}{db\_update\_i64()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_ab42c195679823907132298609509f36c} 
void sysio\+::chain\+::apply\+\_\+context\+::db\+\_\+update\+\_\+i64 (\begin{DoxyParamCaption}\item[{int}]{iterator}{, }\item[{\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}}}]{payer}{, }\item[{const char \texorpdfstring{$\ast$}{*}}]{buffer}{, }\item[{size\+\_\+t}]{buffer\+\_\+size}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00822}{822}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00822\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00823\ \ \ \ \textcolor{keyword}{const}\ key\_value\_object\&\ obj\ =\ keyval\_cache.get(\ iterator\ );}
\DoxyCodeLine{00824\ }
\DoxyCodeLine{00825\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ table\_obj\ =\ keyval\_cache.get\_table(\ obj.t\_id\ );}
\DoxyCodeLine{00826\ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ table\_obj.code\ ==\ receiver,\ table\_access\_violation,\ \textcolor{stringliteral}{"{}db\ access\ violation"{}}\ );}
\DoxyCodeLine{00827\ }
\DoxyCodeLine{00828\ \textcolor{comment}{//\ \ \ require\_write\_lock(\ table\_obj.scope\ );}}
\DoxyCodeLine{00829\ }
\DoxyCodeLine{00830\ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{stdint_8h_a414156feea104f8f75b4ed9e3121b2f6}{int64\_t}}\ overhead\ =\ \mbox{\hyperlink{namespacesysio_1_1chain_1_1config_a2772c77657b1f6fda680bbe8f7282d13}{config::billable\_size\_v<key\_value\_object>}};}
\DoxyCodeLine{00831\ \ \ \ \mbox{\hyperlink{stdint_8h_a414156feea104f8f75b4ed9e3121b2f6}{int64\_t}}\ old\_size\ =\ (\mbox{\hyperlink{stdint_8h_a414156feea104f8f75b4ed9e3121b2f6}{int64\_t}})(obj.value.size()\ +\ overhead);}
\DoxyCodeLine{00832\ \ \ \ \mbox{\hyperlink{stdint_8h_a414156feea104f8f75b4ed9e3121b2f6}{int64\_t}}\ new\_size\ =\ (\mbox{\hyperlink{stdint_8h_a414156feea104f8f75b4ed9e3121b2f6}{int64\_t}})(buffer\_size\ +\ overhead);}
\DoxyCodeLine{00833\ }
\DoxyCodeLine{00834\ \ \ \ \textcolor{keywordflow}{if}(\ payer\ ==\ \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\_name}}()\ )\ payer\ =\ obj.payer;}
\DoxyCodeLine{00835\ }
\DoxyCodeLine{00836\ \ \ \ std::string\ event\_id;}
\DoxyCodeLine{00837\ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a4f6404b355a3a4bf7fb60c92e85443d1}{get\_deep\_mind\_logger}}()\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00838\ \ \ \ \ \ \ event\_id\ =\ \mbox{\hyperlink{deep__mind_8hpp_aaaa2f1dbd522de03ccbaa73f01db5f50}{RAM\_EVENT\_ID}}(\textcolor{stringliteral}{"{}\$\{table\_code\}:\$\{scope\}:\$\{table\_name\}:\$\{primkey\}"{}},}
\DoxyCodeLine{00839\ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}table\_code"{}},\ table\_obj.code)}
\DoxyCodeLine{00840\ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}scope"{}},\ table\_obj.scope)}
\DoxyCodeLine{00841\ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}table\_name"{}},\ table\_obj.table)}
\DoxyCodeLine{00842\ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}primkey"{}},\ \mbox{\hyperlink{catch__reporter__console_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}(obj.primary\_key))}
\DoxyCodeLine{00843\ \ \ \ \ \ \ );}
\DoxyCodeLine{00844\ \ \ \ \}}
\DoxyCodeLine{00845\ }
\DoxyCodeLine{00846\ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\_name}}(obj.payer)\ !=\ payer\ )\ \{}
\DoxyCodeLine{00847\ \ \ \ \ \ \ \textcolor{comment}{//\ refund\ the\ existing\ payer}}
\DoxyCodeLine{00848\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{auto}\ dm\_logger\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a4f6404b355a3a4bf7fb60c92e85443d1}{get\_deep\_mind\_logger}}())}
\DoxyCodeLine{00849\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00850\ \ \ \ \ \ \ \ \ \ dm\_logger-\/>on\_ram\_trace(std::string(event\_id),\ \textcolor{stringliteral}{"{}table\_row"{}},\ \textcolor{stringliteral}{"{}remove"{}},\ \textcolor{stringliteral}{"{}primary\_index\_update\_remove\_old\_payer"{}});}
\DoxyCodeLine{00851\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00852\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a49f2feb0d0ce2cb21c74f871432392e9}{update\_db\_usage}}(\ obj.payer,\ \ -\/(old\_size)\ );}
\DoxyCodeLine{00853\ \ \ \ \ \ \ \textcolor{comment}{//\ charge\ the\ new\ payer}}
\DoxyCodeLine{00854\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{auto}\ dm\_logger\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a4f6404b355a3a4bf7fb60c92e85443d1}{get\_deep\_mind\_logger}}())}
\DoxyCodeLine{00855\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00856\ \ \ \ \ \ \ \ \ \ dm\_logger-\/>on\_ram\_trace(std::move(event\_id),\ \textcolor{stringliteral}{"{}table\_row"{}},\ \textcolor{stringliteral}{"{}add"{}},\ \textcolor{stringliteral}{"{}primary\_index\_update\_add\_new\_payer"{}});}
\DoxyCodeLine{00857\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00858\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a49f2feb0d0ce2cb21c74f871432392e9}{update\_db\_usage}}(\ payer,\ \ (new\_size));}
\DoxyCodeLine{00859\ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(old\_size\ !=\ new\_size)\ \{}
\DoxyCodeLine{00860\ \ \ \ \ \ \ \textcolor{comment}{//\ charge/refund\ the\ existing\ payer\ the\ difference}}
\DoxyCodeLine{00861\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{auto}\ dm\_logger\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a4f6404b355a3a4bf7fb60c92e85443d1}{get\_deep\_mind\_logger}}())}
\DoxyCodeLine{00862\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00863\ \ \ \ \ \ \ \ \ \ dm\_logger-\/>on\_ram\_trace(std::move(event\_id)\ ,\ \textcolor{stringliteral}{"{}table\_row"{}},\ \textcolor{stringliteral}{"{}update"{}},\ \textcolor{stringliteral}{"{}primary\_index\_update"{}});}
\DoxyCodeLine{00864\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00865\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a49f2feb0d0ce2cb21c74f871432392e9}{update\_db\_usage}}(\ obj.payer,\ new\_size\ -\/\ old\_size);}
\DoxyCodeLine{00866\ \ \ \ \}}
\DoxyCodeLine{00867\ }
\DoxyCodeLine{00868\ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{auto}\ dm\_logger\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a4f6404b355a3a4bf7fb60c92e85443d1}{get\_deep\_mind\_logger}}())\ \{}
\DoxyCodeLine{00869\ \ \ \ \ \ \ dm\_logger-\/>on\_db\_update\_i64(table\_obj,\ obj,\ payer,\ buffer,\ buffer\_size);}
\DoxyCodeLine{00870\ \ \ \ \}}
\DoxyCodeLine{00871\ }
\DoxyCodeLine{00872\ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}.\mbox{\hyperlink{classchainbase_1_1database_a9ebc006075e8fc2e84357a0e068b58d4}{modify}}(\ obj,\ [\&](\ \textcolor{keyword}{auto}\&\ o\ )\ \{}
\DoxyCodeLine{00873\ \ \ \ \ \ o.value.assign(\ buffer,\ buffer\_size\ );}
\DoxyCodeLine{00874\ \ \ \ \ \ o.payer\ =\ payer;}
\DoxyCodeLine{00875\ \ \ \ \});}
\DoxyCodeLine{00876\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_ab42c195679823907132298609509f36c_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a6b0aadc926e14c0a8a5f6cc3441ad00c}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!db\_upperbound\_i64@{db\_upperbound\_i64}}
\index{db\_upperbound\_i64@{db\_upperbound\_i64}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{db\_upperbound\_i64()}{db\_upperbound\_i64()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a6b0aadc926e14c0a8a5f6cc3441ad00c} 
int sysio\+::chain\+::apply\+\_\+context\+::db\+\_\+upperbound\+\_\+i64 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}}}]{code}{, }\item[{\mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}}}]{scope}{, }\item[{\mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}}}]{table}{, }\item[{\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}}}]{id}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l01003}{1003}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01003\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01004\ \ \ \ \textcolor{comment}{//require\_read\_lock(\ code,\ scope\ );\ //\ redundant?}}
\DoxyCodeLine{01005\ }
\DoxyCodeLine{01006\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}*\ tab\ =\ find\_table(\ code,\ scope,\ table\ );}
\DoxyCodeLine{01007\ \ \ \ \textcolor{keywordflow}{if}(\ !tab\ )\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{01008\ }
\DoxyCodeLine{01009\ \ \ \ \textcolor{keyword}{auto}\ table\_end\_itr\ =\ keyval\_cache.cache\_table(\ *tab\ );}
\DoxyCodeLine{01010\ }
\DoxyCodeLine{01011\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{namespacehost__functions__tests__1_a8496a24b5236a2dc07bb4f2930d88342}{idx}}\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}.\mbox{\hyperlink{classchainbase_1_1database_a4d5297635dcf70be481d9b600da9bc13}{get\_index}}<\mbox{\hyperlink{namespacesysio_1_1chain_aac1a2c1330fcb6c8002d59d4d1de5858}{key\_value\_index}},\ by\_scope\_primary>();}
\DoxyCodeLine{01012\ \ \ \ \textcolor{keyword}{auto}\ itr\ =\ \mbox{\hyperlink{namespacehost__functions__tests__1_a8496a24b5236a2dc07bb4f2930d88342}{idx}}.upper\_bound(\ boost::make\_tuple(\ tab-\/>id,\ \textcolor{keywordtype}{id}\ )\ );}
\DoxyCodeLine{01013\ \ \ \ \textcolor{keywordflow}{if}(\ itr\ ==\ \mbox{\hyperlink{namespacehost__functions__tests__1_a8496a24b5236a2dc07bb4f2930d88342}{idx}}.end()\ )\ \textcolor{keywordflow}{return}\ table\_end\_itr;}
\DoxyCodeLine{01014\ \ \ \ \textcolor{keywordflow}{if}(\ itr-\/>t\_id\ !=\ tab-\/>id\ )\ \textcolor{keywordflow}{return}\ table\_end\_itr;}
\DoxyCodeLine{01015\ }
\DoxyCodeLine{01016\ \ \ \ \textcolor{keywordflow}{return}\ keyval\_cache.add(\ *itr\ );}
\DoxyCodeLine{01017\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_a6b0aadc926e14c0a8a5f6cc3441ad00c_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_aac87c3bc66a6e05318bfd25c3373fee5}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!exec@{exec}}
\index{exec@{exec}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{exec()}{exec()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_aac87c3bc66a6e05318bfd25c3373fee5} 
void sysio\+::chain\+::apply\+\_\+context\+::exec (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00200}{200}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00201\ \{}
\DoxyCodeLine{00202\ \ \ \ \_notified.emplace\_back(\ receiver,\ action\_ordinal\ );}
\DoxyCodeLine{00203\ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a3d55f08ae8c014eb7cca9d36b43e8220}{exec\_one}}();}
\DoxyCodeLine{00204\ \ \ \ \textcolor{keywordflow}{for}(\ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ i\ =\ 1;\ i\ <\ \_notified.size();\ ++i\ )\ \{}
\DoxyCodeLine{00205\ \ \ \ \ \ \ std::tie(\ receiver,\ action\_ordinal\ )\ =\ \_notified[i];}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a3d55f08ae8c014eb7cca9d36b43e8220}{exec\_one}}();}
\DoxyCodeLine{00207\ \ \ \ \}}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \ \textcolor{keywordflow}{if}(\ \_cfa\_inline\_actions.size()\ >\ 0\ ||\ \_inline\_actions.size()\ >\ 0\ )\ \{}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ recurse\_depth\ <\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0bb11e832a05b6437c79bf81758b1b7d}{get\_global\_properties}}().\mbox{\hyperlink{classsysio_1_1chain_1_1global__property__object_a7f149fcf87034217c899838eb4430496}{configuration}}.\mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_a007444fa5297c0950b749d4ca2b64e2c}{max\_inline\_action\_depth}},}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_1_1chain_a5dfe17906469eaf079c180c1afb4ad94}{transaction\_exception}},\ \textcolor{stringliteral}{"{}max\ inline\ action\ depth\ per\ transaction\ reached"{}}\ );}
\DoxyCodeLine{00212\ \ \ \ \}}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \ \ \ \textcolor{keywordflow}{for}(\ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ ordinal\ :\ \_cfa\_inline\_actions\ )\ \{}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.execute\_action(\ ordinal,\ recurse\_depth\ +\ 1\ );}
\DoxyCodeLine{00216\ \ \ \ \}}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \ \textcolor{keywordflow}{for}(\ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ ordinal\ :\ \_inline\_actions\ )\ \{}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.execute\_action(\ ordinal,\ recurse\_depth\ +\ 1\ );}
\DoxyCodeLine{00220\ \ \ \ \}}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00222\ \}\ }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_aac87c3bc66a6e05318bfd25c3373fee5_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a3d55f08ae8c014eb7cca9d36b43e8220}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!exec\_one@{exec\_one}}
\index{exec\_one@{exec\_one}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{exec\_one()}{exec\_one()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a3d55f08ae8c014eb7cca9d36b43e8220} 
void sysio\+::chain\+::apply\+\_\+context\+::exec\+\_\+one (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00053}{53}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00054\ \{}
\DoxyCodeLine{00055\ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespace_w_a_s_m_a9690a14428419003297ae35f505b5103aea2b2676c28c0db26d39331a336c6b92}{start}}\ =\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}();}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \mbox{\hyperlink{namespacesysio_1_1chain_a357fd9478475457e5bb386a3143079b6}{digest\_type}}\ act\_digest;}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \textcolor{keyword}{const}\ account\_metadata\_object*\ receiver\_account\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \textcolor{keyword}{auto}\ handle\_exception\ =\ [\&](\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ e)}
\DoxyCodeLine{00062\ \ \ \ \{}
\DoxyCodeLine{00063\ \ \ \ \ \ \ action\_trace\&\ trace\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.get\_action\_trace(\ action\_ordinal\ );}
\DoxyCodeLine{00064\ \ \ \ \ \ \ trace.\mbox{\hyperlink{structsysio_1_1chain_1_1action__trace_af4a5ea567853fa5bb1f9a1cc2fdabff0}{error\_code}}\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1controller_ae60743ce36f1fa0912ff26b1da40afe6}{controller::convert\_exception\_to\_error\_code}}(\ e\ );}
\DoxyCodeLine{00065\ \ \ \ \ \ \ trace.except\ =\ e;}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a89069192fcd50a9ebbe656f8868e7b90}{finalize\_trace}}(\ trace,\ start\ );}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00068\ \ \ \ \};}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a1c52613df7c14b4120213492f01a6dac}{action\_return\_value}}.clear();}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ receiver\_account\ =\ \&\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}.\mbox{\hyperlink{classchainbase_1_1database_afcfe00f81a526c1376d4f51197dd3a9a}{get}}<account\_metadata\_object,by\_name>(\ receiver\ );}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ privileged\ =\ receiver\_account-\/>is\_privileged();}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ native\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a4a2e2a5327580a667b803e3bf3ce5f82}{find\_apply\_handler}}(\ receiver,\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a3598da3f8df67037e69dab758ce168be}{account}},\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a013fae07403bd6deffcade4fd5be095c}{name}}\ );}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ native\ )\ \{}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.\mbox{\hyperlink{classsysio_1_1chain_1_1transaction__context_a799e9208ec6d2ea3d1dfccfd4eb97cec}{enforce\_whiteblacklist}}\ \&\&\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0fcc85a590581560765686050fe105a8}{is\_producing\_block}}()\ )\ \{}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_affb3f9edd37be65bd34a4d6a783051c0}{check\_contract\_list}}(\ receiver\ );}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0884a15f8a10b5a0037601289908a0d9}{check\_action\_list}}(\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a3598da3f8df67037e69dab758ce168be}{account}},\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a013fae07403bd6deffcade4fd5be095c}{name}}\ );}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ (*native)(\ *this\ );}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ (\ receiver\_account-\/>code\_hash\ !=\ \mbox{\hyperlink{namespacesysio_1_1chain_a357fd9478475457e5bb386a3143079b6}{digest\_type}}()\ )\ \&\&}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\ \ !(\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a3598da3f8df67037e69dab758ce168be}{account}}\ ==\ config::system\_account\_name}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a013fae07403bd6deffcade4fd5be095c}{name}}\ ==\ \textcolor{stringliteral}{"{}setcode"{}}\_n}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ receiver\ ==\ config::system\_account\_name\ )}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_aa808acf858e93c567ff983ccbf8fb6d3}{is\_builtin\_activated}}(\ \mbox{\hyperlink{namespacesysio_1_1chain_a406d45a184cdba0af316b5bf34bf56cfa9be6e49b9731de43d53e394e3ed5e25b}{builtin\_protocol\_feature\_t::forward\_setcode}}\ )}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ )\ \{}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.\mbox{\hyperlink{classsysio_1_1chain_1_1transaction__context_a799e9208ec6d2ea3d1dfccfd4eb97cec}{enforce\_whiteblacklist}}\ \&\&\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0fcc85a590581560765686050fe105a8}{is\_producing\_block}}()\ )\ \{}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_affb3f9edd37be65bd34a4d6a783051c0}{check\_contract\_list}}(\ receiver\ );}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0884a15f8a10b5a0037601289908a0d9}{check\_action\_list}}(\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a3598da3f8df67037e69dab758ce168be}{account}},\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a013fae07403bd6deffcade4fd5be095c}{name}}\ );}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a888b36bb7d737244a2b200375b199247}{get\_wasm\_interface}}().\mbox{\hyperlink{classsysio_1_1chain_1_1wasm__interface_add575021d7a77e579238267f4c9331c9}{apply}}(\ receiver\_account-\/>code\_hash,\ receiver\_account-\/>vm\_type,\ receiver\_account-\/>vm\_version,\ *\textcolor{keyword}{this}\ );}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ \textcolor{keyword}{const}\ wasm\_exit\&\ )\ \{\}}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !privileged\ \&\&\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_aa808acf858e93c567ff983ccbf8fb6d3}{is\_builtin\_activated}}(\ \mbox{\hyperlink{namespacesysio_1_1chain_a406d45a184cdba0af316b5bf34bf56cfa5b1659352f17eb75b45e13054aaf1521}{builtin\_protocol\_feature\_t::ram\_restrictions}}\ )\ )\ \{}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ checktime\_interval\ =\ 10;}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ counter\ =\ 0;}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ not\_in\_notify\_context\ =\ (receiver\ ==\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a3598da3f8df67037e69dab758ce168be}{account}});}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ end\ =\ \_account\_ram\_deltas.end();}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ \textcolor{keyword}{auto}\ itr\ =\ \_account\_ram\_deltas.begin();\ itr\ !=\ end;\ ++itr,\ ++counter\ )\ \{}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ counter\ ==\ checktime\_interval\ )\ \{}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.\mbox{\hyperlink{classsysio_1_1chain_1_1transaction__context_ac47cac1e2ac5625a8589686503dd1261}{checktime}}();}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ counter\ =\ 0;}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ itr-\/>delta\ >\ 0\ \&\&\ itr-\/>account\ !=\ receiver\ )\ \{}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ not\_in\_notify\_context,\ unauthorized\_ram\_usage\_increase,}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}unprivileged\ contract\ cannot\ increase\ RAM\ usage\ of\ another\ account\ within\ a\ notify\ context:\ \$\{account\}"{}},}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}account"{}},\ itr-\/>account)}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a87b5bd0a6ac8461dd9c1486561a0c314}{has\_authorization}}(\ itr-\/>account\ ),\ unauthorized\_ram\_usage\_increase,}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}unprivileged\ contract\ cannot\ increase\ RAM\ usage\ of\ another\ account\ that\ has\ not\ authorized\ the\ action:\ \$\{account\}"{}},}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}account"{}},\ itr-\/>account)}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \}\ \mbox{\hyperlink{exception_8hpp_af3731d6e3beb140d9e652adf7a18113b}{FC\_RETHROW\_EXCEPTIONS}}(\ warn,\ \textcolor{stringliteral}{"{}pending\ console\ output:\ \$\{console\}"{}},\ (\textcolor{stringliteral}{"{}console"{}},\ \_pending\_console\_output)\ )}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_aa808acf858e93c567ff983ccbf8fb6d3}{is\_builtin\_activated}}(\ \mbox{\hyperlink{namespacesysio_1_1chain_a406d45a184cdba0af316b5bf34bf56cfa7d76bd2f931e7c1f1c2b7413c93a25b0}{builtin\_protocol\_feature\_t::action\_return\_value}}\ )\ )\ \{}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ act\_digest\ =\ \ \ \mbox{\hyperlink{namespacesysio_1_1chain_a74ad7956eae3ff7ff8670caaff413e12}{generate\_action\_digest}}(}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{this}](\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ data,\ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a133461752aa04472950ae3cccb8b86de}{datalen}})\ \{}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.\mbox{\hyperlink{classsysio_1_1chain_1_1transaction__context_ab851893d7707bae5ac294b19ecfd667b}{hash\_with\_checktime}}<\mbox{\hyperlink{namespacesysio_1_1chain_a357fd9478475457e5bb386a3143079b6}{digest\_type}}>(data,\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a133461752aa04472950ae3cccb8b86de}{datalen}});}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *act,}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a1c52613df7c14b4120213492f01a6dac}{action\_return\_value}}}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ act\_digest\ =\ \mbox{\hyperlink{classfc_1_1sha256_a474784de7d6213b855abd7e952df5e36}{digest\_type::hash}}(*act);}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00135\ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\ \textcolor{keyword}{const}\ std::bad\_alloc\&\ )\ \{}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00137\ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\ \textcolor{keyword}{const}\ boost::interprocess::bad\_alloc\&\ )\ \{}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00139\ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classfc_1_1exception}{fc::exception}}\&\ e\ )\ \{}
\DoxyCodeLine{00140\ \ \ \ \ \ \ handle\_exception(e);}
\DoxyCodeLine{00141\ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\ \textcolor{keyword}{const}\ std::exception\&\ e\ )\ \{}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ wrapper\ =\ \mbox{\hyperlink{classfc_1_1std__exception__wrapper_ae5ad64f84b1d373f5b92031566284c7c}{fc::std\_exception\_wrapper::from\_current\_exception}}(e);}
\DoxyCodeLine{00143\ \ \ \ \ \ \ handle\_exception(wrapper);}
\DoxyCodeLine{00144\ \ \ \ \}}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \ \ \ \textcolor{comment}{//\ Note:\ It\ should\ not\ be\ possible\ for\ receiver\_account\ to\ be\ invalidated\ because:}}
\DoxyCodeLine{00147\ \ \ \ \textcolor{comment}{//\ \ \ \ *\ a\ pointer\ to\ an\ object\ in\ a\ chainbase\ index\ is\ not\ invalidated\ if\ other\ objects\ in\ that\ index\ are\ modified,\ removed,\ or\ added;}}
\DoxyCodeLine{00148\ \ \ \ \textcolor{comment}{//\ \ \ \ *\ a\ pointer\ to\ an\ object\ in\ a\ chainbase\ index\ is\ not\ invalidated\ if\ the\ fields\ of\ that\ object\ are\ modified;}}
\DoxyCodeLine{00149\ \ \ \ \textcolor{comment}{//\ \ \ \ *\ and,\ the\ *receiver\_account\ object\ itself\ cannot\ be\ removed\ because\ accounts\ cannot\ be\ deleted\ in\ SYSIO.}}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \ \ \ action\_trace\&\ trace\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.get\_action\_trace(\ action\_ordinal\ );}
\DoxyCodeLine{00152\ \ \ \ trace.\mbox{\hyperlink{structsysio_1_1chain_1_1action__trace_ae591c5eb3a224491d0d811267dd3cdc1}{return\_value}}\ \ =\ std::move(\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a1c52613df7c14b4120213492f01a6dac}{action\_return\_value}});}
\DoxyCodeLine{00153\ \ \ \ trace.receipt.emplace();}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \ \ \ action\_receipt\&\ \mbox{\hyperlink{bn_8cpp_af0a5201ca8846f05f25435b41d7f39f7}{r}}\ \ =\ *trace.receipt;}
\DoxyCodeLine{00156\ \ \ \ \mbox{\hyperlink{bn_8cpp_af0a5201ca8846f05f25435b41d7f39f7}{r}}.receiver\ \ \ \ \ \ \ \ \ =\ receiver;}
\DoxyCodeLine{00157\ \ \ \ \mbox{\hyperlink{bn_8cpp_af0a5201ca8846f05f25435b41d7f39f7}{r}}.act\_digest\ \ \ \ \ \ \ =\ act\_digest;}
\DoxyCodeLine{00158\ \ \ \ \mbox{\hyperlink{bn_8cpp_af0a5201ca8846f05f25435b41d7f39f7}{r}}.global\_sequence\ \ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a2ef781fcd0596791a3edb004b4f5c8c5}{next\_global\_sequence}}();}
\DoxyCodeLine{00159\ \ \ \ \mbox{\hyperlink{bn_8cpp_af0a5201ca8846f05f25435b41d7f39f7}{r}}.recv\_sequence\ \ \ \ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_acb20a8d75fff438efadb4976a6fdce31}{next\_recv\_sequence}}(\ *receiver\_account\ );}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \ \ \ \textcolor{keyword}{const}\ account\_metadata\_object*\ first\_receiver\_account\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00162\ \ \ \ \textcolor{keywordflow}{if}(\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a3598da3f8df67037e69dab758ce168be}{account}}\ ==\ receiver\ )\ \{}
\DoxyCodeLine{00163\ \ \ \ \ \ \ first\_receiver\_account\ =\ receiver\_account;}
\DoxyCodeLine{00164\ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00165\ \ \ \ \ \ \ first\_receiver\_account\ =\ \&\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}.\mbox{\hyperlink{classchainbase_1_1database_afcfe00f81a526c1376d4f51197dd3a9a}{get}}<account\_metadata\_object,\ by\_name>(act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a3598da3f8df67037e69dab758ce168be}{account}});}
\DoxyCodeLine{00166\ \ \ \ \}}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \ \ \ \mbox{\hyperlink{bn_8cpp_af0a5201ca8846f05f25435b41d7f39f7}{r}}.code\_sequence\ \ \ \ =\ first\_receiver\_account-\/>code\_sequence;\ \textcolor{comment}{//\ could\ be\ modified\ by\ action\ execution\ above}}
\DoxyCodeLine{00169\ \ \ \ \mbox{\hyperlink{bn_8cpp_af0a5201ca8846f05f25435b41d7f39f7}{r}}.abi\_sequence\ \ \ \ \ =\ first\_receiver\_account-\/>abi\_sequence;\ \ \textcolor{comment}{//\ could\ be\ modified\ by\ action\ execution\ above}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \ \textcolor{keywordflow}{for}(\ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ auth\ :\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a40939533bca9e44d169ee7e25ebb1945}{authorization}}\ )\ \{}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \mbox{\hyperlink{bn_8cpp_af0a5201ca8846f05f25435b41d7f39f7}{r}}.auth\_sequence[auth.actor]\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa5a5520ad95838d777834dd408a2c71d}{next\_auth\_sequence}}(\ auth.actor\ );}
\DoxyCodeLine{00173\ \ \ \ \}}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.\mbox{\hyperlink{classsysio_1_1chain_1_1transaction__context_aa16627a2b31f924e998137ba14f22123}{executed\_action\_receipt\_digests}}.emplace\_back(\ \mbox{\hyperlink{bn_8cpp_af0a5201ca8846f05f25435b41d7f39f7}{r}}.digest()\ );}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a89069192fcd50a9ebbe656f8868e7b90}{finalize\_trace}}(\ trace,\ start\ );}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_afb3840481287ef2685e61375a44b0305}{contracts\_console}}()\ )\ \{}
\DoxyCodeLine{00180\ \ \ \ \ \ \ print\_debug(receiver,\ trace);}
\DoxyCodeLine{00181\ \ \ \ \}}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{auto}\ dm\_logger\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a4f6404b355a3a4bf7fb60c92e85443d1}{get\_deep\_mind\_logger}}())}
\DoxyCodeLine{00184\ \ \ \ \{}
\DoxyCodeLine{00185\ \ \ \ \ \ \ dm\_logger-\/>on\_end\_action();}
\DoxyCodeLine{00186\ \ \ \ \}}
\DoxyCodeLine{00187\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_a3d55f08ae8c014eb7cca9d36b43e8220_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=315pt]{classsysio_1_1chain_1_1apply__context_a3d55f08ae8c014eb7cca9d36b43e8220_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_aeacd5c6ae20ee332af568149057df884}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!execute\_context\_free\_inline@{execute\_context\_free\_inline}}
\index{execute\_context\_free\_inline@{execute\_context\_free\_inline}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{execute\_context\_free\_inline()}{execute\_context\_free\_inline()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_aeacd5c6ae20ee332af568149057df884} 
void sysio\+::chain\+::apply\+\_\+context\+::execute\+\_\+context\+\_\+free\+\_\+inline (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsysio_1_1chain_1_1action}{action}} \&\&}]{a}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00400}{400}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00401\ \ \ \ \textcolor{keyword}{auto}*\ code\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0c79d00dae8c0d90efc18f4d091b2391}{db}}().\mbox{\hyperlink{classchainbase_1_1database_aa5a2ca0da0092693ac49b36b7ec6817a}{find}}<account\_object,\ by\_name>(\mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.account);}
\DoxyCodeLine{00402\ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ code\ !=\ \textcolor{keyword}{nullptr},\ \mbox{\hyperlink{namespacesysio_1_1chain_a764b50974b9b72a0e233e72176913d6b}{action\_validate\_exception}},}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}inline\ action's\ code\ account\ \$\{account\}\ does\ not\ exist"{}},\ (\textcolor{stringliteral}{"{}account"{}},\ \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.account)\ );}
\DoxyCodeLine{00404\ }
\DoxyCodeLine{00405\ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.authorization.size()\ ==\ 0,\ \mbox{\hyperlink{namespacesysio_1_1chain_a764b50974b9b72a0e233e72176913d6b}{action\_validate\_exception}},}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}context-\/free\ actions\ cannot\ have\ authorizations"{}}\ );}
\DoxyCodeLine{00407\ }
\DoxyCodeLine{00408\ \ \ \ \textcolor{keywordflow}{if}(\ !privileged\ \&\&\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0fcc85a590581560765686050fe105a8}{is\_producing\_block}}()\ )\ \{}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{namespacesysio_1_1chain_a99c6aa941a16bc629e8051a0a656dea7}{chain\_config}}\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0bb11e832a05b6437c79bf81758b1b7d}{get\_global\_properties}}().\mbox{\hyperlink{classsysio_1_1chain_1_1global__property__object_a7f149fcf87034217c899838eb4430496}{configuration}};}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.data.size()\ <\ std::min(\mbox{\hyperlink{namespacesysio_1_1chain_a99c6aa941a16bc629e8051a0a656dea7}{chain\_config}}.\mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_afb8514589814c9672abd5d0f9c7297cb}{max\_inline\_action\_size}},\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a5e15777ff13440123a46783623744202}{get\_max\_nonprivileged\_inline\_action\_size}}()),}
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ inline\_action\_too\_big\_nonprivileged,}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}inline\ action\ too\ big\ for\ nonprivileged\ account\ \$\{account\}"{}},\ (\textcolor{stringliteral}{"{}account"{}},\ \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.account));}
\DoxyCodeLine{00413\ \ \ \ \}}
\DoxyCodeLine{00414\ }
\DoxyCodeLine{00415\ \ \ \ \textcolor{keyword}{auto}\ inline\_receiver\ =\ \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.account;}
\DoxyCodeLine{00416\ \ \ \ \_cfa\_inline\_actions.emplace\_back(}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a15f2962cf55ed75da1cae67309e844d5}{schedule\_action}}(\ std::move(\mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}),\ inline\_receiver,\ \textcolor{keyword}{true}\ )}
\DoxyCodeLine{00418\ \ \ \ );}
\DoxyCodeLine{00419\ }
\DoxyCodeLine{00420\ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{auto}\ dm\_logger\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a4f6404b355a3a4bf7fb60c92e85443d1}{get\_deep\_mind\_logger}}())\ \{}
\DoxyCodeLine{00421\ \ \ \ \ \ \ dm\_logger-\/>on\_send\_context\_free\_inline();}
\DoxyCodeLine{00422\ \ \ \ \}}
\DoxyCodeLine{00423\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_aeacd5c6ae20ee332af568149057df884_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a95ccf1ed89aab0118938c309fbf91d1f}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!execute\_inline@{execute\_inline}}
\index{execute\_inline@{execute\_inline}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{execute\_inline()}{execute\_inline()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a95ccf1ed89aab0118938c309fbf91d1f} 
void sysio\+::chain\+::apply\+\_\+context\+::execute\+\_\+inline (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsysio_1_1chain_1_1action}{action}} \&\&}]{a}{}\end{DoxyParamCaption})}

This will execute an action after checking the authorization. Inline transactions are implicitly authorized by the current receiver (running code). This method has significant security considerations and several options have been considered\+:


\begin{DoxyEnumerate}
\item privileged accounts (those marked as such by block producers) can authorize any action
\item all other actions are only authorized by \textquotesingle{}receiver\textquotesingle{} which means the following\+: a. the user must set permissions on their account to allow the \textquotesingle{}receiver\textquotesingle{} to act on their behalf
\end{DoxyEnumerate}

Discarded Implementation\+: at one point we allowed any account that authorized the current transaction to implicitly authorize an inline transaction. This approach would allow privilege escalation and make it unsafe for users to interact with certain contracts. We opted instead to have applications ask the user for permission to take certain actions rather than making it implicit. This way users can better understand the security risk. 

Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00312}{312}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00313\ \ \ \ \textcolor{keyword}{auto}*\ code\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0c79d00dae8c0d90efc18f4d091b2391}{db}}().\mbox{\hyperlink{classchainbase_1_1database_aa5a2ca0da0092693ac49b36b7ec6817a}{find}}<account\_object,\ by\_name>(\mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.account);}
\DoxyCodeLine{00314\ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ code\ !=\ \textcolor{keyword}{nullptr},\ \mbox{\hyperlink{namespacesysio_1_1chain_a764b50974b9b72a0e233e72176913d6b}{action\_validate\_exception}},}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}inline\ action's\ code\ account\ \$\{account\}\ does\ not\ exist"{}},\ (\textcolor{stringliteral}{"{}account"{}},\ \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.account)\ );}
\DoxyCodeLine{00316\ }
\DoxyCodeLine{00317\ \ \ \ \textcolor{keywordtype}{bool}\ enforce\_actor\_whitelist\_blacklist\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.\mbox{\hyperlink{classsysio_1_1chain_1_1transaction__context_a799e9208ec6d2ea3d1dfccfd4eb97cec}{enforce\_whiteblacklist}}\ \&\&\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0fcc85a590581560765686050fe105a8}{is\_producing\_block}}();}
\DoxyCodeLine{00318\ \ \ \ flat\_set<account\_name>\ actors;}
\DoxyCodeLine{00319\ }
\DoxyCodeLine{00320\ \ \ \ \textcolor{keywordtype}{bool}\ disallow\_send\_to\_self\_bypass\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_aa808acf858e93c567ff983ccbf8fb6d3}{is\_builtin\_activated}}(\ \mbox{\hyperlink{namespacesysio_1_1chain_a406d45a184cdba0af316b5bf34bf56cfaf0765905ee88dc2bfbdd738872b1b6f8}{builtin\_protocol\_feature\_t::restrict\_action\_to\_self}}\ );}
\DoxyCodeLine{00321\ \ \ \ \textcolor{keywordtype}{bool}\ send\_to\_self\ =\ (\mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.account\ ==\ receiver);}
\DoxyCodeLine{00322\ \ \ \ \textcolor{keywordtype}{bool}\ inherit\_parent\_authorizations\ =\ (!disallow\_send\_to\_self\_bypass\ \&\&\ send\_to\_self\ \&\&\ (receiver\ ==\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a3598da3f8df67037e69dab758ce168be}{account}})\ \&\&\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0fcc85a590581560765686050fe105a8}{is\_producing\_block}}());}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00324\ \ \ \ flat\_set<permission\_level>\ inherited\_authorizations;}
\DoxyCodeLine{00325\ \ \ \ \textcolor{keywordflow}{if}(\ inherit\_parent\_authorizations\ )\ \{}
\DoxyCodeLine{00326\ \ \ \ \ \ \ inherited\_authorizations.reserve(\ \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.authorization.size()\ );}
\DoxyCodeLine{00327\ \ \ \ \}}
\DoxyCodeLine{00328\ }
\DoxyCodeLine{00329\ \ \ \ \textcolor{keywordflow}{for}(\ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ auth\ :\ \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.authorization\ )\ \{}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \textcolor{keyword}{auto}*\ actor\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0c79d00dae8c0d90efc18f4d091b2391}{db}}().\mbox{\hyperlink{classchainbase_1_1database_aa5a2ca0da0092693ac49b36b7ec6817a}{find}}<account\_object,\ by\_name>(auth.actor);}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ actor\ !=\ \textcolor{keyword}{nullptr},\ \mbox{\hyperlink{namespacesysio_1_1chain_a764b50974b9b72a0e233e72176913d6b}{action\_validate\_exception}},}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}inline\ action's\ authorizing\ actor\ \$\{account\}\ does\ not\ exist"{}},\ (\textcolor{stringliteral}{"{}account"{}},\ auth.actor)\ );}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a8f7456b81f2657ccf6c39b35afb16af4}{get\_authorization\_manager}}().\mbox{\hyperlink{classsysio_1_1chain_1_1authorization__manager_ab0acfec50b75044030d082d1aa3fbf5c}{find\_permission}}(auth)\ !=\ \textcolor{keyword}{nullptr},\ \mbox{\hyperlink{namespacesysio_1_1chain_a764b50974b9b72a0e233e72176913d6b}{action\_validate\_exception}},}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}inline\ action's\ authorizations\ include\ a\ non-\/existent\ permission:\ \$\{permission\}"{}},}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}permission"{}},\ auth)\ );}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ enforce\_actor\_whitelist\_blacklist\ )}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \ actors.insert(\ auth.actor\ );}
\DoxyCodeLine{00338\ }
\DoxyCodeLine{00339\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ inherit\_parent\_authorizations\ \&\&\ std::find(act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a40939533bca9e44d169ee7e25ebb1945}{authorization}}.begin(),\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a40939533bca9e44d169ee7e25ebb1945}{authorization}}.end(),\ auth)\ !=\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a40939533bca9e44d169ee7e25ebb1945}{authorization}}.end()\ )\ \{}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \ inherited\_authorizations.insert(\ auth\ );}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00342\ \ \ \ \}}
\DoxyCodeLine{00343\ }
\DoxyCodeLine{00344\ \ \ \ \textcolor{keywordflow}{if}(\ enforce\_actor\_whitelist\_blacklist\ )\ \{}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_aa378f4265708c1bc41e4ee058ed71e6a}{check\_actor\_list}}(\ actors\ );}
\DoxyCodeLine{00346\ \ \ \ \}}
\DoxyCodeLine{00347\ }
\DoxyCodeLine{00348\ \ \ \ \textcolor{keywordflow}{if}(\ !privileged\ \&\&\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0fcc85a590581560765686050fe105a8}{is\_producing\_block}}()\ )\ \{}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{namespacesysio_1_1chain_a99c6aa941a16bc629e8051a0a656dea7}{chain\_config}}\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0bb11e832a05b6437c79bf81758b1b7d}{get\_global\_properties}}().\mbox{\hyperlink{classsysio_1_1chain_1_1global__property__object_a7f149fcf87034217c899838eb4430496}{configuration}};}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.data.size()\ <\ std::min(\mbox{\hyperlink{namespacesysio_1_1chain_a99c6aa941a16bc629e8051a0a656dea7}{chain\_config}}.\mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_afb8514589814c9672abd5d0f9c7297cb}{max\_inline\_action\_size}},\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a5e15777ff13440123a46783623744202}{get\_max\_nonprivileged\_inline\_action\_size}}()),}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ inline\_action\_too\_big\_nonprivileged,}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}inline\ action\ too\ big\ for\ nonprivileged\ account\ \$\{account\}"{}},\ (\textcolor{stringliteral}{"{}account"{}},\ \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.account));}
\DoxyCodeLine{00353\ \ \ \ \}}
\DoxyCodeLine{00354\ \ \ \ \textcolor{comment}{//\ No\ need\ to\ check\ authorization\ if\ replaying\ irreversible\ blocks\ or\ contract\ is\ privileged}}
\DoxyCodeLine{00355\ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a42a29a059b847799ae3a75953b6bff1e}{skip\_auth\_check}}()\ \&\&\ !privileged\ )\ \{}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a8f7456b81f2657ccf6c39b35afb16af4}{get\_authorization\_manager}}()}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .\mbox{\hyperlink{classsysio_1_1chain_1_1authorization__manager_a8566f4407e33eb1e4029455e4feae2f1}{check\_authorization}}(\ \{\mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}\},}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\},}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\{receiver,\ config::sysio\_code\_name\}\},}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_abb1d81f96986df3bce46bd37caaf6a69}{pending\_block\_time}}()\ -\/\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.\mbox{\hyperlink{classsysio_1_1chain_1_1transaction__context_ab8e1aaec319ed2ae90b6a6f499919c89}{published}},}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::bind(\&\mbox{\hyperlink{classsysio_1_1chain_1_1transaction__context_ac47cac1e2ac5625a8589686503dd1261}{transaction\_context::checktime}},\ \&this-\/>trx\_context),}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{false},}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.\mbox{\hyperlink{classsysio_1_1chain_1_1transaction__context_acd4137f1354209bb1237e5a1f26fdbcd}{is\_read\_only}},}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ inherited\_authorizations}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00367\ }
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//QUESTION:\ Is\ it\ smart\ to\ allow\ a\ deferred\ transaction\ that\ has\ been\ delayed\ for\ some\ time\ to\ get\ away}}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ with\ sending\ an\ inline\ action\ that\ requires\ a\ delay\ even\ though\ the\ decision\ to\ send\ that\ inline}}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ action\ was\ made\ at\ the\ moment\ the\ deferred\ transaction\ was\ executed\ with\ potentially\ no\ forewarning?}}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classfc_1_1exception}{fc::exception}}\&\ e\ )\ \{}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ disallow\_send\_to\_self\_bypass\ ||\ !send\_to\_self\ )\ \{}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0fcc85a590581560765686050fe105a8}{is\_producing\_block}}()\ )\ \{}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ subjective\_block\_production\_exception\ new\_exception(\mbox{\hyperlink{log__message_8hpp_a4a4df4bb5cffbe07aadf7d29fd44c75e}{FC\_LOG\_MESSAGE}}(\ error,\ \textcolor{stringliteral}{"{}Authorization\ failure\ with\ inline\ action\ sent\ to\ self"{}}));}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ log:\ e.\mbox{\hyperlink{classfc_1_1exception_a70b72c1e4fe0d17485a8b7a0a6f397de}{get\_log}}())\ \{}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ new\_exception.append\_log(log);}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ new\_exception;}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ ...\ )\ \{}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ disallow\_send\_to\_self\_bypass\ ||\ !send\_to\_self\ )\ \{}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0fcc85a590581560765686050fe105a8}{is\_producing\_block}}()\ )\ \{}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a1bfa656552ea0534b2c91ee0fe33f850}{SYS\_THROW}}(subjective\_block\_production\_exception,\ \textcolor{stringliteral}{"{}Unexpected\ exception\ occurred\ validating\ inline\ action\ sent\ to\ self"{}});}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00388\ \ \ \ \}}
\DoxyCodeLine{00389\ }
\DoxyCodeLine{00390\ \ \ \ \textcolor{keyword}{auto}\ inline\_receiver\ =\ \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.account;}
\DoxyCodeLine{00391\ \ \ \ \_inline\_actions.emplace\_back(}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a15f2962cf55ed75da1cae67309e844d5}{schedule\_action}}(\ std::move(\mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}),\ inline\_receiver,\ \textcolor{keyword}{false}\ )}
\DoxyCodeLine{00393\ \ \ \ );}
\DoxyCodeLine{00394\ }
\DoxyCodeLine{00395\ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{auto}\ dm\_logger\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a4f6404b355a3a4bf7fb60c92e85443d1}{get\_deep\_mind\_logger}}())\ \{}
\DoxyCodeLine{00396\ \ \ \ \ \ \ dm\_logger-\/>on\_send\_inline();}
\DoxyCodeLine{00397\ \ \ \ \}}
\DoxyCodeLine{00398\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_a95ccf1ed89aab0118938c309fbf91d1f_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a89069192fcd50a9ebbe656f8868e7b90}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!finalize\_trace@{finalize\_trace}}
\index{finalize\_trace@{finalize\_trace}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{finalize\_trace()}{finalize\_trace()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a89069192fcd50a9ebbe656f8868e7b90} 
void sysio\+::chain\+::apply\+\_\+context\+::finalize\+\_\+trace (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsysio_1_1chain_1_1action__trace}{action\+\_\+trace}} \&}]{trace}{, }\item[{const \mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} \&}]{start}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00189}{189}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00190\ \{}
\DoxyCodeLine{00191\ \ \ \ trace.account\_ram\_deltas\ =\ std::move(\ \_account\_ram\_deltas\ );}
\DoxyCodeLine{00192\ \ \ \ \_account\_ram\_deltas.clear();}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \ \ \ trace.console\ =\ std::move(\ \_pending\_console\_output\ );}
\DoxyCodeLine{00195\ \ \ \ \_pending\_console\_output.clear();}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \ trace.elapsed\ =\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}()\ -\/\ \mbox{\hyperlink{namespace_w_a_s_m_a9690a14428419003297ae35f505b5103aea2b2676c28c0db26d39331a336c6b92}{start}};}
\DoxyCodeLine{00198\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_a89069192fcd50a9ebbe656f8868e7b90_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_a89069192fcd50a9ebbe656f8868e7b90_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a2d651027c7e796f25382b24e58def3ef}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!get\_action@{get\_action}}
\index{get\_action@{get\_action}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{get\_action()}{get\_action()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a2d651027c7e796f25382b24e58def3ef} 
const \mbox{\hyperlink{structsysio_1_1chain_1_1action}{action}} \& sysio\+::chain\+::apply\+\_\+context\+::get\+\_\+action (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{apply__context_8hpp_source_l00594}{594}} of file \mbox{\hyperlink{apply__context_8hpp_source}{apply\+\_\+context.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00594\ \{\ \textcolor{keywordflow}{return}\ *act;\ \}}

\end{DoxyCode}
\Hypertarget{classsysio_1_1chain_1_1apply__context_ad5802c20d949ac1ef66c269abd9f4c09}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!get\_action@{get\_action}}
\index{get\_action@{get\_action}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{get\_action()}{get\_action()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_ad5802c20d949ac1ef66c269abd9f4c09} 
int sysio\+::chain\+::apply\+\_\+context\+::get\+\_\+action (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}}}]{type}{, }\item[{\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}}}]{index}{, }\item[{char \texorpdfstring{$\ast$}{*}}]{buffer}{, }\item[{size\+\_\+t}]{buffer\+\_\+size}{}\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00737}{737}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00738\ \{}
\DoxyCodeLine{00739\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ trx\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.\mbox{\hyperlink{classsysio_1_1chain_1_1transaction__context_a08e9cf6a4b8ce2f6211ce9d8de1b4da3}{packed\_trx}}.\mbox{\hyperlink{structsysio_1_1chain_1_1packed__transaction_ad193d26eb97cfd5b3f7d8b957eaa35a2}{get\_transaction}}();}
\DoxyCodeLine{00740\ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structaction}{action}}*\ act\_ptr\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00741\ }
\DoxyCodeLine{00742\ \ \ \ \textcolor{keywordflow}{if}(\ type\ ==\ 0\ )\ \{}
\DoxyCodeLine{00743\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ index\ >=\ trx.context\_free\_actions.size()\ )}
\DoxyCodeLine{00744\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00745\ \ \ \ \ \ \ act\_ptr\ =\ \&trx.context\_free\_actions[index];}
\DoxyCodeLine{00746\ \ \ \ \}}
\DoxyCodeLine{00747\ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\ type\ ==\ 1\ )\ \{}
\DoxyCodeLine{00748\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ index\ >=\ trx.actions.size()\ )}
\DoxyCodeLine{00749\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00750\ \ \ \ \ \ \ act\_ptr\ =\ \&trx.actions[index];}
\DoxyCodeLine{00751\ \ \ \ \}}
\DoxyCodeLine{00752\ }
\DoxyCodeLine{00753\ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(act\_ptr,\ action\_not\_found\_exception,\ \textcolor{stringliteral}{"{}action\ is\ not\ found"{}}\ );}
\DoxyCodeLine{00754\ }
\DoxyCodeLine{00755\ \ \ \ \textcolor{keyword}{auto}\ ps\ =\ \mbox{\hyperlink{namespacefc_1_1raw_a64937a5adc8041247f7007882224e225}{fc::raw::pack\_size}}(\ *act\_ptr\ );}
\DoxyCodeLine{00756\ \ \ \ \textcolor{keywordflow}{if}(\ ps\ <=\ buffer\_size\ )\ \{}
\DoxyCodeLine{00757\ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1datastream}{fc::datastream<char*>}}\ \mbox{\hyperlink{namespace_xbyak_1_1util_a4b2aef26182d21706896022467868f7c}{ds}}(buffer,\ buffer\_size);}
\DoxyCodeLine{00758\ \ \ \ \ \ \ \mbox{\hyperlink{namespacefc_1_1raw_a3a18d8161aa5b4f4f02b6fcfdff5e5d1}{fc::raw::pack}}(\ ds,\ *act\_ptr\ );}
\DoxyCodeLine{00759\ \ \ \ \}}
\DoxyCodeLine{00760\ \ \ \ \textcolor{keywordflow}{return}\ ps;}
\DoxyCodeLine{00761\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_ad5802c20d949ac1ef66c269abd9f4c09_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a2252a9a9740608f9dea5071a929cfe8f}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!get\_active\_producers@{get\_active\_producers}}
\index{get\_active\_producers@{get\_active\_producers}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{get\_active\_producers()}{get\_active\_producers()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a2252a9a9740608f9dea5071a929cfe8f} 
\mbox{\hyperlink{classfc_1_1vector}{vector}}$<$ \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} $>$ sysio\+::chain\+::apply\+\_\+context\+::get\+\_\+active\+\_\+producers (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00713}{713}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00713\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00714\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ ap\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_ae0a1946cc6f7b87bd0cfa94bc9aa20b7}{active\_producers}}();}
\DoxyCodeLine{00715\ \ \ \ vector<account\_name>\ accounts;\ accounts.reserve(\ ap.producers.size()\ );}
\DoxyCodeLine{00716\ }
\DoxyCodeLine{00717\ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ producer\ :\ ap.producers\ )}
\DoxyCodeLine{00718\ \ \ \ \ \ \ accounts.push\_back(producer.producer\_name);}
\DoxyCodeLine{00719\ }
\DoxyCodeLine{00720\ \ \ \ \textcolor{keywordflow}{return}\ accounts;}
\DoxyCodeLine{00721\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=335pt]{classsysio_1_1chain_1_1apply__context_a2252a9a9740608f9dea5071a929cfe8f_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_ae13927eb37e92ff57b4a4bfa78e91616}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!get\_code\_hash@{get\_code\_hash}}
\index{get\_code\_hash@{get\_code\_hash}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{get\_code\_hash()}{get\_code\_hash()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_ae13927eb37e92ff57b4a4bfa78e91616} 
void sysio\+::chain\+::apply\+\_\+context\+::get\+\_\+code\+\_\+hash (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}}}]{account}{, }\item[{\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}} \&}]{code\+\_\+sequence}{, }\item[{\mbox{\hyperlink{classfc_1_1sha256}{fc\+::sha256}} \&}]{code\+\_\+hash}{, }\item[{\mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}} \&}]{vm\+\_\+type}{, }\item[{\mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}} \&}]{vm\+\_\+version}{}\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00228}{228}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ \ \textcolor{keyword}{auto}\ obj\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}.\mbox{\hyperlink{classchainbase_1_1database_aa5a2ca0da0092693ac49b36b7ec6817a}{find}}<account\_metadata\_object,by\_name>(account);}
\DoxyCodeLine{00232\ \ \ \ \textcolor{keywordflow}{if}(!obj\ ||\ obj-\/>code\_hash\ ==\ \mbox{\hyperlink{classfc_1_1sha256}{fc::sha256}}\{\})\ \{}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(obj)}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ code\_sequence\ =\ obj-\/>code\_sequence;}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ code\_sequence\ =\ 0;}
\DoxyCodeLine{00237\ \ \ \ \ \ \ code\_hash\ =\ \{\};}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_af322f17f4ee9adb9dc402c8608dac30e}{vm\_type}}\ =\ 0;}
\DoxyCodeLine{00239\ \ \ \ \ \ \ vm\_version\ =\ 0;}
\DoxyCodeLine{00240\ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00241\ \ \ \ \ \ \ code\_sequence\ =\ obj-\/>code\_sequence;}
\DoxyCodeLine{00242\ \ \ \ \ \ \ code\_hash\ =\ obj-\/>code\_hash;}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_af322f17f4ee9adb9dc402c8608dac30e}{vm\_type}}\ =\ obj-\/>vm\_type;}
\DoxyCodeLine{00244\ \ \ \ \ \ \ vm\_version\ =\ obj-\/>vm\_version;}
\DoxyCodeLine{00245\ \ \ \ \}}
\DoxyCodeLine{00246\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_ae13927eb37e92ff57b4a4bfa78e91616_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a4e7c7a187705892ae97250316ca9b38f}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!get\_context\_free\_data@{get\_context\_free\_data}}
\index{get\_context\_free\_data@{get\_context\_free\_data}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{get\_context\_free\_data()}{get\_context\_free\_data()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a4e7c7a187705892ae97250316ca9b38f} 
int sysio\+::chain\+::apply\+\_\+context\+::get\+\_\+context\+\_\+free\+\_\+data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}}}]{index}{, }\item[{char \texorpdfstring{$\ast$}{*}}]{buffer}{, }\item[{size\+\_\+t}]{buffer\+\_\+size}{}\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00763}{763}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00764\ \{}
\DoxyCodeLine{00765\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ trx\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.\mbox{\hyperlink{classsysio_1_1chain_1_1transaction__context_a08e9cf6a4b8ce2f6211ce9d8de1b4da3}{packed\_trx}}.\mbox{\hyperlink{structsysio_1_1chain_1_1packed__transaction_ac07b8dd1294ac4848244cb154256512b}{get\_signed\_transaction}}();}
\DoxyCodeLine{00766\ }
\DoxyCodeLine{00767\ \ \ \ \textcolor{keywordflow}{if}(\ index\ >=\ trx.context\_free\_data.size()\ )\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00768\ }
\DoxyCodeLine{00769\ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}\ =\ trx.\mbox{\hyperlink{structsysio_1_1chain_1_1signed__transaction_a24386634e143dd2cc069c2e662d16cd4}{context\_free\_data}}[index].size();}
\DoxyCodeLine{00770\ \ \ \ \textcolor{keywordflow}{if}(\ buffer\_size\ ==\ 0\ )\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}};}
\DoxyCodeLine{00771\ }
\DoxyCodeLine{00772\ \ \ \ \textcolor{keyword}{auto}\ copy\_size\ =\ std::min(\ buffer\_size,\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}\ );}
\DoxyCodeLine{00773\ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_ae785d5badbf1f08b491af31f32a135a1}{memcpy}}(\ buffer,\ trx.context\_free\_data[index].data(),\ copy\_size\ );}
\DoxyCodeLine{00774\ }
\DoxyCodeLine{00775\ \ \ \ \textcolor{keywordflow}{return}\ copy\_size;}
\DoxyCodeLine{00776\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=349pt]{classsysio_1_1chain_1_1apply__context_a4e7c7a187705892ae97250316ca9b38f_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_acdf53b50a5ac7b57b79ab281bcf24b23}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!get\_receiver@{get\_receiver}}
\index{get\_receiver@{get\_receiver}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{get\_receiver()}{get\_receiver()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_acdf53b50a5ac7b57b79ab281bcf24b23} 
\mbox{\hyperlink{namespacesysio_1_1chain_a7a1685bcc352cda9e45f055932069428}{action\+\_\+name}} sysio\+::chain\+::apply\+\_\+context\+::get\+\_\+receiver (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{apply__context_8hpp_source_l00593}{593}} of file \mbox{\hyperlink{apply__context_8hpp_source}{apply\+\_\+context.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00593\ \{\ \textcolor{keywordflow}{return}\ receiver;\ \}}

\end{DoxyCode}
\Hypertarget{classsysio_1_1chain_1_1apply__context_ab4925e2f0208b9a6bd084c1d25ee218d}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!get\_sender@{get\_sender}}
\index{get\_sender@{get\_sender}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{get\_sender()}{get\_sender()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_ab4925e2f0208b9a6bd084c1d25ee218d} 
\mbox{\hyperlink{namespacesysio_1_1chain_a7a1685bcc352cda9e45f055932069428}{action\+\_\+name}} sysio\+::chain\+::apply\+\_\+context\+::get\+\_\+sender (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l01059}{1059}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01060\ \ \ \ \textcolor{keyword}{const}\ action\_trace\&\ trace\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.get\_action\_trace(\ action\_ordinal\ );}
\DoxyCodeLine{01061\ \ \ \ \textcolor{keywordflow}{if}\ (trace.creator\_action\_ordinal\ >\ 0)\ \{}
\DoxyCodeLine{01062\ \ \ \ \ \ \ \textcolor{keyword}{const}\ action\_trace\&\ creator\_trace\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.get\_action\_trace(\ trace.creator\_action\_ordinal\ );}
\DoxyCodeLine{01063\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ creator\_trace.\mbox{\hyperlink{structsysio_1_1chain_1_1action__trace_ae9f2c9fa62609083457c1852c1c021b2}{receiver}};}
\DoxyCodeLine{01064\ \ \ \ \}}
\DoxyCodeLine{01065\ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesysio_1_1chain_a7a1685bcc352cda9e45f055932069428}{action\_name}}();}
\DoxyCodeLine{01066\ \}}

\end{DoxyCode}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a87b5bd0a6ac8461dd9c1486561a0c314}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!has\_authorization@{has\_authorization}}
\index{has\_authorization@{has\_authorization}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{has\_authorization()}{has\_authorization()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a87b5bd0a6ac8461dd9c1486561a0c314} 
bool sysio\+::chain\+::apply\+\_\+context\+::has\+\_\+authorization (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} \&}]{account}{}\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00257}{257}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00258\ \ \ \ \textcolor{keywordflow}{for}(\ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ auth\ :\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a40939533bca9e44d169ee7e25ebb1945}{authorization}}\ )}
\DoxyCodeLine{00259\ \ \ \ \ \ \textcolor{keywordflow}{if}(\ auth.actor\ ==\ account\ )}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00261\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00262\ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_a87b5bd0a6ac8461dd9c1486561a0c314_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_adecf61df18e643021f05df3cdfb97127}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!has\_recipient@{has\_recipient}}
\index{has\_recipient@{has\_recipient}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{has\_recipient()}{has\_recipient()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_adecf61df18e643021f05df3cdfb97127} 
bool sysio\+::chain\+::apply\+\_\+context\+::has\+\_\+recipient (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}}}]{account}{}\end{DoxyParamCaption}) const}

Return true if the current action has already been scheduled to be delivered to the specified account. 

Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00276}{276}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00277\ \ \ \ \textcolor{keywordflow}{for}(\ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{bn_8cpp_a8b0eadcc506862e9d751ab45185053aa}{p}}\ :\ \_notified\ )}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{bn_8cpp_a8b0eadcc506862e9d751ab45185053aa}{p}}.first\ ==\ code\ )}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00280\ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00281\ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_adecf61df18e643021f05df3cdfb97127_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_aa3b1a676573b8e03823646f92da39365}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!is\_account@{is\_account}}
\index{is\_account@{is\_account}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{is\_account()}{is\_account()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_aa3b1a676573b8e03823646f92da39365} 
bool sysio\+::chain\+::apply\+\_\+context\+::is\+\_\+account (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} \&}]{account}{}\end{DoxyParamCaption}) const}

\begin{DoxyReturn}{Returns}
true if account exists, false if it does not 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00224}{224}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00225\ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr}\ !=\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}.\mbox{\hyperlink{classchainbase_1_1database_aa5a2ca0da0092693ac49b36b7ec6817a}{find}}<account\_object,by\_name>(\ account\ );}
\DoxyCodeLine{00226\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_aa3b1a676573b8e03823646f92da39365_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a6d7b2bfa2d819a34e9b5ba2ba709290a}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!is\_context\_free@{is\_context\_free}}
\index{is\_context\_free@{is\_context\_free}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{is\_context\_free()}{is\_context\_free()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a6d7b2bfa2d819a34e9b5ba2ba709290a} 
bool sysio\+::chain\+::apply\+\_\+context\+::is\+\_\+context\+\_\+free (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{apply__context_8hpp_source_l00591}{591}} of file \mbox{\hyperlink{apply__context_8hpp_source}{apply\+\_\+context.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00591\ \{\ \textcolor{keywordflow}{return}\ context\_free;\ \}}

\end{DoxyCode}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a47102cc1544ba9fd37577eba8265ce2c}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!is\_privileged@{is\_privileged}}
\index{is\_privileged@{is\_privileged}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{is\_privileged()}{is\_privileged()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a47102cc1544ba9fd37577eba8265ce2c} 
bool sysio\+::chain\+::apply\+\_\+context\+::is\+\_\+privileged (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{apply__context_8hpp_source_l00592}{592}} of file \mbox{\hyperlink{apply__context_8hpp_source}{apply\+\_\+context.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00592\ \{\ \textcolor{keywordflow}{return}\ privileged;\ \}}

\end{DoxyCode}
\Hypertarget{classsysio_1_1chain_1_1apply__context_aa5a5520ad95838d777834dd408a2c71d}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!next\_auth\_sequence@{next\_auth\_sequence}}
\index{next\_auth\_sequence@{next\_auth\_sequence}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{next\_auth\_sequence()}{next\_auth\_sequence()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_aa5a5520ad95838d777834dd408a2c71d} 
\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}} sysio\+::chain\+::apply\+\_\+context\+::next\+\_\+auth\+\_\+sequence (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}}}]{actor}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l01042}{1042}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01042\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01043\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ amo\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}.\mbox{\hyperlink{classchainbase_1_1database_afcfe00f81a526c1376d4f51197dd3a9a}{get}}<account\_metadata\_object,by\_name>(\ actor\ );}
\DoxyCodeLine{01044\ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}.\mbox{\hyperlink{classchainbase_1_1database_a9ebc006075e8fc2e84357a0e068b58d4}{modify}}(\ amo,\ [\&](\textcolor{keyword}{auto}\&\ am\ )\{}
\DoxyCodeLine{01045\ \ \ \ \ \ \ ++am.auth\_sequence;}
\DoxyCodeLine{01046\ \ \ \ \});}
\DoxyCodeLine{01047\ \ \ \ \textcolor{keywordflow}{return}\ amo.auth\_sequence;}
\DoxyCodeLine{01048\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_aa5a5520ad95838d777834dd408a2c71d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_aa5a5520ad95838d777834dd408a2c71d_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a2ef781fcd0596791a3edb004b4f5c8c5}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!next\_global\_sequence@{next\_global\_sequence}}
\index{next\_global\_sequence@{next\_global\_sequence}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{next\_global\_sequence()}{next\_global\_sequence()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a2ef781fcd0596791a3edb004b4f5c8c5} 
\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}} sysio\+::chain\+::apply\+\_\+context\+::next\+\_\+global\+\_\+sequence (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l01028}{1028}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01028\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01029\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{bn_8cpp_a8b0eadcc506862e9d751ab45185053aa}{p}}\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a148eb08aa44ff6a177015a66004d0e49}{get\_dynamic\_global\_properties}}();}
\DoxyCodeLine{01030\ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}.\mbox{\hyperlink{classchainbase_1_1database_a9ebc006075e8fc2e84357a0e068b58d4}{modify}}(\ \mbox{\hyperlink{bn_8cpp_a8b0eadcc506862e9d751ab45185053aa}{p}},\ [\&](\ \textcolor{keyword}{auto}\&\ dgp\ )\ \{}
\DoxyCodeLine{01031\ \ \ \ \ \ \ ++dgp.global\_action\_sequence;}
\DoxyCodeLine{01032\ \ \ \ \});}
\DoxyCodeLine{01033\ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{bn_8cpp_a8b0eadcc506862e9d751ab45185053aa}{p}}.global\_action\_sequence;}
\DoxyCodeLine{01034\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_a2ef781fcd0596791a3edb004b4f5c8c5_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_a2ef781fcd0596791a3edb004b4f5c8c5_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_acb20a8d75fff438efadb4976a6fdce31}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!next\_recv\_sequence@{next\_recv\_sequence}}
\index{next\_recv\_sequence@{next\_recv\_sequence}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{next\_recv\_sequence()}{next\_recv\_sequence()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_acb20a8d75fff438efadb4976a6fdce31} 
\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}} sysio\+::chain\+::apply\+\_\+context\+::next\+\_\+recv\+\_\+sequence (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classsysio_1_1chain_1_1account__metadata__object}{account\+\_\+metadata\+\_\+object}} \&}]{receiver\+\_\+account}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l01036}{1036}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01037\ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}.\mbox{\hyperlink{classchainbase_1_1database_a9ebc006075e8fc2e84357a0e068b58d4}{modify}}(\ receiver\_account,\ [\&](\ \textcolor{keyword}{auto}\&\ ra\ )\ \{}
\DoxyCodeLine{01038\ \ \ \ \ \ \ ++ra.recv\_sequence;}
\DoxyCodeLine{01039\ \ \ \ \});}
\DoxyCodeLine{01040\ \ \ \ \textcolor{keywordflow}{return}\ receiver\_account.recv\_sequence;}
\DoxyCodeLine{01041\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_acb20a8d75fff438efadb4976a6fdce31_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_acb20a8d75fff438efadb4976a6fdce31_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a7dbd347239af8b3540db7830b6e2f11e}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!require\_authorization@{require\_authorization}}
\index{require\_authorization@{require\_authorization}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{require\_authorization()}{require\_authorization()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a7dbd347239af8b3540db7830b6e2f11e} 
void sysio\+::chain\+::apply\+\_\+context\+::require\+\_\+authorization (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} \&}]{account}{}\end{DoxyParamCaption})}

Require account to have approved of this message 
\begin{DoxyParams}{Parameters}
{\em account} & The account whose approval is required\\
\hline
\end{DoxyParams}
This method will check that account is listed in the message\textquotesingle{}s declared authorizations, and marks the authorization as used. Note that all authorizations on a message must be used, or the message is invalid.


\begin{DoxyExceptions}{Exceptions}
{\em missing\+\_\+auth\+\_\+exception} & If no sufficient permission was found \\
\hline
\end{DoxyExceptions}


Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00248}{248}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00249\ \ \ \ \textcolor{keywordflow}{for}(\ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ i=0;\ i\ <\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a40939533bca9e44d169ee7e25ebb1945}{authorization}}.size();\ i++\ )\ \{}
\DoxyCodeLine{00250\ \ \ \ \ \ \textcolor{keywordflow}{if}(\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a40939533bca9e44d169ee7e25ebb1945}{authorization}}[i].actor\ ==\ account\ )\ \{}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00252\ \ \ \ \ \ \}}
\DoxyCodeLine{00253\ \ \ \ \}}
\DoxyCodeLine{00254\ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \textcolor{keyword}{false},\ missing\_auth\_exception,\ \textcolor{stringliteral}{"{}missing\ authority\ of\ \$\{account\}"{}},\ (\textcolor{stringliteral}{"{}account"{}},account));}
\DoxyCodeLine{00255\ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_a7dbd347239af8b3540db7830b6e2f11e_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a3ddf99ea046e7ab8192cf8d4309090ed}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!require\_authorization@{require\_authorization}}
\index{require\_authorization@{require\_authorization}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{require\_authorization()}{require\_authorization()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a3ddf99ea046e7ab8192cf8d4309090ed} 
void sysio\+::chain\+::apply\+\_\+context\+::require\+\_\+authorization (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} \&}]{account}{, }\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_aacc541763fed17ee490b6ac42b7bb77a}{permission\+\_\+name}} \&}]{permission}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00264}{264}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00266\ \ \ \textcolor{keywordflow}{for}(\ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ i=0;\ i\ <\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a40939533bca9e44d169ee7e25ebb1945}{authorization}}.size();\ i++\ )}
\DoxyCodeLine{00267\ \ \ \ \ \ \textcolor{keywordflow}{if}(\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a40939533bca9e44d169ee7e25ebb1945}{authorization}}[i].actor\ ==\ account\ )\ \{}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a40939533bca9e44d169ee7e25ebb1945}{authorization}}[i].permission\ ==\ permission\ )\ \{}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00271\ \ \ \ \ \ \}}
\DoxyCodeLine{00272\ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \textcolor{keyword}{false},\ missing\_auth\_exception,\ \textcolor{stringliteral}{"{}missing\ authority\ of\ \$\{account\}/\$\{permission\}"{}},}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}account"{}},account)(\textcolor{stringliteral}{"{}permission"{}},permission)\ );}
\DoxyCodeLine{00274\ \}}

\end{DoxyCode}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a00a749f7d122e141a87aab3767d3349c}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!require\_recipient@{require\_recipient}}
\index{require\_recipient@{require\_recipient}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{require\_recipient()}{require\_recipient()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a00a749f7d122e141a87aab3767d3349c} 
void sysio\+::chain\+::apply\+\_\+context\+::require\+\_\+recipient (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}}}]{account}{}\end{DoxyParamCaption})}

Requires that the current action be delivered to account 

Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00283}{283}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00284\ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_adecf61df18e643021f05df3cdfb97127}{has\_recipient}}(recipient)\ )\ \{}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \_notified.emplace\_back(}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \ recipient,}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a15f2962cf55ed75da1cae67309e844d5}{schedule\_action}}(\ action\_ordinal,\ recipient,\ \textcolor{keyword}{false}\ )}
\DoxyCodeLine{00288\ \ \ \ \ \ \ );}
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00290\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{auto}\ dm\_logger\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a4f6404b355a3a4bf7fb60c92e85443d1}{get\_deep\_mind\_logger}}())\ \{}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ dm\_logger-\/>on\_require\_recipient();}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00293\ \ \ \ \}}
\DoxyCodeLine{00294\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_a00a749f7d122e141a87aab3767d3349c_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a31ef2b2f7484563f029fe31f2ffcabd9}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!schedule\_action@{schedule\_action}}
\index{schedule\_action@{schedule\_action}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{schedule\_action()}{schedule\_action()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a31ef2b2f7484563f029fe31f2ffcabd9} 
\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} sysio\+::chain\+::apply\+\_\+context\+::schedule\+\_\+action (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsysio_1_1chain_1_1action}{action}} \&\&}]{act\+\_\+to\+\_\+schedule}{, }\item[{\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}}}]{receiver}{, }\item[{bool}]{context\+\_\+free}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00651}{651}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00652\ \{}
\DoxyCodeLine{00653\ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ scheduled\_action\_ordinal\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.schedule\_action(\ std::move(act\_to\_schedule),}
\DoxyCodeLine{00654\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ receiver,\ context\_free,}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ action\_ordinal,\ first\_receiver\_action\_ordinal\ );}
\DoxyCodeLine{00656\ }
\DoxyCodeLine{00657\ \ \ \ act\ =\ \&\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.get\_action\_trace(\ action\_ordinal\ ).\mbox{\hyperlink{structsysio_1_1chain_1_1action__trace_a2aa19858e0762797685b9ec46e820656}{act}};}
\DoxyCodeLine{00658\ \ \ \ \textcolor{keywordflow}{return}\ scheduled\_action\_ordinal;}
\DoxyCodeLine{00659\ \}}

\end{DoxyCode}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a15f2962cf55ed75da1cae67309e844d5}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!schedule\_action@{schedule\_action}}
\index{schedule\_action@{schedule\_action}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{schedule\_action()}{schedule\_action()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a15f2962cf55ed75da1cae67309e844d5} 
\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} sysio\+::chain\+::apply\+\_\+context\+::schedule\+\_\+action (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}}}]{ordinal\+\_\+of\+\_\+action\+\_\+to\+\_\+schedule}{, }\item[{\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}}}]{receiver}{, }\item[{bool}]{context\+\_\+free}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00641}{641}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00642\ \{}
\DoxyCodeLine{00643\ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ scheduled\_action\_ordinal\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.schedule\_action(\ ordinal\_of\_action\_to\_schedule,}
\DoxyCodeLine{00644\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ receiver,\ context\_free,}
\DoxyCodeLine{00645\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ action\_ordinal,\ first\_receiver\_action\_ordinal\ );}
\DoxyCodeLine{00646\ }
\DoxyCodeLine{00647\ \ \ \ act\ =\ \&\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.get\_action\_trace(\ action\_ordinal\ ).\mbox{\hyperlink{structsysio_1_1chain_1_1action__trace_a2aa19858e0762797685b9ec46e820656}{act}};}
\DoxyCodeLine{00648\ \ \ \ \textcolor{keywordflow}{return}\ scheduled\_action\_ordinal;}
\DoxyCodeLine{00649\ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_a15f2962cf55ed75da1cae67309e844d5_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_ac09c8f3118154bb22b0bd50526e138fa}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!schedule\_deferred\_transaction@{schedule\_deferred\_transaction}}
\index{schedule\_deferred\_transaction@{schedule\_deferred\_transaction}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{schedule\_deferred\_transaction()}{schedule\_deferred\_transaction()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_ac09c8f3118154bb22b0bd50526e138fa} 
void sysio\+::chain\+::apply\+\_\+context\+::schedule\+\_\+deferred\+\_\+transaction (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_a896515137d9a7844105786ee3a6b1d47}{uint128\+\_\+t}} \&}]{sender\+\_\+id}{, }\item[{\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}}}]{payer}{, }\item[{\mbox{\hyperlink{structsysio_1_1chain_1_1transaction}{transaction}} \&\&}]{trx}{, }\item[{bool}]{replace\+\_\+existing}{}\end{DoxyParamCaption})}

uses payer\textquotesingle{}s storage

Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00426}{426}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00426\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00427\ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ trx.context\_free\_actions.size()\ ==\ 0,\ cfa\_inside\_generated\_tx,\ \textcolor{stringliteral}{"{}context\ free\ actions\ are\ not\ currently\ allowed\ in\ generated\ transactions"{}}\ );}
\DoxyCodeLine{00428\ }
\DoxyCodeLine{00429\ \ \ \ \textcolor{keywordtype}{bool}\ enforce\_actor\_whitelist\_blacklist\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.\mbox{\hyperlink{classsysio_1_1chain_1_1transaction__context_a799e9208ec6d2ea3d1dfccfd4eb97cec}{enforce\_whiteblacklist}}\ \&\&\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0fcc85a590581560765686050fe105a8}{is\_producing\_block}}()}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ !\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_aa82f197374a4e96fd3e952e18106eae9}{sender\_avoids\_whitelist\_blacklist\_enforcement}}(\ receiver\ );}
\DoxyCodeLine{00431\ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.\mbox{\hyperlink{classsysio_1_1chain_1_1transaction__context_a7ecbfbb3d05a6a0b128feeb0a469878c}{validate\_referenced\_accounts}}(\ trx,\ enforce\_actor\_whitelist\_blacklist\ );}
\DoxyCodeLine{00432\ }
\DoxyCodeLine{00433\ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_aa808acf858e93c567ff983ccbf8fb6d3}{is\_builtin\_activated}}(\ \mbox{\hyperlink{namespacesysio_1_1chain_a406d45a184cdba0af316b5bf34bf56cfa1e0a5b7203c3f4124dc8c1880b04e36b}{builtin\_protocol\_feature\_t::no\_duplicate\_deferred\_id}}\ )\ )\ \{}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ exts\ =\ trx.validate\_and\_extract\_extensions();}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ exts.size()\ >\ 0\ )\ \{}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ itr\ =\ exts.lower\_bound(\ \mbox{\hyperlink{structsysio_1_1chain_1_1deferred__transaction__generation__context_a13c8439c1c9d63ef864fe850c666b96f}{deferred\_transaction\_generation\_context::extension\_id}}()\ );}
\DoxyCodeLine{00437\ }
\DoxyCodeLine{00438\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ exts.size()\ ==\ 1\ \&\&\ itr\ !=\ exts.end(),\ invalid\_transaction\_extension,}
\DoxyCodeLine{00439\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}only\ the\ deferred\_transaction\_generation\_context\ extension\ is\ currently\ supported\ for\ deferred\ transactions"{}}}
\DoxyCodeLine{00440\ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00441\ }
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{structcontext}{context}}\ =\ std::get<deferred\_transaction\_generation\_context>(itr-\/>second);}
\DoxyCodeLine{00443\ }
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{structcontext}{context}}.sender\ ==\ receiver,\ ill\_formed\_deferred\_transaction\_generation\_context,}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}deferred\ transaction\ generaction\ context\ contains\ mismatching\ sender"{}},}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}expected"{}},\ receiver)(\textcolor{stringliteral}{"{}actual"{}},\ \mbox{\hyperlink{structcontext}{context}}.sender)}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{structcontext}{context}}.sender\_id\ ==\ sender\_id,\ ill\_formed\_deferred\_transaction\_generation\_context,}
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}deferred\ transaction\ generaction\ context\ contains\ mismatching\ sender\_id"{}},}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}expected"{}},\ sender\_id)(\textcolor{stringliteral}{"{}actual"{}},\ \mbox{\hyperlink{structcontext}{context}}.sender\_id)}
\DoxyCodeLine{00451\ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{structcontext}{context}}.sender\_trx\_id\ ==\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.\mbox{\hyperlink{classsysio_1_1chain_1_1transaction__context_a08e9cf6a4b8ce2f6211ce9d8de1b4da3}{packed\_trx}}.\mbox{\hyperlink{structsysio_1_1chain_1_1packed__transaction_acc706e72aa422ee3e3c02f73871609cb}{id}}(),\ ill\_formed\_deferred\_transaction\_generation\_context,}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}deferred\ transaction\ generaction\ context\ contains\ mismatching\ sender\_trx\_id"{}},}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}expected"{}},\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.\mbox{\hyperlink{classsysio_1_1chain_1_1transaction__context_a08e9cf6a4b8ce2f6211ce9d8de1b4da3}{packed\_trx}}.\mbox{\hyperlink{structsysio_1_1chain_1_1packed__transaction_acc706e72aa422ee3e3c02f73871609cb}{id}}())(\textcolor{stringliteral}{"{}actual"{}},\ \mbox{\hyperlink{structcontext}{context}}.sender\_trx\_id)}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00456\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_1_1chain_a4e167bafac72001dee047e0f198bb689}{emplace\_extension}}(}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \ \ \ \ \ \ trx.transaction\_extensions,}
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structsysio_1_1chain_1_1deferred__transaction__generation__context_a13c8439c1c9d63ef864fe850c666b96f}{deferred\_transaction\_generation\_context::extension\_id}}(),}
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacefc_1_1raw_a3a18d8161aa5b4f4f02b6fcfdff5e5d1}{fc::raw::pack}}(\ deferred\_transaction\_generation\_context(\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.\mbox{\hyperlink{classsysio_1_1chain_1_1transaction__context_a08e9cf6a4b8ce2f6211ce9d8de1b4da3}{packed\_trx}}.\mbox{\hyperlink{structsysio_1_1chain_1_1packed__transaction_acc706e72aa422ee3e3c02f73871609cb}{id}}(),\ sender\_id,\ receiver\ )\ )}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00463\ \ \ \ \ \ \ trx.expiration\ =\ time\_point\_sec();}
\DoxyCodeLine{00464\ \ \ \ \ \ \ trx.ref\_block\_num\ =\ 0;}
\DoxyCodeLine{00465\ \ \ \ \ \ \ trx.ref\_block\_prefix\ =\ 0;}
\DoxyCodeLine{00466\ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00467\ \ \ \ \ \ \ trx.expiration\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_abb1d81f96986df3bce46bd37caaf6a69}{pending\_block\_time}}()\ +\ \mbox{\hyperlink{classfc_1_1microseconds}{fc::microseconds}}(999'999);\ \textcolor{comment}{//\ Rounds\ up\ to\ nearest\ second\ (makes\ expiration\ check\ unnecessary)}}
\DoxyCodeLine{00468\ \ \ \ \ \ \ trx.set\_reference\_block(\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a37d0a44faef74cf0f96127982c1ce124}{head\_block\_id}}());\ \textcolor{comment}{//\ No\ TaPoS\ check\ necessary}}
\DoxyCodeLine{00469\ \ \ \ \}}
\DoxyCodeLine{00470\ }
\DoxyCodeLine{00471\ \ \ \ \textcolor{comment}{//\ Charge\ ahead\ of\ time\ for\ the\ additional\ net\ usage\ needed\ to\ retire\ the\ deferred\ transaction}}
\DoxyCodeLine{00472\ \ \ \ \textcolor{comment}{//\ whether\ that\ be\ by\ successfully\ executing,\ soft\ failure,\ hard\ failure,\ or\ expiration.}}
\DoxyCodeLine{00473\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ cfg\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0bb11e832a05b6437c79bf81758b1b7d}{get\_global\_properties}}().\mbox{\hyperlink{classsysio_1_1chain_1_1global__property__object_a7f149fcf87034217c899838eb4430496}{configuration}};}
\DoxyCodeLine{00474\ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}.\mbox{\hyperlink{classsysio_1_1chain_1_1transaction__context_a62b3defb107a356551a01d2c78e80b4b}{add\_net\_usage}}(\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}}\textcolor{keyword}{>}(cfg.base\_per\_transaction\_net\_usage)}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ +\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}}\textcolor{keyword}{>}(config::transaction\_id\_net\_usage)\ );\ \textcolor{comment}{//\ Will\ exit\ early\ if\ net\ usage\ cannot\ be\ payed.}}
\DoxyCodeLine{00476\ }
\DoxyCodeLine{00477\ \ \ \ \textcolor{keyword}{auto}\ delay\ =\ \mbox{\hyperlink{namespacefc_a9623b8cae3f48bbed6aa1fc2afe9b174}{fc::seconds}}(trx.delay\_sec);}
\DoxyCodeLine{00478\ }
\DoxyCodeLine{00479\ \ \ \ \textcolor{keywordtype}{bool}\ ram\_restrictions\_activated\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_aa808acf858e93c567ff983ccbf8fb6d3}{is\_builtin\_activated}}(\ \mbox{\hyperlink{namespacesysio_1_1chain_a406d45a184cdba0af316b5bf34bf56cfa5b1659352f17eb75b45e13054aaf1521}{builtin\_protocol\_feature\_t::ram\_restrictions}}\ );}
\DoxyCodeLine{00480\ }
\DoxyCodeLine{00481\ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a42a29a059b847799ae3a75953b6bff1e}{skip\_auth\_check}}()\ \&\&\ !privileged\ )\ \{\ \textcolor{comment}{//\ Do\ not\ need\ to\ check\ authorization\ if\ replayng\ irreversible\ block\ or\ if\ contract\ is\ privileged}}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ payer\ !=\ receiver\ )\ \{}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ ram\_restrictions\_activated\ )\ \{}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ receiver\ ==\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a3598da3f8df67037e69dab758ce168be}{account}},\ \mbox{\hyperlink{namespacesysio_1_1chain_a764b50974b9b72a0e233e72176913d6b}{action\_validate\_exception}},}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}cannot\ bill\ RAM\ usage\ of\ deferred\ transactions\ to\ another\ account\ within\ notify\ context"{}}}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a87b5bd0a6ac8461dd9c1486561a0c314}{has\_authorization}}(\ payer\ ),\ \mbox{\hyperlink{namespacesysio_1_1chain_a764b50974b9b72a0e233e72176913d6b}{action\_validate\_exception}},}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}cannot\ bill\ RAM\ usage\ of\ deferred\ transaction\ to\ another\ account\ that\ has\ not\ authorized\ the\ action:\ \$\{payer\}"{}},}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}payer"{}},\ payer)}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a7dbd347239af8b3540db7830b6e2f11e}{require\_authorization}}(payer);\ }
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00495\ }
\DoxyCodeLine{00496\ \ \ \ \ \ \ \textcolor{comment}{//\ Originally\ this\ code\ bypassed\ authorization\ checks\ if\ a\ contract\ was\ deferring\ only\ actions\ to\ itself.}}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \textcolor{comment}{//\ The\ idea\ was\ that\ the\ code\ could\ already\ do\ whatever\ the\ deferred\ transaction\ could\ do,\ so\ there\ was\ no\ point\ in\ checking\ authorizations.}}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \textcolor{comment}{//\ But\ this\ is\ not\ true.\ The\ original\ implementation\ didn't\ validate\ the\ authorizations\ on\ the\ actions\ which\ allowed\ for\ privilege\ escalation.}}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \textcolor{comment}{//\ It\ would\ make\ it\ possible\ to\ bill\ RAM\ to\ some\ unrelated\ account.}}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \textcolor{comment}{//\ Furthermore,\ even\ if\ the\ authorizations\ were\ forced\ to\ be\ a\ subset\ of\ the\ current\ action's\ authorizations,\ it\ would\ still\ violate\ the\ expectations}}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \textcolor{comment}{//\ of\ the\ signers\ of\ the\ original\ transaction,\ because\ the\ deferred\ transaction\ would\ allow\ billing\ more\ CPU\ and\ network\ bandwidth\ than\ the\ maximum\ limit}}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \textcolor{comment}{//\ specified\ on\ the\ original\ transaction.}}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \textcolor{comment}{//\ So,\ the\ deferred\ transaction\ must\ always\ go\ through\ the\ authorization\ checking\ if\ it\ is\ not\ sent\ by\ a\ privileged\ contract.}}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \textcolor{comment}{//\ However,\ the\ old\ logic\ must\ still\ be\ considered\ because\ it\ cannot\ objectively\ change\ until\ a\ consensus\ protocol\ upgrade.}}
\DoxyCodeLine{00505\ }
\DoxyCodeLine{00506\ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ disallow\_send\_to\_self\_bypass\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_aa808acf858e93c567ff983ccbf8fb6d3}{is\_builtin\_activated}}(\ \mbox{\hyperlink{namespacesysio_1_1chain_a406d45a184cdba0af316b5bf34bf56cfaf0765905ee88dc2bfbdd738872b1b6f8}{builtin\_protocol\_feature\_t::restrict\_action\_to\_self}}\ );}
\DoxyCodeLine{00507\ }
\DoxyCodeLine{00508\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ is\_sending\_only\_to\_self\ =\ [\&trx](\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\_name}}\&\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a}{self}}\ )\ \{}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ send\_to\_self\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ act\ :\ trx.actions\ )\ \{}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ act.\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a3598da3f8df67037e69dab758ce168be}{account}}\ !=\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a}{self}}\ )\ \{}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ send\_to\_self\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00513\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00514\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00515\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00516\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ send\_to\_self;}
\DoxyCodeLine{00517\ \ \ \ \ \ \ \};}
\DoxyCodeLine{00518\ }
\DoxyCodeLine{00519\ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a8f7456b81f2657ccf6c39b35afb16af4}{get\_authorization\_manager}}()}
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .\mbox{\hyperlink{classsysio_1_1chain_1_1authorization__manager_a8566f4407e33eb1e4029455e4feae2f1}{check\_authorization}}(\ trx.actions,}
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\},}
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\{receiver,\ config::sysio\_code\_name\}\},}
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{integration_8cpp_a6e9635897de7740b7389a391f613626b}{delay}},}
\DoxyCodeLine{00525\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::bind(\&\mbox{\hyperlink{classsysio_1_1chain_1_1transaction__context_ac47cac1e2ac5625a8589686503dd1261}{transaction\_context::checktime}},\ \&this-\/>\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}{trx\_context}}),}
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ false}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00528\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classfc_1_1exception}{fc::exception}}\&\ e\ )\ \{}
\DoxyCodeLine{00529\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ disallow\_send\_to\_self\_bypass\ ||\ !is\_sending\_only\_to\_self(receiver)\ )\ \{}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0fcc85a590581560765686050fe105a8}{is\_producing\_block}}()\ )\ \{}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \ \ \ \ \ \ subjective\_block\_production\_exception\ new\_exception(\mbox{\hyperlink{log__message_8hpp_a4a4df4bb5cffbe07aadf7d29fd44c75e}{FC\_LOG\_MESSAGE}}(\ error,\ \textcolor{stringliteral}{"{}Authorization\ failure\ with\ sent\ deferred\ transaction\ consisting\ only\ of\ actions\ to\ self"{}}));}
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ log:\ e.\mbox{\hyperlink{classfc_1_1exception_a70b72c1e4fe0d17485a8b7a0a6f397de}{get\_log}}())\ \{}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ new\_exception.append\_log(log);}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ new\_exception;}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ ...\ )\ \{}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ disallow\_send\_to\_self\_bypass\ ||\ !is\_sending\_only\_to\_self(receiver)\ )\ \{}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00541\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0fcc85a590581560765686050fe105a8}{is\_producing\_block}}()\ )\ \{}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a1bfa656552ea0534b2c91ee0fe33f850}{SYS\_THROW}}(subjective\_block\_production\_exception,\ \textcolor{stringliteral}{"{}Unexpected\ exception\ occurred\ validating\ sent\ deferred\ transaction\ consisting\ only\ of\ actions\ to\ self"{}});}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00545\ \ \ \ \}}
\DoxyCodeLine{00546\ }
\DoxyCodeLine{00547\ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ trx\_size\ =\ 0;}
\DoxyCodeLine{00548\ \ \ \ \textcolor{keywordflow}{if}\ (\ \textcolor{keyword}{auto}\ ptr\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}.\mbox{\hyperlink{classchainbase_1_1database_aa5a2ca0da0092693ac49b36b7ec6817a}{find}}<generated\_transaction\_object,by\_sender\_id>(boost::make\_tuple(receiver,\ sender\_id))\ )\ \{}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ replace\_existing,\ deferred\_tx\_duplicate,\ \textcolor{stringliteral}{"{}deferred\ transaction\ with\ the\ same\ sender\_id\ and\ payer\ already\ exists"{}}\ );}
\DoxyCodeLine{00550\ }
\DoxyCodeLine{00551\ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ replace\_deferred\_activated\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_aa808acf858e93c567ff983ccbf8fb6d3}{is\_builtin\_activated}}(\mbox{\hyperlink{namespacesysio_1_1chain_a406d45a184cdba0af316b5bf34bf56cfa6c9cdecb5279149c0f09980e3161e501}{builtin\_protocol\_feature\_t::replace\_deferred}});}
\DoxyCodeLine{00552\ }
\DoxyCodeLine{00553\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ replace\_deferred\_activated\ ||\ !\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0fcc85a590581560765686050fe105a8}{is\_producing\_block}}()}
\DoxyCodeLine{00554\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_af99330e9d5db1211d2c7cd7b3669830d}{all\_subjective\_mitigations\_disabled}}(),}
\DoxyCodeLine{00555\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ subjective\_block\_production\_exception,}
\DoxyCodeLine{00556\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Replacing\ a\ deferred\ transaction\ is\ temporarily\ disabled."{}}\ );}
\DoxyCodeLine{00557\ }
\DoxyCodeLine{00558\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{auto}\ dm\_logger\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a4f6404b355a3a4bf7fb60c92e85443d1}{get\_deep\_mind\_logger}}())\ \{}
\DoxyCodeLine{00559\ \ \ \ \ \ \ \ \ \ dm\_logger-\/>on\_ram\_trace(\mbox{\hyperlink{deep__mind_8hpp_aaaa2f1dbd522de03ccbaa73f01db5f50}{RAM\_EVENT\_ID}}(\textcolor{stringliteral}{"{}\$\{id\}"{}},\ (\textcolor{stringliteral}{"{}id"{}},\ ptr-\/>id)),\ \textcolor{stringliteral}{"{}deferred\_trx"{}},\ \textcolor{stringliteral}{"{}cancel"{}},\ \textcolor{stringliteral}{"{}deferred\_trx\_cancel"{}});}
\DoxyCodeLine{00560\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00561\ }
\DoxyCodeLine{00562\ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}}\ orig\_trx\_ram\_bytes\ =\ \mbox{\hyperlink{namespacesysio_1_1chain_1_1config_a2772c77657b1f6fda680bbe8f7282d13}{config::billable\_size\_v<generated\_transaction\_object>}}\ +\ ptr-\/>packed\_trx.size();}
\DoxyCodeLine{00563\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ replace\_deferred\_activated\ )\ \{}
\DoxyCodeLine{00564\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a18d1df4bf3df1229cbfd0bcdce63c06c}{add\_ram\_usage}}(\ ptr-\/>payer,\ -\/\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{stdint_8h_a414156feea104f8f75b4ed9e3121b2f6}{int64\_t}}\textcolor{keyword}{>}(\ orig\_trx\_ram\_bytes\ )\ );}
\DoxyCodeLine{00565\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a205a357919f596bf80ba1d2d6e84c9e8}{add\_to\_ram\_correction}}(\ ptr-\/>payer,\ orig\_trx\_ram\_bytes\ );}
\DoxyCodeLine{00567\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00568\ }
\DoxyCodeLine{00569\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_1_1chain_aa85a3b49b3b219d1e3840567579e7e63}{transaction\_id\_type}}\ trx\_id\_for\_new\_obj;}
\DoxyCodeLine{00570\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ replace\_deferred\_activated\ )\ \{}
\DoxyCodeLine{00571\ \ \ \ \ \ \ \ \ \ trx\_id\_for\_new\_obj\ =\ trx.id();}
\DoxyCodeLine{00572\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00573\ \ \ \ \ \ \ \ \ \ trx\_id\_for\_new\_obj\ =\ ptr-\/>trx\_id;}
\DoxyCodeLine{00574\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00575\ }
\DoxyCodeLine{00576\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{auto}\ dm\_logger\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a4f6404b355a3a4bf7fb60c92e85443d1}{get\_deep\_mind\_logger}}())\ \{}
\DoxyCodeLine{00577\ \ \ \ \ \ \ \ \ \ dm\_logger-\/>on\_cancel\_deferred(\mbox{\hyperlink{classsysio_1_1chain_1_1deep__mind__handler_a78bf0c79493a90c71cb28aa761f44fd2a8f45a2644508b5282f57fe129f62d19a}{deep\_mind\_handler::operation\_qualifier::modify}},\ *ptr);}
\DoxyCodeLine{00578\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00579\ }
\DoxyCodeLine{00580\ \ \ \ \ \ \ \textcolor{comment}{//\ Use\ remove\ and\ create\ rather\ than\ modify\ because\ mutating\ the\ trx\_id\ field\ in\ a\ modifier\ is\ unsafe.}}
\DoxyCodeLine{00581\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}.\mbox{\hyperlink{classchainbase_1_1database_ac6bb29708e4fdfb6899028e3c351fe0b}{remove}}(\ *ptr\ );}
\DoxyCodeLine{00582\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}.\mbox{\hyperlink{classchainbase_1_1database_adc8f336b33d7013d1b0400399b16c5a7}{create}}<generated\_transaction\_object>(\ [\&](\ \textcolor{keyword}{auto}\&\ gtx\ )\ \{}
\DoxyCodeLine{00583\ \ \ \ \ \ \ \ \ \ gtx.trx\_id\ \ \ \ \ \ =\ trx\_id\_for\_new\_obj;}
\DoxyCodeLine{00584\ \ \ \ \ \ \ \ \ \ gtx.sender\ \ \ \ \ \ =\ receiver;}
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \ gtx.sender\_id\ \ \ =\ sender\_id;}
\DoxyCodeLine{00586\ \ \ \ \ \ \ \ \ \ gtx.payer\ \ \ \ \ \ \ =\ payer;}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \ gtx.published\ \ \ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_abb1d81f96986df3bce46bd37caaf6a69}{pending\_block\_time}}();}
\DoxyCodeLine{00588\ \ \ \ \ \ \ \ \ \ gtx.delay\_until\ =\ gtx.published\ +\ \mbox{\hyperlink{integration_8cpp_a6e9635897de7740b7389a391f613626b}{delay}};}
\DoxyCodeLine{00589\ \ \ \ \ \ \ \ \ \ gtx.expiration\ \ =\ gtx.delay\_until\ +\ \mbox{\hyperlink{namespacefc_a9623b8cae3f48bbed6aa1fc2afe9b174}{fc::seconds}}(\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0bb11e832a05b6437c79bf81758b1b7d}{get\_global\_properties}}().\mbox{\hyperlink{classsysio_1_1chain_1_1global__property__object_a7f149fcf87034217c899838eb4430496}{configuration}}.\mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_a6ab303c6326dc33d1280e0b8d13eed68}{deferred\_trx\_expiration\_window}});}
\DoxyCodeLine{00590\ }
\DoxyCodeLine{00591\ \ \ \ \ \ \ \ \ \ trx\_size\ =\ gtx.set(\ trx\ );}
\DoxyCodeLine{00592\ }
\DoxyCodeLine{00593\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{auto}\ dm\_logger\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a4f6404b355a3a4bf7fb60c92e85443d1}{get\_deep\_mind\_logger}}())\ \{}
\DoxyCodeLine{00594\ \ \ \ \ \ \ \ \ \ \ \ \ dm\_logger-\/>on\_send\_deferred(\mbox{\hyperlink{classsysio_1_1chain_1_1deep__mind__handler_a78bf0c79493a90c71cb28aa761f44fd2a8f45a2644508b5282f57fe129f62d19a}{deep\_mind\_handler::operation\_qualifier::modify}},\ gtx);}
\DoxyCodeLine{00595\ \ \ \ \ \ \ \ \ \ \ \ \ dm\_logger-\/>on\_ram\_trace(\mbox{\hyperlink{deep__mind_8hpp_aaaa2f1dbd522de03ccbaa73f01db5f50}{RAM\_EVENT\_ID}}(\textcolor{stringliteral}{"{}\$\{id\}"{}},\ (\textcolor{stringliteral}{"{}id"{}},\ gtx.id)),\ \textcolor{stringliteral}{"{}deferred\_trx"{}},\ \textcolor{stringliteral}{"{}update"{}},\ \textcolor{stringliteral}{"{}deferred\_trx\_add"{}});}
\DoxyCodeLine{00596\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \}\ );}
\DoxyCodeLine{00598\ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00599\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}{db}}.\mbox{\hyperlink{classchainbase_1_1database_adc8f336b33d7013d1b0400399b16c5a7}{create}}<generated\_transaction\_object>(\ [\&](\ \textcolor{keyword}{auto}\&\ gtx\ )\ \{}
\DoxyCodeLine{00600\ \ \ \ \ \ \ \ \ \ gtx.trx\_id\ \ \ \ \ \ =\ trx.id();}
\DoxyCodeLine{00601\ \ \ \ \ \ \ \ \ \ gtx.sender\ \ \ \ \ \ =\ receiver;}
\DoxyCodeLine{00602\ \ \ \ \ \ \ \ \ \ gtx.sender\_id\ \ \ =\ sender\_id;}
\DoxyCodeLine{00603\ \ \ \ \ \ \ \ \ \ gtx.payer\ \ \ \ \ \ \ =\ payer;}
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ \ \ gtx.published\ \ \ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_abb1d81f96986df3bce46bd37caaf6a69}{pending\_block\_time}}();}
\DoxyCodeLine{00605\ \ \ \ \ \ \ \ \ \ gtx.delay\_until\ =\ gtx.published\ +\ \mbox{\hyperlink{integration_8cpp_a6e9635897de7740b7389a391f613626b}{delay}};}
\DoxyCodeLine{00606\ \ \ \ \ \ \ \ \ \ gtx.expiration\ \ =\ gtx.delay\_until\ +\ \mbox{\hyperlink{namespacefc_a9623b8cae3f48bbed6aa1fc2afe9b174}{fc::seconds}}(\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a0bb11e832a05b6437c79bf81758b1b7d}{get\_global\_properties}}().\mbox{\hyperlink{classsysio_1_1chain_1_1global__property__object_a7f149fcf87034217c899838eb4430496}{configuration}}.\mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_a6ab303c6326dc33d1280e0b8d13eed68}{deferred\_trx\_expiration\_window}});}
\DoxyCodeLine{00607\ }
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ \ \ trx\_size\ =\ gtx.set(\ trx\ );}
\DoxyCodeLine{00609\ }
\DoxyCodeLine{00610\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{auto}\ dm\_logger\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a4f6404b355a3a4bf7fb60c92e85443d1}{get\_deep\_mind\_logger}}())\ \{}
\DoxyCodeLine{00611\ \ \ \ \ \ \ \ \ \ \ \ \ dm\_logger-\/>on\_send\_deferred(\mbox{\hyperlink{classsysio_1_1chain_1_1deep__mind__handler_a78bf0c79493a90c71cb28aa761f44fd2a334c4a4c42fdb79d7ebc3e73b517e6f8}{deep\_mind\_handler::operation\_qualifier::none}},\ gtx);}
\DoxyCodeLine{00612\ \ \ \ \ \ \ \ \ \ \ \ \ dm\_logger-\/>on\_ram\_trace(\mbox{\hyperlink{deep__mind_8hpp_aaaa2f1dbd522de03ccbaa73f01db5f50}{RAM\_EVENT\_ID}}(\textcolor{stringliteral}{"{}\$\{id\}"{}},\ (\textcolor{stringliteral}{"{}id"{}},\ gtx.id)),\ \textcolor{stringliteral}{"{}deferred\_trx"{}},\ \textcolor{stringliteral}{"{}add"{}},\ \textcolor{stringliteral}{"{}deferred\_trx\_add"{}});}
\DoxyCodeLine{00613\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00614\ \ \ \ \ \ \ \}\ );}
\DoxyCodeLine{00615\ \ \ \ \}}
\DoxyCodeLine{00616\ }
\DoxyCodeLine{00617\ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ ram\_restrictions\_activated}
\DoxyCodeLine{00618\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a4afbf4e4448a73468eb6947b68a0c348}{is\_ram\_billing\_in\_notify\_allowed}}()}
\DoxyCodeLine{00619\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ (receiver\ ==\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a3598da3f8df67037e69dab758ce168be}{account}})\ ||\ (receiver\ ==\ payer)\ ||\ privileged,}
\DoxyCodeLine{00620\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ subjective\_block\_production\_exception,}
\DoxyCodeLine{00621\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Cannot\ charge\ RAM\ to\ other\ accounts\ during\ notify."{}}}
\DoxyCodeLine{00622\ \ \ \ );}
\DoxyCodeLine{00623\ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a18d1df4bf3df1229cbfd0bcdce63c06c}{add\_ram\_usage}}(\ payer,\ (\mbox{\hyperlink{namespacesysio_1_1chain_1_1config_a2772c77657b1f6fda680bbe8f7282d13}{config::billable\_size\_v<generated\_transaction\_object>}}\ +\ trx\_size)\ );}
\DoxyCodeLine{00624\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_ac09c8f3118154bb22b0bd50526e138fa_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a49f2feb0d0ce2cb21c74f871432392e9}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!update\_db\_usage@{update\_db\_usage}}
\index{update\_db\_usage@{update\_db\_usage}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{update\_db\_usage()}{update\_db\_usage()}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a49f2feb0d0ce2cb21c74f871432392e9} 
void sysio\+::chain\+::apply\+\_\+context\+::update\+\_\+db\+\_\+usage (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} \&}]{payer}{, }\item[{\mbox{\hyperlink{stdint_8h_a414156feea104f8f75b4ed9e3121b2f6}{int64\+\_\+t}}}]{delta}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{apply__context_8cpp_source_l00723}{723}} of file \mbox{\hyperlink{apply__context_8cpp_source}{apply\+\_\+context.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00723\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00724\ \ \ \ \textcolor{keywordflow}{if}(\ delta\ >\ 0\ )\ \{}
\DoxyCodeLine{00725\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !(privileged\ ||\ payer\ ==\ \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\_name}}(receiver)}
\DoxyCodeLine{00726\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_aa808acf858e93c567ff983ccbf8fb6d3}{is\_builtin\_activated}}(\ \mbox{\hyperlink{namespacesysio_1_1chain_a406d45a184cdba0af316b5bf34bf56cfa5b1659352f17eb75b45e13054aaf1521}{builtin\_protocol\_feature\_t::ram\_restrictions}}\ )\ )\ )}
\DoxyCodeLine{00727\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00728\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a4afbf4e4448a73468eb6947b68a0c348}{is\_ram\_billing\_in\_notify\_allowed}}()\ ||\ (receiver\ ==\ act-\/>\mbox{\hyperlink{structsysio_1_1chain_1_1action__base_a3598da3f8df67037e69dab758ce168be}{account}}),}
\DoxyCodeLine{00729\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ subjective\_block\_production\_exception,\ \textcolor{stringliteral}{"{}Cannot\ charge\ RAM\ to\ other\ accounts\ during\ notify."{}}\ );}
\DoxyCodeLine{00730\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a7dbd347239af8b3540db7830b6e2f11e}{require\_authorization}}(\ payer\ );}
\DoxyCodeLine{00731\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00732\ \ \ \ \}}
\DoxyCodeLine{00733\ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_a18d1df4bf3df1229cbfd0bcdce63c06c}{add\_ram\_usage}}(payer,\ delta);}
\DoxyCodeLine{00734\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_a49f2feb0d0ce2cb21c74f871432392e9_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1chain_1_1apply__context_a49f2feb0d0ce2cb21c74f871432392e9_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\Hypertarget{classsysio_1_1chain_1_1apply__context_a1c52613df7c14b4120213492f01a6dac}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!action\_return\_value@{action\_return\_value}}
\index{action\_return\_value@{action\_return\_value}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{action\_return\_value}{action\_return\_value}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a1c52613df7c14b4120213492f01a6dac} 
std\+::vector$<$char$>$ sysio\+::chain\+::apply\+\_\+context\+::action\+\_\+return\+\_\+value}



Definition at line \mbox{\hyperlink{apply__context_8hpp_source_l00616}{616}} of file \mbox{\hyperlink{apply__context_8hpp_source}{apply\+\_\+context.\+hpp}}.

\Hypertarget{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!control@{control}}
\index{control@{control}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{control}{control}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a6596cb3266655d307e7bc7d2a663aa4f} 
\mbox{\hyperlink{classsysio_1_1chain_1_1controller}{controller}}\& sysio\+::chain\+::apply\+\_\+context\+::control}



Definition at line \mbox{\hyperlink{apply__context_8hpp_source_l00601}{601}} of file \mbox{\hyperlink{apply__context_8hpp_source}{apply\+\_\+context.\+hpp}}.

\Hypertarget{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!db@{db}}
\index{db@{db}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{db}{db}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_ac3b6e6353b5ecebcb305e1d3dcfac4eb} 
\mbox{\hyperlink{classchainbase_1_1database}{chainbase\+::database}}\& sysio\+::chain\+::apply\+\_\+context\+::db}



Definition at line \mbox{\hyperlink{apply__context_8hpp_source_l00602}{602}} of file \mbox{\hyperlink{apply__context_8hpp_source}{apply\+\_\+context.\+hpp}}.

\Hypertarget{classsysio_1_1chain_1_1apply__context_a8ed72869a07898bf164ce4a276812b4f}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!idx128@{idx128}}
\index{idx128@{idx128}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{idx128}{idx128}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a8ed72869a07898bf164ce4a276812b4f} 
\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_1_1generic__index}{generic\+\_\+index}}$<$\mbox{\hyperlink{namespacesysio_1_1chain_ad0c5e87e826d54fc3433f2cf38786f38}{index128\+\_\+object}}$>$ sysio\+::chain\+::apply\+\_\+context\+::idx128}



Definition at line \mbox{\hyperlink{apply__context_8hpp_source_l00618}{618}} of file \mbox{\hyperlink{apply__context_8hpp_source}{apply\+\_\+context.\+hpp}}.

\Hypertarget{classsysio_1_1chain_1_1apply__context_af166128976eea68e664566554667d043}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!idx256@{idx256}}
\index{idx256@{idx256}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{idx256}{idx256}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_af166128976eea68e664566554667d043} 
\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_1_1generic__index}{generic\+\_\+index}}$<$\mbox{\hyperlink{namespacesysio_1_1chain_a1df9b5f56e841471ba5d048993924dda}{index256\+\_\+object}}, \mbox{\hyperlink{namespacesysio_1_1chain_a896515137d9a7844105786ee3a6b1d47}{uint128\+\_\+t}}\texorpdfstring{$\ast$}{*}, const \mbox{\hyperlink{namespacesysio_1_1chain_a896515137d9a7844105786ee3a6b1d47}{uint128\+\_\+t}}\texorpdfstring{$\ast$}{*}$>$ sysio\+::chain\+::apply\+\_\+context\+::idx256}



Definition at line \mbox{\hyperlink{apply__context_8hpp_source_l00619}{619}} of file \mbox{\hyperlink{apply__context_8hpp_source}{apply\+\_\+context.\+hpp}}.

\Hypertarget{classsysio_1_1chain_1_1apply__context_afdf8013faed3968597f89ea864295e9e}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!idx64@{idx64}}
\index{idx64@{idx64}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{idx64}{idx64}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_afdf8013faed3968597f89ea864295e9e} 
\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_1_1generic__index}{generic\+\_\+index}}$<$\mbox{\hyperlink{namespacesysio_1_1chain_a42c00d654b5b7f86a0e48b817a2cf76f}{index64\+\_\+object}}$>$ sysio\+::chain\+::apply\+\_\+context\+::idx64}



Definition at line \mbox{\hyperlink{apply__context_8hpp_source_l00617}{617}} of file \mbox{\hyperlink{apply__context_8hpp_source}{apply\+\_\+context.\+hpp}}.

\Hypertarget{classsysio_1_1chain_1_1apply__context_a5987dcbf745594e73592c9bee4bdb126}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!idx\_double@{idx\_double}}
\index{idx\_double@{idx\_double}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{idx\_double}{idx\_double}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a5987dcbf745594e73592c9bee4bdb126} 
\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_1_1generic__index}{generic\+\_\+index}}$<$\mbox{\hyperlink{namespacesysio_1_1chain_ae2c037c54f3984f40809cbe4571abcfa}{index\+\_\+double\+\_\+object}}$>$ sysio\+::chain\+::apply\+\_\+context\+::idx\+\_\+double}



Definition at line \mbox{\hyperlink{apply__context_8hpp_source_l00620}{620}} of file \mbox{\hyperlink{apply__context_8hpp_source}{apply\+\_\+context.\+hpp}}.

\Hypertarget{classsysio_1_1chain_1_1apply__context_a36b3d29222bf2b1305189c30596b2622}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!idx\_long\_double@{idx\_long\_double}}
\index{idx\_long\_double@{idx\_long\_double}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{idx\_long\_double}{idx\_long\_double}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_a36b3d29222bf2b1305189c30596b2622} 
\mbox{\hyperlink{classsysio_1_1chain_1_1apply__context_1_1generic__index}{generic\+\_\+index}}$<$\mbox{\hyperlink{namespacesysio_1_1chain_a52abfa935a8f9d7da62050f50e2997ba}{index\+\_\+long\+\_\+double\+\_\+object}}$>$ sysio\+::chain\+::apply\+\_\+context\+::idx\+\_\+long\+\_\+double}



Definition at line \mbox{\hyperlink{apply__context_8hpp_source_l00621}{621}} of file \mbox{\hyperlink{apply__context_8hpp_source}{apply\+\_\+context.\+hpp}}.

\Hypertarget{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765}\index{sysio::chain::apply\_context@{sysio::chain::apply\_context}!trx\_context@{trx\_context}}
\index{trx\_context@{trx\_context}!sysio::chain::apply\_context@{sysio::chain::apply\_context}}
\doxysubsubsection{\texorpdfstring{trx\_context}{trx\_context}}
{\footnotesize\ttfamily \label{classsysio_1_1chain_1_1apply__context_aa4a6bbc72218ef25b15cfc91176d9765} 
\mbox{\hyperlink{classsysio_1_1chain_1_1transaction__context}{transaction\+\_\+context}}\& sysio\+::chain\+::apply\+\_\+context\+::trx\+\_\+context}



Definition at line \mbox{\hyperlink{apply__context_8hpp_source_l00603}{603}} of file \mbox{\hyperlink{apply__context_8hpp_source}{apply\+\_\+context.\+hpp}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
libraries/chain/include/sysio/chain/\mbox{\hyperlink{apply__context_8hpp}{apply\+\_\+context.\+hpp}}\item 
libraries/chain/\mbox{\hyperlink{apply__context_8cpp}{apply\+\_\+context.\+cpp}}\end{DoxyCompactItemize}
