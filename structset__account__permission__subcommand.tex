\doxysection{set\+\_\+account\+\_\+permission\+\_\+subcommand Struct Reference}
\hypertarget{structset__account__permission__subcommand}{}\label{structset__account__permission__subcommand}\index{set\_account\_permission\_subcommand@{set\_account\_permission\_subcommand}}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structset__account__permission__subcommand_a2da47985a64e4a5c68e17ef4df9f8126}{set\+\_\+account\+\_\+permission\+\_\+subcommand}} (\mbox{\hyperlink{class_c_l_i_1_1_app}{CLI\+::\+App}} \texorpdfstring{$\ast$}{*}account\+Cmd)
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} \mbox{\hyperlink{structset__account__permission__subcommand_a7dd31edc5ac87279d0d7eae215acdcaf}{account}}
\item 
\mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} \mbox{\hyperlink{structset__account__permission__subcommand_a585795d88a33b7235f9edc295b5eaf19}{permission}}
\item 
\mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} \mbox{\hyperlink{structset__account__permission__subcommand_afc45c8c5082c64043dc08e3de708a256}{authority\+\_\+json\+\_\+or\+\_\+file}}
\item 
\mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} \mbox{\hyperlink{structset__account__permission__subcommand_a883eab80d202abfe4100c493616ac01a}{parent}}
\item 
bool \mbox{\hyperlink{structset__account__permission__subcommand_ac9e4d9ed1a26f77ed1cd95006ee147ab}{add\+\_\+code}} = false
\item 
bool \mbox{\hyperlink{structset__account__permission__subcommand_a580d16dd8f728f7b369214dc8d46dfef}{remove\+\_\+code}} = false
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{programs_2clio_2main_8cpp_source_l00847}{847}} of file \mbox{\hyperlink{programs_2clio_2main_8cpp_source}{main.\+cpp}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{structset__account__permission__subcommand_a2da47985a64e4a5c68e17ef4df9f8126}\index{set\_account\_permission\_subcommand@{set\_account\_permission\_subcommand}!set\_account\_permission\_subcommand@{set\_account\_permission\_subcommand}}
\index{set\_account\_permission\_subcommand@{set\_account\_permission\_subcommand}!set\_account\_permission\_subcommand@{set\_account\_permission\_subcommand}}
\doxysubsubsection{\texorpdfstring{set\_account\_permission\_subcommand()}{set\_account\_permission\_subcommand()}}
{\footnotesize\ttfamily \label{structset__account__permission__subcommand_a2da47985a64e4a5c68e17ef4df9f8126} 
set\+\_\+account\+\_\+permission\+\_\+subcommand\+::set\+\_\+account\+\_\+permission\+\_\+subcommand (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_c_l_i_1_1_app}{CLI\+::\+App}} \texorpdfstring{$\ast$}{*}}]{account\+Cmd}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{programs_2clio_2main_8cpp_source_l00855}{855}} of file \mbox{\hyperlink{programs_2clio_2main_8cpp_source}{main.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00855\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00856\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ permissions\ =\ accountCmd-\/>\mbox{\hyperlink{class_c_l_i_1_1_app_a8b461d2233ec4121259011b5ed24b336}{add\_subcommand}}(\textcolor{stringliteral}{"{}permission"{}},\ \mbox{\hyperlink{localize_8hpp_ab3bfcc0fee2852c8db4ea283c4dd9d99}{localized}}(\textcolor{stringliteral}{"{}Set\ parameters\ dealing\ with\ account\ permissions"{}}));}
\DoxyCodeLine{00857\ \ \ \ \ \ \ permissions-\/>\mbox{\hyperlink{class_c_l_i_1_1_app_a8c812d42c7720ecb5cd0aec41b5aa941}{add\_option}}(\textcolor{stringliteral}{"{}account"{}},\ account,\ \mbox{\hyperlink{localize_8hpp_ab3bfcc0fee2852c8db4ea283c4dd9d99}{localized}}(\textcolor{stringliteral}{"{}The\ account\ to\ set/delete\ a\ permission\ authority\ for"{}}))-\/>\mbox{\hyperlink{class_c_l_i_1_1_option_base_af18d4c8d8c2392b6947db9179110289a}{required}}();}
\DoxyCodeLine{00858\ \ \ \ \ \ \ permissions-\/>add\_option(\textcolor{stringliteral}{"{}permission"{}},\ permission,\ \mbox{\hyperlink{localize_8hpp_ab3bfcc0fee2852c8db4ea283c4dd9d99}{localized}}(\textcolor{stringliteral}{"{}The\ permission\ name\ to\ set/delete\ an\ authority\ for"{}}))-\/>\mbox{\hyperlink{class_c_l_i_1_1_option_base_af18d4c8d8c2392b6947db9179110289a}{required}}();}
\DoxyCodeLine{00859\ \ \ \ \ \ \ permissions-\/>add\_option(\textcolor{stringliteral}{"{}authority"{}},\ \mbox{\hyperlink{structset__account__permission__subcommand_afc45c8c5082c64043dc08e3de708a256}{authority\_json\_or\_file}},\ \mbox{\hyperlink{localize_8hpp_ab3bfcc0fee2852c8db4ea283c4dd9d99}{localized}}(\textcolor{stringliteral}{"{}[delete]\ NULL,\ [create/update]\ public\ key,\ JSON\ string\ or\ filename\ defining\ the\ authority,\ [code]\ contract\ name"{}}));}
\DoxyCodeLine{00860\ \ \ \ \ \ \ permissions-\/>add\_option(\textcolor{stringliteral}{"{}parent"{}},\ parent,\ \mbox{\hyperlink{localize_8hpp_ab3bfcc0fee2852c8db4ea283c4dd9d99}{localized}}(\textcolor{stringliteral}{"{}[create]\ The\ permission\ name\ of\ this\ parents\ permission,\ defaults\ to\ 'active'"{}}));}
\DoxyCodeLine{00861\ \ \ \ \ \ \ permissions-\/>add\_flag(\textcolor{stringliteral}{"{}-\/-\/add-\/code"{}},\ \mbox{\hyperlink{structset__account__permission__subcommand_ac9e4d9ed1a26f77ed1cd95006ee147ab}{add\_code}},\ \mbox{\hyperlink{localize_8hpp_ab3bfcc0fee2852c8db4ea283c4dd9d99}{localized}}(\textcolor{stringliteral}{"{}[code]\ add\ '\$\{code\}'\ permission\ to\ specified\ permission\ authority"{}},\ (\textcolor{stringliteral}{"{}code"{}},\ \mbox{\hyperlink{catch__reporter__console_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}(config::sysio\_code\_name))));}
\DoxyCodeLine{00862\ \ \ \ \ \ \ permissions-\/>add\_flag(\textcolor{stringliteral}{"{}-\/-\/remove-\/code"{}},\ \mbox{\hyperlink{structset__account__permission__subcommand_a580d16dd8f728f7b369214dc8d46dfef}{remove\_code}},\ \mbox{\hyperlink{localize_8hpp_ab3bfcc0fee2852c8db4ea283c4dd9d99}{localized}}(\textcolor{stringliteral}{"{}[code]\ remove\ '\$\{code\}'\ permission\ from\ specified\ permission\ authority"{}},\ (\textcolor{stringliteral}{"{}code"{}},\ \mbox{\hyperlink{catch__reporter__console_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}(config::sysio\_code\_name))));}
\DoxyCodeLine{00863\ }
\DoxyCodeLine{00864\ \ \ \ \ \ \ \mbox{\hyperlink{programs_2clio_2main_8cpp_aa5d53f41b83b5323c73622fbbb15e9cd}{add\_standard\_transaction\_options}}(permissions,\ \textcolor{stringliteral}{"{}account@active"{}});}
\DoxyCodeLine{00865\ }
\DoxyCodeLine{00866\ \ \ \ \ \ \ permissions-\/>callback([\textcolor{keyword}{this}]\ \{}
\DoxyCodeLine{00867\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{programs_2clio_2main_8cpp_a105d61ef6bafc8f471dd8f59e08945e1}{SYSC\_ASSERT}}(\ !(\mbox{\hyperlink{structset__account__permission__subcommand_ac9e4d9ed1a26f77ed1cd95006ee147ab}{add\_code}}\ \&\&\ \mbox{\hyperlink{structset__account__permission__subcommand_a580d16dd8f728f7b369214dc8d46dfef}{remove\_code}}),\ \textcolor{stringliteral}{"{}ERROR:\ Either\ -\/-\/add-\/code\ or\ -\/-\/remove-\/code\ can\ be\ set"{}}\ );}
\DoxyCodeLine{00868\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{programs_2clio_2main_8cpp_a105d61ef6bafc8f471dd8f59e08945e1}{SYSC\_ASSERT}}(\ (\mbox{\hyperlink{structset__account__permission__subcommand_ac9e4d9ed1a26f77ed1cd95006ee147ab}{add\_code}}\ \string^\ \mbox{\hyperlink{structset__account__permission__subcommand_a580d16dd8f728f7b369214dc8d46dfef}{remove\_code}})\ ||\ !\mbox{\hyperlink{structset__account__permission__subcommand_afc45c8c5082c64043dc08e3de708a256}{authority\_json\_or\_file}}.empty(),\ \textcolor{stringliteral}{"{}ERROR:\ authority\ should\ be\ specified\ unless\ add\ or\ remove\ code\ permission"{}}\ );}
\DoxyCodeLine{00869\ }
\DoxyCodeLine{00870\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structsysio_1_1chain_1_1authority}{authority}}\ auth;}
\DoxyCodeLine{00871\ }
\DoxyCodeLine{00872\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ need\_parent\ =\ parent.empty()\ \&\&\ (\mbox{\hyperlink{catch__reporter__console_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}(permission)\ !=\ \mbox{\hyperlink{catch__reporter__console_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}(\textcolor{stringliteral}{"{}owner"{}}));}
\DoxyCodeLine{00873\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ need\_auth\ =\ \mbox{\hyperlink{structset__account__permission__subcommand_ac9e4d9ed1a26f77ed1cd95006ee147ab}{add\_code}}\ ||\ \mbox{\hyperlink{structset__account__permission__subcommand_a580d16dd8f728f7b369214dc8d46dfef}{remove\_code}};}
\DoxyCodeLine{00874\ }
\DoxyCodeLine{00875\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !need\_auth\ \&\&\ boost::iequals(\mbox{\hyperlink{structset__account__permission__subcommand_afc45c8c5082c64043dc08e3de708a256}{authority\_json\_or\_file}},\ \textcolor{stringliteral}{"{}null"{}})\ )\ \{}
\DoxyCodeLine{00876\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{programs_2clio_2main_8cpp_aaf784434864a29e4835be7465173d1ab}{send\_actions}}(\ \{\ \mbox{\hyperlink{programs_2clio_2main_8cpp_ae36938e832446f8de4df66a5f3541d1b}{create\_deleteauth}}(\mbox{\hyperlink{catch__reporter__console_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}(account),\ \mbox{\hyperlink{catch__reporter__console_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}(permission))\ \}\ );}
\DoxyCodeLine{00877\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00878\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00879\ }
\DoxyCodeLine{00880\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ need\_parent\ ||\ need\_auth\ )\ \{}
\DoxyCodeLine{00881\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1variant}{fc::variant}}\ \mbox{\hyperlink{classfc_1_1json}{json}}\ =\ \mbox{\hyperlink{programs_2clio_2main_8cpp_af931af8e9f099860a2670931f8d3ad2c}{call}}(\mbox{\hyperlink{namespacesysio_1_1client_1_1http_a497de9c2d0b48ace77babd28f3797dd5}{get\_account\_func}},\ \mbox{\hyperlink{classfc_1_1mutable__variant__object}{fc::mutable\_variant\_object}}(\textcolor{stringliteral}{"{}account\_name"{}},\ account));}
\DoxyCodeLine{00882\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ res\ =\ \mbox{\hyperlink{classfc_1_1json}{json}}.as<\mbox{\hyperlink{structsysio_1_1chain__apis_1_1read__only_1_1get__account__results}{sysio::chain\_apis::read\_only::get\_account\_results}}>();}
\DoxyCodeLine{00883\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ itr\ =\ std::find\_if(res.permissions.begin(),\ res.permissions.end(),\ [\&](\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ perm)\ \{}
\DoxyCodeLine{00884\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ return\ perm.perm\_name\ ==\ name(permission);}
\DoxyCodeLine{00885\ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00886\ }
\DoxyCodeLine{00887\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ need\_parent\ )\ \{}
\DoxyCodeLine{00888\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ see\ if\ we\ can\ auto-\/determine\ the\ proper\ parent}}
\DoxyCodeLine{00889\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ itr\ !=\ res.permissions.end()\ )\ \{}
\DoxyCodeLine{00890\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parent\ =\ (*itr).parent.to\_string();}
\DoxyCodeLine{00891\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00892\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ this\ is\ a\ new\ permission\ and\ there\ is\ no\ parent\ we\ default\ to\ "{}active"{}}}
\DoxyCodeLine{00893\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parent\ =\ config::active\_name.to\_string();}
\DoxyCodeLine{00894\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00895\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00896\ }
\DoxyCodeLine{00897\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ need\_auth\ )\ \{}
\DoxyCodeLine{00898\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classfc_1_1actor}{actor}}\ =\ (\mbox{\hyperlink{structset__account__permission__subcommand_afc45c8c5082c64043dc08e3de708a256}{authority\_json\_or\_file}}.empty())\ ?\ \mbox{\hyperlink{catch__reporter__console_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}(account)\ :\ \mbox{\hyperlink{structsysio_1_1chain_1_1name}{name}}(\mbox{\hyperlink{structset__account__permission__subcommand_afc45c8c5082c64043dc08e3de708a256}{authority\_json\_or\_file}});}
\DoxyCodeLine{00899\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ code\_name\ =\ config::sysio\_code\_name;}
\DoxyCodeLine{00900\ }
\DoxyCodeLine{00901\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ itr\ !=\ res.permissions.end()\ )\ \{}
\DoxyCodeLine{00902\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ fetch\ existing\ authority}}
\DoxyCodeLine{00903\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ auth\ =\ std::move((*itr).required\_auth);}
\DoxyCodeLine{00904\ }
\DoxyCodeLine{00905\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ auto\ code\_perm\ =\ permission\_level\ \{\ actor,\ code\_name\ \};}
\DoxyCodeLine{00906\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ itr2\ =\ std::lower\_bound(auth.\mbox{\hyperlink{structsysio_1_1chain_1_1authority_a89e0cd6c19b4d59a0d37c499d6e90dd0}{accounts}}.begin(),\ auth.\mbox{\hyperlink{structsysio_1_1chain_1_1authority_a89e0cd6c19b4d59a0d37c499d6e90dd0}{accounts}}.end(),\ code\_perm,\ [\&](\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ perm\_level,\ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}})\ \{}
\DoxyCodeLine{00907\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ return\ perm\_level.permission\ <\ value;\ \textcolor{comment}{//\ Safe\ since\ valid\ authorities\ must\ order\ the\ permissions\ in\ accounts\ in\ ascending\ order}}
\DoxyCodeLine{00908\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00909\ }
\DoxyCodeLine{00910\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_a75d8898b07aafc20a48a415a1c6e7bf0}{if}}\ (\ \mbox{\hyperlink{structset__account__permission__subcommand_ac9e4d9ed1a26f77ed1cd95006ee147ab}{add\_code}}\ )\ \{}
\DoxyCodeLine{00911\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ itr2\ !=\ auth.\mbox{\hyperlink{structsysio_1_1chain_1_1authority_a89e0cd6c19b4d59a0d37c499d6e90dd0}{accounts}}.end()\ \&\&\ itr2-\/>permission\ ==\ code\_perm\ )\ \{}
\DoxyCodeLine{00912\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ authority\ already\ contains\ code\ permission,\ promote\ its\ weight\ to\ satisfy\ threshold}}
\DoxyCodeLine{00913\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (*itr2).weight\ <\ auth.\mbox{\hyperlink{structsysio_1_1chain_1_1authority_aad823950b83ee45db3b3515219759462}{threshold}}\ )\ \{}
\DoxyCodeLine{00914\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ auth.\mbox{\hyperlink{structsysio_1_1chain_1_1authority_aad823950b83ee45db3b3515219759462}{threshold}}\ >\ std::numeric\_limits<weight\_type>::max()\ )\ \{}
\DoxyCodeLine{00915\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ \textcolor{stringliteral}{"{}ERROR:\ Threshold\ is\ too\ high\ to\ be\ satisfied\ by\ sole\ code\ permission"{}}\ <<\ std::endl;}
\DoxyCodeLine{00916\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00917\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00918\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ \mbox{\hyperlink{localize_8hpp_ab3bfcc0fee2852c8db4ea283c4dd9d99}{localized}}(\textcolor{stringliteral}{"{}The\ weight\ of\ '\$\{actor\}@\$\{code\}'\ in\ '\$\{permission\}'\ permission\ authority\ will\ be\ increased\ up\ to\ threshold"{}},}
\DoxyCodeLine{00919\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}actor"{}},\ \mbox{\hyperlink{classfc_1_1actor}{actor}})(\textcolor{stringliteral}{"{}code"{}},\ code\_name)(\textcolor{stringliteral}{"{}permission"{}},\ permission))\ <<\ std::endl;}
\DoxyCodeLine{00920\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (*itr2).weight\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{namespacesysio_1_1chain_abb0a383cca5adde7807bbcc3c48840d4}{weight\_type}}\textcolor{keyword}{>}(auth.\mbox{\hyperlink{structsysio_1_1chain_1_1authority_aad823950b83ee45db3b3515219759462}{threshold}});}
\DoxyCodeLine{00921\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00922\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ \mbox{\hyperlink{localize_8hpp_ab3bfcc0fee2852c8db4ea283c4dd9d99}{localized}}(\textcolor{stringliteral}{"{}ERROR:\ The\ permission\ '\$\{permission\}'\ already\ contains\ '\$\{actor\}@\$\{code\}'"{}},}
\DoxyCodeLine{00923\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}permission"{}},\ permission)(\textcolor{stringliteral}{"{}actor"{}},\ \mbox{\hyperlink{classfc_1_1actor}{actor}})(\textcolor{stringliteral}{"{}code"{}},\ code\_name))\ <<\ std::endl;}
\DoxyCodeLine{00924\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{hello__driver_8cpp_a9717e7bbecb906637e86cef6da3d83c2}{return}}\ ;}
\DoxyCodeLine{00925\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00926\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00927\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ add\ code\ permission\ to\ specified\ authority}}
\DoxyCodeLine{00928\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ auth.\mbox{\hyperlink{structsysio_1_1chain_1_1authority_aad823950b83ee45db3b3515219759462}{threshold}}\ >\ std::numeric\_limits<weight\_type>::max()\ )\ \{}
\DoxyCodeLine{00929\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ \textcolor{stringliteral}{"{}ERROR:\ Threshold\ is\ too\ high\ to\ be\ satisfied\ by\ sole\ code\ permission"{}}\ <<\ std::endl;}
\DoxyCodeLine{00930\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00931\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00932\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ auth.\mbox{\hyperlink{structsysio_1_1chain_1_1authority_a89e0cd6c19b4d59a0d37c499d6e90dd0}{accounts}}.insert(\ itr2,\ \mbox{\hyperlink{structsysio_1_1chain_1_1permission__level__weight}{permission\_level\_weight}}\ \{}
\DoxyCodeLine{00933\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .permission\ =\ \{\ \mbox{\hyperlink{classfc_1_1actor}{actor}},\ code\_name\ \},}
\DoxyCodeLine{00934\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .weight\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{namespacesysio_1_1chain_abb0a383cca5adde7807bbcc3c48840d4}{weight\_type}}\textcolor{keyword}{>}(auth.\mbox{\hyperlink{structsysio_1_1chain_1_1authority_aad823950b83ee45db3b3515219759462}{threshold}})}
\DoxyCodeLine{00935\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00936\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00937\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00938\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ itr2\ !=\ auth.\mbox{\hyperlink{structsysio_1_1chain_1_1authority_a89e0cd6c19b4d59a0d37c499d6e90dd0}{accounts}}.end()\ \&\&\ itr2-\/>permission\ ==\ code\_perm\ )\ \{}
\DoxyCodeLine{00939\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ remove\ code\ permission,\ if\ authority\ becomes\ empty\ by\ the\ removal\ of\ code\ permission,\ delete\ permission}}
\DoxyCodeLine{00940\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ auth.\mbox{\hyperlink{structsysio_1_1chain_1_1authority_a89e0cd6c19b4d59a0d37c499d6e90dd0}{accounts}}.erase(\ itr2\ );}
\DoxyCodeLine{00941\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ auth.\mbox{\hyperlink{structsysio_1_1chain_1_1authority_ae43c8d325b117257317c793fbb248770}{keys}}.empty()\ \&\&\ auth.\mbox{\hyperlink{structsysio_1_1chain_1_1authority_a89e0cd6c19b4d59a0d37c499d6e90dd0}{accounts}}.empty()\ \&\&\ auth.\mbox{\hyperlink{structsysio_1_1chain_1_1authority_a7923a2eac1be79d5e6adbea8af4b3f62}{waits}}.empty()\ )\ \{}
\DoxyCodeLine{00942\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{programs_2clio_2main_8cpp_aaf784434864a29e4835be7465173d1ab}{send\_actions}}(\ \{\ \mbox{\hyperlink{programs_2clio_2main_8cpp_ae36938e832446f8de4df66a5f3541d1b}{create\_deleteauth}}(\mbox{\hyperlink{catch__reporter__console_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}(account),\ \mbox{\hyperlink{catch__reporter__console_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}(permission))\ \}\ );}
\DoxyCodeLine{00943\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00944\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00945\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00946\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ authority\ doesn't\ contain\ code\ permission}}
\DoxyCodeLine{00947\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ \mbox{\hyperlink{localize_8hpp_ab3bfcc0fee2852c8db4ea283c4dd9d99}{localized}}(\textcolor{stringliteral}{"{}ERROR:\ '\$\{actor\}@\$\{code\}'\ does\ not\ exist\ in\ '\$\{permission\}'\ permission\ authority"{}},}
\DoxyCodeLine{00948\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}actor"{}},\ \mbox{\hyperlink{classfc_1_1actor}{actor}})(\textcolor{stringliteral}{"{}code"{}},\ code\_name)(\textcolor{stringliteral}{"{}permission"{}},\ permission))\ <<\ std::endl;}
\DoxyCodeLine{00949\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00950\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00951\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00952\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00953\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{structset__account__permission__subcommand_ac9e4d9ed1a26f77ed1cd95006ee147ab}{add\_code}}\ )\ \{}
\DoxyCodeLine{00954\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ create\ new\ permission\ including\ code\ permission}}
\DoxyCodeLine{00955\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ auth.\mbox{\hyperlink{structsysio_1_1chain_1_1authority_aad823950b83ee45db3b3515219759462}{threshold}}\ =\ 1;}
\DoxyCodeLine{00956\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ auth.\mbox{\hyperlink{structsysio_1_1chain_1_1authority_a89e0cd6c19b4d59a0d37c499d6e90dd0}{accounts}}.push\_back(\ \mbox{\hyperlink{structsysio_1_1chain_1_1permission__level__weight}{permission\_level\_weight}}\ \{}
\DoxyCodeLine{00957\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .permission\ =\ \{\ \mbox{\hyperlink{classfc_1_1actor}{actor}},\ code\_name\ \},}
\DoxyCodeLine{00958\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .weight\ =\ 1}
\DoxyCodeLine{00959\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00960\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00961\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ specified\ permission\ doesn't\ exist,\ so\ failed\ to\ remove\ code\ permission\ from\ it}}
\DoxyCodeLine{00962\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ \mbox{\hyperlink{localize_8hpp_ab3bfcc0fee2852c8db4ea283c4dd9d99}{localized}}(\textcolor{stringliteral}{"{}ERROR:\ The\ permission\ '\$\{permission\}'\ does\ not\ exist"{}},\ (\textcolor{stringliteral}{"{}permission"{}},\ permission))\ <<\ std::endl;}
\DoxyCodeLine{00963\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00964\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00965\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00966\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00967\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00968\ }
\DoxyCodeLine{00969\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !need\_auth\ )\ \{}
\DoxyCodeLine{00970\ \ \ \ \ \ \ \ \ \ \ \ \ auth\ =\ \mbox{\hyperlink{programs_2clio_2main_8cpp_aaf7608fa515188bd736caae82bacf03d}{parse\_json\_authority\_or\_key}}(\mbox{\hyperlink{structset__account__permission__subcommand_afc45c8c5082c64043dc08e3de708a256}{authority\_json\_or\_file}});}
\DoxyCodeLine{00971\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00972\ }
\DoxyCodeLine{00973\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{programs_2clio_2main_8cpp_aaf784434864a29e4835be7465173d1ab}{send\_actions}}(\ \{\ \mbox{\hyperlink{programs_2clio_2main_8cpp_a1e59aa4ce38b95b536f6c1ba48b351fe}{create\_updateauth}}(\mbox{\hyperlink{catch__reporter__console_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}(account),\ \mbox{\hyperlink{catch__reporter__console_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}(permission),\ \mbox{\hyperlink{catch__reporter__console_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}(parent),\ auth)\ \}\ );}
\DoxyCodeLine{00974\ \ \ \ \ \ \ \});}
\DoxyCodeLine{00975\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{structset__account__permission__subcommand_a2da47985a64e4a5c68e17ef4df9f8126_cgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\Hypertarget{structset__account__permission__subcommand_a7dd31edc5ac87279d0d7eae215acdcaf}\index{set\_account\_permission\_subcommand@{set\_account\_permission\_subcommand}!account@{account}}
\index{account@{account}!set\_account\_permission\_subcommand@{set\_account\_permission\_subcommand}}
\doxysubsubsection{\texorpdfstring{account}{account}}
{\footnotesize\ttfamily \label{structset__account__permission__subcommand_a7dd31edc5ac87279d0d7eae215acdcaf} 
\mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} set\+\_\+account\+\_\+permission\+\_\+subcommand\+::account}



Definition at line \mbox{\hyperlink{programs_2clio_2main_8cpp_source_l00848}{848}} of file \mbox{\hyperlink{programs_2clio_2main_8cpp_source}{main.\+cpp}}.

\Hypertarget{structset__account__permission__subcommand_ac9e4d9ed1a26f77ed1cd95006ee147ab}\index{set\_account\_permission\_subcommand@{set\_account\_permission\_subcommand}!add\_code@{add\_code}}
\index{add\_code@{add\_code}!set\_account\_permission\_subcommand@{set\_account\_permission\_subcommand}}
\doxysubsubsection{\texorpdfstring{add\_code}{add\_code}}
{\footnotesize\ttfamily \label{structset__account__permission__subcommand_ac9e4d9ed1a26f77ed1cd95006ee147ab} 
bool set\+\_\+account\+\_\+permission\+\_\+subcommand\+::add\+\_\+code = false}



Definition at line \mbox{\hyperlink{programs_2clio_2main_8cpp_source_l00852}{852}} of file \mbox{\hyperlink{programs_2clio_2main_8cpp_source}{main.\+cpp}}.

\Hypertarget{structset__account__permission__subcommand_afc45c8c5082c64043dc08e3de708a256}\index{set\_account\_permission\_subcommand@{set\_account\_permission\_subcommand}!authority\_json\_or\_file@{authority\_json\_or\_file}}
\index{authority\_json\_or\_file@{authority\_json\_or\_file}!set\_account\_permission\_subcommand@{set\_account\_permission\_subcommand}}
\doxysubsubsection{\texorpdfstring{authority\_json\_or\_file}{authority\_json\_or\_file}}
{\footnotesize\ttfamily \label{structset__account__permission__subcommand_afc45c8c5082c64043dc08e3de708a256} 
\mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} set\+\_\+account\+\_\+permission\+\_\+subcommand\+::authority\+\_\+json\+\_\+or\+\_\+file}



Definition at line \mbox{\hyperlink{programs_2clio_2main_8cpp_source_l00850}{850}} of file \mbox{\hyperlink{programs_2clio_2main_8cpp_source}{main.\+cpp}}.

\Hypertarget{structset__account__permission__subcommand_a883eab80d202abfe4100c493616ac01a}\index{set\_account\_permission\_subcommand@{set\_account\_permission\_subcommand}!parent@{parent}}
\index{parent@{parent}!set\_account\_permission\_subcommand@{set\_account\_permission\_subcommand}}
\doxysubsubsection{\texorpdfstring{parent}{parent}}
{\footnotesize\ttfamily \label{structset__account__permission__subcommand_a883eab80d202abfe4100c493616ac01a} 
\mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} set\+\_\+account\+\_\+permission\+\_\+subcommand\+::parent}



Definition at line \mbox{\hyperlink{programs_2clio_2main_8cpp_source_l00851}{851}} of file \mbox{\hyperlink{programs_2clio_2main_8cpp_source}{main.\+cpp}}.

\Hypertarget{structset__account__permission__subcommand_a585795d88a33b7235f9edc295b5eaf19}\index{set\_account\_permission\_subcommand@{set\_account\_permission\_subcommand}!permission@{permission}}
\index{permission@{permission}!set\_account\_permission\_subcommand@{set\_account\_permission\_subcommand}}
\doxysubsubsection{\texorpdfstring{permission}{permission}}
{\footnotesize\ttfamily \label{structset__account__permission__subcommand_a585795d88a33b7235f9edc295b5eaf19} 
\mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} set\+\_\+account\+\_\+permission\+\_\+subcommand\+::permission}



Definition at line \mbox{\hyperlink{programs_2clio_2main_8cpp_source_l00849}{849}} of file \mbox{\hyperlink{programs_2clio_2main_8cpp_source}{main.\+cpp}}.

\Hypertarget{structset__account__permission__subcommand_a580d16dd8f728f7b369214dc8d46dfef}\index{set\_account\_permission\_subcommand@{set\_account\_permission\_subcommand}!remove\_code@{remove\_code}}
\index{remove\_code@{remove\_code}!set\_account\_permission\_subcommand@{set\_account\_permission\_subcommand}}
\doxysubsubsection{\texorpdfstring{remove\_code}{remove\_code}}
{\footnotesize\ttfamily \label{structset__account__permission__subcommand_a580d16dd8f728f7b369214dc8d46dfef} 
bool set\+\_\+account\+\_\+permission\+\_\+subcommand\+::remove\+\_\+code = false}



Definition at line \mbox{\hyperlink{programs_2clio_2main_8cpp_source_l00853}{853}} of file \mbox{\hyperlink{programs_2clio_2main_8cpp_source}{main.\+cpp}}.



The documentation for this struct was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
programs/clio/\mbox{\hyperlink{programs_2clio_2main_8cpp}{main.\+cpp}}\end{DoxyCompactItemize}
