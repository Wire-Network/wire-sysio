\doxysection{Intrinsics.\+cpp}
\hypertarget{_intrinsics_8cpp_source}{}\label{_intrinsics_8cpp_source}\index{libraries/wasm-\/jit/Source/Runtime/Intrinsics.cpp@{libraries/wasm-\/jit/Source/Runtime/Intrinsics.cpp}}
\mbox{\hyperlink{_intrinsics_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00001}00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_basic_types_8h}{Inline/BasicTypes.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00002}00002\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_intrinsics_8h}{Intrinsics.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00003}00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{wasm-jit_2_include_2_platform_2platform_8h}{Platform/Platform.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00004}00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_runtime_8h}{Runtime.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00005}00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_runtime_private_8h}{RuntimePrivate.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00006}00006\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00007}00007\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00008}00008\ }
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00009}00009\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_intrinsics}{Intrinsics}}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00010}00010\ \{}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00011}\mbox{\hyperlink{struct_intrinsics_1_1_singleton}{00011}}\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_intrinsics_1_1_singleton}{Singleton}}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00012}00012\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00013}\mbox{\hyperlink{struct_intrinsics_1_1_singleton_a39ea76e76006654966f34fba12e7c5ab}{00013}}\ \ \ \ \ \ \ \ \ std::map<std::string,Intrinsics::Function*>\ \mbox{\hyperlink{struct_intrinsics_1_1_singleton_a39ea76e76006654966f34fba12e7c5ab}{functionMap}};}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00015}\mbox{\hyperlink{struct_intrinsics_1_1_singleton_af53f06973d21fb761f57fc4ed2b622f1}{00015}}\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_intrinsics_1_1_singleton_af53f06973d21fb761f57fc4ed2b622f1}{Singleton}}()\ \{\}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00016}\mbox{\hyperlink{struct_intrinsics_1_1_singleton_a4110f0431154c6a95ba2a78c78462840}{00016}}\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_intrinsics_1_1_singleton_a4110f0431154c6a95ba2a78c78462840}{Singleton}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_intrinsics_1_1_singleton}{Singleton}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00018}\mbox{\hyperlink{struct_intrinsics_1_1_singleton_ae66967b702a73c8530197352c8e8edcf}{00018}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{struct_intrinsics_1_1_singleton}{Singleton}}\&\ \mbox{\hyperlink{struct_intrinsics_1_1_singleton_ae66967b702a73c8530197352c8e8edcf}{get}}()}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00019}00019\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00020}00020\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{struct_intrinsics_1_1_singleton}{Singleton}}\ result;}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00021}00021\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00022}00022\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00023}00023\ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00024}00024\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00025}\mbox{\hyperlink{namespace_intrinsics_a4f9641bbac5d77ac77dda48612aa3bb1}{00025}}\ \ \ \ \ std::string\ \mbox{\hyperlink{namespace_intrinsics_a4f9641bbac5d77ac77dda48612aa3bb1}{getDecoratedName}}(\textcolor{keyword}{const}\ std::string\&\ \mbox{\hyperlink{catch__reporter__console_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}},\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_i_r_1_1_object_type}{IR::ObjectType}}\&\ type)}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00026}00026\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00027}00027\ \ \ \ \ \ \ \ \ std::string\ decoratedName\ =\ \mbox{\hyperlink{catch__reporter__console_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}};}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00028}00028\ \ \ \ \ \ \ \ \ decoratedName\ +=\ \textcolor{stringliteral}{"{}\ :\ "{}};}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00029}00029\ \ \ \ \ \ \ \ \ decoratedName\ +=\ \mbox{\hyperlink{namespace_i_r_a85d4203bbc1c989c8351490c711537f5}{IR::asString}}(type);}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00030}00030\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ decoratedName;}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00031}00031\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00032}00032\ }
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00033}\mbox{\hyperlink{struct_intrinsics_1_1_function_add6250b1384c61c30811f3e8e8eac39a}{00033}}\ \ \ \ \ \mbox{\hyperlink{struct_intrinsics_1_1_function_add6250b1384c61c30811f3e8e8eac39a}{Function::Function}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ inName,\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_i_r_1_1_function_type}{IR::FunctionType}}*\ type,\textcolor{keywordtype}{void}*\ nativeFunction)}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00034}00034\ \ \ \ \ :\ \ \ \mbox{\hyperlink{catch__reporter__console_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}(inName)}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00035}00035\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00036}00036\ \ \ \ \ \ \ \ \ function\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{struct_runtime_1_1_function_instance}{Runtime::FunctionInstance}}(\textcolor{keyword}{nullptr},type,nativeFunction);}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00037}00037\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_intrinsics_1_1_singleton_ae66967b702a73c8530197352c8e8edcf}{Singleton::get}}().\mbox{\hyperlink{struct_intrinsics_1_1_singleton_a39ea76e76006654966f34fba12e7c5ab}{functionMap}}[\mbox{\hyperlink{namespace_intrinsics_a4f9641bbac5d77ac77dda48612aa3bb1}{getDecoratedName}}(inName,type)]\ =\ \textcolor{keyword}{this};}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00038}00038\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00039}00039\ }
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00040}\mbox{\hyperlink{struct_intrinsics_1_1_function_a69b0213732030a11eb3ab8c0b128e5c0}{00040}}\ \ \ \ \ \mbox{\hyperlink{struct_intrinsics_1_1_function_a69b0213732030a11eb3ab8c0b128e5c0}{Function::\string~Function}}()}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00041}00041\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00042}00042\ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00043}00043\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_intrinsics_1_1_singleton_ae66967b702a73c8530197352c8e8edcf}{Singleton::get}}().\mbox{\hyperlink{struct_intrinsics_1_1_singleton_a39ea76e76006654966f34fba12e7c5ab}{functionMap}}.erase(\mbox{\hyperlink{struct_intrinsics_1_1_singleton_ae66967b702a73c8530197352c8e8edcf}{Singleton::get}}().functionMap.find(\mbox{\hyperlink{namespace_intrinsics_a4f9641bbac5d77ac77dda48612aa3bb1}{getDecoratedName}}(name,function-\/>type)));}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00044}00044\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00045}00045\ \ \ \ \ \ \ \textcolor{keyword}{delete}\ \mbox{\hyperlink{struct_intrinsics_1_1_function_ae282783b6f14ad1b1c0301b6e0e957a8}{function}};}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00046}00046\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00048}\mbox{\hyperlink{namespace_intrinsics_a7b30616029cc015f330ebf338c3fb454}{00048}}\ \ \ \ \ \mbox{\hyperlink{struct_runtime_1_1_object_instance}{Runtime::ObjectInstance}}*\ \mbox{\hyperlink{namespace_intrinsics_a7b30616029cc015f330ebf338c3fb454}{find}}(\textcolor{keyword}{const}\ std::string\&\ \mbox{\hyperlink{catch__reporter__console_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}},\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_i_r_1_1_object_type}{IR::ObjectType}}\&\ type)}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00049}00049\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00050}00050\ \ \ \ \ \ \ \ \ std::string\ decoratedName\ =\ \mbox{\hyperlink{namespace_intrinsics_a4f9641bbac5d77ac77dda48612aa3bb1}{getDecoratedName}}(\mbox{\hyperlink{catch__reporter__console_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}},type);}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00051}00051\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_runtime_1_1_object_instance}{Runtime::ObjectInstance}}*\ result\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00052}00052\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}(type.kind)}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00053}00053\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00054}00054\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespace_i_r_a5aed837d1ca89c12d0762ab19f1e3908ac1c425268e68385d1ab5074c17a94f14}{IR::ObjectKind::function}}:}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00055}00055\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00056}00056\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ keyValue\ =\ \mbox{\hyperlink{struct_intrinsics_1_1_singleton_ae66967b702a73c8530197352c8e8edcf}{Singleton::get}}().\mbox{\hyperlink{struct_intrinsics_1_1_singleton_a39ea76e76006654966f34fba12e7c5ab}{functionMap}}.find(decoratedName);}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00057}00057\ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ keyValue\ ==\ \mbox{\hyperlink{struct_intrinsics_1_1_singleton_ae66967b702a73c8530197352c8e8edcf}{Singleton::get}}().\mbox{\hyperlink{struct_intrinsics_1_1_singleton_a39ea76e76006654966f34fba12e7c5ab}{functionMap}}.end()\ ?\ nullptr\ :\ asObject(keyValue-\/>second-\/>function);}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00058}00058\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00059}00059\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00060}00060\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespace_i_r_a5aed837d1ca89c12d0762ab19f1e3908aaab9e1de16f38176f86d7a92ba337a8d}{IR::ObjectKind::table}}:}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00061}00061\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00062}00062\ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00063}00063\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00064}00064\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00065}00065\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespace_i_r_a5aed837d1ca89c12d0762ab19f1e3908acd69b4957f06cd818d7bf3d61980e291}{IR::ObjectKind::memory}}:}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00066}00066\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00067}00067\ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00068}00068\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00069}00069\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00070}00070\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespace_i_r_a5aed837d1ca89c12d0762ab19f1e3908a9c70933aff6b2a6d08c687a6cbb6b765}{IR::ObjectKind::global}}:}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00071}00071\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00072}00072\ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00073}00073\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00074}00074\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00075}00075\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:\ \mbox{\hyperlink{namespace_errors_a6959930ad6159fe3eb2e04ebf87c1b84}{Errors::unreachable}}();}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00076}00076\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00077}00077\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(result\ \&\&\ !isA(result,type))\ \{\ result\ =\ \textcolor{keyword}{nullptr};\ \}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00078}00078\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00079}00079\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00080}00080\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00081}\mbox{\hyperlink{namespace_intrinsics_a0234c55bf4d16a610b8e079f71f4dbde}{00081}}\ \ \ \ \ std::vector<Runtime::ObjectInstance*>\ \mbox{\hyperlink{namespace_intrinsics_a0234c55bf4d16a610b8e079f71f4dbde}{getAllIntrinsicObjects}}()}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00082}00082\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00083}00083\ \ \ \ \ \ \ \ \ std::vector<Runtime::ObjectInstance*>\ result;}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00084}00084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\ mapIt\ :\ \mbox{\hyperlink{struct_intrinsics_1_1_singleton_ae66967b702a73c8530197352c8e8edcf}{Singleton::get}}().functionMap)\ \{\ result.push\_back(mapIt.second-\/>function);\ \}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00085}00085\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00086}00086\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_intrinsics_8cpp_source_l00087}00087\ \}}

\end{DoxyCode}
