<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wire Sysio: sysio::dispatch_manager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Wire Sysio<span id="projectnumber">&#160;Wire Sysion 1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classsysio_1_1dispatch__manager.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classsysio_1_1dispatch__manager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">sysio::dispatch_manager Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa35f83c7d4071913f3f1570312f04476" id="r_aa35f83c7d4071913f3f1570312f04476"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa35f83c7d4071913f3f1570312f04476">dispatch_manager</a> (boost::asio::io_context &amp;io_context)</td></tr>
<tr class="separator:aa35f83c7d4071913f3f1570312f04476"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae15b74a09c0f986faa7b6688b686c2ea" id="r_ae15b74a09c0f986faa7b6688b686c2ea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae15b74a09c0f986faa7b6688b686c2ea">bcast_transaction</a> (const <a class="el" href="namespacesysio_1_1chain.html#a7041c0316bd294d0866609ab3e0cc7a7">packed_transaction_ptr</a> &amp;trx)</td></tr>
<tr class="separator:ae15b74a09c0f986faa7b6688b686c2ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1996831841cdd7b27700fc1b1c1abde0" id="r_a1996831841cdd7b27700fc1b1c1abde0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1996831841cdd7b27700fc1b1c1abde0">rejected_transaction</a> (const <a class="el" href="namespacesysio_1_1chain.html#a7041c0316bd294d0866609ab3e0cc7a7">packed_transaction_ptr</a> &amp;trx, <a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> head_blk_num)</td></tr>
<tr class="separator:a1996831841cdd7b27700fc1b1c1abde0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a629f48b0f6f0ade1cc21324ee78c5267" id="r_a629f48b0f6f0ade1cc21324ee78c5267"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a629f48b0f6f0ade1cc21324ee78c5267">bcast_block</a> (const <a class="el" href="namespacesysio_1_1chain.html#aa10ee348c57604b615bc8570f6685102">signed_block_ptr</a> &amp;b, const <a class="el" href="namespacesysio_1_1chain.html#a4b8e4b7ed9dcd18ee75d0de62e88aa17">block_id_type</a> &amp;<a class="el" href="code__cache_8cpp.html#aa0efefe21f4700d78692edc823e763be">id</a>)</td></tr>
<tr class="separator:a629f48b0f6f0ade1cc21324ee78c5267"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a851f82240b2248de38f02e708420cc08" id="r_a851f82240b2248de38f02e708420cc08"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a851f82240b2248de38f02e708420cc08">rejected_block</a> (const <a class="el" href="namespacesysio_1_1chain.html#a4b8e4b7ed9dcd18ee75d0de62e88aa17">block_id_type</a> &amp;<a class="el" href="code__cache_8cpp.html#aa0efefe21f4700d78692edc823e763be">id</a>)</td></tr>
<tr class="separator:a851f82240b2248de38f02e708420cc08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa3ad0cc9032b70051f7f7d6ca6f85d2" id="r_aaa3ad0cc9032b70051f7f7d6ca6f85d2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaa3ad0cc9032b70051f7f7d6ca6f85d2">recv_block</a> (const <a class="el" href="namespacesysio.html#aefc0023f14362306826da768553b8daf">connection_ptr</a> &amp;conn, const <a class="el" href="namespacesysio_1_1chain.html#a4b8e4b7ed9dcd18ee75d0de62e88aa17">block_id_type</a> &amp;msg, <a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> bnum)</td></tr>
<tr class="separator:aaa3ad0cc9032b70051f7f7d6ca6f85d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60d9382529f1c1ee7e27b3f553464bb8" id="r_a60d9382529f1c1ee7e27b3f553464bb8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a60d9382529f1c1ee7e27b3f553464bb8">expire_blocks</a> (<a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> bnum)</td></tr>
<tr class="separator:a60d9382529f1c1ee7e27b3f553464bb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4e82c30cfaf4e8dbc78ee1e24475716" id="r_aa4e82c30cfaf4e8dbc78ee1e24475716"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa4e82c30cfaf4e8dbc78ee1e24475716">recv_notice</a> (const <a class="el" href="namespacesysio.html#aefc0023f14362306826da768553b8daf">connection_ptr</a> &amp;conn, const <a class="el" href="structsysio_1_1notice__message.html">notice_message</a> &amp;msg, bool generated)</td></tr>
<tr class="separator:aa4e82c30cfaf4e8dbc78ee1e24475716"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc99556e40e117419b1e3af4271defbf" id="r_afc99556e40e117419b1e3af4271defbf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afc99556e40e117419b1e3af4271defbf">retry_fetch</a> (const <a class="el" href="namespacesysio.html#aefc0023f14362306826da768553b8daf">connection_ptr</a> &amp;conn)</td></tr>
<tr class="separator:afc99556e40e117419b1e3af4271defbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae028489706c095d3590cfeb80440252d" id="r_ae028489706c095d3590cfeb80440252d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae028489706c095d3590cfeb80440252d">add_peer_block</a> (const <a class="el" href="namespacesysio_1_1chain.html#a4b8e4b7ed9dcd18ee75d0de62e88aa17">block_id_type</a> &amp;blkid, <a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> connection_id)</td></tr>
<tr class="separator:ae028489706c095d3590cfeb80440252d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6464105ad3fe908bfac43cae949b5539" id="r_a6464105ad3fe908bfac43cae949b5539"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6464105ad3fe908bfac43cae949b5539">peer_has_block</a> (const <a class="el" href="namespacesysio_1_1chain.html#a4b8e4b7ed9dcd18ee75d0de62e88aa17">block_id_type</a> &amp;blkid, <a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> connection_id) const</td></tr>
<tr class="separator:a6464105ad3fe908bfac43cae949b5539"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf4f13505f097a787bfab2daa525d18f" id="r_acf4f13505f097a787bfab2daa525d18f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acf4f13505f097a787bfab2daa525d18f">have_block</a> (const <a class="el" href="namespacesysio_1_1chain.html#a4b8e4b7ed9dcd18ee75d0de62e88aa17">block_id_type</a> &amp;blkid) const</td></tr>
<tr class="separator:acf4f13505f097a787bfab2daa525d18f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdb332e31291e82cd33cd27966633dfd" id="r_afdb332e31291e82cd33cd27966633dfd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afdb332e31291e82cd33cd27966633dfd">add_peer_txn</a> (const <a class="el" href="namespacesysio_1_1chain.html#aa85a3b49b3b219d1e3840567579e7e63">transaction_id_type</a> <a class="el" href="code__cache_8cpp.html#aa0efefe21f4700d78692edc823e763be">id</a>, const <a class="el" href="classfc_1_1time__point__sec.html">time_point_sec</a> &amp;trx_expires, <a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> connection_id, const <a class="el" href="classfc_1_1time__point__sec.html">time_point_sec</a> &amp;now=<a class="el" href="classfc_1_1time__point.html#aa164ff1268a16d4b32afcff181f6100e">time_point::now</a>())</td></tr>
<tr class="separator:afdb332e31291e82cd33cd27966633dfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a129852b61b593442fc9e32cbc6251a75" id="r_a129852b61b593442fc9e32cbc6251a75"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a129852b61b593442fc9e32cbc6251a75">have_txn</a> (const <a class="el" href="namespacesysio_1_1chain.html#aa85a3b49b3b219d1e3840567579e7e63">transaction_id_type</a> &amp;tid) const</td></tr>
<tr class="separator:a129852b61b593442fc9e32cbc6251a75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a263628603e81efe5701e886585ad33f2" id="r_a263628603e81efe5701e886585ad33f2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a263628603e81efe5701e886585ad33f2">expire_txns</a> ()</td></tr>
<tr class="separator:a263628603e81efe5701e886585ad33f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a3189260e6b3da4bb0ca36245398d2c6a" id="r_a3189260e6b3da4bb0ca36245398d2c6a"><td class="memItemLeft" align="right" valign="top">boost::asio::io_context::strand&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3189260e6b3da4bb0ca36245398d2c6a">strand</a></td></tr>
<tr class="separator:a3189260e6b3da4bb0ca36245398d2c6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="net__plugin_8cpp_source.html#l00165">165</a> of file <a class="el" href="net__plugin_8cpp_source.html">net_plugin.cpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aa35f83c7d4071913f3f1570312f04476" name="aa35f83c7d4071913f3f1570312f04476"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa35f83c7d4071913f3f1570312f04476">&#9670;&#160;</a></span>dispatch_manager()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sysio::dispatch_manager::dispatch_manager </td>
          <td>(</td>
          <td class="paramtype">boost::asio::io_context &amp;</td>          <td class="paramname"><span class="paramname"><em>io_context</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="net__plugin_8cpp_source.html#l00174">174</a> of file <a class="el" href="net__plugin_8cpp_source.html">net_plugin.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  175</span>      : <a class="code hl_variable" href="#a3189260e6b3da4bb0ca36245398d2c6a">strand</a>( io_context ) {}</div>
<div class="ttc" id="aclasssysio_1_1dispatch__manager_html_a3189260e6b3da4bb0ca36245398d2c6a"><div class="ttname"><a href="#a3189260e6b3da4bb0ca36245398d2c6a">sysio::dispatch_manager::strand</a></div><div class="ttdeci">boost::asio::io_context::strand strand</div><div class="ttdef"><b>Definition</b> <a href="net__plugin_8cpp_source.html#l00172">net_plugin.cpp:172</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae028489706c095d3590cfeb80440252d" name="ae028489706c095d3590cfeb80440252d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae028489706c095d3590cfeb80440252d">&#9670;&#160;</a></span>add_peer_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sysio::dispatch_manager::add_peer_block </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#a4b8e4b7ed9dcd18ee75d0de62e88aa17">block_id_type</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blkid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></td>          <td class="paramname"><span class="paramname"><em>connection_id</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="net__plugin_8cpp_source.html#l02060">2060</a> of file <a class="el" href="net__plugin_8cpp_source.html">net_plugin.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2060</span>                                                                                            {</div>
<div class="line"><span class="lineno"> 2061</span>      std::lock_guard&lt;std::mutex&gt; g( blk_state_mtx );</div>
<div class="line"><span class="lineno"> 2062</span>      <span class="keyword">auto</span> bptr = blk_state.get&lt;by_id&gt;().<a class="code hl_function" href="namespace_intrinsics.html#a7b30616029cc015f330ebf338c3fb454">find</a>( std::make_tuple( connection_id, std::ref( blkid )));</div>
<div class="line"><span class="lineno"> 2063</span>      <span class="keywordtype">bool</span> added = (bptr == blk_state.end());</div>
<div class="line"><span class="lineno"> 2064</span>      <span class="keywordflow">if</span>( added ) {</div>
<div class="line"><span class="lineno"> 2065</span>         blk_state.insert( {blkid, <a class="code hl_function" href="structsysio_1_1chain_1_1block__header.html#a39d57e33ef8d3f6ba59b4c458f0ae375">block_header::num_from_id</a>( blkid ), connection_id, <span class="keyword">true</span>} );</div>
<div class="line"><span class="lineno"> 2066</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !bptr-&gt;have_block ) {</div>
<div class="line"><span class="lineno"> 2067</span>         blk_state.modify( bptr, []( <span class="keyword">auto</span>&amp; pb ) {</div>
<div class="line"><span class="lineno"> 2068</span>            pb.have_block = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2069</span>         });</div>
<div class="line"><span class="lineno"> 2070</span>      }</div>
<div class="line"><span class="lineno"> 2071</span>      <span class="keywordflow">return</span> added;</div>
<div class="line"><span class="lineno"> 2072</span>   }</div>
<div class="ttc" id="anamespace_intrinsics_html_a7b30616029cc015f330ebf338c3fb454"><div class="ttname"><a href="namespace_intrinsics.html#a7b30616029cc015f330ebf338c3fb454">Intrinsics::find</a></div><div class="ttdeci">RUNTIME_API Runtime::ObjectInstance * find(const std::string &amp;name, const IR::ObjectType &amp;type)</div><div class="ttdef"><b>Definition</b> <a href="_intrinsics_8cpp_source.html#l00048">Intrinsics.cpp:48</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1block__header_html_a39d57e33ef8d3f6ba59b4c458f0ae375"><div class="ttname"><a href="structsysio_1_1chain_1_1block__header.html#a39d57e33ef8d3f6ba59b4c458f0ae375">sysio::chain::block_header::num_from_id</a></div><div class="ttdeci">static uint32_t num_from_id(const block_id_type &amp;id)</div><div class="ttdef"><b>Definition</b> <a href="block__header_8cpp_source.html#l00013">block_header.cpp:13</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1dispatch__manager_ae028489706c095d3590cfeb80440252d_cgraph.png" border="0" usemap="#aclasssysio_1_1dispatch__manager_ae028489706c095d3590cfeb80440252d_cgraph" alt=""/></div>
<map name="aclasssysio_1_1dispatch__manager_ae028489706c095d3590cfeb80440252d_cgraph" id="aclasssysio_1_1dispatch__manager_ae028489706c095d3590cfeb80440252d_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,172,46"/>
<area shape="rect" href="structsysio_1_1chain_1_1block__header.html#a39d57e33ef8d3f6ba59b4c458f0ae375" title=" " alt="" coords="220,5,370,46"/>
<area shape="poly" title=" " alt="" coords="172,23,204,23,204,28,172,28"/>
<area shape="rect" href="namespacefc.html#afb668c55fd6ee73e1fcd67e77d8f6009" title=" " alt="" coords="418,13,574,38"/>
<area shape="poly" title=" " alt="" coords="370,23,402,23,402,28,370,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1dispatch__manager_ae028489706c095d3590cfeb80440252d_icgraph.png" border="0" usemap="#aclasssysio_1_1dispatch__manager_ae028489706c095d3590cfeb80440252d_icgraph" alt=""/></div>
<map name="aclasssysio_1_1dispatch__manager_ae028489706c095d3590cfeb80440252d_icgraph" id="aclasssysio_1_1dispatch__manager_ae028489706c095d3590cfeb80440252d_icgraph">
<area shape="rect" title=" " alt="" coords="220,5,386,46"/>
<area shape="rect" href="classsysio_1_1dispatch__manager.html#a629f48b0f6f0ade1cc21324ee78c5267" title=" " alt="" coords="5,5,172,46"/>
<area shape="poly" title=" " alt="" coords="204,28,172,28,172,23,204,23"/>
</map>
</div>

</div>
</div>
<a id="afdb332e31291e82cd33cd27966633dfd" name="afdb332e31291e82cd33cd27966633dfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdb332e31291e82cd33cd27966633dfd">&#9670;&#160;</a></span>add_peer_txn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sysio::dispatch_manager::add_peer_txn </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#aa85a3b49b3b219d1e3840567579e7e63">transaction_id_type</a></td>          <td class="paramname"><span class="paramname"><em>id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfc_1_1time__point__sec.html">time_point_sec</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>trx_expires</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></td>          <td class="paramname"><span class="paramname"><em>connection_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfc_1_1time__point__sec.html">time_point_sec</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>now</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="classfc_1_1time__point.html#aa164ff1268a16d4b32afcff181f6100e">time_point::now</a>()</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="net__plugin_8cpp_source.html#l02091">2091</a> of file <a class="el" href="net__plugin_8cpp_source.html">net_plugin.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2092</span>                                                                                            {</div>
<div class="line"><span class="lineno"> 2093</span>      std::lock_guard&lt;std::mutex&gt; g( local_txns_mtx );</div>
<div class="line"><span class="lineno"> 2094</span>      <span class="keyword">auto</span> tptr = local_txns.get&lt;by_id&gt;().<a class="code hl_function" href="namespace_intrinsics.html#a7b30616029cc015f330ebf338c3fb454">find</a>( std::make_tuple( std::ref( <span class="keywordtype">id</span> ), connection_id ) );</div>
<div class="line"><span class="lineno"> 2095</span>      <span class="keywordtype">bool</span> added = (tptr == local_txns.end());</div>
<div class="line"><span class="lineno"> 2096</span>      <span class="keywordflow">if</span>( added ) {</div>
<div class="line"><span class="lineno"> 2097</span>         <span class="comment">// expire at either transaction expiration or configured max expire time whichever is less</span></div>
<div class="line"><span class="lineno"> 2098</span>         <a class="code hl_class" href="classfc_1_1time__point__sec.html">time_point_sec</a> expires = now + my_impl-&gt;<a class="code hl_variable" href="classsysio_1_1net__plugin__impl.html#a52f626af69a684c05fde942601ce4a08">p2p_dedup_cache_expire_time_us</a>;</div>
<div class="line"><span class="lineno"> 2099</span>         expires = std::min( trx_expires, expires );</div>
<div class="line"><span class="lineno"> 2100</span>         local_txns.insert( node_transaction_state{</div>
<div class="line"><span class="lineno"> 2101</span>            .id = <a class="code hl_variable" href="code__cache_8cpp.html#aa0efefe21f4700d78692edc823e763be">id</a>,</div>
<div class="line"><span class="lineno"> 2102</span>            .expires = expires,</div>
<div class="line"><span class="lineno"> 2103</span>            .connection_id = connection_id} );</div>
<div class="line"><span class="lineno"> 2104</span>      }</div>
<div class="line"><span class="lineno"> 2105</span>      <span class="keywordflow">return</span> added;</div>
<div class="line"><span class="lineno"> 2106</span>   }</div>
<div class="ttc" id="aclassfc_1_1time__point__sec_html"><div class="ttname"><a href="classfc_1_1time__point__sec.html">fc::time_point_sec</a></div><div class="ttdef"><b>Definition</b> <a href="include_2fc_2time_8hpp_source.html#l00072">time.hpp:73</a></div></div>
<div class="ttc" id="aclasssysio_1_1net__plugin__impl_html_a52f626af69a684c05fde942601ce4a08"><div class="ttname"><a href="classsysio_1_1net__plugin__impl.html#a52f626af69a684c05fde942601ce4a08">sysio::net_plugin_impl::p2p_dedup_cache_expire_time_us</a></div><div class="ttdeci">fc::microseconds p2p_dedup_cache_expire_time_us</div><div class="ttdef"><b>Definition</b> <a href="net__plugin_8cpp_source.html#l00255">net_plugin.cpp:255</a></div></div>
<div class="ttc" id="acode__cache_8cpp_html_aa0efefe21f4700d78692edc823e763be"><div class="ttname"><a href="code__cache_8cpp.html#aa0efefe21f4700d78692edc823e763be">id</a></div><div class="ttdeci">uint64_t id</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8cpp_source.html#l00000">code_cache.cpp:0</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1dispatch__manager_afdb332e31291e82cd33cd27966633dfd_icgraph.png" border="0" usemap="#aclasssysio_1_1dispatch__manager_afdb332e31291e82cd33cd27966633dfd_icgraph" alt=""/></div>
<map name="aclasssysio_1_1dispatch__manager_afdb332e31291e82cd33cd27966633dfd_icgraph" id="aclasssysio_1_1dispatch__manager_afdb332e31291e82cd33cd27966633dfd_icgraph">
<area shape="rect" title=" " alt="" coords="220,5,386,46"/>
<area shape="rect" href="classsysio_1_1dispatch__manager.html#ae15b74a09c0f986faa7b6688b686c2ea" title=" " alt="" coords="5,5,172,46"/>
<area shape="poly" title=" " alt="" coords="204,28,172,28,172,23,204,23"/>
</map>
</div>

</div>
</div>
<a id="a629f48b0f6f0ade1cc21324ee78c5267" name="a629f48b0f6f0ade1cc21324ee78c5267"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a629f48b0f6f0ade1cc21324ee78c5267">&#9670;&#160;</a></span>bcast_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::dispatch_manager::bcast_block </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#aa10ee348c57604b615bc8570f6685102">signed_block_ptr</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>b</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#a4b8e4b7ed9dcd18ee75d0de62e88aa17">block_id_type</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>id</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="net__plugin_8cpp_source.html#l02135">2135</a> of file <a class="el" href="net__plugin_8cpp_source.html">net_plugin.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2135</span>                                                                                        {</div>
<div class="line"><span class="lineno"> 2136</span>      <a class="code hl_define" href="logger_8hpp.html#af5adfcda7e0a01306256754a6511915d">fc_dlog</a>( <a class="code hl_class" href="classfc_1_1logger.html">logger</a>, <span class="stringliteral">&quot;bcast block ${b}&quot;</span>, (<span class="stringliteral">&quot;b&quot;</span>, b-&gt;block_num()) );</div>
<div class="line"><span class="lineno"> 2137</span> </div>
<div class="line"><span class="lineno"> 2138</span>      <span class="keywordflow">if</span>( my_impl-&gt;<a class="code hl_variable" href="classsysio_1_1net__plugin__impl.html#a1ec38b54825da7f4f2ba7901d6318fd7">sync_master</a>-&gt;syncing_with_peer() ) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2139</span> </div>
<div class="line"><span class="lineno"> 2140</span>      block_buffer_factory buff_factory;</div>
<div class="line"><span class="lineno"> 2141</span>      <span class="keyword">const</span> <span class="keyword">auto</span> bnum = b-&gt;block_num();</div>
<div class="line"><span class="lineno"> 2142</span>      <a class="code hl_function" href="namespacesysio.html#a0369be74f29dbab1c8afd88c3f6d2858">for_each_block_connection</a>( [<span class="keyword">this</span>, &amp;<span class="keywordtype">id</span>, &amp;bnum, &amp;b, &amp;buff_factory]( <span class="keyword">auto</span>&amp; cp ) {</div>
<div class="line"><span class="lineno"> 2143</span>         <a class="code hl_define" href="logger_8hpp.html#af5adfcda7e0a01306256754a6511915d">fc_dlog</a>( <a class="code hl_class" href="classfc_1_1logger.html">logger</a>, <span class="stringliteral">&quot;socket_is_open ${s}, connecting ${c}, syncing ${ss}, connection ${cid}&quot;</span>,</div>
<div class="line"><span class="lineno"> 2144</span>                  (<span class="stringliteral">&quot;s&quot;</span>, cp-&gt;socket_is_open())(<span class="stringliteral">&quot;c&quot;</span>, cp-&gt;connecting.load())(<span class="stringliteral">&quot;ss&quot;</span>, cp-&gt;syncing.load())(<span class="stringliteral">&quot;cid&quot;</span>, cp-&gt;connection_id) );</div>
<div class="line"><span class="lineno"> 2145</span>         <span class="keywordflow">if</span>( !cp-&gt;current() ) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2146</span>         <a class="code hl_typedef" href="namespacesysio.html#a4a604ada505f8ee61ec551331a35e99e">send_buffer_type</a> sb = buff_factory.get_send_buffer( b );</div>
<div class="line"><span class="lineno"> 2147</span> </div>
<div class="line"><span class="lineno"> 2148</span>         cp-&gt;strand.post( [<span class="keyword">this</span>, cp, <span class="keywordtype">id</span>, bnum, sb{std::move(sb)}]() {</div>
<div class="line"><span class="lineno"> 2149</span>            cp-&gt;latest_blk_time = cp-&gt;get_time();</div>
<div class="line"><span class="lineno"> 2150</span>            std::unique_lock&lt;std::mutex&gt; g_conn( cp-&gt;conn_mtx );</div>
<div class="line"><span class="lineno"> 2151</span>            <span class="keywordtype">bool</span> has_block = cp-&gt;last_handshake_recv.last_irreversible_block_num &gt;= bnum;</div>
<div class="line"><span class="lineno"> 2152</span>            g_conn.unlock();</div>
<div class="line"><span class="lineno"> 2153</span>            <span class="keywordflow">if</span>( !has_block ) {</div>
<div class="line"><span class="lineno"> 2154</span>               <span class="keywordflow">if</span>( !<a class="code hl_function" href="#ae028489706c095d3590cfeb80440252d">add_peer_block</a>( <span class="keywordtype">id</span>, cp-&gt;connection_id ) ) {</div>
<div class="line"><span class="lineno"> 2155</span>                  <a class="code hl_define" href="net__plugin_8cpp.html#a051c62a0ec99dcd3e7a38fd03bec1fe0">peer_dlog</a>( cp, <span class="stringliteral">&quot;not bcast block ${b}&quot;</span>, (<span class="stringliteral">&quot;b&quot;</span>, bnum) );</div>
<div class="line"><span class="lineno"> 2156</span>                  <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2157</span>               }</div>
<div class="line"><span class="lineno"> 2158</span>               <a class="code hl_define" href="net__plugin_8cpp.html#a051c62a0ec99dcd3e7a38fd03bec1fe0">peer_dlog</a>( cp, <span class="stringliteral">&quot;bcast block ${b}&quot;</span>, (<span class="stringliteral">&quot;b&quot;</span>, bnum) );</div>
<div class="line"><span class="lineno"> 2159</span>               cp-&gt;enqueue_buffer( sb, <a class="code hl_enumvalue" href="namespacesysio.html#a5c18cd9d34b8c5d3af8e2de75577673fa35a3ee195246082e99a69c2636252839">no_reason</a> );</div>
<div class="line"><span class="lineno"> 2160</span>            }</div>
<div class="line"><span class="lineno"> 2161</span>         });</div>
<div class="line"><span class="lineno"> 2162</span>         <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2163</span>      } );</div>
<div class="line"><span class="lineno"> 2164</span>   }</div>
<div class="ttc" id="aclassfc_1_1logger_html"><div class="ttname"><a href="classfc_1_1logger.html">fc::logger</a></div><div class="ttdef"><b>Definition</b> <a href="logger_8hpp_source.html#l00025">logger.hpp:26</a></div></div>
<div class="ttc" id="aclasssysio_1_1dispatch__manager_html_ae028489706c095d3590cfeb80440252d"><div class="ttname"><a href="#ae028489706c095d3590cfeb80440252d">sysio::dispatch_manager::add_peer_block</a></div><div class="ttdeci">bool add_peer_block(const block_id_type &amp;blkid, uint32_t connection_id)</div><div class="ttdef"><b>Definition</b> <a href="net__plugin_8cpp_source.html#l02060">net_plugin.cpp:2060</a></div></div>
<div class="ttc" id="aclasssysio_1_1net__plugin__impl_html_a1ec38b54825da7f4f2ba7901d6318fd7"><div class="ttname"><a href="classsysio_1_1net__plugin__impl.html#a1ec38b54825da7f4f2ba7901d6318fd7">sysio::net_plugin_impl::sync_master</a></div><div class="ttdeci">unique_ptr&lt; sync_manager &gt; sync_master</div><div class="ttdef"><b>Definition</b> <a href="net__plugin_8cpp_source.html#l00223">net_plugin.cpp:223</a></div></div>
<div class="ttc" id="alogger_8hpp_html_af5adfcda7e0a01306256754a6511915d"><div class="ttname"><a href="logger_8hpp.html#af5adfcda7e0a01306256754a6511915d">fc_dlog</a></div><div class="ttdeci">#define fc_dlog(LOGGER, FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="logger_8hpp_source.html#l00077">logger.hpp:77</a></div></div>
<div class="ttc" id="anamespacesysio_html_a0369be74f29dbab1c8afd88c3f6d2858"><div class="ttname"><a href="namespacesysio.html#a0369be74f29dbab1c8afd88c3f6d2858">sysio::for_each_block_connection</a></div><div class="ttdeci">void for_each_block_connection(Function f)</div><div class="ttdef"><b>Definition</b> <a href="net__plugin_8cpp_source.html#l00868">net_plugin.cpp:868</a></div></div>
<div class="ttc" id="anamespacesysio_html_a4a604ada505f8ee61ec551331a35e99e"><div class="ttname"><a href="namespacesysio.html#a4a604ada505f8ee61ec551331a35e99e">sysio::send_buffer_type</a></div><div class="ttdeci">std::shared_ptr&lt; std::vector&lt; char &gt; &gt; send_buffer_type</div><div class="ttdef"><b>Definition</b> <a href="net__plugin_8cpp_source.html#l01320">net_plugin.cpp:1320</a></div></div>
<div class="ttc" id="anamespacesysio_html_a5c18cd9d34b8c5d3af8e2de75577673fa35a3ee195246082e99a69c2636252839"><div class="ttname"><a href="namespacesysio.html#a5c18cd9d34b8c5d3af8e2de75577673fa35a3ee195246082e99a69c2636252839">sysio::no_reason</a></div><div class="ttdeci">@ no_reason</div><div class="ttdoc">no reason to go away</div><div class="ttdef"><b>Definition</b> <a href="plugins_2net__plugin_2include_2sysio_2net__plugin_2protocol_8hpp_source.html#l00047">protocol.hpp:47</a></div></div>
<div class="ttc" id="anet__plugin_8cpp_html_a051c62a0ec99dcd3e7a38fd03bec1fe0"><div class="ttname"><a href="net__plugin_8cpp.html#a051c62a0ec99dcd3e7a38fd03bec1fe0">peer_dlog</a></div><div class="ttdeci">#define peer_dlog(PEER, FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="net__plugin_8cpp_source.html#l00359">net_plugin.cpp:359</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1dispatch__manager_a629f48b0f6f0ade1cc21324ee78c5267_cgraph.png" border="0" usemap="#aclasssysio_1_1dispatch__manager_a629f48b0f6f0ade1cc21324ee78c5267_cgraph" alt=""/></div>
<map name="aclasssysio_1_1dispatch__manager_a629f48b0f6f0ade1cc21324ee78c5267_cgraph" id="aclasssysio_1_1dispatch__manager_a629f48b0f6f0ade1cc21324ee78c5267_cgraph">
<area shape="rect" title=" " alt="" coords="5,71,172,111"/>
<area shape="rect" href="classsysio_1_1dispatch__manager.html#ae028489706c095d3590cfeb80440252d" title=" " alt="" coords="221,5,388,46"/>
<area shape="poly" title=" " alt="" coords="157,68,220,48,221,54,159,73"/>
<area shape="rect" href="namespacesysio.html#a0369be74f29dbab1c8afd88c3f6d2858" title=" " alt="" coords="230,71,378,111"/>
<area shape="poly" title=" " alt="" coords="172,88,215,88,215,94,172,94"/>
<area shape="rect" href="structsysio_1_1block__buffer__factory.html#a50be7bedd192d3ea21c30bc893eb22f2" title="caches result for subsequent calls, only provide same signed_block_ptr instance for each invocation." alt="" coords="220,136,389,177"/>
<area shape="poly" title=" " alt="" coords="159,109,221,128,220,134,157,114"/>
<area shape="rect" href="structsysio_1_1chain_1_1block__header.html#a39d57e33ef8d3f6ba59b4c458f0ae375" title=" " alt="" coords="437,5,587,46"/>
<area shape="poly" title=" " alt="" coords="388,23,421,23,421,28,388,28"/>
<area shape="rect" href="namespacefc.html#afb668c55fd6ee73e1fcd67e77d8f6009" title=" " alt="" coords="635,13,792,38"/>
<area shape="poly" title=" " alt="" coords="587,23,620,23,620,28,587,28"/>
</map>
</div>

</div>
</div>
<a id="ae15b74a09c0f986faa7b6688b686c2ea" name="ae15b74a09c0f986faa7b6688b686c2ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae15b74a09c0f986faa7b6688b686c2ea">&#9670;&#160;</a></span>bcast_transaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::dispatch_manager::bcast_transaction </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#a7041c0316bd294d0866609ab3e0cc7a7">packed_transaction_ptr</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>trx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="net__plugin_8cpp_source.html#l02187">2187</a> of file <a class="el" href="net__plugin_8cpp_source.html">net_plugin.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2187</span>                                                                             {</div>
<div class="line"><span class="lineno"> 2188</span>      trx_buffer_factory buff_factory;</div>
<div class="line"><span class="lineno"> 2189</span>      <span class="keyword">const</span> <span class="keyword">auto</span> now = <a class="code hl_function" href="classfc_1_1time__point.html#aa164ff1268a16d4b32afcff181f6100e">fc::time_point::now</a>();</div>
<div class="line"><span class="lineno"> 2190</span>      <a class="code hl_function" href="namespacesysio.html#af36f44203d6675615cf012396bcef424">for_each_connection</a>( [<span class="keyword">this</span>, &amp;trx, &amp;now, &amp;buff_factory]( <span class="keyword">auto</span>&amp; cp ) {</div>
<div class="line"><span class="lineno"> 2191</span>         <span class="keywordflow">if</span>( cp-&gt;is_blocks_only_connection() || !cp-&gt;current() ) {</div>
<div class="line"><span class="lineno"> 2192</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2193</span>         }</div>
<div class="line"><span class="lineno"> 2194</span>         <span class="keywordflow">if</span>( !<a class="code hl_function" href="#afdb332e31291e82cd33cd27966633dfd">add_peer_txn</a>(trx-&gt;id(), trx-&gt;expiration(), cp-&gt;connection_id, now) ) {</div>
<div class="line"><span class="lineno"> 2195</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2196</span>         }</div>
<div class="line"><span class="lineno"> 2197</span> </div>
<div class="line"><span class="lineno"> 2198</span>         <a class="code hl_typedef" href="namespacesysio.html#a4a604ada505f8ee61ec551331a35e99e">send_buffer_type</a> sb = buff_factory.get_send_buffer( trx );</div>
<div class="line"><span class="lineno"> 2199</span>         <a class="code hl_define" href="logger_8hpp.html#af5adfcda7e0a01306256754a6511915d">fc_dlog</a>( <a class="code hl_class" href="classfc_1_1logger.html">logger</a>, <span class="stringliteral">&quot;sending trx: ${id}, to connection ${cid}&quot;</span>, (<span class="stringliteral">&quot;id&quot;</span>, trx-&gt;id())(<span class="stringliteral">&quot;cid&quot;</span>, cp-&gt;connection_id) );</div>
<div class="line"><span class="lineno"> 2200</span>         cp-&gt;strand.post( [cp, sb{std::move(sb)}]() {</div>
<div class="line"><span class="lineno"> 2201</span>            cp-&gt;enqueue_buffer( sb, <a class="code hl_enumvalue" href="namespacesysio.html#a5c18cd9d34b8c5d3af8e2de75577673fa35a3ee195246082e99a69c2636252839">no_reason</a> );</div>
<div class="line"><span class="lineno"> 2202</span>         } );</div>
<div class="line"><span class="lineno"> 2203</span>         <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2204</span>      } );</div>
<div class="line"><span class="lineno"> 2205</span>   }</div>
<div class="ttc" id="aclassfc_1_1time__point_html_aa164ff1268a16d4b32afcff181f6100e"><div class="ttname"><a href="classfc_1_1time__point.html#aa164ff1268a16d4b32afcff181f6100e">fc::time_point::now</a></div><div class="ttdeci">static time_point now()</div><div class="ttdef"><b>Definition</b> <a href="time_8cpp_source.html#l00014">time.cpp:14</a></div></div>
<div class="ttc" id="aclasssysio_1_1dispatch__manager_html_afdb332e31291e82cd33cd27966633dfd"><div class="ttname"><a href="#afdb332e31291e82cd33cd27966633dfd">sysio::dispatch_manager::add_peer_txn</a></div><div class="ttdeci">bool add_peer_txn(const transaction_id_type id, const time_point_sec &amp;trx_expires, uint32_t connection_id, const time_point_sec &amp;now=time_point::now())</div><div class="ttdef"><b>Definition</b> <a href="net__plugin_8cpp_source.html#l02091">net_plugin.cpp:2091</a></div></div>
<div class="ttc" id="anamespacesysio_html_af36f44203d6675615cf012396bcef424"><div class="ttname"><a href="namespacesysio.html#af36f44203d6675615cf012396bcef424">sysio::for_each_connection</a></div><div class="ttdeci">void for_each_connection(Function f)</div><div class="ttdef"><b>Definition</b> <a href="net__plugin_8cpp_source.html#l00860">net_plugin.cpp:860</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1dispatch__manager_ae15b74a09c0f986faa7b6688b686c2ea_cgraph.png" border="0" usemap="#aclasssysio_1_1dispatch__manager_ae15b74a09c0f986faa7b6688b686c2ea_cgraph" alt=""/></div>
<map name="aclasssysio_1_1dispatch__manager_ae15b74a09c0f986faa7b6688b686c2ea_cgraph" id="aclasssysio_1_1dispatch__manager_ae15b74a09c0f986faa7b6688b686c2ea_cgraph">
<area shape="rect" title=" " alt="" coords="5,92,172,133"/>
<area shape="rect" href="classsysio_1_1dispatch__manager.html#afdb332e31291e82cd33cd27966633dfd" title=" " alt="" coords="227,5,393,46"/>
<area shape="poly" title=" " alt="" coords="137,89,219,55,234,49,236,54,221,60,139,94"/>
<area shape="rect" href="namespacesysio.html#af36f44203d6675615cf012396bcef424" title=" " alt="" coords="220,70,400,96"/>
<area shape="poly" title=" " alt="" coords="172,99,204,94,204,100,172,104"/>
<area shape="rect" href="structsysio_1_1trx__buffer__factory.html#abea6acc9d039dd6f7cd045418b05c49b" title="caches result for subsequent calls, only provide same packed_transaction_ptr instance for each invoca..." alt="" coords="229,120,391,161"/>
<area shape="poly" title=" " alt="" coords="172,120,214,126,213,131,172,125"/>
<area shape="rect" href="classfc_1_1time__point.html#aa164ff1268a16d4b32afcff181f6100e" title=" " alt="" coords="244,185,376,210"/>
<area shape="poly" title=" " alt="" coords="132,131,221,170,243,177,241,182,219,175,130,136"/>
<area shape="rect" href="classfc_1_1mock__time__traits.html#a0bed781012a73b8c15882648397b56be" title=" " alt="" coords="448,79,588,119"/>
<area shape="poly" title=" " alt="" coords="370,182,399,170,423,151,446,130,455,125,458,129,450,134,426,155,401,175,372,187"/>
<area shape="rect" href="classfc_1_1mock__time__traits.html#adddeebdf472c33f927827c111ddbf0b1" title=" " alt="" coords="448,144,588,185"/>
<area shape="poly" title=" " alt="" coords="376,184,432,175,433,181,377,190"/>
<area shape="rect" href="classfc_1_1time__point.html#ab46781dcaab4880902bc136f36e39e5e" title=" " alt="" coords="452,209,585,250"/>
<area shape="poly" title=" " alt="" coords="377,205,437,214,436,220,376,210"/>
<area shape="rect" href="classfc_1_1time__point.html#abfea5efbe9ef58024cda814395ee9945" title=" " alt="" coords="452,275,585,315"/>
<area shape="poly" title=" " alt="" coords="340,209,460,265,458,270,338,213"/>
<area shape="rect" href="classfc_1_1mock__time__traits.html#a0d7245b32fd62b3bc712f658250cc4db" title=" " alt="" coords="636,86,809,112"/>
<area shape="poly" title=" " alt="" coords="589,96,621,96,621,102,589,102"/>
</map>
</div>

</div>
</div>
<a id="a60d9382529f1c1ee7e27b3f553464bb8" name="a60d9382529f1c1ee7e27b3f553464bb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60d9382529f1c1ee7e27b3f553464bb8">&#9670;&#160;</a></span>expire_blocks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::dispatch_manager::expire_blocks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></td>          <td class="paramname"><span class="paramname"><em>bnum</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="net__plugin_8cpp_source.html#l02128">2128</a> of file <a class="el" href="net__plugin_8cpp_source.html">net_plugin.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2128</span>                                                          {</div>
<div class="line"><span class="lineno"> 2129</span>      std::lock_guard&lt;std::mutex&gt; g(blk_state_mtx);</div>
<div class="line"><span class="lineno"> 2130</span>      <span class="keyword">auto</span>&amp; stale_blk = blk_state.get&lt;by_block_num&gt;();</div>
<div class="line"><span class="lineno"> 2131</span>      stale_blk.erase( stale_blk.lower_bound(1), stale_blk.upper_bound(lib_num) );</div>
<div class="line"><span class="lineno"> 2132</span>   }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a263628603e81efe5701e886585ad33f2" name="a263628603e81efe5701e886585ad33f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a263628603e81efe5701e886585ad33f2">&#9670;&#160;</a></span>expire_txns()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::dispatch_manager::expire_txns </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="net__plugin_8cpp_source.html#l02114">2114</a> of file <a class="el" href="net__plugin_8cpp_source.html">net_plugin.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2114</span>                                      {</div>
<div class="line"><span class="lineno"> 2115</span>      <span class="keywordtype">size_t</span> start_size = 0, end_size = 0;</div>
<div class="line"><span class="lineno"> 2116</span> </div>
<div class="line"><span class="lineno"> 2117</span>      std::unique_lock&lt;std::mutex&gt; g( local_txns_mtx );</div>
<div class="line"><span class="lineno"> 2118</span>      start_size = local_txns.size();</div>
<div class="line"><span class="lineno"> 2119</span>      <span class="keyword">auto</span>&amp; old = local_txns.get&lt;by_expiry&gt;();</div>
<div class="line"><span class="lineno"> 2120</span>      <span class="keyword">auto</span> ex_lo = old.lower_bound( <a class="code hl_class" href="classfc_1_1time__point__sec.html">fc::time_point_sec</a>( 0 ) );</div>
<div class="line"><span class="lineno"> 2121</span>      <span class="keyword">auto</span> ex_up = old.upper_bound( <a class="code hl_function" href="classfc_1_1time__point.html#aa164ff1268a16d4b32afcff181f6100e">time_point::now</a>() );</div>
<div class="line"><span class="lineno"> 2122</span>      old.erase( ex_lo, ex_up );</div>
<div class="line"><span class="lineno"> 2123</span>      g.unlock();</div>
<div class="line"><span class="lineno"> 2124</span> </div>
<div class="line"><span class="lineno"> 2125</span>      <a class="code hl_define" href="logger_8hpp.html#af5adfcda7e0a01306256754a6511915d">fc_dlog</a>( <a class="code hl_class" href="classfc_1_1logger.html">logger</a>, <span class="stringliteral">&quot;expire_local_txns size ${s} removed ${r}&quot;</span>, (<span class="stringliteral">&quot;s&quot;</span>, start_size)( <span class="stringliteral">&quot;r&quot;</span>, start_size - end_size ) );</div>
<div class="line"><span class="lineno"> 2126</span>   }</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1dispatch__manager_a263628603e81efe5701e886585ad33f2_cgraph.png" border="0" usemap="#aclasssysio_1_1dispatch__manager_a263628603e81efe5701e886585ad33f2_cgraph" alt=""/></div>
<map name="aclasssysio_1_1dispatch__manager_a263628603e81efe5701e886585ad33f2_cgraph" id="aclasssysio_1_1dispatch__manager_a263628603e81efe5701e886585ad33f2_cgraph">
<area shape="rect" title=" " alt="" coords="5,104,172,145"/>
<area shape="rect" href="classfc_1_1time__point.html#aa164ff1268a16d4b32afcff181f6100e" title=" " alt="" coords="220,112,352,137"/>
<area shape="poly" title=" " alt="" coords="172,122,204,122,204,127,172,127"/>
<area shape="rect" href="classfc_1_1mock__time__traits.html#a0bed781012a73b8c15882648397b56be" title=" " alt="" coords="400,5,540,46"/>
<area shape="poly" title=" " alt="" coords="308,109,399,57,410,51,412,56,401,61,310,113"/>
<area shape="rect" href="classfc_1_1mock__time__traits.html#adddeebdf472c33f927827c111ddbf0b1" title=" " alt="" coords="400,71,540,111"/>
<area shape="poly" title=" " alt="" coords="352,110,385,104,386,109,353,115"/>
<area shape="rect" href="classfc_1_1time__point.html#ab46781dcaab4880902bc136f36e39e5e" title=" " alt="" coords="404,136,537,177"/>
<area shape="poly" title=" " alt="" coords="353,133,388,139,388,145,352,138"/>
<area shape="rect" href="classfc_1_1time__point.html#abfea5efbe9ef58024cda814395ee9945" title=" " alt="" coords="404,201,537,242"/>
<area shape="poly" title=" " alt="" coords="311,135,401,186,412,192,410,196,399,191,309,140"/>
<area shape="rect" href="classfc_1_1mock__time__traits.html#a0d7245b32fd62b3bc712f658250cc4db" title=" " alt="" coords="588,13,761,38"/>
<area shape="poly" title=" " alt="" coords="541,23,573,23,573,28,541,28"/>
</map>
</div>

</div>
</div>
<a id="acf4f13505f097a787bfab2daa525d18f" name="acf4f13505f097a787bfab2daa525d18f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf4f13505f097a787bfab2daa525d18f">&#9670;&#160;</a></span>have_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sysio::dispatch_manager::have_block </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#a4b8e4b7ed9dcd18ee75d0de62e88aa17">block_id_type</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blkid</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="net__plugin_8cpp_source.html#l02080">2080</a> of file <a class="el" href="net__plugin_8cpp_source.html">net_plugin.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2080</span>                                                                       {</div>
<div class="line"><span class="lineno"> 2081</span>      std::lock_guard&lt;std::mutex&gt; g(blk_state_mtx);</div>
<div class="line"><span class="lineno"> 2082</span>      <span class="comment">// by_peer_block_id sorts have_block by greater so have_block == true will be the first one found</span></div>
<div class="line"><span class="lineno"> 2083</span>      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; index = blk_state.get&lt;by_peer_block_id&gt;();</div>
<div class="line"><span class="lineno"> 2084</span>      <span class="keyword">auto</span> blk_itr = index.find( blkid );</div>
<div class="line"><span class="lineno"> 2085</span>      <span class="keywordflow">if</span>( blk_itr != index.end() ) {</div>
<div class="line"><span class="lineno"> 2086</span>         <span class="keywordflow">return</span> blk_itr-&gt;have_block;</div>
<div class="line"><span class="lineno"> 2087</span>      }</div>
<div class="line"><span class="lineno"> 2088</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2089</span>   }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a129852b61b593442fc9e32cbc6251a75" name="a129852b61b593442fc9e32cbc6251a75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a129852b61b593442fc9e32cbc6251a75">&#9670;&#160;</a></span>have_txn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sysio::dispatch_manager::have_txn </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#aa85a3b49b3b219d1e3840567579e7e63">transaction_id_type</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>tid</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="net__plugin_8cpp_source.html#l02108">2108</a> of file <a class="el" href="net__plugin_8cpp_source.html">net_plugin.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2108</span>                                                                         {</div>
<div class="line"><span class="lineno"> 2109</span>      std::lock_guard&lt;std::mutex&gt; g( local_txns_mtx );</div>
<div class="line"><span class="lineno"> 2110</span>      <span class="keyword">const</span> <span class="keyword">auto</span> tptr = local_txns.get&lt;by_id&gt;().<a class="code hl_function" href="namespace_intrinsics.html#a7b30616029cc015f330ebf338c3fb454">find</a>( tid );</div>
<div class="line"><span class="lineno"> 2111</span>      <span class="keywordflow">return</span> tptr != local_txns.end();</div>
<div class="line"><span class="lineno"> 2112</span>   }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6464105ad3fe908bfac43cae949b5539" name="a6464105ad3fe908bfac43cae949b5539"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6464105ad3fe908bfac43cae949b5539">&#9670;&#160;</a></span>peer_has_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sysio::dispatch_manager::peer_has_block </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#a4b8e4b7ed9dcd18ee75d0de62e88aa17">block_id_type</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blkid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></td>          <td class="paramname"><span class="paramname"><em>connection_id</em></span>&#160;) const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="net__plugin_8cpp_source.html#l02074">2074</a> of file <a class="el" href="net__plugin_8cpp_source.html">net_plugin.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2074</span>                                                                                                   {</div>
<div class="line"><span class="lineno"> 2075</span>      std::lock_guard&lt;std::mutex&gt; g(blk_state_mtx);</div>
<div class="line"><span class="lineno"> 2076</span>      <span class="keyword">const</span> <span class="keyword">auto</span> blk_itr = blk_state.get&lt;by_id&gt;().<a class="code hl_function" href="namespace_intrinsics.html#a7b30616029cc015f330ebf338c3fb454">find</a>( std::make_tuple( connection_id, std::ref( blkid )));</div>
<div class="line"><span class="lineno"> 2077</span>      <span class="keywordflow">return</span> blk_itr != blk_state.end();</div>
<div class="line"><span class="lineno"> 2078</span>   }</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1dispatch__manager_a6464105ad3fe908bfac43cae949b5539_icgraph.png" border="0" usemap="#aclasssysio_1_1dispatch__manager_a6464105ad3fe908bfac43cae949b5539_icgraph" alt=""/></div>
<map name="aclasssysio_1_1dispatch__manager_a6464105ad3fe908bfac43cae949b5539_icgraph" id="aclasssysio_1_1dispatch__manager_a6464105ad3fe908bfac43cae949b5539_icgraph">
<area shape="rect" title=" " alt="" coords="220,5,386,46"/>
<area shape="rect" href="classsysio_1_1dispatch__manager.html#afc99556e40e117419b1e3af4271defbf" title=" " alt="" coords="5,5,172,46"/>
<area shape="poly" title=" " alt="" coords="204,28,172,28,172,23,204,23"/>
</map>
</div>

</div>
</div>
<a id="aaa3ad0cc9032b70051f7f7d6ca6f85d2" name="aaa3ad0cc9032b70051f7f7d6ca6f85d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa3ad0cc9032b70051f7f7d6ca6f85d2">&#9670;&#160;</a></span>recv_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::dispatch_manager::recv_block </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio.html#aefc0023f14362306826da768553b8daf">connection_ptr</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>conn</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#a4b8e4b7ed9dcd18ee75d0de62e88aa17">block_id_type</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></td>          <td class="paramname"><span class="paramname"><em>bnum</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="net__plugin_8cpp_source.html#l02167">2167</a> of file <a class="el" href="net__plugin_8cpp_source.html">net_plugin.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2167</span>                                                                                                    {</div>
<div class="line"><span class="lineno"> 2168</span>      std::unique_lock&lt;std::mutex&gt; g( c-&gt;conn_mtx );</div>
<div class="line"><span class="lineno"> 2169</span>      <span class="keywordflow">if</span> (c &amp;&amp;</div>
<div class="line"><span class="lineno"> 2170</span>          c-&gt;last_req &amp;&amp;</div>
<div class="line"><span class="lineno"> 2171</span>          c-&gt;last_req-&gt;req_blocks.mode != <a class="code hl_enumvalue" href="namespacesysio.html#a3a283f786468e0f0e35b0177214ca59ea3820b1d3d12c986267353dcda2fdf2d6">none</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 2172</span>          !c-&gt;last_req-&gt;req_blocks.ids.empty() &amp;&amp;</div>
<div class="line"><span class="lineno"> 2173</span>          c-&gt;last_req-&gt;req_blocks.ids.back() == <span class="keywordtype">id</span>) {</div>
<div class="line"><span class="lineno"> 2174</span>         <a class="code hl_define" href="net__plugin_8cpp.html#a051c62a0ec99dcd3e7a38fd03bec1fe0">peer_dlog</a>( c, <span class="stringliteral">&quot;resetting last_req&quot;</span> );</div>
<div class="line"><span class="lineno"> 2175</span>         c-&gt;last_req.reset();</div>
<div class="line"><span class="lineno"> 2176</span>      }</div>
<div class="line"><span class="lineno"> 2177</span>      g.unlock();</div>
<div class="line"><span class="lineno"> 2178</span> </div>
<div class="line"><span class="lineno"> 2179</span>      <a class="code hl_define" href="net__plugin_8cpp.html#a051c62a0ec99dcd3e7a38fd03bec1fe0">peer_dlog</a>(c, <span class="stringliteral">&quot;canceling wait&quot;</span>);</div>
<div class="line"><span class="lineno"> 2180</span>      c-&gt;cancel_wait();</div>
<div class="line"><span class="lineno"> 2181</span>   }</div>
<div class="ttc" id="anamespacesysio_html_a3a283f786468e0f0e35b0177214ca59ea3820b1d3d12c986267353dcda2fdf2d6"><div class="ttname"><a href="namespacesysio.html#a3a283f786468e0f0e35b0177214ca59ea3820b1d3d12c986267353dcda2fdf2d6">sysio::none</a></div><div class="ttdeci">@ none</div><div class="ttdef"><b>Definition</b> <a href="plugins_2net__plugin_2include_2sysio_2net__plugin_2protocol_8hpp_source.html#l00093">protocol.hpp:93</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa4e82c30cfaf4e8dbc78ee1e24475716" name="aa4e82c30cfaf4e8dbc78ee1e24475716"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4e82c30cfaf4e8dbc78ee1e24475716">&#9670;&#160;</a></span>recv_notice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::dispatch_manager::recv_notice </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio.html#aefc0023f14362306826da768553b8daf">connection_ptr</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>conn</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structsysio_1_1notice__message.html">notice_message</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>generated</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="net__plugin_8cpp_source.html#l02213">2213</a> of file <a class="el" href="net__plugin_8cpp_source.html">net_plugin.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2213</span>                                                                                                        {</div>
<div class="line"><span class="lineno"> 2214</span>      <span class="keywordflow">if</span> (msg.known_trx.mode == <a class="code hl_enumvalue" href="namespacesysio.html#a3a283f786468e0f0e35b0177214ca59ea13cebc41fab7b311a3f8f8bfae78f2ae">normal</a>) {</div>
<div class="line"><span class="lineno"> 2215</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg.known_trx.mode != <a class="code hl_enumvalue" href="namespacesysio.html#a3a283f786468e0f0e35b0177214ca59ea3820b1d3d12c986267353dcda2fdf2d6">none</a>) {</div>
<div class="line"><span class="lineno"> 2216</span>         <a class="code hl_define" href="net__plugin_8cpp.html#a0237ff767d828f6a423a4728c65b11b8">peer_elog</a>( c, <span class="stringliteral">&quot;passed a notice_message with something other than a normal on none known_trx&quot;</span> );</div>
<div class="line"><span class="lineno"> 2217</span>         <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2218</span>      }</div>
<div class="line"><span class="lineno"> 2219</span>      <span class="keywordflow">if</span> (msg.known_blocks.mode == <a class="code hl_enumvalue" href="namespacesysio.html#a3a283f786468e0f0e35b0177214ca59ea13cebc41fab7b311a3f8f8bfae78f2ae">normal</a>) {</div>
<div class="line"><span class="lineno"> 2220</span>         <span class="comment">// known_blocks.ids is never &gt; 1</span></div>
<div class="line"><span class="lineno"> 2221</span>         <span class="keywordflow">if</span>( !msg.known_blocks.ids.empty() ) {</div>
<div class="line"><span class="lineno"> 2222</span>            <span class="keywordflow">if</span>( msg.known_blocks.pending == 1 ) { <span class="comment">// block id notify of 2.0.0, ignore</span></div>
<div class="line"><span class="lineno"> 2223</span>               <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2224</span>            }</div>
<div class="line"><span class="lineno"> 2225</span>         }</div>
<div class="line"><span class="lineno"> 2226</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg.known_blocks.mode != <a class="code hl_enumvalue" href="namespacesysio.html#a3a283f786468e0f0e35b0177214ca59ea3820b1d3d12c986267353dcda2fdf2d6">none</a>) {</div>
<div class="line"><span class="lineno"> 2227</span>         <a class="code hl_define" href="net__plugin_8cpp.html#a0237ff767d828f6a423a4728c65b11b8">peer_elog</a>( c, <span class="stringliteral">&quot;passed a notice_message with something other than a normal on none known_blocks&quot;</span> );</div>
<div class="line"><span class="lineno"> 2228</span>         <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2229</span>      }</div>
<div class="line"><span class="lineno"> 2230</span>   }</div>
<div class="ttc" id="anamespacesysio_html_a3a283f786468e0f0e35b0177214ca59ea13cebc41fab7b311a3f8f8bfae78f2ae"><div class="ttname"><a href="namespacesysio.html#a3a283f786468e0f0e35b0177214ca59ea13cebc41fab7b311a3f8f8bfae78f2ae">sysio::normal</a></div><div class="ttdeci">@ normal</div><div class="ttdef"><b>Definition</b> <a href="plugins_2net__plugin_2include_2sysio_2net__plugin_2protocol_8hpp_source.html#l00097">protocol.hpp:96</a></div></div>
<div class="ttc" id="anet__plugin_8cpp_html_a0237ff767d828f6a423a4728c65b11b8"><div class="ttname"><a href="net__plugin_8cpp.html#a0237ff767d828f6a423a4728c65b11b8">peer_elog</a></div><div class="ttdeci">#define peer_elog(PEER, FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="net__plugin_8cpp_source.html#l00383">net_plugin.cpp:383</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a851f82240b2248de38f02e708420cc08" name="a851f82240b2248de38f02e708420cc08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a851f82240b2248de38f02e708420cc08">&#9670;&#160;</a></span>rejected_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::dispatch_manager::rejected_block </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#a4b8e4b7ed9dcd18ee75d0de62e88aa17">block_id_type</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="net__plugin_8cpp_source.html#l02183">2183</a> of file <a class="el" href="net__plugin_8cpp_source.html">net_plugin.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2183</span>                                                                {</div>
<div class="line"><span class="lineno"> 2184</span>      <a class="code hl_define" href="logger_8hpp.html#af5adfcda7e0a01306256754a6511915d">fc_dlog</a>( <a class="code hl_class" href="classfc_1_1logger.html">logger</a>, <span class="stringliteral">&quot;rejected block ${id}&quot;</span>, (<span class="stringliteral">&quot;id&quot;</span>, <span class="keywordtype">id</span>) );</div>
<div class="line"><span class="lineno"> 2185</span>   }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1996831841cdd7b27700fc1b1c1abde0" name="a1996831841cdd7b27700fc1b1c1abde0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1996831841cdd7b27700fc1b1c1abde0">&#9670;&#160;</a></span>rejected_transaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::dispatch_manager::rejected_transaction </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#a7041c0316bd294d0866609ab3e0cc7a7">packed_transaction_ptr</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>trx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></td>          <td class="paramname"><span class="paramname"><em>head_blk_num</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="net__plugin_8cpp_source.html#l02207">2207</a> of file <a class="el" href="net__plugin_8cpp_source.html">net_plugin.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2207</span>                                                                                                       {</div>
<div class="line"><span class="lineno"> 2208</span>      <a class="code hl_define" href="logger_8hpp.html#af5adfcda7e0a01306256754a6511915d">fc_dlog</a>( <a class="code hl_class" href="classfc_1_1logger.html">logger</a>, <span class="stringliteral">&quot;not sending rejected transaction ${tid}&quot;</span>, (<span class="stringliteral">&quot;tid&quot;</span>, trx-&gt;id()) );</div>
<div class="line"><span class="lineno"> 2209</span>      <span class="comment">// keep rejected transaction around for awhile so we don&#39;t broadcast it, don&#39;t remove from local_txns</span></div>
<div class="line"><span class="lineno"> 2210</span>   }</div>
</div><!-- fragment -->
</div>
</div>
<a id="afc99556e40e117419b1e3af4271defbf" name="afc99556e40e117419b1e3af4271defbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc99556e40e117419b1e3af4271defbf">&#9670;&#160;</a></span>retry_fetch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::dispatch_manager::retry_fetch </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio.html#aefc0023f14362306826da768553b8daf">connection_ptr</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>conn</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="net__plugin_8cpp_source.html#l02233">2233</a> of file <a class="el" href="net__plugin_8cpp_source.html">net_plugin.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2233</span>                                                             {</div>
<div class="line"><span class="lineno"> 2234</span>      <a class="code hl_define" href="net__plugin_8cpp.html#a051c62a0ec99dcd3e7a38fd03bec1fe0">peer_dlog</a>( c, <span class="stringliteral">&quot;retry fetch&quot;</span> );</div>
<div class="line"><span class="lineno"> 2235</span>      request_message last_req;</div>
<div class="line"><span class="lineno"> 2236</span>      <a class="code hl_class" href="classfc_1_1sha256.html">block_id_type</a> bid;</div>
<div class="line"><span class="lineno"> 2237</span>      {</div>
<div class="line"><span class="lineno"> 2238</span>         std::lock_guard&lt;std::mutex&gt; g_c_conn( c-&gt;conn_mtx );</div>
<div class="line"><span class="lineno"> 2239</span>         <span class="keywordflow">if</span>( !c-&gt;last_req ) {</div>
<div class="line"><span class="lineno"> 2240</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2241</span>         }</div>
<div class="line"><span class="lineno"> 2242</span>         <a class="code hl_define" href="net__plugin_8cpp.html#af53787454493a30650fdab0193037465">peer_wlog</a>( c, <span class="stringliteral">&quot;failed to fetch from peer&quot;</span> );</div>
<div class="line"><span class="lineno"> 2243</span>         <span class="keywordflow">if</span>( c-&gt;last_req-&gt;req_blocks.mode == <a class="code hl_enumvalue" href="namespacesysio.html#a3a283f786468e0f0e35b0177214ca59ea13cebc41fab7b311a3f8f8bfae78f2ae">normal</a> &amp;&amp; !c-&gt;last_req-&gt;req_blocks.ids.empty() ) {</div>
<div class="line"><span class="lineno"> 2244</span>            bid = c-&gt;last_req-&gt;req_blocks.ids.back();</div>
<div class="line"><span class="lineno"> 2245</span>         } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2246</span>            <a class="code hl_define" href="net__plugin_8cpp.html#af53787454493a30650fdab0193037465">peer_wlog</a>( c, <span class="stringliteral">&quot;no retry, block mpde = ${b} trx mode = ${t}&quot;</span>,</div>
<div class="line"><span class="lineno"> 2247</span>                       (<span class="stringliteral">&quot;b&quot;</span>, <a class="code hl_function" href="namespacesysio.html#a454edd6d34c5564da3a8c796090837fe">modes_str</a>( c-&gt;last_req-&gt;req_blocks.mode ))( <span class="stringliteral">&quot;t&quot;</span>, <a class="code hl_function" href="namespacesysio.html#a454edd6d34c5564da3a8c796090837fe">modes_str</a>( c-&gt;last_req-&gt;req_trx.mode ) ) );</div>
<div class="line"><span class="lineno"> 2248</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2249</span>         }</div>
<div class="line"><span class="lineno"> 2250</span>         last_req = *c-&gt;last_req;</div>
<div class="line"><span class="lineno"> 2251</span>      }</div>
<div class="line"><span class="lineno"> 2252</span>      <a class="code hl_function" href="namespacesysio.html#a0369be74f29dbab1c8afd88c3f6d2858">for_each_block_connection</a>( [<span class="keyword">this</span>, &amp;c, &amp;last_req, &amp;bid]( <span class="keyword">auto</span>&amp; conn ) {</div>
<div class="line"><span class="lineno"> 2253</span>         <span class="keywordflow">if</span>( conn == c )</div>
<div class="line"><span class="lineno"> 2254</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2255</span> </div>
<div class="line"><span class="lineno"> 2256</span>         {</div>
<div class="line"><span class="lineno"> 2257</span>            std::lock_guard&lt;std::mutex&gt; guard( conn-&gt;conn_mtx );</div>
<div class="line"><span class="lineno"> 2258</span>            <span class="keywordflow">if</span>( conn-&gt;last_req ) {</div>
<div class="line"><span class="lineno"> 2259</span>               <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2260</span>            }</div>
<div class="line"><span class="lineno"> 2261</span>         }</div>
<div class="line"><span class="lineno"> 2262</span> </div>
<div class="line"><span class="lineno"> 2263</span>         <span class="keywordtype">bool</span> sendit = <a class="code hl_function" href="#a6464105ad3fe908bfac43cae949b5539">peer_has_block</a>( bid, conn-&gt;connection_id );</div>
<div class="line"><span class="lineno"> 2264</span>         <span class="keywordflow">if</span>( sendit ) {</div>
<div class="line"><span class="lineno"> 2265</span>            conn-&gt;strand.post( [conn, last_req{std::move(last_req)}]() {</div>
<div class="line"><span class="lineno"> 2266</span>               conn-&gt;enqueue( last_req );</div>
<div class="line"><span class="lineno"> 2267</span>               conn-&gt;fetch_wait();</div>
<div class="line"><span class="lineno"> 2268</span>               std::lock_guard&lt;std::mutex&gt; g_conn_conn( conn-&gt;conn_mtx );</div>
<div class="line"><span class="lineno"> 2269</span>               conn-&gt;last_req = last_req;</div>
<div class="line"><span class="lineno"> 2270</span>            } );</div>
<div class="line"><span class="lineno"> 2271</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2272</span>         }</div>
<div class="line"><span class="lineno"> 2273</span>         <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2274</span>      } );</div>
<div class="line"><span class="lineno"> 2275</span> </div>
<div class="line"><span class="lineno"> 2276</span>      <span class="comment">// at this point no other peer has it, re-request or do nothing?</span></div>
<div class="line"><span class="lineno"> 2277</span>      <a class="code hl_define" href="net__plugin_8cpp.html#af53787454493a30650fdab0193037465">peer_wlog</a>( c, <span class="stringliteral">&quot;no peer has last_req&quot;</span> );</div>
<div class="line"><span class="lineno"> 2278</span>      <span class="keywordflow">if</span>( c-&gt;connected() ) {</div>
<div class="line"><span class="lineno"> 2279</span>         c-&gt;enqueue( last_req );</div>
<div class="line"><span class="lineno"> 2280</span>         c-&gt;fetch_wait();</div>
<div class="line"><span class="lineno"> 2281</span>      }</div>
<div class="line"><span class="lineno"> 2282</span>   }</div>
<div class="ttc" id="aclassfc_1_1sha256_html"><div class="ttname"><a href="classfc_1_1sha256.html">fc::sha256</a></div><div class="ttdef"><b>Definition</b> <a href="sha256_8hpp_source.html#l00011">sha256.hpp:12</a></div></div>
<div class="ttc" id="aclasssysio_1_1dispatch__manager_html_a6464105ad3fe908bfac43cae949b5539"><div class="ttname"><a href="#a6464105ad3fe908bfac43cae949b5539">sysio::dispatch_manager::peer_has_block</a></div><div class="ttdeci">bool peer_has_block(const block_id_type &amp;blkid, uint32_t connection_id) const</div><div class="ttdef"><b>Definition</b> <a href="net__plugin_8cpp_source.html#l02074">net_plugin.cpp:2074</a></div></div>
<div class="ttc" id="anamespacesysio_html_a454edd6d34c5564da3a8c796090837fe"><div class="ttname"><a href="namespacesysio.html#a454edd6d34c5564da3a8c796090837fe">sysio::modes_str</a></div><div class="ttdeci">constexpr auto modes_str(id_list_modes m)</div><div class="ttdef"><b>Definition</b> <a href="plugins_2net__plugin_2include_2sysio_2net__plugin_2protocol_8hpp_source.html#l00099">protocol.hpp:99</a></div></div>
<div class="ttc" id="anet__plugin_8cpp_html_af53787454493a30650fdab0193037465"><div class="ttname"><a href="net__plugin_8cpp.html#af53787454493a30650fdab0193037465">peer_wlog</a></div><div class="ttdeci">#define peer_wlog(PEER, FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="net__plugin_8cpp_source.html#l00375">net_plugin.cpp:375</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1dispatch__manager_afc99556e40e117419b1e3af4271defbf_cgraph.png" border="0" usemap="#aclasssysio_1_1dispatch__manager_afc99556e40e117419b1e3af4271defbf_cgraph" alt=""/></div>
<map name="aclasssysio_1_1dispatch__manager_afc99556e40e117419b1e3af4271defbf_cgraph" id="aclasssysio_1_1dispatch__manager_afc99556e40e117419b1e3af4271defbf_cgraph">
<area shape="rect" title=" " alt="" coords="5,63,172,103"/>
<area shape="rect" href="namespacesysio.html#a0369be74f29dbab1c8afd88c3f6d2858" title=" " alt="" coords="229,5,377,46"/>
<area shape="poly" title=" " alt="" coords="166,60,213,47,214,52,168,65"/>
<area shape="rect" href="namespacesysio.html#a454edd6d34c5564da3a8c796090837fe" title=" " alt="" coords="242,70,364,96"/>
<area shape="poly" title=" " alt="" coords="172,80,227,80,227,86,172,86"/>
<area shape="rect" href="classsysio_1_1dispatch__manager.html#a6464105ad3fe908bfac43cae949b5539" title=" " alt="" coords="220,120,386,161"/>
<area shape="poly" title=" " alt="" coords="168,101,210,113,209,118,166,106"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a3189260e6b3da4bb0ca36245398d2c6a" name="a3189260e6b3da4bb0ca36245398d2c6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3189260e6b3da4bb0ca36245398d2c6a">&#9670;&#160;</a></span>strand</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::asio::io_context::strand sysio::dispatch_manager::strand</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="net__plugin_8cpp_source.html#l00172">172</a> of file <a class="el" href="net__plugin_8cpp_source.html">net_plugin.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>plugins/net_plugin/<a class="el" href="net__plugin_8cpp_source.html">net_plugin.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacesysio.html">sysio</a></li><li class="navelem"><a class="el" href="classsysio_1_1dispatch__manager.html">dispatch_manager</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
