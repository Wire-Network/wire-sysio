\doxysection{sysio\+::chain\+::trim\+\_\+data Struct Reference}
\hypertarget{structsysio_1_1chain_1_1trim__data}{}\label{structsysio_1_1chain_1_1trim__data}\index{sysio::chain::trim\_data@{sysio::chain::trim\_data}}


{\ttfamily \#include $<$block\+\_\+log.\+hpp$>$}



Collaboration diagram for sysio\+::chain\+::trim\+\_\+data\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=250pt]{structsysio_1_1chain_1_1trim__data__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ab5de810b1245a1ebff191bda8b98c9a1}{trim\+\_\+data}} (\mbox{\hyperlink{classfc_1_1path}{fc\+::path}} \mbox{\hyperlink{programs_2sysio-launcher_2main_8cpp_a3426d59b828f63d073d546fed967330e}{block\+\_\+dir}})
\item 
\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_afd21cc1e7b397aee685160aaf721736d}{\texorpdfstring{$\sim$}{\string~}trim\+\_\+data}} ()
\item 
\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}} \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ac17d9de35cb85c02c9941383403ee043}{block\+\_\+index}} (\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} n) const
\item 
\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}} \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a031c642ba68c0e0cb6e834d5b59244c9}{block\+\_\+pos}} (\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} n)
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classfc_1_1path}{fc\+::path}} \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a9b9c1456b3224e34b79503cb529af094}{block\+\_\+file\+\_\+name}}
\item 
\mbox{\hyperlink{classfc_1_1path}{fc\+::path}} \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ac74b927870c5603572bd5b5e7be49f24}{index\+\_\+file\+\_\+name}}
\item 
\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a7e4b371e3182b3a7f14f3ce259e9e85b}{version}} = 0
\item 
\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a4f9ad5c06da3b28555c42b8414c77f02}{first\+\_\+block}} = 0
\item 
\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a957dfc1ecb5587c97f7020be201bb4d9}{last\+\_\+block}} = 0
\item 
FILE \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a5faa95655dcebf6fed96719b79ecdc7e}{blk\+\_\+in}} = nullptr
\item 
FILE \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ad36ef41dbc453f96852a0ab9577c645e}{ind\+\_\+in}} = nullptr
\item 
\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}} \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_acd8f1c5d27140de411c67ca968bf8a9c}{first\+\_\+block\+\_\+pos}} = 0
\item 
\mbox{\hyperlink{structsysio_1_1chain_1_1chain__id__type}{chain\+\_\+id\+\_\+type}} \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a7d928be578fee45a79cb2d43ffca9a2d}{chain\+\_\+id}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static constexpr int \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_aeacad2aff58cf29973f137cd79819264}{blknum\+\_\+offset}} \{14\}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{block__log_8hpp_source_l00109}{109}} of file \mbox{\hyperlink{block__log_8hpp_source}{block\+\_\+log.\+hpp}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{structsysio_1_1chain_1_1trim__data_ab5de810b1245a1ebff191bda8b98c9a1}\index{sysio::chain::trim\_data@{sysio::chain::trim\_data}!trim\_data@{trim\_data}}
\index{trim\_data@{trim\_data}!sysio::chain::trim\_data@{sysio::chain::trim\_data}}
\doxysubsubsection{\texorpdfstring{trim\_data()}{trim\_data()}}
{\footnotesize\ttfamily \label{structsysio_1_1chain_1_1trim__data_ab5de810b1245a1ebff191bda8b98c9a1} 
sysio\+::chain\+::trim\+\_\+data\+::trim\+\_\+data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classfc_1_1path}{fc\+::path}}}]{block\+\_\+dir}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{block__log_8cpp_source_l01308}{1308}} of file \mbox{\hyperlink{block__log_8cpp_source}{block\+\_\+log.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01309\ }
\DoxyCodeLine{01310\ \ \ \ \ \ \ \textcolor{comment}{//\ code\ should\ follow\ logic\ in\ block\_log::repair\_log}}
\DoxyCodeLine{01311\ }
\DoxyCodeLine{01312\ \ \ \ \ \ \ \textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespacestd}{std}};}
\DoxyCodeLine{01313\ \ \ \ \ \ \ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a9b9c1456b3224e34b79503cb529af094}{block\_file\_name}}\ =\ \mbox{\hyperlink{programs_2sysio-launcher_2main_8cpp_a3426d59b828f63d073d546fed967330e}{block\_dir}}\ /\ \textcolor{stringliteral}{"{}blocks.log"{}};}
\DoxyCodeLine{01314\ \ \ \ \ \ \ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ac74b927870c5603572bd5b5e7be49f24}{index\_file\_name}}\ =\ \mbox{\hyperlink{programs_2sysio-launcher_2main_8cpp_a3426d59b828f63d073d546fed967330e}{block\_dir}}\ /\ \textcolor{stringliteral}{"{}blocks.index"{}};}
\DoxyCodeLine{01315\ \ \ \ \ \ \ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a5faa95655dcebf6fed96719b79ecdc7e}{blk\_in}}\ =\ \mbox{\hyperlink{block__log_8cpp_a61f5167b6b67be986af6e081a925267f}{FC\_FOPEN}}(\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a9b9c1456b3224e34b79503cb529af094}{block\_file\_name}}.\mbox{\hyperlink{classfc_1_1path_ab1eae2062df4ea01435348ec52fb3784}{generic\_string}}().c\_str(),\ \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{01316\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a5faa95655dcebf6fed96719b79ecdc7e}{blk\_in}}\ !=\ \textcolor{keyword}{nullptr},\ block\_log\_not\_found,\ \textcolor{stringliteral}{"{}cannot\ read\ file\ \$\{file\}"{}},\ (\textcolor{stringliteral}{"{}file"{}},\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a9b9c1456b3224e34b79503cb529af094}{block\_file\_name}}.\mbox{\hyperlink{classfc_1_1path_aaf0107e4a41f9977032b2a604161cf85}{string}}())\ );}
\DoxyCodeLine{01317\ \ \ \ \ \ \ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ad36ef41dbc453f96852a0ab9577c645e}{ind\_in}}\ =\ \mbox{\hyperlink{block__log_8cpp_a61f5167b6b67be986af6e081a925267f}{FC\_FOPEN}}(\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ac74b927870c5603572bd5b5e7be49f24}{index\_file\_name}}.\mbox{\hyperlink{classfc_1_1path_ab1eae2062df4ea01435348ec52fb3784}{generic\_string}}().c\_str(),\ \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{01318\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ad36ef41dbc453f96852a0ab9577c645e}{ind\_in}}\ !=\ \textcolor{keyword}{nullptr},\ block\_log\_not\_found,\ \textcolor{stringliteral}{"{}cannot\ read\ file\ \$\{file\}"{}},\ (\textcolor{stringliteral}{"{}file"{}},\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ac74b927870c5603572bd5b5e7be49f24}{index\_file\_name}}.\mbox{\hyperlink{classfc_1_1path_aaf0107e4a41f9977032b2a604161cf85}{string}}())\ );}
\DoxyCodeLine{01319\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ size\ =\ fread((\textcolor{keywordtype}{void}*)\&\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a7e4b371e3182b3a7f14f3ce259e9e85b}{version}},\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a7e4b371e3182b3a7f14f3ce259e9e85b}{version}}),\ 1,\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a5faa95655dcebf6fed96719b79ecdc7e}{blk\_in}});}
\DoxyCodeLine{01320\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ size\ ==\ 1,\ block\_log\_unsupported\_version,\ \textcolor{stringliteral}{"{}invalid\ format\ for\ file\ \$\{file\}"{}},\ (\textcolor{stringliteral}{"{}file"{}},\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a9b9c1456b3224e34b79503cb529af094}{block\_file\_name}}.\mbox{\hyperlink{classfc_1_1path_aaf0107e4a41f9977032b2a604161cf85}{string}}()));}
\DoxyCodeLine{01321\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a831cf08dc63704c11fd154132c6e8bdb}{ilog}}(\textcolor{stringliteral}{"{}block\ log\ version=\ \$\{version\}"{}},(\textcolor{stringliteral}{"{}version"{}},\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a7e4b371e3182b3a7f14f3ce259e9e85b}{version}}));}
\DoxyCodeLine{01322\ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_pruned\ =\ detail::is\_pruned\_log\_and\_mask\_version(\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a7e4b371e3182b3a7f14f3ce259e9e85b}{version}});}
\DoxyCodeLine{01323\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ !is\_pruned,\ block\_log\_unsupported\_version,\ \textcolor{stringliteral}{"{}Block\ log\ is\ currently\ in\ pruned\ format,\ it\ must\ be\ vacuumed\ before\ doing\ this\ operation"{}});}
\DoxyCodeLine{01324\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{classsysio_1_1chain_1_1block__log_a5afbeabca60a1f842b83c107ec54cf99}{block\_log::is\_supported\_version}}(\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a7e4b371e3182b3a7f14f3ce259e9e85b}{version}}),\ block\_log\_unsupported\_version,\ \textcolor{stringliteral}{"{}block\ log\ version\ \$\{v\}\ is\ not\ supported"{}},\ (\textcolor{stringliteral}{"{}v"{}},\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a7e4b371e3182b3a7f14f3ce259e9e85b}{version}}));}
\DoxyCodeLine{01325\ }
\DoxyCodeLine{01326\ \ \ \ \ \ \ detail::fileptr\_datastream\ \mbox{\hyperlink{namespace_xbyak_1_1util_a4b2aef26182d21706896022467868f7c}{ds}}(\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a5faa95655dcebf6fed96719b79ecdc7e}{blk\_in}},\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a9b9c1456b3224e34b79503cb529af094}{block\_file\_name}}.\mbox{\hyperlink{classfc_1_1path_aaf0107e4a41f9977032b2a604161cf85}{string}}());}
\DoxyCodeLine{01327\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a7e4b371e3182b3a7f14f3ce259e9e85b}{version}}\ ==\ 1)\ \{}
\DoxyCodeLine{01328\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a4f9ad5c06da3b28555c42b8414c77f02}{first\_block}}\ =\ 1;}
\DoxyCodeLine{01329\ \ \ \ \ \ \ \ \ \ genesis\_state\ \mbox{\hyperlink{namespace_xbyak_1_1util_a051ad68b75c300988da81d4804273b56}{gs}};}
\DoxyCodeLine{01330\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacefc_1_1raw_a0b442d98ceb22dd5a6ae84745e43ffab}{fc::raw::unpack}}(ds,\ gs);}
\DoxyCodeLine{01331\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a7d928be578fee45a79cb2d43ffca9a2d}{chain\_id}}\ =\ \mbox{\hyperlink{namespace_xbyak_1_1util_a051ad68b75c300988da81d4804273b56}{gs}}.compute\_chain\_id();}
\DoxyCodeLine{01332\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01333\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01334\ \ \ \ \ \ \ \ \ \ size\ =\ fread((\textcolor{keywordtype}{void}\ *)\ \&\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a4f9ad5c06da3b28555c42b8414c77f02}{first\_block}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a4f9ad5c06da3b28555c42b8414c77f02}{first\_block}}),\ 1,\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a5faa95655dcebf6fed96719b79ecdc7e}{blk\_in}});}
\DoxyCodeLine{01335\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(size\ ==\ 1,\ block\_log\_exception,\ \textcolor{stringliteral}{"{}invalid\ format\ for\ file\ \$\{file\}"{}},}
\DoxyCodeLine{01336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}file"{}},\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a9b9c1456b3224e34b79503cb529af094}{block\_file\_name}}.\mbox{\hyperlink{classfc_1_1path_aaf0107e4a41f9977032b2a604161cf85}{string}}()));}
\DoxyCodeLine{01337\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsysio_1_1chain_1_1block__log_ad760661c5030845b1369fee21e08a909}{block\_log::contains\_genesis\_state}}(\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a7e4b371e3182b3a7f14f3ce259e9e85b}{version}},\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a4f9ad5c06da3b28555c42b8414c77f02}{first\_block}}))\ \{}
\DoxyCodeLine{01338\ \ \ \ \ \ \ \ \ \ \ \ \ genesis\_state\ \mbox{\hyperlink{namespace_xbyak_1_1util_a051ad68b75c300988da81d4804273b56}{gs}};}
\DoxyCodeLine{01339\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacefc_1_1raw_a0b442d98ceb22dd5a6ae84745e43ffab}{fc::raw::unpack}}(ds,\ gs);}
\DoxyCodeLine{01340\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a7d928be578fee45a79cb2d43ffca9a2d}{chain\_id}}\ =\ \mbox{\hyperlink{namespace_xbyak_1_1util_a051ad68b75c300988da81d4804273b56}{gs}}.compute\_chain\_id();}
\DoxyCodeLine{01341\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01342\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsysio_1_1chain_1_1block__log_a370e648384d16b6d60ca211921501cc6}{block\_log::contains\_chain\_id}}(\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a7e4b371e3182b3a7f14f3ce259e9e85b}{version}},\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a4f9ad5c06da3b28555c42b8414c77f02}{first\_block}}))\ \{}
\DoxyCodeLine{01343\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_xbyak_1_1util_a4b2aef26182d21706896022467868f7c}{ds}}\ >>\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a7d928be578fee45a79cb2d43ffca9a2d}{chain\_id}};}
\DoxyCodeLine{01344\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01345\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01346\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a1bfa656552ea0534b2c91ee0fe33f850}{SYS\_THROW}}(\ block\_log\_exception,}
\DoxyCodeLine{01347\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Block\ log\ \$\{file\}\ is\ not\ supported.\ version:\ \$\{ver\}\ and\ first\_block:\ \$\{first\_block\}\ does\ not\ contain\ "{}}}
\DoxyCodeLine{01348\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}a\ genesis\_state\ nor\ a\ chain\_id."{}},}
\DoxyCodeLine{01349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}file"{}},\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a9b9c1456b3224e34b79503cb529af094}{block\_file\_name}}.\mbox{\hyperlink{classfc_1_1path_aaf0107e4a41f9977032b2a604161cf85}{string}}())(\textcolor{stringliteral}{"{}ver"{}},\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a7e4b371e3182b3a7f14f3ce259e9e85b}{version}})(\textcolor{stringliteral}{"{}first\_block"{}},\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a4f9ad5c06da3b28555c42b8414c77f02}{first\_block}}));}
\DoxyCodeLine{01350\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01351\ }
\DoxyCodeLine{01352\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ expected\_totem\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1block__log_a02319a8bef22b7a167f17314c00b1ac1}{block\_log::npos}};}
\DoxyCodeLine{01353\ \ \ \ \ \ \ \ \ \ std::decay\_t<\textcolor{keyword}{decltype}(\mbox{\hyperlink{classsysio_1_1chain_1_1block__log_a02319a8bef22b7a167f17314c00b1ac1}{block\_log::npos}})>\ actual\_totem;}
\DoxyCodeLine{01354\ \ \ \ \ \ \ \ \ \ size\ =\ fread\ (\ (\textcolor{keywordtype}{char}*)\&actual\_totem,\ \textcolor{keyword}{sizeof}(actual\_totem),\ 1,\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a5faa95655dcebf6fed96719b79ecdc7e}{blk\_in}});}
\DoxyCodeLine{01355\ }
\DoxyCodeLine{01356\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(size\ ==\ 1,\ block\_log\_exception,}
\DoxyCodeLine{01357\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Expected\ to\ read\ \$\{size\}\ bytes,\ but\ did\ not\ read\ any\ bytes"{}},\ (\textcolor{stringliteral}{"{}size"{}},\ \textcolor{keyword}{sizeof}(actual\_totem)));}
\DoxyCodeLine{01358\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(actual\_totem\ ==\ expected\_totem,\ block\_log\_exception,}
\DoxyCodeLine{01359\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Expected\ separator\ between\ block\ log\ header\ and\ blocks\ was\ not\ found(\ expected:\ \$\{e\},\ actual:\ \$\{a\}\ )"{}},}
\DoxyCodeLine{01360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}e"{}},\ \mbox{\hyperlink{namespacefc_aab567c89004d329f560014d9943afcd6}{fc::to\_hex}}((\textcolor{keywordtype}{char}*)\&expected\_totem,\ \textcolor{keyword}{sizeof}(expected\_totem)\ ))(\textcolor{stringliteral}{"{}a"{}},\ \mbox{\hyperlink{namespacefc_aab567c89004d329f560014d9943afcd6}{fc::to\_hex}}((\textcolor{keywordtype}{char}*)\&actual\_totem,\ \textcolor{keyword}{sizeof}(actual\_totem)\ )));}
\DoxyCodeLine{01361\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01362\ }
\DoxyCodeLine{01363\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}}\ start\_of\_blocks\ =\ ftell(\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a5faa95655dcebf6fed96719b79ecdc7e}{blk\_in}});}
\DoxyCodeLine{01364\ }
\DoxyCodeLine{01365\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ status\ =\ fseek(\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ad36ef41dbc453f96852a0ab9577c645e}{ind\_in}},\ 0,\ SEEK\_END);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//get\ length\ of\ blocks.index\ (gives\ number\ of\ blocks)}}
\DoxyCodeLine{01366\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ status\ ==\ 0,\ block\_log\_exception,\ \textcolor{stringliteral}{"{}cannot\ seek\ to\ \$\{file\}\ end"{}},\ (\textcolor{stringliteral}{"{}file"{}},\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ac74b927870c5603572bd5b5e7be49f24}{index\_file\_name}}.\mbox{\hyperlink{classfc_1_1path_aaf0107e4a41f9977032b2a604161cf85}{string}}())\ );}
\DoxyCodeLine{01367\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}}\ file\_end\ =\ ftell(\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ad36ef41dbc453f96852a0ab9577c645e}{ind\_in}});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//get\ length\ of\ blocks.index\ (gives\ number\ of\ blocks)}}
\DoxyCodeLine{01368\ \ \ \ \ \ \ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a957dfc1ecb5587c97f7020be201bb4d9}{last\_block}}\ =\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a4f9ad5c06da3b28555c42b8414c77f02}{first\_block}}\ +\ file\_end/\textcolor{keyword}{sizeof}(\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}})\ -\/\ 1;}
\DoxyCodeLine{01369\ }
\DoxyCodeLine{01370\ \ \ \ \ \ \ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_acd8f1c5d27140de411c67ca968bf8a9c}{first\_block\_pos}}\ =\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a031c642ba68c0e0cb6e834d5b59244c9}{block\_pos}}(\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a4f9ad5c06da3b28555c42b8414c77f02}{first\_block}});}
\DoxyCodeLine{01371\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(start\_of\_blocks\ ==\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_acd8f1c5d27140de411c67ca968bf8a9c}{first\_block\_pos}},\ block\_log\_exception,}
\DoxyCodeLine{01372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Block\ log\ \$\{file\}\ was\ determined\ to\ have\ its\ first\ block\ at\ \$\{determined\},\ but\ the\ block\ index\ "{}}}
\DoxyCodeLine{01373\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}indicates\ the\ first\ block\ is\ at\ \$\{index\}"{}},}
\DoxyCodeLine{01374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}file"{}},\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a9b9c1456b3224e34b79503cb529af094}{block\_file\_name}}.\mbox{\hyperlink{classfc_1_1path_aaf0107e4a41f9977032b2a604161cf85}{string}}())(\textcolor{stringliteral}{"{}determined"{}},\ start\_of\_blocks)(\textcolor{stringliteral}{"{}index"{}},\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_acd8f1c5d27140de411c67ca968bf8a9c}{first\_block\_pos}}));}
\DoxyCodeLine{01375\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a831cf08dc63704c11fd154132c6e8bdb}{ilog}}(\textcolor{stringliteral}{"{}first\ block=\ \$\{first\}"{}},(\textcolor{stringliteral}{"{}first"{}},\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a4f9ad5c06da3b28555c42b8414c77f02}{first\_block}}));}
\DoxyCodeLine{01376\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a831cf08dc63704c11fd154132c6e8bdb}{ilog}}(\textcolor{stringliteral}{"{}last\ block=\ \$\{last\}"{}},(\textcolor{stringliteral}{"{}last"{}},\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a957dfc1ecb5587c97f7020be201bb4d9}{last\_block}}));}
\DoxyCodeLine{01377\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{structsysio_1_1chain_1_1trim__data_ab5de810b1245a1ebff191bda8b98c9a1_cgraph}
\end{center}
\end{figure}
\Hypertarget{structsysio_1_1chain_1_1trim__data_afd21cc1e7b397aee685160aaf721736d}\index{sysio::chain::trim\_data@{sysio::chain::trim\_data}!````~trim\_data@{\texorpdfstring{$\sim$}{\string~}trim\_data}}
\index{````~trim\_data@{\texorpdfstring{$\sim$}{\string~}trim\_data}!sysio::chain::trim\_data@{sysio::chain::trim\_data}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}trim\_data()}{\string~trim\_data()}}
{\footnotesize\ttfamily \label{structsysio_1_1chain_1_1trim__data_afd21cc1e7b397aee685160aaf721736d} 
sysio\+::chain\+::trim\+\_\+data\+::\texorpdfstring{$\sim$}{\string~}trim\+\_\+data (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{block__log_8cpp_source_l01379}{1379}} of file \mbox{\hyperlink{block__log_8cpp_source}{block\+\_\+log.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01379\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01380\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a5faa95655dcebf6fed96719b79ecdc7e}{blk\_in}}\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01381\ \ \ \ \ \ \ \ \ \ fclose(\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a5faa95655dcebf6fed96719b79ecdc7e}{blk\_in}});}
\DoxyCodeLine{01382\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ad36ef41dbc453f96852a0ab9577c645e}{ind\_in}}\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{01383\ \ \ \ \ \ \ \ \ \ fclose(\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ad36ef41dbc453f96852a0ab9577c645e}{ind\_in}});}
\DoxyCodeLine{01384\ \ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{structsysio_1_1chain_1_1trim__data_ac17d9de35cb85c02c9941383403ee043}\index{sysio::chain::trim\_data@{sysio::chain::trim\_data}!block\_index@{block\_index}}
\index{block\_index@{block\_index}!sysio::chain::trim\_data@{sysio::chain::trim\_data}}
\doxysubsubsection{\texorpdfstring{block\_index()}{block\_index()}}
{\footnotesize\ttfamily \label{structsysio_1_1chain_1_1trim__data_ac17d9de35cb85c02c9941383403ee043} 
\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}} sysio\+::chain\+::trim\+\_\+data\+::block\+\_\+index (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}}}]{n}{}\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{block__log_8cpp_source_l01386}{1386}} of file \mbox{\hyperlink{block__log_8cpp_source}{block\+\_\+log.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01386\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01387\ \ \ \ \ \ \ \textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespacestd}{std}};}
\DoxyCodeLine{01388\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a4f9ad5c06da3b28555c42b8414c77f02}{first\_block}}\ <=\ n,\ block\_log\_exception,}
\DoxyCodeLine{01389\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}cannot\ seek\ in\ \$\{file\}\ to\ block\ number\ \$\{b\},\ block\ number\ \$\{first\}\ is\ the\ first\ block"{}},}
\DoxyCodeLine{01390\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}file"{}},\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ac74b927870c5603572bd5b5e7be49f24}{index\_file\_name}}.\mbox{\hyperlink{classfc_1_1path_aaf0107e4a41f9977032b2a604161cf85}{string}}())(\textcolor{stringliteral}{"{}b"{}},n)(\textcolor{stringliteral}{"{}first"{}},\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a4f9ad5c06da3b28555c42b8414c77f02}{first\_block}})\ );}
\DoxyCodeLine{01391\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ n\ <=\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a957dfc1ecb5587c97f7020be201bb4d9}{last\_block}},\ block\_log\_exception,}
\DoxyCodeLine{01392\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}cannot\ seek\ in\ \$\{file\}\ to\ block\ number\ \$\{b\},\ block\ number\ \$\{last\}\ is\ the\ last\ block"{}},}
\DoxyCodeLine{01393\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}file"{}},\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ac74b927870c5603572bd5b5e7be49f24}{index\_file\_name}}.\mbox{\hyperlink{classfc_1_1path_aaf0107e4a41f9977032b2a604161cf85}{string}}())(\textcolor{stringliteral}{"{}b"{}},n)(\textcolor{stringliteral}{"{}last"{}},\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a957dfc1ecb5587c97f7020be201bb4d9}{last\_block}})\ );}
\DoxyCodeLine{01394\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}})\ *\ (n\ -\/\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a4f9ad5c06da3b28555c42b8414c77f02}{first\_block}});}
\DoxyCodeLine{01395\ \ \ \ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{structsysio_1_1chain_1_1trim__data_ac17d9de35cb85c02c9941383403ee043_icgraph}
\end{center}
\end{figure}
\Hypertarget{structsysio_1_1chain_1_1trim__data_a031c642ba68c0e0cb6e834d5b59244c9}\index{sysio::chain::trim\_data@{sysio::chain::trim\_data}!block\_pos@{block\_pos}}
\index{block\_pos@{block\_pos}!sysio::chain::trim\_data@{sysio::chain::trim\_data}}
\doxysubsubsection{\texorpdfstring{block\_pos()}{block\_pos()}}
{\footnotesize\ttfamily \label{structsysio_1_1chain_1_1trim__data_a031c642ba68c0e0cb6e834d5b59244c9} 
\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}} sysio\+::chain\+::trim\+\_\+data\+::block\+\_\+pos (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}}}]{n}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{block__log_8cpp_source_l01397}{1397}} of file \mbox{\hyperlink{block__log_8cpp_source}{block\+\_\+log.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01397\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01398\ \ \ \ \ \ \ \textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespacestd}{std}};}
\DoxyCodeLine{01399\ \ \ \ \ \ \ \textcolor{comment}{//\ can\ indicate\ the\ location\ of\ the\ block\ after\ the\ last\ block}}
\DoxyCodeLine{01400\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ ==\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a957dfc1ecb5587c97f7020be201bb4d9}{last\_block}}\ +\ 1)\ \{}
\DoxyCodeLine{01401\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ftell(\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a5faa95655dcebf6fed96719b79ecdc7e}{blk\_in}});}
\DoxyCodeLine{01402\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01403\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}}\ index\_pos\ =\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ac17d9de35cb85c02c9941383403ee043}{block\_index}}(n);}
\DoxyCodeLine{01404\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ status\ =\ fseek(\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ad36ef41dbc453f96852a0ab9577c645e}{ind\_in}},\ index\_pos,\ SEEK\_SET);}
\DoxyCodeLine{01405\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ status\ ==\ 0,\ block\_log\_exception,\ \textcolor{stringliteral}{"{}cannot\ seek\ to\ \$\{file\}\ \$\{pos\}\ from\ beginning\ of\ file\ for\ block\ \$\{b\}"{}},\ (\textcolor{stringliteral}{"{}file"{}},\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ac74b927870c5603572bd5b5e7be49f24}{index\_file\_name}}.\mbox{\hyperlink{classfc_1_1path_aaf0107e4a41f9977032b2a604161cf85}{string}}())(\textcolor{stringliteral}{"{}pos"{}},\ index\_pos)(\textcolor{stringliteral}{"{}b"{}},n)\ );}
\DoxyCodeLine{01406\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}}\ pos\ =\ ftell(\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ad36ef41dbc453f96852a0ab9577c645e}{ind\_in}});}
\DoxyCodeLine{01407\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ pos\ ==\ index\_pos,\ block\_log\_exception,\ \textcolor{stringliteral}{"{}cannot\ seek\ to\ \$\{file\}\ entry\ for\ block\ \$\{b\}"{}},\ (\textcolor{stringliteral}{"{}file"{}},\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ac74b927870c5603572bd5b5e7be49f24}{index\_file\_name}}.\mbox{\hyperlink{classfc_1_1path_aaf0107e4a41f9977032b2a604161cf85}{string}}())(\textcolor{stringliteral}{"{}b"{}},n)\ );}
\DoxyCodeLine{01408\ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}}\ block\_n\_pos;}
\DoxyCodeLine{01409\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ size\ =\ fread((\textcolor{keywordtype}{void}*)\&block\_n\_pos,\ \textcolor{keyword}{sizeof}(block\_n\_pos),\ 1,\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ad36ef41dbc453f96852a0ab9577c645e}{ind\_in}});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//filepos\ of\ block\ n}}
\DoxyCodeLine{01410\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ size\ ==\ 1,\ block\_log\_exception,\ \textcolor{stringliteral}{"{}cannot\ read\ \$\{file\}\ entry\ for\ block\ \$\{b\}"{}},\ (\textcolor{stringliteral}{"{}file"{}},\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_ac74b927870c5603572bd5b5e7be49f24}{index\_file\_name}}.\mbox{\hyperlink{classfc_1_1path_aaf0107e4a41f9977032b2a604161cf85}{string}}())(\textcolor{stringliteral}{"{}b"{}},n)\ );}
\DoxyCodeLine{01411\ }
\DoxyCodeLine{01412\ \ \ \ \ \ \ \textcolor{comment}{//read\ blocks.log\ and\ verify\ block\ number\ n\ is\ found\ at\ the\ determined\ file\ position}}
\DoxyCodeLine{01413\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ calc\_blknum\_pos\ =\ block\_n\_pos\ +\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_aeacad2aff58cf29973f137cd79819264}{blknum\_offset}};}
\DoxyCodeLine{01414\ \ \ \ \ \ \ status\ =\ fseek(\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a5faa95655dcebf6fed96719b79ecdc7e}{blk\_in}},\ calc\_blknum\_pos,\ SEEK\_SET);}
\DoxyCodeLine{01415\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ status\ ==\ 0,\ block\_log\_exception,\ \textcolor{stringliteral}{"{}cannot\ seek\ to\ \$\{file\}\ \$\{pos\}\ from\ beginning\ of\ file"{}},\ (\textcolor{stringliteral}{"{}file"{}},\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a9b9c1456b3224e34b79503cb529af094}{block\_file\_name}}.\mbox{\hyperlink{classfc_1_1path_aaf0107e4a41f9977032b2a604161cf85}{string}}())(\textcolor{stringliteral}{"{}pos"{}},\ calc\_blknum\_pos)\ );}
\DoxyCodeLine{01416\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}}\ block\_offset\_pos\ =\ ftell(\mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a5faa95655dcebf6fed96719b79ecdc7e}{blk\_in}});}
\DoxyCodeLine{01417\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ block\_offset\_pos\ ==\ calc\_blknum\_pos,\ block\_log\_exception,\ \textcolor{stringliteral}{"{}cannot\ seek\ to\ \$\{file\}\ \$\{pos\}\ from\ beginning\ of\ file"{}},\ (\textcolor{stringliteral}{"{}file"{}},\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a9b9c1456b3224e34b79503cb529af094}{block\_file\_name}}.\mbox{\hyperlink{classfc_1_1path_aaf0107e4a41f9977032b2a604161cf85}{string}}())(\textcolor{stringliteral}{"{}pos"{}},\ calc\_blknum\_pos)\ );}
\DoxyCodeLine{01418\ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ prior\_blknum;}
\DoxyCodeLine{01419\ \ \ \ \ \ \ size\ =\ fread((\textcolor{keywordtype}{void}*)\&prior\_blknum,\ \textcolor{keyword}{sizeof}(prior\_blknum),\ 1,\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a5faa95655dcebf6fed96719b79ecdc7e}{blk\_in}});\ \ \ \ \ \textcolor{comment}{//read\ bigendian\ block\ number\ of\ prior\ block}}
\DoxyCodeLine{01420\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ size\ ==\ 1,\ block\_log\_exception,\ \textcolor{stringliteral}{"{}cannot\ read\ prior\ block"{}});}
\DoxyCodeLine{01421\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ bnum\ =\ \mbox{\hyperlink{namespacefc_afb668c55fd6ee73e1fcd67e77d8f6009}{fc::endian\_reverse\_u32}}(prior\_blknum)\ +\ 1;\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//convert\ to\ little\ endian,\ add\ 1\ since\ prior\ block}}
\DoxyCodeLine{01422\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ bnum\ ==\ n,\ block\_log\_exception,}
\DoxyCodeLine{01423\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}At\ position\ \$\{pos\}\ in\ \$\{file\}\ expected\ to\ find\ \$\{exp\_bnum\}\ but\ found\ \$\{act\_bnum\}"{}},}
\DoxyCodeLine{01424\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}pos"{}},block\_offset\_pos)(\textcolor{stringliteral}{"{}file"{}},\ \mbox{\hyperlink{structsysio_1_1chain_1_1trim__data_a9b9c1456b3224e34b79503cb529af094}{block\_file\_name}}.\mbox{\hyperlink{classfc_1_1path_aaf0107e4a41f9977032b2a604161cf85}{string}}())(\textcolor{stringliteral}{"{}exp\_bnum"{}},n)(\textcolor{stringliteral}{"{}act\_bnum"{}},bnum)\ );}
\DoxyCodeLine{01425\ }
\DoxyCodeLine{01426\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ block\_n\_pos;}
\DoxyCodeLine{01427\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=324pt]{structsysio_1_1chain_1_1trim__data_a031c642ba68c0e0cb6e834d5b59244c9_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{structsysio_1_1chain_1_1trim__data_a031c642ba68c0e0cb6e834d5b59244c9_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\Hypertarget{structsysio_1_1chain_1_1trim__data_a5faa95655dcebf6fed96719b79ecdc7e}\index{sysio::chain::trim\_data@{sysio::chain::trim\_data}!blk\_in@{blk\_in}}
\index{blk\_in@{blk\_in}!sysio::chain::trim\_data@{sysio::chain::trim\_data}}
\doxysubsubsection{\texorpdfstring{blk\_in}{blk\_in}}
{\footnotesize\ttfamily \label{structsysio_1_1chain_1_1trim__data_a5faa95655dcebf6fed96719b79ecdc7e} 
FILE\texorpdfstring{$\ast$}{*} sysio\+::chain\+::trim\+\_\+data\+::blk\+\_\+in = nullptr}



Definition at line \mbox{\hyperlink{block__log_8hpp_source_l00118}{118}} of file \mbox{\hyperlink{block__log_8hpp_source}{block\+\_\+log.\+hpp}}.

\Hypertarget{structsysio_1_1chain_1_1trim__data_aeacad2aff58cf29973f137cd79819264}\index{sysio::chain::trim\_data@{sysio::chain::trim\_data}!blknum\_offset@{blknum\_offset}}
\index{blknum\_offset@{blknum\_offset}!sysio::chain::trim\_data@{sysio::chain::trim\_data}}
\doxysubsubsection{\texorpdfstring{blknum\_offset}{blknum\_offset}}
{\footnotesize\ttfamily \label{structsysio_1_1chain_1_1trim__data_aeacad2aff58cf29973f137cd79819264} 
int sysio\+::chain\+::trim\+\_\+data\+::blknum\+\_\+offset \{14\}\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [constexpr]}}



Definition at line \mbox{\hyperlink{block__log_8hpp_source_l00124}{124}} of file \mbox{\hyperlink{block__log_8hpp_source}{block\+\_\+log.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00124\ \{14\};\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//offset\ from\ start\ of\ block\ to\ 4\ byte\ block\ number,\ valid\ for\ the\ only\ allowed\ versions}}

\end{DoxyCode}
\Hypertarget{structsysio_1_1chain_1_1trim__data_a9b9c1456b3224e34b79503cb529af094}\index{sysio::chain::trim\_data@{sysio::chain::trim\_data}!block\_file\_name@{block\_file\_name}}
\index{block\_file\_name@{block\_file\_name}!sysio::chain::trim\_data@{sysio::chain::trim\_data}}
\doxysubsubsection{\texorpdfstring{block\_file\_name}{block\_file\_name}}
{\footnotesize\ttfamily \label{structsysio_1_1chain_1_1trim__data_a9b9c1456b3224e34b79503cb529af094} 
\mbox{\hyperlink{classfc_1_1path}{fc\+::path}} sysio\+::chain\+::trim\+\_\+data\+::block\+\_\+file\+\_\+name}



Definition at line \mbox{\hyperlink{block__log_8hpp_source_l00114}{114}} of file \mbox{\hyperlink{block__log_8hpp_source}{block\+\_\+log.\+hpp}}.

\Hypertarget{structsysio_1_1chain_1_1trim__data_a7d928be578fee45a79cb2d43ffca9a2d}\index{sysio::chain::trim\_data@{sysio::chain::trim\_data}!chain\_id@{chain\_id}}
\index{chain\_id@{chain\_id}!sysio::chain::trim\_data@{sysio::chain::trim\_data}}
\doxysubsubsection{\texorpdfstring{chain\_id}{chain\_id}}
{\footnotesize\ttfamily \label{structsysio_1_1chain_1_1trim__data_a7d928be578fee45a79cb2d43ffca9a2d} 
\mbox{\hyperlink{structsysio_1_1chain_1_1chain__id__type}{chain\+\_\+id\+\_\+type}} sysio\+::chain\+::trim\+\_\+data\+::chain\+\_\+id}



Definition at line \mbox{\hyperlink{block__log_8hpp_source_l00122}{122}} of file \mbox{\hyperlink{block__log_8hpp_source}{block\+\_\+log.\+hpp}}.

\Hypertarget{structsysio_1_1chain_1_1trim__data_a4f9ad5c06da3b28555c42b8414c77f02}\index{sysio::chain::trim\_data@{sysio::chain::trim\_data}!first\_block@{first\_block}}
\index{first\_block@{first\_block}!sysio::chain::trim\_data@{sysio::chain::trim\_data}}
\doxysubsubsection{\texorpdfstring{first\_block}{first\_block}}
{\footnotesize\ttfamily \label{structsysio_1_1chain_1_1trim__data_a4f9ad5c06da3b28555c42b8414c77f02} 
\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} sysio\+::chain\+::trim\+\_\+data\+::first\+\_\+block = 0}



Definition at line \mbox{\hyperlink{block__log_8hpp_source_l00116}{116}} of file \mbox{\hyperlink{block__log_8hpp_source}{block\+\_\+log.\+hpp}}.

\Hypertarget{structsysio_1_1chain_1_1trim__data_acd8f1c5d27140de411c67ca968bf8a9c}\index{sysio::chain::trim\_data@{sysio::chain::trim\_data}!first\_block\_pos@{first\_block\_pos}}
\index{first\_block\_pos@{first\_block\_pos}!sysio::chain::trim\_data@{sysio::chain::trim\_data}}
\doxysubsubsection{\texorpdfstring{first\_block\_pos}{first\_block\_pos}}
{\footnotesize\ttfamily \label{structsysio_1_1chain_1_1trim__data_acd8f1c5d27140de411c67ca968bf8a9c} 
\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\+\_\+t}} sysio\+::chain\+::trim\+\_\+data\+::first\+\_\+block\+\_\+pos = 0}



Definition at line \mbox{\hyperlink{block__log_8hpp_source_l00121}{121}} of file \mbox{\hyperlink{block__log_8hpp_source}{block\+\_\+log.\+hpp}}.

\Hypertarget{structsysio_1_1chain_1_1trim__data_ad36ef41dbc453f96852a0ab9577c645e}\index{sysio::chain::trim\_data@{sysio::chain::trim\_data}!ind\_in@{ind\_in}}
\index{ind\_in@{ind\_in}!sysio::chain::trim\_data@{sysio::chain::trim\_data}}
\doxysubsubsection{\texorpdfstring{ind\_in}{ind\_in}}
{\footnotesize\ttfamily \label{structsysio_1_1chain_1_1trim__data_ad36ef41dbc453f96852a0ab9577c645e} 
FILE\texorpdfstring{$\ast$}{*} sysio\+::chain\+::trim\+\_\+data\+::ind\+\_\+in = nullptr}



Definition at line \mbox{\hyperlink{block__log_8hpp_source_l00119}{119}} of file \mbox{\hyperlink{block__log_8hpp_source}{block\+\_\+log.\+hpp}}.

\Hypertarget{structsysio_1_1chain_1_1trim__data_ac74b927870c5603572bd5b5e7be49f24}\index{sysio::chain::trim\_data@{sysio::chain::trim\_data}!index\_file\_name@{index\_file\_name}}
\index{index\_file\_name@{index\_file\_name}!sysio::chain::trim\_data@{sysio::chain::trim\_data}}
\doxysubsubsection{\texorpdfstring{index\_file\_name}{index\_file\_name}}
{\footnotesize\ttfamily \label{structsysio_1_1chain_1_1trim__data_ac74b927870c5603572bd5b5e7be49f24} 
\mbox{\hyperlink{classfc_1_1path}{fc\+::path}} sysio\+::chain\+::trim\+\_\+data\+::index\+\_\+file\+\_\+name}



Definition at line \mbox{\hyperlink{block__log_8hpp_source_l00114}{114}} of file \mbox{\hyperlink{block__log_8hpp_source}{block\+\_\+log.\+hpp}}.

\Hypertarget{structsysio_1_1chain_1_1trim__data_a957dfc1ecb5587c97f7020be201bb4d9}\index{sysio::chain::trim\_data@{sysio::chain::trim\_data}!last\_block@{last\_block}}
\index{last\_block@{last\_block}!sysio::chain::trim\_data@{sysio::chain::trim\_data}}
\doxysubsubsection{\texorpdfstring{last\_block}{last\_block}}
{\footnotesize\ttfamily \label{structsysio_1_1chain_1_1trim__data_a957dfc1ecb5587c97f7020be201bb4d9} 
\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} sysio\+::chain\+::trim\+\_\+data\+::last\+\_\+block = 0}



Definition at line \mbox{\hyperlink{block__log_8hpp_source_l00117}{117}} of file \mbox{\hyperlink{block__log_8hpp_source}{block\+\_\+log.\+hpp}}.

\Hypertarget{structsysio_1_1chain_1_1trim__data_a7e4b371e3182b3a7f14f3ce259e9e85b}\index{sysio::chain::trim\_data@{sysio::chain::trim\_data}!version@{version}}
\index{version@{version}!sysio::chain::trim\_data@{sysio::chain::trim\_data}}
\doxysubsubsection{\texorpdfstring{version}{version}}
{\footnotesize\ttfamily \label{structsysio_1_1chain_1_1trim__data_a7e4b371e3182b3a7f14f3ce259e9e85b} 
\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} sysio\+::chain\+::trim\+\_\+data\+::version = 0}



Definition at line \mbox{\hyperlink{block__log_8hpp_source_l00115}{115}} of file \mbox{\hyperlink{block__log_8hpp_source}{block\+\_\+log.\+hpp}}.



The documentation for this struct was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
libraries/chain/include/sysio/chain/\mbox{\hyperlink{block__log_8hpp}{block\+\_\+log.\+hpp}}\item 
libraries/chain/\mbox{\hyperlink{block__log_8cpp}{block\+\_\+log.\+cpp}}\end{DoxyCompactItemize}
