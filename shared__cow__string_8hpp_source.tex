\doxysection{shared\+\_\+cow\+\_\+string.\+hpp}
\hypertarget{shared__cow__string_8hpp_source}{}\label{shared__cow__string_8hpp_source}\index{libraries/chainbase/include/chainbase/shared\_cow\_string.hpp@{libraries/chainbase/include/chainbase/shared\_cow\_string.hpp}}
\mbox{\hyperlink{shared__cow__string_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00001}00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00003}00003\ \textcolor{preprocessor}{\#include\ <boost/container/container\_fwd.hpp>}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00004}00004\ \textcolor{preprocessor}{\#include\ <boost/interprocess/offset\_ptr.hpp>}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00005}00005\ \textcolor{preprocessor}{\#include\ <boost/interprocess/allocators/allocator.hpp>}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00006}00006\ }
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00007}00007\ \textcolor{preprocessor}{\#include\ <cstddef>}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00008}00008\ \textcolor{preprocessor}{\#include\ <cstring>}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00009}00009\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00010}00010\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00011}00011\ }
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00012}00012\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{pinnable__mapped__file_8hpp}{chainbase/pinnable\_mapped\_file.hpp}}>}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00014}00014\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacechainbase}{chainbase}}\ \{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00015}00015\ }
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00016}00016\ \ \ \ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceboost_1_1interprocess}{bip}}\ =\ \mbox{\hyperlink{namespaceboost_1_1interprocess}{boost::interprocess}};}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00018}\mbox{\hyperlink{classchainbase_1_1shared__cow__string}{00018}}\ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classchainbase_1_1shared__cow__string}{shared\_cow\_string}}\ \{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00019}00019\ \ \ \ \ \ \ \textcolor{keyword}{struct\ }impl\ \{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00020}00020\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ reference\_count;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00021}00021\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ size;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00022}00022\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ data[0];}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00023}00023\ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00024}00024\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00025}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a2d30ded8248991a83e09639540153138}{00025}}\ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a2d30ded8248991a83e09639540153138}{allocator\_type}}\ =\ bip::allocator<char,\ pinnable\_mapped\_file::segment\_manager>;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00026}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a0161ac9cab23857fca70bf21385d9519}{00026}}\ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a0161ac9cab23857fca70bf21385d9519}{iterator}}\ =\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00027}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a4eb7e4ae17891b0d61652646d1000fa3}{00027}}\ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a4eb7e4ae17891b0d61652646d1000fa3}{const\_iterator}}\ =\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00028}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_aad692badc58fa190d6bb1789976d42f4}{00028}}\ \ \ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_aad692badc58fa190d6bb1789976d42f4}{shared\_cow\_string}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a2d30ded8248991a83e09639540153138}{allocator\_type}}\&\ alloc)\ :\ \_data(nullptr),\ \_alloc(alloc)\ \{\}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00029}00029\ \ \ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Iter>}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00030}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a35fcbcdb18f316aac03855170014f5da}{00030}}\ \ \ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a35fcbcdb18f316aac03855170014f5da}{shared\_cow\_string}}(Iter\ begin,\ Iter\ end,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a2d30ded8248991a83e09639540153138}{allocator\_type}}\&\ alloc)\ :\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string}{shared\_cow\_string}}(alloc)\ \{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00031}00031\ \ \ \ \ \ \ \ \ \ std::size\_t\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}}\ =\ std::distance(begin,\ end);}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00032}00032\ \ \ \ \ \ \ \ \ \ impl*\ new\_data\ =\ (impl*)\&*\_alloc.allocate(\textcolor{keyword}{sizeof}(impl)\ +\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}}\ +\ 1);}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00033}00033\ \ \ \ \ \ \ \ \ \ new\_data-\/>reference\_count\ =\ 1;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00034}00034\ \ \ \ \ \ \ \ \ \ new\_data-\/>size\ =\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}};}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00035}00035\ \ \ \ \ \ \ \ \ \ std::copy(begin,\ end,\ new\_data-\/>data);}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00036}00036\ \ \ \ \ \ \ \ \ \ new\_data-\/>data[\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}}]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00037}00037\ \ \ \ \ \ \ \ \ \ \_data\ =\ new\_data;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00038}00038\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00039}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_aa0146654be016214fb534f797d64835a}{00039}}\ \ \ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_aa0146654be016214fb534f797d64835a}{shared\_cow\_string}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ ptr,\ std::size\_t\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a2d30ded8248991a83e09639540153138}{allocator\_type}}\&\ alloc)\ :\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string}{shared\_cow\_string}}(alloc)\ \{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00040}00040\ \ \ \ \ \ \ \ \ \ impl*\ new\_data\ =\ (impl*)\&*\_alloc.allocate(\textcolor{keyword}{sizeof}(impl)\ +\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}}\ +\ 1);}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00041}00041\ \ \ \ \ \ \ \ \ \ new\_data-\/>reference\_count\ =\ 1;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00042}00042\ \ \ \ \ \ \ \ \ \ new\_data-\/>size\ =\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}};}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00043}00043\ \ \ \ \ \ \ \ \ \ std::memcpy(new\_data-\/>data,\ ptr,\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}});}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00044}00044\ \ \ \ \ \ \ \ \ \ new\_data-\/>data[\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}}]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00045}00045\ \ \ \ \ \ \ \ \ \ \_data\ =\ new\_data;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00046}00046\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00047}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a1d58e68247b686173722ef248ad2d0e8}{00047}}\ \ \ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a1d58e68247b686173722ef248ad2d0e8}{shared\_cow\_string}}(std::size\_t\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}},\ boost::container::default\_init\_t,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a2d30ded8248991a83e09639540153138}{allocator\_type}}\&\ alloc)\ :\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string}{shared\_cow\_string}}(alloc)\ \{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00048}00048\ \ \ \ \ \ \ \ \ \ impl*\ new\_data\ =\ (impl*)\&*\_alloc.allocate(\textcolor{keyword}{sizeof}(impl)\ +\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}}\ +\ 1);}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00049}00049\ \ \ \ \ \ \ \ \ \ new\_data-\/>reference\_count\ =\ 1;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00050}00050\ \ \ \ \ \ \ \ \ \ new\_data-\/>size\ =\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}};}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00051}00051\ \ \ \ \ \ \ \ \ \ new\_data-\/>data[\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}}]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00052}00052\ \ \ \ \ \ \ \ \ \ \_data\ =\ new\_data;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00053}00053\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00054}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a509d52bf1c607f5b28ae24f8edb126bc}{00054}}\ \ \ \ \ \ \ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a509d52bf1c607f5b28ae24f8edb126bc}{shared\_cow\_string}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string}{shared\_cow\_string}}\&\ other)\ :\ \_data(other.\_data),\ \_alloc(other.\_alloc)\ \{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00055}00055\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\_data\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00056}00056\ \ \ \ \ \ \ \ \ \ \ \ \ ++\_data-\/>reference\_count;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00057}00057\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00058}00058\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00059}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_adbf80729f1d7caf9a208f8454d38b549}{00059}}\ \ \ \ \ \ \ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_adbf80729f1d7caf9a208f8454d38b549}{shared\_cow\_string}}(\mbox{\hyperlink{classchainbase_1_1shared__cow__string}{shared\_cow\_string}}\&\&\ other)\ :\ \_data(other.\_data),\ \_alloc(other.\_alloc)\ \{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00060}00060\ \ \ \ \ \ \ \ \ \ other.\_data\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00061}00061\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00062}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a1d2d6223fbebf5ad52fefd24e7caae8c}{00062}}\ \ \ \ \ \ \ \mbox{\hyperlink{classchainbase_1_1shared__cow__string}{shared\_cow\_string}}\&\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a1d2d6223fbebf5ad52fefd24e7caae8c}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string}{shared\_cow\_string}}\&\ other)\ \{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00063}00063\ \ \ \ \ \ \ \ \ \ *\textcolor{keyword}{this}\ =\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string}{shared\_cow\_string}}\{other\};}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00064}00064\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00065}00065\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00066}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_ad1a9481bb40c031617e55f643249cb91}{00066}}\ \ \ \ \ \ \ \mbox{\hyperlink{classchainbase_1_1shared__cow__string}{shared\_cow\_string}}\&\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_ad1a9481bb40c031617e55f643249cb91}{operator=}}(\mbox{\hyperlink{classchainbase_1_1shared__cow__string}{shared\_cow\_string}}\&\&\ other)\ \{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00067}00067\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{this}\ !=\ \&other)\ \{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00068}00068\ \ \ \ \ \ \ \ \ \ \ \ \ dec\_refcount();}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00069}00069\ \ \ \ \ \ \ \ \ \ \ \ \ \_data\ =\ other.\_data;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00070}00070\ \ \ \ \ \ \ \ \ \ \ \ \ other.\_data\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00071}00071\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00072}00072\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00073}00073\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00074}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_af781d12486b3a65b8aa2829c9aad286d}{00074}}\ \ \ \ \ \ \ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_af781d12486b3a65b8aa2829c9aad286d}{\string~shared\_cow\_string}}()\ \{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00075}00075\ \ \ \ \ \ \ \ \ \ dec\_refcount();}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00076}00076\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00077}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_abeca7dbdf0866a5b0113e2b26a7cf5b9}{00077}}\ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_abeca7dbdf0866a5b0113e2b26a7cf5b9}{resize}}(std::size\_t\ new\_size,\ boost::container::default\_init\_t)\ \{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00078}00078\ \ \ \ \ \ \ \ \ \ impl*\ new\_data\ =\ (impl*)\&*\_alloc.allocate(\textcolor{keyword}{sizeof}(impl)\ +\ new\_size\ +\ 1);}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00079}00079\ \ \ \ \ \ \ \ \ \ new\_data-\/>reference\_count\ =\ 1;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00080}00080\ \ \ \ \ \ \ \ \ \ new\_data-\/>size\ =\ new\_size;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00081}00081\ \ \ \ \ \ \ \ \ \ new\_data-\/>data[new\_size]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00082}00082\ \ \ \ \ \ \ \ \ \ dec\_refcount();}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00083}00083\ \ \ \ \ \ \ \ \ \ \_data\ =\ new\_data;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00084}00084\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00085}00085\ \ \ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00086}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a6158f8f10a5b21ac57a3fb3bc9d213f2}{00086}}\ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a6158f8f10a5b21ac57a3fb3bc9d213f2}{resize\_and\_fill}}(std::size\_t\ new\_size,\ F\&\&\ \mbox{\hyperlink{_x02-_disabled_macros_8cpp_ae28240b98d91d6eb7da702b770490f39}{f}})\ \{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00087}00087\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_abeca7dbdf0866a5b0113e2b26a7cf5b9}{resize}}(new\_size,\ boost::container::default\_init);}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00088}00088\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}F\&\&\textcolor{keyword}{>}(\mbox{\hyperlink{_x02-_disabled_macros_8cpp_ae28240b98d91d6eb7da702b770490f39}{f}})(\_data-\/>data,\ new\_size);}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00089}00089\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00090}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a88d38547d7992fc1d4debb9ff01510e2}{00090}}\ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a88d38547d7992fc1d4debb9ff01510e2}{assign}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ ptr,\ std::size\_t\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}})\ \{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00091}00091\ \ \ \ \ \ \ \ \ \ impl*\ new\_data\ =\ (impl*)\&*\_alloc.allocate(\textcolor{keyword}{sizeof}(impl)\ +\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}}\ +\ 1);}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00092}00092\ \ \ \ \ \ \ \ \ \ new\_data-\/>reference\_count\ =\ 1;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00093}00093\ \ \ \ \ \ \ \ \ \ new\_data-\/>size\ =\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}};}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00094}00094\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}})}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00095}00095\ \ \ \ \ \ \ \ \ \ \ \ \ std::memcpy(new\_data-\/>data,\ ptr,\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}});}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00096}00096\ \ \ \ \ \ \ \ \ \ new\_data-\/>data[\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}}]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00097}00097\ \ \ \ \ \ \ \ \ \ dec\_refcount();}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00098}00098\ \ \ \ \ \ \ \ \ \ \_data\ =\ new\_data;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00099}00099\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00100}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a496335ca85b54bc66a088a786dbf4dfb}{00100}}\ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a496335ca85b54bc66a088a786dbf4dfb}{assign}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*\ ptr,\ std::size\_t\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}})\ \{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00101}00101\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a88d38547d7992fc1d4debb9ff01510e2}{assign}}((\textcolor{keywordtype}{char}*)ptr,\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}});}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00102}00102\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00103}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_aa7b1bac206e0abc7e9ea9d642eb0b5b3}{00103}}\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_aa7b1bac206e0abc7e9ea9d642eb0b5b3}{data}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00104}00104\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_data)\ \textcolor{keywordflow}{return}\ \_data-\/>data;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00105}00105\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00106}00106\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00107}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{00107}}\ \ \ \ \ \ \ std::size\_t\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00108}00108\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_data)\ \textcolor{keywordflow}{return}\ \_data-\/>size;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00109}00109\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00110}00110\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00111}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a2431c3cb5d64b4c9027aa68ed2538de4}{00111}}\ \ \ \ \ \ \ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a4eb7e4ae17891b0d61652646d1000fa3}{const\_iterator}}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a2431c3cb5d64b4c9027aa68ed2538de4}{begin}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_aa7b1bac206e0abc7e9ea9d642eb0b5b3}{data}}();\ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00112}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a42ed2534f75651d4ff402a6e488a1dbe}{00112}}\ \ \ \ \ \ \ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a4eb7e4ae17891b0d61652646d1000fa3}{const\_iterator}}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a42ed2534f75651d4ff402a6e488a1dbe}{end}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00113}00113\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_data)\ \textcolor{keywordflow}{return}\ \_data-\/>data\ +\ \_data-\/>size;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00114}00114\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00115}00115\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00116}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_aa1e55cfc50b9eaf63ac9c4241c31306c}{00116}}\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_aa1e55cfc50b9eaf63ac9c4241c31306c}{compare}}(std::size\_t\ start,\ std::size\_t\ \mbox{\hyperlink{gmock__stress__test_8cc_afd9db40e3361ae09188795e8cbe19752}{count}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ other,\ std::size\_t\ other\_size)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00117}00117\ \ \ \ \ \ \ \ \ \ std::size\_t\ sz\ =\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}}();}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00118}00118\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(start\ >\ sz)\ BOOST\_THROW\_EXCEPTION(std::out\_of\_range\{\textcolor{stringliteral}{"{}shared\_cow\_string::compare"{}}\});}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00119}00119\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gmock__stress__test_8cc_afd9db40e3361ae09188795e8cbe19752}{count}}\ =\ std::min(\mbox{\hyperlink{gmock__stress__test_8cc_afd9db40e3361ae09188795e8cbe19752}{count}},\ sz\ -\/\ start);}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00120}00120\ \ \ \ \ \ \ \ \ \ std::size\_t\ cmp\_len\ =\ std::min(\mbox{\hyperlink{gmock__stress__test_8cc_afd9db40e3361ae09188795e8cbe19752}{count}},\ other\_size);}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00121}00121\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ start\_ptr\ =\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_aa7b1bac206e0abc7e9ea9d642eb0b5b3}{data}}()\ +\ start;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00122}00122\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ result\ =\ std::char\_traits<char>::compare(start\_ptr,\ other,\ cmp\_len);}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00123}00123\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ !=\ 0)\ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00124}00124\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gmock__stress__test_8cc_afd9db40e3361ae09188795e8cbe19752}{count}}\ <\ other\_size)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00125}00125\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\mbox{\hyperlink{gmock__stress__test_8cc_afd9db40e3361ae09188795e8cbe19752}{count}}\ >\ other\_size)\ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00126}00126\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00127}00127\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00128}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a08cfa4e54a022883608b0f242ded2f1a}{00128}}\ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a08cfa4e54a022883608b0f242ded2f1a}{operator==}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string}{shared\_cow\_string}}\&\ rhs)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00129}00129\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}}()\ ==\ rhs.\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}}()\ \&\&\ std::memcmp(\mbox{\hyperlink{classchainbase_1_1shared__cow__string_aa7b1bac206e0abc7e9ea9d642eb0b5b3}{data}}(),\ rhs.\mbox{\hyperlink{classchainbase_1_1shared__cow__string_aa7b1bac206e0abc7e9ea9d642eb0b5b3}{data}}(),\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a3b3c57c0d2ee027bb70beb283be2a0f2}{size}}())\ ==\ 0;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00130}00130\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00131}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_ad84af72d342a23e7c1c040d7d7868c02}{00131}}\ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_ad84af72d342a23e7c1c040d7d7868c02}{operator!=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string}{shared\_cow\_string}}\&\ rhs)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ !(*\textcolor{keyword}{this}\ ==\ rhs);\ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00132}\mbox{\hyperlink{classchainbase_1_1shared__cow__string_a404330337dd73ab339cd10047a802918}{00132}}\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a2d30ded8248991a83e09639540153138}{allocator\_type}}\&\ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a404330337dd73ab339cd10047a802918}{get\_allocator}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \_alloc;\ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00133}00133\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00134}00134\ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ dec\_refcount()\ \{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00135}00135\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\_data\ \&\&\ -\/-\/\_data-\/>reference\_count\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00136}00136\ \ \ \ \ \ \ \ \ \ \ \ \ \_alloc.deallocate((\textcolor{keywordtype}{char}*)\&*\_data,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classchainbase_1_1shared__cow__string}{shared\_cow\_string}})\ +\ \_data-\/>size\ +\ 1);}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00137}00137\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00138}00138\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00139}00139\ \ \ \ \ \ \ bip::offset\_ptr<impl>\ \_data;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00140}00140\ \ \ \ \ \ \ \mbox{\hyperlink{classchainbase_1_1shared__cow__string_a2d30ded8248991a83e09639540153138}{allocator\_type}}\ \_alloc;}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00141}00141\ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00142}00142\ }
\DoxyCodeLine{\Hypertarget{shared__cow__string_8hpp_source_l00143}00143\ \}\ \ \textcolor{comment}{//\ namepsace\ chainbase}}

\end{DoxyCode}
