\doxysection{websocketpp\+::connection\texorpdfstring{$<$}{<} config \texorpdfstring{$>$}{>} Class Template Reference}
\hypertarget{classwebsocketpp_1_1connection}{}\label{classwebsocketpp_1_1connection}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}


Represents an individual Web\+Socket connection.  




{\ttfamily \#include $<$connection.\+hpp$>$}



Inheritance diagram for websocketpp\+::connection\texorpdfstring{$<$}{<} config \texorpdfstring{$>$}{>}\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=330pt]{classwebsocketpp_1_1connection__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for websocketpp\+::connection\texorpdfstring{$<$}{<} config \texorpdfstring{$>$}{>}\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=330pt]{classwebsocketpp_1_1connection__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
typedef \mbox{\hyperlink{classwebsocketpp_1_1connection}{connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$ \mbox{\hyperlink{classwebsocketpp_1_1connection_acab063acca678826cf2786aca15cc395}{type}}
\begin{DoxyCompactList}\small\item\em Type of this connection. \end{DoxyCompactList}\item 
typedef lib\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classwebsocketpp_1_1connection_acab063acca678826cf2786aca15cc395}{type}} $>$ \mbox{\hyperlink{classwebsocketpp_1_1connection_af5839adca921ce08ea3ca3e634155e86}{ptr}}
\begin{DoxyCompactList}\small\item\em Type of a shared pointer to this connection. \end{DoxyCompactList}\item 
typedef lib\+::weak\+\_\+ptr$<$ \mbox{\hyperlink{classwebsocketpp_1_1connection_acab063acca678826cf2786aca15cc395}{type}} $>$ \mbox{\hyperlink{classwebsocketpp_1_1connection_a96d3321aee803b0c23f4a72e6c5cc875}{weak\+\_\+ptr}}
\begin{DoxyCompactList}\small\item\em Type of a weak pointer to this connection. \end{DoxyCompactList}\item 
typedef config\+::concurrency\+\_\+type \mbox{\hyperlink{classwebsocketpp_1_1connection_a084a79f735c53d51c876fbc42d960f76}{concurrency\+\_\+type}}
\begin{DoxyCompactList}\small\item\em Type of the concurrency component of this connection. \end{DoxyCompactList}\item 
typedef config\+::alog\+\_\+type \mbox{\hyperlink{classwebsocketpp_1_1connection_a3e19c977ae062a790e92fdeb67b459ae}{alog\+\_\+type}}
\begin{DoxyCompactList}\small\item\em Type of the access logging policy. \end{DoxyCompactList}\item 
typedef config\+::elog\+\_\+type \mbox{\hyperlink{classwebsocketpp_1_1connection_a11c1430d51d95862725fd92d176b4ec8}{elog\+\_\+type}}
\begin{DoxyCompactList}\small\item\em Type of the error logging policy. \end{DoxyCompactList}\item 
typedef config\+::transport\+\_\+type\+::transport\+\_\+con\+\_\+type \mbox{\hyperlink{classwebsocketpp_1_1connection_ae5eb5c1a01276a32aa43ebc541c06650}{transport\+\_\+con\+\_\+type}}
\begin{DoxyCompactList}\small\item\em Type of the transport component of this connection. \end{DoxyCompactList}\item 
typedef transport\+\_\+con\+\_\+type\+::ptr \mbox{\hyperlink{classwebsocketpp_1_1connection_a94c5cd12bf62315d2d64b1b9d426a467}{transport\+\_\+con\+\_\+ptr}}
\begin{DoxyCompactList}\small\item\em Type of a shared pointer to the transport component of this connection. \end{DoxyCompactList}\item 
typedef lib\+::function$<$ void(\mbox{\hyperlink{classwebsocketpp_1_1connection_af5839adca921ce08ea3ca3e634155e86}{ptr}})$>$ \mbox{\hyperlink{classwebsocketpp_1_1connection_a0dafdb1188f82418a8fd33a3638496ea}{termination\+\_\+handler}}
\item 
typedef concurrency\+\_\+type\+::scoped\+\_\+lock\+\_\+type \mbox{\hyperlink{classwebsocketpp_1_1connection_a98eee129ad1f7e30c059c1073d516495}{scoped\+\_\+lock\+\_\+type}}
\item 
typedef concurrency\+\_\+type\+::mutex\+\_\+type \mbox{\hyperlink{classwebsocketpp_1_1connection_af9985bdbd086030ef65243aa7563bc4c}{mutex\+\_\+type}}
\item 
typedef config\+::request\+\_\+type \mbox{\hyperlink{classwebsocketpp_1_1connection_afd1de69db1764ab30dc4f30bb84a6565}{request\+\_\+type}}
\item 
typedef config\+::response\+\_\+type \mbox{\hyperlink{classwebsocketpp_1_1connection_a3057f017dd336275028a1cab5a7a28a6}{response\+\_\+type}}
\item 
typedef config\+::message\+\_\+type \mbox{\hyperlink{classwebsocketpp_1_1connection_a2f170ce183202d226bd070cc893d053b}{message\+\_\+type}}
\item 
typedef message\+\_\+type\+::ptr \mbox{\hyperlink{classwebsocketpp_1_1connection_a470a4dfe286833dc14e0906eb6e858a5}{message\+\_\+ptr}}
\item 
typedef config\+::con\+\_\+msg\+\_\+manager\+\_\+type \mbox{\hyperlink{classwebsocketpp_1_1connection_a75e62887c79026aedab18c8272726417}{con\+\_\+msg\+\_\+manager\+\_\+type}}
\item 
typedef con\+\_\+msg\+\_\+manager\+\_\+type\+::ptr \mbox{\hyperlink{classwebsocketpp_1_1connection_a67a82be4c089d29e146be36509d81ec0}{con\+\_\+msg\+\_\+manager\+\_\+ptr}}
\item 
typedef config\+::rng\+\_\+type \mbox{\hyperlink{classwebsocketpp_1_1connection_a5e668171dd8bfdd8b6e46d17b4134047}{rng\+\_\+type}}
\begin{DoxyCompactList}\small\item\em Type of RNG. \end{DoxyCompactList}\item 
typedef \mbox{\hyperlink{classwebsocketpp_1_1processor_1_1processor}{processor\+::processor}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$ \mbox{\hyperlink{classwebsocketpp_1_1connection_af765e8a2b035f16cae8cf26c727f0bb5}{processor\+\_\+type}}
\item 
typedef lib\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classwebsocketpp_1_1connection_af765e8a2b035f16cae8cf26c727f0bb5}{processor\+\_\+type}} $>$ \mbox{\hyperlink{classwebsocketpp_1_1connection_a4014eb117e056fcdd0a3ff1c42743209}{processor\+\_\+ptr}}
\item 
typedef lib\+::function$<$ void(\mbox{\hyperlink{namespacewebsocketpp_a6b3d26a10ee7229b84b776786332631d}{connection\+\_\+hdl}}, \mbox{\hyperlink{classwebsocketpp_1_1connection_a470a4dfe286833dc14e0906eb6e858a5}{message\+\_\+ptr}})$>$ \mbox{\hyperlink{classwebsocketpp_1_1connection_a78988e5609b6ccdbd0949d5cd5fe440a}{message\+\_\+handler}}
\item 
typedef transport\+\_\+con\+\_\+type\+::timer\+\_\+ptr \mbox{\hyperlink{classwebsocketpp_1_1connection_a4c4c89218537431ab0831d1f5d356a80}{timer\+\_\+ptr}}
\begin{DoxyCompactList}\small\item\em Type of a pointer to a transport timer handle. \end{DoxyCompactList}\item 
typedef \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508d}{session\+::internal\+\_\+state\+::value}} \mbox{\hyperlink{classwebsocketpp_1_1connection_ad18f126ff904fec9f2983681902490c1}{istate\+\_\+type}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classwebsocketpp_1_1connection_a525947d8d33ee1e410d02706246ffe94}{connection}} (bool p\+\_\+is\+\_\+server, std\+::string const \&ua, \mbox{\hyperlink{classwebsocketpp_1_1connection_a3e19c977ae062a790e92fdeb67b459ae}{alog\+\_\+type}} \&alog, \mbox{\hyperlink{classwebsocketpp_1_1connection_a11c1430d51d95862725fd92d176b4ec8}{elog\+\_\+type}} \&\mbox{\hyperlink{logger_8hpp_a9e3cdbaecd5a34b42956e888f7326fad}{elog}}, \mbox{\hyperlink{classwebsocketpp_1_1connection_a5e668171dd8bfdd8b6e46d17b4134047}{rng\+\_\+type}} \&rng)
\item 
\mbox{\hyperlink{classwebsocketpp_1_1connection_af5839adca921ce08ea3ca3e634155e86}{ptr}} \mbox{\hyperlink{classwebsocketpp_1_1connection_a01a5af7dc2f35ff8f15da8c2cf3a3b02}{get\+\_\+shared}} ()
\begin{DoxyCompactList}\small\item\em Get a shared pointer to this component. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_ab11271e7778fbfde3a1987fca729af6d}{set\+\_\+open\+\_\+handler}} (\mbox{\hyperlink{namespacewebsocketpp_a53c8b4ae59cf13b5f883b119bbd14d72}{open\+\_\+handler}} h)
\begin{DoxyCompactList}\small\item\em Set open handler. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a25fb7096431b1d7350c34035db7ed9a4}{set\+\_\+close\+\_\+handler}} (\mbox{\hyperlink{namespacewebsocketpp_a27acb39e01cbca06ccc4e4e8eb8f877d}{close\+\_\+handler}} h)
\begin{DoxyCompactList}\small\item\em Set close handler. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a8d2515bc6821f90c531efe77c8a32569}{set\+\_\+fail\+\_\+handler}} (\mbox{\hyperlink{namespacewebsocketpp_a5bb2e61cfe649b2e012f1a2c5693a4d5}{fail\+\_\+handler}} h)
\begin{DoxyCompactList}\small\item\em Set fail handler. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a6e21e63abbbba88f818742e9da25fa8b}{set\+\_\+ping\+\_\+handler}} (\mbox{\hyperlink{namespacewebsocketpp_a9dcaaa7370865f1bcacb55ae715793ef}{ping\+\_\+handler}} h)
\begin{DoxyCompactList}\small\item\em Set ping handler. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a298795eaa6d554ca5114ff23346d47a9}{set\+\_\+pong\+\_\+handler}} (\mbox{\hyperlink{namespacewebsocketpp_a1798d54e6d98a481cf870091af84bc1f}{pong\+\_\+handler}} h)
\begin{DoxyCompactList}\small\item\em Set pong handler. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a6baa576fffc7af7685cf75894d634fb7}{set\+\_\+pong\+\_\+timeout\+\_\+handler}} (\mbox{\hyperlink{namespacewebsocketpp_a2c5925a111b9e553efebea35d5ea155f}{pong\+\_\+timeout\+\_\+handler}} h)
\begin{DoxyCompactList}\small\item\em Set pong timeout handler. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_aa8edc6e8ea1b72f84973bed0a20ad365}{set\+\_\+interrupt\+\_\+handler}} (\mbox{\hyperlink{namespacewebsocketpp_a55f6947df7673a9de3c44b6bd5d4a82a}{interrupt\+\_\+handler}} h)
\begin{DoxyCompactList}\small\item\em Set interrupt handler. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a78c680623660b0442394af6b45c46c23}{set\+\_\+http\+\_\+handler}} (\mbox{\hyperlink{namespacewebsocketpp_a37bc4d5b3b21d3bb494d8a23236315d2}{http\+\_\+handler}} h)
\begin{DoxyCompactList}\small\item\em Set http handler. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_aa28096d051f5639d7b01954845fc054c}{set\+\_\+validate\+\_\+handler}} (\mbox{\hyperlink{namespacewebsocketpp_ae28f3fed86a59b1998746694f3d4edbd}{validate\+\_\+handler}} h)
\begin{DoxyCompactList}\small\item\em Set validate handler. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a107e754227c828582779b906654743fe}{set\+\_\+message\+\_\+handler}} (\mbox{\hyperlink{classwebsocketpp_1_1connection_a78988e5609b6ccdbd0949d5cd5fe440a}{message\+\_\+handler}} h)
\begin{DoxyCompactList}\small\item\em Set message handler. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_ad5a666fe1144dc68b1bae3bcc615e1ed}{set\+\_\+open\+\_\+handshake\+\_\+timeout}} (long dur)
\begin{DoxyCompactList}\small\item\em Set open handshake timeout. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a3bf932388a128a7b719c45b945bffaad}{set\+\_\+close\+\_\+handshake\+\_\+timeout}} (long dur)
\begin{DoxyCompactList}\small\item\em Set close handshake timeout. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_ab9a905ac6a4f0f8546011b8f8a531563}{set\+\_\+pong\+\_\+timeout}} (long dur)
\begin{DoxyCompactList}\small\item\em Set pong timeout. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{classwebsocketpp_1_1connection_af7739a5097ae6562bc9b0880731a2857}{get\+\_\+max\+\_\+message\+\_\+size}} () const
\begin{DoxyCompactList}\small\item\em Get maximum message size. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a522286bf83373f87ddebf93b732abffc}{set\+\_\+max\+\_\+message\+\_\+size}} (size\+\_\+t new\+\_\+value)
\begin{DoxyCompactList}\small\item\em Set maximum message size. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{classwebsocketpp_1_1connection_a9a050215a9f1d7652bcd8c543ae5f38c}{get\+\_\+max\+\_\+http\+\_\+body\+\_\+size}} () const
\begin{DoxyCompactList}\small\item\em Get maximum HTTP message body size. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_ad2a5b06ad88f5bcdd06fcabaae3323bc}{set\+\_\+max\+\_\+http\+\_\+body\+\_\+size}} (size\+\_\+t new\+\_\+value)
\begin{DoxyCompactList}\small\item\em Set maximum HTTP message body size. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{classwebsocketpp_1_1connection_a41a23575fcdad7f8afe25b2fabe12593}{get\+\_\+buffered\+\_\+amount}} () const
\begin{DoxyCompactList}\small\item\em Get the size of the outgoing write buffer (in payload bytes) \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{classwebsocketpp_1_1connection_aaaad6dc1c81fc944593f529575b67d96}{buffered\+\_\+amount}} () const
\begin{DoxyCompactList}\small\item\em Get the size of the outgoing write buffer (in payload bytes) \end{DoxyCompactList}\item 
lib\+::error\+\_\+code \mbox{\hyperlink{classwebsocketpp_1_1connection_af3f96a962ed7a271a00e85ba4df2db45}{send}} (std\+::string const \&payload, \mbox{\hyperlink{namespacewebsocketpp_1_1frame_1_1opcode_ae68711643096dfc4af6d66ade3f9fd5e}{frame\+::opcode\+::value}} \mbox{\hyperlink{unionop}{op}}=\mbox{\hyperlink{namespacewebsocketpp_1_1frame_1_1opcode_ae68711643096dfc4af6d66ade3f9fd5ea6b65f28626b19b2eef447744c564e727}{frame\+::opcode\+::text}})
\begin{DoxyCompactList}\small\item\em Create a message and then add it to the outgoing send queue. \end{DoxyCompactList}\item 
lib\+::error\+\_\+code \mbox{\hyperlink{classwebsocketpp_1_1connection_a607fc1d40a2cf994ccc7173a94a2774d}{send}} (void const \texorpdfstring{$\ast$}{*}payload, size\+\_\+t \mbox{\hyperlink{yubihsm__pkcs11_8c_a7360b55975153b822efc5217b7734e6a}{len}}, \mbox{\hyperlink{namespacewebsocketpp_1_1frame_1_1opcode_ae68711643096dfc4af6d66ade3f9fd5e}{frame\+::opcode\+::value}} \mbox{\hyperlink{unionop}{op}}=\mbox{\hyperlink{namespacewebsocketpp_1_1frame_1_1opcode_ae68711643096dfc4af6d66ade3f9fd5eabe7c19fe7e9744d6a0f041e4c99f120f}{frame\+::opcode\+::binary}})
\begin{DoxyCompactList}\small\item\em Send a message (raw array overload) \end{DoxyCompactList}\item 
lib\+::error\+\_\+code \mbox{\hyperlink{classwebsocketpp_1_1connection_a29900da403dbafab8095c0989104be90}{send}} (\mbox{\hyperlink{classwebsocketpp_1_1connection_a470a4dfe286833dc14e0906eb6e858a5}{message\+\_\+ptr}} msg)
\begin{DoxyCompactList}\small\item\em Add a message to the outgoing send queue. \end{DoxyCompactList}\item 
lib\+::error\+\_\+code \mbox{\hyperlink{classwebsocketpp_1_1connection_a12bbbc93d414c65492ffb2c4a12f05a8}{interrupt}} ()
\begin{DoxyCompactList}\small\item\em Asyncronously invoke handler\+::on\+\_\+inturrupt. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a0b438ac986b73c99907515eeac6dc45f}{handle\+\_\+interrupt}} ()
\begin{DoxyCompactList}\small\item\em Transport inturrupt callback. \end{DoxyCompactList}\item 
lib\+::error\+\_\+code \mbox{\hyperlink{classwebsocketpp_1_1connection_ad6a4a25a18ec61d2a36a149a3d92ab72}{pause\+\_\+reading}} ()
\begin{DoxyCompactList}\small\item\em Pause reading of new data. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a5887284ea346efd7b5cc43519bfd84d5}{handle\+\_\+pause\+\_\+reading}} ()
\begin{DoxyCompactList}\small\item\em Pause reading callback. \end{DoxyCompactList}\item 
lib\+::error\+\_\+code \mbox{\hyperlink{classwebsocketpp_1_1connection_a355b5e155ba53071b06fa8a6dfab9be2}{resume\+\_\+reading}} ()
\begin{DoxyCompactList}\small\item\em Resume reading of new data. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_adb5b479b7d66eb289390b26d12332d84}{handle\+\_\+resume\+\_\+reading}} ()
\begin{DoxyCompactList}\small\item\em Resume reading callback. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a21c8dc6badfaff3aaee1434625c09b04}{ping}} (std\+::string const \&payload)
\begin{DoxyCompactList}\small\item\em Send a ping. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a6766e2f31adc6843a983551b21683b73}{ping}} (std\+::string const \&payload, lib\+::error\+\_\+code \&ec)
\begin{DoxyCompactList}\small\item\em exception free variant of ping \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_af10cbbbfe16ef1cc6f45614582c9d28f}{handle\+\_\+pong\+\_\+timeout}} (std\+::string payload, lib\+::error\+\_\+code const \&ec)
\begin{DoxyCompactList}\small\item\em Utility method that gets called back when the ping timer expires. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_aa8684fcfd9a57466ae1b52e36b834408}{pong}} (std\+::string const \&payload)
\begin{DoxyCompactList}\small\item\em Send a pong. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a837dcb8f1214f08b92e7ae7489bfa180}{pong}} (std\+::string const \&payload, lib\+::error\+\_\+code \&ec)
\begin{DoxyCompactList}\small\item\em exception free variant of pong \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_ae718e4fa8b2c37757d8abd71dae07dc9}{close}} (\mbox{\hyperlink{namespacewebsocketpp_1_1close_1_1status_a8614a5c4733d708e2d2a32191c5bef84}{close\+::status\+::value}} const code, std\+::string const \&reason)
\begin{DoxyCompactList}\small\item\em Close the connection. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a436058fe88b1ba31080cec2a464634ae}{close}} (\mbox{\hyperlink{namespacewebsocketpp_1_1close_1_1status_a8614a5c4733d708e2d2a32191c5bef84}{close\+::status\+::value}} const code, std\+::string const \&reason, lib\+::error\+\_\+code \&ec)
\begin{DoxyCompactList}\small\item\em exception free variant of close \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classwebsocketpp_1_1connection_a38d87e9ef3c4514fcd72457a04c31260}{get\+\_\+secure}} () const
\begin{DoxyCompactList}\small\item\em Returns the secure flag from the connection URI. \end{DoxyCompactList}\item 
std\+::string const \& \mbox{\hyperlink{classwebsocketpp_1_1connection_a47e91744f959876b9fef4b18b04a809a}{get\+\_\+host}} () const
\begin{DoxyCompactList}\small\item\em Returns the host component of the connection URI. \end{DoxyCompactList}\item 
std\+::string const \& \mbox{\hyperlink{classwebsocketpp_1_1connection_a52ad47e67e1327e95d1572e04173a409}{get\+\_\+resource}} () const
\begin{DoxyCompactList}\small\item\em Returns the resource component of the connection URI. \end{DoxyCompactList}\item 
\mbox{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}} \mbox{\hyperlink{classwebsocketpp_1_1connection_af6651a691ee345daf5cfd31b875965ab}{get\+\_\+port}} () const
\begin{DoxyCompactList}\small\item\em Returns the port component of the connection URI. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacewebsocketpp_aae370ea5ac83a8ece7712cb39fc23f5b}{uri\+\_\+ptr}} \mbox{\hyperlink{classwebsocketpp_1_1connection_a63f906681e9363f40dce7d2b65444a41}{get\+\_\+uri}} () const
\begin{DoxyCompactList}\small\item\em Gets the connection URI. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_ac5c81acf3be998662a3500a9be2c4d38}{set\+\_\+uri}} (\mbox{\hyperlink{namespacewebsocketpp_aae370ea5ac83a8ece7712cb39fc23f5b}{uri\+\_\+ptr}} \mbox{\hyperlink{classwebsocketpp_1_1uri}{uri}})
\begin{DoxyCompactList}\small\item\em Sets the connection URI. \end{DoxyCompactList}\item 
std\+::string const \& \mbox{\hyperlink{classwebsocketpp_1_1connection_ae8577184f6e4d82955cc38e1a9f8164b}{get\+\_\+subprotocol}} () const
\begin{DoxyCompactList}\small\item\em Gets the negotated subprotocol. \end{DoxyCompactList}\item 
std\+::vector$<$ std\+::string $>$ const \& \mbox{\hyperlink{classwebsocketpp_1_1connection_ae0f196cb11d4a38ef59f2173424a4d51}{get\+\_\+requested\+\_\+subprotocols}} () const
\begin{DoxyCompactList}\small\item\em Gets all of the subprotocols requested by the client. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a36462b406f973e16d3107e786c6b9172}{add\+\_\+subprotocol}} (std\+::string const \&request, lib\+::error\+\_\+code \&ec)
\begin{DoxyCompactList}\small\item\em Adds the given subprotocol string to the request list (exception free) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a37a41672dd87714eb045fd989f98cd26}{add\+\_\+subprotocol}} (std\+::string const \&request)
\begin{DoxyCompactList}\small\item\em Adds the given subprotocol string to the request list. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a53e9587a711e543ed353e8ecec13d44c}{select\+\_\+subprotocol}} (std\+::string const \&\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}}, lib\+::error\+\_\+code \&ec)
\begin{DoxyCompactList}\small\item\em Select a subprotocol to use (exception free) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a96b37fbab88dfb78b1641c0c30710243}{select\+\_\+subprotocol}} (std\+::string const \&\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}})
\begin{DoxyCompactList}\small\item\em Select a subprotocol to use. \end{DoxyCompactList}\item 
std\+::string const \& \mbox{\hyperlink{classwebsocketpp_1_1connection_a542dd013907c3aeb2dbb01d1d631a492}{get\+\_\+request\+\_\+header}} (std\+::string const \&key) const
\begin{DoxyCompactList}\small\item\em Retrieve a request header. \end{DoxyCompactList}\item 
std\+::string const \& \mbox{\hyperlink{classwebsocketpp_1_1connection_a187c640f1352e74a00c0f8b6177da94a}{get\+\_\+request\+\_\+body}} () const
\begin{DoxyCompactList}\small\item\em Retrieve a request body. \end{DoxyCompactList}\item 
std\+::string const \& \mbox{\hyperlink{classwebsocketpp_1_1connection_a72e0c94609844078fc611716c39791de}{get\+\_\+response\+\_\+header}} (std\+::string const \&key) const
\begin{DoxyCompactList}\small\item\em Retrieve a response header. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacewebsocketpp_1_1http_1_1status__code_ae0d61c309e053ee5673517b54e2886c6}{http\+::status\+\_\+code\+::value}} \mbox{\hyperlink{classwebsocketpp_1_1connection_a32a160dedfda82a678bc61a18fda12b3}{get\+\_\+response\+\_\+code}} () const
\begin{DoxyCompactList}\small\item\em Get response HTTP status code. \end{DoxyCompactList}\item 
std\+::string const \& \mbox{\hyperlink{classwebsocketpp_1_1connection_a7a78b53d68e30ca9fa4df7ff8dfd38ea}{get\+\_\+response\+\_\+msg}} () const
\begin{DoxyCompactList}\small\item\em Get response HTTP status message. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a96d445ff0cc75b854c4500e93a054acb}{set\+\_\+status}} (\mbox{\hyperlink{namespacewebsocketpp_1_1http_1_1status__code_ae0d61c309e053ee5673517b54e2886c6}{http\+::status\+\_\+code\+::value}} code)
\begin{DoxyCompactList}\small\item\em Set response status code and message. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a97b4513339167df8653a11ef3ccc65b1}{set\+\_\+status}} (\mbox{\hyperlink{namespacewebsocketpp_1_1http_1_1status__code_ae0d61c309e053ee5673517b54e2886c6}{http\+::status\+\_\+code\+::value}} code, std\+::string const \&msg)
\begin{DoxyCompactList}\small\item\em Set response status code and message. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a40bb318c3b9294018d217d0271a7b3da}{set\+\_\+body}} (std\+::string const \&\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}})
\begin{DoxyCompactList}\small\item\em Set response body content. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_ac11c93ff0060eaf24c16764c5ff906c9}{set\+\_\+body}} (std\+::string \&\&\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}})
\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_af8cb78acc61b8a3d59f6162cdba6318b}{append\+\_\+header}} (std\+::string const \&key, std\+::string const \&val)
\begin{DoxyCompactList}\small\item\em Append a header. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a96e4adcdb9b3473ca96e2aac27ff7147}{replace\+\_\+header}} (std\+::string const \&key, std\+::string const \&val)
\begin{DoxyCompactList}\small\item\em Replace a header. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a63094895d9dcfb4d10974ae97ea319a1}{remove\+\_\+header}} (std\+::string const \&key)
\begin{DoxyCompactList}\small\item\em Remove a header. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classwebsocketpp_1_1connection_afd1de69db1764ab30dc4f30bb84a6565}{request\+\_\+type}} const \& \mbox{\hyperlink{classwebsocketpp_1_1connection_ac7986d48af3a57655554f10a4a04421c}{get\+\_\+request}} () const
\begin{DoxyCompactList}\small\item\em Get request object. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classwebsocketpp_1_1connection_a3057f017dd336275028a1cab5a7a28a6}{response\+\_\+type}} const \& \mbox{\hyperlink{classwebsocketpp_1_1connection_a4fc82f2ef276a8bfaf64bb168fb215ca}{get\+\_\+response}} () const
\begin{DoxyCompactList}\small\item\em Get response object. \end{DoxyCompactList}\item 
lib\+::error\+\_\+code \mbox{\hyperlink{classwebsocketpp_1_1connection_a32c3f964cef870faf0d8f23c5b7588bb}{defer\+\_\+http\+\_\+response}} ()
\begin{DoxyCompactList}\small\item\em Defer HTTP Response until later (Exception free) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a6c192eb26aa8be9afed7ff9e85990ea8}{send\+\_\+http\+\_\+response}} (lib\+::error\+\_\+code \&ec)
\begin{DoxyCompactList}\small\item\em Send deferred HTTP Response (exception free) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_aabc8c4f01bb9fd6336e536d992ae1a4f}{send\+\_\+http\+\_\+response}} ()
\begin{DoxyCompactList}\small\item\em Send deferred HTTP Response. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacewebsocketpp_a6b3d26a10ee7229b84b776786332631d}{connection\+\_\+hdl}} \mbox{\hyperlink{classwebsocketpp_1_1connection_a6a28147e2f3f4c1fb37f29a234e772bc}{get\+\_\+handle}} () const
\begin{DoxyCompactList}\small\item\em Get Connection Handle. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classwebsocketpp_1_1connection_ab248ee632b5b4d9998fec4328510f445}{is\+\_\+server}} () const
\begin{DoxyCompactList}\small\item\em Get whether or not this connection is part of a server or client. \end{DoxyCompactList}\item 
std\+::string const \& \mbox{\hyperlink{classwebsocketpp_1_1connection_a428a8ee0bd94a7dadf6a4831c756ead3}{get\+\_\+origin}} () const
\begin{DoxyCompactList}\small\item\em Return the same origin policy origin value from the opening request. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5}{session\+::state\+::value}} \mbox{\hyperlink{classwebsocketpp_1_1connection_a9001efbd5b467ccf3e5e601bb18e4971}{get\+\_\+state}} () const
\begin{DoxyCompactList}\small\item\em Return the connection state. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacewebsocketpp_1_1close_1_1status_a8614a5c4733d708e2d2a32191c5bef84}{close\+::status\+::value}} \mbox{\hyperlink{classwebsocketpp_1_1connection_a871a1374bb7330126bfe3f535753cc52}{get\+\_\+local\+\_\+close\+\_\+code}} () const
\begin{DoxyCompactList}\small\item\em Get the Web\+Socket close code sent by this endpoint. \end{DoxyCompactList}\item 
std\+::string const \& \mbox{\hyperlink{classwebsocketpp_1_1connection_af7320e3ceabf14e7dce9f6c2679f23e9}{get\+\_\+local\+\_\+close\+\_\+reason}} () const
\begin{DoxyCompactList}\small\item\em Get the Web\+Socket close reason sent by this endpoint. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacewebsocketpp_1_1close_1_1status_a8614a5c4733d708e2d2a32191c5bef84}{close\+::status\+::value}} \mbox{\hyperlink{classwebsocketpp_1_1connection_aad217d74120fb96a39d71c330e0ffa41}{get\+\_\+remote\+\_\+close\+\_\+code}} () const
\begin{DoxyCompactList}\small\item\em Get the Web\+Socket close code sent by the remote endpoint. \end{DoxyCompactList}\item 
std\+::string const \& \mbox{\hyperlink{classwebsocketpp_1_1connection_ab96a9228945fc99f708e866f0fc7c0ca}{get\+\_\+remote\+\_\+close\+\_\+reason}} () const
\begin{DoxyCompactList}\small\item\em Get the Web\+Socket close reason sent by the remote endpoint. \end{DoxyCompactList}\item 
lib\+::error\+\_\+code \mbox{\hyperlink{classwebsocketpp_1_1connection_a8c05c88d471342673abf0e5ce60aa4cc}{get\+\_\+ec}} () const
\begin{DoxyCompactList}\small\item\em Get the internal error code for a closed/failed connection. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classwebsocketpp_1_1connection_a470a4dfe286833dc14e0906eb6e858a5}{message\+\_\+ptr}} \mbox{\hyperlink{classwebsocketpp_1_1connection_a854cb45d1c96d0a2e19ad0ba827a0f9e}{get\+\_\+message}} (\mbox{\hyperlink{namespacewebsocketpp_1_1frame_1_1opcode_ae68711643096dfc4af6d66ade3f9fd5e}{websocketpp\+::frame\+::opcode\+::value}} \mbox{\hyperlink{unionop}{op}}, size\+\_\+t size) const
\begin{DoxyCompactList}\small\item\em Get a message buffer. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a9e19e781b4abda3e4a39f4f25077a29c}{read\+\_\+handshake}} (size\+\_\+t num\+\_\+bytes)
\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a9c7e83aae3418cdf71e6fcf1dce3a255}{handle\+\_\+read\+\_\+handshake}} (lib\+::error\+\_\+code const \&ec, size\+\_\+t bytes\+\_\+transferred)
\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a261ca392f8b31cd0f5a1b2ccc11c3037}{handle\+\_\+read\+\_\+http\+\_\+response}} (lib\+::error\+\_\+code const \&ec, size\+\_\+t bytes\+\_\+transferred)
\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a6f2451a76c49b4c2a88de4efd4f8bda6}{handle\+\_\+write\+\_\+http\+\_\+response}} (lib\+::error\+\_\+code const \&ec)
\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_af37addaf4d89de32d3d8f4da668313c5}{handle\+\_\+send\+\_\+http\+\_\+request}} (lib\+::error\+\_\+code const \&ec)
\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_aee1b6e47985b434303b8d6e5f27177a3}{handle\+\_\+open\+\_\+handshake\+\_\+timeout}} (lib\+::error\+\_\+code const \&ec)
\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a129554b75156c82eb22b22e4409392c8}{handle\+\_\+close\+\_\+handshake\+\_\+timeout}} (lib\+::error\+\_\+code const \&ec)
\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_abd6866c41c2ae86c3372cf428392a190}{handle\+\_\+read\+\_\+frame}} (lib\+::error\+\_\+code const \&ec, size\+\_\+t bytes\+\_\+transferred)
\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_af54e9d7c8ef07349d28c3405182bb3c7}{read\+\_\+frame}} ()
\begin{DoxyCompactList}\small\item\em Issue a new transport read unless reading is paused. \end{DoxyCompactList}\item 
std\+::vector$<$ int $>$ const \& \mbox{\hyperlink{classwebsocketpp_1_1connection_a588af194b5c2a13fe692452c207e0cba}{get\+\_\+supported\+\_\+versions}} () const
\begin{DoxyCompactList}\small\item\em Get array of Web\+Socket protocol versions that this connection supports. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_ac72ff8473d0a49bb069825e99e99ca9d}{set\+\_\+termination\+\_\+handler}} (\mbox{\hyperlink{classwebsocketpp_1_1connection_a0dafdb1188f82418a8fd33a3638496ea}{termination\+\_\+handler}} new\+\_\+handler)
\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a7267aae677a77e5e9379ecb6db1789a3}{terminate}} (lib\+::error\+\_\+code const \&ec)
\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a5012a184129c08ea3f6cfa377e1770c1}{handle\+\_\+terminate}} (terminate\+\_\+status tstat, lib\+::error\+\_\+code const \&ec)
\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a8d26a29e90d4847f3882c280112c6b60}{write\+\_\+frame}} ()
\begin{DoxyCompactList}\small\item\em Checks if there are frames in the send queue and if there are sends one. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a867f94b82788e978ea116d50cf83d72e}{handle\+\_\+write\+\_\+frame}} (lib\+::error\+\_\+code const \&ec)
\begin{DoxyCompactList}\small\item\em Process the results of a frame write operation and start the next write. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_a152530ff43396025175f85748d8ee708}{start}} ()
\begin{DoxyCompactList}\small\item\em Start the connection state machine. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_af07f4fac45e1b64de7e0d12ece0d23a8}{set\+\_\+handle}} (\mbox{\hyperlink{namespacewebsocketpp_a6b3d26a10ee7229b84b776786332631d}{connection\+\_\+hdl}} hdl)
\begin{DoxyCompactList}\small\item\em Set Connection Handle. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classwebsocketpp_1_1connection_ad42c5982a35b82c9009971722943b1e0}{handle\+\_\+transport\+\_\+init}} (lib\+::error\+\_\+code const \&ec)
\item 
lib\+::error\+\_\+code \mbox{\hyperlink{classwebsocketpp_1_1connection_ac1c576bd4dfebac977eade9ac637a432}{initialize\+\_\+processor}} ()
\item 
lib\+::error\+\_\+code \mbox{\hyperlink{classwebsocketpp_1_1connection_a569483c7dcf542f500f6e9f49d803010}{process\+\_\+handshake\+\_\+request}} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\subsubsection*{template$<$typename \mbox{\hyperlink{classconfig}{config}}$>$\newline
class websocketpp\+::connection$<$ config $>$}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l00235}{235}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.



\doxysubsection{Member Typedef Documentation}
\Hypertarget{classwebsocketpp_1_1connection_a3e19c977ae062a790e92fdeb67b459ae}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!alog\_type@{alog\_type}}
\index{alog\_type@{alog\_type}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{alog\_type}{alog\_type}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a3e19c977ae062a790e92fdeb67b459ae} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
config\+::alog\+\_\+type \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::alog\+\_\+type}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00250}{250}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.

\Hypertarget{classwebsocketpp_1_1connection_a67a82be4c089d29e146be36509d81ec0}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!con\_msg\_manager\_ptr@{con\_msg\_manager\_ptr}}
\index{con\_msg\_manager\_ptr@{con\_msg\_manager\_ptr}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{con\_msg\_manager\_ptr}{con\_msg\_manager\_ptr}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a67a82be4c089d29e146be36509d81ec0} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
con\+\_\+msg\+\_\+manager\+\_\+type\+::ptr \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::con\+\_\+msg\+\_\+manager\+\_\+ptr}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00272}{272}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.

\Hypertarget{classwebsocketpp_1_1connection_a75e62887c79026aedab18c8272726417}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!con\_msg\_manager\_type@{con\_msg\_manager\_type}}
\index{con\_msg\_manager\_type@{con\_msg\_manager\_type}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{con\_msg\_manager\_type}{con\_msg\_manager\_type}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a75e62887c79026aedab18c8272726417} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
config\+::con\+\_\+msg\+\_\+manager\+\_\+type \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\mbox{\hyperlink{hybi13_8cpp_a13c41174dd3938337edbfb4ce0ba0644}{\+::con\+\_\+msg\+\_\+manager\+\_\+type}}}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00271}{271}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.

\Hypertarget{classwebsocketpp_1_1connection_a084a79f735c53d51c876fbc42d960f76}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!concurrency\_type@{concurrency\_type}}
\index{concurrency\_type@{concurrency\_type}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{concurrency\_type}{concurrency\_type}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a084a79f735c53d51c876fbc42d960f76} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
config\+::concurrency\+\_\+type \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::concurrency\+\_\+type}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00248}{248}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.

\Hypertarget{classwebsocketpp_1_1connection_a11c1430d51d95862725fd92d176b4ec8}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!elog\_type@{elog\_type}}
\index{elog\_type@{elog\_type}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{elog\_type}{elog\_type}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a11c1430d51d95862725fd92d176b4ec8} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
config\+::elog\+\_\+type \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::elog\+\_\+type}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00252}{252}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.

\Hypertarget{classwebsocketpp_1_1connection_ad18f126ff904fec9f2983681902490c1}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!istate\_type@{istate\_type}}
\index{istate\_type@{istate\_type}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{istate\_type}{istate\_type}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_ad18f126ff904fec9f2983681902490c1} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
\mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508d}{session\+::internal\+\_\+state\+::value}} \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::istate\+\_\+type}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00287}{287}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.

\Hypertarget{classwebsocketpp_1_1connection_a78988e5609b6ccdbd0949d5cd5fe440a}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!message\_handler@{message\_handler}}
\index{message\_handler@{message\_handler}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{message\_handler}{message\_handler}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a78988e5609b6ccdbd0949d5cd5fe440a} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
lib\+::function$<$void(\mbox{\hyperlink{namespacewebsocketpp_a6b3d26a10ee7229b84b776786332631d}{connection\+\_\+hdl}},\mbox{\hyperlink{classwebsocketpp_1_1connection_a470a4dfe286833dc14e0906eb6e858a5}{message\+\_\+ptr}})$>$ \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::message\+\_\+handler}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00281}{281}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.

\Hypertarget{classwebsocketpp_1_1connection_a470a4dfe286833dc14e0906eb6e858a5}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!message\_ptr@{message\_ptr}}
\index{message\_ptr@{message\_ptr}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{message\_ptr}{message\_ptr}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a470a4dfe286833dc14e0906eb6e858a5} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
message\+\_\+type\+::ptr \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\mbox{\hyperlink{debug__client_8cpp_a08398c4d31a4dc3e42d1b9a9ef64c6ad}{\+::message\+\_\+ptr}}}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00269}{269}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.

\Hypertarget{classwebsocketpp_1_1connection_a2f170ce183202d226bd070cc893d053b}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!message\_type@{message\_type}}
\index{message\_type@{message\_type}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{message\_type}{message\_type}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a2f170ce183202d226bd070cc893d053b} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
config\+::message\+\_\+type \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::message\+\_\+type}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00268}{268}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.

\Hypertarget{classwebsocketpp_1_1connection_af9985bdbd086030ef65243aa7563bc4c}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!mutex\_type@{mutex\_type}}
\index{mutex\_type@{mutex\_type}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{mutex\_type}{mutex\_type}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_af9985bdbd086030ef65243aa7563bc4c} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
concurrency\+\_\+type\+::mutex\+\_\+type \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::mutex\+\_\+type}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00263}{263}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.

\Hypertarget{classwebsocketpp_1_1connection_a4014eb117e056fcdd0a3ff1c42743209}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!processor\_ptr@{processor\_ptr}}
\index{processor\_ptr@{processor\_ptr}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{processor\_ptr}{processor\_ptr}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a4014eb117e056fcdd0a3ff1c42743209} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
lib\+::shared\+\_\+ptr$<$\mbox{\hyperlink{classwebsocketpp_1_1connection_af765e8a2b035f16cae8cf26c727f0bb5}{processor\+\_\+type}}$>$ \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::processor\+\_\+ptr}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00278}{278}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.

\Hypertarget{classwebsocketpp_1_1connection_af765e8a2b035f16cae8cf26c727f0bb5}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!processor\_type@{processor\_type}}
\index{processor\_type@{processor\_type}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{processor\_type}{processor\_type}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_af765e8a2b035f16cae8cf26c727f0bb5} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
\mbox{\hyperlink{classwebsocketpp_1_1processor_1_1processor}{processor\+::processor}}$<$\mbox{\hyperlink{classconfig}{config}}$>$ \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::processor\+\_\+type}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00277}{277}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.

\Hypertarget{classwebsocketpp_1_1connection_af5839adca921ce08ea3ca3e634155e86}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!ptr@{ptr}}
\index{ptr@{ptr}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{ptr}{ptr}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_af5839adca921ce08ea3ca3e634155e86} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
lib\+::shared\+\_\+ptr$<$\mbox{\hyperlink{classwebsocketpp_1_1connection_acab063acca678826cf2786aca15cc395}{type}}$>$ \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::ptr}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00243}{243}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.

\Hypertarget{classwebsocketpp_1_1connection_afd1de69db1764ab30dc4f30bb84a6565}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!request\_type@{request\_type}}
\index{request\_type@{request\_type}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{request\_type}{request\_type}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_afd1de69db1764ab30dc4f30bb84a6565} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
config\+::request\+\_\+type \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::request\+\_\+type}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00265}{265}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.

\Hypertarget{classwebsocketpp_1_1connection_a3057f017dd336275028a1cab5a7a28a6}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!response\_type@{response\_type}}
\index{response\_type@{response\_type}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{response\_type}{response\_type}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a3057f017dd336275028a1cab5a7a28a6} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
config\+::response\+\_\+type \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::response\+\_\+type}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00266}{266}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.

\Hypertarget{classwebsocketpp_1_1connection_a5e668171dd8bfdd8b6e46d17b4134047}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!rng\_type@{rng\_type}}
\index{rng\_type@{rng\_type}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{rng\_type}{rng\_type}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a5e668171dd8bfdd8b6e46d17b4134047} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
config\+::rng\+\_\+type \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::rng\+\_\+type}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00275}{275}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.

\Hypertarget{classwebsocketpp_1_1connection_a98eee129ad1f7e30c059c1073d516495}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!scoped\_lock\_type@{scoped\_lock\_type}}
\index{scoped\_lock\_type@{scoped\_lock\_type}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{scoped\_lock\_type}{scoped\_lock\_type}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a98eee129ad1f7e30c059c1073d516495} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
concurrency\+\_\+type\+::scoped\+\_\+lock\+\_\+type \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::scoped\+\_\+lock\+\_\+type}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00262}{262}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.

\Hypertarget{classwebsocketpp_1_1connection_a0dafdb1188f82418a8fd33a3638496ea}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!termination\_handler@{termination\_handler}}
\index{termination\_handler@{termination\_handler}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{termination\_handler}{termination\_handler}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a0dafdb1188f82418a8fd33a3638496ea} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
lib\+::function$<$void(\mbox{\hyperlink{classwebsocketpp_1_1connection_af5839adca921ce08ea3ca3e634155e86}{ptr}})$>$ \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::termination\+\_\+handler}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00260}{260}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.

\Hypertarget{classwebsocketpp_1_1connection_a4c4c89218537431ab0831d1f5d356a80}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!timer\_ptr@{timer\_ptr}}
\index{timer\_ptr@{timer\_ptr}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{timer\_ptr}{timer\_ptr}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a4c4c89218537431ab0831d1f5d356a80} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
transport\+\_\+con\+\_\+type\+::timer\+\_\+ptr \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::timer\+\_\+ptr}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00284}{284}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.

\Hypertarget{classwebsocketpp_1_1connection_a94c5cd12bf62315d2d64b1b9d426a467}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!transport\_con\_ptr@{transport\_con\_ptr}}
\index{transport\_con\_ptr@{transport\_con\_ptr}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{transport\_con\_ptr}{transport\_con\_ptr}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a94c5cd12bf62315d2d64b1b9d426a467} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
transport\+\_\+con\+\_\+type\+::ptr \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::transport\+\_\+con\+\_\+ptr}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00258}{258}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.

\Hypertarget{classwebsocketpp_1_1connection_ae5eb5c1a01276a32aa43ebc541c06650}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!transport\_con\_type@{transport\_con\_type}}
\index{transport\_con\_type@{transport\_con\_type}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{transport\_con\_type}{transport\_con\_type}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_ae5eb5c1a01276a32aa43ebc541c06650} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
config\+::transport\+\_\+type\+::transport\+\_\+con\+\_\+type \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::transport\+\_\+con\+\_\+type}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00256}{256}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.

\Hypertarget{classwebsocketpp_1_1connection_acab063acca678826cf2786aca15cc395}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!type@{type}}
\index{type@{type}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{type}{type}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_acab063acca678826cf2786aca15cc395} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
\mbox{\hyperlink{classwebsocketpp_1_1connection}{connection}}$<$\mbox{\hyperlink{classconfig}{config}}$>$ \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::type}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00241}{241}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.

\Hypertarget{classwebsocketpp_1_1connection_a96d3321aee803b0c23f4a72e6c5cc875}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!weak\_ptr@{weak\_ptr}}
\index{weak\_ptr@{weak\_ptr}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{weak\_ptr}{weak\_ptr}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a96d3321aee803b0c23f4a72e6c5cc875} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
lib\+::weak\+\_\+ptr$<$\mbox{\hyperlink{classwebsocketpp_1_1connection_acab063acca678826cf2786aca15cc395}{type}}$>$ \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::weak\+\_\+ptr}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00245}{245}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classwebsocketpp_1_1connection_a525947d8d33ee1e410d02706246ffe94}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!connection@{connection}}
\index{connection@{connection}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{connection()}{connection()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a525947d8d33ee1e410d02706246ffe94} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
\mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::connection (\begin{DoxyParamCaption}\item[{bool}]{p\+\_\+is\+\_\+server}{, }\item[{std\+::string const \&}]{ua}{, }\item[{\mbox{\hyperlink{classwebsocketpp_1_1connection_a3e19c977ae062a790e92fdeb67b459ae}{alog\+\_\+type}} \&}]{alog}{, }\item[{\mbox{\hyperlink{classwebsocketpp_1_1connection_a11c1430d51d95862725fd92d176b4ec8}{elog\+\_\+type}} \&}]{elog}{, }\item[{\mbox{\hyperlink{classwebsocketpp_1_1connection_a5e668171dd8bfdd8b6e46d17b4134047}{rng\+\_\+type}} \&}]{rng}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00297}{297}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00299\ \ \ \ \ \ \ :\ \mbox{\hyperlink{classwebsocketpp_1_1connection_ae5eb5c1a01276a32aa43ebc541c06650}{transport\_con\_type}}(p\_is\_server,\ alog,\ \mbox{\hyperlink{logger_8hpp_a9e3cdbaecd5a34b42956e888f7326fad}{elog}})}
\DoxyCodeLine{00300\ \ \ \ \ \ \ ,\ m\_handle\_read\_frame(lib::bind(}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{classwebsocketpp_1_1connection_abd6866c41c2ae86c3372cf428392a190}{type::handle\_read\_frame}},}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{this},}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \ \ \ \ lib::placeholders::\_1,}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ lib::placeholders::\_2}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ ))}
\DoxyCodeLine{00306\ \ \ \ \ \ \ ,\ m\_write\_frame\_handler(lib::bind(}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{classwebsocketpp_1_1connection_a867f94b82788e978ea116d50cf83d72e}{type::handle\_write\_frame}},}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{this},}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ lib::placeholders::\_1}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ ))}
\DoxyCodeLine{00311\ \ \ \ \ \ \ ,\ m\_user\_agent(ua)}
\DoxyCodeLine{00312\ \ \ \ \ \ \ ,\ m\_open\_handshake\_timeout\_dur(config::timeout\_open\_handshake)}
\DoxyCodeLine{00313\ \ \ \ \ \ \ ,\ m\_close\_handshake\_timeout\_dur(config::timeout\_close\_handshake)}
\DoxyCodeLine{00314\ \ \ \ \ \ \ ,\ m\_pong\_timeout\_dur(config::timeout\_pong)}
\DoxyCodeLine{00315\ \ \ \ \ \ \ ,\ m\_max\_message\_size(config::max\_message\_size)}
\DoxyCodeLine{00316\ \ \ \ \ \ \ ,\ m\_state(\mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5a5d6a70f93d03d19c53ad5f4c4b3a176f}{session::state::connecting}})}
\DoxyCodeLine{00317\ \ \ \ \ \ \ ,\ m\_internal\_state(\mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508da3e18524ea63c814e1e5da6f12bf5af10}{session::internal\_state::USER\_INIT}})}
\DoxyCodeLine{00318\ \ \ \ \ \ \ ,\ m\_msg\_manager(\textcolor{keyword}{new}\ \mbox{\hyperlink{classwebsocketpp_1_1connection_a75e62887c79026aedab18c8272726417}{con\_msg\_manager\_type}}())}
\DoxyCodeLine{00319\ \ \ \ \ \ \ ,\ m\_send\_buffer\_size(0)}
\DoxyCodeLine{00320\ \ \ \ \ \ \ ,\ m\_write\_flag(\textcolor{keyword}{false})}
\DoxyCodeLine{00321\ \ \ \ \ \ \ ,\ m\_read\_flag(\textcolor{keyword}{true})}
\DoxyCodeLine{00322\ \ \ \ \ \ \ ,\ m\_is\_server(p\_is\_server)}
\DoxyCodeLine{00323\ \ \ \ \ \ \ ,\ m\_alog(alog)}
\DoxyCodeLine{00324\ \ \ \ \ \ \ ,\ m\_elog(\mbox{\hyperlink{logger_8hpp_a9e3cdbaecd5a34b42956e888f7326fad}{elog}})}
\DoxyCodeLine{00325\ \ \ \ \ \ \ ,\ m\_rng(rng)}
\DoxyCodeLine{00326\ \ \ \ \ \ \ ,\ m\_local\_close\_code(close::status::abnormal\_close)}
\DoxyCodeLine{00327\ \ \ \ \ \ \ ,\ m\_remote\_close\_code(close::status::abnormal\_close)}
\DoxyCodeLine{00328\ \ \ \ \ \ \ ,\ m\_is\_http(\textcolor{keyword}{false})}
\DoxyCodeLine{00329\ \ \ \ \ \ \ ,\ m\_http\_state(\mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1http__state_a40c0c92e8a4a3dff1ecd017d26f0bc4aa6bd556366b4fcf3745506f7d8b0979ad}{session::http\_state::init}})}
\DoxyCodeLine{00330\ \ \ \ \ \ \ ,\ m\_was\_clean(\textcolor{keyword}{false})}
\DoxyCodeLine{00331\ \ \ \ \ \{}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}connection\ constructor"{}});}
\DoxyCodeLine{00333\ \ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_a525947d8d33ee1e410d02706246ffe94_cgraph}
\end{center}
\end{figure}


\doxysubsection{Member Function Documentation}
\Hypertarget{classwebsocketpp_1_1connection_a37a41672dd87714eb045fd989f98cd26}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!add\_subprotocol@{add\_subprotocol}}
\index{add\_subprotocol@{add\_subprotocol}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{add\_subprotocol()}{add\_subprotocol()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a37a41672dd87714eb045fd989f98cd26} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::add\+\_\+subprotocol (\begin{DoxyParamCaption}\item[{std\+::string const \&}]{request}{}\end{DoxyParamCaption})}

Adds a subprotocol to the list to send with the opening handshake. This may be called multiple times to request more than one. If the server supports one of these, it may choose one. If so, it will return it in it\textquotesingle{}s handshake reponse and the value will be available via \doxylink{classwebsocketpp_1_1connection_ae8577184f6e4d82955cc38e1a9f8164b}{get\+\_\+subprotocol()}. Subprotocol requests should be added in order of preference.


\begin{DoxyParams}{Parameters}
{\em request} & The subprotocol to request \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00478}{478}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00479\ \ \ \ \ lib::error\_code\ ec;}
\DoxyCodeLine{00480\ \ \ \ \ this-\/>\mbox{\hyperlink{classwebsocketpp_1_1connection_a36462b406f973e16d3107e786c6b9172}{add\_subprotocol}}(\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}},ec);}
\DoxyCodeLine{00481\ \ \ \ \ \textcolor{keywordflow}{if}\ (ec)\ \{}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ exception(ec);}
\DoxyCodeLine{00483\ \ \ \ \ \}}
\DoxyCodeLine{00484\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a36462b406f973e16d3107e786c6b9172}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!add\_subprotocol@{add\_subprotocol}}
\index{add\_subprotocol@{add\_subprotocol}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{add\_subprotocol()}{add\_subprotocol()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a36462b406f973e16d3107e786c6b9172} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::add\+\_\+subprotocol (\begin{DoxyParamCaption}\item[{std\+::string const \&}]{request}{, }\item[{lib\+::error\+\_\+code \&}]{ec}{}\end{DoxyParamCaption})}

Adds a subprotocol to the list to send with the opening handshake. This may be called multiple times to request more than one. If the server supports one of these, it may choose one. If so, it will return it in it\textquotesingle{}s handshake reponse and the value will be available via \doxylink{classwebsocketpp_1_1connection_ae8577184f6e4d82955cc38e1a9f8164b}{get\+\_\+subprotocol()}. Subprotocol requests should be added in order of preference.


\begin{DoxyParams}{Parameters}
{\em request} & The subprotocol to request \\
\hline
{\em ec} & \doxylink{struct_a}{A} reference to an error code that will be filled in the case of errors \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00458}{458}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00460\ \{}
\DoxyCodeLine{00461\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_is\_server)\ \{}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ ec\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da34e082b99518716e9755d3ac0436ccf3}{error::client\_only}});}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00464\ \ \ \ \ \}}
\DoxyCodeLine{00465\ }
\DoxyCodeLine{00466\ \ \ \ \ \textcolor{comment}{//\ If\ the\ value\ is\ empty\ or\ has\ a\ non-\/RFC2616\ token\ character\ it\ is\ invalid.}}
\DoxyCodeLine{00467\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}}.empty()\ ||\ std::find\_if(\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}}.begin(),\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}}.end(),}
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ http::is\_not\_token\_char)\ !=\ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}}.end())}
\DoxyCodeLine{00469\ \ \ \ \ \{}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ ec\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68dabdba1165334e583188795c7fda926dc3}{error::invalid\_subprotocol}});}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00472\ \ \ \ \ \}}
\DoxyCodeLine{00473\ }
\DoxyCodeLine{00474\ \ \ \ \ m\_requested\_subprotocols.push\_back(\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}});}
\DoxyCodeLine{00475\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_a36462b406f973e16d3107e786c6b9172_cgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_af8cb78acc61b8a3d59f6162cdba6318b}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!append\_header@{append\_header}}
\index{append\_header@{append\_header}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{append\_header()}{append\_header()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_af8cb78acc61b8a3d59f6162cdba6318b} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::append\+\_\+header (\begin{DoxyParamCaption}\item[{std\+::string const \&}]{key}{, }\item[{std\+::string const \&}]{val}{}\end{DoxyParamCaption})}

If a header with this name already exists the value will be appended to the existing header to form a comma separated list of values. Use {\ttfamily \doxylink{classwebsocketpp_1_1connection_a96e4adcdb9b3473ca96e2aac27ff7147}{connection\+::replace\+\_\+header}} to overwrite existing values.

This member function is valid only from the http() and \doxylink{debug__server_8cpp_a76b106c484654b62313da8bace255c9a}{validate()} handler callbacks, or to a client connection before connect has been called.


\begin{DoxyParams}{Parameters}
{\em key} & Name of the header to set \\
\hline
{\em val} & Value to add \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\doxylink{classwebsocketpp_1_1connection_a96e4adcdb9b3473ca96e2aac27ff7147}{replace\+\_\+header} 

websocketpp\+::http\+::parser\+::append\+\_\+header 
\end{DoxySeeAlso}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00590}{590}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00592\ \{}
\DoxyCodeLine{00593\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_is\_server)\ \{}
\DoxyCodeLine{00594\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_internal\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508da2d82e414db0a6cbc60eb3cb4317b71e0}{istate::PROCESS\_HTTP\_REQUEST}})\ \{}
\DoxyCodeLine{00595\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ are\ setting\ response\ headers\ for\ an\ incoming\ server\ connection}}
\DoxyCodeLine{00596\ \ \ \ \ \ \ \ \ \ \ \ \ m\_response.append\_header(key,val);}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ exception(\textcolor{stringliteral}{"{}Call\ to\ append\_header\ from\ invalid\ state"{}},}
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}}));}
\DoxyCodeLine{00600\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00601\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00602\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_internal\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508da3e18524ea63c814e1e5da6f12bf5af10}{istate::USER\_INIT}})\ \{}
\DoxyCodeLine{00603\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ are\ setting\ initial\ headers\ for\ an\ outgoing\ client\ connection}}
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ \ \ \ \ \ m\_request.append\_header(key,val);}
\DoxyCodeLine{00605\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00606\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ exception(\textcolor{stringliteral}{"{}Call\ to\ append\_header\ from\ invalid\ state"{}},}
\DoxyCodeLine{00607\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}}));}
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00609\ \ \ \ \ \}}
\DoxyCodeLine{00610\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_af8cb78acc61b8a3d59f6162cdba6318b_cgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_aaaad6dc1c81fc944593f529575b67d96}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!buffered\_amount@{buffered\_amount}}
\index{buffered\_amount@{buffered\_amount}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{buffered\_amount()}{buffered\_amount()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_aaaad6dc1c81fc944593f529575b67d96} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
size\+\_\+t \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::buffered\+\_\+amount (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\begin{DoxyRefDesc}{Deprecated}
\item[\mbox{\hyperlink{deprecated__deprecated000003}{Deprecated}}]use {\ttfamily get\+\_\+buffered\+\_\+amount} instead \end{DoxyRefDesc}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l00635}{635}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00635\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00636\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classwebsocketpp_1_1connection_a41a23575fcdad7f8afe25b2fabe12593}{get\_buffered\_amount}}();}
\DoxyCodeLine{00637\ \ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_aaaad6dc1c81fc944593f529575b67d96_cgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_ae718e4fa8b2c37757d8abd71dae07dc9}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!close@{close}}
\index{close@{close}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{close()}{close()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_ae718e4fa8b2c37757d8abd71dae07dc9} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::close (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacewebsocketpp_1_1close_1_1status_a8614a5c4733d708e2d2a32191c5bef84}{close\+::status\+::value}} const}]{code}{, }\item[{std\+::string const \&}]{reason}{}\end{DoxyParamCaption})}

Initiates the close handshake process.

If close returns successfully the connection will be in the closing state and no additional messages may be sent. All messages sent prior to calling close will be written out before the connection is closed.

If no reason is specified none will be sent. If no code is specified then no code will be sent.

The handler\textquotesingle{}s on\+\_\+close callback will be called once the close handshake is complete.

Reasons will be automatically truncated to the maximum length (123 bytes) if necessary.


\begin{DoxyParams}{Parameters}
{\em code} & The close code to send \\
\hline
{\em reason} & The close reason to send \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00326}{326}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00328\ \{}
\DoxyCodeLine{00329\ \ \ \ \ lib::error\_code\ ec;}
\DoxyCodeLine{00330\ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_ae718e4fa8b2c37757d8abd71dae07dc9}{close}}(code,reason,ec);}
\DoxyCodeLine{00331\ \ \ \ \ \textcolor{keywordflow}{if}\ (ec)\ \{}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ exception(ec);}
\DoxyCodeLine{00333\ \ \ \ \ \}}
\DoxyCodeLine{00334\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=282pt]{classwebsocketpp_1_1connection_ae718e4fa8b2c37757d8abd71dae07dc9_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_ae718e4fa8b2c37757d8abd71dae07dc9_icgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_a436058fe88b1ba31080cec2a464634ae}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!close@{close}}
\index{close@{close}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{close()}{close()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a436058fe88b1ba31080cec2a464634ae} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::close (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacewebsocketpp_1_1close_1_1status_a8614a5c4733d708e2d2a32191c5bef84}{close\+::status\+::value}} const}]{code}{, }\item[{std\+::string const \&}]{reason}{, }\item[{lib\+::error\+\_\+code \&}]{ec}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00304}{304}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00306\ \{}
\DoxyCodeLine{00307\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_alog.static\_test(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}}))\ \{}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}connection\ close"{}});}
\DoxyCodeLine{00309\ \ \ \ \ \}}
\DoxyCodeLine{00310\ }
\DoxyCodeLine{00311\ \ \ \ \ \textcolor{comment}{//\ Truncate\ reason\ to\ maximum\ size\ allowable\ in\ a\ close\ frame.}}
\DoxyCodeLine{00312\ \ \ \ \ std::string\ tr(reason,0,std::min<size\_t>(reason.size(),}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ frame::limits::close\_reason\_size));}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00315\ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a98eee129ad1f7e30c059c1073d516495}{scoped\_lock\_type}}\ \mbox{\hyperlink{xbyak__mnemonic_8h_aa81aed607133209dade63a226818224d}{lock}}(m\_connection\_state\_lock);}
\DoxyCodeLine{00316\ }
\DoxyCodeLine{00317\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_state\ !=\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5a90d929cb6e119645ec2800451bfdc0a0}{session::state::open}})\ \{}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ ec\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}});}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00320\ \ \ \ \ \}}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00322\ \ \ \ \ ec\ =\ this-\/>send\_close\_frame(code,tr,\textcolor{keyword}{false},\mbox{\hyperlink{namespacewebsocketpp_1_1close_1_1status_a3f9ce953f12693f74493e2eb7a80952b}{close::status::terminal}}(code));}
\DoxyCodeLine{00323\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_a436058fe88b1ba31080cec2a464634ae_cgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_a32c3f964cef870faf0d8f23c5b7588bb}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!defer\_http\_response@{defer\_http\_response}}
\index{defer\_http\_response@{defer\_http\_response}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{defer\_http\_response()}{defer\_http\_response()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a32c3f964cef870faf0d8f23c5b7588bb} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
lib\+::error\+\_\+code \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::defer\+\_\+http\+\_\+response (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

Defer HTTP Response until later.

Used in the http handler to defer the HTTP response for this connection until later. Handshake timers will be canceled and the connection will be left open until {\ttfamily send\+\_\+http\+\_\+response} or an equivalent is called.

Warning\+: deferred connections won\textquotesingle{}t time out and as a result can tie up resources.

\begin{DoxySince}{Since}
0.\+6.\+0
\end{DoxySince}
\begin{DoxyReturn}{Returns}
\doxylink{struct_a}{A} status code, zero on success, non-\/zero otherwise
\end{DoxyReturn}
Used in the http handler to defer the HTTP response for this connection until later. Handshake timers will be canceled and the connection will be left open until {\ttfamily send\+\_\+http\+\_\+response} or an equivalent is called.

Warning\+: deferred connections won\textquotesingle{}t time out and as a result can tie up resources.

\begin{DoxyReturn}{Returns}
\doxylink{struct_a}{A} status code, zero on success, non-\/zero otherwise 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00671}{671}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00671\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00672\ \ \ \ \ \textcolor{comment}{//\ Cancel\ handshake\ timer,\ otherwise\ the\ connection\ will\ time\ out\ and\ we'll}}
\DoxyCodeLine{00673\ \ \ \ \ \textcolor{comment}{//\ close\ the\ connection\ before\ the\ app\ has\ a\ chance\ to\ send\ a\ response.}}
\DoxyCodeLine{00674\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_handshake\_timer)\ \{}
\DoxyCodeLine{00675\ \ \ \ \ \ \ \ \ m\_handshake\_timer-\/>cancel();}
\DoxyCodeLine{00676\ \ \ \ \ \ \ \ \ m\_handshake\_timer.reset();}
\DoxyCodeLine{00677\ \ \ \ \ \}}
\DoxyCodeLine{00678\ \ \ \ \ }
\DoxyCodeLine{00679\ \ \ \ \ \textcolor{comment}{//\ Do\ something\ to\ signal\ deferral}}
\DoxyCodeLine{00680\ \ \ \ \ m\_http\_state\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1http__state_a40c0c92e8a4a3dff1ecd017d26f0bc4aa93b52fb34c5d01e7349ef0f4e80b94d5}{session::http\_state::deferred}};}
\DoxyCodeLine{00681\ \ \ \ \ }
\DoxyCodeLine{00682\ \ \ \ \ \textcolor{keywordflow}{return}\ lib::error\_code();}
\DoxyCodeLine{00683\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a41a23575fcdad7f8afe25b2fabe12593}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_buffered\_amount@{get\_buffered\_amount}}
\index{get\_buffered\_amount@{get\_buffered\_amount}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_buffered\_amount()}{get\_buffered\_amount()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a41a23575fcdad7f8afe25b2fabe12593} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
size\+\_\+t \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+buffered\+\_\+amount (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}

Retrieves the number of bytes in the outgoing write buffer that have not already been dispatched to the transport layer. This represents the bytes that are presently cancelable without uncleanly ending the websocket connection

This method invokes the m\+\_\+write\+\_\+lock mutex

\begin{DoxyReturn}{Returns}
The current number of bytes in the outgoing send buffer. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00071}{71}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{comment}{//scoped\_lock\_type\ lock(m\_connection\_state\_lock);}}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_send\_buffer\_size;}
\DoxyCodeLine{00074\ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_a41a23575fcdad7f8afe25b2fabe12593_icgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_a8c05c88d471342673abf0e5ce60aa4cc}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_ec@{get\_ec}}
\index{get\_ec@{get\_ec}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_ec()}{get\_ec()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a8c05c88d471342673abf0e5ce60aa4cc} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
lib\+::error\+\_\+code \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+ec (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Retrieves a machine readable detailed error code indicating the reason that the connection was closed or failed. Valid only after the close or fail handler is called.

\begin{DoxyReturn}{Returns}
Error code indicating the reason the connection was closed or failed 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l01255}{1255}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01256\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_ec;}
\DoxyCodeLine{01257\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a6a28147e2f3f4c1fb37f29a234e772bc}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_handle@{get\_handle}}
\index{get\_handle@{get\_handle}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_handle()}{get\_handle()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a6a28147e2f3f4c1fb37f29a234e772bc} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
\mbox{\hyperlink{namespacewebsocketpp_a6b3d26a10ee7229b84b776786332631d}{connection\+\_\+hdl}} \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+handle (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

The connection handle is a token that can be shared outside the Web\+Socket++ core for the purposes of identifying a connection and sending it messages.

\begin{DoxyReturn}{Returns}
\doxylink{struct_a}{A} handle to the connection 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l01184}{1184}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01185\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_connection\_hdl;}
\DoxyCodeLine{01186\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a47e91744f959876b9fef4b18b04a809a}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_host@{get\_host}}
\index{get\_host@{get\_host}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_host()}{get\_host()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a47e91744f959876b9fef4b18b04a809a} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
std\+::string const  \& \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+host (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}

This value is available after the HTTP request has been fully read and may be called from any thread.

\begin{DoxyReturn}{Returns}
The host component of the connection URI 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00412}{412}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00413\ \ \ \ \ \textcolor{comment}{//scoped\_lock\_type\ lock(m\_connection\_state\_lock);}}
\DoxyCodeLine{00414\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_uri-\/>get\_host();}
\DoxyCodeLine{00415\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a871a1374bb7330126bfe3f535753cc52}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_local\_close\_code@{get\_local\_close\_code}}
\index{get\_local\_close\_code@{get\_local\_close\_code}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_local\_close\_code()}{get\_local\_close\_code()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a871a1374bb7330126bfe3f535753cc52} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
\mbox{\hyperlink{namespacewebsocketpp_1_1close_1_1status_a8614a5c4733d708e2d2a32191c5bef84}{close\+::status\+::value}} \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+local\+\_\+close\+\_\+code (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\begin{DoxyReturn}{Returns}
The Web\+Socket close code sent by this endpoint. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l01218}{1218}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01218\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01219\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_local\_close\_code;}
\DoxyCodeLine{01220\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_af7320e3ceabf14e7dce9f6c2679f23e9}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_local\_close\_reason@{get\_local\_close\_reason}}
\index{get\_local\_close\_reason@{get\_local\_close\_reason}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_local\_close\_reason()}{get\_local\_close\_reason()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_af7320e3ceabf14e7dce9f6c2679f23e9} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
std\+::string const  \& \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+local\+\_\+close\+\_\+reason (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\begin{DoxyReturn}{Returns}
The Web\+Socket close reason sent by this endpoint. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l01226}{1226}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01226\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01227\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_local\_close\_reason;}
\DoxyCodeLine{01228\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a9a050215a9f1d7652bcd8c543ae5f38c}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_max\_http\_body\_size@{get\_max\_http\_body\_size}}
\index{get\_max\_http\_body\_size@{get\_max\_http\_body\_size}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_max\_http\_body\_size()}{get\_max\_http\_body\_size()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a9a050215a9f1d7652bcd8c543ae5f38c} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
size\+\_\+t \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+max\+\_\+http\+\_\+body\+\_\+size (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Get maximum HTTP message body size. Maximum message body size determines the point at which the connection will stop reading an HTTP request whose body is too large.

The default is set by the endpoint that creates the connection.

\begin{DoxySince}{Since}
0.\+5.\+0
\end{DoxySince}
\begin{DoxyReturn}{Returns}
The maximum HTTP message body size 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l00594}{594}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00594\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00595\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_request.get\_max\_body\_size();}
\DoxyCodeLine{00596\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_af7739a5097ae6562bc9b0880731a2857}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_max\_message\_size@{get\_max\_message\_size}}
\index{get\_max\_message\_size@{get\_max\_message\_size}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_max\_message\_size()}{get\_max\_message\_size()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_af7739a5097ae6562bc9b0880731a2857} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
size\+\_\+t \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+max\+\_\+message\+\_\+size (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Get maximum message size. Maximum message size determines the point at which the connection will fail with the message\+\_\+too\+\_\+big protocol error.

The default is set by the endpoint that creates the connection.

\begin{DoxySince}{Since}
0.\+3.\+0 
\end{DoxySince}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l00559}{559}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00559\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00560\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_max\_message\_size;}
\DoxyCodeLine{00561\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a854cb45d1c96d0a2e19ad0ba827a0f9e}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_message@{get\_message}}
\index{get\_message@{get\_message}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_message()}{get\_message()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a854cb45d1c96d0a2e19ad0ba827a0f9e} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
\mbox{\hyperlink{classwebsocketpp_1_1connection_a470a4dfe286833dc14e0906eb6e858a5}{message\+\_\+ptr}} \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+message (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacewebsocketpp_1_1frame_1_1opcode_ae68711643096dfc4af6d66ade3f9fd5e}{websocketpp\+::frame\+::opcode\+::value}}}]{op}{, }\item[{size\+\_\+t}]{size}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Warning\+: The API related to directly sending message buffers may change before the 1.\+0 release. If you plan to use it, please keep an eye on any breaking changes notifications in future release notes. Also if you have any feedback about usage and capabilities now is a great time to provide it.

Message buffers are used to store message payloads and other message metadata.

The size parameter is a hint only. Your final payload does not need to match it. There may be some performance benefits if the initial size guess is equal to or slightly higher than the final payload size.


\begin{DoxyParams}{Parameters}
{\em op} & The opcode for the new message \\
\hline
{\em size} & \doxylink{struct_a}{A} hint to optimize the initial allocation of payload space. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\doxylink{struct_a}{A} new message buffer 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l01278}{1278}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01280\ \ \ \ \ \{}
\DoxyCodeLine{01281\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_msg\_manager-\/>get\_message(\mbox{\hyperlink{unionop}{op}},\ size);}
\DoxyCodeLine{01282\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a428a8ee0bd94a7dadf6a4831c756ead3}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_origin@{get\_origin}}
\index{get\_origin@{get\_origin}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_origin()}{get\_origin()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a428a8ee0bd94a7dadf6a4831c756ead3} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
std\+::string const  \& \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+origin (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}

This value is available after the HTTP request has been fully read and may be called from any thread.

\begin{DoxyReturn}{Returns}
The connection\textquotesingle{}s origin value from the opening handshake. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00065}{65}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{comment}{//scoped\_lock\_type\ lock(m\_connection\_state\_lock);}}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_processor-\/>get\_origin(m\_request);}
\DoxyCodeLine{00068\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_af6651a691ee345daf5cfd31b875965ab}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_port@{get\_port}}
\index{get\_port@{get\_port}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_port()}{get\_port()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_af6651a691ee345daf5cfd31b875965ab} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
\mbox{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}} \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+port (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}

This value is available after the HTTP request has been fully read and may be called from any thread.

\begin{DoxyReturn}{Returns}
The port component of the connection URI 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00424}{424}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00425\ \ \ \ \ \textcolor{comment}{//scoped\_lock\_type\ lock(m\_connection\_state\_lock);}}
\DoxyCodeLine{00426\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_uri-\/>get\_port();}
\DoxyCodeLine{00427\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_aad217d74120fb96a39d71c330e0ffa41}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_remote\_close\_code@{get\_remote\_close\_code}}
\index{get\_remote\_close\_code@{get\_remote\_close\_code}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_remote\_close\_code()}{get\_remote\_close\_code()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_aad217d74120fb96a39d71c330e0ffa41} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
\mbox{\hyperlink{namespacewebsocketpp_1_1close_1_1status_a8614a5c4733d708e2d2a32191c5bef84}{close\+::status\+::value}} \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+remote\+\_\+close\+\_\+code (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\begin{DoxyReturn}{Returns}
The Web\+Socket close code sent by the remote endpoint. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l01234}{1234}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01234\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01235\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_remote\_close\_code;}
\DoxyCodeLine{01236\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_ab96a9228945fc99f708e866f0fc7c0ca}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_remote\_close\_reason@{get\_remote\_close\_reason}}
\index{get\_remote\_close\_reason@{get\_remote\_close\_reason}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_remote\_close\_reason()}{get\_remote\_close\_reason()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_ab96a9228945fc99f708e866f0fc7c0ca} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
std\+::string const  \& \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+remote\+\_\+close\+\_\+reason (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\begin{DoxyReturn}{Returns}
The Web\+Socket close reason sent by the remote endpoint. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l01242}{1242}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01243\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_remote\_close\_reason;}
\DoxyCodeLine{01244\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_ac7986d48af3a57655554f10a4a04421c}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_request@{get\_request}}
\index{get\_request@{get\_request}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_request()}{get\_request()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_ac7986d48af3a57655554f10a4a04421c} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
\mbox{\hyperlink{classwebsocketpp_1_1connection_afd1de69db1764ab30dc4f30bb84a6565}{request\+\_\+type}} const  \& \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+request (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Direct access to request object. This can be used to call methods of the request object that are not part of the standard request API that connection wraps.

Note use of this method involves using behavior specific to the configured HTTP policy. Such behavior may not work with alternate HTTP policies.

\begin{DoxySince}{Since}
0.\+3.\+0-\/alpha3
\end{DoxySince}
\begin{DoxyReturn}{Returns}
\doxylink{struct_a}{A} const reference to the raw request object 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l01103}{1103}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01104\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_request;}
\DoxyCodeLine{01105\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a187c640f1352e74a00c0f8b6177da94a}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_request\_body@{get\_request\_body}}
\index{get\_request\_body@{get\_request\_body}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_request\_body()}{get\_request\_body()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a187c640f1352e74a00c0f8b6177da94a} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
std\+::string const  \& \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+request\+\_\+body (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}

Retrieve the value of the request body. This value is typically used with PUT and POST requests to upload files or other data. Only HTTP connections will ever have bodies. Web\+Socket connection\textquotesingle{}s will always have blank bodies.

\begin{DoxyReturn}{Returns}
The value of the request body. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00533}{533}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00534\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_request.get\_body();}
\DoxyCodeLine{00535\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a542dd013907c3aeb2dbb01d1d631a492}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_request\_header@{get\_request\_header}}
\index{get\_request\_header@{get\_request\_header}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_request\_header()}{get\_request\_header()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a542dd013907c3aeb2dbb01d1d631a492} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
std\+::string const  \& \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+request\+\_\+header (\begin{DoxyParamCaption}\item[{std\+::string const \&}]{key}{}\end{DoxyParamCaption}) const}

Retrieve the value of a header from the handshake HTTP request.


\begin{DoxyParams}{Parameters}
{\em key} & Name of the header to get \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The value of the header 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00527}{527}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00528\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_request.get\_header(key);}
\DoxyCodeLine{00529\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_ae0f196cb11d4a38ef59f2173424a4d51}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_requested\_subprotocols@{get\_requested\_subprotocols}}
\index{get\_requested\_subprotocols@{get\_requested\_subprotocols}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_requested\_subprotocols()}{get\_requested\_subprotocols()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_ae0f196cb11d4a38ef59f2173424a4d51} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
std\+::vector$<$ std\+::string $>$ const  \& \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+requested\+\_\+subprotocols (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}

Retrieves the subprotocols that were requested during the handshake. This method is valid in the validate handler and later.

\begin{DoxyReturn}{Returns}
\doxylink{struct_a}{A} vector of the requested subprotocol 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00453}{453}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00454\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_requested\_subprotocols;}
\DoxyCodeLine{00455\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a52ad47e67e1327e95d1572e04173a409}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_resource@{get\_resource}}
\index{get\_resource@{get\_resource}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_resource()}{get\_resource()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a52ad47e67e1327e95d1572e04173a409} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
std\+::string const  \& \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+resource (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}

This value is available after the HTTP request has been fully read and may be called from any thread.

\begin{DoxyReturn}{Returns}
The resource component of the connection URI 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00418}{418}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00419\ \ \ \ \ \textcolor{comment}{//scoped\_lock\_type\ lock(m\_connection\_state\_lock);}}
\DoxyCodeLine{00420\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_uri-\/>get\_resource();}
\DoxyCodeLine{00421\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a4fc82f2ef276a8bfaf64bb168fb215ca}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_response@{get\_response}}
\index{get\_response@{get\_response}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_response()}{get\_response()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a4fc82f2ef276a8bfaf64bb168fb215ca} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
\mbox{\hyperlink{classwebsocketpp_1_1connection_a3057f017dd336275028a1cab5a7a28a6}{response\+\_\+type}} const  \& \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+response (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Direct access to the HTTP response sent or received as a part of the opening handshake. This can be used to call methods of the response object that are not part of the standard request API that connection wraps.

Note use of this method involves using behavior specific to the configured HTTP policy. Such behavior may not work with alternate HTTP policies.

\begin{DoxySince}{Since}
0.\+7.\+0
\end{DoxySince}
\begin{DoxyReturn}{Returns}
\doxylink{struct_a}{A} const reference to the raw response object 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l01122}{1122}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01123\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_response;}
\DoxyCodeLine{01124\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a32a160dedfda82a678bc61a18fda12b3}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_response\_code@{get\_response\_code}}
\index{get\_response\_code@{get\_response\_code}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_response\_code()}{get\_response\_code()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a32a160dedfda82a678bc61a18fda12b3} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
\mbox{\hyperlink{namespacewebsocketpp_1_1http_1_1status__code_ae0d61c309e053ee5673517b54e2886c6}{http\+::status\+\_\+code\+::value}} \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+response\+\_\+code (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Gets the response status code

\begin{DoxySince}{Since}
0.\+7.\+0
\end{DoxySince}
\begin{DoxyReturn}{Returns}
The response status code sent 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l00983}{983}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00983\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00984\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_response.get\_status\_code();}
\DoxyCodeLine{00985\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a72e0c94609844078fc611716c39791de}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_response\_header@{get\_response\_header}}
\index{get\_response\_header@{get\_response\_header}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_response\_header()}{get\_response\_header()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a72e0c94609844078fc611716c39791de} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
std\+::string const  \& \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+response\+\_\+header (\begin{DoxyParamCaption}\item[{std\+::string const \&}]{key}{}\end{DoxyParamCaption}) const}

Retrieve the value of a header from the handshake HTTP request.


\begin{DoxyParams}{Parameters}
{\em key} & Name of the header to get \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The value of the header 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00539}{539}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00540\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_response.get\_header(key);}
\DoxyCodeLine{00541\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a7a78b53d68e30ca9fa4df7ff8dfd38ea}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_response\_msg@{get\_response\_msg}}
\index{get\_response\_msg@{get\_response\_msg}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_response\_msg()}{get\_response\_msg()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a7a78b53d68e30ca9fa4df7ff8dfd38ea} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
std\+::string const  \& \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+response\+\_\+msg (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Gets the response status message

\begin{DoxySince}{Since}
0.\+7.\+0
\end{DoxySince}
\begin{DoxyReturn}{Returns}
The response status message sent 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l00995}{995}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00995\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00996\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_response.get\_status\_msg();}
\DoxyCodeLine{00997\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a38d87e9ef3c4514fcd72457a04c31260}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_secure@{get\_secure}}
\index{get\_secure@{get\_secure}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_secure()}{get\_secure()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a38d87e9ef3c4514fcd72457a04c31260} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
bool \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+secure (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}

This value is available after the HTTP request has been fully read and may be called from any thread.

\begin{DoxyReturn}{Returns}
Whether or not the connection URI is flagged secure. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00406}{406}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00407\ \ \ \ \ \textcolor{comment}{//scoped\_lock\_type\ lock(m\_connection\_state\_lock);}}
\DoxyCodeLine{00408\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_uri-\/>get\_secure();}
\DoxyCodeLine{00409\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a01a5af7dc2f35ff8f15da8c2cf3a3b02}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_shared@{get\_shared}}
\index{get\_shared@{get\_shared}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_shared()}{get\_shared()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a01a5af7dc2f35ff8f15da8c2cf3a3b02} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
\mbox{\hyperlink{classwebsocketpp_1_1connection_af5839adca921ce08ea3ca3e634155e86}{ptr}} \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+shared (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{connection_8hpp_source_l00336}{336}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ lib::static\_pointer\_cast<type>(transport\_con\_type::get\_shared());}
\DoxyCodeLine{00338\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a9001efbd5b467ccf3e5e601bb18e4971}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_state@{get\_state}}
\index{get\_state@{get\_state}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_state()}{get\_state()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a9001efbd5b467ccf3e5e601bb18e4971} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
\mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5}{session\+::state\+::value}} \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+state (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}

Values can be connecting, open, closing, and closed

\begin{DoxyReturn}{Returns}
The connection\textquotesingle{}s current state. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00077}{77}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{comment}{//scoped\_lock\_type\ lock(m\_connection\_state\_lock);}}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_state;}
\DoxyCodeLine{00080\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_ae8577184f6e4d82955cc38e1a9f8164b}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_subprotocol@{get\_subprotocol}}
\index{get\_subprotocol@{get\_subprotocol}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_subprotocol()}{get\_subprotocol()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_ae8577184f6e4d82955cc38e1a9f8164b} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
std\+::string const  \& \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+subprotocol (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}

Retrieves the subprotocol that was negotiated during the handshake. This method is valid in the open handler and later.

\begin{DoxyReturn}{Returns}
The negotiated subprotocol 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00447}{447}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00448\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_subprotocol;}
\DoxyCodeLine{00449\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a588af194b5c2a13fe692452c207e0cba}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_supported\_versions@{get\_supported\_versions}}
\index{get\_supported\_versions@{get\_supported\_versions}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_supported\_versions()}{get\_supported\_versions()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a588af194b5c2a13fe692452c207e0cba} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
std\+::vector$<$ int $>$ const  \& \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+supported\+\_\+versions (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l01940}{1940}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01941\ \{}
\DoxyCodeLine{01942\ \ \ \ \ \textcolor{keywordflow}{return}\ versions\_supported;}
\DoxyCodeLine{01943\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a63f906681e9363f40dce7d2b65444a41}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!get\_uri@{get\_uri}}
\index{get\_uri@{get\_uri}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{get\_uri()}{get\_uri()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a63f906681e9363f40dce7d2b65444a41} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
\mbox{\hyperlink{namespacewebsocketpp_aae370ea5ac83a8ece7712cb39fc23f5b}{uri\+\_\+ptr}} \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::get\+\_\+uri (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}

This should really only be called by internal library methods unless you really know what you are doing.

\begin{DoxyReturn}{Returns}
\doxylink{struct_a}{A} pointer to the connection\textquotesingle{}s URI 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00430}{430}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00431\ \ \ \ \ \textcolor{comment}{//scoped\_lock\_type\ lock(m\_connection\_state\_lock);}}
\DoxyCodeLine{00432\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_uri;}
\DoxyCodeLine{00433\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a129554b75156c82eb22b22e4409392c8}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!handle\_close\_handshake\_timeout@{handle\_close\_handshake\_timeout}}
\index{handle\_close\_handshake\_timeout@{handle\_close\_handshake\_timeout}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{handle\_close\_handshake\_timeout()}{handle\_close\_handshake\_timeout()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a129554b75156c82eb22b22e4409392c8} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::handle\+\_\+close\+\_\+handshake\+\_\+timeout (\begin{DoxyParamCaption}\item[{lib\+::error\+\_\+code const \&}]{ec}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l01691}{1691}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01693\ \{}
\DoxyCodeLine{01694\ \ \ \ \ \textcolor{keywordflow}{if}\ (ec\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1error_a8d371a2562d813e5a2e106e2694d4fb0a887436887a8732e48f7c67bd85bb6f64}{transport::error::operation\_aborted}})\ \{}
\DoxyCodeLine{01695\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}asio\ close\ handshake\ timer\ cancelled"{}});}
\DoxyCodeLine{01696\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (ec)\ \{}
\DoxyCodeLine{01697\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},}
\DoxyCodeLine{01698\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}asio\ open\ handle\_close\_handshake\_timeout\ error:\ "{}}+ec.message());}
\DoxyCodeLine{01699\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ ignore\ or\ fail\ here?}}
\DoxyCodeLine{01700\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01701\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\ \textcolor{stringliteral}{"{}asio\ close\ handshake\ timer\ expired"{}});}
\DoxyCodeLine{01702\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_a74995b2493f23c9103413e37da5cdc38}{terminate}}(make\_error\_code(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68dabd195839148da73c7dbef46688635f77}{error::close\_handshake\_timeout}}));}
\DoxyCodeLine{01703\ \ \ \ \ \}}
\DoxyCodeLine{01704\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a0b438ac986b73c99907515eeac6dc45f}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!handle\_interrupt@{handle\_interrupt}}
\index{handle\_interrupt@{handle\_interrupt}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{handle\_interrupt()}{handle\_interrupt()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a0b438ac986b73c99907515eeac6dc45f} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::handle\+\_\+interrupt (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00353}{353}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00354\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_interrupt\_handler)\ \{}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ m\_interrupt\_handler(m\_connection\_hdl);}
\DoxyCodeLine{00356\ \ \ \ \ \}}
\DoxyCodeLine{00357\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_aee1b6e47985b434303b8d6e5f27177a3}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!handle\_open\_handshake\_timeout@{handle\_open\_handshake\_timeout}}
\index{handle\_open\_handshake\_timeout@{handle\_open\_handshake\_timeout}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{handle\_open\_handshake\_timeout()}{handle\_open\_handshake\_timeout()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_aee1b6e47985b434303b8d6e5f27177a3} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::handle\+\_\+open\+\_\+handshake\+\_\+timeout (\begin{DoxyParamCaption}\item[{lib\+::error\+\_\+code const \&}]{ec}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l01675}{1675}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01677\ \{}
\DoxyCodeLine{01678\ \ \ \ \ \textcolor{keywordflow}{if}\ (ec\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1error_a8d371a2562d813e5a2e106e2694d4fb0a887436887a8732e48f7c67bd85bb6f64}{transport::error::operation\_aborted}})\ \{}
\DoxyCodeLine{01679\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}open\ handshake\ timer\ cancelled"{}});}
\DoxyCodeLine{01680\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (ec)\ \{}
\DoxyCodeLine{01681\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},}
\DoxyCodeLine{01682\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}open\ handle\_open\_handshake\_timeout\ error:\ "{}}+ec.message());}
\DoxyCodeLine{01683\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ ignore\ or\ fail\ here?}}
\DoxyCodeLine{01684\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01685\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}open\ handshake\ timer\ expired"{}});}
\DoxyCodeLine{01686\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_a74995b2493f23c9103413e37da5cdc38}{terminate}}(make\_error\_code(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68dad2d508dc214d70b4bd6249a85987bfd6}{error::open\_handshake\_timeout}}));}
\DoxyCodeLine{01687\ \ \ \ \ \}}
\DoxyCodeLine{01688\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a5887284ea346efd7b5cc43519bfd84d5}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!handle\_pause\_reading@{handle\_pause\_reading}}
\index{handle\_pause\_reading@{handle\_pause\_reading}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{handle\_pause\_reading()}{handle\_pause\_reading()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a5887284ea346efd7b5cc43519bfd84d5} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::handle\+\_\+pause\+\_\+reading (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

Pause reading handler. Not safe to call directly. 

Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00372}{372}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00373\ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}connection\ connection::handle\_pause\_reading"{}});}
\DoxyCodeLine{00374\ \ \ \ \ m\_read\_flag\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00375\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_af10cbbbfe16ef1cc6f45614582c9d28f}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!handle\_pong\_timeout@{handle\_pong\_timeout}}
\index{handle\_pong\_timeout@{handle\_pong\_timeout}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{handle\_pong\_timeout()}{handle\_pong\_timeout()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_af10cbbbfe16ef1cc6f45614582c9d28f} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::handle\+\_\+pong\+\_\+timeout (\begin{DoxyParamCaption}\item[{std\+::string}]{payload}{, }\item[{lib\+::error\+\_\+code const \&}]{ec}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00233}{233}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00235\ \{}
\DoxyCodeLine{00236\ \ \ \ \ \textcolor{keywordflow}{if}\ (ec)\ \{}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ec\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1error_a8d371a2562d813e5a2e106e2694d4fb0a887436887a8732e48f7c67bd85bb6f64}{transport::error::operation\_aborted}})\ \{}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ignore,\ this\ is\ expected}}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ m\_elog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_a0b1dbc650c6f2711522c096496423726}{log::elevel::devel}},\textcolor{stringliteral}{"{}pong\_timeout\ error:\ "{}}+ec.message());}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00244\ \ \ \ \ \}}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_pong\_timeout\_handler)\ \{}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ m\_pong\_timeout\_handler(m\_connection\_hdl,payload);}
\DoxyCodeLine{00248\ \ \ \ \ \}}
\DoxyCodeLine{00249\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_abd6866c41c2ae86c3372cf428392a190}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!handle\_read\_frame@{handle\_read\_frame}}
\index{handle\_read\_frame@{handle\_read\_frame}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{handle\_read\_frame()}{handle\_read\_frame()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_abd6866c41c2ae86c3372cf428392a190} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::handle\+\_\+read\+\_\+frame (\begin{DoxyParamCaption}\item[{lib\+::error\+\_\+code const \&}]{ec}{, }\item[{size\+\_\+t}]{bytes\+\_\+transferred}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00975}{975}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00977\ \{}
\DoxyCodeLine{00978\ \ \ \ \ \textcolor{comment}{//m\_alog.write(log::alevel::devel,"{}connection\ handle\_read\_frame"{});}}
\DoxyCodeLine{00979\ }
\DoxyCodeLine{00980\ \ \ \ \ lib::error\_code\ ecm\ =\ ec;}
\DoxyCodeLine{00981\ }
\DoxyCodeLine{00982\ \ \ \ \ \textcolor{keywordflow}{if}\ (!ecm\ \&\&\ m\_internal\_state\ !=\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508da20ef9274fcce8154c6cc28d00b900709}{istate::PROCESS\_CONNECTION}})\ \{}
\DoxyCodeLine{00983\ \ \ \ \ \ \ \ \ ecm\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}});}
\DoxyCodeLine{00984\ \ \ \ \ \}}
\DoxyCodeLine{00985\ }
\DoxyCodeLine{00986\ \ \ \ \ \textcolor{keywordflow}{if}\ (ecm)\ \{}
\DoxyCodeLine{00987\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_1_1log_a12d4d17939f102db8c9183d400a41960}{log::level}}\ echannel\ =\ \mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_ae8a9a9f8b1fa45a731acd340e10aa342}{log::elevel::rerror}};}
\DoxyCodeLine{00988\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00989\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ecm\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1error_a8d371a2562d813e5a2e106e2694d4fb0a73dd0d0f22cd67b7bcc031cd6bdef743}{transport::error::eof}})\ \{}
\DoxyCodeLine{00990\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5afff87406dd6d9c5d93c993c3e225a8bc}{session::state::closed}})\ \{}
\DoxyCodeLine{00991\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ expect\ to\ get\ eof\ if\ the\ connection\ is\ closed\ already}}
\DoxyCodeLine{00992\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ just\ ignore\ it}}
\DoxyCodeLine{00993\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}got\ eof\ from\ closed\ con"{}});}
\DoxyCodeLine{00994\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00995\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (m\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5a646a22eb6d8f0b3f6e032fc27dc1091e}{session::state::closing}}\ \&\&\ !m\_is\_server)\ \{}
\DoxyCodeLine{00996\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ we\ are\ a\ client\ we\ expect\ to\ get\ eof\ in\ the\ closing\ state,}}
\DoxyCodeLine{00997\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this\ is\ a\ signal\ to\ terminate\ our\ end\ of\ the\ connection\ after}}
\DoxyCodeLine{00998\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ closing\ handshake}}
\DoxyCodeLine{00999\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_a74995b2493f23c9103413e37da5cdc38}{terminate}}(lib::error\_code());}
\DoxyCodeLine{01000\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01001\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01002\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (ecm\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}})\ \{}
\DoxyCodeLine{01003\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ In\ general,\ invalid\ state\ errors\ in\ the\ closed\ state\ are\ the}}
\DoxyCodeLine{01004\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ result\ of\ handlers\ that\ were\ in\ the\ system\ already\ when\ the\ state}}
\DoxyCodeLine{01005\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ changed\ and\ should\ be\ ignored\ as\ they\ pose\ no\ problems\ and\ there}}
\DoxyCodeLine{01006\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ is\ nothing\ useful\ that\ we\ can\ do\ about\ them.}}
\DoxyCodeLine{01007\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5afff87406dd6d9c5d93c993c3e225a8bc}{session::state::closed}})\ \{}
\DoxyCodeLine{01008\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},}
\DoxyCodeLine{01009\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}handle\_read\_frame:\ got\ invalid\ istate\ in\ closed\ state"{}});}
\DoxyCodeLine{01010\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01011\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01012\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (ecm\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1error_a8d371a2562d813e5a2e106e2694d4fb0af716728e7a91dafb4439a15e7c638112}{transport::error::tls\_short\_read}})\ \{}
\DoxyCodeLine{01013\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5afff87406dd6d9c5d93c993c3e225a8bc}{session::state::closed}})\ \{}
\DoxyCodeLine{01014\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ expect\ to\ get\ a\ TLS\ short\ read\ if\ we\ try\ to\ read\ after\ the}}
\DoxyCodeLine{01015\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ connection\ is\ closed.\ If\ this\ happens\ ignore\ and\ exit\ the}}
\DoxyCodeLine{01016\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ read\ frame\ path.}}
\DoxyCodeLine{01017\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_a74995b2493f23c9103413e37da5cdc38}{terminate}}(lib::error\_code());}
\DoxyCodeLine{01018\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01019\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01020\ \ \ \ \ \ \ \ \ \ \ \ \ echannel\ =\ \mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_ae8a9a9f8b1fa45a731acd340e10aa342}{log::elevel::rerror}};}
\DoxyCodeLine{01021\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (ecm\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1error_a8d371a2562d813e5a2e106e2694d4fb0acabe9e6ae399d59c020c9f78930f01f6}{transport::error::action\_after\_shutdown}})\ \{}
\DoxyCodeLine{01022\ \ \ \ \ \ \ \ \ \ \ \ \ echannel\ =\ \mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_a3ab47987a682f0de7b1d0df8c9c3b9d2}{log::elevel::info}};}
\DoxyCodeLine{01023\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01024\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01025\ \ \ \ \ \ \ \ \ log\_err(echannel,\ \textcolor{stringliteral}{"{}handle\_read\_frame"{}},\ ecm);}
\DoxyCodeLine{01026\ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{yubihsm__pkcs11_8c_a74995b2493f23c9103413e37da5cdc38}{terminate}}(ecm);}
\DoxyCodeLine{01027\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01028\ \ \ \ \ \}}
\DoxyCodeLine{01029\ }
\DoxyCodeLine{01030\ \ \ \ \ \textcolor{comment}{//\ Boundaries\ checking.\ TODO:\ How\ much\ of\ this\ should\ be\ done?}}
\DoxyCodeLine{01031\ \ \ \ \ \textcolor{comment}{/*if\ (bytes\_transferred\ >\ config::connection\_read\_buffer\_size)\ \{}}
\DoxyCodeLine{01032\ \textcolor{comment}{\ \ \ \ \ \ \ \ m\_elog.write(log::elevel::fatal,"{}Fatal\ boundaries\ checking\ error"{});}}
\DoxyCodeLine{01033\ \textcolor{comment}{\ \ \ \ \ \ \ \ this-\/>terminate(make\_error\_code(error::general));}}
\DoxyCodeLine{01034\ \textcolor{comment}{\ \ \ \ \ \ \ \ return;}}
\DoxyCodeLine{01035\ \textcolor{comment}{\ \ \ \ \}*/}}
\DoxyCodeLine{01036\ }
\DoxyCodeLine{01037\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{bn_8cpp_a8b0eadcc506862e9d751ab45185053aa}{p}}\ =\ 0;}
\DoxyCodeLine{01038\ }
\DoxyCodeLine{01039\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_alog.static\_test(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}}))\ \{}
\DoxyCodeLine{01040\ \ \ \ \ \ \ \ \ std::stringstream\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}};}
\DoxyCodeLine{01041\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}\ <<\ \textcolor{stringliteral}{"{}p\ =\ "{}}\ <<\ \mbox{\hyperlink{bn_8cpp_a8b0eadcc506862e9d751ab45185053aa}{p}}\ <<\ \textcolor{stringliteral}{"{}\ bytes\ transferred\ =\ "{}}\ <<\ bytes\_transferred;}
\DoxyCodeLine{01042\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}.str());}
\DoxyCodeLine{01043\ \ \ \ \ \}}
\DoxyCodeLine{01044\ }
\DoxyCodeLine{01045\ \ \ \ \ \textcolor{keywordflow}{while}\ (\mbox{\hyperlink{bn_8cpp_a8b0eadcc506862e9d751ab45185053aa}{p}}\ <\ bytes\_transferred)\ \{}
\DoxyCodeLine{01046\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_alog.static\_test(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}}))\ \{}
\DoxyCodeLine{01047\ \ \ \ \ \ \ \ \ \ \ \ \ std::stringstream\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}};}
\DoxyCodeLine{01048\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}\ <<\ \textcolor{stringliteral}{"{}calling\ consume\ with\ "{}}\ <<\ bytes\_transferred-\/\mbox{\hyperlink{bn_8cpp_a8b0eadcc506862e9d751ab45185053aa}{p}}\ <<\ \textcolor{stringliteral}{"{}\ bytes"{}};}
\DoxyCodeLine{01049\ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}.str());}
\DoxyCodeLine{01050\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01051\ }
\DoxyCodeLine{01052\ \ \ \ \ \ \ \ \ lib::error\_code\ consume\_ec;}
\DoxyCodeLine{01053\ }
\DoxyCodeLine{01054\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_alog.static\_test(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}}))\ \{}
\DoxyCodeLine{01055\ \ \ \ \ \ \ \ \ \ \ \ \ std::stringstream\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}};}
\DoxyCodeLine{01056\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}\ <<\ \textcolor{stringliteral}{"{}Processing\ Bytes:\ "{}}\ <<\ \mbox{\hyperlink{namespacewebsocketpp_1_1utility_a26e5a26395d95d2f6bf3a9edb8d06dd2}{utility::to\_hex}}(\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*\textcolor{keyword}{>}(m\_buf)+\mbox{\hyperlink{bn_8cpp_a8b0eadcc506862e9d751ab45185053aa}{p}},bytes\_transferred-\/\mbox{\hyperlink{bn_8cpp_a8b0eadcc506862e9d751ab45185053aa}{p}});}
\DoxyCodeLine{01057\ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}.str());}
\DoxyCodeLine{01058\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01059\ }
\DoxyCodeLine{01060\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{bn_8cpp_a8b0eadcc506862e9d751ab45185053aa}{p}}\ +=\ m\_processor-\/>consume(}
\DoxyCodeLine{01061\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}*\textcolor{keyword}{>}(m\_buf)+\mbox{\hyperlink{bn_8cpp_a8b0eadcc506862e9d751ab45185053aa}{p}},}
\DoxyCodeLine{01062\ \ \ \ \ \ \ \ \ \ \ \ \ bytes\_transferred-\/\mbox{\hyperlink{bn_8cpp_a8b0eadcc506862e9d751ab45185053aa}{p}},}
\DoxyCodeLine{01063\ \ \ \ \ \ \ \ \ \ \ \ \ consume\_ec}
\DoxyCodeLine{01064\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{01065\ }
\DoxyCodeLine{01066\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_alog.static\_test(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}}))\ \{}
\DoxyCodeLine{01067\ \ \ \ \ \ \ \ \ \ \ \ \ std::stringstream\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}};}
\DoxyCodeLine{01068\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}\ <<\ \textcolor{stringliteral}{"{}bytes\ left\ after\ consume:\ "{}}\ <<\ bytes\_transferred-\/\mbox{\hyperlink{bn_8cpp_a8b0eadcc506862e9d751ab45185053aa}{p}};}
\DoxyCodeLine{01069\ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}.str());}
\DoxyCodeLine{01070\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01071\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (consume\_ec)\ \{}
\DoxyCodeLine{01072\ \ \ \ \ \ \ \ \ \ \ \ \ log\_err(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_ae8a9a9f8b1fa45a731acd340e10aa342}{log::elevel::rerror}},\ \textcolor{stringliteral}{"{}consume"{}},\ consume\_ec);}
\DoxyCodeLine{01073\ }
\DoxyCodeLine{01074\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (config::drop\_on\_protocol\_error)\ \{}
\DoxyCodeLine{01075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{yubihsm__pkcs11_8c_a74995b2493f23c9103413e37da5cdc38}{terminate}}(consume\_ec);}
\DoxyCodeLine{01076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01077\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lib::error\_code\ close\_ec;}
\DoxyCodeLine{01079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{classwebsocketpp_1_1connection_ae718e4fa8b2c37757d8abd71dae07dc9}{close}}(}
\DoxyCodeLine{01080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_1_1processor_1_1error_a30c8a38f28c65b3398f88ad989186111}{processor::error::to\_ws}}(consume\_ec),}
\DoxyCodeLine{01081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ consume\_ec.message(),}
\DoxyCodeLine{01082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ close\_ec}
\DoxyCodeLine{01083\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{01084\ }
\DoxyCodeLine{01085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (close\_ec)\ \{}
\DoxyCodeLine{01086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ log\_err(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_aa909808e0fb142742a0ebd2dca54f517}{log::elevel::fatal}},\ \textcolor{stringliteral}{"{}Protocol\ error\ close\ frame\ "{}},\ close\_ec);}
\DoxyCodeLine{01087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{yubihsm__pkcs11_8c_a74995b2493f23c9103413e37da5cdc38}{terminate}}(close\_ec);}
\DoxyCodeLine{01088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01090\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01091\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01092\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01093\ }
\DoxyCodeLine{01094\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_processor-\/>ready())\ \{}
\DoxyCodeLine{01095\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_alog.static\_test(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}}))\ \{}
\DoxyCodeLine{01096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::stringstream\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}};}
\DoxyCodeLine{01097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}\ <<\ \textcolor{stringliteral}{"{}Complete\ message\ received.\ Dispatching"{}};}
\DoxyCodeLine{01098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}.str());}
\DoxyCodeLine{01099\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01100\ }
\DoxyCodeLine{01101\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{debug__client_8cpp_a08398c4d31a4dc3e42d1b9a9ef64c6ad}{message\_ptr}}\ msg\ =\ m\_processor-\/>get\_message();}
\DoxyCodeLine{01102\ }
\DoxyCodeLine{01103\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!msg)\ \{}
\DoxyCodeLine{01104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\ \textcolor{stringliteral}{"{}null\ message\ from\ m\_processor"{}});}
\DoxyCodeLine{01105\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{namespacewebsocketpp_1_1frame_1_1opcode_aa5e7f94a35f8fb59a925fa01636f08ad}{is\_control}}(msg-\/>get\_opcode()))\ \{}
\DoxyCodeLine{01106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ data\ message,\ dispatch\ to\ user}}
\DoxyCodeLine{01107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_state\ !=\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5a90d929cb6e119645ec2800451bfdc0a0}{session::state::open}})\ \{}
\DoxyCodeLine{01108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_elog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_aef51fd791400121297f38f4381edaebe}{log::elevel::warn}},\ \textcolor{stringliteral}{"{}got\ non-\/close\ frame\ while\ closing"{}});}
\DoxyCodeLine{01109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (m\_message\_handler)\ \{}
\DoxyCodeLine{01110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_message\_handler(m\_connection\_hdl,\ msg);}
\DoxyCodeLine{01111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01112\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ process\_control\_frame(msg);}
\DoxyCodeLine{01114\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01115\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01116\ \ \ \ \ \}}
\DoxyCodeLine{01117\ }
\DoxyCodeLine{01118\ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_af54e9d7c8ef07349d28c3405182bb3c7}{read\_frame}}();}
\DoxyCodeLine{01119\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_abd6866c41c2ae86c3372cf428392a190_cgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_a9c7e83aae3418cdf71e6fcf1dce3a255}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!handle\_read\_handshake@{handle\_read\_handshake}}
\index{handle\_read\_handshake@{handle\_read\_handshake}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{handle\_read\_handshake()}{handle\_read\_handshake()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a9c7e83aae3418cdf71e6fcf1dce3a255} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::handle\+\_\+read\+\_\+handshake (\begin{DoxyParamCaption}\item[{lib\+::error\+\_\+code const \&}]{ec}{, }\item[{size\+\_\+t}]{bytes\+\_\+transferred}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00814}{814}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00816\ \{}
\DoxyCodeLine{00817\ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}connection\ handle\_read\_handshake"{}});}
\DoxyCodeLine{00818\ }
\DoxyCodeLine{00819\ \ \ \ \ lib::error\_code\ ecm\ =\ ec;}
\DoxyCodeLine{00820\ }
\DoxyCodeLine{00821\ \ \ \ \ \textcolor{keywordflow}{if}\ (!ecm)\ \{}
\DoxyCodeLine{00822\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a98eee129ad1f7e30c059c1073d516495}{scoped\_lock\_type}}\ \mbox{\hyperlink{xbyak__mnemonic_8h_aa81aed607133209dade63a226818224d}{lock}}(m\_connection\_state\_lock);}
\DoxyCodeLine{00823\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00824\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5a5d6a70f93d03d19c53ad5f4c4b3a176f}{session::state::connecting}})\ \{}
\DoxyCodeLine{00825\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_internal\_state\ !=\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508da9fc18535c4635e903c366639dad6c9ab}{istate::READ\_HTTP\_REQUEST}})\ \{}
\DoxyCodeLine{00826\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ecm\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}});}
\DoxyCodeLine{00827\ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00828\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (m\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5afff87406dd6d9c5d93c993c3e225a8bc}{session::state::closed}})\ \{}
\DoxyCodeLine{00829\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ connection\ was\ canceled\ while\ the\ response\ was\ being\ sent,}}
\DoxyCodeLine{00830\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ usually\ by\ the\ handshake\ timer.\ This\ is\ basically\ expected}}
\DoxyCodeLine{00831\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ (though\ hopefully\ rare)\ and\ there\ is\ nothing\ we\ can\ do\ so\ ignore.}}
\DoxyCodeLine{00832\ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},}
\DoxyCodeLine{00833\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}handle\_read\_handshake\ invoked\ after\ connection\ was\ closed"{}});}
\DoxyCodeLine{00834\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00835\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00836\ \ \ \ \ \ \ \ \ \ \ \ \ ecm\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}});}
\DoxyCodeLine{00837\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00838\ \ \ \ \ \}}
\DoxyCodeLine{00839\ }
\DoxyCodeLine{00840\ \ \ \ \ \textcolor{keywordflow}{if}\ (ecm)\ \{}
\DoxyCodeLine{00841\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ecm\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1error_a8d371a2562d813e5a2e106e2694d4fb0a73dd0d0f22cd67b7bcc031cd6bdef743}{transport::error::eof}}\ \&\&\ m\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5afff87406dd6d9c5d93c993c3e225a8bc}{session::state::closed}})\ \{}
\DoxyCodeLine{00842\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ expect\ to\ get\ eof\ if\ the\ connection\ is\ closed\ already}}
\DoxyCodeLine{00843\ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},}
\DoxyCodeLine{00844\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}got\ (expected)\ eof/state\ error\ from\ closed\ con"{}});}
\DoxyCodeLine{00845\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00846\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00847\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00848\ \ \ \ \ \ \ \ \ log\_err(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_ae8a9a9f8b1fa45a731acd340e10aa342}{log::elevel::rerror}},\textcolor{stringliteral}{"{}handle\_read\_handshake"{}},ecm);}
\DoxyCodeLine{00849\ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{yubihsm__pkcs11_8c_a74995b2493f23c9103413e37da5cdc38}{terminate}}(ecm);}
\DoxyCodeLine{00850\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00851\ \ \ \ \ \}}
\DoxyCodeLine{00852\ }
\DoxyCodeLine{00853\ \ \ \ \ \textcolor{comment}{//\ Boundaries\ checking.\ TODO:\ How\ much\ of\ this\ should\ be\ done?}}
\DoxyCodeLine{00854\ \ \ \ \ \textcolor{keywordflow}{if}\ (bytes\_transferred\ >\ config::connection\_read\_buffer\_size)\ \{}
\DoxyCodeLine{00855\ \ \ \ \ \ \ \ \ m\_elog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_aa909808e0fb142742a0ebd2dca54f517}{log::elevel::fatal}},\textcolor{stringliteral}{"{}Fatal\ boundaries\ checking\ error."{}});}
\DoxyCodeLine{00856\ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{yubihsm__pkcs11_8c_a74995b2493f23c9103413e37da5cdc38}{terminate}}(make\_error\_code(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da0cd3808919f43e5fbeee42fbcb808d66}{error::general}}));}
\DoxyCodeLine{00857\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00858\ \ \ \ \ \}}
\DoxyCodeLine{00859\ }
\DoxyCodeLine{00860\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ bytes\_processed\ =\ 0;}
\DoxyCodeLine{00861\ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00862\ \ \ \ \ \ \ \ \ bytes\_processed\ =\ m\_request.consume(m\_buf,bytes\_transferred);}
\DoxyCodeLine{00863\ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (http::exception\ \&e)\ \{}
\DoxyCodeLine{00864\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ All\ HTTP\ exceptions\ will\ result\ in\ this\ request\ failing\ and\ an\ error}}
\DoxyCodeLine{00865\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ response\ being\ returned.\ No\ more\ bytes\ will\ be\ read\ in\ this\ con.}}
\DoxyCodeLine{00866\ \ \ \ \ \ \ \ \ m\_response.set\_status(e.m\_error\_code,e.m\_error\_msg);}
\DoxyCodeLine{00867\ \ \ \ \ \ \ \ \ this-\/>write\_http\_response\_error(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da589164fe7382c7355310fc92ff0d53d7}{error::http\_parse\_error}}));}
\DoxyCodeLine{00868\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00869\ \ \ \ \ \}}
\DoxyCodeLine{00870\ }
\DoxyCodeLine{00871\ \ \ \ \ \textcolor{comment}{//\ More\ paranoid\ boundaries\ checking.}}
\DoxyCodeLine{00872\ \ \ \ \ \textcolor{comment}{//\ TODO:\ Is\ this\ overkill?}}
\DoxyCodeLine{00873\ \ \ \ \ \textcolor{keywordflow}{if}\ (bytes\_processed\ >\ bytes\_transferred)\ \{}
\DoxyCodeLine{00874\ \ \ \ \ \ \ \ \ m\_elog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_aa909808e0fb142742a0ebd2dca54f517}{log::elevel::fatal}},\textcolor{stringliteral}{"{}Fatal\ boundaries\ checking\ error."{}});}
\DoxyCodeLine{00875\ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{yubihsm__pkcs11_8c_a74995b2493f23c9103413e37da5cdc38}{terminate}}(make\_error\_code(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da0cd3808919f43e5fbeee42fbcb808d66}{error::general}}));}
\DoxyCodeLine{00876\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00877\ \ \ \ \ \}}
\DoxyCodeLine{00878\ }
\DoxyCodeLine{00879\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_alog.static\_test(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}}))\ \{}
\DoxyCodeLine{00880\ \ \ \ \ \ \ \ \ std::stringstream\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}};}
\DoxyCodeLine{00881\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}\ <<\ \textcolor{stringliteral}{"{}bytes\_transferred:\ "{}}\ <<\ bytes\_transferred}
\DoxyCodeLine{00882\ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ bytes,\ bytes\ processed:\ "{}}\ <<\ bytes\_processed\ <<\ \textcolor{stringliteral}{"{}\ bytes"{}};}
\DoxyCodeLine{00883\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}.str());}
\DoxyCodeLine{00884\ \ \ \ \ \}}
\DoxyCodeLine{00885\ }
\DoxyCodeLine{00886\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_request.ready())\ \{}
\DoxyCodeLine{00887\ \ \ \ \ \ \ \ \ lib::error\_code\ processor\_ec\ =\ this-\/>\mbox{\hyperlink{classwebsocketpp_1_1connection_ac1c576bd4dfebac977eade9ac637a432}{initialize\_processor}}();}
\DoxyCodeLine{00888\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (processor\_ec)\ \{}
\DoxyCodeLine{00889\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>write\_http\_response\_error(processor\_ec);}
\DoxyCodeLine{00890\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00891\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00892\ }
\DoxyCodeLine{00893\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_processor\ \&\&\ m\_processor-\/>get\_version()\ ==\ 0)\ \{}
\DoxyCodeLine{00894\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Version\ 00\ has\ an\ extra\ requirement\ to\ read\ some\ bytes\ after\ the}}
\DoxyCodeLine{00895\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ handshake}}
\DoxyCodeLine{00896\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bytes\_transferred-\/bytes\_processed\ >=\ 8)\ \{}
\DoxyCodeLine{00897\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_request.replace\_header(}
\DoxyCodeLine{00898\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Sec-\/WebSocket-\/Key3"{}},}
\DoxyCodeLine{00899\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string(m\_buf+bytes\_processed,m\_buf+bytes\_processed+8)}
\DoxyCodeLine{00900\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00901\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bytes\_processed\ +=\ 8;}
\DoxyCodeLine{00902\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00903\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ need\ more\ bytes}}
\DoxyCodeLine{00904\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}short\ key3\ read"{}});}
\DoxyCodeLine{00905\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_response.set\_status(\mbox{\hyperlink{namespacewebsocketpp_1_1http_1_1status__code_ae0d61c309e053ee5673517b54e2886c6aff5b07f0195981e0c62dbe9a82bc7dc0}{http::status\_code::internal\_server\_error}});}
\DoxyCodeLine{00906\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>write\_http\_response\_error(\mbox{\hyperlink{namespacewebsocketpp_1_1processor_1_1error_afc5fc4548656f87cfee89994c95bec9c}{processor::error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1processor_1_1error_ae6510ada6a25dcd7af258b6e374e3ca5a9d6c89dd84bccda8e31363fceae6a3c9}{processor::error::short\_key3}}));}
\DoxyCodeLine{00907\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00908\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00909\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00910\ }
\DoxyCodeLine{00911\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_alog.static\_test(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}}))\ \{}
\DoxyCodeLine{00912\ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},m\_request.raw());}
\DoxyCodeLine{00913\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!m\_request.get\_header(\textcolor{stringliteral}{"{}Sec-\/WebSocket-\/Key3"{}}).empty())\ \{}
\DoxyCodeLine{00914\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},}
\DoxyCodeLine{00915\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_1_1utility_a26e5a26395d95d2f6bf3a9edb8d06dd2}{utility::to\_hex}}(m\_request.get\_header(\textcolor{stringliteral}{"{}Sec-\/WebSocket-\/Key3"{}})));}
\DoxyCodeLine{00916\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00917\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00918\ }
\DoxyCodeLine{00919\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ remaining\ bytes\ in\ m\_buf\ are\ frame\ data.\ Copy\ them\ to\ the}}
\DoxyCodeLine{00920\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ beginning\ of\ the\ buffer\ and\ note\ the\ length.\ They\ will\ be\ read\ after}}
\DoxyCodeLine{00921\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ handshake\ completes\ and\ before\ more\ bytes\ are\ read.}}
\DoxyCodeLine{00922\ \ \ \ \ \ \ \ \ std::copy(m\_buf+bytes\_processed,m\_buf+bytes\_transferred,m\_buf);}
\DoxyCodeLine{00923\ \ \ \ \ \ \ \ \ m\_buf\_cursor\ =\ bytes\_transferred-\/bytes\_processed;}
\DoxyCodeLine{00924\ }
\DoxyCodeLine{00925\ }
\DoxyCodeLine{00926\ \ \ \ \ \ \ \ \ m\_internal\_state\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508da2d82e414db0a6cbc60eb3cb4317b71e0}{istate::PROCESS\_HTTP\_REQUEST}};}
\DoxyCodeLine{00927\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00928\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ have\ the\ complete\ request.\ Process\ it.}}
\DoxyCodeLine{00929\ \ \ \ \ \ \ \ \ lib::error\_code\ handshake\_ec\ =\ this-\/>\mbox{\hyperlink{classwebsocketpp_1_1connection_a569483c7dcf542f500f6e9f49d803010}{process\_handshake\_request}}();}
\DoxyCodeLine{00930\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00931\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Write\ a\ response\ if\ this\ is\ a\ websocket\ connection\ or\ if\ it\ is\ an}}
\DoxyCodeLine{00932\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ HTTP\ connection\ for\ which\ the\ response\ has\ not\ been\ deferred\ or}}
\DoxyCodeLine{00933\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ started\ yet\ by\ a\ different\ system\ (i.e.\ still\ in\ init\ state).}}
\DoxyCodeLine{00934\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!m\_is\_http\ ||\ m\_http\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1http__state_a40c0c92e8a4a3dff1ecd017d26f0bc4aa6bd556366b4fcf3745506f7d8b0979ad}{session::http\_state::init}})\ \{}
\DoxyCodeLine{00935\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>write\_http\_response(handshake\_ec);}
\DoxyCodeLine{00936\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00937\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00938\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ read\ at\ least\ 1\ more\ byte}}
\DoxyCodeLine{00939\ \ \ \ \ \ \ \ \ transport\_con\_type::async\_read\_at\_least(}
\DoxyCodeLine{00940\ \ \ \ \ \ \ \ \ \ \ \ \ 1,}
\DoxyCodeLine{00941\ \ \ \ \ \ \ \ \ \ \ \ \ m\_buf,}
\DoxyCodeLine{00942\ \ \ \ \ \ \ \ \ \ \ \ \ config::connection\_read\_buffer\_size,}
\DoxyCodeLine{00943\ \ \ \ \ \ \ \ \ \ \ \ \ lib::bind(}
\DoxyCodeLine{00944\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{classwebsocketpp_1_1connection_a9c7e83aae3418cdf71e6fcf1dce3a255}{type::handle\_read\_handshake}},}
\DoxyCodeLine{00945\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a01a5af7dc2f35ff8f15da8c2cf3a3b02}{type::get\_shared}}(),}
\DoxyCodeLine{00946\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lib::placeholders::\_1,}
\DoxyCodeLine{00947\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lib::placeholders::\_2}
\DoxyCodeLine{00948\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00949\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00950\ \ \ \ \ \}}
\DoxyCodeLine{00951\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a261ca392f8b31cd0f5a1b2ccc11c3037}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!handle\_read\_http\_response@{handle\_read\_http\_response}}
\index{handle\_read\_http\_response@{handle\_read\_http\_response}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{handle\_read\_http\_response()}{handle\_read\_http\_response()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a261ca392f8b31cd0f5a1b2ccc11c3037} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::handle\+\_\+read\+\_\+http\+\_\+response (\begin{DoxyParamCaption}\item[{lib\+::error\+\_\+code const \&}]{ec}{, }\item[{size\+\_\+t}]{bytes\+\_\+transferred}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l01555}{1555}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01557\ \{}
\DoxyCodeLine{01558\ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}handle\_read\_http\_response"{}});}
\DoxyCodeLine{01559\ }
\DoxyCodeLine{01560\ \ \ \ \ lib::error\_code\ ecm\ =\ ec;}
\DoxyCodeLine{01561\ }
\DoxyCodeLine{01562\ \ \ \ \ \textcolor{keywordflow}{if}\ (!ecm)\ \{}
\DoxyCodeLine{01563\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a98eee129ad1f7e30c059c1073d516495}{scoped\_lock\_type}}\ \mbox{\hyperlink{xbyak__mnemonic_8h_aa81aed607133209dade63a226818224d}{lock}}(m\_connection\_state\_lock);}
\DoxyCodeLine{01564\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01565\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5a5d6a70f93d03d19c53ad5f4c4b3a176f}{session::state::connecting}})\ \{}
\DoxyCodeLine{01566\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_internal\_state\ !=\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508dac3e0dc06814a26a2cef1efd3cf8635d4}{istate::READ\_HTTP\_RESPONSE}})\ \{}
\DoxyCodeLine{01567\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ecm\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}});}
\DoxyCodeLine{01568\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01569\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (m\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5afff87406dd6d9c5d93c993c3e225a8bc}{session::state::closed}})\ \{}
\DoxyCodeLine{01570\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ connection\ was\ canceled\ while\ the\ response\ was\ being\ sent,}}
\DoxyCodeLine{01571\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ usually\ by\ the\ handshake\ timer.\ This\ is\ basically\ expected}}
\DoxyCodeLine{01572\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ (though\ hopefully\ rare)\ and\ there\ is\ nothing\ we\ can\ do\ so\ ignore.}}
\DoxyCodeLine{01573\ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},}
\DoxyCodeLine{01574\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}handle\_read\_http\_response\ invoked\ after\ connection\ was\ closed"{}});}
\DoxyCodeLine{01575\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01576\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01577\ \ \ \ \ \ \ \ \ \ \ \ \ ecm\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}});}
\DoxyCodeLine{01578\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01579\ \ \ \ \ \}}
\DoxyCodeLine{01580\ }
\DoxyCodeLine{01581\ \ \ \ \ \textcolor{keywordflow}{if}\ (ecm)\ \{}
\DoxyCodeLine{01582\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ecm\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1error_a8d371a2562d813e5a2e106e2694d4fb0a73dd0d0f22cd67b7bcc031cd6bdef743}{transport::error::eof}}\ \&\&\ m\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5afff87406dd6d9c5d93c993c3e225a8bc}{session::state::closed}})\ \{}
\DoxyCodeLine{01583\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ expect\ to\ get\ eof\ if\ the\ connection\ is\ closed\ already}}
\DoxyCodeLine{01584\ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},}
\DoxyCodeLine{01585\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}got\ (expected)\ eof/state\ error\ from\ closed\ con"{}});}
\DoxyCodeLine{01586\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01587\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01588\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01589\ \ \ \ \ \ \ \ \ log\_err(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_ae8a9a9f8b1fa45a731acd340e10aa342}{log::elevel::rerror}},\textcolor{stringliteral}{"{}handle\_read\_http\_response"{}},ecm);}
\DoxyCodeLine{01590\ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{yubihsm__pkcs11_8c_a74995b2493f23c9103413e37da5cdc38}{terminate}}(ecm);}
\DoxyCodeLine{01591\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01592\ \ \ \ \ \}}
\DoxyCodeLine{01593\ \ \ \ \ }
\DoxyCodeLine{01594\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ bytes\_processed\ =\ 0;}
\DoxyCodeLine{01595\ \ \ \ \ \textcolor{comment}{//\ TODO:\ refactor\ this\ to\ use\ error\ codes\ rather\ than\ exceptions}}
\DoxyCodeLine{01596\ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{01597\ \ \ \ \ \ \ \ \ bytes\_processed\ =\ m\_response.consume(m\_buf,bytes\_transferred);}
\DoxyCodeLine{01598\ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (http::exception\ \&\ e)\ \{}
\DoxyCodeLine{01599\ \ \ \ \ \ \ \ \ m\_elog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_ae8a9a9f8b1fa45a731acd340e10aa342}{log::elevel::rerror}},}
\DoxyCodeLine{01600\ \ \ \ \ \ \ \ \ \ \ \ \ std::string(\textcolor{stringliteral}{"{}error\ in\ handle\_read\_http\_response:\ "{}})+e.what());}
\DoxyCodeLine{01601\ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{yubihsm__pkcs11_8c_a74995b2493f23c9103413e37da5cdc38}{terminate}}(make\_error\_code(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da0cd3808919f43e5fbeee42fbcb808d66}{error::general}}));}
\DoxyCodeLine{01602\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01603\ \ \ \ \ \}}
\DoxyCodeLine{01604\ }
\DoxyCodeLine{01605\ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},std::string(\textcolor{stringliteral}{"{}Raw\ response:\ "{}})+m\_response.raw());}
\DoxyCodeLine{01606\ }
\DoxyCodeLine{01607\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_response.headers\_ready())\ \{}
\DoxyCodeLine{01608\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_handshake\_timer)\ \{}
\DoxyCodeLine{01609\ \ \ \ \ \ \ \ \ \ \ \ \ m\_handshake\_timer-\/>cancel();}
\DoxyCodeLine{01610\ \ \ \ \ \ \ \ \ \ \ \ \ m\_handshake\_timer.reset();}
\DoxyCodeLine{01611\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01612\ }
\DoxyCodeLine{01613\ \ \ \ \ \ \ \ \ lib::error\_code\ validate\_ec\ =\ m\_processor-\/>validate\_server\_handshake\_response(}
\DoxyCodeLine{01614\ \ \ \ \ \ \ \ \ \ \ \ \ m\_request,}
\DoxyCodeLine{01615\ \ \ \ \ \ \ \ \ \ \ \ \ m\_response}
\DoxyCodeLine{01616\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{01617\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (validate\_ec)\ \{}
\DoxyCodeLine{01618\ \ \ \ \ \ \ \ \ \ \ \ \ log\_err(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_ae8a9a9f8b1fa45a731acd340e10aa342}{log::elevel::rerror}},\textcolor{stringliteral}{"{}Server\ handshake\ response"{}},validate\_ec);}
\DoxyCodeLine{01619\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{yubihsm__pkcs11_8c_a74995b2493f23c9103413e37da5cdc38}{terminate}}(validate\_ec);}
\DoxyCodeLine{01620\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01621\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01622\ }
\DoxyCodeLine{01623\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Read\ extension\ parameters\ and\ set\ up\ values\ necessary\ for\ the\ end}}
\DoxyCodeLine{01624\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ user\ to\ complete\ extension\ negotiation.}}
\DoxyCodeLine{01625\ \ \ \ \ \ \ \ \ std::pair<lib::error\_code,std::string>\ neg\_results;}
\DoxyCodeLine{01626\ \ \ \ \ \ \ \ \ neg\_results\ =\ m\_processor-\/>negotiate\_extensions(m\_response);}
\DoxyCodeLine{01627\ }
\DoxyCodeLine{01628\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (neg\_results.first)\ \{}
\DoxyCodeLine{01629\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ There\ was\ a\ fatal\ error\ in\ extension\ negotiation.\ For\ the\ moment}}
\DoxyCodeLine{01630\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ kill\ all\ connections\ that\ fail\ extension\ negotiation.}}
\DoxyCodeLine{01631\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01632\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ deal\ with\ cases\ where\ the\ response\ is\ well\ formed\ but\ }}
\DoxyCodeLine{01633\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ doesn't\ match\ the\ options\ requested\ by\ the\ client.\ Its\ possible}}
\DoxyCodeLine{01634\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ that\ the\ best\ behavior\ in\ this\ cases\ is\ to\ log\ and\ continue\ with}}
\DoxyCodeLine{01635\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ an\ unextended\ connection.}}
\DoxyCodeLine{01636\ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\ \textcolor{stringliteral}{"{}Extension\ negotiation\ failed:\ "{}}\ }
\DoxyCodeLine{01637\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ +\ neg\_results.first.message());}
\DoxyCodeLine{01638\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{yubihsm__pkcs11_8c_a74995b2493f23c9103413e37da5cdc38}{terminate}}(make\_error\_code(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7ab039563d30f7760c3cd34f1fd680b1}{error::extension\_neg\_failed}}));}
\DoxyCodeLine{01639\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ close\ connection\ with\ reason\ 1010\ (and\ list\ extensions)}}
\DoxyCodeLine{01640\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01641\ }
\DoxyCodeLine{01642\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ response\ is\ valid,\ connection\ can\ now\ be\ assumed\ to\ be\ open\ \ \ \ \ \ }}
\DoxyCodeLine{01643\ \ \ \ \ \ \ \ \ m\_internal\_state\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508da20ef9274fcce8154c6cc28d00b900709}{istate::PROCESS\_CONNECTION}};}
\DoxyCodeLine{01644\ \ \ \ \ \ \ \ \ m\_state\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5a90d929cb6e119645ec2800451bfdc0a0}{session::state::open}};}
\DoxyCodeLine{01645\ }
\DoxyCodeLine{01646\ \ \ \ \ \ \ \ \ this-\/>log\_open\_result();}
\DoxyCodeLine{01647\ }
\DoxyCodeLine{01648\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_open\_handler)\ \{}
\DoxyCodeLine{01649\ \ \ \ \ \ \ \ \ \ \ \ \ m\_open\_handler(m\_connection\_hdl);}
\DoxyCodeLine{01650\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01651\ }
\DoxyCodeLine{01652\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ remaining\ bytes\ in\ m\_buf\ are\ frame\ data.\ Copy\ them\ to\ the}}
\DoxyCodeLine{01653\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ beginning\ of\ the\ buffer\ and\ note\ the\ length.\ They\ will\ be\ read\ after}}
\DoxyCodeLine{01654\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ handshake\ completes\ and\ before\ more\ bytes\ are\ read.}}
\DoxyCodeLine{01655\ \ \ \ \ \ \ \ \ std::copy(m\_buf+bytes\_processed,m\_buf+bytes\_transferred,m\_buf);}
\DoxyCodeLine{01656\ \ \ \ \ \ \ \ \ m\_buf\_cursor\ =\ bytes\_transferred-\/bytes\_processed;}
\DoxyCodeLine{01657\ }
\DoxyCodeLine{01658\ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{classwebsocketpp_1_1connection_abd6866c41c2ae86c3372cf428392a190}{handle\_read\_frame}}(lib::error\_code(),\ m\_buf\_cursor);}
\DoxyCodeLine{01659\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01660\ \ \ \ \ \ \ \ \ transport\_con\_type::async\_read\_at\_least(}
\DoxyCodeLine{01661\ \ \ \ \ \ \ \ \ \ \ \ \ 1,}
\DoxyCodeLine{01662\ \ \ \ \ \ \ \ \ \ \ \ \ m\_buf,}
\DoxyCodeLine{01663\ \ \ \ \ \ \ \ \ \ \ \ \ config::connection\_read\_buffer\_size,}
\DoxyCodeLine{01664\ \ \ \ \ \ \ \ \ \ \ \ \ lib::bind(}
\DoxyCodeLine{01665\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{classwebsocketpp_1_1connection_a261ca392f8b31cd0f5a1b2ccc11c3037}{type::handle\_read\_http\_response}},}
\DoxyCodeLine{01666\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a01a5af7dc2f35ff8f15da8c2cf3a3b02}{type::get\_shared}}(),}
\DoxyCodeLine{01667\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lib::placeholders::\_1,}
\DoxyCodeLine{01668\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lib::placeholders::\_2}
\DoxyCodeLine{01669\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{01670\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{01671\ \ \ \ \ \}}
\DoxyCodeLine{01672\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_a261ca392f8b31cd0f5a1b2ccc11c3037_cgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_adb5b479b7d66eb289390b26d12332d84}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!handle\_resume\_reading@{handle\_resume\_reading}}
\index{handle\_resume\_reading@{handle\_resume\_reading}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{handle\_resume\_reading()}{handle\_resume\_reading()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_adb5b479b7d66eb289390b26d12332d84} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::handle\+\_\+resume\+\_\+reading (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

Resume reading helper method. Not safe to call directly. 

Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00390}{390}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00391\ \ \ \ m\_read\_flag\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00392\ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_af54e9d7c8ef07349d28c3405182bb3c7}{read\_frame}}();}
\DoxyCodeLine{00393\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_af37addaf4d89de32d3d8f4da668313c5}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!handle\_send\_http\_request@{handle\_send\_http\_request}}
\index{handle\_send\_http\_request@{handle\_send\_http\_request}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{handle\_send\_http\_request()}{handle\_send\_http\_request()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_af37addaf4d89de32d3d8f4da668313c5} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::handle\+\_\+send\+\_\+http\+\_\+request (\begin{DoxyParamCaption}\item[{lib\+::error\+\_\+code const \&}]{ec}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l01502}{1502}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01502\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01503\ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}handle\_send\_http\_request"{}});}
\DoxyCodeLine{01504\ }
\DoxyCodeLine{01505\ \ \ \ \ lib::error\_code\ ecm\ =\ ec;}
\DoxyCodeLine{01506\ }
\DoxyCodeLine{01507\ \ \ \ \ \textcolor{keywordflow}{if}\ (!ecm)\ \{}
\DoxyCodeLine{01508\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a98eee129ad1f7e30c059c1073d516495}{scoped\_lock\_type}}\ \mbox{\hyperlink{xbyak__mnemonic_8h_aa81aed607133209dade63a226818224d}{lock}}(m\_connection\_state\_lock);}
\DoxyCodeLine{01509\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01510\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5a5d6a70f93d03d19c53ad5f4c4b3a176f}{session::state::connecting}})\ \{}
\DoxyCodeLine{01511\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_internal\_state\ !=\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508da11b23897d538e9bb91558886b3ccea99}{istate::WRITE\_HTTP\_REQUEST}})\ \{}
\DoxyCodeLine{01512\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ecm\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}});}
\DoxyCodeLine{01513\ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01514\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_internal\_state\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508dac3e0dc06814a26a2cef1efd3cf8635d4}{istate::READ\_HTTP\_RESPONSE}};}
\DoxyCodeLine{01515\ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01516\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (m\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5afff87406dd6d9c5d93c993c3e225a8bc}{session::state::closed}})\ \{}
\DoxyCodeLine{01517\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ connection\ was\ canceled\ while\ the\ response\ was\ being\ sent,}}
\DoxyCodeLine{01518\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ usually\ by\ the\ handshake\ timer.\ This\ is\ basically\ expected}}
\DoxyCodeLine{01519\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ (though\ hopefully\ rare)\ and\ there\ is\ nothing\ we\ can\ do\ so\ ignore.}}
\DoxyCodeLine{01520\ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},}
\DoxyCodeLine{01521\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}handle\_send\_http\_request\ invoked\ after\ connection\ was\ closed"{}});}
\DoxyCodeLine{01522\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01523\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01524\ \ \ \ \ \ \ \ \ \ \ \ \ ecm\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}});}
\DoxyCodeLine{01525\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01526\ \ \ \ \ \}}
\DoxyCodeLine{01527\ }
\DoxyCodeLine{01528\ \ \ \ \ \textcolor{keywordflow}{if}\ (ecm)\ \{}
\DoxyCodeLine{01529\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ecm\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1error_a8d371a2562d813e5a2e106e2694d4fb0a73dd0d0f22cd67b7bcc031cd6bdef743}{transport::error::eof}}\ \&\&\ m\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5afff87406dd6d9c5d93c993c3e225a8bc}{session::state::closed}})\ \{}
\DoxyCodeLine{01530\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ expect\ to\ get\ eof\ if\ the\ connection\ is\ closed\ already}}
\DoxyCodeLine{01531\ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},}
\DoxyCodeLine{01532\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}got\ (expected)\ eof/state\ error\ from\ closed\ con"{}});}
\DoxyCodeLine{01533\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01534\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01535\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01536\ \ \ \ \ \ \ \ \ log\_err(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_ae8a9a9f8b1fa45a731acd340e10aa342}{log::elevel::rerror}},\textcolor{stringliteral}{"{}handle\_send\_http\_request"{}},ecm);}
\DoxyCodeLine{01537\ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{yubihsm__pkcs11_8c_a74995b2493f23c9103413e37da5cdc38}{terminate}}(ecm);}
\DoxyCodeLine{01538\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01539\ \ \ \ \ \}}
\DoxyCodeLine{01540\ }
\DoxyCodeLine{01541\ \ \ \ \ transport\_con\_type::async\_read\_at\_least(}
\DoxyCodeLine{01542\ \ \ \ \ \ \ \ \ 1,}
\DoxyCodeLine{01543\ \ \ \ \ \ \ \ \ m\_buf,}
\DoxyCodeLine{01544\ \ \ \ \ \ \ \ \ config::connection\_read\_buffer\_size,}
\DoxyCodeLine{01545\ \ \ \ \ \ \ \ \ lib::bind(}
\DoxyCodeLine{01546\ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{classwebsocketpp_1_1connection_a261ca392f8b31cd0f5a1b2ccc11c3037}{type::handle\_read\_http\_response}},}
\DoxyCodeLine{01547\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a01a5af7dc2f35ff8f15da8c2cf3a3b02}{type::get\_shared}}(),}
\DoxyCodeLine{01548\ \ \ \ \ \ \ \ \ \ \ \ \ lib::placeholders::\_1,}
\DoxyCodeLine{01549\ \ \ \ \ \ \ \ \ \ \ \ \ lib::placeholders::\_2}
\DoxyCodeLine{01550\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{01551\ \ \ \ \ );}
\DoxyCodeLine{01552\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_af37addaf4d89de32d3d8f4da668313c5_cgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_a5012a184129c08ea3f6cfa377e1770c1}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!handle\_terminate@{handle\_terminate}}
\index{handle\_terminate@{handle\_terminate}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{handle\_terminate()}{handle\_terminate()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a5012a184129c08ea3f6cfa377e1770c1} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::handle\+\_\+terminate (\begin{DoxyParamCaption}\item[{terminate\+\_\+status}]{tstat}{, }\item[{lib\+::error\+\_\+code const \&}]{ec}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l01760}{1760}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01762\ \{}
\DoxyCodeLine{01763\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_alog.static\_test(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}}))\ \{}
\DoxyCodeLine{01764\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}connection\ handle\_terminate"{}});}
\DoxyCodeLine{01765\ \ \ \ \ \}}
\DoxyCodeLine{01766\ }
\DoxyCodeLine{01767\ \ \ \ \ \textcolor{keywordflow}{if}\ (ec)\ \{}
\DoxyCodeLine{01768\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ there\ was\ an\ error\ actually\ shutting\ down\ the\ connection}}
\DoxyCodeLine{01769\ \ \ \ \ \ \ \ \ log\_err(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_a0b1dbc650c6f2711522c096496423726}{log::elevel::devel}},\textcolor{stringliteral}{"{}handle\_terminate"{}},ec);}
\DoxyCodeLine{01770\ \ \ \ \ \}}
\DoxyCodeLine{01771\ }
\DoxyCodeLine{01772\ \ \ \ \ \textcolor{comment}{//\ clean\ shutdown}}
\DoxyCodeLine{01773\ \ \ \ \ \textcolor{keywordflow}{if}\ (tstat\ ==\ failed)\ \{}
\DoxyCodeLine{01774\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_ec\ !=\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da378e4b84397008e32d03d0fea4f15326}{error::http\_connection\_ended}})\ \{}
\DoxyCodeLine{01775\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_fail\_handler)\ \{}
\DoxyCodeLine{01776\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_fail\_handler(m\_connection\_hdl);}
\DoxyCodeLine{01777\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01778\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01779\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (tstat\ ==\ closed)\ \{}
\DoxyCodeLine{01780\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_close\_handler)\ \{}
\DoxyCodeLine{01781\ \ \ \ \ \ \ \ \ \ \ \ \ m\_close\_handler(m\_connection\_hdl);}
\DoxyCodeLine{01782\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01783\ \ \ \ \ \ \ \ \ log\_close\_result();}
\DoxyCodeLine{01784\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01785\ \ \ \ \ \ \ \ \ m\_elog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_ae8a9a9f8b1fa45a731acd340e10aa342}{log::elevel::rerror}},\textcolor{stringliteral}{"{}Unknown\ terminate\_status"{}});}
\DoxyCodeLine{01786\ \ \ \ \ \}}
\DoxyCodeLine{01787\ }
\DoxyCodeLine{01788\ \ \ \ \ \textcolor{comment}{//\ call\ the\ termination\ handler\ if\ it\ exists}}
\DoxyCodeLine{01789\ \ \ \ \ \textcolor{comment}{//\ if\ it\ exists\ it\ might\ (but\ shouldn't)\ refer\ to\ a\ bad\ memory\ location.}}
\DoxyCodeLine{01790\ \ \ \ \ \textcolor{comment}{//\ If\ it\ does,\ we\ don't\ care\ and\ should\ catch\ and\ ignore\ it.}}
\DoxyCodeLine{01791\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_termination\_handler)\ \{}
\DoxyCodeLine{01792\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{01793\ \ \ \ \ \ \ \ \ \ \ \ \ m\_termination\_handler(\mbox{\hyperlink{classwebsocketpp_1_1connection_a01a5af7dc2f35ff8f15da8c2cf3a3b02}{type::get\_shared}}());}
\DoxyCodeLine{01794\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (std::exception\ \textcolor{keyword}{const}\ \&\ e)\ \{}
\DoxyCodeLine{01795\ \ \ \ \ \ \ \ \ \ \ \ \ m\_elog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_aef51fd791400121297f38f4381edaebe}{log::elevel::warn}},}
\DoxyCodeLine{01796\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string(\textcolor{stringliteral}{"{}termination\_handler\ call\ failed.\ Reason\ was:\ "{}})+e.what());}
\DoxyCodeLine{01797\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01798\ \ \ \ \ \}}
\DoxyCodeLine{01799\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_ad42c5982a35b82c9009971722943b1e0}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!handle\_transport\_init@{handle\_transport\_init}}
\index{handle\_transport\_init@{handle\_transport\_init}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{handle\_transport\_init()}{handle\_transport\_init()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_ad42c5982a35b82c9009971722943b1e0} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::handle\+\_\+transport\+\_\+init (\begin{DoxyParamCaption}\item[{lib\+::error\+\_\+code const \&}]{ec}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00750}{750}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00750\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00751\ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}connection\ handle\_transport\_init"{}});}
\DoxyCodeLine{00752\ }
\DoxyCodeLine{00753\ \ \ \ \ lib::error\_code\ ecm\ =\ ec;}
\DoxyCodeLine{00754\ }
\DoxyCodeLine{00755\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_internal\_state\ !=\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508dab874993580bfcc74626520e293659887}{istate::TRANSPORT\_INIT}})\ \{}
\DoxyCodeLine{00756\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},}
\DoxyCodeLine{00757\ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}handle\_transport\_init\ must\ be\ called\ from\ transport\ init\ state"{}});}
\DoxyCodeLine{00758\ \ \ \ \ \ \ \ \ ecm\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}});}
\DoxyCodeLine{00759\ \ \ \ \ \}}
\DoxyCodeLine{00760\ }
\DoxyCodeLine{00761\ \ \ \ \ \textcolor{keywordflow}{if}\ (ecm)\ \{}
\DoxyCodeLine{00762\ \ \ \ \ \ \ \ \ std::stringstream\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}};}
\DoxyCodeLine{00763\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}\ <<\ \textcolor{stringliteral}{"{}handle\_transport\_init\ received\ error:\ "{}}<<\ ecm.message();}
\DoxyCodeLine{00764\ \ \ \ \ \ \ \ \ m\_elog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_ae8a9a9f8b1fa45a731acd340e10aa342}{log::elevel::rerror}},\mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}.str());}
\DoxyCodeLine{00765\ }
\DoxyCodeLine{00766\ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{yubihsm__pkcs11_8c_a74995b2493f23c9103413e37da5cdc38}{terminate}}(ecm);}
\DoxyCodeLine{00767\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00768\ \ \ \ \ \}}
\DoxyCodeLine{00769\ }
\DoxyCodeLine{00770\ \ \ \ \ \textcolor{comment}{//\ At\ this\ point\ the\ transport\ is\ ready\ to\ read\ and\ write\ bytes.}}
\DoxyCodeLine{00771\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_is\_server)\ \{}
\DoxyCodeLine{00772\ \ \ \ \ \ \ \ \ m\_internal\_state\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508da9fc18535c4635e903c366639dad6c9ab}{istate::READ\_HTTP\_REQUEST}};}
\DoxyCodeLine{00773\ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{classwebsocketpp_1_1connection_a9e19e781b4abda3e4a39f4f25077a29c}{read\_handshake}}(1);}
\DoxyCodeLine{00774\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00775\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ are\ a\ client.\ Set\ the\ processor\ to\ the\ version\ specified\ in\ the}}
\DoxyCodeLine{00776\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ config\ file\ and\ send\ a\ handshake\ request.}}
\DoxyCodeLine{00777\ \ \ \ \ \ \ \ \ m\_internal\_state\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508da11b23897d538e9bb91558886b3ccea99}{istate::WRITE\_HTTP\_REQUEST}};}
\DoxyCodeLine{00778\ \ \ \ \ \ \ \ \ m\_processor\ =\ get\_processor(config::client\_version);}
\DoxyCodeLine{00779\ \ \ \ \ \ \ \ \ this-\/>send\_http\_request();}
\DoxyCodeLine{00780\ \ \ \ \ \}}
\DoxyCodeLine{00781\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a867f94b82788e978ea116d50cf83d72e}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!handle\_write\_frame@{handle\_write\_frame}}
\index{handle\_write\_frame@{handle\_write\_frame}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{handle\_write\_frame()}{handle\_write\_frame()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a867f94b82788e978ea116d50cf83d72e} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::handle\+\_\+write\+\_\+frame (\begin{DoxyParamCaption}\item[{lib\+::error\+\_\+code const \&}]{ec}{}\end{DoxyParamCaption})}

\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000007}{Todo}}]unit tests\end{DoxyRefDesc}


This method locks the m\+\_\+write\+\_\+lock mutex


\begin{DoxyParams}{Parameters}
{\em terminate} & Whether or not to terminate the connection upon completion of this write.\\
\hline
{\em ec} & \doxylink{struct_a}{A} status code from the transport layer, zero on success, non-\/zero otherwise. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l01898}{1898}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01899\ \{}
\DoxyCodeLine{01900\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_alog.static\_test(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}}))\ \{}
\DoxyCodeLine{01901\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}connection\ handle\_write\_frame"{}});}
\DoxyCodeLine{01902\ \ \ \ \ \}}
\DoxyCodeLine{01903\ }
\DoxyCodeLine{01904\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacewebsocketpp_1_1close_1_1status_a3f9ce953f12693f74493e2eb7a80952b}{terminal}}\ =\ m\_current\_msgs.back()-\/>get\_terminal();}
\DoxyCodeLine{01905\ }
\DoxyCodeLine{01906\ \ \ \ \ m\_send\_buffer.clear();}
\DoxyCodeLine{01907\ \ \ \ \ m\_current\_msgs.clear();}
\DoxyCodeLine{01908\ \ \ \ \ \textcolor{comment}{//\ TODO:\ recycle\ instead\ of\ deleting}}
\DoxyCodeLine{01909\ }
\DoxyCodeLine{01910\ \ \ \ \ \textcolor{keywordflow}{if}\ (ec)\ \{}
\DoxyCodeLine{01911\ \ \ \ \ \ \ \ \ log\_err(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_aa909808e0fb142742a0ebd2dca54f517}{log::elevel::fatal}},\textcolor{stringliteral}{"{}handle\_write\_frame"{}},ec);}
\DoxyCodeLine{01912\ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{yubihsm__pkcs11_8c_a74995b2493f23c9103413e37da5cdc38}{terminate}}(ec);}
\DoxyCodeLine{01913\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01914\ \ \ \ \ \}}
\DoxyCodeLine{01915\ }
\DoxyCodeLine{01916\ \ \ \ \ \textcolor{keywordflow}{if}\ (terminal)\ \{}
\DoxyCodeLine{01917\ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{yubihsm__pkcs11_8c_a74995b2493f23c9103413e37da5cdc38}{terminate}}(lib::error\_code());}
\DoxyCodeLine{01918\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01919\ \ \ \ \ \}}
\DoxyCodeLine{01920\ }
\DoxyCodeLine{01921\ \ \ \ \ \textcolor{keywordtype}{bool}\ needs\_writing\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01922\ \ \ \ \ \{}
\DoxyCodeLine{01923\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a98eee129ad1f7e30c059c1073d516495}{scoped\_lock\_type}}\ \mbox{\hyperlink{xbyak__mnemonic_8h_aa81aed607133209dade63a226818224d}{lock}}(m\_write\_lock);}
\DoxyCodeLine{01924\ }
\DoxyCodeLine{01925\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ release\ write\ flag}}
\DoxyCodeLine{01926\ \ \ \ \ \ \ \ \ m\_write\_flag\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01927\ }
\DoxyCodeLine{01928\ \ \ \ \ \ \ \ \ needs\_writing\ =\ !m\_send\_queue.empty();}
\DoxyCodeLine{01929\ \ \ \ \ \}}
\DoxyCodeLine{01930\ }
\DoxyCodeLine{01931\ \ \ \ \ \textcolor{keywordflow}{if}\ (needs\_writing)\ \{}
\DoxyCodeLine{01932\ \ \ \ \ \ \ \ \ transport\_con\_type::dispatch(lib::bind(}
\DoxyCodeLine{01933\ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{classwebsocketpp_1_1connection_a8d26a29e90d4847f3882c280112c6b60}{type::write\_frame}},}
\DoxyCodeLine{01934\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a01a5af7dc2f35ff8f15da8c2cf3a3b02}{type::get\_shared}}()}
\DoxyCodeLine{01935\ \ \ \ \ \ \ \ \ ));}
\DoxyCodeLine{01936\ \ \ \ \ \}}
\DoxyCodeLine{01937\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=277pt]{classwebsocketpp_1_1connection_a867f94b82788e978ea116d50cf83d72e_cgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_a6f2451a76c49b4c2a88de4efd4f8bda6}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!handle\_write\_http\_response@{handle\_write\_http\_response}}
\index{handle\_write\_http\_response@{handle\_write\_http\_response}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{handle\_write\_http\_response()}{handle\_write\_http\_response()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a6f2451a76c49b4c2a88de4efd4f8bda6} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::handle\+\_\+write\+\_\+http\+\_\+response (\begin{DoxyParamCaption}\item[{lib\+::error\+\_\+code const \&}]{ec}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l01360}{1360}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01361\ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}handle\_write\_http\_response"{}});}
\DoxyCodeLine{01362\ }
\DoxyCodeLine{01363\ \ \ \ \ lib::error\_code\ ecm\ =\ ec;}
\DoxyCodeLine{01364\ }
\DoxyCodeLine{01365\ \ \ \ \ \textcolor{keywordflow}{if}\ (!ecm)\ \{}
\DoxyCodeLine{01366\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a98eee129ad1f7e30c059c1073d516495}{scoped\_lock\_type}}\ \mbox{\hyperlink{xbyak__mnemonic_8h_aa81aed607133209dade63a226818224d}{lock}}(m\_connection\_state\_lock);}
\DoxyCodeLine{01367\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01368\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5a5d6a70f93d03d19c53ad5f4c4b3a176f}{session::state::connecting}})\ \{}
\DoxyCodeLine{01369\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_internal\_state\ !=\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508da2d82e414db0a6cbc60eb3cb4317b71e0}{istate::PROCESS\_HTTP\_REQUEST}})\ \{}
\DoxyCodeLine{01370\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ecm\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}});}
\DoxyCodeLine{01371\ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01372\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (m\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5afff87406dd6d9c5d93c993c3e225a8bc}{session::state::closed}})\ \{}
\DoxyCodeLine{01373\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ connection\ was\ canceled\ while\ the\ response\ was\ being\ sent,}}
\DoxyCodeLine{01374\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ usually\ by\ the\ handshake\ timer.\ This\ is\ basically\ expected}}
\DoxyCodeLine{01375\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ (though\ hopefully\ rare)\ and\ there\ is\ nothing\ we\ can\ do\ so\ ignore.}}
\DoxyCodeLine{01376\ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},}
\DoxyCodeLine{01377\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}handle\_write\_http\_response\ invoked\ after\ connection\ was\ closed"{}});}
\DoxyCodeLine{01378\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01379\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01380\ \ \ \ \ \ \ \ \ \ \ \ \ ecm\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}});}
\DoxyCodeLine{01381\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01382\ \ \ \ \ \}}
\DoxyCodeLine{01383\ }
\DoxyCodeLine{01384\ \ \ \ \ \textcolor{keywordflow}{if}\ (ecm)\ \{}
\DoxyCodeLine{01385\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ecm\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1error_a8d371a2562d813e5a2e106e2694d4fb0a73dd0d0f22cd67b7bcc031cd6bdef743}{transport::error::eof}}\ \&\&\ m\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5afff87406dd6d9c5d93c993c3e225a8bc}{session::state::closed}})\ \{}
\DoxyCodeLine{01386\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ expect\ to\ get\ eof\ if\ the\ connection\ is\ closed\ already}}
\DoxyCodeLine{01387\ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},}
\DoxyCodeLine{01388\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}got\ (expected)\ eof/state\ error\ from\ closed\ con"{}});}
\DoxyCodeLine{01389\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01390\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01391\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01392\ \ \ \ \ \ \ \ \ log\_err(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_ae8a9a9f8b1fa45a731acd340e10aa342}{log::elevel::rerror}},\textcolor{stringliteral}{"{}handle\_write\_http\_response"{}},ecm);}
\DoxyCodeLine{01393\ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{yubihsm__pkcs11_8c_a74995b2493f23c9103413e37da5cdc38}{terminate}}(ecm);}
\DoxyCodeLine{01394\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01395\ \ \ \ \ \}}
\DoxyCodeLine{01396\ }
\DoxyCodeLine{01397\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_handshake\_timer)\ \{}
\DoxyCodeLine{01398\ \ \ \ \ \ \ \ \ m\_handshake\_timer-\/>cancel();}
\DoxyCodeLine{01399\ \ \ \ \ \ \ \ \ m\_handshake\_timer.reset();}
\DoxyCodeLine{01400\ \ \ \ \ \}}
\DoxyCodeLine{01401\ }
\DoxyCodeLine{01402\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_response.get\_status\_code()\ !=\ \mbox{\hyperlink{namespacewebsocketpp_1_1http_1_1status__code_ae0d61c309e053ee5673517b54e2886c6af8fdb6ffaa8898b9a69112d3dd8f0bfc}{http::status\_code::switching\_protocols}})}
\DoxyCodeLine{01403\ \ \ \ \ \{}
\DoxyCodeLine{01404\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*if\ (m\_processor\ ||\ m\_ec\ ==\ error::http\_parse\_error\ ||\ }}
\DoxyCodeLine{01405\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ m\_ec\ ==\ error::invalid\_version\ ||\ m\_ec\ ==\ error::unsupported\_version}}
\DoxyCodeLine{01406\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ ||\ m\_ec\ ==\ error::upgrade\_required)}}
\DoxyCodeLine{01407\ \textcolor{comment}{\ \ \ \ \ \ \ \ \{*/}}
\DoxyCodeLine{01408\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!m\_is\_http)\ \{}
\DoxyCodeLine{01409\ \ \ \ \ \ \ \ \ \ \ \ \ std::stringstream\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}};}
\DoxyCodeLine{01410\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}\ <<\ \textcolor{stringliteral}{"{}Handshake\ ended\ with\ HTTP\ error:\ "{}}}
\DoxyCodeLine{01411\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ m\_response.get\_status\_code();}
\DoxyCodeLine{01412\ \ \ \ \ \ \ \ \ \ \ \ \ m\_elog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_ae8a9a9f8b1fa45a731acd340e10aa342}{log::elevel::rerror}},\mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}.str());}
\DoxyCodeLine{01413\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01414\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ this\ was\ not\ a\ websocket\ connection,\ we\ have\ written}}
\DoxyCodeLine{01415\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ expected\ response\ and\ the\ connection\ can\ be\ closed.}}
\DoxyCodeLine{01416\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01417\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>log\_http\_result();}
\DoxyCodeLine{01418\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01419\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_ec)\ \{}
\DoxyCodeLine{01420\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},}
\DoxyCodeLine{01421\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}got\ to\ writing\ HTTP\ results\ with\ m\_ec\ set:\ "{}}+m\_ec.message());}
\DoxyCodeLine{01422\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01423\ \ \ \ \ \ \ \ \ \ \ \ \ m\_ec\ =\ make\_error\_code(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da378e4b84397008e32d03d0fea4f15326}{error::http\_connection\_ended}});}
\DoxyCodeLine{01424\ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ }
\DoxyCodeLine{01425\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01426\ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{yubihsm__pkcs11_8c_a74995b2493f23c9103413e37da5cdc38}{terminate}}(m\_ec);}
\DoxyCodeLine{01427\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01428\ \ \ \ \ \}}
\DoxyCodeLine{01429\ }
\DoxyCodeLine{01430\ \ \ \ \ this-\/>log\_open\_result();}
\DoxyCodeLine{01431\ }
\DoxyCodeLine{01432\ \ \ \ \ m\_internal\_state\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508da20ef9274fcce8154c6cc28d00b900709}{istate::PROCESS\_CONNECTION}};}
\DoxyCodeLine{01433\ \ \ \ \ m\_state\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5a90d929cb6e119645ec2800451bfdc0a0}{session::state::open}};}
\DoxyCodeLine{01434\ }
\DoxyCodeLine{01435\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_open\_handler)\ \{}
\DoxyCodeLine{01436\ \ \ \ \ \ \ \ \ m\_open\_handler(m\_connection\_hdl);}
\DoxyCodeLine{01437\ \ \ \ \ \}}
\DoxyCodeLine{01438\ }
\DoxyCodeLine{01439\ \ \ \ \ this-\/>\mbox{\hyperlink{classwebsocketpp_1_1connection_abd6866c41c2ae86c3372cf428392a190}{handle\_read\_frame}}(lib::error\_code(),\ m\_buf\_cursor);}
\DoxyCodeLine{01440\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_ac1c576bd4dfebac977eade9ac637a432}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!initialize\_processor@{initialize\_processor}}
\index{initialize\_processor@{initialize\_processor}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{initialize\_processor()}{initialize\_processor()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_ac1c576bd4dfebac977eade9ac637a432} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
lib\+::error\+\_\+code \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::initialize\+\_\+processor (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Set m\+\_\+processor based on information in m\+\_\+request. Set m\+\_\+response status and return an error code indicating status. 

Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l01144}{1144}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01145\ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}initialize\_processor"{}});}
\DoxyCodeLine{01146\ }
\DoxyCodeLine{01147\ \ \ \ \ \textcolor{comment}{//\ if\ it\ isn't\ a\ websocket\ handshake\ nothing\ to\ do.}}
\DoxyCodeLine{01148\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{namespacewebsocketpp_1_1processor_a9ff3159b48cf4be2e7cb79c81b155d53}{processor::is\_websocket\_handshake}}(m\_request))\ \{}
\DoxyCodeLine{01149\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ lib::error\_code();}
\DoxyCodeLine{01150\ \ \ \ \ \}}
\DoxyCodeLine{01151\ }
\DoxyCodeLine{01152\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacewebsocketpp_1_1http_1_1parser_1_1state_a12f378e0c6dbf373781e7988ee4a0853a08c88a938bc459c7997b48f74248752f}{version}}\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1processor_a1a0e5e7b10b24ff5ab836dc543826934}{processor::get\_websocket\_version}}(m\_request);}
\DoxyCodeLine{01153\ }
\DoxyCodeLine{01154\ \ \ \ \ \textcolor{keywordflow}{if}\ (version\ <\ 0)\ \{}
\DoxyCodeLine{01155\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\ \textcolor{stringliteral}{"{}BAD\ REQUEST:\ can't\ determine\ version"{}});}
\DoxyCodeLine{01156\ \ \ \ \ \ \ \ \ m\_response.set\_status(\mbox{\hyperlink{namespacewebsocketpp_1_1http_1_1status__code_ae0d61c309e053ee5673517b54e2886c6a089057bc2b6afc67f712c9888e2553a3}{http::status\_code::bad\_request}});}
\DoxyCodeLine{01157\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68daddbb433d0d194d25e7bc72a7611a9e47}{error::invalid\_version}});}
\DoxyCodeLine{01158\ \ \ \ \ \}}
\DoxyCodeLine{01159\ }
\DoxyCodeLine{01160\ \ \ \ \ m\_processor\ =\ get\_processor(version);}
\DoxyCodeLine{01161\ }
\DoxyCodeLine{01162\ \ \ \ \ \textcolor{comment}{//\ if\ the\ processor\ is\ not\ null\ we\ are\ done}}
\DoxyCodeLine{01163\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_processor)\ \{}
\DoxyCodeLine{01164\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ lib::error\_code();}
\DoxyCodeLine{01165\ \ \ \ \ \}}
\DoxyCodeLine{01166\ }
\DoxyCodeLine{01167\ \ \ \ \ \textcolor{comment}{//\ We\ don't\ have\ a\ processor\ for\ this\ version.\ Return\ bad\ request}}
\DoxyCodeLine{01168\ \ \ \ \ \textcolor{comment}{//\ with\ Sec-\/WebSocket-\/Version\ header\ filled\ with\ values\ we\ do\ accept}}
\DoxyCodeLine{01169\ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\ \textcolor{stringliteral}{"{}BAD\ REQUEST:\ no\ processor\ for\ version"{}});}
\DoxyCodeLine{01170\ \ \ \ \ m\_response.set\_status(\mbox{\hyperlink{namespacewebsocketpp_1_1http_1_1status__code_ae0d61c309e053ee5673517b54e2886c6a089057bc2b6afc67f712c9888e2553a3}{http::status\_code::bad\_request}});}
\DoxyCodeLine{01171\ }
\DoxyCodeLine{01172\ \ \ \ \ std::stringstream\ \mbox{\hyperlink{namespace_xbyak_1_1util_a67cd5471fb751b186b53fdab6da7d3f7}{ss}};}
\DoxyCodeLine{01173\ \ \ \ \ std::string\ sep;}
\DoxyCodeLine{01174\ \ \ \ \ std::vector<int>::const\_iterator\ it;}
\DoxyCodeLine{01175\ \ \ \ \ \textcolor{keywordflow}{for}\ (it\ =\ versions\_supported.begin();\ it\ !=\ versions\_supported.end();\ it++)}
\DoxyCodeLine{01176\ \ \ \ \ \{}
\DoxyCodeLine{01177\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_xbyak_1_1util_a67cd5471fb751b186b53fdab6da7d3f7}{ss}}\ <<\ sep\ <<\ *it;}
\DoxyCodeLine{01178\ \ \ \ \ \ \ \ \ sep\ =\ \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{01179\ \ \ \ \ \}}
\DoxyCodeLine{01180\ }
\DoxyCodeLine{01181\ \ \ \ \ m\_response.replace\_header(\textcolor{stringliteral}{"{}Sec-\/WebSocket-\/Version"{}},\mbox{\hyperlink{namespace_xbyak_1_1util_a67cd5471fb751b186b53fdab6da7d3f7}{ss}}.str());}
\DoxyCodeLine{01182\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da93459fd7c7609d8ebf110bb0f6754073}{error::unsupported\_version}});}
\DoxyCodeLine{01183\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_ac1c576bd4dfebac977eade9ac637a432_cgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_a12bbbc93d414c65492ffb2c4a12f05a8}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!interrupt@{interrupt}}
\index{interrupt@{interrupt}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{interrupt()}{interrupt()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a12bbbc93d414c65492ffb2c4a12f05a8} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
lib\+::error\+\_\+code \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::interrupt (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

Trigger the on\+\_\+interrupt handler.

Signals to the connection to asyncronously invoke the on\+\_\+inturrupt callback for this connection\textquotesingle{}s handler once it is safe to do so.

When the on\+\_\+inturrupt handler callback is called it will be from within the transport event loop with all the thread safety features guaranteed by the transport to regular handlers

Multiple inturrupt signals can be active at once on the same connection

\begin{DoxyReturn}{Returns}
An error code
\end{DoxyReturn}
This is thread safe if the transport is thread safe 

Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00341}{341}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00342\ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}connection\ connection::interrupt"{}});}
\DoxyCodeLine{00343\ \ \ \ \ \textcolor{keywordflow}{return}\ transport\_con\_type::interrupt(}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ lib::bind(}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{classwebsocketpp_1_1connection_a0b438ac986b73c99907515eeac6dc45f}{type::handle\_interrupt}},}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a01a5af7dc2f35ff8f15da8c2cf3a3b02}{type::get\_shared}}()}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00348\ \ \ \ \ );}
\DoxyCodeLine{00349\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_ab248ee632b5b4d9998fec4328510f445}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!is\_server@{is\_server}}
\index{is\_server@{is\_server}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{is\_server()}{is\_server()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_ab248ee632b5b4d9998fec4328510f445} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
bool \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::is\+\_\+server (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\begin{DoxyReturn}{Returns}
whether or not the connection is attached to a server endpoint 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l01192}{1192}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01193\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_is\_server;}
\DoxyCodeLine{01194\ \ \ \ \ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_ab248ee632b5b4d9998fec4328510f445_icgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_ad6a4a25a18ec61d2a36a149a3d92ab72}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!pause\_reading@{pause\_reading}}
\index{pause\_reading@{pause\_reading}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{pause\_reading()}{pause\_reading()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_ad6a4a25a18ec61d2a36a149a3d92ab72} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
lib\+::error\+\_\+code \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::pause\+\_\+reading (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

Signals to the connection to halt reading of new data. While reading is paused, the connection will stop reading from its associated socket. In turn this will result in TCP based flow control kicking in and slowing data flow from the remote endpoint.

This is useful for applications that push new requests to a queue to be processed by another thread and need a way to signal when their request queue is full without blocking the network processing thread.

Use {\ttfamily \doxylink{classwebsocketpp_1_1connection_a355b5e155ba53071b06fa8a6dfab9be2}{resume\+\_\+reading()}} to resume.

If supported by the transport this is done asynchronously. As such reading may not stop until the current read operation completes. Typically you can expect to receive no more bytes after initiating a read pause than the size of the read buffer.

If reading is paused for this connection already nothing is changed. 

Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00360}{360}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00361\ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}connection\ connection::pause\_reading"{}});}
\DoxyCodeLine{00362\ \ \ \ \ \textcolor{keywordflow}{return}\ transport\_con\_type::dispatch(}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ lib::bind(}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{classwebsocketpp_1_1connection_a5887284ea346efd7b5cc43519bfd84d5}{type::handle\_pause\_reading}},}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a01a5af7dc2f35ff8f15da8c2cf3a3b02}{type::get\_shared}}()}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00367\ \ \ \ \ );}
\DoxyCodeLine{00368\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a21c8dc6badfaff3aaee1434625c09b04}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!ping@{ping}}
\index{ping@{ping}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{ping()}{ping()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a21c8dc6badfaff3aaee1434625c09b04} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::ping (\begin{DoxyParamCaption}\item[{std\+::string const \&}]{payload}{}\end{DoxyParamCaption})}

Initiates a ping with the given payload/

There is no feedback directly from ping except in cases of immediately detectable errors. Feedback will be provided via on\+\_\+pong or on\+\_\+pong\+\_\+timeout callbacks.

Ping locks the m\+\_\+write\+\_\+lock mutex


\begin{DoxyParams}{Parameters}
{\em payload} & Payload to be used for the ping \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00224}{224}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00225\ \ \ \ \ lib::error\_code\ ec;}
\DoxyCodeLine{00226\ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a21c8dc6badfaff3aaee1434625c09b04}{ping}}(payload,ec);}
\DoxyCodeLine{00227\ \ \ \ \ \textcolor{keywordflow}{if}\ (ec)\ \{}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ exception(ec);}
\DoxyCodeLine{00229\ \ \ \ \ \}}
\DoxyCodeLine{00230\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a6766e2f31adc6843a983551b21683b73}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!ping@{ping}}
\index{ping@{ping}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{ping()}{ping()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a6766e2f31adc6843a983551b21683b73} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::ping (\begin{DoxyParamCaption}\item[{std\+::string const \&}]{payload}{, }\item[{lib\+::error\+\_\+code \&}]{ec}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00155}{155}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_alog.static\_test(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}}))\ \{}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}connection\ ping"{}});}
\DoxyCodeLine{00158\ \ \ \ \ \}}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \ \ \ \ \{}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a98eee129ad1f7e30c059c1073d516495}{scoped\_lock\_type}}\ \mbox{\hyperlink{xbyak__mnemonic_8h_aa81aed607133209dade63a226818224d}{lock}}(m\_connection\_state\_lock);}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_state\ !=\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5a90d929cb6e119645ec2800451bfdc0a0}{session::state::open}})\ \{}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ std::stringstream\ \mbox{\hyperlink{namespace_xbyak_1_1util_a67cd5471fb751b186b53fdab6da7d3f7}{ss}};}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_xbyak_1_1util_a67cd5471fb751b186b53fdab6da7d3f7}{ss}}\ <<\ \textcolor{stringliteral}{"{}connection::ping\ called\ from\ invalid\ state\ "{}}\ <<\ m\_state;}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\mbox{\hyperlink{namespace_xbyak_1_1util_a67cd5471fb751b186b53fdab6da7d3f7}{ss}}.str());}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ ec\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}});}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00169\ \ \ \ \ \}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \ \ \mbox{\hyperlink{debug__client_8cpp_a08398c4d31a4dc3e42d1b9a9ef64c6ad}{message\_ptr}}\ msg\ =\ m\_msg\_manager-\/>get\_message();}
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{keywordflow}{if}\ (!msg)\ \{}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ ec\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da55cc9da6c40e8dc3f8df1e9e3f7b989f}{error::no\_outgoing\_buffers}});}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00175\ \ \ \ \ \}}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \ \ \ \ ec\ =\ m\_processor-\/>prepare\_ping(payload,msg);}
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{keywordflow}{if}\ (ec)\ \{\textcolor{keywordflow}{return};\}}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{comment}{//\ set\ ping\ timer\ if\ we\ are\ listening\ for\ one}}
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_pong\_timeout\_handler)\ \{}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Cancel\ any\ existing\ timers}}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_ping\_timer)\ \{}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ m\_ping\_timer-\/>cancel();}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_pong\_timeout\_dur\ >\ 0)\ \{}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ m\_ping\_timer\ =\ transport\_con\_type::set\_timer(}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_pong\_timeout\_dur,}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lib::bind(}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{classwebsocketpp_1_1connection_af10cbbbfe16ef1cc6f45614582c9d28f}{type::handle\_pong\_timeout}},}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a01a5af7dc2f35ff8f15da8c2cf3a3b02}{type::get\_shared}}(),}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ payload,}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lib::placeholders::\_1}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!m\_ping\_timer)\ \{}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Our\ transport\ doesn't\ support\ timers}}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ m\_elog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_aef51fd791400121297f38f4381edaebe}{log::elevel::warn}},\textcolor{stringliteral}{"{}Warning:\ a\ pong\_timeout\_handler\ is\ \(\backslash\)}}
\DoxyCodeLine{00202\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set\ but\ the\ transport\ in\ use\ does\ not\ support\ timeouts."{}});}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00204\ \ \ \ \ \}}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \ \ \ \ \textcolor{keywordtype}{bool}\ needs\_writing\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00207\ \ \ \ \ \{}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a98eee129ad1f7e30c059c1073d516495}{scoped\_lock\_type}}\ \mbox{\hyperlink{xbyak__mnemonic_8h_aa81aed607133209dade63a226818224d}{lock}}(m\_write\_lock);}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ write\_push(msg);}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ needs\_writing\ =\ !m\_write\_flag\ \&\&\ !m\_send\_queue.empty();}
\DoxyCodeLine{00211\ \ \ \ \ \}}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00213\ \ \ \ \ \textcolor{keywordflow}{if}\ (needs\_writing)\ \{}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ transport\_con\_type::dispatch(lib::bind(}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{classwebsocketpp_1_1connection_a8d26a29e90d4847f3882c280112c6b60}{type::write\_frame}},}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a01a5af7dc2f35ff8f15da8c2cf3a3b02}{type::get\_shared}}()}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ ));}
\DoxyCodeLine{00218\ \ \ \ \ \}}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \ \ \ \ ec\ =\ lib::error\_code();}
\DoxyCodeLine{00221\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_a6766e2f31adc6843a983551b21683b73_cgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_aa8684fcfd9a57466ae1b52e36b834408}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!pong@{pong}}
\index{pong@{pong}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{pong()}{pong()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_aa8684fcfd9a57466ae1b52e36b834408} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::pong (\begin{DoxyParamCaption}\item[{std\+::string const \&}]{payload}{}\end{DoxyParamCaption})}

Initiates a pong with the given payload.

There is no feedback from a pong once sent.

Pong locks the m\+\_\+write\+\_\+lock mutex


\begin{DoxyParams}{Parameters}
{\em payload} & Payload to be used for the pong \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00295}{295}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00296\ \ \ \ \ lib::error\_code\ ec;}
\DoxyCodeLine{00297\ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_aa8684fcfd9a57466ae1b52e36b834408}{pong}}(payload,ec);}
\DoxyCodeLine{00298\ \ \ \ \ \textcolor{keywordflow}{if}\ (ec)\ \{}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ exception(ec);}
\DoxyCodeLine{00300\ \ \ \ \ \}}
\DoxyCodeLine{00301\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a837dcb8f1214f08b92e7ae7489bfa180}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!pong@{pong}}
\index{pong@{pong}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{pong()}{pong()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a837dcb8f1214f08b92e7ae7489bfa180} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::pong (\begin{DoxyParamCaption}\item[{std\+::string const \&}]{payload}{, }\item[{lib\+::error\+\_\+code \&}]{ec}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00252}{252}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00253\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_alog.static\_test(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}}))\ \{}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}connection\ pong"{}});}
\DoxyCodeLine{00255\ \ \ \ \ \}}
\DoxyCodeLine{00256\ }
\DoxyCodeLine{00257\ \ \ \ \ \{}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a98eee129ad1f7e30c059c1073d516495}{scoped\_lock\_type}}\ \mbox{\hyperlink{xbyak__mnemonic_8h_aa81aed607133209dade63a226818224d}{lock}}(m\_connection\_state\_lock);}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_state\ !=\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5a90d929cb6e119645ec2800451bfdc0a0}{session::state::open}})\ \{}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ std::stringstream\ \mbox{\hyperlink{namespace_xbyak_1_1util_a67cd5471fb751b186b53fdab6da7d3f7}{ss}};}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_xbyak_1_1util_a67cd5471fb751b186b53fdab6da7d3f7}{ss}}\ <<\ \textcolor{stringliteral}{"{}connection::pong\ called\ from\ invalid\ state\ "{}}\ <<\ m\_state;}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\mbox{\hyperlink{namespace_xbyak_1_1util_a67cd5471fb751b186b53fdab6da7d3f7}{ss}}.str());}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ ec\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}});}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00266\ \ \ \ \ \}}
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00268\ \ \ \ \ \mbox{\hyperlink{debug__client_8cpp_a08398c4d31a4dc3e42d1b9a9ef64c6ad}{message\_ptr}}\ msg\ =\ m\_msg\_manager-\/>get\_message();}
\DoxyCodeLine{00269\ \ \ \ \ \textcolor{keywordflow}{if}\ (!msg)\ \{}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ ec\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da55cc9da6c40e8dc3f8df1e9e3f7b989f}{error::no\_outgoing\_buffers}});}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00272\ \ \ \ \ \}}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00274\ \ \ \ \ ec\ =\ m\_processor-\/>prepare\_pong(payload,msg);}
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keywordflow}{if}\ (ec)\ \{\textcolor{keywordflow}{return};\}}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ \ \ \ \ \textcolor{keywordtype}{bool}\ needs\_writing\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00278\ \ \ \ \ \{}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a98eee129ad1f7e30c059c1073d516495}{scoped\_lock\_type}}\ \mbox{\hyperlink{xbyak__mnemonic_8h_aa81aed607133209dade63a226818224d}{lock}}(m\_write\_lock);}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ write\_push(msg);}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ needs\_writing\ =\ !m\_write\_flag\ \&\&\ !m\_send\_queue.empty();}
\DoxyCodeLine{00282\ \ \ \ \ \}}
\DoxyCodeLine{00283\ }
\DoxyCodeLine{00284\ \ \ \ \ \textcolor{keywordflow}{if}\ (needs\_writing)\ \{}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ transport\_con\_type::dispatch(lib::bind(}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{classwebsocketpp_1_1connection_a8d26a29e90d4847f3882c280112c6b60}{type::write\_frame}},}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a01a5af7dc2f35ff8f15da8c2cf3a3b02}{type::get\_shared}}()}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ ));}
\DoxyCodeLine{00289\ \ \ \ \ \}}
\DoxyCodeLine{00290\ }
\DoxyCodeLine{00291\ \ \ \ \ ec\ =\ lib::error\_code();}
\DoxyCodeLine{00292\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_a837dcb8f1214f08b92e7ae7489bfa180_cgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_a569483c7dcf542f500f6e9f49d803010}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!process\_handshake\_request@{process\_handshake\_request}}
\index{process\_handshake\_request@{process\_handshake\_request}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{process\_handshake\_request()}{process\_handshake\_request()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a569483c7dcf542f500f6e9f49d803010} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
lib\+::error\+\_\+code \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::process\+\_\+handshake\+\_\+request (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Perform Web\+Socket handshake validation of m\+\_\+request using m\+\_\+processor. set m\+\_\+response and return an error code indicating status. 

Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l01186}{1186}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01186\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01187\ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}process\ handshake\ request"{}});}
\DoxyCodeLine{01188\ }
\DoxyCodeLine{01189\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{namespacewebsocketpp_1_1processor_a9ff3159b48cf4be2e7cb79c81b155d53}{processor::is\_websocket\_handshake}}(m\_request))\ \{}
\DoxyCodeLine{01190\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this\ is\ not\ a\ websocket\ handshake.\ Process\ as\ plain\ HTTP}}
\DoxyCodeLine{01191\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}HTTP\ REQUEST"{}});}
\DoxyCodeLine{01192\ }
\DoxyCodeLine{01193\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ extract\ URI\ from\ request}}
\DoxyCodeLine{01194\ \ \ \ \ \ \ \ \ m\_uri\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1processor_a5fa80687521dc24678e773fc3e71e0ce}{processor::get\_uri\_from\_host}}(}
\DoxyCodeLine{01195\ \ \ \ \ \ \ \ \ \ \ \ \ m\_request,}
\DoxyCodeLine{01196\ \ \ \ \ \ \ \ \ \ \ \ \ (transport\_con\_type::is\_secure()\ ?\ \textcolor{stringliteral}{"{}https"{}}\ :\ \textcolor{stringliteral}{"{}http"{}})}
\DoxyCodeLine{01197\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{01198\ }
\DoxyCodeLine{01199\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!m\_uri-\/>get\_valid())\ \{}
\DoxyCodeLine{01200\ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\ \textcolor{stringliteral}{"{}Bad\ request:\ failed\ to\ parse\ uri"{}});}
\DoxyCodeLine{01201\ \ \ \ \ \ \ \ \ \ \ \ \ m\_response.set\_status(\mbox{\hyperlink{namespacewebsocketpp_1_1http_1_1status__code_ae0d61c309e053ee5673517b54e2886c6a089057bc2b6afc67f712c9888e2553a3}{http::status\_code::bad\_request}});}
\DoxyCodeLine{01202\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68daf80643edf3b27c30fc83be7b489a418c}{error::invalid\_uri}});}
\DoxyCodeLine{01203\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01204\ }
\DoxyCodeLine{01205\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_http\_handler)\ \{}
\DoxyCodeLine{01206\ \ \ \ \ \ \ \ \ \ \ \ \ m\_is\_http\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01207\ \ \ \ \ \ \ \ \ \ \ \ \ m\_http\_handler(m\_connection\_hdl);}
\DoxyCodeLine{01208\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01209\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5afff87406dd6d9c5d93c993c3e225a8bc}{session::state::closed}})\ \{}
\DoxyCodeLine{01210\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da378e4b84397008e32d03d0fea4f15326}{error::http\_connection\_ended}});}
\DoxyCodeLine{01211\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01212\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01213\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a96d445ff0cc75b854c4500e93a054acb}{set\_status}}(\mbox{\hyperlink{namespacewebsocketpp_1_1http_1_1status__code_ae0d61c309e053ee5673517b54e2886c6a53c34bae0288b6ff06bb6a9d706b6a6e}{http::status\_code::upgrade\_required}});}
\DoxyCodeLine{01214\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68dad50a56da7a0355b9075f98c7567523a5}{error::upgrade\_required}});}
\DoxyCodeLine{01215\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01216\ }
\DoxyCodeLine{01217\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ lib::error\_code();}
\DoxyCodeLine{01218\ \ \ \ \ \}}
\DoxyCodeLine{01219\ }
\DoxyCodeLine{01220\ \ \ \ \ lib::error\_code\ ec\ =\ m\_processor-\/>validate\_handshake(m\_request);}
\DoxyCodeLine{01221\ }
\DoxyCodeLine{01222\ \ \ \ \ \textcolor{comment}{//\ Validate:\ make\ sure\ all\ required\ elements\ are\ present.}}
\DoxyCodeLine{01223\ \ \ \ \ \textcolor{keywordflow}{if}\ (ec)\{}
\DoxyCodeLine{01224\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Not\ a\ valid\ handshake\ request}}
\DoxyCodeLine{01225\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\ \textcolor{stringliteral}{"{}Bad\ request\ "{}}\ +\ ec.message());}
\DoxyCodeLine{01226\ \ \ \ \ \ \ \ \ m\_response.set\_status(\mbox{\hyperlink{namespacewebsocketpp_1_1http_1_1status__code_ae0d61c309e053ee5673517b54e2886c6a089057bc2b6afc67f712c9888e2553a3}{http::status\_code::bad\_request}});}
\DoxyCodeLine{01227\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ec;}
\DoxyCodeLine{01228\ \ \ \ \ \}}
\DoxyCodeLine{01229\ }
\DoxyCodeLine{01230\ \ \ \ \ \textcolor{comment}{//\ Read\ extension\ parameters\ and\ set\ up\ values\ necessary\ for\ the\ end\ user}}
\DoxyCodeLine{01231\ \ \ \ \ \textcolor{comment}{//\ to\ complete\ extension\ negotiation.}}
\DoxyCodeLine{01232\ \ \ \ \ std::pair<lib::error\_code,std::string>\ neg\_results;}
\DoxyCodeLine{01233\ \ \ \ \ neg\_results\ =\ m\_processor-\/>negotiate\_extensions(m\_request);}
\DoxyCodeLine{01234\ }
\DoxyCodeLine{01235\ \ \ \ \ \textcolor{keywordflow}{if}\ (neg\_results.first)\ \{}
\DoxyCodeLine{01236\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ There\ was\ a\ fatal\ error\ in\ extension\ parsing\ that\ should\ result\ in}}
\DoxyCodeLine{01237\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ a\ failed\ connection\ attempt.}}
\DoxyCodeLine{01238\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\ \textcolor{stringliteral}{"{}Bad\ request:\ "{}}\ +\ neg\_results.first.message());}
\DoxyCodeLine{01239\ \ \ \ \ \ \ \ \ m\_response.set\_status(\mbox{\hyperlink{namespacewebsocketpp_1_1http_1_1status__code_ae0d61c309e053ee5673517b54e2886c6a089057bc2b6afc67f712c9888e2553a3}{http::status\_code::bad\_request}});}
\DoxyCodeLine{01240\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ neg\_results.first;}
\DoxyCodeLine{01241\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01242\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ extension\ negotiation\ succeeded,\ set\ response\ header\ accordingly}}
\DoxyCodeLine{01243\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ don't\ send\ an\ empty\ extensions\ header\ because\ it\ breaks\ many}}
\DoxyCodeLine{01244\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ clients.}}
\DoxyCodeLine{01245\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (neg\_results.second.size()\ >\ 0)\ \{}
\DoxyCodeLine{01246\ \ \ \ \ \ \ \ \ \ \ \ \ m\_response.replace\_header(\textcolor{stringliteral}{"{}Sec-\/WebSocket-\/Extensions"{}},}
\DoxyCodeLine{01247\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ neg\_results.second);}
\DoxyCodeLine{01248\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01249\ \ \ \ \ \}}
\DoxyCodeLine{01250\ }
\DoxyCodeLine{01251\ \ \ \ \ \textcolor{comment}{//\ extract\ URI\ from\ request}}
\DoxyCodeLine{01252\ \ \ \ \ m\_uri\ =\ m\_processor-\/>get\_uri(m\_request);}
\DoxyCodeLine{01253\ }
\DoxyCodeLine{01254\ }
\DoxyCodeLine{01255\ \ \ \ \ \textcolor{keywordflow}{if}\ (!m\_uri-\/>get\_valid())\ \{}
\DoxyCodeLine{01256\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\ \textcolor{stringliteral}{"{}Bad\ request:\ failed\ to\ parse\ uri"{}});}
\DoxyCodeLine{01257\ \ \ \ \ \ \ \ \ m\_response.set\_status(\mbox{\hyperlink{namespacewebsocketpp_1_1http_1_1status__code_ae0d61c309e053ee5673517b54e2886c6a089057bc2b6afc67f712c9888e2553a3}{http::status\_code::bad\_request}});}
\DoxyCodeLine{01258\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68daf80643edf3b27c30fc83be7b489a418c}{error::invalid\_uri}});}
\DoxyCodeLine{01259\ \ \ \ \ \}}
\DoxyCodeLine{01260\ }
\DoxyCodeLine{01261\ \ \ \ \ \textcolor{comment}{//\ extract\ subprotocols}}
\DoxyCodeLine{01262\ \ \ \ \ lib::error\_code\ subp\_ec\ =\ m\_processor-\/>extract\_subprotocols(m\_request,}
\DoxyCodeLine{01263\ \ \ \ \ \ \ \ \ m\_requested\_subprotocols);}
\DoxyCodeLine{01264\ }
\DoxyCodeLine{01265\ \ \ \ \ \textcolor{keywordflow}{if}\ (subp\_ec)\ \{}
\DoxyCodeLine{01266\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ should\ we\ do\ anything?}}
\DoxyCodeLine{01267\ \ \ \ \ \}}
\DoxyCodeLine{01268\ }
\DoxyCodeLine{01269\ \ \ \ \ \textcolor{comment}{//\ Ask\ application\ to\ validate\ the\ connection}}
\DoxyCodeLine{01270\ \ \ \ \ \textcolor{keywordflow}{if}\ (!m\_validate\_handler\ ||\ m\_validate\_handler(m\_connection\_hdl))\ \{}
\DoxyCodeLine{01271\ \ \ \ \ \ \ \ \ m\_response.set\_status(\mbox{\hyperlink{namespacewebsocketpp_1_1http_1_1status__code_ae0d61c309e053ee5673517b54e2886c6af8fdb6ffaa8898b9a69112d3dd8f0bfc}{http::status\_code::switching\_protocols}});}
\DoxyCodeLine{01272\ }
\DoxyCodeLine{01273\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Write\ the\ appropriate\ response\ headers\ based\ on\ request\ and}}
\DoxyCodeLine{01274\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ processor\ version}}
\DoxyCodeLine{01275\ \ \ \ \ \ \ \ \ ec\ =\ m\_processor-\/>process\_handshake(m\_request,m\_subprotocol,m\_response);}
\DoxyCodeLine{01276\ }
\DoxyCodeLine{01277\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ec)\ \{}
\DoxyCodeLine{01278\ \ \ \ \ \ \ \ \ \ \ \ \ std::stringstream\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}};}
\DoxyCodeLine{01279\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}\ <<\ \textcolor{stringliteral}{"{}Processing\ error:\ "{}}\ <<\ ec\ <<\ \textcolor{stringliteral}{"{}("{}}\ <<\ ec.message()\ <<\ \textcolor{stringliteral}{"{})"{}};}
\DoxyCodeLine{01280\ \ \ \ \ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}.str());}
\DoxyCodeLine{01281\ }
\DoxyCodeLine{01282\ \ \ \ \ \ \ \ \ \ \ \ \ m\_response.set\_status(\mbox{\hyperlink{namespacewebsocketpp_1_1http_1_1status__code_ae0d61c309e053ee5673517b54e2886c6aff5b07f0195981e0c62dbe9a82bc7dc0}{http::status\_code::internal\_server\_error}});}
\DoxyCodeLine{01283\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ec;}
\DoxyCodeLine{01284\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01285\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01286\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ User\ application\ has\ rejected\ the\ handshake}}
\DoxyCodeLine{01287\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\ \textcolor{stringliteral}{"{}USER\ REJECT"{}});}
\DoxyCodeLine{01288\ }
\DoxyCodeLine{01289\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Use\ Bad\ Request\ if\ the\ user\ handler\ did\ not\ provide\ a\ more}}
\DoxyCodeLine{01290\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ specific\ http\ response\ error\ code.}}
\DoxyCodeLine{01291\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ is\ there\ a\ better\ default?}}
\DoxyCodeLine{01292\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_response.get\_status\_code()\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1http_1_1status__code_ae0d61c309e053ee5673517b54e2886c6a462538a8920c099c84c83a51edbd41f0}{http::status\_code::uninitialized}})\ \{}
\DoxyCodeLine{01293\ \ \ \ \ \ \ \ \ \ \ \ \ m\_response.set\_status(\mbox{\hyperlink{namespacewebsocketpp_1_1http_1_1status__code_ae0d61c309e053ee5673517b54e2886c6a089057bc2b6afc67f712c9888e2553a3}{http::status\_code::bad\_request}});}
\DoxyCodeLine{01294\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01295\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01296\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da84dc4660cd164a5e27d8c2f816f3593b}{error::rejected}});}
\DoxyCodeLine{01297\ \ \ \ \ \}}
\DoxyCodeLine{01298\ }
\DoxyCodeLine{01299\ \ \ \ \ \textcolor{keywordflow}{return}\ lib::error\_code();}
\DoxyCodeLine{01300\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_a569483c7dcf542f500f6e9f49d803010_cgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_af54e9d7c8ef07349d28c3405182bb3c7}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!read\_frame@{read\_frame}}
\index{read\_frame@{read\_frame}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{read\_frame()}{read\_frame()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_af54e9d7c8ef07349d28c3405182bb3c7} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::read\+\_\+frame (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l01123}{1123}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01124\ \ \ \ \ \textcolor{keywordflow}{if}\ (!m\_read\_flag)\ \{}
\DoxyCodeLine{01125\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01126\ \ \ \ \ \}}
\DoxyCodeLine{01127\ \ \ \ \ }
\DoxyCodeLine{01128\ \ \ \ \ transport\_con\_type::async\_read\_at\_least(}
\DoxyCodeLine{01129\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::min\ wont\ work\ with\ undefined\ static\ const\ values.}}
\DoxyCodeLine{01130\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ is\ there\ a\ more\ elegant\ way\ to\ do\ this?}}
\DoxyCodeLine{01131\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Need\ to\ determine\ if\ requesting\ 1\ byte\ or\ the\ exact\ number\ of\ bytes}}
\DoxyCodeLine{01132\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ is\ better\ here.\ 1\ byte\ lets\ us\ be\ a\ bit\ more\ responsive\ at\ a}}
\DoxyCodeLine{01133\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ potential\ expense\ of\ additional\ runs\ through\ handle\_read\_frame}}
\DoxyCodeLine{01134\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*(m\_processor-\/>get\_bytes\_needed()\ >\ config::connection\_read\_buffer\_size\ ?}}
\DoxyCodeLine{01135\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ config::connection\_read\_buffer\_size\ :\ m\_processor-\/>get\_bytes\_needed())*/}}
\DoxyCodeLine{01136\ \ \ \ \ \ \ \ \ 1,}
\DoxyCodeLine{01137\ \ \ \ \ \ \ \ \ m\_buf,}
\DoxyCodeLine{01138\ \ \ \ \ \ \ \ \ config::connection\_read\_buffer\_size,}
\DoxyCodeLine{01139\ \ \ \ \ \ \ \ \ m\_handle\_read\_frame}
\DoxyCodeLine{01140\ \ \ \ \ );}
\DoxyCodeLine{01141\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a9e19e781b4abda3e4a39f4f25077a29c}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!read\_handshake@{read\_handshake}}
\index{read\_handshake@{read\_handshake}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{read\_handshake()}{read\_handshake()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a9e19e781b4abda3e4a39f4f25077a29c} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::read\+\_\+handshake (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{num\+\_\+bytes}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00784}{784}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00784\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00785\ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}connection\ read\_handshake"{}});}
\DoxyCodeLine{00786\ }
\DoxyCodeLine{00787\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_open\_handshake\_timeout\_dur\ >\ 0)\ \{}
\DoxyCodeLine{00788\ \ \ \ \ \ \ \ \ m\_handshake\_timer\ =\ transport\_con\_type::set\_timer(}
\DoxyCodeLine{00789\ \ \ \ \ \ \ \ \ \ \ \ \ m\_open\_handshake\_timeout\_dur,}
\DoxyCodeLine{00790\ \ \ \ \ \ \ \ \ \ \ \ \ lib::bind(}
\DoxyCodeLine{00791\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{classwebsocketpp_1_1connection_aee1b6e47985b434303b8d6e5f27177a3}{type::handle\_open\_handshake\_timeout}},}
\DoxyCodeLine{00792\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a01a5af7dc2f35ff8f15da8c2cf3a3b02}{type::get\_shared}}(),}
\DoxyCodeLine{00793\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lib::placeholders::\_1}
\DoxyCodeLine{00794\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00795\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00796\ \ \ \ \ \}}
\DoxyCodeLine{00797\ }
\DoxyCodeLine{00798\ \ \ \ \ transport\_con\_type::async\_read\_at\_least(}
\DoxyCodeLine{00799\ \ \ \ \ \ \ \ \ num\_bytes,}
\DoxyCodeLine{00800\ \ \ \ \ \ \ \ \ m\_buf,}
\DoxyCodeLine{00801\ \ \ \ \ \ \ \ \ config::connection\_read\_buffer\_size,}
\DoxyCodeLine{00802\ \ \ \ \ \ \ \ \ lib::bind(}
\DoxyCodeLine{00803\ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{classwebsocketpp_1_1connection_a9c7e83aae3418cdf71e6fcf1dce3a255}{type::handle\_read\_handshake}},}
\DoxyCodeLine{00804\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a01a5af7dc2f35ff8f15da8c2cf3a3b02}{type::get\_shared}}(),}
\DoxyCodeLine{00805\ \ \ \ \ \ \ \ \ \ \ \ \ lib::placeholders::\_1,}
\DoxyCodeLine{00806\ \ \ \ \ \ \ \ \ \ \ \ \ lib::placeholders::\_2}
\DoxyCodeLine{00807\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00808\ \ \ \ \ );}
\DoxyCodeLine{00809\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a63094895d9dcfb4d10974ae97ea319a1}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!remove\_header@{remove\_header}}
\index{remove\_header@{remove\_header}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{remove\_header()}{remove\_header()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a63094895d9dcfb4d10974ae97ea319a1} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::remove\+\_\+header (\begin{DoxyParamCaption}\item[{std\+::string const \&}]{key}{}\end{DoxyParamCaption})}

Removes a header from the response.

This member function is valid only from the http() and \doxylink{debug__server_8cpp_a76b106c484654b62313da8bace255c9a}{validate()} handler callbacks, or to a client connection before connect has been called.


\begin{DoxyParams}{Parameters}
{\em key} & The name of the header to remove \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
websocketpp\+::http\+::parser\+::remove\+\_\+header 
\end{DoxySeeAlso}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00638}{638}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00639\ \{}
\DoxyCodeLine{00640\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_is\_server)\ \{}
\DoxyCodeLine{00641\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_internal\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508da2d82e414db0a6cbc60eb3cb4317b71e0}{istate::PROCESS\_HTTP\_REQUEST}})\ \{}
\DoxyCodeLine{00642\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ are\ setting\ response\ headers\ for\ an\ incoming\ server\ connection}}
\DoxyCodeLine{00643\ \ \ \ \ \ \ \ \ \ \ \ \ m\_response.remove\_header(key);}
\DoxyCodeLine{00644\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00645\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ exception(\textcolor{stringliteral}{"{}Call\ to\ remove\_header\ from\ invalid\ state"{}},}
\DoxyCodeLine{00646\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}}));}
\DoxyCodeLine{00647\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00648\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00649\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_internal\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508da3e18524ea63c814e1e5da6f12bf5af10}{istate::USER\_INIT}})\ \{}
\DoxyCodeLine{00650\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ are\ setting\ initial\ headers\ for\ an\ outgoing\ client\ connection}}
\DoxyCodeLine{00651\ \ \ \ \ \ \ \ \ \ \ \ \ m\_request.remove\_header(key);}
\DoxyCodeLine{00652\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00653\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ exception(\textcolor{stringliteral}{"{}Call\ to\ remove\_header\ from\ invalid\ state"{}},}
\DoxyCodeLine{00654\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}}));}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00656\ \ \ \ \ \}}
\DoxyCodeLine{00657\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_a63094895d9dcfb4d10974ae97ea319a1_cgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_a96e4adcdb9b3473ca96e2aac27ff7147}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!replace\_header@{replace\_header}}
\index{replace\_header@{replace\_header}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{replace\_header()}{replace\_header()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a96e4adcdb9b3473ca96e2aac27ff7147} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::replace\+\_\+header (\begin{DoxyParamCaption}\item[{std\+::string const \&}]{key}{, }\item[{std\+::string const \&}]{val}{}\end{DoxyParamCaption})}

If a header with this name already exists the old value will be replaced Use {\ttfamily \doxylink{classwebsocketpp_1_1connection_af8cb78acc61b8a3d59f6162cdba6318b}{connection\+::append\+\_\+header}} to append to a list of existing values.

This member function is valid only from the http() and \doxylink{debug__server_8cpp_a76b106c484654b62313da8bace255c9a}{validate()} handler callbacks, or to a client connection before connect has been called.


\begin{DoxyParams}{Parameters}
{\em key} & Name of the header to set \\
\hline
{\em val} & Value to set \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\doxylink{classwebsocketpp_1_1connection_af8cb78acc61b8a3d59f6162cdba6318b}{append\+\_\+header} 

websocketpp\+::http\+::parser\+::replace\+\_\+header 
\end{DoxySeeAlso}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00614}{614}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00616\ \{}
\DoxyCodeLine{00617\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_is\_server)\ \{}
\DoxyCodeLine{00618\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_internal\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508da2d82e414db0a6cbc60eb3cb4317b71e0}{istate::PROCESS\_HTTP\_REQUEST}})\ \{}
\DoxyCodeLine{00619\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ are\ setting\ response\ headers\ for\ an\ incoming\ server\ connection}}
\DoxyCodeLine{00620\ \ \ \ \ \ \ \ \ \ \ \ \ m\_response.replace\_header(key,val);}
\DoxyCodeLine{00621\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00622\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ exception(\textcolor{stringliteral}{"{}Call\ to\ replace\_header\ from\ invalid\ state"{}},}
\DoxyCodeLine{00623\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}}));}
\DoxyCodeLine{00624\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00625\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00626\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_internal\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508da3e18524ea63c814e1e5da6f12bf5af10}{istate::USER\_INIT}})\ \{}
\DoxyCodeLine{00627\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ are\ setting\ initial\ headers\ for\ an\ outgoing\ client\ connection}}
\DoxyCodeLine{00628\ \ \ \ \ \ \ \ \ \ \ \ \ m\_request.replace\_header(key,val);}
\DoxyCodeLine{00629\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00630\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ exception(\textcolor{stringliteral}{"{}Call\ to\ replace\_header\ from\ invalid\ state"{}},}
\DoxyCodeLine{00631\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}}));}
\DoxyCodeLine{00632\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00633\ \ \ \ \ \}}
\DoxyCodeLine{00634\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_a96e4adcdb9b3473ca96e2aac27ff7147_cgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_a355b5e155ba53071b06fa8a6dfab9be2}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!resume\_reading@{resume\_reading}}
\index{resume\_reading@{resume\_reading}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{resume\_reading()}{resume\_reading()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a355b5e155ba53071b06fa8a6dfab9be2} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
lib\+::error\+\_\+code \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::resume\+\_\+reading (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

Signals to the connection to resume reading of new data after it was paused by {\ttfamily \doxylink{classwebsocketpp_1_1connection_ad6a4a25a18ec61d2a36a149a3d92ab72}{pause\+\_\+reading()}}.

If reading is not paused for this connection already nothing is changed. 

Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00378}{378}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00379\ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}connection\ connection::resume\_reading"{}});}
\DoxyCodeLine{00380\ \ \ \ \ \textcolor{keywordflow}{return}\ transport\_con\_type::dispatch(}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ lib::bind(}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{classwebsocketpp_1_1connection_adb5b479b7d66eb289390b26d12332d84}{type::handle\_resume\_reading}},}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a01a5af7dc2f35ff8f15da8c2cf3a3b02}{type::get\_shared}}()}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00385\ \ \ \ \ );}
\DoxyCodeLine{00386\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a96b37fbab88dfb78b1641c0c30710243}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!select\_subprotocol@{select\_subprotocol}}
\index{select\_subprotocol@{select\_subprotocol}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{select\_subprotocol()}{select\_subprotocol()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a96b37fbab88dfb78b1641c0c30710243} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::select\+\_\+subprotocol (\begin{DoxyParamCaption}\item[{std\+::string const \&}]{value}{}\end{DoxyParamCaption})}

Indicates which subprotocol should be used for this connection. Valid only during the validate handler callback. Subprotocol selected must have been requested by the client. Consult \doxylink{classwebsocketpp_1_1connection_ae0f196cb11d4a38ef59f2173424a4d51}{get\+\_\+requested\+\_\+subprotocols()} for a list of valid subprotocols.

This member function is valid on server endpoints/connections only


\begin{DoxyParams}{Parameters}
{\em value} & The subprotocol to select \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00516}{516}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00516\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00517\ \ \ \ \ lib::error\_code\ ec;}
\DoxyCodeLine{00518\ \ \ \ \ this-\/>\mbox{\hyperlink{classwebsocketpp_1_1connection_a53e9587a711e543ed353e8ecec13d44c}{select\_subprotocol}}(\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}},ec);}
\DoxyCodeLine{00519\ \ \ \ \ \textcolor{keywordflow}{if}\ (ec)\ \{}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ exception(ec);}
\DoxyCodeLine{00521\ \ \ \ \ \}}
\DoxyCodeLine{00522\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a53e9587a711e543ed353e8ecec13d44c}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!select\_subprotocol@{select\_subprotocol}}
\index{select\_subprotocol@{select\_subprotocol}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{select\_subprotocol()}{select\_subprotocol()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a53e9587a711e543ed353e8ecec13d44c} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::select\+\_\+subprotocol (\begin{DoxyParamCaption}\item[{std\+::string const \&}]{value}{, }\item[{lib\+::error\+\_\+code \&}]{ec}{}\end{DoxyParamCaption})}

Indicates which subprotocol should be used for this connection. Valid only during the validate handler callback. Subprotocol selected must have been requested by the client. Consult \doxylink{classwebsocketpp_1_1connection_ae0f196cb11d4a38ef59f2173424a4d51}{get\+\_\+requested\+\_\+subprotocols()} for a list of valid subprotocols.

This member function is valid on server endpoints/connections only


\begin{DoxyParams}{Parameters}
{\em value} & The subprotocol to select \\
\hline
{\em ec} & \doxylink{struct_a}{A} reference to an error code that will be filled in the case of errors \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00488}{488}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00490\ \{}
\DoxyCodeLine{00491\ \ \ \ \ \textcolor{keywordflow}{if}\ (!m\_is\_server)\ \{}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ ec\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68daab6790e91c53a767498f7939e8fc734e}{error::server\_only}});}
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00494\ \ \ \ \ \}}
\DoxyCodeLine{00495\ }
\DoxyCodeLine{00496\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}}.empty())\ \{}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ ec\ =\ lib::error\_code();}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00499\ \ \ \ \ \}}
\DoxyCodeLine{00500\ }
\DoxyCodeLine{00501\ \ \ \ \ std::vector<std::string>::iterator\ it;}
\DoxyCodeLine{00502\ }
\DoxyCodeLine{00503\ \ \ \ \ it\ =\ std::find(m\_requested\_subprotocols.begin(),}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_requested\_subprotocols.end(),}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}});}
\DoxyCodeLine{00506\ }
\DoxyCodeLine{00507\ \ \ \ \ \textcolor{keywordflow}{if}\ (it\ ==\ m\_requested\_subprotocols.end())\ \{}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ ec\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da1c2d766aa9dc1b43d4af8dac9d7de2e0}{error::unrequested\_subprotocol}});}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00510\ \ \ \ \ \}}
\DoxyCodeLine{00511\ }
\DoxyCodeLine{00512\ \ \ \ \ m\_subprotocol\ =\ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}};}
\DoxyCodeLine{00513\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_a53e9587a711e543ed353e8ecec13d44c_cgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_a29900da403dbafab8095c0989104be90}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!send@{send}}
\index{send@{send}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{send()}{send()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a29900da403dbafab8095c0989104be90} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
lib\+::error\+\_\+code \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::send (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classwebsocketpp_1_1connection_a470a4dfe286833dc14e0906eb6e858a5}{message\+\_\+ptr}}}]{msg}{}\end{DoxyParamCaption})}

If presented with a prepared message it is added without validation or framing. If presented with an unprepared message it is validated, framed, and then added

\doxylink{namespace_errors}{Errors} are returned via an exception \begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000005}{Todo}}]make exception system\+\_\+error rather than error\+\_\+code\end{DoxyRefDesc}


This method invokes the m\+\_\+write\+\_\+lock mutex


\begin{DoxyParams}{Parameters}
{\em msg} & \doxylink{struct_a}{A} message\+\_\+ptr to the message to send. \\
\hline
\end{DoxyParams}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_a29900da403dbafab8095c0989104be90_cgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_af3f96a962ed7a271a00e85ba4df2db45}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!send@{send}}
\index{send@{send}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{send()}{send()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_af3f96a962ed7a271a00e85ba4df2db45} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
lib\+::error\+\_\+code \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::send (\begin{DoxyParamCaption}\item[{std\+::string const \&}]{payload}{, }\item[{\mbox{\hyperlink{namespacewebsocketpp_1_1frame_1_1opcode_ae68711643096dfc4af6d66ade3f9fd5e}{frame\+::opcode\+::value}}}]{op}{ = {\ttfamily \mbox{\hyperlink{namespacewebsocketpp_1_1frame_1_1opcode_ae68711643096dfc4af6d66ade3f9fd5ea6b65f28626b19b2eef447744c564e727}{frame\+::opcode\+::text}}}}\end{DoxyParamCaption})}

Convenience method to send a message given a payload string and optionally an opcode. Default opcode is \doxylink{namespaceutf8}{utf8} text.

This method locks the m\+\_\+write\+\_\+lock mutex


\begin{DoxyParams}{Parameters}
{\em payload} & The payload string to generated the message with\\
\hline
{\em op} & The opcode to generated the message with. Default is \doxylink{namespacewebsocketpp_1_1frame_1_1opcode_ae68711643096dfc4af6d66ade3f9fd5ea6b65f28626b19b2eef447744c564e727}{frame\+::opcode\+::text} \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00083}{83}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00085\ \{}
\DoxyCodeLine{00086\ \ \ \ \ \mbox{\hyperlink{debug__client_8cpp_a08398c4d31a4dc3e42d1b9a9ef64c6ad}{message\_ptr}}\ msg\ =\ m\_msg\_manager-\/>get\_message(\mbox{\hyperlink{unionop}{op}},payload.size());}
\DoxyCodeLine{00087\ \ \ \ \ msg-\/>append\_payload(payload);}
\DoxyCodeLine{00088\ \ \ \ \ msg-\/>set\_compressed(\textcolor{keyword}{true});}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classwebsocketpp_1_1connection_af3f96a962ed7a271a00e85ba4df2db45}{send}}(msg);}
\DoxyCodeLine{00091\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a607fc1d40a2cf994ccc7173a94a2774d}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!send@{send}}
\index{send@{send}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{send()}{send()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a607fc1d40a2cf994ccc7173a94a2774d} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
lib\+::error\+\_\+code \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::send (\begin{DoxyParamCaption}\item[{void const \texorpdfstring{$\ast$}{*}}]{payload}{, }\item[{size\+\_\+t}]{len}{, }\item[{\mbox{\hyperlink{namespacewebsocketpp_1_1frame_1_1opcode_ae68711643096dfc4af6d66ade3f9fd5e}{frame\+::opcode\+::value}}}]{op}{ = {\ttfamily \mbox{\hyperlink{namespacewebsocketpp_1_1frame_1_1opcode_ae68711643096dfc4af6d66ade3f9fd5eabe7c19fe7e9744d6a0f041e4c99f120f}{frame\+::opcode\+::binary}}}}\end{DoxyParamCaption})}

Convenience method to send a message given a raw array and optionally an opcode. Default opcode is binary.

This method locks the m\+\_\+write\+\_\+lock mutex


\begin{DoxyParams}{Parameters}
{\em payload} & \doxylink{struct_a}{A} pointer to the array containing the bytes to send.\\
\hline
{\em len} & Length of the array.\\
\hline
{\em op} & The opcode to generated the message with. Default is \doxylink{namespacewebsocketpp_1_1frame_1_1opcode_ae68711643096dfc4af6d66ade3f9fd5eabe7c19fe7e9744d6a0f041e4c99f120f}{frame\+::opcode\+::binary} \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00094}{94}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00096\ \{}
\DoxyCodeLine{00097\ \ \ \ \ \mbox{\hyperlink{debug__client_8cpp_a08398c4d31a4dc3e42d1b9a9ef64c6ad}{message\_ptr}}\ msg\ =\ m\_msg\_manager-\/>get\_message(\mbox{\hyperlink{unionop}{op}},\mbox{\hyperlink{yubihsm__pkcs11_8c_a7360b55975153b822efc5217b7734e6a}{len}});}
\DoxyCodeLine{00098\ \ \ \ \ msg-\/>append\_payload(payload,\mbox{\hyperlink{yubihsm__pkcs11_8c_a7360b55975153b822efc5217b7734e6a}{len}});}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classwebsocketpp_1_1connection_af3f96a962ed7a271a00e85ba4df2db45}{send}}(msg);}
\DoxyCodeLine{00101\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_aabc8c4f01bb9fd6336e536d992ae1a4f}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!send\_http\_response@{send\_http\_response}}
\index{send\_http\_response@{send\_http\_response}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{send\_http\_response()}{send\_http\_response()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_aabc8c4f01bb9fd6336e536d992ae1a4f} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::send\+\_\+http\+\_\+response (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00712}{712}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00712\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00713\ \ \ \ \ lib::error\_code\ ec;}
\DoxyCodeLine{00714\ \ \ \ \ this-\/>\mbox{\hyperlink{classwebsocketpp_1_1connection_aabc8c4f01bb9fd6336e536d992ae1a4f}{send\_http\_response}}(ec);}
\DoxyCodeLine{00715\ \ \ \ \ \textcolor{keywordflow}{if}\ (ec)\ \{}
\DoxyCodeLine{00716\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ exception(ec);}
\DoxyCodeLine{00717\ \ \ \ \ \}}
\DoxyCodeLine{00718\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a6c192eb26aa8be9afed7ff9e85990ea8}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!send\_http\_response@{send\_http\_response}}
\index{send\_http\_response@{send\_http\_response}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{send\_http\_response()}{send\_http\_response()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a6c192eb26aa8be9afed7ff9e85990ea8} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::send\+\_\+http\+\_\+response (\begin{DoxyParamCaption}\item[{lib\+::error\+\_\+code \&}]{ec}{}\end{DoxyParamCaption})}

Sends an http response to an HTTP connection that was deferred. This will send a complete response including all headers, status line, and body text. The connection will be closed afterwards.

\begin{DoxySince}{Since}
0.\+6.\+0
\end{DoxySince}

\begin{DoxyParams}{Parameters}
{\em ec} & \doxylink{struct_a}{A} status code, zero on success, non-\/zero otherwise \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00696}{696}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00696\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00697\ \ \ \ \ \{}
\DoxyCodeLine{00698\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a98eee129ad1f7e30c059c1073d516495}{scoped\_lock\_type}}\ \mbox{\hyperlink{xbyak__mnemonic_8h_aa81aed607133209dade63a226818224d}{lock}}(m\_connection\_state\_lock);}
\DoxyCodeLine{00699\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_http\_state\ !=\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1http__state_a40c0c92e8a4a3dff1ecd017d26f0bc4aa93b52fb34c5d01e7349ef0f4e80b94d5}{session::http\_state::deferred}})\ \{}
\DoxyCodeLine{00700\ \ \ \ \ \ \ \ \ \ \ \ \ ec\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}});}
\DoxyCodeLine{00701\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00702\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00703\ \ \ \ \ }
\DoxyCodeLine{00704\ \ \ \ \ \ \ \ \ m\_http\_state\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1http__state_a40c0c92e8a4a3dff1ecd017d26f0bc4aac7c8a63a09d8d1a407bbe298db652b9b}{session::http\_state::body\_written}};}
\DoxyCodeLine{00705\ \ \ \ \ \}}
\DoxyCodeLine{00706\ \ \ \ \ }
\DoxyCodeLine{00707\ \ \ \ \ this-\/>write\_http\_response(lib::error\_code());}
\DoxyCodeLine{00708\ \ \ \ \ ec\ =\ lib::error\_code();}
\DoxyCodeLine{00709\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_a6c192eb26aa8be9afed7ff9e85990ea8_cgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_ac11c93ff0060eaf24c16764c5ff906c9}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!set\_body@{set\_body}}
\index{set\_body@{set\_body}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{set\_body()}{set\_body()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_ac11c93ff0060eaf24c16764c5ff906c9} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::set\+\_\+body (\begin{DoxyParamCaption}\item[{std\+::string \&\&}]{value}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00579}{579}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00579\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00580\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_internal\_state\ !=\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508da2d82e414db0a6cbc60eb3cb4317b71e0}{istate::PROCESS\_HTTP\_REQUEST}})\ \{}
\DoxyCodeLine{00581\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ exception(\textcolor{stringliteral}{"{}Call\ to\ set\_status\ from\ invalid\ state"{}},}
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}}));}
\DoxyCodeLine{00583\ \ \ \ \ \}}
\DoxyCodeLine{00584\ }
\DoxyCodeLine{00585\ \ \ \ \ m\_response.set\_body(std::move(\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}}));}
\DoxyCodeLine{00586\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_ac11c93ff0060eaf24c16764c5ff906c9_cgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_a40bb318c3b9294018d217d0271a7b3da}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!set\_body@{set\_body}}
\index{set\_body@{set\_body}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{set\_body()}{set\_body()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a40bb318c3b9294018d217d0271a7b3da} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::set\+\_\+body (\begin{DoxyParamCaption}\item[{std\+::string const \&}]{value}{}\end{DoxyParamCaption})}

Set the body content of the HTTP response to the parameter string. Note set\+\_\+body will also set the Content-\/\+Length HTTP header to the appropriate value. If you want the Content-\/\+Length header to be something else set it to something else after calling set\+\_\+body

This member function is valid only from the http() and \doxylink{debug__server_8cpp_a76b106c484654b62313da8bace255c9a}{validate()} handler callbacks.


\begin{DoxyParams}{Parameters}
{\em value} & String data to include as the body content. \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
websocketpp\+::http\+::response\+::set\+\_\+body 
\end{DoxySeeAlso}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00569}{569}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00569\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00570\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_internal\_state\ !=\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508da2d82e414db0a6cbc60eb3cb4317b71e0}{istate::PROCESS\_HTTP\_REQUEST}})\ \{}
\DoxyCodeLine{00571\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ exception(\textcolor{stringliteral}{"{}Call\ to\ set\_status\ from\ invalid\ state"{}},}
\DoxyCodeLine{00572\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}}));}
\DoxyCodeLine{00573\ \ \ \ \ \}}
\DoxyCodeLine{00574\ }
\DoxyCodeLine{00575\ \ \ \ \ m\_response.set\_body(\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}});}
\DoxyCodeLine{00576\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_a40bb318c3b9294018d217d0271a7b3da_cgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_a25fb7096431b1d7350c34035db7ed9a4}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!set\_close\_handler@{set\_close\_handler}}
\index{set\_close\_handler@{set\_close\_handler}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{set\_close\_handler()}{set\_close\_handler()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a25fb7096431b1d7350c34035db7ed9a4} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::set\+\_\+close\+\_\+handler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacewebsocketpp_a27acb39e01cbca06ccc4e4e8eb8f877d}{close\+\_\+handler}}}]{h}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

The close handler is called immediately after the connection is closed.


\begin{DoxyParams}{Parameters}
{\em h} & The new close\+\_\+handler \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l00361}{361}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ m\_close\_handler\ =\ h;}
\DoxyCodeLine{00363\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a3bf932388a128a7b719c45b945bffaad}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!set\_close\_handshake\_timeout@{set\_close\_handshake\_timeout}}
\index{set\_close\_handshake\_timeout@{set\_close\_handshake\_timeout}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{set\_close\_handshake\_timeout()}{set\_close\_handshake\_timeout()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a3bf932388a128a7b719c45b945bffaad} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::set\+\_\+close\+\_\+handshake\+\_\+timeout (\begin{DoxyParamCaption}\item[{long}]{dur}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Sets the length of time the library will wait after a closing handshake has been initiated before cancelling it. This can be used to prevent excessive wait times for outgoing clients or excessive resource usage from broken clients or DoS attacks on servers.

Connections that time out will have their close handlers called with the close\+\_\+handshake\+\_\+timeout error code.

The default value is specified via the compile time config value \textquotesingle{}timeout\+\_\+close\+\_\+handshake\textquotesingle{}. The default value in the core config is 5000ms. \doxylink{struct_a}{A} value of 0 will disable the timer entirely.

To be effective, the transport you are using must support timers. See the documentation for your transport policy for details about its timer support.


\begin{DoxyParams}{Parameters}
{\em dur} & The length of the close handshake timeout in ms \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l00525}{525}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00525\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \ m\_close\_handshake\_timeout\_dur\ =\ dur;}
\DoxyCodeLine{00527\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a8d2515bc6821f90c531efe77c8a32569}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!set\_fail\_handler@{set\_fail\_handler}}
\index{set\_fail\_handler@{set\_fail\_handler}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{set\_fail\_handler()}{set\_fail\_handler()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a8d2515bc6821f90c531efe77c8a32569} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::set\+\_\+fail\+\_\+handler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacewebsocketpp_a5bb2e61cfe649b2e012f1a2c5693a4d5}{fail\+\_\+handler}}}]{h}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

The fail handler is called whenever the connection fails while the handshake is bring processed.


\begin{DoxyParams}{Parameters}
{\em h} & The new fail\+\_\+handler \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l00372}{372}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ m\_fail\_handler\ =\ h;}
\DoxyCodeLine{00374\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_af07f4fac45e1b64de7e0d12ece0d23a8}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!set\_handle@{set\_handle}}
\index{set\_handle@{set\_handle}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{set\_handle()}{set\_handle()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_af07f4fac45e1b64de7e0d12ece0d23a8} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::set\+\_\+handle (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacewebsocketpp_a6b3d26a10ee7229b84b776786332631d}{connection\+\_\+hdl}}}]{hdl}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

The connection handle is a token that can be shared outside the Web\+Socket++ core for the purposes of identifying a connection and sending it messages.


\begin{DoxyParams}{Parameters}
{\em hdl} & \doxylink{struct_a}{A} connection\+\_\+hdl that the connection will use to refer to itself. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l01357}{1357}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01357\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01358\ \ \ \ \ \ \ \ \ m\_connection\_hdl\ =\ hdl;}
\DoxyCodeLine{01359\ \ \ \ \ \ \ \ \ transport\_con\_type::set\_handle(hdl);}
\DoxyCodeLine{01360\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a78c680623660b0442394af6b45c46c23}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!set\_http\_handler@{set\_http\_handler}}
\index{set\_http\_handler@{set\_http\_handler}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{set\_http\_handler()}{set\_http\_handler()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a78c680623660b0442394af6b45c46c23} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::set\+\_\+http\+\_\+handler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacewebsocketpp_a37bc4d5b3b21d3bb494d8a23236315d2}{http\+\_\+handler}}}]{h}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

The http handler is called after an HTTP request other than a Web\+Socket upgrade request is received. It allows a Web\+Socket++ server to respond to regular HTTP requests on the same port as it processes Web\+Socket connections. This can be useful for hosting error messages, flash policy files, status pages, and other simple HTTP responses. It is not intended to be used as a primary web server.


\begin{DoxyParams}{Parameters}
{\em h} & The new http\+\_\+handler \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l00447}{447}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ m\_http\_handler\ =\ h;}
\DoxyCodeLine{00449\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_aa8edc6e8ea1b72f84973bed0a20ad365}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!set\_interrupt\_handler@{set\_interrupt\_handler}}
\index{set\_interrupt\_handler@{set\_interrupt\_handler}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{set\_interrupt\_handler()}{set\_interrupt\_handler()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_aa8edc6e8ea1b72f84973bed0a20ad365} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::set\+\_\+interrupt\+\_\+handler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacewebsocketpp_a55f6947df7673a9de3c44b6bd5d4a82a}{interrupt\+\_\+handler}}}]{h}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

The interrupt handler is called whenever the connection is manually interrupted by the application.


\begin{DoxyParams}{Parameters}
{\em h} & The new interrupt\+\_\+handler \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l00432}{432}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ m\_interrupt\_handler\ =\ h;}
\DoxyCodeLine{00434\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_ad2a5b06ad88f5bcdd06fcabaae3323bc}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!set\_max\_http\_body\_size@{set\_max\_http\_body\_size}}
\index{set\_max\_http\_body\_size@{set\_max\_http\_body\_size}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{set\_max\_http\_body\_size()}{set\_max\_http\_body\_size()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_ad2a5b06ad88f5bcdd06fcabaae3323bc} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::set\+\_\+max\+\_\+http\+\_\+body\+\_\+size (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{new\+\_\+value}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Set maximum HTTP message body size. Maximum message body size determines the point at which the connection will stop reading an HTTP request whose body is too large.

The default is set by the endpoint that creates the connection.

\begin{DoxySince}{Since}
0.\+5.\+0
\end{DoxySince}

\begin{DoxyParams}{Parameters}
{\em new\+\_\+value} & The value to set as the maximum message size. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l00610}{610}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00610\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00611\ \ \ \ \ \ \ \ \ m\_request.set\_max\_body\_size(new\_value);}
\DoxyCodeLine{00612\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a522286bf83373f87ddebf93b732abffc}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!set\_max\_message\_size@{set\_max\_message\_size}}
\index{set\_max\_message\_size@{set\_max\_message\_size}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{set\_max\_message\_size()}{set\_max\_message\_size()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a522286bf83373f87ddebf93b732abffc} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::set\+\_\+max\+\_\+message\+\_\+size (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{new\+\_\+value}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Set maximum message size. Maximum message size determines the point at which the connection will fail with the message\+\_\+too\+\_\+big protocol error. This value may be changed during the connection.

The default is set by the endpoint that creates the connection.

\begin{DoxySince}{Since}
0.\+3.\+0
\end{DoxySince}

\begin{DoxyParams}{Parameters}
{\em new\+\_\+value} & The value to set as the maximum message size. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l00575}{575}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00576\ \ \ \ \ \ \ \ \ m\_max\_message\_size\ =\ new\_value;}
\DoxyCodeLine{00577\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_processor)\ \{}
\DoxyCodeLine{00578\ \ \ \ \ \ \ \ \ \ \ \ \ m\_processor-\/>set\_max\_message\_size(new\_value);}
\DoxyCodeLine{00579\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00580\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a107e754227c828582779b906654743fe}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!set\_message\_handler@{set\_message\_handler}}
\index{set\_message\_handler@{set\_message\_handler}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{set\_message\_handler()}{set\_message\_handler()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a107e754227c828582779b906654743fe} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::set\+\_\+message\+\_\+handler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classwebsocketpp_1_1connection_a78988e5609b6ccdbd0949d5cd5fe440a}{message\+\_\+handler}}}]{h}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

The message handler is called after a new message has been received.


\begin{DoxyParams}{Parameters}
{\em h} & The new message\+\_\+handler \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l00473}{473}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ m\_message\_handler\ =\ h;}
\DoxyCodeLine{00475\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_ab11271e7778fbfde3a1987fca729af6d}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!set\_open\_handler@{set\_open\_handler}}
\index{set\_open\_handler@{set\_open\_handler}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{set\_open\_handler()}{set\_open\_handler()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_ab11271e7778fbfde3a1987fca729af6d} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::set\+\_\+open\+\_\+handler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacewebsocketpp_a53c8b4ae59cf13b5f883b119bbd14d72}{open\+\_\+handler}}}]{h}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

The open handler is called after the Web\+Socket handshake is complete and the connection is considered OPEN.


\begin{DoxyParams}{Parameters}
{\em h} & The new open\+\_\+handler \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l00351}{351}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ m\_open\_handler\ =\ h;}
\DoxyCodeLine{00353\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_ad5a666fe1144dc68b1bae3bcc615e1ed}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!set\_open\_handshake\_timeout@{set\_open\_handshake\_timeout}}
\index{set\_open\_handshake\_timeout@{set\_open\_handshake\_timeout}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{set\_open\_handshake\_timeout()}{set\_open\_handshake\_timeout()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_ad5a666fe1144dc68b1bae3bcc615e1ed} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::set\+\_\+open\+\_\+handshake\+\_\+timeout (\begin{DoxyParamCaption}\item[{long}]{dur}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Sets the length of time the library will wait after an opening handshake has been initiated before cancelling it. This can be used to prevent excessive wait times for outgoing clients or excessive resource usage from broken clients or DoS attacks on servers.

Connections that time out will have their fail handlers called with the open\+\_\+handshake\+\_\+timeout error code.

The default value is specified via the compile time config value \textquotesingle{}timeout\+\_\+open\+\_\+handshake\textquotesingle{}. The default value in the core config is 5000ms. \doxylink{struct_a}{A} value of 0 will disable the timer entirely.

To be effective, the transport you are using must support timers. See the documentation for your transport policy for details about its timer support.


\begin{DoxyParams}{Parameters}
{\em dur} & The length of the open handshake timeout in ms \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l00501}{501}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ m\_open\_handshake\_timeout\_dur\ =\ dur;}
\DoxyCodeLine{00503\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a6e21e63abbbba88f818742e9da25fa8b}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!set\_ping\_handler@{set\_ping\_handler}}
\index{set\_ping\_handler@{set\_ping\_handler}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{set\_ping\_handler()}{set\_ping\_handler()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a6e21e63abbbba88f818742e9da25fa8b} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::set\+\_\+ping\+\_\+handler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacewebsocketpp_a9dcaaa7370865f1bcacb55ae715793ef}{ping\+\_\+handler}}}]{h}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

The ping handler is called whenever the connection receives a ping control frame. The ping payload is included.

The ping handler\textquotesingle{}s return time controls whether or not a pong is sent in response to this ping. Returning false will suppress the return pong. If no ping handler is set a pong will be sent.


\begin{DoxyParams}{Parameters}
{\em h} & The new ping\+\_\+handler \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l00387}{387}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ m\_ping\_handler\ =\ h;}
\DoxyCodeLine{00389\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a298795eaa6d554ca5114ff23346d47a9}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!set\_pong\_handler@{set\_pong\_handler}}
\index{set\_pong\_handler@{set\_pong\_handler}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{set\_pong\_handler()}{set\_pong\_handler()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a298795eaa6d554ca5114ff23346d47a9} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::set\+\_\+pong\+\_\+handler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacewebsocketpp_a1798d54e6d98a481cf870091af84bc1f}{pong\+\_\+handler}}}]{h}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

The pong handler is called whenever the connection receives a pong control frame. The pong payload is included.


\begin{DoxyParams}{Parameters}
{\em h} & The new pong\+\_\+handler \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l00398}{398}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ m\_pong\_handler\ =\ h;}
\DoxyCodeLine{00400\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_ab9a905ac6a4f0f8546011b8f8a531563}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!set\_pong\_timeout@{set\_pong\_timeout}}
\index{set\_pong\_timeout@{set\_pong\_timeout}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{set\_pong\_timeout()}{set\_pong\_timeout()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_ab9a905ac6a4f0f8546011b8f8a531563} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::set\+\_\+pong\+\_\+timeout (\begin{DoxyParamCaption}\item[{long}]{dur}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Sets the length of time the library will wait for a pong response to a ping. This can be used as a keepalive or to detect broken connections.

Pong responses that time out will have the pong timeout handler called.

The default value is specified via the compile time config value \textquotesingle{}timeout\+\_\+pong\textquotesingle{}. The default value in the core config is 5000ms. \doxylink{struct_a}{A} value of 0 will disable the timer entirely.

To be effective, the transport you are using must support timers. See the documentation for your transport policy for details about its timer support.


\begin{DoxyParams}{Parameters}
{\em dur} & The length of the pong timeout in ms \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l00546}{546}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ m\_pong\_timeout\_dur\ =\ dur;}
\DoxyCodeLine{00548\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a6baa576fffc7af7685cf75894d634fb7}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!set\_pong\_timeout\_handler@{set\_pong\_timeout\_handler}}
\index{set\_pong\_timeout\_handler@{set\_pong\_timeout\_handler}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{set\_pong\_timeout\_handler()}{set\_pong\_timeout\_handler()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a6baa576fffc7af7685cf75894d634fb7} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::set\+\_\+pong\+\_\+timeout\+\_\+handler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacewebsocketpp_a2c5925a111b9e553efebea35d5ea155f}{pong\+\_\+timeout\+\_\+handler}}}]{h}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

If the transport component being used supports timers, the pong timeout handler is called whenever a pong control frame is not received with the configured timeout period after the application sends a ping.

The config setting {\ttfamily timeout\+\_\+pong} controls the length of the timeout period. It is specified in milliseconds.

This can be used to probe the health of the remote endpoint\textquotesingle{}s Web\+Socket implementation. This does not guarantee that the remote application itself is still healthy but can be a useful diagnostic.

Note\+: receipt of this callback doesn\textquotesingle{}t mean the pong will never come. This functionality will not suppress delivery of the pong in question should it arrive after the timeout.


\begin{DoxyParams}{Parameters}
{\em h} & The new pong\+\_\+timeout\+\_\+handler \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l00421}{421}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00421\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ m\_pong\_timeout\_handler\ =\ h;}
\DoxyCodeLine{00423\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a96d445ff0cc75b854c4500e93a054acb}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!set\_status@{set\_status}}
\index{set\_status@{set\_status}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{set\_status()}{set\_status()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a96d445ff0cc75b854c4500e93a054acb} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::set\+\_\+status (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacewebsocketpp_1_1http_1_1status__code_ae0d61c309e053ee5673517b54e2886c6}{http\+::status\+\_\+code\+::value}}}]{code}{}\end{DoxyParamCaption})}

Sets the response status code to {\ttfamily code} and looks up the corresponding message for standard codes. Non-\/standard codes will be entered as Unknown use set\+\_\+status(status\+\_\+code\+::value,std\+::string) overload to set both values explicitly.

This member function is valid only from the http() and \doxylink{debug__server_8cpp_a76b106c484654b62313da8bace255c9a}{validate()} handler callbacks.


\begin{DoxyParams}{Parameters}
{\em code} & \doxylink{struct_code}{Code} to set \\
\hline
{\em msg} & Message to set \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
websocketpp\+::http\+::response\+::set\+\_\+status 
\end{DoxySeeAlso}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00545}{545}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00546\ \{}
\DoxyCodeLine{00547\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_internal\_state\ !=\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508da2d82e414db0a6cbc60eb3cb4317b71e0}{istate::PROCESS\_HTTP\_REQUEST}})\ \{}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ exception(\textcolor{stringliteral}{"{}Call\ to\ set\_status\ from\ invalid\ state"{}},}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}}));}
\DoxyCodeLine{00550\ \ \ \ \ \}}
\DoxyCodeLine{00551\ \ \ \ \ m\_response.set\_status(code);}
\DoxyCodeLine{00552\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_a96d445ff0cc75b854c4500e93a054acb_cgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_a97b4513339167df8653a11ef3ccc65b1}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!set\_status@{set\_status}}
\index{set\_status@{set\_status}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{set\_status()}{set\_status()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a97b4513339167df8653a11ef3ccc65b1} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::set\+\_\+status (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacewebsocketpp_1_1http_1_1status__code_ae0d61c309e053ee5673517b54e2886c6}{http\+::status\+\_\+code\+::value}}}]{code}{, }\item[{std\+::string const \&}]{msg}{}\end{DoxyParamCaption})}

Sets the response status code and message to independent custom values. use set\+\_\+status(status\+\_\+code\+::value) to set the code and have the standard message be automatically set.

This member function is valid only from the http() and \doxylink{debug__server_8cpp_a76b106c484654b62313da8bace255c9a}{validate()} handler callbacks.


\begin{DoxyParams}{Parameters}
{\em code} & \doxylink{struct_code}{Code} to set \\
\hline
{\em msg} & Message to set \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
websocketpp\+::http\+::response\+::set\+\_\+status 
\end{DoxySeeAlso}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00556}{556}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00558\ \{}
\DoxyCodeLine{00559\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_internal\_state\ !=\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508da2d82e414db0a6cbc60eb3cb4317b71e0}{istate::PROCESS\_HTTP\_REQUEST}})\ \{}
\DoxyCodeLine{00560\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ exception(\textcolor{stringliteral}{"{}Call\ to\ set\_status\ from\ invalid\ state"{}},}
\DoxyCodeLine{00561\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}}));}
\DoxyCodeLine{00562\ \ \ \ \ \}}
\DoxyCodeLine{00563\ }
\DoxyCodeLine{00564\ \ \ \ \ m\_response.set\_status(code,msg);}
\DoxyCodeLine{00565\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_a97b4513339167df8653a11ef3ccc65b1_cgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_ac72ff8473d0a49bb069825e99e99ca9d}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!set\_termination\_handler@{set\_termination\_handler}}
\index{set\_termination\_handler@{set\_termination\_handler}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{set\_termination\_handler()}{set\_termination\_handler()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_ac72ff8473d0a49bb069825e99e99ca9d} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::set\+\_\+termination\+\_\+handler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classwebsocketpp_1_1connection_a0dafdb1188f82418a8fd33a3638496ea}{termination\+\_\+handler}}}]{new\+\_\+handler}{}\end{DoxyParamCaption})}

Sets the handler for a terminating connection. Should only be used internally by the endpoint class. 

Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00053}{53}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00055\ \{}
\DoxyCodeLine{00056\ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}connection\ set\_termination\_handler"{}});}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{comment}{//scoped\_lock\_type\ lock(m\_connection\_state\_lock);}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ m\_termination\_handler\ =\ new\_handler;}
\DoxyCodeLine{00062\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_ac5c81acf3be998662a3500a9be2c4d38}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!set\_uri@{set\_uri}}
\index{set\_uri@{set\_uri}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{set\_uri()}{set\_uri()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_ac5c81acf3be998662a3500a9be2c4d38} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::set\+\_\+uri (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacewebsocketpp_aae370ea5ac83a8ece7712cb39fc23f5b}{uri\+\_\+ptr}}}]{uri}{}\end{DoxyParamCaption})}

This should really only be called by internal library methods unless you really know what you are doing.


\begin{DoxyParams}{Parameters}
{\em uri} & The new URI to set \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00436}{436}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00437\ \ \ \ \ \textcolor{comment}{//scoped\_lock\_type\ lock(m\_connection\_state\_lock);}}
\DoxyCodeLine{00438\ \ \ \ \ m\_uri\ =\ uri;}
\DoxyCodeLine{00439\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_aa28096d051f5639d7b01954845fc054c}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!set\_validate\_handler@{set\_validate\_handler}}
\index{set\_validate\_handler@{set\_validate\_handler}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{set\_validate\_handler()}{set\_validate\_handler()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_aa28096d051f5639d7b01954845fc054c} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::set\+\_\+validate\+\_\+handler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacewebsocketpp_ae28f3fed86a59b1998746694f3d4edbd}{validate\+\_\+handler}}}]{h}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

The validate handler is called after a Web\+Socket handshake has been parsed but before a response is returned. It provides the application a chance to examine the request and determine whether or not it wants to accept the connection.

Returning false from the validate handler will reject the connection. If no validate handler is present, all connections will be allowed.


\begin{DoxyParams}{Parameters}
{\em h} & The new validate\+\_\+handler \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{connection_8hpp_source_l00463}{463}} of file \mbox{\hyperlink{connection_8hpp_source}{connection.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ m\_validate\_handler\ =\ h;}
\DoxyCodeLine{00465\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a152530ff43396025175f85748d8ee708}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!start@{start}}
\index{start@{start}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{start()}{start()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a152530ff43396025175f85748d8ee708} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::start (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l00726}{726}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00726\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00727\ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}connection\ start"{}});}
\DoxyCodeLine{00728\ }
\DoxyCodeLine{00729\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_internal\_state\ !=\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508da3e18524ea63c814e1e5da6f12bf5af10}{istate::USER\_INIT}})\ \{}
\DoxyCodeLine{00730\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}Start\ called\ in\ invalid\ state"{}});}
\DoxyCodeLine{00731\ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{yubihsm__pkcs11_8c_a74995b2493f23c9103413e37da5cdc38}{terminate}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a3344622df8c36e8ae03c59164e7b5e89}{error::make\_error\_code}}(\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da7566c083efb2833cbe99e6f4bda75882}{error::invalid\_state}}));}
\DoxyCodeLine{00732\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00733\ \ \ \ \ \}}
\DoxyCodeLine{00734\ }
\DoxyCodeLine{00735\ \ \ \ \ m\_internal\_state\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1internal__state_a981c3a4fb8962bad264d7efea05c508dab874993580bfcc74626520e293659887}{istate::TRANSPORT\_INIT}};}
\DoxyCodeLine{00736\ }
\DoxyCodeLine{00737\ \ \ \ \ \textcolor{comment}{//\ Depending\ on\ how\ the\ transport\ implements\ init\ this\ function\ may\ return}}
\DoxyCodeLine{00738\ \ \ \ \ \textcolor{comment}{//\ immediately\ and\ call\ handle\_transport\_init\ later\ or\ call}}
\DoxyCodeLine{00739\ \ \ \ \ \textcolor{comment}{//\ handle\_transport\_init\ from\ this\ function.}}
\DoxyCodeLine{00740\ \ \ \ \ transport\_con\_type::init(}
\DoxyCodeLine{00741\ \ \ \ \ \ \ \ \ lib::bind(}
\DoxyCodeLine{00742\ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{classwebsocketpp_1_1connection_ad42c5982a35b82c9009971722943b1e0}{type::handle\_transport\_init}},}
\DoxyCodeLine{00743\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a01a5af7dc2f35ff8f15da8c2cf3a3b02}{type::get\_shared}}(),}
\DoxyCodeLine{00744\ \ \ \ \ \ \ \ \ \ \ \ \ lib::placeholders::\_1}
\DoxyCodeLine{00745\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00746\ \ \ \ \ );}
\DoxyCodeLine{00747\ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classwebsocketpp_1_1connection_a152530ff43396025175f85748d8ee708_icgraph}
\end{center}
\end{figure}
\Hypertarget{classwebsocketpp_1_1connection_a7267aae677a77e5e9379ecb6db1789a3}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!terminate@{terminate}}
\index{terminate@{terminate}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{terminate()}{terminate()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a7267aae677a77e5e9379ecb6db1789a3} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::terminate (\begin{DoxyParamCaption}\item[{lib\+::error\+\_\+code const \&}]{ec}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l01707}{1707}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01707\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01708\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_alog.static\_test(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}}))\ \{}
\DoxyCodeLine{01709\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}connection\ terminate"{}});}
\DoxyCodeLine{01710\ \ \ \ \ \}}
\DoxyCodeLine{01711\ }
\DoxyCodeLine{01712\ \ \ \ \ \textcolor{comment}{//\ Cancel\ close\ handshake\ timer}}
\DoxyCodeLine{01713\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_handshake\_timer)\ \{}
\DoxyCodeLine{01714\ \ \ \ \ \ \ \ \ m\_handshake\_timer-\/>cancel();}
\DoxyCodeLine{01715\ \ \ \ \ \ \ \ \ m\_handshake\_timer.reset();}
\DoxyCodeLine{01716\ \ \ \ \ \}}
\DoxyCodeLine{01717\ }
\DoxyCodeLine{01718\ \ \ \ \ terminate\_status\ tstat\ =\ unknown;}
\DoxyCodeLine{01719\ \ \ \ \ \textcolor{keywordflow}{if}\ (ec)\ \{}
\DoxyCodeLine{01720\ \ \ \ \ \ \ \ \ m\_ec\ =\ ec;}
\DoxyCodeLine{01721\ \ \ \ \ \ \ \ \ m\_local\_close\_code\ =\ close::status::abnormal\_close;}
\DoxyCodeLine{01722\ \ \ \ \ \ \ \ \ m\_local\_close\_reason\ =\ ec.message();}
\DoxyCodeLine{01723\ \ \ \ \ \}}
\DoxyCodeLine{01724\ }
\DoxyCodeLine{01725\ \ \ \ \ \textcolor{comment}{//\ TODO:\ does\ any\ of\ this\ need\ a\ mutex?}}
\DoxyCodeLine{01726\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_is\_http)\ \{}
\DoxyCodeLine{01727\ \ \ \ \ \ \ \ \ m\_http\_state\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1http__state_a40c0c92e8a4a3dff1ecd017d26f0bc4aa265eaa7a81d94731c9f4e048df62f104}{session::http\_state::closed}};}
\DoxyCodeLine{01728\ \ \ \ \ \}}
\DoxyCodeLine{01729\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_state\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5a5d6a70f93d03d19c53ad5f4c4b3a176f}{session::state::connecting}})\ \{}
\DoxyCodeLine{01730\ \ \ \ \ \ \ \ \ m\_state\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5afff87406dd6d9c5d93c993c3e225a8bc}{session::state::closed}};}
\DoxyCodeLine{01731\ \ \ \ \ \ \ \ \ tstat\ =\ failed;}
\DoxyCodeLine{01732\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01733\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Log\ fail\ result\ here\ before\ socket\ is\ shut\ down\ and\ we\ can't\ get}}
\DoxyCodeLine{01734\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ remote\ address,\ etc\ anymore}}
\DoxyCodeLine{01735\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_ec\ !=\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da378e4b84397008e32d03d0fea4f15326}{error::http\_connection\_ended}})\ \{}
\DoxyCodeLine{01736\ \ \ \ \ \ \ \ \ \ \ \ \ log\_fail\_result();}
\DoxyCodeLine{01737\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01738\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (m\_state\ !=\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5afff87406dd6d9c5d93c993c3e225a8bc}{session::state::closed}})\ \{}
\DoxyCodeLine{01739\ \ \ \ \ \ \ \ \ m\_state\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1session_1_1state_a12acca56cdb6c10f467dfb10fc763ca5afff87406dd6d9c5d93c993c3e225a8bc}{session::state::closed}};}
\DoxyCodeLine{01740\ \ \ \ \ \ \ \ \ tstat\ =\ closed;}
\DoxyCodeLine{01741\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01742\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},}
\DoxyCodeLine{01743\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}terminate\ called\ on\ connection\ that\ was\ already\ terminated"{}});}
\DoxyCodeLine{01744\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01745\ \ \ \ \ \}}
\DoxyCodeLine{01746\ }
\DoxyCodeLine{01747\ \ \ \ \ \textcolor{comment}{//\ TODO:\ choose\ between\ shutdown\ and\ close\ based\ on\ error\ code\ sent}}
\DoxyCodeLine{01748\ }
\DoxyCodeLine{01749\ \ \ \ \ transport\_con\_type::async\_shutdown(}
\DoxyCodeLine{01750\ \ \ \ \ \ \ \ \ lib::bind(}
\DoxyCodeLine{01751\ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{classwebsocketpp_1_1connection_a5012a184129c08ea3f6cfa377e1770c1}{type::handle\_terminate}},}
\DoxyCodeLine{01752\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a01a5af7dc2f35ff8f15da8c2cf3a3b02}{type::get\_shared}}(),}
\DoxyCodeLine{01753\ \ \ \ \ \ \ \ \ \ \ \ \ tstat,}
\DoxyCodeLine{01754\ \ \ \ \ \ \ \ \ \ \ \ \ lib::placeholders::\_1}
\DoxyCodeLine{01755\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{01756\ \ \ \ \ );}
\DoxyCodeLine{01757\ \}}

\end{DoxyCode}
\Hypertarget{classwebsocketpp_1_1connection_a8d26a29e90d4847f3882c280112c6b60}\index{websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}!write\_frame@{write\_frame}}
\index{write\_frame@{write\_frame}!websocketpp::connection$<$ config $>$@{websocketpp::connection$<$ config $>$}}
\doxysubsubsection{\texorpdfstring{write\_frame()}{write\_frame()}}
{\footnotesize\ttfamily \label{classwebsocketpp_1_1connection_a8d26a29e90d4847f3882c280112c6b60} 
template$<$typename \mbox{\hyperlink{classconfig}{config}} $>$ \\
void \mbox{\hyperlink{classwebsocketpp_1_1connection}{websocketpp\+::connection}}$<$ \mbox{\hyperlink{classconfig}{config}} $>$\+::write\+\_\+frame (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000006}{Todo}}]unit tests\end{DoxyRefDesc}


This method locks the m\+\_\+write\+\_\+lock mutex 

Definition at line \mbox{\hyperlink{connection__impl_8hpp_source_l01802}{1802}} of file \mbox{\hyperlink{connection__impl_8hpp_source}{connection\+\_\+impl.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01802\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01803\ \ \ \ \ \textcolor{comment}{//m\_alog.write(log::alevel::devel,"{}connection\ write\_frame"{});}}
\DoxyCodeLine{01804\ }
\DoxyCodeLine{01805\ \ \ \ \ \{}
\DoxyCodeLine{01806\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1connection_a98eee129ad1f7e30c059c1073d516495}{scoped\_lock\_type}}\ \mbox{\hyperlink{xbyak__mnemonic_8h_aa81aed607133209dade63a226818224d}{lock}}(m\_write\_lock);}
\DoxyCodeLine{01807\ }
\DoxyCodeLine{01808\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ the\ write\ flag.\ If\ true,\ there\ is\ an\ outstanding\ transport}}
\DoxyCodeLine{01809\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ write\ already.\ In\ this\ case\ we\ just\ return.\ The\ write\ handler\ will}}
\DoxyCodeLine{01810\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ start\ a\ new\ write\ if\ the\ write\ queue\ isn't\ empty.\ If\ false,\ we\ set}}
\DoxyCodeLine{01811\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ write\ flag\ and\ proceed\ to\ initiate\ a\ transport\ write.}}
\DoxyCodeLine{01812\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_write\_flag)\ \{}
\DoxyCodeLine{01813\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01814\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01815\ }
\DoxyCodeLine{01816\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ pull\ off\ all\ the\ messages\ that\ are\ ready\ to\ write.}}
\DoxyCodeLine{01817\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ stop\ if\ we\ get\ a\ message\ marked\ terminal}}
\DoxyCodeLine{01818\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{debug__client_8cpp_a08398c4d31a4dc3e42d1b9a9ef64c6ad}{message\_ptr}}\ next\_message\ =\ write\_pop();}
\DoxyCodeLine{01819\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (next\_message)\ \{}
\DoxyCodeLine{01820\ \ \ \ \ \ \ \ \ \ \ \ \ m\_current\_msgs.push\_back(next\_message);}
\DoxyCodeLine{01821\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!next\_message-\/>get\_terminal())\ \{}
\DoxyCodeLine{01822\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ next\_message\ =\ write\_pop();}
\DoxyCodeLine{01823\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01824\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ next\_message\ =\ \mbox{\hyperlink{classwebsocketpp_1_1connection_a470a4dfe286833dc14e0906eb6e858a5}{message\_ptr}}();}
\DoxyCodeLine{01825\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01826\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01827\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01828\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_current\_msgs.empty())\ \{}
\DoxyCodeLine{01829\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ there\ was\ nothing\ to\ send}}
\DoxyCodeLine{01830\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01831\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01832\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ At\ this\ point\ we\ own\ the\ next\ messages\ to\ be\ sent\ and\ are}}
\DoxyCodeLine{01833\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ responsible\ for\ holding\ the\ write\ flag\ until\ they\ are\ }}
\DoxyCodeLine{01834\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ successfully\ sent\ or\ there\ is\ some\ error}}
\DoxyCodeLine{01835\ \ \ \ \ \ \ \ \ \ \ \ \ m\_write\_flag\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01836\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01837\ \ \ \ \ \}}
\DoxyCodeLine{01838\ }
\DoxyCodeLine{01839\ \ \ \ \ \textcolor{keyword}{typename}\ std::vector<message\_ptr>::iterator\ it;}
\DoxyCodeLine{01840\ \ \ \ \ \textcolor{keywordflow}{for}\ (it\ =\ m\_current\_msgs.begin();\ it\ !=\ m\_current\_msgs.end();\ ++it)\ \{}
\DoxyCodeLine{01841\ \ \ \ \ \ \ \ \ std::string\ \textcolor{keyword}{const}\ \&\ header\ =\ (*it)-\/>get\_header();}
\DoxyCodeLine{01842\ \ \ \ \ \ \ \ \ std::string\ \textcolor{keyword}{const}\ \&\ payload\ =\ (*it)-\/>get\_payload();}
\DoxyCodeLine{01843\ }
\DoxyCodeLine{01844\ \ \ \ \ \ \ \ \ m\_send\_buffer.push\_back(transport::buffer(header.c\_str(),header.size()));}
\DoxyCodeLine{01845\ \ \ \ \ \ \ \ \ m\_send\_buffer.push\_back(transport::buffer(payload.c\_str(),payload.size()));\ \ \ }
\DoxyCodeLine{01846\ \ \ \ \ \}}
\DoxyCodeLine{01847\ }
\DoxyCodeLine{01848\ \ \ \ \ \textcolor{comment}{//\ Print\ detailed\ send\ stats\ if\ those\ log\ levels\ are\ enabled}}
\DoxyCodeLine{01849\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_alog.static\_test(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_ac25fc7cb5fc229abb6fc893f16ffb678}{log::alevel::frame\_header}}))\ \{}
\DoxyCodeLine{01850\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_alog.dynamic\_test(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_ac25fc7cb5fc229abb6fc893f16ffb678}{log::alevel::frame\_header}}))\ \{}
\DoxyCodeLine{01851\ \ \ \ \ \ \ \ \ std::stringstream\ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da0cd3808919f43e5fbeee42fbcb808d66}{general}},header,payload;}
\DoxyCodeLine{01852\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01853\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da0cd3808919f43e5fbeee42fbcb808d66}{general}}\ <<\ \textcolor{stringliteral}{"{}Dispatching\ write\ containing\ "{}}\ <<\ m\_current\_msgs.size()}
\DoxyCodeLine{01854\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\textcolor{stringliteral}{"{}\ message(s)\ containing\ "{}};}
\DoxyCodeLine{01855\ \ \ \ \ \ \ \ \ header\ <<\ \textcolor{stringliteral}{"{}Header\ Bytes:\ \(\backslash\)n"{}};}
\DoxyCodeLine{01856\ \ \ \ \ \ \ \ \ payload\ <<\ \textcolor{stringliteral}{"{}Payload\ Bytes:\ \(\backslash\)n"{}};}
\DoxyCodeLine{01857\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01858\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ hbytes\ =\ 0;}
\DoxyCodeLine{01859\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ pbytes\ =\ 0;}
\DoxyCodeLine{01860\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01861\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ m\_current\_msgs.size();\ i++)\ \{}
\DoxyCodeLine{01862\ \ \ \ \ \ \ \ \ \ \ \ \ hbytes\ +=\ m\_current\_msgs[i]-\/>get\_header().size();}
\DoxyCodeLine{01863\ \ \ \ \ \ \ \ \ \ \ \ \ pbytes\ +=\ m\_current\_msgs[i]-\/>get\_payload().size();}
\DoxyCodeLine{01864\ }
\DoxyCodeLine{01865\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01866\ \ \ \ \ \ \ \ \ \ \ \ \ header\ <<\ \textcolor{stringliteral}{"{}["{}}\ <<\ i\ <<\ \textcolor{stringliteral}{"{}]\ ("{}}\ }
\DoxyCodeLine{01867\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ m\_current\_msgs[i]-\/>get\_header().size()\ <<\ \textcolor{stringliteral}{"{})\ "{}}\ }
\DoxyCodeLine{01868\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \mbox{\hyperlink{namespacewebsocketpp_1_1utility_a26e5a26395d95d2f6bf3a9edb8d06dd2}{utility::to\_hex}}(m\_current\_msgs[i]-\/>get\_header())\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{01869\ }
\DoxyCodeLine{01870\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_alog.static\_test(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_aa38cfdf7a82f33cac319438462707e90}{log::alevel::frame\_payload}}))\ \{}
\DoxyCodeLine{01871\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_alog.dynamic\_test(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_aa38cfdf7a82f33cac319438462707e90}{log::alevel::frame\_payload}}))\ \{}
\DoxyCodeLine{01872\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ payload\ <<\ \textcolor{stringliteral}{"{}["{}}\ <<\ i\ <<\ \textcolor{stringliteral}{"{}]\ ("{}}\ }
\DoxyCodeLine{01873\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ m\_current\_msgs[i]-\/>get\_payload().size()\ <<\ \textcolor{stringliteral}{"{})\ ["{}}<<m\_current\_msgs[i]-\/>get\_opcode()<<\textcolor{stringliteral}{"{}]\ "{}}}
\DoxyCodeLine{01874\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ (m\_current\_msgs[i]-\/>get\_opcode()\ ==\ \mbox{\hyperlink{namespacewebsocketpp_1_1frame_1_1opcode_ae68711643096dfc4af6d66ade3f9fd5ea6b65f28626b19b2eef447744c564e727}{frame::opcode::text}}\ ?\ }
\DoxyCodeLine{01875\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_current\_msgs[i]-\/>get\_payload()\ :\ }
\DoxyCodeLine{01876\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_1_1utility_a26e5a26395d95d2f6bf3a9edb8d06dd2}{utility::to\_hex}}(m\_current\_msgs[i]-\/>get\_payload())}
\DoxyCodeLine{01877\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )\ }
\DoxyCodeLine{01878\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{01879\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01880\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \ }
\DoxyCodeLine{01881\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01882\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01883\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da0cd3808919f43e5fbeee42fbcb808d66}{general}}\ <<\ hbytes\ <<\ \textcolor{stringliteral}{"{}\ header\ bytes\ and\ "{}}\ <<\ pbytes\ <<\ \textcolor{stringliteral}{"{}\ payload\ bytes"{}};}
\DoxyCodeLine{01884\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{01885\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_ac25fc7cb5fc229abb6fc893f16ffb678}{log::alevel::frame\_header}},\mbox{\hyperlink{namespacewebsocketpp_1_1error_a0558d884e44e79146ad4947aea63f68da0cd3808919f43e5fbeee42fbcb808d66}{general}}.str());}
\DoxyCodeLine{01886\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_ac25fc7cb5fc229abb6fc893f16ffb678}{log::alevel::frame\_header}},header.str());}
\DoxyCodeLine{01887\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_aa38cfdf7a82f33cac319438462707e90}{log::alevel::frame\_payload}},payload.str());}
\DoxyCodeLine{01888\ \ \ \ \ \}}
\DoxyCodeLine{01889\ \ \ \ \ \}}
\DoxyCodeLine{01890\ }
\DoxyCodeLine{01891\ \ \ \ \ transport\_con\_type::async\_write(}
\DoxyCodeLine{01892\ \ \ \ \ \ \ \ \ m\_send\_buffer,}
\DoxyCodeLine{01893\ \ \ \ \ \ \ \ \ m\_write\_frame\_handler}
\DoxyCodeLine{01894\ \ \ \ \ );}
\DoxyCodeLine{01895\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=346pt]{classwebsocketpp_1_1connection_a8d26a29e90d4847f3882c280112c6b60_cgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
libraries/fc/vendor/websocketpp/websocketpp/\mbox{\hyperlink{connection_8hpp}{connection.\+hpp}}\item 
libraries/fc/vendor/websocketpp/websocketpp/impl/\mbox{\hyperlink{connection__impl_8hpp}{connection\+\_\+impl.\+hpp}}\end{DoxyCompactItemize}
