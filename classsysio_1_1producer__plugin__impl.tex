\doxysection{sysio\+::producer\+\_\+plugin\+\_\+impl Class Reference}
\hypertarget{classsysio_1_1producer__plugin__impl}{}\label{classsysio_1_1producer__plugin__impl}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}


Inheritance diagram for sysio\+::producer\+\_\+plugin\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=217pt]{classsysio_1_1producer__plugin__impl__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for sysio\+::producer\+\_\+plugin\+\_\+impl\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum class \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bb}{start\+\_\+block\+\_\+result}} \{ \newline
\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba9b1751bd331d17d4f91c2c61c1d43560}{succeeded}}
, \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba26934eb377001f66e37289a5c93fe284}{failed}}
, \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba431da7f12530d5bf74adec7e85562038}{waiting\+\_\+for\+\_\+block}}
, \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba0f967fbaf130c7283779d1cf6058d1fa}{waiting\+\_\+for\+\_\+production}}
, \newline
\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}
 \}
\item 
using \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad426992f015c5b8232753868f5edb366}{signature\+\_\+provider\+\_\+type}} = std\+::function$<$\mbox{\hyperlink{namespacesysio_1_1chain_af141a69eb789b86fa0eb93c2d263f0df}{chain\+::signature\+\_\+type}}(\mbox{\hyperlink{namespacesysio_1_1chain_a357fd9478475457e5bb386a3143079b6}{chain\+::digest\+\_\+type}})$>$
\item 
using \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_aef5ba3d2caaa3a9800a0cc0df02d03f7}{producer\+\_\+watermark}} = std\+::pair$<$\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}}, \mbox{\hyperlink{namespacesysio_1_1chain_a11965fc424809ea1802175f8b36ae4e5}{block\+\_\+timestamp\+\_\+type}}$>$
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a7b337b36d36c99e1978b0ff7086ee303}{producer\+\_\+plugin\+\_\+impl}} (boost\+::asio\+::io\+\_\+service \&io)
\item 
std\+::optional$<$ \mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} $>$ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a9368777de44180b2070838ff18f2fb36}{calculate\+\_\+next\+\_\+block\+\_\+time}} (const \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} \&\mbox{\hyperlink{programs_2sysio-launcher_2main_8cpp_af3e300c02a95a1230283a8ea2bb1ad70}{producer\+\_\+name}}, const \mbox{\hyperlink{namespacesysio_1_1chain_a11965fc424809ea1802175f8b36ae4e5}{block\+\_\+timestamp\+\_\+type}} \&current\+\_\+block\+\_\+time) const
\item 
void \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad8895b72aaf8928b54665684ffdb9405}{schedule\+\_\+production\+\_\+loop}} ()
\item 
void \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a46f5da3c1146a1e5f0850e541dac2d90}{schedule\+\_\+maybe\+\_\+produce\+\_\+block}} (bool \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}})
\item 
void \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a336a35581aedb4308f8fc7f4eb44f152}{produce\+\_\+block}} ()
\item 
bool \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a230c88a6ed7efbc3588a043fe4915bd9}{maybe\+\_\+produce\+\_\+block}} ()
\item 
bool \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab05cac0064c3afeb991b8e91cb76631e}{block\+\_\+is\+\_\+exhausted}} () const
\item 
bool \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a07a7c896dddfa2b6c36cf67248d3599d}{remove\+\_\+expired\+\_\+trxs}} (const \mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} \&deadline)
\item 
bool \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a5b19b3db1d6db7aa9a66a6a253417d7e}{remove\+\_\+expired\+\_\+blacklisted\+\_\+trxs}} (const \mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} \&deadline)
\item 
bool \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a7de28b674848c3de56118793193d3b49}{process\+\_\+unapplied\+\_\+trxs}} (const \mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} \&deadline)
\item 
void \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_af3690d3cd99a828ada60fcf3decad39b}{process\+\_\+scheduled\+\_\+and\+\_\+incoming\+\_\+trxs}} (const \mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} \&deadline, size\+\_\+t \&pending\+\_\+incoming\+\_\+process\+\_\+limit)
\item 
bool \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a708986322e03db824e4bad41ca213260}{process\+\_\+incoming\+\_\+trxs}} (const \mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} \&deadline, size\+\_\+t \&pending\+\_\+incoming\+\_\+process\+\_\+limit)
\item 
void \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ada1bb26ba6b42b4307c20c6bdb2c49b6}{consider\+\_\+new\+\_\+watermark}} (\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} producer, \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} block\+\_\+num, \mbox{\hyperlink{namespacesysio_1_1chain_a11965fc424809ea1802175f8b36ae4e5}{block\+\_\+timestamp\+\_\+type}} timestamp)
\item 
std\+::optional$<$ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_aef5ba3d2caaa3a9800a0cc0df02d03f7}{producer\+\_\+watermark}} $>$ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a9077b433ee5250472b5670b5b9802362}{get\+\_\+watermark}} (\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} producer) const
\item 
void \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a12b22968d557ea73915472d3f1d642fe}{on\+\_\+block}} (const \mbox{\hyperlink{namespacesysio_1_1chain_ab9b14f4554cc4a0da2c361e9757b1662}{block\+\_\+state\+\_\+ptr}} \&bsp)
\item 
void \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a0a246b1d6815b521e66aa47f3ddfde22}{on\+\_\+block\+\_\+header}} (const \mbox{\hyperlink{namespacesysio_1_1chain_ab9b14f4554cc4a0da2c361e9757b1662}{block\+\_\+state\+\_\+ptr}} \&bsp)
\item 
void \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a6362a5144896a319e360fcbab4cbe92d}{on\+\_\+irreversible\+\_\+block}} (const \mbox{\hyperlink{namespacesysio_1_1chain_aa10ee348c57604b615bc8570f6685102}{signed\+\_\+block\+\_\+ptr}} \&lib)
\item 
void \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ac33726be93d621d708c02acfe7fcfd56}{abort\+\_\+block}} ()
\item 
bool \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a9ce89d0c80f40aeb7df69c5a49beff5a}{on\+\_\+incoming\+\_\+block}} (const \mbox{\hyperlink{namespacesysio_1_1chain_aa10ee348c57604b615bc8570f6685102}{signed\+\_\+block\+\_\+ptr}} \&block, const std\+::optional$<$ \mbox{\hyperlink{namespacesysio_1_1chain_a4b8e4b7ed9dcd18ee75d0de62e88aa17}{block\+\_\+id\+\_\+type}} $>$ \&block\+\_\+id, const \mbox{\hyperlink{namespacesysio_1_1chain_ab9b14f4554cc4a0da2c361e9757b1662}{block\+\_\+state\+\_\+ptr}} \&bsp)
\item 
void \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab57089953b20f4eac5adc247b73040ec}{restart\+\_\+speculative\+\_\+block}} ()
\item 
void \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a21f33bc77d2b8ba31fd7bd4e8788d8f7}{on\+\_\+incoming\+\_\+transaction\+\_\+async}} (const \mbox{\hyperlink{namespacesysio_1_1chain_a7041c0316bd294d0866609ab3e0cc7a7}{packed\+\_\+transaction\+\_\+ptr}} \&trx, bool persist\+\_\+until\+\_\+expired, bool \mbox{\hyperlink{namespacefc_a3d8a2be677709cc41f09aa7925f2d55fad6bcd1364809e1b881bb22334d14cd56}{read\+\_\+only}}, bool return\+\_\+failure\+\_\+traces, \mbox{\hyperlink{namespacesysio_1_1chain_1_1plugin__interface_a6ed984ecf76e4d360d5b142d27004c80}{next\+\_\+function}}$<$ \mbox{\hyperlink{namespacesysio_1_1chain_a4ee2867a6bec961c7a78b203cfd76be9}{transaction\+\_\+trace\+\_\+ptr}} $>$ next)
\item 
bool \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a2347f0637a0b2f1b2a16851aa4c3ef12}{process\+\_\+incoming\+\_\+transaction\+\_\+async}} (const \mbox{\hyperlink{namespacesysio_1_1chain_ad795329e0af850251f4f47cc32e8d770}{transaction\+\_\+metadata\+\_\+ptr}} \&trx, bool persist\+\_\+until\+\_\+expired, bool return\+\_\+failure\+\_\+traces, \mbox{\hyperlink{namespacesysio_1_1chain_1_1plugin__interface_a6ed984ecf76e4d360d5b142d27004c80}{next\+\_\+function}}$<$ \mbox{\hyperlink{namespacesysio_1_1chain_a4ee2867a6bec961c7a78b203cfd76be9}{transaction\+\_\+trace\+\_\+ptr}} $>$ next)
\item 
\mbox{\hyperlink{classfc_1_1microseconds}{fc\+::microseconds}} \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a03ffa5daf4ee4f47e84f8bae98bc1a00}{get\+\_\+irreversible\+\_\+block\+\_\+age}} ()
\item 
\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_afdc86b3838b1e0bc2d6667f9123d633e}{get\+\_\+pending\+\_\+block\+\_\+producer}} ()
\item 
bool \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a7964ed6135deaf78fe51442d0fde20f5}{production\+\_\+disabled\+\_\+by\+\_\+policy}} ()
\item 
bool \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a104ad57b8b9c3c8e53a680e09318ea5d}{should\+\_\+interrupt\+\_\+start\+\_\+block}} (const \mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} \&deadline) const
\item 
\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bb}{start\+\_\+block\+\_\+result}} \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a7db63178eda240d671fc6ae4e46bf01e}{start\+\_\+block}} ()
\item 
\mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_afc6b3109ff8bdf1d18200e54f5fcbf0f}{calculate\+\_\+pending\+\_\+block\+\_\+time}} () const
\item 
\mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a90e415597bff893b9e18e7e3ca2ab275}{calculate\+\_\+block\+\_\+deadline}} (const \mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} \&) const
\item 
void \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a15812dcb0edaaa48ab154d3bb2ca6a5c}{schedule\+\_\+delayed\+\_\+production\+\_\+loop}} (const std\+::weak\+\_\+ptr$<$ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl}{producer\+\_\+plugin\+\_\+impl}} $>$ \&weak\+\_\+this, std\+::optional$<$ \mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} $>$ wake\+\_\+up\+\_\+time)
\item 
std\+::optional$<$ \mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} $>$ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a652ecc759215ca6fa58b36370cc72e43}{calculate\+\_\+producer\+\_\+wake\+\_\+up\+\_\+time}} (const \mbox{\hyperlink{namespacesysio_1_1chain_a11965fc424809ea1802175f8b36ae4e5}{block\+\_\+timestamp\+\_\+type}} \&ref\+\_\+block\+\_\+time) const
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
boost\+::program\+\_\+options\+::variables\+\_\+map \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab33cc5646289fa807b2344628d1f156e}{\+\_\+options}}
\item 
bool \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a26f51591effdca88f46913aa23308695}{\+\_\+production\+\_\+enabled}} = false
\item 
bool \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a9992f102be5757c43dcdaedf97fb7c37}{\+\_\+pause\+\_\+production}} = false
\item 
std\+::map$<$ \mbox{\hyperlink{namespacesysio_1_1chain_a0628a11f388cd2e43b1ccc1260a1042f}{chain\+::public\+\_\+key\+\_\+type}}, \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad426992f015c5b8232753868f5edb366}{signature\+\_\+provider\+\_\+type}} $>$ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad9173229bf0922a5bd51150e1a95c58f}{\+\_\+signature\+\_\+providers}}
\item 
std\+::set$<$ \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{chain\+::account\+\_\+name}} $>$ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_af2f69a8ae164570dd17a1f970ae611eb}{\+\_\+producers}}
\item 
boost\+::asio\+::deadline\+\_\+timer \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab031fc8338d68f086c7d183e7512c9ea}{\+\_\+timer}}
\item 
std\+::map$<$ \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{chain\+::account\+\_\+name}}, \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_aef5ba3d2caaa3a9800a0cc0df02d03f7}{producer\+\_\+watermark}} $>$ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a56a2e3bfd17e3a5e6637d2c4d39d98e9}{\+\_\+producer\+\_\+watermarks}}
\item 
\mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475}{pending\+\_\+block\+\_\+mode}} \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\+\_\+pending\+\_\+block\+\_\+mode}} = \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475aa25b9b4361a3bd215c739cf4f9cf2e4a}{pending\+\_\+block\+\_\+mode\+::speculating}}
\item 
\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue}{unapplied\+\_\+transaction\+\_\+queue}} \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\+\_\+unapplied\+\_\+transactions}}
\item 
std\+::optional$<$ \mbox{\hyperlink{classsysio_1_1chain_1_1named__thread__pool}{named\+\_\+thread\+\_\+pool}} $>$ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ac255e968852c91eee1583e4989df4173}{\+\_\+thread\+\_\+pool}}
\item 
std\+::atomic$<$ \mbox{\hyperlink{stdint_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\+\_\+t}} $>$ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_abfe8262ebb5c1493c44e198ad3cd79ca}{\+\_\+max\+\_\+transaction\+\_\+time\+\_\+ms}}
\item 
std\+::atomic$<$ bool $>$ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_aad323427fd3fbc7d0decad90b324f44f}{\+\_\+received\+\_\+block}} \{false\}
\item 
\mbox{\hyperlink{classfc_1_1microseconds}{fc\+::microseconds}} \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_adc02b8bbfdf1e85f4bf2132db2c7510f}{\+\_\+max\+\_\+irreversible\+\_\+block\+\_\+age\+\_\+us}}
\item 
\mbox{\hyperlink{stdint_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\+\_\+t}} \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a8e8b31bfedc54a91987109a93d906117}{\+\_\+produce\+\_\+time\+\_\+offset\+\_\+us}} = 0
\item 
\mbox{\hyperlink{stdint_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\+\_\+t}} \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_aa84d793aebf28b348def7afd484a4f1a}{\+\_\+last\+\_\+block\+\_\+time\+\_\+offset\+\_\+us}} = 0
\item 
\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad027592bd832fc428fc2056775487276}{\+\_\+max\+\_\+block\+\_\+cpu\+\_\+usage\+\_\+threshold\+\_\+us}} = 0
\item 
\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad2cccb2f7374b5446a61dc8b7610d4d6}{\+\_\+max\+\_\+block\+\_\+net\+\_\+usage\+\_\+threshold\+\_\+bytes}} = 0
\item 
\mbox{\hyperlink{stdint_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\+\_\+t}} \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab2a5cd86b46f7cac1891871a40cec1c1}{\+\_\+max\+\_\+scheduled\+\_\+transaction\+\_\+time\+\_\+per\+\_\+block\+\_\+ms}} = 0
\item 
bool \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a12f98c27eeff1e09ab398e9f0f158583}{\+\_\+disable\+\_\+persist\+\_\+until\+\_\+expired}} = false
\item 
bool \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a2cc24baff7f0994410c60383929d25e8}{\+\_\+disable\+\_\+subjective\+\_\+p2p\+\_\+billing}} = true
\item 
bool \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae781cd364031e6a3b5f890921f592eb6}{\+\_\+disable\+\_\+subjective\+\_\+api\+\_\+billing}} = true
\item 
\mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a69e4926fe7ce9b13512a6292fe20e4d4}{\+\_\+irreversible\+\_\+block\+\_\+time}}
\item 
\mbox{\hyperlink{classfc_1_1microseconds}{fc\+::microseconds}} \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a26b02d1ebd098ea1ba2399c3c4a47046}{\+\_\+kiod\+\_\+provider\+\_\+timeout\+\_\+us}}
\item 
std\+::vector$<$ \mbox{\hyperlink{namespacesysio_1_1chain_a357fd9478475457e5bb386a3143079b6}{chain\+::digest\+\_\+type}} $>$ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab8c4a74665eea98fed5866ee31b25d5a}{\+\_\+protocol\+\_\+features\+\_\+to\+\_\+activate}}
\item 
bool \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a369d1c5202c442237cb333c850f1634e}{\+\_\+protocol\+\_\+features\+\_\+signaled}} = false
\item 
\mbox{\hyperlink{classsysio_1_1chain__plugin}{chain\+\_\+plugin}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\+\_\+plug}} = nullptr
\item 
\mbox{\hyperlink{structappbase_1_1channel__decl_aa309e47583ff1b9d37d1d1eef8d00c33}{compat\+::channels\+::transaction\+\_\+ack\+::channel\+\_\+type}} \& \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a6d12d42f012fe9fd7d0e533952498cab}{\+\_\+transaction\+\_\+ack\+\_\+channel}}
\item 
incoming\+::methods\+::block\+\_\+sync\+::method\+\_\+type\+::handle \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a5d959db90832bddf418fff0e29171637}{\+\_\+incoming\+\_\+block\+\_\+sync\+\_\+provider}}
\item 
incoming\+::methods\+::transaction\+\_\+async\+::method\+\_\+type\+::handle \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a3c8802a7ba5739234e2d4050a1a1c2e8}{\+\_\+incoming\+\_\+transaction\+\_\+async\+\_\+provider}}
\item 
\mbox{\hyperlink{namespacesysio_a3da8a6a29b9db34a4eb5170317d0b5a5}{transaction\+\_\+id\+\_\+with\+\_\+expiry\+\_\+index}} \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a2146e64be3edae1b16c270ee9e0a54e5}{\+\_\+blacklisted\+\_\+transactions}}
\item 
\mbox{\hyperlink{namespacesysio_a141379c7defda83a80367f716ab4f78b}{pending\+\_\+snapshot\+\_\+index}} \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ac8be366b39b451f59a5b2f2e4162f6cd}{\+\_\+pending\+\_\+snapshot\+\_\+index}}
\item 
\mbox{\hyperlink{classsysio_1_1subjective__billing}{subjective\+\_\+billing}} \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad44e89d30a1ce2b3abb85711d5342490}{\+\_\+subjective\+\_\+billing}}
\item 
account\+\_\+failures \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_afc937f75228984d541545dc4b59613a5}{\+\_\+account\+\_\+fails}} \{\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad44e89d30a1ce2b3abb85711d5342490}{\+\_\+subjective\+\_\+billing}}\}
\item 
std\+::optional$<$ scoped\+\_\+connection $>$ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a2c7bfb29624a2f689de1ee762eba165a}{\+\_\+accepted\+\_\+block\+\_\+connection}}
\item 
std\+::optional$<$ scoped\+\_\+connection $>$ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a7148be5020530e05d145c8ffef8569f4}{\+\_\+accepted\+\_\+block\+\_\+header\+\_\+connection}}
\item 
std\+::optional$<$ scoped\+\_\+connection $>$ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a2be6b35c5dbf8e84124b605f40551557}{\+\_\+irreversible\+\_\+block\+\_\+connection}}
\item 
\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a21693978cec3fac7ce203531e88c7d5a}{\+\_\+timer\+\_\+corelation\+\_\+id}} = 0
\item 
double \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a67c0fb2d1c7d16bd65cd86788d74eb0a}{\+\_\+incoming\+\_\+defer\+\_\+ratio}} = 1.\+0
\item 
bfs\+::path \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_aa3d9b96f6a6642c56f48dcd7919f1bee}{\+\_\+snapshots\+\_\+dir}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00292}{292}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.



\doxysubsection{Member Typedef Documentation}
\Hypertarget{classsysio_1_1producer__plugin__impl_aef5ba3d2caaa3a9800a0cc0df02d03f7}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!producer\_watermark@{producer\_watermark}}
\index{producer\_watermark@{producer\_watermark}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{producer\_watermark}{producer\_watermark}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_aef5ba3d2caaa3a9800a0cc0df02d03f7} 
using \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_aef5ba3d2caaa3a9800a0cc0df02d03f7}{sysio\+::producer\+\_\+plugin\+\_\+impl\+::producer\+\_\+watermark}} = std\+::pair$<$\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}}, \mbox{\hyperlink{namespacesysio_1_1chain_a11965fc424809ea1802175f8b36ae4e5}{block\+\_\+timestamp\+\_\+type}}$>$}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00320}{320}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_ad426992f015c5b8232753868f5edb366}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!signature\_provider\_type@{signature\_provider\_type}}
\index{signature\_provider\_type@{signature\_provider\_type}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{signature\_provider\_type}{signature\_provider\_type}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_ad426992f015c5b8232753868f5edb366} 
using \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad426992f015c5b8232753868f5edb366}{sysio\+::producer\+\_\+plugin\+\_\+impl\+::signature\+\_\+provider\+\_\+type}} = std\+::function$<$\mbox{\hyperlink{namespacesysio_1_1chain_af141a69eb789b86fa0eb93c2d263f0df}{chain\+::signature\+\_\+type}}(\mbox{\hyperlink{namespacesysio_1_1chain_a357fd9478475457e5bb386a3143079b6}{chain\+::digest\+\_\+type}})$>$}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00316}{316}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.



\doxysubsection{Member Enumeration Documentation}
\Hypertarget{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bb}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!start\_block\_result@{start\_block\_result}}
\index{start\_block\_result@{start\_block\_result}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{start\_block\_result}{start\_block\_result}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bb} 
enum \mbox{\hyperlink{yubihsm__pkcs11_8c_a5c230edcb923568000cb7982cf84dfce}{class}} \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bb}{sysio\+::producer\+\_\+plugin\+\_\+impl\+::start\+\_\+block\+\_\+result}}\hspace{0.3cm}{\ttfamily [strong]}}

\begin{DoxyEnumFields}[2]{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{succeeded@{succeeded}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!succeeded@{succeeded}}}\Hypertarget{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba9b1751bd331d17d4f91c2c61c1d43560}\label{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bb} 
succeeded&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{failed@{failed}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!failed@{failed}}}\Hypertarget{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba26934eb377001f66e37289a5c93fe284}\label{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bb} 
failed&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{waiting\_for\_block@{waiting\_for\_block}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!waiting\_for\_block@{waiting\_for\_block}}}\Hypertarget{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba431da7f12530d5bf74adec7e85562038}\label{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bb} 
waiting\+\_\+for\+\_\+block&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{waiting\_for\_production@{waiting\_for\_production}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!waiting\_for\_production@{waiting\_for\_production}}}\Hypertarget{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba0f967fbaf130c7283779d1cf6058d1fa}\label{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bb} 
waiting\+\_\+for\+\_\+production&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{exhausted@{exhausted}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!exhausted@{exhausted}}}\Hypertarget{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}\label{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bb} 
exhausted&\\
\hline

\end{DoxyEnumFields}


Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00785}{785}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00785\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00786\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba9b1751bd331d17d4f91c2c61c1d43560}{succeeded}},}
\DoxyCodeLine{00787\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba26934eb377001f66e37289a5c93fe284}{failed}},}
\DoxyCodeLine{00788\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba431da7f12530d5bf74adec7e85562038}{waiting\_for\_block}},}
\DoxyCodeLine{00789\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba0f967fbaf130c7283779d1cf6058d1fa}{waiting\_for\_production}},}
\DoxyCodeLine{00790\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}}
\DoxyCodeLine{00791\ \ \ \ \ \ \ \};}

\end{DoxyCode}


\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsysio_1_1producer__plugin__impl_a7b337b36d36c99e1978b0ff7086ee303}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!producer\_plugin\_impl@{producer\_plugin\_impl}}
\index{producer\_plugin\_impl@{producer\_plugin\_impl}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{producer\_plugin\_impl()}{producer\_plugin\_impl()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a7b337b36d36c99e1978b0ff7086ee303} 
sysio\+::producer\+\_\+plugin\+\_\+impl\+::producer\+\_\+plugin\+\_\+impl (\begin{DoxyParamCaption}\item[{boost\+::asio\+::io\+\_\+service \&}]{io}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00294}{294}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00295\ \ \ \ \ \ \ :\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab031fc8338d68f086c7d183e7512c9ea}{\_timer}}(io)}
\DoxyCodeLine{00296\ \ \ \ \ \ \ ,\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a6d12d42f012fe9fd7d0e533952498cab}{\_transaction\_ack\_channel}}(\mbox{\hyperlink{namespaceappbase_a99374dc23934f008a09f2f79be9eae40}{app}}().get\_channel<compat::channels::transaction\_ack>())}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classsysio_1_1producer__plugin__impl_ac33726be93d621d708c02acfe7fcfd56}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!abort\_block@{abort\_block}}
\index{abort\_block@{abort\_block}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{abort\_block()}{abort\_block()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_ac33726be93d621d708c02acfe7fcfd56} 
void sysio\+::producer\+\_\+plugin\+\_\+impl\+::abort\+\_\+block (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00427}{427}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ chain\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a14a5e77b31ecf267c8062267d03440ae}{chain}}();}
\DoxyCodeLine{00429\ }
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a64a6bf20ec0b7476d2fe310840dc818d}{add\_aborted}}(\ chain.abort\_block()\ );}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad44e89d30a1ce2b3abb85711d5342490}{\_subjective\_billing}}.\mbox{\hyperlink{classsysio_1_1subjective__billing_a23d4fafb3e774be584b5e23b3510bb0d}{abort\_block}}();}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_ac33726be93d621d708c02acfe7fcfd56_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_ac33726be93d621d708c02acfe7fcfd56_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_ab05cac0064c3afeb991b8e91cb76631e}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!block\_is\_exhausted@{block\_is\_exhausted}}
\index{block\_is\_exhausted@{block\_is\_exhausted}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{block\_is\_exhausted()}{block\_is\_exhausted()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_ab05cac0064c3afeb991b8e91cb76631e} 
bool sysio\+::producer\+\_\+plugin\+\_\+impl\+::block\+\_\+is\+\_\+exhausted (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l02238}{2238}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02239\ \ \ \ \textcolor{keyword}{const}\ chain::controller\&\ chain\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a14a5e77b31ecf267c8062267d03440ae}{chain}}();}
\DoxyCodeLine{02240\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ rl\ =\ chain.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_af096f331aa6ac6b3fe3aa71b3768daa8}{get\_resource\_limits\_manager}}();}
\DoxyCodeLine{02241\ }
\DoxyCodeLine{02242\ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}}\ cpu\_limit\ =\ rl.\mbox{\hyperlink{classsysio_1_1chain_1_1resource__limits_1_1resource__limits__manager_a59c1ce742daefcf8e370e844ed49f955}{get\_block\_cpu\_limit}}();}
\DoxyCodeLine{02243\ \ \ \ \textcolor{keywordflow}{if}(\ cpu\_limit\ <\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad027592bd832fc428fc2056775487276}{\_max\_block\_cpu\_usage\_threshold\_us}}\ )\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{02244\ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}}\ net\_limit\ =\ rl.get\_block\_net\_limit();}
\DoxyCodeLine{02245\ \ \ \ \textcolor{keywordflow}{if}(\ net\_limit\ <\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad2cccb2f7374b5446a61dc8b7610d4d6}{\_max\_block\_net\_usage\_threshold\_bytes}}\ )\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{02246\ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{02247\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_ab05cac0064c3afeb991b8e91cb76631e_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_ab05cac0064c3afeb991b8e91cb76631e_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_a90e415597bff893b9e18e7e3ca2ab275}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!calculate\_block\_deadline@{calculate\_block\_deadline}}
\index{calculate\_block\_deadline@{calculate\_block\_deadline}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{calculate\_block\_deadline()}{calculate\_block\_deadline()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a90e415597bff893b9e18e7e3ca2ab275} 
\mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} sysio\+::producer\+\_\+plugin\+\_\+impl\+::calculate\+\_\+block\+\_\+deadline (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} \&}]{block\+\_\+time}{}\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l01665}{1665}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01665\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01666\ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}}\ )\ \{}
\DoxyCodeLine{01667\ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ last\_block\ =\ ((\mbox{\hyperlink{namespacesysio_1_1chain_a11965fc424809ea1802175f8b36ae4e5}{block\_timestamp\_type}}(\ block\_time\ ).\mbox{\hyperlink{classsysio_1_1chain_1_1block__timestamp_a1bdb67323980085a2d4002d877b6c232}{slot}}\ \%\ config::producer\_repetitions)\ ==\ config::producer\_repetitions\ -\/\ 1);}
\DoxyCodeLine{01668\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ block\_time\ +\ \mbox{\hyperlink{classfc_1_1microseconds}{fc::microseconds}}(last\_block\ ?\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_aa84d793aebf28b348def7afd484a4f1a}{\_last\_block\_time\_offset\_us}}\ :\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a8e8b31bfedc54a91987109a93d906117}{\_produce\_time\_offset\_us}});}
\DoxyCodeLine{01669\ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01670\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ block\_time\ +\ \mbox{\hyperlink{classfc_1_1microseconds}{fc::microseconds}}(\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a8e8b31bfedc54a91987109a93d906117}{\_produce\_time\_offset\_us}});}
\DoxyCodeLine{01671\ \ \ \ \}}
\DoxyCodeLine{01672\ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a90e415597bff893b9e18e7e3ca2ab275_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_a9368777de44180b2070838ff18f2fb36}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!calculate\_next\_block\_time@{calculate\_next\_block\_time}}
\index{calculate\_next\_block\_time@{calculate\_next\_block\_time}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{calculate\_next\_block\_time()}{calculate\_next\_block\_time()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a9368777de44180b2070838ff18f2fb36} 
std\+::optional$<$ \mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} $>$ sysio\+::producer\+\_\+plugin\+\_\+impl\+::calculate\+\_\+next\+\_\+block\+\_\+time (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} \&}]{producer\+\_\+name}{, }\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_a11965fc424809ea1802175f8b36ae4e5}{block\+\_\+timestamp\+\_\+type}} \&}]{current\+\_\+block\+\_\+time}{}\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l01596}{1596}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01596\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01597\ \ \ \ chain::controller\&\ chain\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a14a5e77b31ecf267c8062267d03440ae}{chain}}();}
\DoxyCodeLine{01598\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ hbs\ =\ chain.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a3e445e8e2da032a322a1348091a1a702}{head\_block\_state}}();}
\DoxyCodeLine{01599\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ active\_schedule\ =\ hbs-\/>active\_schedule.producers;}
\DoxyCodeLine{01600\ }
\DoxyCodeLine{01601\ \ \ \ \textcolor{comment}{//\ determine\ if\ this\ producer\ is\ in\ the\ active\ schedule\ and\ if\ so,\ where}}
\DoxyCodeLine{01602\ \ \ \ \textcolor{keyword}{auto}\ itr\ =\ std::find\_if(active\_schedule.begin(),\ active\_schedule.end(),\ [\&](\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ asp)\{\ return\ asp.producer\_name\ ==\ producer\_name;\ \});}
\DoxyCodeLine{01603\ \ \ \ \textcolor{keywordflow}{if}\ (itr\ ==\ active\_schedule.end())\ \{}
\DoxyCodeLine{01604\ \ \ \ \ \ \ \textcolor{comment}{//\ this\ producer\ is\ not\ in\ the\ active\ producer\ set}}
\DoxyCodeLine{01605\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::optional<fc::time\_point>();}
\DoxyCodeLine{01606\ \ \ \ \}}
\DoxyCodeLine{01607\ }
\DoxyCodeLine{01608\ \ \ \ \textcolor{keywordtype}{size\_t}\ producer\_index\ =\ itr\ -\/\ active\_schedule.begin();}
\DoxyCodeLine{01609\ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ minimum\_offset\ =\ 1;\ \textcolor{comment}{//\ must\ at\ least\ be\ the\ "{}next"{}\ block}}
\DoxyCodeLine{01610\ }
\DoxyCodeLine{01611\ \ \ \ \textcolor{comment}{//\ account\ for\ a\ watermark\ in\ the\ future\ which\ is\ disqualifying\ this\ producer\ for\ now}}
\DoxyCodeLine{01612\ \ \ \ \textcolor{comment}{//\ this\ is\ conservative\ assuming\ no\ blocks\ are\ dropped.\ \ If\ blocks\ are\ dropped\ the\ watermark\ will}}
\DoxyCodeLine{01613\ \ \ \ \textcolor{comment}{//\ disqualify\ this\ producer\ for\ longer\ but\ it\ is\ assumed\ they\ will\ wake\ up,\ determine\ that\ they}}
\DoxyCodeLine{01614\ \ \ \ \textcolor{comment}{//\ are\ disqualified\ for\ longer\ due\ to\ skipped\ blocks\ and\ re-\/caculate\ their\ next\ block\ with\ better}}
\DoxyCodeLine{01615\ \ \ \ \textcolor{comment}{//\ information\ then}}
\DoxyCodeLine{01616\ \ \ \ \textcolor{keyword}{auto}\ current\_watermark\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a9077b433ee5250472b5670b5b9802362}{get\_watermark}}(\mbox{\hyperlink{programs_2sysio-launcher_2main_8cpp_af3e300c02a95a1230283a8ea2bb1ad70}{producer\_name}});}
\DoxyCodeLine{01617\ \ \ \ \textcolor{keywordflow}{if}\ (current\_watermark)\ \{}
\DoxyCodeLine{01618\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ watermark\ =\ *current\_watermark;}
\DoxyCodeLine{01619\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ block\_num\ =\ chain.head\_block\_state()-\/>block\_num;}
\DoxyCodeLine{01620\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (chain.is\_building\_block())\ \{}
\DoxyCodeLine{01621\ \ \ \ \ \ \ \ \ \ ++block\_num;}
\DoxyCodeLine{01622\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01623\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (watermark.first\ >\ block\_num)\ \{}
\DoxyCodeLine{01624\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ I\ have\ a\ watermark\ block\ number\ then\ I\ need\ to\ wait\ until\ after\ that\ watermark}}
\DoxyCodeLine{01625\ \ \ \ \ \ \ \ \ \ minimum\_offset\ =\ watermark.first\ -\/\ block\_num\ +\ 1;}
\DoxyCodeLine{01626\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01627\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (watermark.second\ >\ current\_block\_time)\ \{}
\DoxyCodeLine{01628\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ I\ have\ a\ watermark\ block\ timestamp\ then\ I\ need\ to\ wait\ until\ after\ that\ watermark\ timestamp}}
\DoxyCodeLine{01629\ \ \ \ \ \ \ \ \ \ \ minimum\_offset\ =\ std::max(minimum\_offset,\ watermark.second.slot\ -\/\ current\_block\_time.slot\ +\ 1);}
\DoxyCodeLine{01630\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01631\ \ \ \ \}}
\DoxyCodeLine{01632\ }
\DoxyCodeLine{01633\ \ \ \ \textcolor{comment}{//\ this\ producers\ next\ opportuity\ to\ produce\ is\ the\ next\ time\ its\ slot\ arrives\ after\ or\ at\ the\ calculated\ minimum}}
\DoxyCodeLine{01634\ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ minimum\_slot\ =\ current\_block\_time.slot\ +\ minimum\_offset;}
\DoxyCodeLine{01635\ \ \ \ \textcolor{keywordtype}{size\_t}\ minimum\_slot\_producer\_index\ =\ (minimum\_slot\ \%\ (active\_schedule.size()\ *\ config::producer\_repetitions))\ /\ config::producer\_repetitions;}
\DoxyCodeLine{01636\ \ \ \ \textcolor{keywordflow}{if}\ (\ producer\_index\ ==\ minimum\_slot\_producer\_index\ )\ \{}
\DoxyCodeLine{01637\ \ \ \ \ \ \ \textcolor{comment}{//\ this\ is\ the\ producer\ for\ the\ minimum\ slot,\ go\ with\ that}}
\DoxyCodeLine{01638\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesysio_1_1chain_a11965fc424809ea1802175f8b36ae4e5}{block\_timestamp\_type}}(minimum\_slot).\mbox{\hyperlink{classsysio_1_1chain_1_1block__timestamp_aa1d88152d9cc082b5ad651c3aeadfb8f}{to\_time\_point}}();}
\DoxyCodeLine{01639\ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01640\ \ \ \ \ \ \ \textcolor{comment}{//\ calculate\ how\ many\ rounds\ are\ between\ the\ minimum\ producer\ and\ the\ producer\ in\ question}}
\DoxyCodeLine{01641\ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ producer\_distance\ =\ producer\_index\ -\/\ minimum\_slot\_producer\_index;}
\DoxyCodeLine{01642\ \ \ \ \ \ \ \textcolor{comment}{//\ check\ for\ unsigned\ underflow}}
\DoxyCodeLine{01643\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (producer\_distance\ >\ producer\_index)\ \{}
\DoxyCodeLine{01644\ \ \ \ \ \ \ \ \ \ producer\_distance\ +=\ active\_schedule.size();}
\DoxyCodeLine{01645\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01646\ }
\DoxyCodeLine{01647\ \ \ \ \ \ \ \textcolor{comment}{//\ align\ the\ minimum\ slot\ to\ the\ first\ of\ its\ set\ of\ reps}}
\DoxyCodeLine{01648\ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ first\_minimum\_producer\_slot\ =\ minimum\_slot\ -\/\ (minimum\_slot\ \%\ config::producer\_repetitions);}
\DoxyCodeLine{01649\ }
\DoxyCodeLine{01650\ \ \ \ \ \ \ \textcolor{comment}{//\ offset\ the\ aligned\ minimum\ to\ the\ *earliest*\ next\ set\ of\ slots\ for\ this\ producer}}
\DoxyCodeLine{01651\ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ next\_block\_slot\ =\ first\_minimum\_producer\_slot\ \ +\ (producer\_distance\ *\ config::producer\_repetitions);}
\DoxyCodeLine{01652\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacesysio_1_1chain_a11965fc424809ea1802175f8b36ae4e5}{block\_timestamp\_type}}(next\_block\_slot).\mbox{\hyperlink{classsysio_1_1chain_1_1block__timestamp_aa1d88152d9cc082b5ad651c3aeadfb8f}{to\_time\_point}}();}
\DoxyCodeLine{01653\ \ \ \ \}}
\DoxyCodeLine{01654\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a9368777de44180b2070838ff18f2fb36_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a9368777de44180b2070838ff18f2fb36_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_afc6b3109ff8bdf1d18200e54f5fcbf0f}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!calculate\_pending\_block\_time@{calculate\_pending\_block\_time}}
\index{calculate\_pending\_block\_time@{calculate\_pending\_block\_time}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{calculate\_pending\_block\_time()}{calculate\_pending\_block\_time()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_afc6b3109ff8bdf1d18200e54f5fcbf0f} 
\mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} sysio\+::producer\+\_\+plugin\+\_\+impl\+::calculate\+\_\+pending\+\_\+block\+\_\+time (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l01656}{1656}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01656\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01657\ \ \ \ \textcolor{keyword}{const}\ chain::controller\&\ chain\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a14a5e77b31ecf267c8062267d03440ae}{chain}}();}
\DoxyCodeLine{01658\ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classfc_1_1time__point}{fc::time\_point}}\ now\ =\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}();}
\DoxyCodeLine{01659\ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classfc_1_1time__point}{fc::time\_point}}\ base\ =\ std::max<fc::time\_point>(now,\ chain.head\_block\_time());}
\DoxyCodeLine{01660\ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{stdint_8h_a414156feea104f8f75b4ed9e3121b2f6}{int64\_t}}\ min\_time\_to\_next\_block\ =\ (config::block\_interval\_us)\ -\/\ (base.time\_since\_epoch().count()\ \%\ (config::block\_interval\_us)\ );}
\DoxyCodeLine{01661\ \ \ \ \mbox{\hyperlink{classfc_1_1time__point}{fc::time\_point}}\ block\_time\ =\ base\ +\ \mbox{\hyperlink{classfc_1_1microseconds}{fc::microseconds}}(min\_time\_to\_next\_block);}
\DoxyCodeLine{01662\ \ \ \ \textcolor{keywordflow}{return}\ block\_time;}
\DoxyCodeLine{01663\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_afc6b3109ff8bdf1d18200e54f5fcbf0f_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_afc6b3109ff8bdf1d18200e54f5fcbf0f_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_a652ecc759215ca6fa58b36370cc72e43}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!calculate\_producer\_wake\_up\_time@{calculate\_producer\_wake\_up\_time}}
\index{calculate\_producer\_wake\_up\_time@{calculate\_producer\_wake\_up\_time}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{calculate\_producer\_wake\_up\_time()}{calculate\_producer\_wake\_up\_time()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a652ecc759215ca6fa58b36370cc72e43} 
std\+::optional$<$ \mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} $>$ sysio\+::producer\+\_\+plugin\+\_\+impl\+::calculate\+\_\+producer\+\_\+wake\+\_\+up\+\_\+time (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_a11965fc424809ea1802175f8b36ae4e5}{block\+\_\+timestamp\+\_\+type}} \&}]{ref\+\_\+block\+\_\+time}{}\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l02332}{2332}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02332\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02333\ \ \ \ \textcolor{comment}{//\ if\ we\ have\ any\ producers\ then\ we\ should\ at\ least\ set\ a\ timer\ for\ our\ next\ available\ slot}}
\DoxyCodeLine{02334\ \ \ \ std::optional<fc::time\_point>\ wake\_up\_time;}
\DoxyCodeLine{02335\ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{bn_8cpp_a8b0eadcc506862e9d751ab45185053aa}{p}}\ :\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_af2f69a8ae164570dd17a1f970ae611eb}{\_producers}})\ \{}
\DoxyCodeLine{02336\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ next\_producer\_block\_time\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a9368777de44180b2070838ff18f2fb36}{calculate\_next\_block\_time}}(\mbox{\hyperlink{bn_8cpp_a8b0eadcc506862e9d751ab45185053aa}{p}},\ ref\_block\_time);}
\DoxyCodeLine{02337\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (next\_producer\_block\_time)\ \{}
\DoxyCodeLine{02338\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ producer\_wake\_up\_time\ =\ *next\_producer\_block\_time\ -\/\ \mbox{\hyperlink{classfc_1_1microseconds}{fc::microseconds}}(config::block\_interval\_us);}
\DoxyCodeLine{02339\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (wake\_up\_time)\ \{}
\DoxyCodeLine{02340\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ wake\ up\ with\ a\ full\ block\ interval\ to\ the\ deadline}}
\DoxyCodeLine{02341\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ producer\_wake\_up\_time\ <\ *wake\_up\_time\ )\ \{}
\DoxyCodeLine{02342\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ wake\_up\_time\ =\ producer\_wake\_up\_time;}
\DoxyCodeLine{02343\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02344\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02345\ \ \ \ \ \ \ \ \ \ \ \ \ wake\_up\_time\ =\ producer\_wake\_up\_time;}
\DoxyCodeLine{02346\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02347\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02348\ \ \ \ \}}
\DoxyCodeLine{02349\ \ \ \ \textcolor{keywordflow}{if}(\ !wake\_up\_time\ )\ \{}
\DoxyCodeLine{02350\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Not\ Scheduling\ Speculative/Production,\ no\ local\ producers\ had\ valid\ wake\ up\ times"{}});}
\DoxyCodeLine{02351\ \ \ \ \}}
\DoxyCodeLine{02352\ }
\DoxyCodeLine{02353\ \ \ \ \textcolor{keywordflow}{return}\ wake\_up\_time;}
\DoxyCodeLine{02354\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a652ecc759215ca6fa58b36370cc72e43_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a652ecc759215ca6fa58b36370cc72e43_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_ada1bb26ba6b42b4307c20c6bdb2c49b6}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!consider\_new\_watermark@{consider\_new\_watermark}}
\index{consider\_new\_watermark@{consider\_new\_watermark}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{consider\_new\_watermark()}{consider\_new\_watermark()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_ada1bb26ba6b42b4307c20c6bdb2c49b6} 
void sysio\+::producer\+\_\+plugin\+\_\+impl\+::consider\+\_\+new\+\_\+watermark (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}}}]{producer}{, }\item[{\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}}}]{block\+\_\+num}{, }\item[{\mbox{\hyperlink{namespacesysio_1_1chain_a11965fc424809ea1802175f8b36ae4e5}{block\+\_\+timestamp\+\_\+type}}}]{timestamp}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00377}{377}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ itr\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a56a2e3bfd17e3a5e6637d2c4d39d98e9}{\_producer\_watermarks}}.find(\ producer\ );}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ itr\ !=\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a56a2e3bfd17e3a5e6637d2c4d39d98e9}{\_producer\_watermarks}}.end()\ )\ \{}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \ \ \ \ itr-\/>second.first\ =\ std::max(\ itr-\/>second.first,\ block\_num\ );}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \ \ \ \ itr-\/>second.second\ =\ std::max(\ itr-\/>second.second,\ timestamp\ );}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_af2f69a8ae164570dd17a1f970ae611eb}{\_producers}}.count(\ producer\ )\ >\ 0\ )\ \{}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a56a2e3bfd17e3a5e6637d2c4d39d98e9}{\_producer\_watermarks}}.emplace(\ producer,\ std::make\_pair(block\_num,\ timestamp)\ );}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_ada1bb26ba6b42b4307c20c6bdb2c49b6_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_a03ffa5daf4ee4f47e84f8bae98bc1a00}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!get\_irreversible\_block\_age@{get\_irreversible\_block\_age}}
\index{get\_irreversible\_block\_age@{get\_irreversible\_block\_age}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{get\_irreversible\_block\_age()}{get\_irreversible\_block\_age()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a03ffa5daf4ee4f47e84f8bae98bc1a00} 
\mbox{\hyperlink{classfc_1_1microseconds}{fc\+::microseconds}} sysio\+::producer\+\_\+plugin\+\_\+impl\+::get\+\_\+irreversible\+\_\+block\+\_\+age (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00763}{763}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00763\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00764\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ now\ =\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}();}
\DoxyCodeLine{00765\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (now\ <\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a69e4926fe7ce9b13512a6292fe20e4d4}{\_irreversible\_block\_time}})\ \{}
\DoxyCodeLine{00766\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classfc_1_1microseconds}{fc::microseconds}}(0);}
\DoxyCodeLine{00767\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00768\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ now\ -\/\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a69e4926fe7ce9b13512a6292fe20e4d4}{\_irreversible\_block\_time}};}
\DoxyCodeLine{00769\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00770\ \ \ \ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a03ffa5daf4ee4f47e84f8bae98bc1a00_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a03ffa5daf4ee4f47e84f8bae98bc1a00_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_afdc86b3838b1e0bc2d6667f9123d633e}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!get\_pending\_block\_producer@{get\_pending\_block\_producer}}
\index{get\_pending\_block\_producer@{get\_pending\_block\_producer}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{get\_pending\_block\_producer()}{get\_pending\_block\_producer()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_afdc86b3838b1e0bc2d6667f9123d633e} 
\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}} sysio\+::producer\+\_\+plugin\+\_\+impl\+::get\+\_\+pending\+\_\+block\+\_\+producer (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00772}{772}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00772\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00773\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ chain\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a14a5e77b31ecf267c8062267d03440ae}{chain}}();}
\DoxyCodeLine{00774\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (chain.is\_building\_block())\ \{}
\DoxyCodeLine{00775\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ chain.pending\_block\_producer();}
\DoxyCodeLine{00776\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00777\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{00778\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00779\ \ \ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsysio_1_1producer__plugin__impl_a9077b433ee5250472b5670b5b9802362}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!get\_watermark@{get\_watermark}}
\index{get\_watermark@{get\_watermark}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{get\_watermark()}{get\_watermark()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a9077b433ee5250472b5670b5b9802362} 
std\+::optional$<$ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_aef5ba3d2caaa3a9800a0cc0df02d03f7}{producer\+\_\+watermark}} $>$ sysio\+::producer\+\_\+plugin\+\_\+impl\+::get\+\_\+watermark (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{account\+\_\+name}}}]{producer}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00387}{387}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ itr\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a56a2e3bfd17e3a5e6637d2c4d39d98e9}{\_producer\_watermarks}}.find(\ producer\ );}
\DoxyCodeLine{00389\ }
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ itr\ ==\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a56a2e3bfd17e3a5e6637d2c4d39d98e9}{\_producer\_watermarks}}.end()\ )\ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{00391\ }
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ itr-\/>second;}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a9077b433ee5250472b5670b5b9802362_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_a230c88a6ed7efbc3588a043fe4915bd9}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!maybe\_produce\_block@{maybe\_produce\_block}}
\index{maybe\_produce\_block@{maybe\_produce\_block}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{maybe\_produce\_block()}{maybe\_produce\_block()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a230c88a6ed7efbc3588a043fe4915bd9} 
bool sysio\+::producer\+\_\+plugin\+\_\+impl\+::maybe\+\_\+produce\+\_\+block (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l02372}{2372}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02373\ \ \ \ \textcolor{keyword}{auto}\ reschedule\ =\ \mbox{\hyperlink{namespacefc_a23d89b54a8ffd84f7e7efeb21747d846}{fc::make\_scoped\_exit}}([\textcolor{keyword}{this}]\{}
\DoxyCodeLine{02374\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad8895b72aaf8928b54665684ffdb9405}{schedule\_production\_loop}}();}
\DoxyCodeLine{02375\ \ \ \ \});}
\DoxyCodeLine{02376\ }
\DoxyCodeLine{02377\ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{02378\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a336a35581aedb4308f8fc7f4eb44f152}{produce\_block}}();}
\DoxyCodeLine{02379\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{02380\ \ \ \ \}\ \mbox{\hyperlink{producer__plugin_8cpp_a01d09f9c9fe1cbc1b70a0c41f0682e07}{LOG\_AND\_DROP}}();}
\DoxyCodeLine{02381\ }
\DoxyCodeLine{02382\ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Aborting\ block\ due\ to\ produce\_block\ error"{}});}
\DoxyCodeLine{02383\ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ac33726be93d621d708c02acfe7fcfd56}{abort\_block}}();}
\DoxyCodeLine{02384\ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{02385\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classsysio_1_1producer__plugin__impl_a230c88a6ed7efbc3588a043fe4915bd9_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_a12b22968d557ea73915472d3f1d642fe}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!on\_block@{on\_block}}
\index{on\_block@{on\_block}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{on\_block()}{on\_block()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a12b22968d557ea73915472d3f1d642fe} 
void sysio\+::producer\+\_\+plugin\+\_\+impl\+::on\+\_\+block (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_ab9b14f4554cc4a0da2c361e9757b1662}{block\+\_\+state\+\_\+ptr}} \&}]{bsp}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00395}{395}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ before\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a7fb8cf5dfb622f9e619be9a4bb5eeba8}{size}}();}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_ae094df3999abc100626a5fe9f5937561}{clear\_applied}}(\ bsp\ );}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad44e89d30a1ce2b3abb85711d5342490}{\_subjective\_billing}}.\mbox{\hyperlink{classsysio_1_1subjective__billing_aec76b593918a0e487d607afd7a7fbe4a}{on\_block}}(\ \mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ bsp,\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}()\ );}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Removed\ applied\ transactions\ before:\ \$\{before\},\ after:\ \$\{after\}"{}},}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}before"{}},\ before)(\textcolor{stringliteral}{"{}after"{}},\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a7fb8cf5dfb622f9e619be9a4bb5eeba8}{size}}())\ );}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a12b22968d557ea73915472d3f1d642fe_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_a0a246b1d6815b521e66aa47f3ddfde22}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!on\_block\_header@{on\_block\_header}}
\index{on\_block\_header@{on\_block\_header}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{on\_block\_header()}{on\_block\_header()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a0a246b1d6815b521e66aa47f3ddfde22} 
void sysio\+::producer\+\_\+plugin\+\_\+impl\+::on\+\_\+block\+\_\+header (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_ab9b14f4554cc4a0da2c361e9757b1662}{block\+\_\+state\+\_\+ptr}} \&}]{bsp}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00403}{403}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ada1bb26ba6b42b4307c20c6bdb2c49b6}{consider\_new\_watermark}}(\ bsp-\/>header.producer,\ bsp-\/>block\_num,\ bsp-\/>block-\/>timestamp\ );}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a0a246b1d6815b521e66aa47f3ddfde22_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_a9ce89d0c80f40aeb7df69c5a49beff5a}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!on\_incoming\_block@{on\_incoming\_block}}
\index{on\_incoming\_block@{on\_incoming\_block}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{on\_incoming\_block()}{on\_incoming\_block()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a9ce89d0c80f40aeb7df69c5a49beff5a} 
bool sysio\+::producer\+\_\+plugin\+\_\+impl\+::on\+\_\+incoming\+\_\+block (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_aa10ee348c57604b615bc8570f6685102}{signed\+\_\+block\+\_\+ptr}} \&}]{block}{, }\item[{const std\+::optional$<$ \mbox{\hyperlink{namespacesysio_1_1chain_a4b8e4b7ed9dcd18ee75d0de62e88aa17}{block\+\_\+id\+\_\+type}} $>$ \&}]{block\+\_\+id}{, }\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_ab9b14f4554cc4a0da2c361e9757b1662}{block\+\_\+state\+\_\+ptr}} \&}]{bsp}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00434}{434}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ chain\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a14a5e77b31ecf267c8062267d03440ae}{chain}}();}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}}\ )\ \{}
\DoxyCodeLine{00437\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af3086372b1da6bfce45ff871734f2e8d}{fc\_wlog}}(\ \mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}dropped\ incoming\ block\ \#\$\{num\}\ id:\ \$\{id\}"{}},}
\DoxyCodeLine{00438\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}num"{}},\ block-\/>block\_num())(\textcolor{stringliteral}{"{}id"{}},\ block\_id\ ?\ (*block\_id).str()\ :\ \textcolor{stringliteral}{"{}UNKNOWN"{}})\ );}
\DoxyCodeLine{00439\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00440\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00441\ }
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ start\ a\ new\ speculative\ block,\ speculative\ start\_block\ may\ have\ been\ interrupted}}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ ensure\ =\ \mbox{\hyperlink{namespacefc_a23d89b54a8ffd84f7e7efeb21747d846}{fc::make\_scoped\_exit}}([\textcolor{keyword}{this}]()\{}
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad8895b72aaf8928b54665684ffdb9405}{schedule\_production\_loop}}();}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00446\ }
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \textcolor{keywordtype}{id}\ =\ block\_id\ ?\ *block\_id\ :\ block-\/>calculate\_id();}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ blk\_num\ =\ block-\/>block\_num();}
\DoxyCodeLine{00449\ }
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}received\ incoming\ block\ \$\{n\}\ \$\{id\}"{}},\ (\textcolor{stringliteral}{"{}n"{}},\ blk\_num)(\textcolor{stringliteral}{"{}id"{}},\ \textcolor{keywordtype}{id}));}
\DoxyCodeLine{00451\ }
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ block-\/>timestamp\ <\ (\mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}()\ +\ \mbox{\hyperlink{namespacefc_a9623b8cae3f48bbed6aa1fc2afe9b174}{fc::seconds}}(\ 7\ )),\ block\_from\_the\_future,}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}received\ a\ block\ from\ the\ future,\ ignoring\ it:\ \$\{id\}"{}},\ (\textcolor{stringliteral}{"{}id"{}},\ \textcolor{keywordtype}{id})\ );}
\DoxyCodeLine{00454\ }
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ de-\/dupe\ here...\ no\ point\ in\ aborting\ block\ if\ we\ already\ know\ the\ block\ */}}
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ existing\ =\ chain.fetch\_block\_by\_id(\ \textcolor{keywordtype}{id}\ );}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ existing\ )\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00458\ }
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ start\ processing\ of\ block}}
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ \ std::future<block\_state\_ptr>\ \mbox{\hyperlink{xbyak__mnemonic_8h_a4d3d44497d76862407098986abf97b80}{bsf}};}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !bsp\ )\ \{}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{xbyak__mnemonic_8h_a4d3d44497d76862407098986abf97b80}{bsf}}\ =\ chain.create\_block\_state\_future(\ \textcolor{keywordtype}{id},\ block\ );}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00464\ }
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ abort\ the\ pending\ block}}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ac33726be93d621d708c02acfe7fcfd56}{abort\_block}}();}
\DoxyCodeLine{00467\ }
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ push\ the\ new\ block}}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ handle\_error\ =\ [\&](\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ e)}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a9e3cdbaecd5a34b42956e888f7326fad}{elog}}((e.to\_detail\_string()));}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceappbase_a99374dc23934f008a09f2f79be9eae40}{app}}().\mbox{\hyperlink{classappbase_1_1application_ac9e3f923a46466ea3ffbf4fea3187682}{get\_channel}}<\mbox{\hyperlink{namespacesysio_1_1chain_1_1plugin__interface_1_1channels_affcf848d658aaab60ca196e471c07ccb}{channels::rejected\_block}}>().publish(\ \mbox{\hyperlink{structappbase_1_1priority_a89fc0f21b0f87574f0299932fc1724b4}{priority::medium}},\ block\ );}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw};}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00475\ }
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_1_1chain_ab9b14f4554cc4a0da2c361e9757b1662}{block\_state\_ptr}}\&\ bspr\ =\ bsp\ ?\ bsp\ :\ \mbox{\hyperlink{xbyak__mnemonic_8h_a4d3d44497d76862407098986abf97b80}{bsf}}.get();}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \ \ \ \ chain.push\_block(\ bspr,\ [\textcolor{keyword}{this}](\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_1_1chain_a3b287e6c2d3717609273c999ef660dea}{branch\_type}}\&\ forked\_branch\ )\ \{}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a602a769b172f4d7c3737719936f9bc78}{add\_forked}}(\ forked\_branch\ );}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \ \ \ \ \},\ [\textcolor{keyword}{this}](\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_1_1chain_aa85a3b49b3b219d1e3840567579e7e63}{transaction\_id\_type}}\&\ \mbox{\hyperlink{code__cache_8cpp_aa0efefe21f4700d78692edc823e763be}{id}}\ )\ \{}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_aeecdfc8cf255ba408c1c1a42bc83a2d8}{get\_trx}}(\ \textcolor{keywordtype}{id}\ );}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ );}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_1_1chain_a646553a6af0a730cdb19b9c6023d5132}{guard\_exception}}\&\ e\ )\ \{}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain__plugin_a6042f76be687a9b82332f28e1dc9a3a4}{chain\_plugin::handle\_guard\_exception}}(e);}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\ \textcolor{keyword}{const}\ std::bad\_alloc\&\ )\ \{}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain__plugin_a9fb4d31b915fb0d2ef5392a4284b67e6}{chain\_plugin::handle\_bad\_alloc}}();}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\ boost::interprocess::bad\_alloc\&\ )\ \{}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain__plugin_a047022d2589d7624114c1e458b111ea7}{chain\_plugin::handle\_db\_exhaustion}}();}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_1_1chain_acad19c1ca23d796138841046c67b3ea9}{fork\_database\_exception}}\&\ e\ )\ \{}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a9e3cdbaecd5a34b42956e888f7326fad}{elog}}(\textcolor{stringliteral}{"{}Cannot\ recover\ from\ \$\{e\}.\ Shutting\ down."{}},\ (\textcolor{stringliteral}{"{}e"{}},\ e.to\_detail\_string()));}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceappbase_a99374dc23934f008a09f2f79be9eae40}{appbase::app}}().\mbox{\hyperlink{classappbase_1_1application_a81aa58d3f94570b7976145039155fc46}{quit}}();}
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classfc_1_1exception}{fc::exception}}\&\ e\ )\ \{}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \ \ \ \ handle\_error(e);}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\textcolor{keyword}{const}\ std::exception\&\ e)\ \{}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \ \ \ \ handle\_error(\mbox{\hyperlink{classfc_1_1std__exception__wrapper_ae5ad64f84b1d373f5b92031566284c7c}{fc::std\_exception\_wrapper::from\_current\_exception}}(e));}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00498\ }
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ hbs\ =\ chain.head\_block\_state();}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ hbs-\/>header.timestamp.next().to\_time\_point()\ >=\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}()\ )\ \{}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a26f51591effdca88f46913aa23308695}{\_production\_enabled}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00503\ }
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}()\ -\/\ block-\/>timestamp\ <\ \mbox{\hyperlink{namespacefc_a9c3f2826ca2b6652fcef4da96f33503a}{fc::minutes}}(5)\ ||\ (blk\_num\ \%\ 1000\ ==\ 0)\ )\ \{}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a831cf08dc63704c11fd154132c6e8bdb}{ilog}}(\textcolor{stringliteral}{"{}Received\ block\ \$\{id\}...\ \#\$\{n\}\ @\ \$\{t\}\ signed\ by\ \$\{p\}\ [trxs:\ \$\{count\},\ lib:\ \$\{lib\},\ conf:\ \$\{confs\},\ latency:\ \$\{latency\}\ ms]"{}},}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}p"{}},block-\/>producer)(\textcolor{stringliteral}{"{}id"{}},\textcolor{keywordtype}{id}.str().substr(8,16))(\textcolor{stringliteral}{"{}n"{}},blk\_num)(\textcolor{stringliteral}{"{}t"{}},block-\/>timestamp)}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}count"{}},block-\/>transactions.size())(\textcolor{stringliteral}{"{}lib"{}},chain.last\_irreversible\_block\_num())}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}confs"{}},\ block-\/>confirmed)(\textcolor{stringliteral}{"{}latency"{}},\ (\mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}()\ -\/\ block-\/>timestamp).count()/1000\ )\ );}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ chain.get\_read\_mode()\ !=\ db\_read\_mode::IRREVERSIBLE\ \&\&\ hbs-\/>id\ !=\ \textcolor{keywordtype}{id}\ \&\&\ hbs-\/>block\ !=\ \textcolor{keyword}{nullptr}\ )\ \{\ \textcolor{comment}{//\ not\ applied\ to\ head}}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a831cf08dc63704c11fd154132c6e8bdb}{ilog}}(\textcolor{stringliteral}{"{}Block\ not\ applied\ to\ head\ \$\{id\}...\ \#\$\{n\}\ @\ \$\{t\}\ signed\ by\ \$\{p\}\ [trxs:\ \$\{count\},\ dpos:\ \$\{dpos\},\ conf:\ \$\{confs\},\ latency:\ \$\{latency\}\ ms]"{}},}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}p"{}},hbs-\/>block-\/>producer)(\textcolor{stringliteral}{"{}id"{}},hbs-\/>id.str().substr(8,16))(\textcolor{stringliteral}{"{}n"{}},hbs-\/>block\_num)(\textcolor{stringliteral}{"{}t"{}},hbs-\/>block-\/>timestamp)}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}count"{}},hbs-\/>block-\/>transactions.size())(\textcolor{stringliteral}{"{}dpos"{}},\ hbs-\/>dpos\_irreversible\_blocknum)}
\DoxyCodeLine{00513\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}confs"{}},\ hbs-\/>block-\/>confirmed)(\textcolor{stringliteral}{"{}latency"{}},\ (\mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}()\ -\/\ hbs-\/>block-\/>timestamp).count()/1000\ )\ );}
\DoxyCodeLine{00514\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00515\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00516\ }
\DoxyCodeLine{00517\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classsysio_1_1producer__plugin__impl_a9ce89d0c80f40aeb7df69c5a49beff5a_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_a21f33bc77d2b8ba31fd7bd4e8788d8f7}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!on\_incoming\_transaction\_async@{on\_incoming\_transaction\_async}}
\index{on\_incoming\_transaction\_async@{on\_incoming\_transaction\_async}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{on\_incoming\_transaction\_async()}{on\_incoming\_transaction\_async()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a21f33bc77d2b8ba31fd7bd4e8788d8f7} 
void sysio\+::producer\+\_\+plugin\+\_\+impl\+::on\+\_\+incoming\+\_\+transaction\+\_\+async (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_a7041c0316bd294d0866609ab3e0cc7a7}{packed\+\_\+transaction\+\_\+ptr}} \&}]{trx}{, }\item[{bool}]{persist\+\_\+until\+\_\+expired}{, }\item[{bool}]{read\+\_\+only}{, }\item[{bool}]{return\+\_\+failure\+\_\+traces}{, }\item[{\mbox{\hyperlink{namespacesysio_1_1chain_1_1plugin__interface_a6ed984ecf76e4d360d5b142d27004c80}{next\+\_\+function}}$<$ \mbox{\hyperlink{namespacesysio_1_1chain_a4ee2867a6bec961c7a78b203cfd76be9}{transaction\+\_\+trace\+\_\+ptr}} $>$}]{next}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00528}{528}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ \ chain::controller\&\ chain\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a14a5e77b31ecf267c8062267d03440ae}{chain}}();}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ max\_trx\_time\_ms\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_abfe8262ebb5c1493c44e198ad3cd79ca}{\_max\_transaction\_time\_ms}}.load();}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1microseconds}{fc::microseconds}}\ max\_trx\_cpu\_usage\ =\ max\_trx\_time\_ms\ <\ 0\ ?\ \mbox{\hyperlink{classfc_1_1microseconds_afc3eb0bfd792c7b1cda062e559e30c2e}{fc::microseconds::maximum}}()\ :\ \mbox{\hyperlink{namespacefc}{fc}}::\mbox{\hyperlink{namespacefc_a76ae235ec7e9b8862e70740058d7eb1b}{milliseconds}}(\ max\_trx\_time\_ms\ );}
\DoxyCodeLine{00536\ }
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ future\ =\ \mbox{\hyperlink{classsysio_1_1chain_1_1transaction__metadata_a122861328470aa67ebf9ac5cb798755d}{transaction\_metadata::start\_recover\_keys}}(\ trx,\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ac255e968852c91eee1583e4989df4173}{\_thread\_pool}}-\/>get\_executor(),}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ chain.get\_chain\_id(),\ \mbox{\hyperlink{classfc_1_1microseconds}{fc::microseconds}}(\ max\_trx\_cpu\_usage\ ),}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacefc_a3d8a2be677709cc41f09aa7925f2d55fad6bcd1364809e1b881bb22334d14cd56}{read\_only}}\ ?\ transaction\_metadata::trx\_type::read\_only\ :\ transaction\_metadata::trx\_type::input,}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ chain.configured\_subjective\_signature\_length\_limit()\ );}
\DoxyCodeLine{00541\ }
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \ boost::asio::post(\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ac255e968852c91eee1583e4989df4173}{\_thread\_pool}}-\/>get\_executor(),\ [\mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a}{self}}\ =\ \textcolor{keyword}{this},\ future\{std::move(future)\},\ persist\_until\_expired,\ return\_failure\_traces,}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ next\{std::move(next)\},\ trx]()\ \textcolor{keyword}{mutable}\ \{}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ \ \ \ \ if(\ future.valid()\ )\ \{}
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ future.wait();}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ app().post(\ priority::low,\ [self,\ future\{std::move(future)\},\ persist\_until\_expired,\ next\{std::move(\ next\ )\},\ trx\{std::move(trx)\},\ return\_failure\_traces]()\ mutable\ \{}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ auto\ exception\_handler\ =\ [self,\ \&next,\ trx\{std::move(trx)\}](fc::exception\_ptr\ ex)\ \{}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fc\_dlog(\_trx\_failed\_trace\_log,\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Speculative\ execution\ is\ REJECTING\ tx:\ \$\{txid\},\ auth:\ \$\{a\}\ :\ \$\{why\}\ "{}},}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}txid"{}},\ trx-\/>id())(\textcolor{stringliteral}{"{}a"{}},trx-\/>get\_transaction().first\_authorizer())(\textcolor{stringliteral}{"{}why"{}},ex-\/>what()));}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ next(ex);}
\DoxyCodeLine{00551\ }
\DoxyCodeLine{00552\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fc\_dlog(\_trx\_trace\_failure\_log,\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Speculative\ execution\ is\ REJECTING\ tx:\ \$\{entire\_trx\}"{}},}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}entire\_trx"{}},\ self-\/>chain\_plug-\/>get\_log\_trx(trx-\/>get\_transaction())));}
\DoxyCodeLine{00554\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fc\_dlog(\_trx\_log,\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Speculative\ execution\ is\ REJECTING\ tx:\ \$\{trx\}"{}},}
\DoxyCodeLine{00555\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}trx"{}},\ self-\/>chain\_plug-\/>get\_log\_trx(trx-\/>get\_transaction())));}
\DoxyCodeLine{00556\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00557\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ try\ \{}
\DoxyCodeLine{00558\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ auto\ result\ =\ future.get();}
\DoxyCodeLine{00559\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if(\ !self-\/>process\_incoming\_transaction\_async(\ result,\ persist\_until\_expired,\ return\_failure\_traces,\ next)\ )\ \{}
\DoxyCodeLine{00560\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if(\ self-\/>\_pending\_block\_mode\ ==\ pending\_block\_mode::producing\ )\ \{}
\DoxyCodeLine{00561\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self-\/>schedule\_maybe\_produce\_block(\ true\ );}
\DoxyCodeLine{00562\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ else\ \{}
\DoxyCodeLine{00563\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self-\/>restart\_speculative\_block();}
\DoxyCodeLine{00564\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00565\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ CATCH\_AND\_CALL(exception\_handler);}
\DoxyCodeLine{00567\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ );}
\DoxyCodeLine{00568\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00569\ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00570\ \ \ \ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a21f33bc77d2b8ba31fd7bd4e8788d8f7_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_a6362a5144896a319e360fcbab4cbe92d}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!on\_irreversible\_block@{on\_irreversible\_block}}
\index{on\_irreversible\_block@{on\_irreversible\_block}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{on\_irreversible\_block()}{on\_irreversible\_block()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a6362a5144896a319e360fcbab4cbe92d} 
void sysio\+::producer\+\_\+plugin\+\_\+impl\+::on\+\_\+irreversible\+\_\+block (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_aa10ee348c57604b615bc8570f6685102}{signed\+\_\+block\+\_\+ptr}} \&}]{lib}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00407}{407}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a69e4926fe7ce9b13512a6292fe20e4d4}{\_irreversible\_block\_time}}\ =\ lib-\/>timestamp.to\_time\_point();}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ chain::controller\&\ chain\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a14a5e77b31ecf267c8062267d03440ae}{chain}}();}
\DoxyCodeLine{00410\ }
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ promote\ any\ pending\ snapshots}}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ snapshots\_by\_height\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ac8be366b39b451f59a5b2f2e4162f6cd}{\_pending\_snapshot\_index}}.get<by\_height>();}
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ lib\_height\ =\ lib-\/>block\_num();}
\DoxyCodeLine{00414\ }
\DoxyCodeLine{00415\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!snapshots\_by\_height.empty()\ \&\&\ snapshots\_by\_height.begin()-\/>get\_height()\ <=\ lib\_height)\ \{}
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ pending\ =\ snapshots\_by\_height.begin();}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespaceutf8_afc093dfde66a6f52cb4a5caefe0e580d}{next}}\ =\ pending-\/>next;}
\DoxyCodeLine{00418\ }
\DoxyCodeLine{00419\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceutf8_afc093dfde66a6f52cb4a5caefe0e580d}{next}}(pending-\/>finalize(chain));}
\DoxyCodeLine{00421\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_ab200d016fe1306acaed181b722a3cac6}{CATCH\_AND\_CALL}}(next);}
\DoxyCodeLine{00422\ }
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \ \ \ \ snapshots\_by\_height.erase(snapshots\_by\_height.begin());}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a6362a5144896a319e360fcbab4cbe92d_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_a2347f0637a0b2f1b2a16851aa4c3ef12}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!process\_incoming\_transaction\_async@{process\_incoming\_transaction\_async}}
\index{process\_incoming\_transaction\_async@{process\_incoming\_transaction\_async}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{process\_incoming\_transaction\_async()}{process\_incoming\_transaction\_async()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a2347f0637a0b2f1b2a16851aa4c3ef12} 
bool sysio\+::producer\+\_\+plugin\+\_\+impl\+::process\+\_\+incoming\+\_\+transaction\+\_\+async (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_ad795329e0af850251f4f47cc32e8d770}{transaction\+\_\+metadata\+\_\+ptr}} \&}]{trx}{, }\item[{bool}]{persist\+\_\+until\+\_\+expired}{, }\item[{bool}]{return\+\_\+failure\+\_\+traces}{, }\item[{\mbox{\hyperlink{namespacesysio_1_1chain_1_1plugin__interface_a6ed984ecf76e4d360d5b142d27004c80}{next\+\_\+function}}$<$ \mbox{\hyperlink{namespacesysio_1_1chain_a4ee2867a6bec961c7a78b203cfd76be9}{transaction\+\_\+trace\+\_\+ptr}} $>$}]{next}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00572}{572}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00576\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00577\ \ \ \ \ \ \ \ \ \ chain::controller\&\ chain\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a14a5e77b31ecf267c8062267d03440ae}{chain}}();}
\DoxyCodeLine{00578\ }
\DoxyCodeLine{00579\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ send\_response\ =\ [\textcolor{keyword}{this},\ \&trx,\ \&chain,\ \&\mbox{\hyperlink{namespaceutf8_afc093dfde66a6f52cb4a5caefe0e580d}{next}}](\textcolor{keyword}{const}\ std::variant<fc::exception\_ptr,\ transaction\_trace\_ptr>\&\ response)\ \{}
\DoxyCodeLine{00580\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceutf8_afc093dfde66a6f52cb4a5caefe0e580d}{next}}(response);}
\DoxyCodeLine{00581\ }
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ get\_trace\ =\ [\&](\textcolor{keyword}{const}\ std::variant<fc::exception\_ptr,\ transaction\_trace\_ptr>\&\ response)\ -\/>\ \mbox{\hyperlink{classfc_1_1variant}{fc::variant}}\ \{}
\DoxyCodeLine{00583\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (std::holds\_alternative<fc::exception\_ptr>(response))\ \{}
\DoxyCodeLine{00584\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classfc_1_1variant}{fc::variant}}\{std::get<fc::exception\_ptr>(response)\};}
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00586\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_ad8549f01fbc8b47dde7a876c08c83b68}{get\_log\_trx\_trace}}(\ std::get<transaction\_trace\_ptr>(response)\ );}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00588\ }
\DoxyCodeLine{00589\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00590\ }
\DoxyCodeLine{00591\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacefc_a15170d1be1e682691dfe6ae09790edce}{fc::exception\_ptr}}\ except\_ptr;\ \textcolor{comment}{//\ rejected}}
\DoxyCodeLine{00592\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (std::holds\_alternative<fc::exception\_ptr>(response))\ \{}
\DoxyCodeLine{00593\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ except\_ptr\ =\ std::get<fc::exception\_ptr>(response);}
\DoxyCodeLine{00594\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (std::get<transaction\_trace\_ptr>(response)-\/>except)\ \{}
\DoxyCodeLine{00595\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ except\_ptr\ =\ std::get<transaction\_trace\_ptr>(response)-\/>except-\/>dynamic\_copy\_exception();}
\DoxyCodeLine{00596\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00597\ }
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!trx-\/>read\_only)\ \{}
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a6d12d42f012fe9fd7d0e533952498cab}{\_transaction\_ack\_channel}}.\mbox{\hyperlink{classappbase_1_1channel_ab30c2df14ba63cb006d8c52b48d19e3b}{publish}}(\mbox{\hyperlink{structappbase_1_1priority_ae0c72abae2c2ba770667fcf90e40d654}{priority::low}},\ std::pair<fc::exception\_ptr,\ packed\_transaction\_ptr>(except\_ptr,\ trx-\/>packed\_trx()));}
\DoxyCodeLine{00600\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00601\ }
\DoxyCodeLine{00602\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (except\_ptr)\ \{}
\DoxyCodeLine{00603\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}})\ \{}
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_ae93a86d470c7e16b50ab7102170c5d4e}{\_trx\_failed\_trace\_log}},\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Block\ \$\{block\_num\}\ for\ producer\ \$\{prod\}\ is\ REJECTING\ tx:\ \$\{txid\},\ auth:\ \$\{a\}\ :\ \$\{why\}\ "{}},}
\DoxyCodeLine{00605\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}block\_num"{}},\ chain.head\_block\_num()\ +\ 1)}
\DoxyCodeLine{00606\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}prod"{}},\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_afdc86b3838b1e0bc2d6667f9123d633e}{get\_pending\_block\_producer}}())}
\DoxyCodeLine{00607\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}txid"{}},\ trx-\/>id())}
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}a"{}},\ trx-\/>packed\_trx()-\/>get\_transaction().first\_authorizer())}
\DoxyCodeLine{00609\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}why"{}},\ except\_ptr-\/>what()));}
\DoxyCodeLine{00610\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_a78396757cc70405744561b647c892edf}{\_trx\_log}},\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Block\ \$\{block\_num\}\ for\ producer\ \$\{prod\}\ is\ REJECTING\ tx:\ \$\{trx\}"{}},}
\DoxyCodeLine{00611\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}block\_num"{}},\ chain.head\_block\_num()\ +\ 1)(\textcolor{stringliteral}{"{}prod"{}},\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_afdc86b3838b1e0bc2d6667f9123d633e}{get\_pending\_block\_producer}}())}
\DoxyCodeLine{00612\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}trx"{}},\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_ae56bb5451f52c447629b2cecbd8d4b58}{get\_log\_trx}}(trx-\/>packed\_trx()-\/>get\_transaction())));}
\DoxyCodeLine{00613\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_a979f47bc56a17944271d72bccb834c33}{\_trx\_trace\_failure\_log}},\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Block\ \$\{block\_num\}\ for\ producer\ \$\{prod\}\ is\ REJECTING\ tx:\ \$\{entire\_trace\}"{}},}
\DoxyCodeLine{00614\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}block\_num"{}},\ chain.head\_block\_num()\ +\ 1)(\textcolor{stringliteral}{"{}prod"{}},\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_afdc86b3838b1e0bc2d6667f9123d633e}{get\_pending\_block\_producer}}())}
\DoxyCodeLine{00615\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}entire\_trace"{}},\ get\_trace(response)));}
\DoxyCodeLine{00616\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00617\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_ae93a86d470c7e16b50ab7102170c5d4e}{\_trx\_failed\_trace\_log}},\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Speculative\ execution\ is\ REJECTING\ tx:\ \$\{txid\},\ auth:\ \$\{a\}\ :\ \$\{why\}\ "{}},}
\DoxyCodeLine{00618\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}txid"{}},\ trx-\/>id())}
\DoxyCodeLine{00619\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}a"{}},\ trx-\/>packed\_trx()-\/>get\_transaction().first\_authorizer())}
\DoxyCodeLine{00620\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}why"{}},\ except\_ptr-\/>what()));}
\DoxyCodeLine{00621\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_a78396757cc70405744561b647c892edf}{\_trx\_log}},\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Speculative\ execution\ is\ REJECTING\ tx:\ \$\{trx\}\ "{}},}
\DoxyCodeLine{00622\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}trx"{}},\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_ae56bb5451f52c447629b2cecbd8d4b58}{get\_log\_trx}}(trx-\/>packed\_trx()-\/>get\_transaction())));}
\DoxyCodeLine{00623\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_a979f47bc56a17944271d72bccb834c33}{\_trx\_trace\_failure\_log}},\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Speculative\ execution\ is\ REJECTING\ tx:\ \$\{entire\_trace\}\ "{}},}
\DoxyCodeLine{00624\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}entire\_trace"{}},\ get\_trace(response)));}
\DoxyCodeLine{00625\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00626\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00627\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}})\ \{}
\DoxyCodeLine{00628\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_aea18f7b7425ddc0191447aca7c3e27f6}{\_trx\_successful\_trace\_log}},\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Block\ \$\{block\_num\}\ for\ producer\ \$\{prod\}\ is\ ACCEPTING\ tx:\ \$\{txid\},\ auth:\ \$\{a\},\ cpu:\ \$\{cpu\}"{}},}
\DoxyCodeLine{00629\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}block\_num"{}},\ chain.head\_block\_num()\ +\ 1)}
\DoxyCodeLine{00630\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}prod"{}},\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_afdc86b3838b1e0bc2d6667f9123d633e}{get\_pending\_block\_producer}}())}
\DoxyCodeLine{00631\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}txid"{}},\ trx-\/>id())}
\DoxyCodeLine{00632\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}a"{}},\ trx-\/>packed\_trx()-\/>get\_transaction().first\_authorizer())}
\DoxyCodeLine{00633\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}cpu"{}},\ trx-\/>billed\_cpu\_time\_us));}
\DoxyCodeLine{00634\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_a78396757cc70405744561b647c892edf}{\_trx\_log}},\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Block\ \$\{block\_num\}\ for\ producer\ \$\{prod\}\ is\ ACCEPTING\ tx:\ \$\{trx\}"{}},}
\DoxyCodeLine{00635\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}block\_num"{}},\ chain.head\_block\_num()\ +\ 1)(\textcolor{stringliteral}{"{}prod"{}},\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_afdc86b3838b1e0bc2d6667f9123d633e}{get\_pending\_block\_producer}}())}
\DoxyCodeLine{00636\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}trx"{}},\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_ae56bb5451f52c447629b2cecbd8d4b58}{get\_log\_trx}}(trx-\/>packed\_trx()-\/>get\_transaction())));}
\DoxyCodeLine{00637\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_a79c03faf256096a8e1ad0d59c8760d2e}{\_trx\_trace\_success\_log}},\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Block\ \$\{block\_num\}\ for\ producer\ \$\{prod\}\ is\ ACCEPTING\ tx:\ \$\{entire\_trace\}"{}},}
\DoxyCodeLine{00638\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}block\_num"{}},\ chain.head\_block\_num()\ +\ 1)(\textcolor{stringliteral}{"{}prod"{}},\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_afdc86b3838b1e0bc2d6667f9123d633e}{get\_pending\_block\_producer}}())}
\DoxyCodeLine{00639\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}entire\_trace"{}},\ get\_trace(response)));}
\DoxyCodeLine{00640\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00641\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_aea18f7b7425ddc0191447aca7c3e27f6}{\_trx\_successful\_trace\_log}},\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Speculative\ execution\ is\ ACCEPTING\ tx:\ \$\{txid\},\ auth:\ \$\{a\},\ cpu:\ \$\{cpu\}"{}},}
\DoxyCodeLine{00642\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}txid"{}},\ trx-\/>id())}
\DoxyCodeLine{00643\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}a"{}},\ trx-\/>packed\_trx()-\/>get\_transaction().first\_authorizer())}
\DoxyCodeLine{00644\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}cpu"{}},\ trx-\/>billed\_cpu\_time\_us));}
\DoxyCodeLine{00645\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_a79c03faf256096a8e1ad0d59c8760d2e}{\_trx\_trace\_success\_log}},\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Speculative\ execution\ is\ ACCEPTING\ tx:\ \$\{entire\_trace\}"{}},}
\DoxyCodeLine{00646\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}entire\_trace"{}},\ get\_trace(response)));}
\DoxyCodeLine{00647\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_a78396757cc70405744561b647c892edf}{\_trx\_log}},\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Speculative\ execution\ is\ ACCEPTING\ tx:\ \$\{trx\}"{}},}
\DoxyCodeLine{00648\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}trx"{}},\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_ae56bb5451f52c447629b2cecbd8d4b58}{get\_log\_trx}}(trx-\/>packed\_trx()-\/>get\_transaction())));}
\DoxyCodeLine{00649\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00650\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00651\ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00652\ }
\DoxyCodeLine{00653\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00654\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \textcolor{keywordtype}{id}\ =\ trx-\/>id();}
\DoxyCodeLine{00655\ }
\DoxyCodeLine{00656\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1time__point}{fc::time\_point}}\ \mbox{\hyperlink{xbyak__mnemonic_8h_a9be923ac9afe48bc98bd22e398415272}{bt}}\ =\ chain.is\_building\_block()\ ?\ chain.pending\_block\_time()\ :\ chain.head\_block\_time();}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classfc_1_1time__point}{fc::time\_point}}\ expire\ =\ trx-\/>packed\_trx()-\/>expiration();}
\DoxyCodeLine{00658\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ expire\ <\ \mbox{\hyperlink{xbyak__mnemonic_8h_a9be923ac9afe48bc98bd22e398415272}{bt}}\ )\ \{}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ send\_response(\ std::static\_pointer\_cast<fc::exception>(}
\DoxyCodeLine{00660\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::make\_shared<expired\_tx\_exception>(}
\DoxyCodeLine{00661\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{log__message_8hpp_a4a4df4bb5cffbe07aadf7d29fd44c75e}{FC\_LOG\_MESSAGE}}(\ error,\ \textcolor{stringliteral}{"{}expired\ transaction\ \$\{id\},\ expiration\ \$\{e\},\ block\ time\ \$\{bt\}"{}},}
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}id"{}},\ \textcolor{keywordtype}{id})(\textcolor{stringliteral}{"{}e"{}},\ expire)(\ \textcolor{stringliteral}{"{}bt"{}},\ \mbox{\hyperlink{xbyak__mnemonic_8h_a9be923ac9afe48bc98bd22e398415272}{bt}}\ )))));}
\DoxyCodeLine{00663\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00664\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00665\ }
\DoxyCodeLine{00666\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ chain.is\_known\_unexpired\_transaction(\ \textcolor{keywordtype}{id}\ ))\ \{}
\DoxyCodeLine{00667\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ send\_response(\ std::static\_pointer\_cast<fc::exception>(\ std::make\_shared<tx\_duplicate>(}
\DoxyCodeLine{00668\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{log__message_8hpp_a4a4df4bb5cffbe07aadf7d29fd44c75e}{FC\_LOG\_MESSAGE}}(\ error,\ \textcolor{stringliteral}{"{}duplicate\ transaction\ \$\{id\}"{}},\ (\textcolor{stringliteral}{"{}id"{}},\ \textcolor{keywordtype}{id}))))\ );}
\DoxyCodeLine{00669\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00670\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00671\ }
\DoxyCodeLine{00672\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !chain.is\_building\_block())\ \{}
\DoxyCodeLine{00673\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a62430ce9cd5b76afb9121dd00a01f047}{add\_incoming}}(\ trx,\ persist\_until\_expired,\ return\_failure\_traces,\ next\ );}
\DoxyCodeLine{00674\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00675\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00676\ }
\DoxyCodeLine{00677\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ first\_auth\ =\ trx-\/>packed\_trx()-\/>get\_transaction().first\_authorizer();}
\DoxyCodeLine{00678\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_afc937f75228984d541545dc4b59613a5}{\_account\_fails}}.failure\_limit(\ first\_auth\ )\ )\ \{}
\DoxyCodeLine{00679\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ send\_response(\ std::static\_pointer\_cast<fc::exception>(\ std::make\_shared<tx\_cpu\_usage\_exceeded>(}
\DoxyCodeLine{00680\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{log__message_8hpp_a4a4df4bb5cffbe07aadf7d29fd44c75e}{FC\_LOG\_MESSAGE}}(\ error,\ \textcolor{stringliteral}{"{}transaction\ \$\{id\}\ exceeded\ failure\ limit\ for\ account\ \$\{a\}"{}},}
\DoxyCodeLine{00681\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}id"{}},\ trx-\/>id())(\textcolor{stringliteral}{"{}a"{}},\ first\_auth)\ )\ )\ )\ );}
\DoxyCodeLine{00682\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00683\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00684\ }
\DoxyCodeLine{00685\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespace_w_a_s_m_a9690a14428419003297ae35f505b5103aea2b2676c28c0db26d39331a336c6b92}{start}}\ =\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}();}
\DoxyCodeLine{00686\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1microseconds}{fc::microseconds}}\ max\_trx\_time\ =\ \mbox{\hyperlink{namespacefc_a76ae235ec7e9b8862e70740058d7eb1b}{fc::milliseconds}}(\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_abfe8262ebb5c1493c44e198ad3cd79ca}{\_max\_transaction\_time\_ms}}.load()\ );}
\DoxyCodeLine{00687\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ max\_trx\_time.\mbox{\hyperlink{classfc_1_1microseconds_a20fba59ec7e1f50c6b8f2c9443cc9b92}{count}}()\ <\ 0\ )\ max\_trx\_time\ =\ \mbox{\hyperlink{classfc_1_1microseconds_afc3eb0bfd792c7b1cda062e559e30c2e}{fc::microseconds::maximum}}();}
\DoxyCodeLine{00688\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ block\_deadline\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a90e415597bff893b9e18e7e3ca2ab275}{calculate\_block\_deadline}}(\ chain.pending\_block\_time()\ );}
\DoxyCodeLine{00689\ }
\DoxyCodeLine{00690\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ disable\_subjective\_billing\ =\ (\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}}\ )}
\DoxyCodeLine{00691\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ (\ persist\_until\_expired\ \&\&\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae781cd364031e6a3b5f890921f592eb6}{\_disable\_subjective\_api\_billing}}\ )}
\DoxyCodeLine{00692\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ (\ !persist\_until\_expired\ \&\&\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a2cc24baff7f0994410c60383929d25e8}{\_disable\_subjective\_p2p\_billing}}\ )}
\DoxyCodeLine{00693\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ trx-\/>read\_only;}
\DoxyCodeLine{00694\ }
\DoxyCodeLine{00695\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a414156feea104f8f75b4ed9e3121b2f6}{int64\_t}}\ sub\_bill\ =\ 0;}
\DoxyCodeLine{00696\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !disable\_subjective\_billing\ )}
\DoxyCodeLine{00697\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sub\_bill\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad44e89d30a1ce2b3abb85711d5342490}{\_subjective\_billing}}.\mbox{\hyperlink{classsysio_1_1subjective__billing_a24c7829695461e95f71a1e209b3bda1f}{get\_subjective\_bill}}(\ first\_auth,\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}()\ );}
\DoxyCodeLine{00698\ }
\DoxyCodeLine{00699\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ prev\_billed\_cpu\_time\_us\ =\ trx-\/>billed\_cpu\_time\_us;}
\DoxyCodeLine{00700\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ trace\ =\ chain.push\_transaction(\ trx,\ block\_deadline,\ max\_trx\_time,\ prev\_billed\_cpu\_time\_us,\ \textcolor{keyword}{false},\ sub\_bill\ );}
\DoxyCodeLine{00701\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{producer__plugin_8cpp_ae93a86d470c7e16b50ab7102170c5d4e}{\_trx\_failed\_trace\_log}},\ \textcolor{stringliteral}{"{}Subjective\ bill\ for\ \$\{a\}:\ \$\{b\}\ elapsed\ \$\{t\}us"{}},\ (\textcolor{stringliteral}{"{}a"{}},first\_auth)(\textcolor{stringliteral}{"{}b"{}},sub\_bill)(\textcolor{stringliteral}{"{}t"{}},trace-\/>elapsed));}
\DoxyCodeLine{00702\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ trace-\/>except\ )\ \{}
\DoxyCodeLine{00703\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ exception\_is\_exhausted(\ *trace-\/>except\ )\ )\ \{}
\DoxyCodeLine{00704\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a62430ce9cd5b76afb9121dd00a01f047}{add\_incoming}}(\ trx,\ persist\_until\_expired,\ return\_failure\_traces,\ next\ );}
\DoxyCodeLine{00705\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}}\ )\ \{}
\DoxyCodeLine{00706\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_ae93a86d470c7e16b50ab7102170c5d4e}{\_trx\_failed\_trace\_log}},\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Block\ \$\{block\_num\}\ for\ producer\ \$\{prod\}\ COULD\ NOT\ FIT,\ tx:\ \$\{txid\}\ RETRYING\ "{}},}
\DoxyCodeLine{00707\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}block\_num"{}},\ chain.head\_block\_num()\ +\ 1)}
\DoxyCodeLine{00708\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}prod"{}},\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_afdc86b3838b1e0bc2d6667f9123d633e}{get\_pending\_block\_producer}}())}
\DoxyCodeLine{00709\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}txid"{}},\ trx-\/>id()));}
\DoxyCodeLine{00710\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00711\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_ae93a86d470c7e16b50ab7102170c5d4e}{\_trx\_failed\_trace\_log}},\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Speculative\ execution\ COULD\ NOT\ FIT\ tx:\ \$\{txid\}\ RETRYING"{}},}
\DoxyCodeLine{00712\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}txid"{}},\ trx-\/>id()));}
\DoxyCodeLine{00713\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00714\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab05cac0064c3afeb991b8e91cb76631e}{block\_is\_exhausted}}();}
\DoxyCodeLine{00715\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00716\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!disable\_subjective\_billing)}
\DoxyCodeLine{00717\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad44e89d30a1ce2b3abb85711d5342490}{\_subjective\_billing}}.\mbox{\hyperlink{classsysio_1_1subjective__billing_a50d2b20b8dc816f33f480062a24e074a}{subjective\_bill\_failure}}(\ first\_auth,\ trace-\/>elapsed,\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}()\ );}
\DoxyCodeLine{00718\ }
\DoxyCodeLine{00719\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}}\ )\ \{}
\DoxyCodeLine{00720\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ failure\_code\ =\ trace-\/>except-\/>code();}
\DoxyCodeLine{00721\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ failure\_code\ !=\ tx\_duplicate::code\_value\ )\ \{}
\DoxyCodeLine{00722\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this\ failed\ our\ configured\ maximum\ transaction\ time,\ we\ don't\ want\ to\ replay\ it}}
\DoxyCodeLine{00723\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Failed\ \$\{c\}\ trx,\ prev\ billed:\ \$\{p\}us,\ ran:\ \$\{r\}us,\ id:\ \$\{id\}"{}},}
\DoxyCodeLine{00724\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}c"{}},\ trace-\/>except-\/>code())(\ \textcolor{stringliteral}{"{}p"{}},\ prev\_billed\_cpu\_time\_us\ )}
\DoxyCodeLine{00725\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\ \textcolor{stringliteral}{"{}r"{}},\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}()\ -\/\ start\ )(\ \textcolor{stringliteral}{"{}id"{}},\ trx-\/>id()\ )\ );}
\DoxyCodeLine{00726\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_afc937f75228984d541545dc4b59613a5}{\_account\_fails}}.add(\ first\_auth,\ failure\_code\ );}
\DoxyCodeLine{00727\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00728\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00729\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ return\_failure\_traces\ )\ \{}
\DoxyCodeLine{00730\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ send\_response(\ trace\ );}
\DoxyCodeLine{00731\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00732\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ e\_ptr\ =\ trace-\/>except-\/>dynamic\_copy\_exception();}
\DoxyCodeLine{00733\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ send\_response(\ e\_ptr\ );}
\DoxyCodeLine{00734\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00735\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00736\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00737\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ persist\_until\_expired\ \&\&\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a12f98c27eeff1e09ab398e9f0f158583}{\_disable\_persist\_until\_expired}}\ )\ \{}
\DoxyCodeLine{00738\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ this\ trx\ didnt\ fail/soft-\/fail\ and\ the\ persist\ flag\ is\ set,\ store\ its\ ID\ so\ that\ we\ can}}
\DoxyCodeLine{00739\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ensure\ its\ applied\ to\ all\ future\ speculative\ blocks\ as\ well.}}
\DoxyCodeLine{00740\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ No\ need\ to\ subjective\ bill\ since\ it\ will\ be\ re-\/applied}}
\DoxyCodeLine{00741\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_acd50dff0ab430cf89bd62ea2ab20d88d}{add\_persisted}}(\ trx\ );}
\DoxyCodeLine{00742\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00743\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ db\_read\_mode\ SPECULATIVE\ then\ trx\ is\ in\ the\ pending\ block\ and\ not\ immediately\ reverted}}
\DoxyCodeLine{00744\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!disable\_subjective\_billing)}
\DoxyCodeLine{00745\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad44e89d30a1ce2b3abb85711d5342490}{\_subjective\_billing}}.\mbox{\hyperlink{classsysio_1_1subjective__billing_a443a458832b5c475272149ccb31db567}{subjective\_bill}}(\ trx-\/>id(),\ expire,\ first\_auth,\ trace-\/>elapsed,}
\DoxyCodeLine{00746\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ chain.get\_read\_mode()\ ==\ \mbox{\hyperlink{namespacesysio_1_1chain_af3e35f3e1b78dd00fa247009a2d9ba5ea26ca3b6826ca765f741f39ec4754d581}{chain::db\_read\_mode::SPECULATIVE}}\ );}
\DoxyCodeLine{00747\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00748\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ send\_response(\ trace\ );}
\DoxyCodeLine{00749\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00750\ }
\DoxyCodeLine{00751\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_1_1chain_a646553a6af0a730cdb19b9c6023d5132}{guard\_exception}}\&\ e\ )\ \{}
\DoxyCodeLine{00752\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain__plugin_a6042f76be687a9b82332f28e1dc9a3a4}{chain\_plugin::handle\_guard\_exception}}(e);}
\DoxyCodeLine{00753\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\ boost::interprocess::bad\_alloc\&\ )\ \{}
\DoxyCodeLine{00754\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain__plugin_a047022d2589d7624114c1e458b111ea7}{chain\_plugin::handle\_db\_exhaustion}}();}
\DoxyCodeLine{00755\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\ std::bad\_alloc\&\ )\ \{}
\DoxyCodeLine{00756\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain__plugin_a9fb4d31b915fb0d2ef5392a4284b67e6}{chain\_plugin::handle\_bad\_alloc}}();}
\DoxyCodeLine{00757\ \ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_ab200d016fe1306acaed181b722a3cac6}{CATCH\_AND\_CALL}}(send\_response);}
\DoxyCodeLine{00758\ }
\DoxyCodeLine{00759\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}};}
\DoxyCodeLine{00760\ \ \ \ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a2347f0637a0b2f1b2a16851aa4c3ef12_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a2347f0637a0b2f1b2a16851aa4c3ef12_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_a708986322e03db824e4bad41ca213260}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!process\_incoming\_trxs@{process\_incoming\_trxs}}
\index{process\_incoming\_trxs@{process\_incoming\_trxs}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{process\_incoming\_trxs()}{process\_incoming\_trxs()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a708986322e03db824e4bad41ca213260} 
bool sysio\+::producer\+\_\+plugin\+\_\+impl\+::process\+\_\+incoming\+\_\+trxs (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} \&}]{deadline}{, }\item[{size\+\_\+t \&}]{pending\+\_\+incoming\+\_\+process\+\_\+limit}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l02207}{2207}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02208\ \{}
\DoxyCodeLine{02209\ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02210\ \ \ \ \textcolor{keywordflow}{if}(\ pending\_incoming\_process\_limit\ )\ \{}
\DoxyCodeLine{02211\ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ processed\ =\ 0;}
\DoxyCodeLine{02212\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Processing\ \$\{n\}\ pending\ transactions"{}},\ (\textcolor{stringliteral}{"{}n"{}},\ pending\_incoming\_process\_limit)\ );}
\DoxyCodeLine{02213\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ itr\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a581b5bfdb66db1dba220db3103d78631}{incoming\_begin}}();}
\DoxyCodeLine{02214\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ end\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_ac15fce39af8a270bc242c4c09006daec}{incoming\_end}}();}
\DoxyCodeLine{02215\ \ \ \ \ \ \ \textcolor{keywordflow}{while}(\ pending\_incoming\_process\_limit\ \&\&\ itr\ !=\ end\ )\ \{}
\DoxyCodeLine{02216\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a104ad57b8b9c3c8e53a680e09318ea5d}{should\_interrupt\_start\_block}}(\ deadline\ )\ )\ \{}
\DoxyCodeLine{02217\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02218\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02219\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02220\ \ \ \ \ \ \ \ \ \ -\/-\/pending\_incoming\_process\_limit;}
\DoxyCodeLine{02221\ }
\DoxyCodeLine{02222\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ trx\_meta\ =\ itr-\/>trx\_meta;}
\DoxyCodeLine{02223\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespaceutf8_afc093dfde66a6f52cb4a5caefe0e580d}{next}}\ =\ itr-\/>next;}
\DoxyCodeLine{02224\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ persist\_until\_expired\ =\ itr-\/>trx\_type\ ==\ trx\_enum\_type::incoming\_persisted;}
\DoxyCodeLine{02225\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ return\_failure\_trace\ =\ itr-\/>return\_failure\_trace;}
\DoxyCodeLine{02226\ \ \ \ \ \ \ \ \ \ itr\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a60c602838e90f62ba458d569cf52dfe5}{erase}}(\ itr\ );}
\DoxyCodeLine{02227\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a2347f0637a0b2f1b2a16851aa4c3ef12}{process\_incoming\_transaction\_async}}(\ trx\_meta,\ persist\_until\_expired,\ return\_failure\_trace,\ next\ )\ )\ \{}
\DoxyCodeLine{02228\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02229\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02230\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02231\ \ \ \ \ \ \ \ \ \ ++processed;}
\DoxyCodeLine{02232\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02233\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Processed\ \$\{n\}\ pending\ transactions,\ \$\{p\}\ left"{}},\ (\textcolor{stringliteral}{"{}n"{}},\ processed)(\textcolor{stringliteral}{"{}p"{}},\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a2eda9b632f768fb2c1b76133b8d792f0}{incoming\_size}}())\ );}
\DoxyCodeLine{02234\ \ \ \ \}}
\DoxyCodeLine{02235\ \ \ \ \textcolor{keywordflow}{return}\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}};}
\DoxyCodeLine{02236\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a708986322e03db824e4bad41ca213260_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a708986322e03db824e4bad41ca213260_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_af3690d3cd99a828ada60fcf3decad39b}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!process\_scheduled\_and\_incoming\_trxs@{process\_scheduled\_and\_incoming\_trxs}}
\index{process\_scheduled\_and\_incoming\_trxs@{process\_scheduled\_and\_incoming\_trxs}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{process\_scheduled\_and\_incoming\_trxs()}{process\_scheduled\_and\_incoming\_trxs()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_af3690d3cd99a828ada60fcf3decad39b} 
void sysio\+::producer\+\_\+plugin\+\_\+impl\+::process\+\_\+scheduled\+\_\+and\+\_\+incoming\+\_\+trxs (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} \&}]{deadline}{, }\item[{size\+\_\+t \&}]{pending\+\_\+incoming\+\_\+process\+\_\+limit}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l02104}{2104}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02105\ \{}
\DoxyCodeLine{02106\ \ \ \ \textcolor{comment}{//\ scheduled\ transactions}}
\DoxyCodeLine{02107\ \ \ \ \textcolor{keywordtype}{int}\ num\_applied\ =\ 0;}
\DoxyCodeLine{02108\ \ \ \ \textcolor{keywordtype}{int}\ num\_failed\ =\ 0;}
\DoxyCodeLine{02109\ \ \ \ \textcolor{keywordtype}{int}\ num\_processed\ =\ 0;}
\DoxyCodeLine{02110\ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02111\ \ \ \ \textcolor{keywordtype}{double}\ incoming\_trx\_weight\ =\ 0.0;}
\DoxyCodeLine{02112\ }
\DoxyCodeLine{02113\ \ \ \ \textcolor{keyword}{auto}\&\ blacklist\_by\_id\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a2146e64be3edae1b16c270ee9e0a54e5}{\_blacklisted\_transactions}}.get<by\_id>();}
\DoxyCodeLine{02114\ \ \ \ chain::controller\&\ chain\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a14a5e77b31ecf267c8062267d03440ae}{chain}}();}
\DoxyCodeLine{02115\ \ \ \ \mbox{\hyperlink{namespacesystem__contracts_1_1testing_1_1test__contracts_1_1blockinfo__tester_a28ca3704afa6ea443dd4a095daaedb3a}{time\_point}}\ pending\_block\_time\ =\ chain.pending\_block\_time();}
\DoxyCodeLine{02116\ \ \ \ \textcolor{keyword}{auto}\ itr\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a581b5bfdb66db1dba220db3103d78631}{incoming\_begin}}();}
\DoxyCodeLine{02117\ \ \ \ \textcolor{keyword}{auto}\ end\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_ac15fce39af8a270bc242c4c09006daec}{incoming\_end}}();}
\DoxyCodeLine{02118\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ sch\_idx\ =\ chain.db().get\_index<\mbox{\hyperlink{namespacesysio_1_1chain_a9e9842ee49526c2423e014a696edc602}{generated\_transaction\_multi\_index}},by\_delay>();}
\DoxyCodeLine{02119\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ scheduled\_trxs\_size\ =\ sch\_idx.size();}
\DoxyCodeLine{02120\ \ \ \ \textcolor{keyword}{auto}\ sch\_itr\ =\ sch\_idx.begin();}
\DoxyCodeLine{02121\ \ \ \ \textcolor{keywordflow}{while}(\ sch\_itr\ !=\ sch\_idx.end()\ )\ \{}
\DoxyCodeLine{02122\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ sch\_itr-\/>delay\_until\ >\ pending\_block\_time)\ \textcolor{keywordflow}{break};\ \ \ \ \textcolor{comment}{//\ not\ scheduled\ yet}}
\DoxyCodeLine{02123\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}\ ||\ deadline\ <=\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}()\ )\ \{}
\DoxyCodeLine{02124\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02125\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02126\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02127\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ sch\_itr-\/>published\ >=\ pending\_block\_time\ )\ \{}
\DoxyCodeLine{02128\ \ \ \ \ \ \ \ \ \ ++sch\_itr;}
\DoxyCodeLine{02129\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};\ \textcolor{comment}{//\ do\ not\ allow\ schedule\ and\ execute\ in\ same\ block}}
\DoxyCodeLine{02130\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02131\ }
\DoxyCodeLine{02132\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (blacklist\_by\_id.find(sch\_itr-\/>trx\_id)\ !=\ blacklist\_by\_id.end())\ \{}
\DoxyCodeLine{02133\ \ \ \ \ \ \ \ \ \ ++sch\_itr;}
\DoxyCodeLine{02134\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02135\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02136\ }
\DoxyCodeLine{02137\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_1_1chain_aa85a3b49b3b219d1e3840567579e7e63}{transaction\_id\_type}}\ trx\_id\ =\ sch\_itr-\/>trx\_id;\ \textcolor{comment}{//\ make\ copy\ since\ reference\ could\ be\ invalidated}}
\DoxyCodeLine{02138\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ sch\_expiration\ =\ sch\_itr-\/>expiration;}
\DoxyCodeLine{02139\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ sch\_itr\_next\ =\ sch\_itr;\ \textcolor{comment}{//\ save\ off\ next\ since\ sch\_itr\ may\ be\ invalidated\ by\ loop}}
\DoxyCodeLine{02140\ \ \ \ \ \ \ ++sch\_itr\_next;}
\DoxyCodeLine{02141\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ next\_delay\_until\ =\ sch\_itr\_next\ !=\ sch\_idx.end()\ ?\ sch\_itr\_next-\/>delay\_until\ :\ sch\_itr-\/>delay\_until;}
\DoxyCodeLine{02142\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ next\_id\ =\ sch\_itr\_next\ !=\ sch\_idx.end()\ ?\ sch\_itr\_next-\/>id\ :\ sch\_itr-\/>id;}
\DoxyCodeLine{02143\ }
\DoxyCodeLine{02144\ \ \ \ \ \ \ num\_processed++;}
\DoxyCodeLine{02145\ }
\DoxyCodeLine{02146\ \ \ \ \ \ \ \textcolor{comment}{//\ configurable\ ratio\ of\ incoming\ txns\ vs\ deferred\ txns}}
\DoxyCodeLine{02147\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (incoming\_trx\_weight\ >=\ 1.0\ \&\&\ pending\_incoming\_process\_limit\ \&\&\ itr\ !=\ end\ )\ \{}
\DoxyCodeLine{02148\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (deadline\ <=\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}())\ \{}
\DoxyCodeLine{02149\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02150\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02151\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02152\ }
\DoxyCodeLine{02153\ \ \ \ \ \ \ \ \ \ -\/-\/pending\_incoming\_process\_limit;}
\DoxyCodeLine{02154\ \ \ \ \ \ \ \ \ \ incoming\_trx\_weight\ -\/=\ 1.0;}
\DoxyCodeLine{02155\ }
\DoxyCodeLine{02156\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ trx\_meta\ =\ itr-\/>trx\_meta;}
\DoxyCodeLine{02157\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespaceutf8_afc093dfde66a6f52cb4a5caefe0e580d}{next}}\ =\ itr-\/>next;}
\DoxyCodeLine{02158\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ persist\_until\_expired\ =\ itr-\/>trx\_type\ ==\ trx\_enum\_type::incoming\_persisted;}
\DoxyCodeLine{02159\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ return\_failure\_trace\ =\ itr-\/>return\_failure\_trace;}
\DoxyCodeLine{02160\ \ \ \ \ \ \ \ \ \ itr\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a60c602838e90f62ba458d569cf52dfe5}{erase}}(\ itr\ );}
\DoxyCodeLine{02161\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a2347f0637a0b2f1b2a16851aa4c3ef12}{process\_incoming\_transaction\_async}}(\ trx\_meta,\ persist\_until\_expired,\ return\_failure\_trace,\ next\ )\ )\ \{}
\DoxyCodeLine{02162\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02163\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02164\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02165\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02166\ }
\DoxyCodeLine{02167\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}\ ||\ deadline\ <=\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}())\ \{}
\DoxyCodeLine{02168\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02169\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02170\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02171\ }
\DoxyCodeLine{02172\ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{02173\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1microseconds}{fc::microseconds}}\ max\_trx\_time\ =\ \mbox{\hyperlink{namespacefc_a76ae235ec7e9b8862e70740058d7eb1b}{fc::milliseconds}}(\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_abfe8262ebb5c1493c44e198ad3cd79ca}{\_max\_transaction\_time\_ms}}.load()\ );}
\DoxyCodeLine{02174\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ max\_trx\_time.\mbox{\hyperlink{classfc_1_1microseconds_a20fba59ec7e1f50c6b8f2c9443cc9b92}{count}}()\ <\ 0\ )\ max\_trx\_time\ =\ \mbox{\hyperlink{classfc_1_1microseconds_afc3eb0bfd792c7b1cda062e559e30c2e}{fc::microseconds::maximum}}();}
\DoxyCodeLine{02175\ }
\DoxyCodeLine{02176\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ trace\ =\ chain.push\_scheduled\_transaction(trx\_id,\ deadline,\ max\_trx\_time,\ 0,\ \textcolor{keyword}{false});}
\DoxyCodeLine{02177\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (trace-\/>except)\ \{}
\DoxyCodeLine{02178\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (exception\_is\_exhausted(*trace-\/>except))\ \{}
\DoxyCodeLine{02179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab05cac0064c3afeb991b8e91cb76631e}{block\_is\_exhausted}}()\ )\ \{}
\DoxyCodeLine{02180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02183\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this\ failed\ our\ configured\ maximum\ transaction\ time,\ we\ don't\ want\ to\ replay\ it\ add\ it\ to\ a\ blacklist}}
\DoxyCodeLine{02185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a2146e64be3edae1b16c270ee9e0a54e5}{\_blacklisted\_transactions}}.insert(transaction\_id\_with\_expiry\{trx\_id,\ sch\_expiration\});}
\DoxyCodeLine{02186\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ num\_failed++;}
\DoxyCodeLine{02187\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02188\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02189\ \ \ \ \ \ \ \ \ \ \ \ \ num\_applied++;}
\DoxyCodeLine{02190\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02191\ \ \ \ \ \ \ \}\ \mbox{\hyperlink{producer__plugin_8cpp_a01d09f9c9fe1cbc1b70a0c41f0682e07}{LOG\_AND\_DROP}}();}
\DoxyCodeLine{02192\ }
\DoxyCodeLine{02193\ \ \ \ \ \ \ incoming\_trx\_weight\ +=\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a67c0fb2d1c7d16bd65cd86788d74eb0a}{\_incoming\_defer\_ratio}};}
\DoxyCodeLine{02194\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!pending\_incoming\_process\_limit)\ incoming\_trx\_weight\ =\ 0.0;}
\DoxyCodeLine{02195\ }
\DoxyCodeLine{02196\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ sch\_itr\_next\ ==\ sch\_idx.end()\ )\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02197\ \ \ \ \ \ \ sch\_itr\ =\ sch\_idx.lower\_bound(\ boost::make\_tuple(\ next\_delay\_until,\ next\_id\ )\ );}
\DoxyCodeLine{02198\ \ \ \ \}}
\DoxyCodeLine{02199\ }
\DoxyCodeLine{02200\ \ \ \ \textcolor{keywordflow}{if}(\ scheduled\_trxs\_size\ >\ 0\ )\ \{}
\DoxyCodeLine{02201\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},}
\DoxyCodeLine{02202\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Processed\ \$\{m\}\ of\ \$\{n\}\ scheduled\ transactions,\ Applied\ \$\{applied\},\ Failed/Dropped\ \$\{failed\}"{}},}
\DoxyCodeLine{02203\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\ \textcolor{stringliteral}{"{}m"{}},\ num\_processed\ )(\ \textcolor{stringliteral}{"{}n"{}},\ scheduled\_trxs\_size\ )(\ \textcolor{stringliteral}{"{}applied"{}},\ num\_applied\ )(\ \textcolor{stringliteral}{"{}failed"{}},\ num\_failed\ )\ );}
\DoxyCodeLine{02204\ \ \ \ \}}
\DoxyCodeLine{02205\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_af3690d3cd99a828ada60fcf3decad39b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_af3690d3cd99a828ada60fcf3decad39b_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_a7de28b674848c3de56118793193d3b49}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!process\_unapplied\_trxs@{process\_unapplied\_trxs}}
\index{process\_unapplied\_trxs@{process\_unapplied\_trxs}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{process\_unapplied\_trxs()}{process\_unapplied\_trxs()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a7de28b674848c3de56118793193d3b49} 
bool sysio\+::producer\+\_\+plugin\+\_\+impl\+::process\+\_\+unapplied\+\_\+trxs (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} \&}]{deadline}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l02001}{2001}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02002\ \{}
\DoxyCodeLine{02003\ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02004\ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a5a244791044e2d59736ff24339aed822}{empty}}()\ )\ \{}
\DoxyCodeLine{02005\ \ \ \ \ \ \ chain::controller\&\ chain\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a14a5e77b31ecf267c8062267d03440ae}{chain}}();}
\DoxyCodeLine{02006\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ rl\ =\ chain.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_af096f331aa6ac6b3fe3aa71b3768daa8}{get\_resource\_limits\_manager}}();}
\DoxyCodeLine{02007\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_applied\ =\ 0,\ num\_failed\ =\ 0,\ num\_processed\ =\ 0;}
\DoxyCodeLine{02008\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ unapplied\_trxs\_size\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a7fb8cf5dfb622f9e619be9a4bb5eeba8}{size}}();}
\DoxyCodeLine{02009\ \ \ \ \ \ \ \textcolor{comment}{//\ unapplied\ and\ persisted\ do\ not\ have\ a\ next\ method\ to\ call}}
\DoxyCodeLine{02010\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ itr\ \ \ \ \ =\ (\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}})\ ?}
\DoxyCodeLine{02011\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a5906b1ee94fa2e09ae0eaa8d5cbd3711}{unapplied\_begin}}()\ :\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_ac9f23f3629b373f5dd2f62a960472562}{persisted\_begin}}();}
\DoxyCodeLine{02012\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ end\_itr\ =\ (\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}})\ ?}
\DoxyCodeLine{02013\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a428508ff4641d3bf3503fa304696133d}{unapplied\_end}}()\ \ \ :\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a49e515ce9a15ee839fbd8990c8bcb388}{persisted\_end}}();}
\DoxyCodeLine{02014\ \ \ \ \ \ \ \textcolor{keywordflow}{while}(\ itr\ !=\ end\_itr\ )\ \{}
\DoxyCodeLine{02015\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a104ad57b8b9c3c8e53a680e09318ea5d}{should\_interrupt\_start\_block}}(\ deadline\ )\ )\ \{}
\DoxyCodeLine{02016\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02017\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02018\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02019\ }
\DoxyCodeLine{02020\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_1_1chain_ad795329e0af850251f4f47cc32e8d770}{transaction\_metadata\_ptr}}\ trx\ =\ itr-\/>trx\_meta;}
\DoxyCodeLine{02021\ \ \ \ \ \ \ \ \ \ ++num\_processed;}
\DoxyCodeLine{02022\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{02023\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespace_w_a_s_m_a9690a14428419003297ae35f505b5103aea2b2676c28c0db26d39331a336c6b92}{start}}\ =\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}();}
\DoxyCodeLine{02024\ }
\DoxyCodeLine{02025\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ first\_auth\ =\ trx-\/>packed\_trx()-\/>get\_transaction().first\_authorizer();}
\DoxyCodeLine{02026\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_afc937f75228984d541545dc4b59613a5}{\_account\_fails}}.failure\_limit(\ first\_auth\ )\ )\ \{}
\DoxyCodeLine{02027\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++num\_failed;}
\DoxyCodeLine{02028\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ itr-\/>next\ )\ \{}
\DoxyCodeLine{02029\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ itr-\/>next(\ std::make\_shared<tx\_cpu\_usage\_exceeded>(}
\DoxyCodeLine{02030\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{log__message_8hpp_a4a4df4bb5cffbe07aadf7d29fd44c75e}{FC\_LOG\_MESSAGE}}(\ error,\ \textcolor{stringliteral}{"{}transaction\ \$\{id\}\ exceeded\ failure\ limit\ for\ account\ \$\{a\}"{}},}
\DoxyCodeLine{02031\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}id"{}},\ trx-\/>id())(\textcolor{stringliteral}{"{}a"{}},\ first\_auth)\ )\ )\ );}
\DoxyCodeLine{02032\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02033\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ itr\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a60c602838e90f62ba458d569cf52dfe5}{erase}}(\ itr\ );}
\DoxyCodeLine{02034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02035\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02036\ }
\DoxyCodeLine{02037\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1microseconds}{fc::microseconds}}\ max\_trx\_time\ =\ \mbox{\hyperlink{namespacefc_a76ae235ec7e9b8862e70740058d7eb1b}{fc::milliseconds}}(\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_abfe8262ebb5c1493c44e198ad3cd79ca}{\_max\_transaction\_time\_ms}}.load()\ );}
\DoxyCodeLine{02038\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ max\_trx\_time.\mbox{\hyperlink{classfc_1_1microseconds_a20fba59ec7e1f50c6b8f2c9443cc9b92}{count}}()\ <\ 0\ )\ max\_trx\_time\ =\ \mbox{\hyperlink{classfc_1_1microseconds_afc3eb0bfd792c7b1cda062e559e30c2e}{fc::microseconds::maximum}}();}
\DoxyCodeLine{02039\ }
\DoxyCodeLine{02040\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ prev\_billed\_cpu\_time\_us\ =\ trx-\/>billed\_cpu\_time\_us;}
\DoxyCodeLine{02041\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ prev\_billed\_cpu\_time\_us\ >\ 0\ \&\&\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad44e89d30a1ce2b3abb85711d5342490}{\_subjective\_billing}}.\mbox{\hyperlink{classsysio_1_1subjective__billing_a7da6a0636378886a46193d41089149bc}{is\_account\_disabled}}(\ first\_auth\ )\ \&\&\ !rl.is\_unlimited\_cpu(\ first\_auth\ ))\ \{}
\DoxyCodeLine{02042\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}}\ prev\_billed\_plus100\_us\ =\ prev\_billed\_cpu\_time\_us\ +\ \mbox{\hyperlink{chain_2include_2sysio_2chain_2config_8hpp_a0b4bacb63f31764f50a185f320551fbc}{SYS\_PERCENT}}(\ prev\_billed\_cpu\_time\_us,\ 100\ *\ config::percent\_1\ );}
\DoxyCodeLine{02043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ prev\_billed\_plus100\_us\ <\ max\_trx\_time.\mbox{\hyperlink{classfc_1_1microseconds_a20fba59ec7e1f50c6b8f2c9443cc9b92}{count}}()\ )\ max\_trx\_time\ =\ \mbox{\hyperlink{classfc_1_1microseconds}{fc::microseconds}}(\ prev\_billed\_plus100\_us\ );}
\DoxyCodeLine{02044\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02045\ }
\DoxyCodeLine{02046\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ no\ subjective\ billing\ since\ we\ are\ producing\ or\ processing\ persisted\ trxs}}
\DoxyCodeLine{02047\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{stdint_8h_a414156feea104f8f75b4ed9e3121b2f6}{int64\_t}}\ sub\_bill\ =\ 0;}
\DoxyCodeLine{02048\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ disable\_subjective\_billing\ =\ (\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}}\ )}
\DoxyCodeLine{02049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ (\ (itr-\/>trx\_type\ ==\ trx\_enum\_type::persisted)\ \&\&\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae781cd364031e6a3b5f890921f592eb6}{\_disable\_subjective\_api\_billing}}\ )}
\DoxyCodeLine{02050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ (\ !(itr-\/>trx\_type\ ==\ trx\_enum\_type::persisted)\ \&\&\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a2cc24baff7f0994410c60383929d25e8}{\_disable\_subjective\_p2p\_billing}}\ )}
\DoxyCodeLine{02051\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ trx-\/>read\_only;}
\DoxyCodeLine{02052\ }
\DoxyCodeLine{02053\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ trace\ =\ chain.push\_transaction(\ trx,\ deadline,\ max\_trx\_time,\ prev\_billed\_cpu\_time\_us,\ \textcolor{keyword}{false},\ sub\_bill\ );}
\DoxyCodeLine{02054\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{producer__plugin_8cpp_ae93a86d470c7e16b50ab7102170c5d4e}{\_trx\_failed\_trace\_log}},\ \textcolor{stringliteral}{"{}Subjective\ unapplied\ bill\ for\ \$\{a\}:\ \$\{b\}\ prev\ \$\{t\}us"{}},\ (\textcolor{stringliteral}{"{}a"{}},first\_auth)(\textcolor{stringliteral}{"{}b"{}},prev\_billed\_cpu\_time\_us)(\textcolor{stringliteral}{"{}t"{}},trace-\/>elapsed));}
\DoxyCodeLine{02055\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ trace-\/>except\ )\ \{}
\DoxyCodeLine{02056\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ exception\_is\_exhausted(\ *trace-\/>except\ )\ )\ \{}
\DoxyCodeLine{02057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab05cac0064c3afeb991b8e91cb76631e}{block\_is\_exhausted}}()\ )\ \{}
\DoxyCodeLine{02058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ don't\ erase,\ subjective\ failure\ so\ try\ again\ next\ time}}
\DoxyCodeLine{02060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{producer__plugin_8cpp_ae93a86d470c7e16b50ab7102170c5d4e}{\_trx\_failed\_trace\_log}},\ \textcolor{stringliteral}{"{}Subjective\ unapplied\ bill\ for\ failed\ \$\{a\}:\ \$\{b\}\ prev\ \$\{t\}us"{}},\ (\textcolor{stringliteral}{"{}a"{}},first\_auth)(\textcolor{stringliteral}{"{}b"{}},prev\_billed\_cpu\_time\_us)(\textcolor{stringliteral}{"{}t"{}},trace-\/>elapsed));}
\DoxyCodeLine{02064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ failure\_code\ =\ trace-\/>except-\/>code();}
\DoxyCodeLine{02065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ failure\_code\ !=\ tx\_duplicate::code\_value\ )\ \{}
\DoxyCodeLine{02066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this\ failed\ our\ configured\ maximum\ transaction\ time,\ we\ don't\ want\ to\ replay\ it}}
\DoxyCodeLine{02067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Failed\ \$\{c\}\ trx,\ prev\ billed:\ \$\{p\}us,\ ran:\ \$\{r\}us,\ id:\ \$\{id\}"{}},}
\DoxyCodeLine{02068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}c"{}},\ trace-\/>except-\/>code())(\textcolor{stringliteral}{"{}p"{}},\ prev\_billed\_cpu\_time\_us)}
\DoxyCodeLine{02069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}r"{}},\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}()\ -\/\ start)(\textcolor{stringliteral}{"{}id"{}},\ trx-\/>id())\ );}
\DoxyCodeLine{02070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_afc937f75228984d541545dc4b59613a5}{\_account\_fails}}.add(\ first\_auth,\ failure\_code\ );}
\DoxyCodeLine{02071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!disable\_subjective\_billing)}
\DoxyCodeLine{02072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad44e89d30a1ce2b3abb85711d5342490}{\_subjective\_billing}}.\mbox{\hyperlink{classsysio_1_1subjective__billing_a50d2b20b8dc816f33f480062a24e074a}{subjective\_bill\_failure}}(\ first\_auth,\ trace-\/>elapsed,\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}()\ );}
\DoxyCodeLine{02073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++num\_failed;}
\DoxyCodeLine{02075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ itr-\/>next\ )\ \{}
\DoxyCodeLine{02076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ itr-\/>next(\ trace-\/>except-\/>dynamic\_copy\_exception()\ );}
\DoxyCodeLine{02077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ itr\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a60c602838e90f62ba458d569cf52dfe5}{erase}}(\ itr\ );}
\DoxyCodeLine{02079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02081\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{producer__plugin_8cpp_aea18f7b7425ddc0191447aca7c3e27f6}{\_trx\_successful\_trace\_log}},\ \textcolor{stringliteral}{"{}Subjective\ unapplied\ bill\ for\ success\ \$\{a\}:\ \$\{b\}\ prev\ \$\{t\}us"{}},\ (\textcolor{stringliteral}{"{}a"{}},first\_auth)(\textcolor{stringliteral}{"{}b"{}},prev\_billed\_cpu\_time\_us)(\textcolor{stringliteral}{"{}t"{}},trace-\/>elapsed));}
\DoxyCodeLine{02083\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ db\_read\_mode\ SPECULATIVE\ then\ trx\ is\ in\ the\ pending\ block\ and\ not\ immediately\ reverted}}
\DoxyCodeLine{02084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!disable\_subjective\_billing)}
\DoxyCodeLine{02085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad44e89d30a1ce2b3abb85711d5342490}{\_subjective\_billing}}.\mbox{\hyperlink{classsysio_1_1subjective__billing_a443a458832b5c475272149ccb31db567}{subjective\_bill}}(\ trx-\/>id(),\ trx-\/>packed\_trx()-\/>expiration(),\ first\_auth,\ trace-\/>elapsed,}
\DoxyCodeLine{02086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ chain.get\_read\_mode()\ ==\ \mbox{\hyperlink{namespacesysio_1_1chain_af3e35f3e1b78dd00fa247009a2d9ba5ea26ca3b6826ca765f741f39ec4754d581}{chain::db\_read\_mode::SPECULATIVE}}\ );}
\DoxyCodeLine{02087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++num\_applied;}
\DoxyCodeLine{02088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ itr-\/>trx\_type\ !=\ trx\_enum\_type::persisted\ )\ \{}
\DoxyCodeLine{02089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ itr-\/>next\ )\ itr-\/>next(\ trace\ );}
\DoxyCodeLine{02090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ itr\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a60c602838e90f62ba458d569cf52dfe5}{erase}}(\ itr\ );}
\DoxyCodeLine{02091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02093\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02094\ \ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{producer__plugin_8cpp_a01d09f9c9fe1cbc1b70a0c41f0682e07}{LOG\_AND\_DROP}}();}
\DoxyCodeLine{02095\ \ \ \ \ \ \ \ \ \ ++itr;}
\DoxyCodeLine{02096\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02097\ }
\DoxyCodeLine{02098\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Processed\ \$\{m\}\ of\ \$\{n\}\ previously\ applied\ transactions,\ Applied\ \$\{applied\},\ Failed/Dropped\ \$\{failed\}"{}},}
\DoxyCodeLine{02099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}m"{}},\ num\_processed)(\ \textcolor{stringliteral}{"{}n"{}},\ unapplied\_trxs\_size\ )(\textcolor{stringliteral}{"{}applied"{}},\ num\_applied)(\textcolor{stringliteral}{"{}failed"{}},\ num\_failed)\ );}
\DoxyCodeLine{02100\ \ \ \ \}}
\DoxyCodeLine{02101\ \ \ \ \textcolor{keywordflow}{return}\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}};}
\DoxyCodeLine{02102\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a7de28b674848c3de56118793193d3b49_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a7de28b674848c3de56118793193d3b49_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_a336a35581aedb4308f8fc7f4eb44f152}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!produce\_block@{produce\_block}}
\index{produce\_block@{produce\_block}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{produce\_block()}{produce\_block()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a336a35581aedb4308f8fc7f4eb44f152} 
void sysio\+::producer\+\_\+plugin\+\_\+impl\+::produce\+\_\+block (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

S-\/\+ROOT HEADER EXTENSION

Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l02402}{2402}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02402\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02403\ \ \ \ \textcolor{comment}{//ilog("{}produce\_block\ \$\{t\}"{},\ ("{}t"{},\ fc::time\_point::now()));\ //\ for\ testing\ \_produce\_time\_offset\_us}}
\DoxyCodeLine{02404\ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}},\ producer\_exception,\ \textcolor{stringliteral}{"{}called\ produce\_block\ while\ not\ actually\ producing"{}});}
\DoxyCodeLine{02405\ \ \ \ chain::controller\&\ chain\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a14a5e77b31ecf267c8062267d03440ae}{chain}}();}
\DoxyCodeLine{02406\ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(chain.is\_building\_block(),\ missing\_pending\_block\_state,\ \textcolor{stringliteral}{"{}pending\_block\_state\ does\ not\ exist\ but\ it\ should,\ another\ plugin\ may\ have\ corrupted\ it"{}});}
\DoxyCodeLine{02407\ }
\DoxyCodeLine{02408\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ auth\ =\ chain.pending\_block\_signing\_authority();}
\DoxyCodeLine{02409\ \ \ \ std::vector<std::reference\_wrapper<const\ signature\_provider\_type>>\ relevant\_providers;}
\DoxyCodeLine{02410\ }
\DoxyCodeLine{02411\ \ \ \ relevant\_providers.reserve(\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad9173229bf0922a5bd51150e1a95c58f}{\_signature\_providers}}.size());}
\DoxyCodeLine{02412\ }
\DoxyCodeLine{02413\ \ \ \ \mbox{\hyperlink{structsysio_1_1chain_1_1producer__authority_ae72370fc6180ebd6b5a04d61cd436f6a}{producer\_authority::for\_each\_key}}(auth,\ [\&](\textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_1_1chain_a0628a11f388cd2e43b1ccc1260a1042f}{public\_key\_type}}\&\ key)\{}
\DoxyCodeLine{02414\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ iter\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad9173229bf0922a5bd51150e1a95c58f}{\_signature\_providers}}.find(key);}
\DoxyCodeLine{02415\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (iter\ !=\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad9173229bf0922a5bd51150e1a95c58f}{\_signature\_providers}}.end())\ \{}
\DoxyCodeLine{02416\ \ \ \ \ \ \ \ \ \ relevant\_providers.emplace\_back(iter-\/>second);}
\DoxyCodeLine{02417\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02418\ \ \ \ \});}
\DoxyCodeLine{02419\ }
\DoxyCodeLine{02420\ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(relevant\_providers.size()\ >\ 0,\ producer\_priv\_key\_not\_found,\ \textcolor{stringliteral}{"{}Attempting\ to\ produce\ a\ block\ for\ which\ we\ don't\ have\ any\ relevant\ private\ keys"{}});}
\DoxyCodeLine{02421\ }
\DoxyCodeLine{02422\ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a369d1c5202c442237cb333c850f1634e}{\_protocol\_features\_signaled}})\ \{}
\DoxyCodeLine{02423\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab8c4a74665eea98fed5866ee31b25d5a}{\_protocol\_features\_to\_activate}}.clear();\ \textcolor{comment}{//\ clear\ \_protocol\_features\_to\_activate\ as\ it\ is\ already\ set\ in\ pending\_block}}
\DoxyCodeLine{02424\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a369d1c5202c442237cb333c850f1634e}{\_protocol\_features\_signaled}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02425\ \ \ \ \}}
\DoxyCodeLine{02426\ }
\DoxyCodeLine{02430\ \ \ \ \textcolor{keyword}{auto}\&\ sub\_chain\_plug\ =\ \mbox{\hyperlink{namespaceappbase_a99374dc23934f008a09f2f79be9eae40}{app}}().\mbox{\hyperlink{classappbase_1_1application_a3c4b68a0667942b58f1369f454ce0ce3}{get\_plugin}}<sub\_chain\_plugin>();}
\DoxyCodeLine{02431\ \ \ \ \textcolor{comment}{//\ TODO:\ verify\ sub\ chain\ is\ enabled,\ otherwise\ skip?\ or\ require?}}
\DoxyCodeLine{02432\ \ \ \ \textcolor{comment}{//\ Step\ 1:\ Scans\ transactions\ to\ find\ relevant\ transactions\ by\ comparing\ to\ a\ list\ of\ known\ contracts.}}
\DoxyCodeLine{02433\ \ \ \ \textcolor{keyword}{auto}\ relevant\_s\_transactions\ =\ sub\_chain\_plug.find\_relevant\_transactions(chain);}
\DoxyCodeLine{02434\ \ \ \ \textcolor{comment}{//\ Only\ calculate\ if\ there\ are\ relevant\ s-\/transactions\ \ \ }}
\DoxyCodeLine{02435\ \ \ \ \textcolor{keywordflow}{if}\ (!relevant\_s\_transactions.empty())\ \{}
\DoxyCodeLine{02436\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a831cf08dc63704c11fd154132c6e8bdb}{ilog}}(\textcolor{stringliteral}{"{}Relevant\ S-\/Transactions\ found:\ \$\{count\}"{}},\ (\textcolor{stringliteral}{"{}count"{}},\ relevant\_s\_transactions.size()));}
\DoxyCodeLine{02437\ \ \ \ \ \ \ \textcolor{comment}{//\ Step\ 2:\ Builds\ array\ of\ leaves\ in\ the\ same\ order\ as\ they\ appear\ in\ the\ transaction\ list.}}
\DoxyCodeLine{02438\ \ \ \ \ \ \ \textcolor{comment}{//\ Step\ 3:\ Computes\ a\ Merkle\ root\ hash:\ the\ S-\/Root.}}
\DoxyCodeLine{02439\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_1_1chain_a9c3cb5131331ed8d52a589437ccfb03e}{checksum256\_type}}\ s\_root\ =\ sub\_chain\_plug.calculate\_s\_root(relevant\_s\_transactions);}
\DoxyCodeLine{02440\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a831cf08dc63704c11fd154132c6e8bdb}{ilog}}(\textcolor{stringliteral}{"{}s\_root\ calculated:\ \$\{root\}"{}},\ (\textcolor{stringliteral}{"{}root"{}},\ s\_root.str()));}
\DoxyCodeLine{02441\ \ \ \ \ \ \ \textcolor{comment}{//\ Step\ 4:\ S-\/Root\ is\ hashed\ with\ the\ previous\ S-\/ID\ using\ SHA-\/256}}
\DoxyCodeLine{02442\ \ \ \ \ \ \ \textcolor{comment}{//\ Step\ 5:\ Takes\ the\ 32\ least-\/significant\ bits\ from\ the\ previous\ S-\/ID\ to\ get\ the\ previous\ S-\/Block\ number,\ and\ increment\ to\ get\ the\ new\ S-\/Block\ number}}
\DoxyCodeLine{02443\ \ \ \ \ \ \ \textcolor{comment}{//\ Step\ 6:\ Hashes\ the\ S-\/Root\ with\ the\ previous\ S-\/ID\ with\ SHA-\/256,\ then\ replace\ the\ 32\ least\ significant\ bits\ with\ the\ new\ S-\/Block\ number\ to\ produce\ the\ new\ S-\/ID}}
\DoxyCodeLine{02444\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_1_1chain_a9c3cb5131331ed8d52a589437ccfb03e}{checksum256\_type}}\ curr\_s\_id\ =\ sub\_chain\_plug.compute\_curr\_s\_id(s\_root);}
\DoxyCodeLine{02445\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a831cf08dc63704c11fd154132c6e8bdb}{ilog}}(\textcolor{stringliteral}{"{}curr\_s\_id\ calculated:\ \$\{curr\_s\_id\}"{}},\ (\textcolor{stringliteral}{"{}curr\_s\_id"{}},\ curr\_s\_id.str()));}
\DoxyCodeLine{02446\ \ \ \ \ \ \ \textcolor{comment}{//\ Prepare\ the\ s\_header\ for\ the\ current\ block\ to\ be\ added\ to\ the\ header\ extension}}
\DoxyCodeLine{02447\ \ \ \ \ \ \ s\_header\ s\_header\ \{}
\DoxyCodeLine{02448\ \ \ \ \ \ \ \ \ \ sub\_chain\_plug.get\_contract\_name(),}
\DoxyCodeLine{02449\ \ \ \ \ \ \ \ \ \ sub\_chain\_plug.get\_prev\_s\_id(),}
\DoxyCodeLine{02450\ \ \ \ \ \ \ \ \ \ curr\_s\_id,}
\DoxyCodeLine{02451\ \ \ \ \ \ \ \ \ \ s\_root}
\DoxyCodeLine{02452\ \ \ \ \ \ \ \};}
\DoxyCodeLine{02453\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a831cf08dc63704c11fd154132c6e8bdb}{ilog}}(\textcolor{stringliteral}{"{}S-\/Header\ prepared:\ \$\{s\_header\}"{}},\ (\textcolor{stringliteral}{"{}s\_header"{}},\ s\_header.to\_string()));}
\DoxyCodeLine{02454\ \ }
\DoxyCodeLine{02455\ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ the\ s\_root\ in\ the\ chain\ controller\ for\ the\ building\ block\ state}}
\DoxyCodeLine{02456\ \ \ \ \ \ \ \textcolor{comment}{//\ to\ be\ referenced\ and\ passed\ to\ make\_block\_header\ on\ finalize\_block\ below}}
\DoxyCodeLine{02457\ \ \ \ \ \ \ chain.set\_s\_header(\ s\_header\ );}
\DoxyCodeLine{02458\ }
\DoxyCodeLine{02459\ \ \ \ \ \ \ \textcolor{comment}{//\ Update\ the\ plugin's\ stored\ prev\_s\_id\ with\ the\ newly\ calculated\ S-\/ID}}
\DoxyCodeLine{02460\ \ \ \ \ \ \ sub\_chain\_plug.update\_prev\_s\_id(curr\_s\_id);}
\DoxyCodeLine{02461\ \ \ \ \}}
\DoxyCodeLine{02462\ }
\DoxyCodeLine{02463\ \ \ \ \textcolor{comment}{//idump(\ (fc::time\_point::now()\ -\/\ chain.pending\_block\_time())\ );}}
\DoxyCodeLine{02464\ \ \ \ chain.finalize\_block(\ [\&](\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_1_1chain_a357fd9478475457e5bb386a3143079b6}{digest\_type}}\&\ d\ )\ \{}
\DoxyCodeLine{02465\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ debug\_logger\ =\ maybe\_make\_debug\_time\_logger();}
\DoxyCodeLine{02466\ \ \ \ \ \ \ vector<signature\_type>\ sigs;}
\DoxyCodeLine{02467\ \ \ \ \ \ \ sigs.reserve(relevant\_providers.size());}
\DoxyCodeLine{02468\ }
\DoxyCodeLine{02469\ \ \ \ \ \ \ \textcolor{comment}{//\ sign\ with\ all\ relevant\ public\ keys}}
\DoxyCodeLine{02470\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{bn_8cpp_a8b0eadcc506862e9d751ab45185053aa}{p}}\ :\ relevant\_providers)\ \{}
\DoxyCodeLine{02471\ \ \ \ \ \ \ \ \ \ sigs.emplace\_back(\mbox{\hyperlink{bn_8cpp_a8b0eadcc506862e9d751ab45185053aa}{p}}.get()(d));}
\DoxyCodeLine{02472\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02473\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ sigs;}
\DoxyCodeLine{02474\ \ \ \ \}\ );}
\DoxyCodeLine{02475\ }
\DoxyCodeLine{02476\ \ \ \ chain.commit\_block();}
\DoxyCodeLine{02477\ }
\DoxyCodeLine{02478\ \ \ \ \mbox{\hyperlink{namespacesysio_1_1chain_ab9b14f4554cc4a0da2c361e9757b1662}{block\_state\_ptr}}\ new\_bs\ =\ chain.head\_block\_state();}
\DoxyCodeLine{02479\ }
\DoxyCodeLine{02480\ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_afc937f75228984d541545dc4b59613a5}{\_account\_fails}}.report();}
\DoxyCodeLine{02481\ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_afc937f75228984d541545dc4b59613a5}{\_account\_fails}}.clear();}
\DoxyCodeLine{02482\ }
\DoxyCodeLine{02483\ \ \ \ \mbox{\hyperlink{logger_8hpp_a831cf08dc63704c11fd154132c6e8bdb}{ilog}}(\textcolor{stringliteral}{"{}Produced\ block\ \$\{id\}...\ \#\$\{n\}\ @\ \$\{t\}\ signed\ by\ \$\{p\}\ [trxs:\ \$\{count\},\ lib:\ \$\{lib\},\ confirmed:\ \$\{confs\}]"{}},}
\DoxyCodeLine{02484\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}p"{}},new\_bs-\/>header.producer)(\textcolor{stringliteral}{"{}id"{}},new\_bs-\/>id.str().substr(8,16))}
\DoxyCodeLine{02485\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}n"{}},new\_bs-\/>block\_num)(\textcolor{stringliteral}{"{}t"{}},new\_bs-\/>header.timestamp)}
\DoxyCodeLine{02486\ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}count"{}},new\_bs-\/>block-\/>transactions.size())(\textcolor{stringliteral}{"{}lib"{}},chain.last\_irreversible\_block\_num())(\textcolor{stringliteral}{"{}confs"{}},\ new\_bs-\/>header.confirmed));}
\DoxyCodeLine{02487\ }
\DoxyCodeLine{02488\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a336a35581aedb4308f8fc7f4eb44f152_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a336a35581aedb4308f8fc7f4eb44f152_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_a7964ed6135deaf78fe51442d0fde20f5}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!production\_disabled\_by\_policy@{production\_disabled\_by\_policy}}
\index{production\_disabled\_by\_policy@{production\_disabled\_by\_policy}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{production\_disabled\_by\_policy()}{production\_disabled\_by\_policy()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a7964ed6135deaf78fe51442d0fde20f5} 
bool sysio\+::producer\+\_\+plugin\+\_\+impl\+::production\+\_\+disabled\+\_\+by\+\_\+policy (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00781}{781}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00781\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00782\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a26f51591effdca88f46913aa23308695}{\_production\_enabled}}\ ||\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a9992f102be5757c43dcdaedf97fb7c37}{\_pause\_production}}\ ||\ (\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_adc02b8bbfdf1e85f4bf2132db2c7510f}{\_max\_irreversible\_block\_age\_us}}.\mbox{\hyperlink{classfc_1_1microseconds_a20fba59ec7e1f50c6b8f2c9443cc9b92}{count}}()\ >=\ 0\ \&\&\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a03ffa5daf4ee4f47e84f8bae98bc1a00}{get\_irreversible\_block\_age}}()\ >=\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_adc02b8bbfdf1e85f4bf2132db2c7510f}{\_max\_irreversible\_block\_age\_us}});}
\DoxyCodeLine{00783\ \ \ \ \ \ \ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a7964ed6135deaf78fe51442d0fde20f5_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_a5b19b3db1d6db7aa9a66a6a253417d7e}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!remove\_expired\_blacklisted\_trxs@{remove\_expired\_blacklisted\_trxs}}
\index{remove\_expired\_blacklisted\_trxs@{remove\_expired\_blacklisted\_trxs}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{remove\_expired\_blacklisted\_trxs()}{remove\_expired\_blacklisted\_trxs()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a5b19b3db1d6db7aa9a66a6a253417d7e} 
bool sysio\+::producer\+\_\+plugin\+\_\+impl\+::remove\+\_\+expired\+\_\+blacklisted\+\_\+trxs (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} \&}]{deadline}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l01975}{1975}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01976\ \{}
\DoxyCodeLine{01977\ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01978\ \ \ \ \textcolor{keyword}{auto}\&\ blacklist\_by\_expiry\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a2146e64be3edae1b16c270ee9e0a54e5}{\_blacklisted\_transactions}}.get<by\_expiry>();}
\DoxyCodeLine{01979\ \ \ \ \textcolor{keywordflow}{if}(!blacklist\_by\_expiry.empty())\ \{}
\DoxyCodeLine{01980\ \ \ \ \ \ \ \textcolor{keyword}{const}\ chain::controller\&\ chain\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a14a5e77b31ecf267c8062267d03440ae}{chain}}();}
\DoxyCodeLine{01981\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ lib\_time\ =\ chain.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a878ff6368c473051417382a9d485030d}{last\_irreversible\_block\_time}}();}
\DoxyCodeLine{01982\ }
\DoxyCodeLine{01983\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_expired\ =\ 0;}
\DoxyCodeLine{01984\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ orig\_count\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a2146e64be3edae1b16c270ee9e0a54e5}{\_blacklisted\_transactions}}.size();}
\DoxyCodeLine{01985\ }
\DoxyCodeLine{01986\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!blacklist\_by\_expiry.empty()\ \&\&\ blacklist\_by\_expiry.begin()-\/>expiry\ <=\ lib\_time)\ \{}
\DoxyCodeLine{01987\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a104ad57b8b9c3c8e53a680e09318ea5d}{should\_interrupt\_start\_block}}(\ deadline\ )\ )\ \{}
\DoxyCodeLine{01988\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01989\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01990\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01991\ \ \ \ \ \ \ \ \ \ blacklist\_by\_expiry.erase(blacklist\_by\_expiry.begin());}
\DoxyCodeLine{01992\ \ \ \ \ \ \ \ \ \ num\_expired++;}
\DoxyCodeLine{01993\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01994\ }
\DoxyCodeLine{01995\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Processed\ \$\{n\}\ blacklisted\ transactions,\ Expired\ \$\{expired\}"{}},}
\DoxyCodeLine{01996\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}n"{}},\ orig\_count)(\textcolor{stringliteral}{"{}expired"{}},\ num\_expired));}
\DoxyCodeLine{01997\ \ \ \ \}}
\DoxyCodeLine{01998\ \ \ \ \textcolor{keywordflow}{return}\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}};}
\DoxyCodeLine{01999\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a5b19b3db1d6db7aa9a66a6a253417d7e_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a5b19b3db1d6db7aa9a66a6a253417d7e_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_a07a7c896dddfa2b6c36cf67248d3599d}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!remove\_expired\_trxs@{remove\_expired\_trxs}}
\index{remove\_expired\_trxs@{remove\_expired\_trxs}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{remove\_expired\_trxs()}{remove\_expired\_trxs()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a07a7c896dddfa2b6c36cf67248d3599d} 
bool sysio\+::producer\+\_\+plugin\+\_\+impl\+::remove\+\_\+expired\+\_\+trxs (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} \&}]{deadline}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l01910}{1910}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01911\ \{}
\DoxyCodeLine{01912\ \ \ \ chain::controller\&\ chain\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a14a5e77b31ecf267c8062267d03440ae}{chain}}();}
\DoxyCodeLine{01913\ \ \ \ \textcolor{keyword}{auto}\ pending\_block\_time\ =\ chain.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_abb1d81f96986df3bce46bd37caaf6a69}{pending\_block\_time}}();}
\DoxyCodeLine{01914\ }
\DoxyCodeLine{01915\ \ \ \ \textcolor{comment}{//\ remove\ all\ expired\ transactions}}
\DoxyCodeLine{01916\ \ \ \ \textcolor{keywordtype}{size\_t}\ num\_expired\_persistent\ =\ 0;}
\DoxyCodeLine{01917\ \ \ \ \textcolor{keywordtype}{size\_t}\ num\_expired\_other\ =\ 0;}
\DoxyCodeLine{01918\ \ \ \ \textcolor{keywordtype}{size\_t}\ orig\_count\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a7fb8cf5dfb622f9e619be9a4bb5eeba8}{size}}();}
\DoxyCodeLine{01919\ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}\ =\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a0ee4b3f8ad23d7b553e5a0f3224b32d4}{clear\_expired}}(\ pending\_block\_time,\ [\&]()\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a104ad57b8b9c3c8e53a680e09318ea5d}{should\_interrupt\_start\_block}}(\ deadline\ );\ \},}
\DoxyCodeLine{01920\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}},\ \&num\_expired\_persistent,\ \&num\_expired\_other,\ pbm\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}},}
\DoxyCodeLine{01921\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&chain,\ has\_producers\ =\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_af2f69a8ae164570dd17a1f970ae611eb}{\_producers}}.empty()](\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_1_1chain_a7041c0316bd294d0866609ab3e0cc7a7}{packed\_transaction\_ptr}}\&\ packed\_trx\_ptr,\ \mbox{\hyperlink{namespacesysio_1_1chain_affd9603ab5a713a9762157b12c8f6b9b}{trx\_enum\_type}}\ trx\_type\ )\ \{}
\DoxyCodeLine{01922\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ trx\_type\ ==\ trx\_enum\_type::persisted\ )\ \{}
\DoxyCodeLine{01923\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ pbm\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}}\ )\ \{}
\DoxyCodeLine{01924\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_ae93a86d470c7e16b50ab7102170c5d4e}{\_trx\_failed\_trace\_log}},}
\DoxyCodeLine{01925\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Block\ \$\{block\_num\}\ for\ producer\ \$\{prod\}\ is\ EXPIRING\ PERSISTED\ tx:\ \$\{txid\}"{}},}
\DoxyCodeLine{01926\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}block\_num"{}},\ chain.head\_block\_num()\ +\ 1)(\textcolor{stringliteral}{"{}txid"{}},\ packed\_trx\_ptr-\/>id())}
\DoxyCodeLine{01927\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}prod"{}},\ chain.is\_building\_block()\ ?\ chain.pending\_block\_producer()\ :\ \mbox{\hyperlink{catch__reporter__console_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}())\ );}
\DoxyCodeLine{01928\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_a78396757cc70405744561b647c892edf}{\_trx\_log}},\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Block\ \$\{block\_num\}\ for\ producer\ \$\{prod\}\ is\ EXPIRING\ PERSISTED\ tx:\ \$\{trx\}"{}},}
\DoxyCodeLine{01929\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}block\_num"{}},\ chain.head\_block\_num()\ +\ 1)}
\DoxyCodeLine{01930\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}prod"{}},\ chain.is\_building\_block()\ ?\ chain.pending\_block\_producer()\ :\ \mbox{\hyperlink{catch__reporter__console_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}())}
\DoxyCodeLine{01931\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}trx"{}},\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_ae56bb5451f52c447629b2cecbd8d4b58}{get\_log\_trx}}(packed\_trx\_ptr-\/>get\_transaction())));}
\DoxyCodeLine{01932\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_a979f47bc56a17944271d72bccb834c33}{\_trx\_trace\_failure\_log}},\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Block\ \$\{block\_num\}\ for\ producer\ \$\{prod\}\ is\ EXPIRING\ PERSISTED\ tx:\ \$\{entire\_trx\}"{}},}
\DoxyCodeLine{01933\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}block\_num"{}},\ chain.head\_block\_num()\ +\ 1)}
\DoxyCodeLine{01934\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}prod"{}},\ chain.is\_building\_block()\ ?\ chain.pending\_block\_producer()\ :\ \mbox{\hyperlink{catch__reporter__console_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}())}
\DoxyCodeLine{01935\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}entire\_trx"{}},\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_ae56bb5451f52c447629b2cecbd8d4b58}{get\_log\_trx}}(packed\_trx\_ptr-\/>get\_transaction())));}
\DoxyCodeLine{01936\ }
\DoxyCodeLine{01937\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01938\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_ae93a86d470c7e16b50ab7102170c5d4e}{\_trx\_failed\_trace\_log}},\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Speculative\ execution\ is\ EXPIRING\ PERSISTED\ tx:\ \$\{txid\}"{}},\ (\textcolor{stringliteral}{"{}txid"{}},\ packed\_trx\_ptr-\/>id()));}
\DoxyCodeLine{01939\ }
\DoxyCodeLine{01940\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_a78396757cc70405744561b647c892edf}{\_trx\_log}},\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Speculative\ execution\ is\ EXPIRING\ PERSISTED\ tx:\ \$\{trx\}"{}},}
\DoxyCodeLine{01941\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}trx"{}},\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_ae56bb5451f52c447629b2cecbd8d4b58}{get\_log\_trx}}(packed\_trx\_ptr-\/>get\_transaction())));}
\DoxyCodeLine{01942\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_a979f47bc56a17944271d72bccb834c33}{\_trx\_trace\_failure\_log}},\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Speculative\ execution\ is\ EXPIRING\ PERSISTED\ tx:\ \$\{entire\_trx\}"{}},}
\DoxyCodeLine{01943\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}entire\_trx"{}},\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_ae56bb5451f52c447629b2cecbd8d4b58}{get\_log\_trx}}(packed\_trx\_ptr-\/>get\_transaction())));}
\DoxyCodeLine{01944\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01945\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++num\_expired\_persistent;}
\DoxyCodeLine{01946\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01947\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (has\_producers)\ \{}
\DoxyCodeLine{01948\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_ae93a86d470c7e16b50ab7102170c5d4e}{\_trx\_failed\_trace\_log}},}
\DoxyCodeLine{01949\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Node\ with\ producers\ configured\ is\ dropping\ an\ EXPIRED\ transaction\ that\ was\ PREVIOUSLY\ ACCEPTED\ :\ \$\{txid\}"{}},}
\DoxyCodeLine{01950\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}txid"{}},\ packed\_trx\_ptr-\/>id()));}
\DoxyCodeLine{01951\ }
\DoxyCodeLine{01952\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_a78396757cc70405744561b647c892edf}{\_trx\_log}},\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Node\ with\ producers\ configured\ is\ dropping\ an\ EXPIRED\ transaction\ that\ was\ PREVIOUSLY\ ACCEPTED:\ \$\{trx\}"{}},}
\DoxyCodeLine{01953\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}trx"{}},\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_ae56bb5451f52c447629b2cecbd8d4b58}{get\_log\_trx}}(packed\_trx\_ptr-\/>get\_transaction())));}
\DoxyCodeLine{01954\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_a979f47bc56a17944271d72bccb834c33}{\_trx\_trace\_failure\_log}},\ \textcolor{stringliteral}{"{}[TRX\_TRACE]\ Node\ with\ producers\ configured\ is\ dropping\ an\ EXPIRED\ transaction\ that\ was\ PREVIOUSLY\ ACCEPTED:\ \$\{entire\_trx\}"{}},}
\DoxyCodeLine{01955\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}entire\_trx"{}},\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_ae56bb5451f52c447629b2cecbd8d4b58}{get\_log\_trx}}(packed\_trx\_ptr-\/>get\_transaction())));}
\DoxyCodeLine{01956\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01957\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++num\_expired\_other;}
\DoxyCodeLine{01958\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01959\ \ \ \ \});}
\DoxyCodeLine{01960\ }
\DoxyCodeLine{01961\ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}\ \&\&\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}}\ )\ \{}
\DoxyCodeLine{01962\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af3086372b1da6bfce45ff871734f2e8d}{fc\_wlog}}(\ \mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Unable\ to\ process\ all\ expired\ transactions\ in\ unapplied\ queue\ before\ deadline,\ "{}}}
\DoxyCodeLine{01963\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Persistent\ expired\ \$\{persistent\_expired\},\ Other\ expired\ \$\{other\_expired\}"{}},}
\DoxyCodeLine{01964\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}persistent\_expired"{}},\ num\_expired\_persistent)(\textcolor{stringliteral}{"{}other\_expired"{}},\ num\_expired\_other)\ );}
\DoxyCodeLine{01965\ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01966\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Processed\ \$\{m\}\ expired\ transactions\ of\ the\ \$\{n\}\ transactions\ in\ the\ unapplied\ queue,\ "{}}}
\DoxyCodeLine{01967\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Persistent\ expired\ \$\{persistent\_expired\},\ Other\ expired\ \$\{other\_expired\}"{}},}
\DoxyCodeLine{01968\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}m"{}},\ num\_expired\_persistent+num\_expired\_other)(\textcolor{stringliteral}{"{}n"{}},\ orig\_count)}
\DoxyCodeLine{01969\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}persistent\_expired"{}},\ num\_expired\_persistent)(\textcolor{stringliteral}{"{}other\_expired"{}},\ num\_expired\_other)\ );}
\DoxyCodeLine{01970\ \ \ \ \}}
\DoxyCodeLine{01971\ }
\DoxyCodeLine{01972\ \ \ \ \textcolor{keywordflow}{return}\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}};}
\DoxyCodeLine{01973\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a07a7c896dddfa2b6c36cf67248d3599d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a07a7c896dddfa2b6c36cf67248d3599d_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_ab57089953b20f4eac5adc247b73040ec}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!restart\_speculative\_block@{restart\_speculative\_block}}
\index{restart\_speculative\_block@{restart\_speculative\_block}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{restart\_speculative\_block()}{restart\_speculative\_block()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_ab57089953b20f4eac5adc247b73040ec} 
void sysio\+::producer\+\_\+plugin\+\_\+impl\+::restart\+\_\+speculative\+\_\+block (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00520}{520}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ \ chain::controller\&\ chain\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a14a5e77b31ecf267c8062267d03440ae}{chain}}();}
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ abort\ the\ pending\ block}}
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a64a6bf20ec0b7476d2fe310840dc818d}{add\_aborted}}(\ chain.abort\_block()\ );}
\DoxyCodeLine{00524\ }
\DoxyCodeLine{00525\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad8895b72aaf8928b54665684ffdb9405}{schedule\_production\_loop}}();}
\DoxyCodeLine{00526\ \ \ \ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classsysio_1_1producer__plugin__impl_ab57089953b20f4eac5adc247b73040ec_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_a15812dcb0edaaa48ab154d3bb2ca6a5c}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!schedule\_delayed\_production\_loop@{schedule\_delayed\_production\_loop}}
\index{schedule\_delayed\_production\_loop@{schedule\_delayed\_production\_loop}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{schedule\_delayed\_production\_loop()}{schedule\_delayed\_production\_loop()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a15812dcb0edaaa48ab154d3bb2ca6a5c} 
void sysio\+::producer\+\_\+plugin\+\_\+impl\+::schedule\+\_\+delayed\+\_\+production\+\_\+loop (\begin{DoxyParamCaption}\item[{const std\+::weak\+\_\+ptr$<$ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl}{producer\+\_\+plugin\+\_\+impl}} $>$ \&}]{weak\+\_\+this}{, }\item[{std\+::optional$<$ \mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} $>$}]{wake\+\_\+up\+\_\+time}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l02356}{2356}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02356\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02357\ \ \ \ \textcolor{keywordflow}{if}\ (wake\_up\_time)\ \{}
\DoxyCodeLine{02358\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Scheduling\ Speculative/Production\ Change\ at\ \$\{time\}"{}},\ (\textcolor{stringliteral}{"{}time"{}},\ wake\_up\_time));}
\DoxyCodeLine{02359\ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ boost::posix\_time::ptime\ epoch(boost::gregorian::date(1970,\ 1,\ 1));}
\DoxyCodeLine{02360\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab031fc8338d68f086c7d183e7512c9ea}{\_timer}}.expires\_at(epoch\ +\ boost::posix\_time::microseconds(wake\_up\_time-\/>time\_since\_epoch().count()));}
\DoxyCodeLine{02361\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab031fc8338d68f086c7d183e7512c9ea}{\_timer}}.async\_wait(\ \mbox{\hyperlink{namespaceappbase_a99374dc23934f008a09f2f79be9eae40}{app}}().get\_priority\_queue().wrap(\ \mbox{\hyperlink{structappbase_1_1priority_adab9a6659f361fc6ca6c855788b05df0}{priority::high}},}
\DoxyCodeLine{02362\ \ \ \ \ \ \ \ \ \ [weak\_this,cid=++\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a21693978cec3fac7ce203531e88c7d5a}{\_timer\_corelation\_id}}](\textcolor{keyword}{const}\ boost::system::error\_code\&\ ec)\ \{}
\DoxyCodeLine{02363\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a}{self}}\ =\ weak\_this.lock();}
\DoxyCodeLine{02364\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a}{self}}\ \&\&\ ec\ !=\ boost::asio::error::operation\_aborted\ \&\&\ cid\ ==\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a}{self}}-\/>\_timer\_corelation\_id\ )\ \{}
\DoxyCodeLine{02365\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a}{self}}-\/>schedule\_production\_loop();}
\DoxyCodeLine{02366\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02367\ \ \ \ \ \ \ \ \ \ \}\ )\ );}
\DoxyCodeLine{02368\ \ \ \ \}}
\DoxyCodeLine{02369\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a15812dcb0edaaa48ab154d3bb2ca6a5c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a15812dcb0edaaa48ab154d3bb2ca6a5c_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_a46f5da3c1146a1e5f0850e541dac2d90}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!schedule\_maybe\_produce\_block@{schedule\_maybe\_produce\_block}}
\index{schedule\_maybe\_produce\_block@{schedule\_maybe\_produce\_block}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{schedule\_maybe\_produce\_block()}{schedule\_maybe\_produce\_block()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a46f5da3c1146a1e5f0850e541dac2d90} 
void sysio\+::producer\+\_\+plugin\+\_\+impl\+::schedule\+\_\+maybe\+\_\+produce\+\_\+block (\begin{DoxyParamCaption}\item[{bool}]{exhausted}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l02298}{2298}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02298\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02299\ \ \ \ chain::controller\&\ chain\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a14a5e77b31ecf267c8062267d03440ae}{chain}}();}
\DoxyCodeLine{02300\ }
\DoxyCodeLine{02301\ \ \ \ \textcolor{comment}{//\ we\ succeeded\ but\ block\ may\ be\ exhausted}}
\DoxyCodeLine{02302\ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ boost::posix\_time::ptime\ epoch(\ boost::gregorian::date(\ 1970,\ 1,\ 1\ )\ );}
\DoxyCodeLine{02303\ \ \ \ \textcolor{keyword}{auto}\ deadline\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a90e415597bff893b9e18e7e3ca2ab275}{calculate\_block\_deadline}}(\ chain.pending\_block\_time()\ );}
\DoxyCodeLine{02304\ }
\DoxyCodeLine{02305\ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{exhausted}}\ \&\&\ deadline\ >\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}()\ )\ \{}
\DoxyCodeLine{02306\ \ \ \ \ \ \ \textcolor{comment}{//\ ship\ this\ block\ off\ no\ later\ than\ its\ deadline}}
\DoxyCodeLine{02307\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ chain.is\_building\_block(),\ missing\_pending\_block\_state,}
\DoxyCodeLine{02308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}producing\ without\ pending\_block\_state,\ start\_block\ succeeded"{}}\ );}
\DoxyCodeLine{02309\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab031fc8338d68f086c7d183e7512c9ea}{\_timer}}.expires\_at(\ epoch\ +\ boost::posix\_time::microseconds(\ deadline.time\_since\_epoch().count()\ )\ );}
\DoxyCodeLine{02310\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Scheduling\ Block\ Production\ on\ Normal\ Block\ \#\$\{num\}\ for\ \$\{time\}"{}},}
\DoxyCodeLine{02311\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}num"{}},\ chain.head\_block\_num()\ +\ 1)(\ \textcolor{stringliteral}{"{}time"{}},\ deadline\ )\ );}
\DoxyCodeLine{02312\ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02313\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ chain.is\_building\_block(),\ missing\_pending\_block\_state,\ \textcolor{stringliteral}{"{}producing\ without\ pending\_block\_state"{}}\ );}
\DoxyCodeLine{02314\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab031fc8338d68f086c7d183e7512c9ea}{\_timer}}.expires\_from\_now(\ boost::posix\_time::microseconds(\ 0\ )\ );}
\DoxyCodeLine{02315\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Scheduling\ Block\ Production\ on\ \$\{desc\}\ Block\ \#\$\{num\}\ immediately"{}},}
\DoxyCodeLine{02316\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}num"{}},\ chain.head\_block\_num()\ +\ 1)(\textcolor{stringliteral}{"{}desc"{}},\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab05cac0064c3afeb991b8e91cb76631e}{block\_is\_exhausted}}()\ ?\ \textcolor{stringliteral}{"{}Exhausted"{}}\ :\ \textcolor{stringliteral}{"{}Deadline\ exceeded"{}})\ );}
\DoxyCodeLine{02317\ \ \ \ \}}
\DoxyCodeLine{02318\ }
\DoxyCodeLine{02319\ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab031fc8338d68f086c7d183e7512c9ea}{\_timer}}.async\_wait(\ \mbox{\hyperlink{namespaceappbase_a99374dc23934f008a09f2f79be9eae40}{app}}().get\_priority\_queue().wrap(\ \mbox{\hyperlink{structappbase_1_1priority_adab9a6659f361fc6ca6c855788b05df0}{priority::high}},}
\DoxyCodeLine{02320\ \ \ \ \ \ \ \ \ \ [\&chain,\ weak\_this\ =\ weak\_from\_this(),\ cid=++\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a21693978cec3fac7ce203531e88c7d5a}{\_timer\_corelation\_id}}](\textcolor{keyword}{const}\ boost::system::error\_code\&\ ec)\ \{}
\DoxyCodeLine{02321\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a}{self}}\ =\ weak\_this.lock();}
\DoxyCodeLine{02322\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a}{self}}\ \&\&\ ec\ !=\ boost::asio::error::operation\_aborted\ \&\&\ cid\ ==\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a}{self}}-\/>\_timer\_corelation\_id\ )\ \{}
\DoxyCodeLine{02323\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ pending\_block\_state\ expected,\ but\ can't\ assert\ inside\ async\_wait}}
\DoxyCodeLine{02324\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ block\_num\ =\ chain.is\_building\_block()\ ?\ chain.head\_block\_num()\ +\ 1\ :\ 0;}
\DoxyCodeLine{02325\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Produce\ block\ timer\ for\ \$\{num\}\ running\ at\ \$\{time\}"{}},\ (\textcolor{stringliteral}{"{}num"{}},\ block\_num)(\textcolor{stringliteral}{"{}time"{}},\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}())\ );}
\DoxyCodeLine{02326\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ res\ =\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a}{self}}-\/>maybe\_produce\_block();}
\DoxyCodeLine{02327\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Producing\ Block\ \#\$\{num\}\ returned:\ \$\{res\}"{}},\ (\textcolor{stringliteral}{"{}num"{}},\ block\_num)(\ \textcolor{stringliteral}{"{}res"{}},\ res\ )\ );}
\DoxyCodeLine{02328\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02329\ \ \ \ \ \ \ \ \ \ \}\ )\ );}
\DoxyCodeLine{02330\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a46f5da3c1146a1e5f0850e541dac2d90_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a46f5da3c1146a1e5f0850e541dac2d90_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_ad8895b72aaf8928b54665684ffdb9405}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!schedule\_production\_loop@{schedule\_production\_loop}}
\index{schedule\_production\_loop@{schedule\_production\_loop}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{schedule\_production\_loop()}{schedule\_production\_loop()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_ad8895b72aaf8928b54665684ffdb9405} 
void sysio\+::producer\+\_\+plugin\+\_\+impl\+::schedule\+\_\+production\+\_\+loop (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l02255}{2255}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02256\ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_aad323427fd3fbc7d0decad90b324f44f}{\_received\_block}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02257\ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab031fc8338d68f086c7d183e7512c9ea}{\_timer}}.cancel();}
\DoxyCodeLine{02258\ }
\DoxyCodeLine{02259\ \ \ \ \textcolor{keyword}{auto}\ result\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a7db63178eda240d671fc6ae4e46bf01e}{start\_block}}();}
\DoxyCodeLine{02260\ }
\DoxyCodeLine{02261\ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba26934eb377001f66e37289a5c93fe284}{start\_block\_result::failed}})\ \{}
\DoxyCodeLine{02262\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a9e3cdbaecd5a34b42956e888f7326fad}{elog}}(\textcolor{stringliteral}{"{}Failed\ to\ start\ a\ pending\ block,\ will\ try\ again\ later"{}});}
\DoxyCodeLine{02263\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab031fc8338d68f086c7d183e7512c9ea}{\_timer}}.expires\_from\_now(\ boost::posix\_time::microseconds(\ config::block\_interval\_us\ \ /\ 10\ ));}
\DoxyCodeLine{02264\ }
\DoxyCodeLine{02265\ \ \ \ \ \ \ \textcolor{comment}{//\ we\ failed\ to\ start\ a\ block,\ so\ try\ again\ later?}}
\DoxyCodeLine{02266\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab031fc8338d68f086c7d183e7512c9ea}{\_timer}}.async\_wait(\ \mbox{\hyperlink{namespaceappbase_a99374dc23934f008a09f2f79be9eae40}{app}}().get\_priority\_queue().wrap(\ \mbox{\hyperlink{structappbase_1_1priority_adab9a6659f361fc6ca6c855788b05df0}{priority::high}},}
\DoxyCodeLine{02267\ \ \ \ \ \ \ \ \ \ \ [weak\_this\ =\ weak\_from\_this(),\ cid\ =\ ++\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a21693978cec3fac7ce203531e88c7d5a}{\_timer\_corelation\_id}}](\ \textcolor{keyword}{const}\ boost::system::error\_code\&\ ec\ )\ \{}
\DoxyCodeLine{02268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a}{self}}\ =\ weak\_this.lock();}
\DoxyCodeLine{02269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a}{self}}\ \&\&\ ec\ !=\ boost::asio::error::operation\_aborted\ \&\&\ cid\ ==\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a}{self}}-\/>\_timer\_corelation\_id\ )\ \{}
\DoxyCodeLine{02270\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a}{self}}-\/>schedule\_production\_loop();}
\DoxyCodeLine{02271\ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02272\ \ \ \ \ \ \ \ \ \ \ \}\ )\ );}
\DoxyCodeLine{02273\ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (result\ ==\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba431da7f12530d5bf74adec7e85562038}{start\_block\_result::waiting\_for\_block}})\{}
\DoxyCodeLine{02274\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_af2f69a8ae164570dd17a1f970ae611eb}{\_producers}}.empty()\ \&\&\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a7964ed6135deaf78fe51442d0fde20f5}{production\_disabled\_by\_policy}}())\ \{}
\DoxyCodeLine{02275\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Waiting\ till\ another\ block\ is\ received\ and\ scheduling\ Speculative/Production\ Change"{}});}
\DoxyCodeLine{02276\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a15812dcb0edaaa48ab154d3bb2ca6a5c}{schedule\_delayed\_production\_loop}}(weak\_from\_this(),\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a652ecc759215ca6fa58b36370cc72e43}{calculate\_producer\_wake\_up\_time}}(\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_afc6b3109ff8bdf1d18200e54f5fcbf0f}{calculate\_pending\_block\_time}}()));}
\DoxyCodeLine{02277\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02278\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Waiting\ till\ another\ block\ is\ received"{}});}
\DoxyCodeLine{02279\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ nothing\ to\ do\ until\ more\ blocks\ arrive}}
\DoxyCodeLine{02280\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02281\ }
\DoxyCodeLine{02282\ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (result\ ==\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba0f967fbaf130c7283779d1cf6058d1fa}{start\_block\_result::waiting\_for\_production}})\ \{}
\DoxyCodeLine{02283\ \ \ \ \ \ \ \textcolor{comment}{//\ scheduled\ in\ start\_block()}}
\DoxyCodeLine{02284\ }
\DoxyCodeLine{02285\ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}})\ \{}
\DoxyCodeLine{02286\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a46f5da3c1146a1e5f0850e541dac2d90}{schedule\_maybe\_produce\_block}}(\ result\ ==\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{start\_block\_result::exhausted}}\ );}
\DoxyCodeLine{02287\ }
\DoxyCodeLine{02288\ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475aa25b9b4361a3bd215c739cf4f9cf2e4a}{pending\_block\_mode::speculating}}\ \&\&\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_af2f69a8ae164570dd17a1f970ae611eb}{\_producers}}.empty()\ \&\&\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a7964ed6135deaf78fe51442d0fde20f5}{production\_disabled\_by\_policy}}())\{}
\DoxyCodeLine{02289\ \ \ \ \ \ \ chain::controller\&\ chain\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a14a5e77b31ecf267c8062267d03440ae}{chain}}();}
\DoxyCodeLine{02290\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Speculative\ Block\ Created;\ Scheduling\ Speculative/Production\ Change"{}});}
\DoxyCodeLine{02291\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ chain.is\_building\_block(),\ missing\_pending\_block\_state,\ \textcolor{stringliteral}{"{}speculating\ without\ pending\_block\_state"{}}\ );}
\DoxyCodeLine{02292\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a15812dcb0edaaa48ab154d3bb2ca6a5c}{schedule\_delayed\_production\_loop}}(weak\_from\_this(),\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a652ecc759215ca6fa58b36370cc72e43}{calculate\_producer\_wake\_up\_time}}(chain.pending\_block\_time()));}
\DoxyCodeLine{02293\ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02294\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Speculative\ Block\ Created"{}});}
\DoxyCodeLine{02295\ \ \ \ \}}
\DoxyCodeLine{02296\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classsysio_1_1producer__plugin__impl_ad8895b72aaf8928b54665684ffdb9405_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_ad8895b72aaf8928b54665684ffdb9405_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_a104ad57b8b9c3c8e53a680e09318ea5d}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!should\_interrupt\_start\_block@{should\_interrupt\_start\_block}}
\index{should\_interrupt\_start\_block@{should\_interrupt\_start\_block}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{should\_interrupt\_start\_block()}{should\_interrupt\_start\_block()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a104ad57b8b9c3c8e53a680e09318ea5d} 
bool sysio\+::producer\+\_\+plugin\+\_\+impl\+::should\+\_\+interrupt\+\_\+start\+\_\+block (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} \&}]{deadline}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l01674}{1674}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01674\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01675\ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}}\ )\ \{}
\DoxyCodeLine{01676\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ deadline\ <=\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}();}
\DoxyCodeLine{01677\ \ \ \ \}}
\DoxyCodeLine{01678\ \ \ \ \textcolor{comment}{//\ if\ we\ can\ produce\ then\ honor\ deadline\ so\ production\ starts\ on\ time}}
\DoxyCodeLine{01679\ \ \ \ \textcolor{keywordflow}{return}\ (!\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_af2f69a8ae164570dd17a1f970ae611eb}{\_producers}}.empty()\ \&\&\ deadline\ <=\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}())\ ||\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_aad323427fd3fbc7d0decad90b324f44f}{\_received\_block}};}
\DoxyCodeLine{01680\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a104ad57b8b9c3c8e53a680e09318ea5d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a104ad57b8b9c3c8e53a680e09318ea5d_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1producer__plugin__impl_a7db63178eda240d671fc6ae4e46bf01e}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!start\_block@{start\_block}}
\index{start\_block@{start\_block}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{start\_block()}{start\_block()}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a7db63178eda240d671fc6ae4e46bf01e} 
\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bb}{producer\+\_\+plugin\+\_\+impl\+::start\+\_\+block\+\_\+result}} sysio\+::producer\+\_\+plugin\+\_\+impl\+::start\+\_\+block (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l01682}{1682}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01682\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01683\ \ \ \ chain::controller\&\ chain\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a14a5e77b31ecf267c8062267d03440ae}{chain}}();}
\DoxyCodeLine{01684\ }
\DoxyCodeLine{01685\ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_ad911df70e3131f7a2ed91d1eca08793a}{accept\_transactions}}()\ )}
\DoxyCodeLine{01686\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba431da7f12530d5bf74adec7e85562038}{start\_block\_result::waiting\_for\_block}};}
\DoxyCodeLine{01687\ }
\DoxyCodeLine{01688\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ hbs\ =\ chain.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a3e445e8e2da032a322a1348091a1a702}{head\_block\_state}}();}
\DoxyCodeLine{01689\ }
\DoxyCodeLine{01690\ \ \ \ \textcolor{keywordflow}{if}(\ chain.get\_terminate\_at\_block()\ >\ 0\ \&\&\ chain.get\_terminate\_at\_block()\ <\ chain.head\_block\_num()\ )\ \{}
\DoxyCodeLine{01691\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a831cf08dc63704c11fd154132c6e8bdb}{ilog}}(\textcolor{stringliteral}{"{}Reached\ configured\ maximum\ block\ \$\{num\};\ terminating"{}},\ (\textcolor{stringliteral}{"{}num"{}},\ chain.get\_terminate\_at\_block()));}
\DoxyCodeLine{01692\ \ \ \ \ \ \ \mbox{\hyperlink{namespaceappbase_a99374dc23934f008a09f2f79be9eae40}{app}}().\mbox{\hyperlink{classappbase_1_1application_a81aa58d3f94570b7976145039155fc46}{quit}}();}
\DoxyCodeLine{01693\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba26934eb377001f66e37289a5c93fe284}{start\_block\_result::failed}};}
\DoxyCodeLine{01694\ \ \ \ \}}
\DoxyCodeLine{01695\ }
\DoxyCodeLine{01696\ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classfc_1_1time__point}{fc::time\_point}}\ now\ =\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}();}
\DoxyCodeLine{01697\ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classfc_1_1time__point}{fc::time\_point}}\ block\_time\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_afc6b3109ff8bdf1d18200e54f5fcbf0f}{calculate\_pending\_block\_time}}();}
\DoxyCodeLine{01698\ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classfc_1_1time__point}{fc::time\_point}}\ preprocess\_deadline\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a90e415597bff893b9e18e7e3ca2ab275}{calculate\_block\_deadline}}(block\_time);}
\DoxyCodeLine{01699\ }
\DoxyCodeLine{01700\ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475}{pending\_block\_mode}}\ previous\_pending\_mode\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}};}
\DoxyCodeLine{01701\ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ =\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}};}
\DoxyCodeLine{01702\ }
\DoxyCodeLine{01703\ \ \ \ \textcolor{comment}{//\ Not\ our\ turn}}
\DoxyCodeLine{01704\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ scheduled\_producer\ =\ hbs-\/>get\_scheduled\_producer(block\_time);}
\DoxyCodeLine{01705\ }
\DoxyCodeLine{01706\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ current\_watermark\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a9077b433ee5250472b5670b5b9802362}{get\_watermark}}(scheduled\_producer.producer\_name);}
\DoxyCodeLine{01707\ }
\DoxyCodeLine{01708\ \ \ \ \textcolor{keywordtype}{size\_t}\ num\_relevant\_signatures\ =\ 0;}
\DoxyCodeLine{01709\ \ \ \ scheduled\_producer.for\_each\_key([\&](\textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_1_1chain_a0628a11f388cd2e43b1ccc1260a1042f}{public\_key\_type}}\&\ key)\{}
\DoxyCodeLine{01710\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ iter\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad9173229bf0922a5bd51150e1a95c58f}{\_signature\_providers}}.find(key);}
\DoxyCodeLine{01711\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(iter\ !=\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad9173229bf0922a5bd51150e1a95c58f}{\_signature\_providers}}.end())\ \{}
\DoxyCodeLine{01712\ \ \ \ \ \ \ \ \ \ num\_relevant\_signatures++;}
\DoxyCodeLine{01713\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01714\ \ \ \ \});}
\DoxyCodeLine{01715\ }
\DoxyCodeLine{01716\ \ \ \ \textcolor{keyword}{auto}\ irreversible\_block\_age\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a03ffa5daf4ee4f47e84f8bae98bc1a00}{get\_irreversible\_block\_age}}();}
\DoxyCodeLine{01717\ }
\DoxyCodeLine{01718\ \ \ \ \textcolor{comment}{//\ If\ the\ next\ block\ production\ opportunity\ is\ in\ the\ present\ or\ future,\ we're\ synced.}}
\DoxyCodeLine{01719\ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a26f51591effdca88f46913aa23308695}{\_production\_enabled}}\ )\ \{}
\DoxyCodeLine{01720\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ =\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475aa25b9b4361a3bd215c739cf4f9cf2e4a}{pending\_block\_mode::speculating}};}
\DoxyCodeLine{01721\ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_af2f69a8ae164570dd17a1f970ae611eb}{\_producers}}.find(scheduled\_producer.producer\_name)\ ==\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_af2f69a8ae164570dd17a1f970ae611eb}{\_producers}}.end())\ \{}
\DoxyCodeLine{01722\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ =\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475aa25b9b4361a3bd215c739cf4f9cf2e4a}{pending\_block\_mode::speculating}};}
\DoxyCodeLine{01723\ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (num\_relevant\_signatures\ ==\ 0)\ \{}
\DoxyCodeLine{01724\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a9e3cdbaecd5a34b42956e888f7326fad}{elog}}(\textcolor{stringliteral}{"{}Not\ producing\ block\ because\ I\ don't\ have\ any\ private\ keys\ relevant\ to\ authority:\ \$\{authority\}"{}},\ (\textcolor{stringliteral}{"{}authority"{}},\ scheduled\_producer.authority));}
\DoxyCodeLine{01725\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ =\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475aa25b9b4361a3bd215c739cf4f9cf2e4a}{pending\_block\_mode::speculating}};}
\DoxyCodeLine{01726\ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a9992f102be5757c43dcdaedf97fb7c37}{\_pause\_production}}\ )\ \{}
\DoxyCodeLine{01727\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a9e3cdbaecd5a34b42956e888f7326fad}{elog}}(\textcolor{stringliteral}{"{}Not\ producing\ block\ because\ production\ is\ explicitly\ paused"{}});}
\DoxyCodeLine{01728\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ =\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475aa25b9b4361a3bd215c739cf4f9cf2e4a}{pending\_block\_mode::speculating}};}
\DoxyCodeLine{01729\ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_adc02b8bbfdf1e85f4bf2132db2c7510f}{\_max\_irreversible\_block\_age\_us}}.\mbox{\hyperlink{classfc_1_1microseconds_a20fba59ec7e1f50c6b8f2c9443cc9b92}{count}}()\ >=\ 0\ \&\&\ irreversible\_block\_age\ >=\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_adc02b8bbfdf1e85f4bf2132db2c7510f}{\_max\_irreversible\_block\_age\_us}}\ )\ \{}
\DoxyCodeLine{01730\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a9e3cdbaecd5a34b42956e888f7326fad}{elog}}(\textcolor{stringliteral}{"{}Not\ producing\ block\ because\ the\ irreversible\ block\ is\ too\ old\ [age:\$\{age\}s,\ max:\$\{max\}s]"{}},\ (\textcolor{stringliteral}{"{}age"{}},\ irreversible\_block\_age.count()\ /\ 1'000'000)(\ \textcolor{stringliteral}{"{}max"{}},\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_adc02b8bbfdf1e85f4bf2132db2c7510f}{\_max\_irreversible\_block\_age\_us}}.\mbox{\hyperlink{classfc_1_1microseconds_a20fba59ec7e1f50c6b8f2c9443cc9b92}{count}}()\ /\ 1'000'000\ ));}
\DoxyCodeLine{01731\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ =\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475aa25b9b4361a3bd215c739cf4f9cf2e4a}{pending\_block\_mode::speculating}};}
\DoxyCodeLine{01732\ \ \ \ \}}
\DoxyCodeLine{01733\ }
\DoxyCodeLine{01734\ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}})\ \{}
\DoxyCodeLine{01735\ \ \ \ \ \ \ \textcolor{comment}{//\ determine\ if\ our\ watermark\ excludes\ us\ from\ producing\ at\ this\ point}}
\DoxyCodeLine{01736\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (current\_watermark)\ \{}
\DoxyCodeLine{01737\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_1_1chain_a11965fc424809ea1802175f8b36ae4e5}{block\_timestamp\_type}}\ block\_timestamp\{block\_time\};}
\DoxyCodeLine{01738\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (current\_watermark-\/>first\ >\ hbs-\/>block\_num)\ \{}
\DoxyCodeLine{01739\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a9e3cdbaecd5a34b42956e888f7326fad}{elog}}(\textcolor{stringliteral}{"{}Not\ producing\ block\ because\ \(\backslash\)"{}\$\{producer\}\(\backslash\)"{}\ signed\ a\ block\ at\ a\ higher\ block\ number\ (\$\{watermark\})\ than\ the\ current\ fork's\ head\ (\$\{head\_block\_num\})"{}},}
\DoxyCodeLine{01740\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}producer"{}},\ scheduled\_producer.producer\_name)}
\DoxyCodeLine{01741\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}watermark"{}},\ current\_watermark-\/>first)}
\DoxyCodeLine{01742\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}head\_block\_num"{}},\ hbs-\/>block\_num));}
\DoxyCodeLine{01743\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ =\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475aa25b9b4361a3bd215c739cf4f9cf2e4a}{pending\_block\_mode::speculating}};}
\DoxyCodeLine{01744\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (current\_watermark-\/>second\ >=\ block\_timestamp)\ \{}
\DoxyCodeLine{01745\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a9e3cdbaecd5a34b42956e888f7326fad}{elog}}(\textcolor{stringliteral}{"{}Not\ producing\ block\ because\ \(\backslash\)"{}\$\{producer\}\(\backslash\)"{}\ signed\ a\ block\ at\ the\ next\ block\ time\ or\ later\ (\$\{watermark\})\ than\ the\ pending\ block\ time\ (\$\{block\_timestamp\})"{}},}
\DoxyCodeLine{01746\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}producer"{}},\ scheduled\_producer.producer\_name)}
\DoxyCodeLine{01747\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}watermark"{}},\ current\_watermark-\/>second)}
\DoxyCodeLine{01748\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}block\_timestamp"{}},\ block\_timestamp));}
\DoxyCodeLine{01749\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ =\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475aa25b9b4361a3bd215c739cf4f9cf2e4a}{pending\_block\_mode::speculating}};}
\DoxyCodeLine{01750\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01751\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01752\ \ \ \ \}}
\DoxyCodeLine{01753\ }
\DoxyCodeLine{01754\ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475aa25b9b4361a3bd215c739cf4f9cf2e4a}{pending\_block\_mode::speculating}})\ \{}
\DoxyCodeLine{01755\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ head\_block\_age\ =\ now\ -\/\ chain.head\_block\_time();}
\DoxyCodeLine{01756\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (head\_block\_age\ >\ \mbox{\hyperlink{namespacefc_a9623b8cae3f48bbed6aa1fc2afe9b174}{fc::seconds}}(5))}
\DoxyCodeLine{01757\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba431da7f12530d5bf74adec7e85562038}{start\_block\_result::waiting\_for\_block}};}
\DoxyCodeLine{01758\ \ \ \ \}}
\DoxyCodeLine{01759\ }
\DoxyCodeLine{01760\ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}})\ \{}
\DoxyCodeLine{01761\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ start\_block\_time\ =\ block\_time\ -\/\ \mbox{\hyperlink{classfc_1_1microseconds}{fc::microseconds}}(\ config::block\_interval\_us\ );}
\DoxyCodeLine{01762\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ now\ <\ start\_block\_time\ )\ \{}
\DoxyCodeLine{01763\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Not\ producing\ block\ waiting\ for\ production\ window\ \$\{n\}\ \$\{bt\}"{}},\ (\textcolor{stringliteral}{"{}n"{}},\ hbs-\/>block\_num\ +\ 1)(\textcolor{stringliteral}{"{}bt"{}},\ block\_time)\ );}
\DoxyCodeLine{01764\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ start\_block\_time\ instead\ of\ block\_time\ because\ schedule\_delayed\_production\_loop\ calculates\ next\ block\ time\ from\ given\ time}}
\DoxyCodeLine{01765\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a15812dcb0edaaa48ab154d3bb2ca6a5c}{schedule\_delayed\_production\_loop}}(weak\_from\_this(),\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a652ecc759215ca6fa58b36370cc72e43}{calculate\_producer\_wake\_up\_time}}(start\_block\_time));}
\DoxyCodeLine{01766\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba0f967fbaf130c7283779d1cf6058d1fa}{start\_block\_result::waiting\_for\_production}};}
\DoxyCodeLine{01767\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01768\ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (previous\_pending\_mode\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}})\ \{}
\DoxyCodeLine{01769\ \ \ \ \ \ \ \textcolor{comment}{//\ just\ produced\ our\ last\ block\ of\ our\ round}}
\DoxyCodeLine{01770\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ start\_block\_time\ =\ block\_time\ -\/\ \mbox{\hyperlink{classfc_1_1microseconds}{fc::microseconds}}(\ config::block\_interval\_us\ );}
\DoxyCodeLine{01771\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Not\ starting\ speculative\ block\ until\ \$\{bt\}"{}},\ (\textcolor{stringliteral}{"{}bt"{}},\ start\_block\_time)\ );}
\DoxyCodeLine{01772\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a15812dcb0edaaa48ab154d3bb2ca6a5c}{schedule\_delayed\_production\_loop}}(\ weak\_from\_this(),\ start\_block\_time);}
\DoxyCodeLine{01773\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba0f967fbaf130c7283779d1cf6058d1fa}{start\_block\_result::waiting\_for\_production}};}
\DoxyCodeLine{01774\ \ \ \ \}}
\DoxyCodeLine{01775\ }
\DoxyCodeLine{01776\ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ \textcolor{stringliteral}{"{}Starting\ block\ \#\$\{n\}\ at\ \$\{time\}\ producer\ \$\{p\}"{}},}
\DoxyCodeLine{01777\ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}n"{}},\ hbs-\/>block\_num\ +\ 1)(\textcolor{stringliteral}{"{}time"{}},\ now)(\textcolor{stringliteral}{"{}p"{}},\ scheduled\_producer.producer\_name));}
\DoxyCodeLine{01778\ }
\DoxyCodeLine{01779\ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{01780\ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t}}\ blocks\_to\_confirm\ =\ 0;}
\DoxyCodeLine{01781\ }
\DoxyCodeLine{01782\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}})\ \{}
\DoxyCodeLine{01783\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ determine\ how\ many\ blocks\ this\ producer\ can\ confirm}}
\DoxyCodeLine{01784\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 1)\ if\ it\ is\ not\ a\ producer\ from\ this\ node,\ assume\ no\ confirmations\ (we\ will\ discard\ this\ block\ anyway)}}
\DoxyCodeLine{01785\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 2)\ if\ it\ is\ a\ producer\ on\ this\ node\ that\ has\ never\ produced,\ the\ conservative\ approach\ is\ to\ assume\ no}}
\DoxyCodeLine{01786\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ confirmations\ to\ make\ sure\ we\ don't\ double\ sign\ after\ a\ crash\ TODO:\ make\ these\ watermarks\ durable?}}
\DoxyCodeLine{01787\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 3)\ if\ it\ is\ a\ producer\ on\ this\ node\ where\ this\ node\ knows\ the\ last\ block\ it\ produced,\ safely\ set\ it\ -\/UNLESS-\/}}
\DoxyCodeLine{01788\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 4)\ the\ producer\ on\ this\ node's\ last\ watermark\ is\ higher\ (meaning\ on\ a\ different\ fork)}}
\DoxyCodeLine{01789\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (current\_watermark)\ \{}
\DoxyCodeLine{01790\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ watermark\_bn\ =\ current\_watermark-\/>first;}
\DoxyCodeLine{01791\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (watermark\_bn\ <\ hbs-\/>block\_num)\ \{}
\DoxyCodeLine{01792\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ blocks\_to\_confirm\ =\ (\mbox{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t}})(std::min<uint32\_t>(std::numeric\_limits<uint16\_t>::max(),\ (\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}})(hbs-\/>block\_num\ -\/\ watermark\_bn)));}
\DoxyCodeLine{01793\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01794\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01795\ }
\DoxyCodeLine{01796\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ can\ not\ confirm\ irreversible\ blocks}}
\DoxyCodeLine{01797\ \ \ \ \ \ \ \ \ \ blocks\_to\_confirm\ =\ (\mbox{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t}})(std::min<uint32\_t>(blocks\_to\_confirm,\ (\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}})(hbs-\/>block\_num\ -\/\ hbs-\/>dpos\_irreversible\_blocknum)));}
\DoxyCodeLine{01798\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01799\ }
\DoxyCodeLine{01800\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ac33726be93d621d708c02acfe7fcfd56}{abort\_block}}();}
\DoxyCodeLine{01801\ }
\DoxyCodeLine{01802\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ features\_to\_activate\ =\ chain.get\_preactivated\_protocol\_features();}
\DoxyCodeLine{01803\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}}\ \&\&\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab8c4a74665eea98fed5866ee31b25d5a}{\_protocol\_features\_to\_activate}}.size()\ >\ 0\ )\ \{}
\DoxyCodeLine{01804\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ drop\_features\_to\_activate\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01805\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{01806\ \ \ \ \ \ \ \ \ \ \ \ \ chain.validate\_protocol\_features(\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab8c4a74665eea98fed5866ee31b25d5a}{\_protocol\_features\_to\_activate}}\ );}
\DoxyCodeLine{01807\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\ \textcolor{keyword}{const}\ std::bad\_alloc\&\ )\ \{}
\DoxyCodeLine{01808\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain__plugin_a9fb4d31b915fb0d2ef5392a4284b67e6}{chain\_plugin::handle\_bad\_alloc}}();}
\DoxyCodeLine{01809\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\ \textcolor{keyword}{const}\ boost::interprocess::bad\_alloc\&\ )\ \{}
\DoxyCodeLine{01810\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain__plugin_a9fb4d31b915fb0d2ef5392a4284b67e6}{chain\_plugin::handle\_bad\_alloc}}();}
\DoxyCodeLine{01811\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classfc_1_1exception}{fc::exception}}\&\ e\ )\ \{}
\DoxyCodeLine{01812\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a1759e5c9691d8ad754bdf5eff8bb23ac}{wlog}}(\ \textcolor{stringliteral}{"{}protocol\ features\ to\ activate\ are\ no\ longer\ all\ valid:\ \$\{details\}"{}},}
\DoxyCodeLine{01813\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}details"{}},e.\mbox{\hyperlink{classfc_1_1exception_a7611ea8fbe25dde56649b685c2298a37}{to\_detail\_string}}())\ );}
\DoxyCodeLine{01814\ \ \ \ \ \ \ \ \ \ \ \ \ drop\_features\_to\_activate\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01815\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ \textcolor{keyword}{const}\ std::exception\&\ e\ )\ \{}
\DoxyCodeLine{01816\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a1759e5c9691d8ad754bdf5eff8bb23ac}{wlog}}(\ \textcolor{stringliteral}{"{}protocol\ features\ to\ activate\ are\ no\ longer\ all\ valid:\ \$\{details\}"{}},}
\DoxyCodeLine{01817\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}details"{}},\mbox{\hyperlink{classfc_1_1std__exception__wrapper_ae5ad64f84b1d373f5b92031566284c7c}{fc::std\_exception\_wrapper::from\_current\_exception}}(e).to\_detail\_string())\ );}
\DoxyCodeLine{01818\ \ \ \ \ \ \ \ \ \ \ \ \ drop\_features\_to\_activate\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01819\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01820\ }
\DoxyCodeLine{01821\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ drop\_features\_to\_activate\ )\ \{}
\DoxyCodeLine{01822\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab8c4a74665eea98fed5866ee31b25d5a}{\_protocol\_features\_to\_activate}}.clear();}
\DoxyCodeLine{01823\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01824\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ protocol\_features\_to\_activate\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab8c4a74665eea98fed5866ee31b25d5a}{\_protocol\_features\_to\_activate}};\ \textcolor{comment}{//\ do\ a\ copy\ as\ pending\_block\ might\ be\ aborted}}
\DoxyCodeLine{01825\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ features\_to\_activate.size()\ >\ 0\ )\ \{}
\DoxyCodeLine{01826\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ protocol\_features\_to\_activate.reserve(\ protocol\_features\_to\_activate.size()}
\DoxyCodeLine{01827\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ +\ features\_to\_activate.size()\ );}
\DoxyCodeLine{01828\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::set<digest\_type>\ set\_of\_features\_to\_activate(\ protocol\_features\_to\_activate.begin(),}
\DoxyCodeLine{01829\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ protocol\_features\_to\_activate.end()\ );}
\DoxyCodeLine{01830\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{_x02-_disabled_macros_8cpp_ae28240b98d91d6eb7da702b770490f39}{f}}\ :\ features\_to\_activate\ )\ \{}
\DoxyCodeLine{01831\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ res\ =\ set\_of\_features\_to\_activate.insert(\ \mbox{\hyperlink{_x02-_disabled_macros_8cpp_ae28240b98d91d6eb7da702b770490f39}{f}}\ );}
\DoxyCodeLine{01832\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ res.second\ )\ \{}
\DoxyCodeLine{01833\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ protocol\_features\_to\_activate.push\_back(\ \mbox{\hyperlink{_x02-_disabled_macros_8cpp_ae28240b98d91d6eb7da702b770490f39}{f}}\ );}
\DoxyCodeLine{01834\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01835\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01836\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ features\_to\_activate.clear();}
\DoxyCodeLine{01837\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01838\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacestd_abb7e41c7063536ff6eeee4bb5f66de6c}{std::swap}}(\ features\_to\_activate,\ protocol\_features\_to\_activate\ );}
\DoxyCodeLine{01839\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a369d1c5202c442237cb333c850f1634e}{\_protocol\_features\_signaled}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01840\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a831cf08dc63704c11fd154132c6e8bdb}{ilog}}(\ \textcolor{stringliteral}{"{}signaling\ activation\ of\ the\ following\ protocol\ features\ in\ block\ \$\{num\}:\ \$\{features\_to\_activate\}"{}},}
\DoxyCodeLine{01841\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}num"{}},\ hbs-\/>block\_num\ +\ 1)(\textcolor{stringliteral}{"{}features\_to\_activate"{}},\ features\_to\_activate)\ );}
\DoxyCodeLine{01842\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01843\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01844\ }
\DoxyCodeLine{01845\ \ \ \ \ \ \ chain.start\_block(\ block\_time,\ blocks\_to\_confirm,\ features\_to\_activate,\ preprocess\_deadline\ );}
\DoxyCodeLine{01846\ \ \ \ \}\ \mbox{\hyperlink{producer__plugin_8cpp_a01d09f9c9fe1cbc1b70a0c41f0682e07}{LOG\_AND\_DROP}}();}
\DoxyCodeLine{01847\ }
\DoxyCodeLine{01848\ \ \ \ \textcolor{keywordflow}{if}(\ chain.is\_building\_block()\ )\ \{}
\DoxyCodeLine{01849\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ pending\_block\_signing\_authority\ =\ chain.pending\_block\_signing\_authority();}
\DoxyCodeLine{01850\ }
\DoxyCodeLine{01851\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}}\ \&\&\ pending\_block\_signing\_authority\ !=\ scheduled\_producer.authority)\ \{}
\DoxyCodeLine{01852\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a9e3cdbaecd5a34b42956e888f7326fad}{elog}}(\textcolor{stringliteral}{"{}Unexpected\ block\ signing\ authority,\ reverting\ to\ speculative\ mode!\ [expected:\ \(\backslash\)"{}\$\{expected\}\(\backslash\)"{},\ actual:\ \(\backslash\)"{}\$\{actual\(\backslash\)"{}"{}},\ (\textcolor{stringliteral}{"{}expected"{}},\ scheduled\_producer.authority)(\textcolor{stringliteral}{"{}actual"{}},\ pending\_block\_signing\_authority));}
\DoxyCodeLine{01853\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ =\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475aa25b9b4361a3bd215c739cf4f9cf2e4a}{pending\_block\_mode::speculating}};}
\DoxyCodeLine{01854\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01855\ }
\DoxyCodeLine{01856\ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{01857\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_afc937f75228984d541545dc4b59613a5}{\_account\_fails}}.clear();}
\DoxyCodeLine{01858\ }
\DoxyCodeLine{01859\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a07a7c896dddfa2b6c36cf67248d3599d}{remove\_expired\_trxs}}(\ preprocess\_deadline\ )\ )}
\DoxyCodeLine{01860\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{start\_block\_result::exhausted}};}
\DoxyCodeLine{01861\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a5b19b3db1d6db7aa9a66a6a253417d7e}{remove\_expired\_blacklisted\_trxs}}(\ preprocess\_deadline\ )\ )}
\DoxyCodeLine{01862\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{start\_block\_result::exhausted}};}
\DoxyCodeLine{01863\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad44e89d30a1ce2b3abb85711d5342490}{\_subjective\_billing}}.\mbox{\hyperlink{classsysio_1_1subjective__billing_a793fb0f1fa545a9de1d117cc95f6fbdc}{remove\_expired}}(\ \mbox{\hyperlink{producer__plugin_8cpp_adff615e9fbe43b3e6443687be568cffd}{\_log}},\ chain.pending\_block\_time(),\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}(),}
\DoxyCodeLine{01864\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&]()\{\ return\ should\_interrupt\_start\_block(\ preprocess\_deadline\ );\ \}\ )\ )\ \{}
\DoxyCodeLine{01865\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{start\_block\_result::exhausted}};}
\DoxyCodeLine{01866\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01867\ }
\DoxyCodeLine{01868\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ limit\ execution\ of\ pending\ incoming\ to\ once\ per\ block}}
\DoxyCodeLine{01869\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ pending\_incoming\_process\_limit\ =\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}{\_unapplied\_transactions}}.\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue_a2eda9b632f768fb2c1b76133b8d792f0}{incoming\_size}}();}
\DoxyCodeLine{01870\ }
\DoxyCodeLine{01871\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a7de28b674848c3de56118793193d3b49}{process\_unapplied\_trxs}}(\ preprocess\_deadline\ )\ )}
\DoxyCodeLine{01872\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{start\_block\_result::exhausted}};}
\DoxyCodeLine{01873\ }
\DoxyCodeLine{01874\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}{\_pending\_block\_mode}}\ ==\ \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475afd75fc8d5de6f56947b1afc9e44ddb5f}{pending\_block\_mode::producing}})\ \{}
\DoxyCodeLine{01875\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ scheduled\_trx\_deadline\ =\ preprocess\_deadline;}
\DoxyCodeLine{01876\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab2a5cd86b46f7cac1891871a40cec1c1}{\_max\_scheduled\_transaction\_time\_per\_block\_ms}}\ >=\ 0)\ \{}
\DoxyCodeLine{01877\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ scheduled\_trx\_deadline\ =\ std::min<fc::time\_point>(}
\DoxyCodeLine{01878\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ scheduled\_trx\_deadline,}
\DoxyCodeLine{01879\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}()\ +\ \mbox{\hyperlink{namespacefc_a76ae235ec7e9b8862e70740058d7eb1b}{fc::milliseconds}}(\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab2a5cd86b46f7cac1891871a40cec1c1}{\_max\_scheduled\_transaction\_time\_per\_block\_ms}})}
\DoxyCodeLine{01880\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{01881\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01882\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ may\ exhaust\ scheduled\_trx\_deadline\ but\ not\ preprocess\_deadline,\ exhausted\ preprocess\_deadline\ checked\ below}}
\DoxyCodeLine{01883\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_af3690d3cd99a828ada60fcf3decad39b}{process\_scheduled\_and\_incoming\_trxs}}(\ scheduled\_trx\_deadline,\ pending\_incoming\_process\_limit\ );}
\DoxyCodeLine{01884\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01885\ }
\DoxyCodeLine{01886\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{namespaceappbase_a99374dc23934f008a09f2f79be9eae40}{app}}().is\_quiting()\ )\ \textcolor{comment}{//\ db\ guard\ exception\ above\ in\ LOG\_AND\_DROP\ could\ have\ called\ app().quit()}}
\DoxyCodeLine{01887\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba26934eb377001f66e37289a5c93fe284}{start\_block\_result::failed}};}
\DoxyCodeLine{01888\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a104ad57b8b9c3c8e53a680e09318ea5d}{should\_interrupt\_start\_block}}(\ preprocess\_deadline\ )\ ||\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ab05cac0064c3afeb991b8e91cb76631e}{block\_is\_exhausted}}()\ )\ \{}
\DoxyCodeLine{01889\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{start\_block\_result::exhausted}};}
\DoxyCodeLine{01890\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01891\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a708986322e03db824e4bad41ca213260}{process\_incoming\_trxs}}(\ preprocess\_deadline,\ pending\_incoming\_process\_limit\ )\ )}
\DoxyCodeLine{01892\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bbae349d735a5fa5b10d9770031e669c477}{start\_block\_result::exhausted}};}
\DoxyCodeLine{01893\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba9b1751bd331d17d4f91c2c61c1d43560}{start\_block\_result::succeeded}};}
\DoxyCodeLine{01894\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01895\ }
\DoxyCodeLine{01896\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_1_1chain_a646553a6af0a730cdb19b9c6023d5132}{guard\_exception}}\&\ e\ )\ \{}
\DoxyCodeLine{01897\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain__plugin_a6042f76be687a9b82332f28e1dc9a3a4}{chain\_plugin::handle\_guard\_exception}}(e);}
\DoxyCodeLine{01898\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba26934eb377001f66e37289a5c93fe284}{start\_block\_result::failed}};}
\DoxyCodeLine{01899\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\ std::bad\_alloc\&\ )\ \{}
\DoxyCodeLine{01900\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain__plugin_a9fb4d31b915fb0d2ef5392a4284b67e6}{chain\_plugin::handle\_bad\_alloc}}();}
\DoxyCodeLine{01901\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\ boost::interprocess::bad\_alloc\&\ )\ \{}
\DoxyCodeLine{01902\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain__plugin_a047022d2589d7624114c1e458b111ea7}{chain\_plugin::handle\_db\_exhaustion}}();}
\DoxyCodeLine{01903\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01904\ }
\DoxyCodeLine{01905\ \ \ \ \}}
\DoxyCodeLine{01906\ }
\DoxyCodeLine{01907\ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_a1cd329e031b1d57746ec38a44a2181bba26934eb377001f66e37289a5c93fe284}{start\_block\_result::failed}};}
\DoxyCodeLine{01908\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classsysio_1_1producer__plugin__impl_a7db63178eda240d671fc6ae4e46bf01e_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1producer__plugin__impl_a7db63178eda240d671fc6ae4e46bf01e_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\Hypertarget{classsysio_1_1producer__plugin__impl_a2c7bfb29624a2f689de1ee762eba165a}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_accepted\_block\_connection@{\_accepted\_block\_connection}}
\index{\_accepted\_block\_connection@{\_accepted\_block\_connection}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_accepted\_block\_connection}{\_accepted\_block\_connection}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a2c7bfb29624a2f689de1ee762eba165a} 
std\+::optional$<$scoped\+\_\+connection$>$ sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+accepted\+\_\+block\+\_\+connection}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00355}{355}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_a7148be5020530e05d145c8ffef8569f4}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_accepted\_block\_header\_connection@{\_accepted\_block\_header\_connection}}
\index{\_accepted\_block\_header\_connection@{\_accepted\_block\_header\_connection}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_accepted\_block\_header\_connection}{\_accepted\_block\_header\_connection}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a7148be5020530e05d145c8ffef8569f4} 
std\+::optional$<$scoped\+\_\+connection$>$ sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+accepted\+\_\+block\+\_\+header\+\_\+connection}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00356}{356}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_afc937f75228984d541545dc4b59613a5}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_account\_fails@{\_account\_fails}}
\index{\_account\_fails@{\_account\_fails}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_account\_fails}{\_account\_fails}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_afc937f75228984d541545dc4b59613a5} 
account\+\_\+failures sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+account\+\_\+fails \{\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad44e89d30a1ce2b3abb85711d5342490}{\+\_\+subjective\+\_\+billing}}\}}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00353}{353}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00353\ \{\mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad44e89d30a1ce2b3abb85711d5342490}{\_subjective\_billing}}\};}

\end{DoxyCode}
\Hypertarget{classsysio_1_1producer__plugin__impl_a2146e64be3edae1b16c270ee9e0a54e5}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_blacklisted\_transactions@{\_blacklisted\_transactions}}
\index{\_blacklisted\_transactions@{\_blacklisted\_transactions}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_blacklisted\_transactions}{\_blacklisted\_transactions}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a2146e64be3edae1b16c270ee9e0a54e5} 
\mbox{\hyperlink{namespacesysio_a3da8a6a29b9db34a4eb5170317d0b5a5}{transaction\+\_\+id\+\_\+with\+\_\+expiry\+\_\+index}} sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+blacklisted\+\_\+transactions}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00350}{350}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_a12f98c27eeff1e09ab398e9f0f158583}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_disable\_persist\_until\_expired@{\_disable\_persist\_until\_expired}}
\index{\_disable\_persist\_until\_expired@{\_disable\_persist\_until\_expired}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_disable\_persist\_until\_expired}{\_disable\_persist\_until\_expired}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a12f98c27eeff1e09ab398e9f0f158583} 
bool sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+disable\+\_\+persist\+\_\+until\+\_\+expired = false}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00334}{334}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_ae781cd364031e6a3b5f890921f592eb6}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_disable\_subjective\_api\_billing@{\_disable\_subjective\_api\_billing}}
\index{\_disable\_subjective\_api\_billing@{\_disable\_subjective\_api\_billing}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_disable\_subjective\_api\_billing}{\_disable\_subjective\_api\_billing}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_ae781cd364031e6a3b5f890921f592eb6} 
bool sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+disable\+\_\+subjective\+\_\+api\+\_\+billing = true}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00336}{336}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_a2cc24baff7f0994410c60383929d25e8}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_disable\_subjective\_p2p\_billing@{\_disable\_subjective\_p2p\_billing}}
\index{\_disable\_subjective\_p2p\_billing@{\_disable\_subjective\_p2p\_billing}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_disable\_subjective\_p2p\_billing}{\_disable\_subjective\_p2p\_billing}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a2cc24baff7f0994410c60383929d25e8} 
bool sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+disable\+\_\+subjective\+\_\+p2p\+\_\+billing = true}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00335}{335}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_a5d959db90832bddf418fff0e29171637}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_incoming\_block\_sync\_provider@{\_incoming\_block\_sync\_provider}}
\index{\_incoming\_block\_sync\_provider@{\_incoming\_block\_sync\_provider}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_incoming\_block\_sync\_provider}{\_incoming\_block\_sync\_provider}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a5d959db90832bddf418fff0e29171637} 
incoming\+::methods\+::block\+\_\+sync\+::method\+\_\+type\+::handle sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+incoming\+\_\+block\+\_\+sync\+\_\+provider}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00347}{347}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_a67c0fb2d1c7d16bd65cd86788d74eb0a}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_incoming\_defer\_ratio@{\_incoming\_defer\_ratio}}
\index{\_incoming\_defer\_ratio@{\_incoming\_defer\_ratio}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_incoming\_defer\_ratio}{\_incoming\_defer\_ratio}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a67c0fb2d1c7d16bd65cd86788d74eb0a} 
double sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+incoming\+\_\+defer\+\_\+ratio = 1.\+0}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00372}{372}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_a3c8802a7ba5739234e2d4050a1a1c2e8}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_incoming\_transaction\_async\_provider@{\_incoming\_transaction\_async\_provider}}
\index{\_incoming\_transaction\_async\_provider@{\_incoming\_transaction\_async\_provider}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_incoming\_transaction\_async\_provider}{\_incoming\_transaction\_async\_provider}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a3c8802a7ba5739234e2d4050a1a1c2e8} 
incoming\+::methods\+::transaction\+\_\+async\+::method\+\_\+type\+::handle sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+incoming\+\_\+transaction\+\_\+async\+\_\+provider}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00348}{348}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_a2be6b35c5dbf8e84124b605f40551557}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_irreversible\_block\_connection@{\_irreversible\_block\_connection}}
\index{\_irreversible\_block\_connection@{\_irreversible\_block\_connection}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_irreversible\_block\_connection}{\_irreversible\_block\_connection}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a2be6b35c5dbf8e84124b605f40551557} 
std\+::optional$<$scoped\+\_\+connection$>$ sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+irreversible\+\_\+block\+\_\+connection}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00357}{357}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_a69e4926fe7ce9b13512a6292fe20e4d4}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_irreversible\_block\_time@{\_irreversible\_block\_time}}
\index{\_irreversible\_block\_time@{\_irreversible\_block\_time}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_irreversible\_block\_time}{\_irreversible\_block\_time}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a69e4926fe7ce9b13512a6292fe20e4d4} 
\mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+irreversible\+\_\+block\+\_\+time}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00337}{337}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_a26b02d1ebd098ea1ba2399c3c4a47046}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_kiod\_provider\_timeout\_us@{\_kiod\_provider\_timeout\_us}}
\index{\_kiod\_provider\_timeout\_us@{\_kiod\_provider\_timeout\_us}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_kiod\_provider\_timeout\_us}{\_kiod\_provider\_timeout\_us}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a26b02d1ebd098ea1ba2399c3c4a47046} 
\mbox{\hyperlink{classfc_1_1microseconds}{fc\+::microseconds}} sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+kiod\+\_\+provider\+\_\+timeout\+\_\+us}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00338}{338}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_aa84d793aebf28b348def7afd484a4f1a}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_last\_block\_time\_offset\_us@{\_last\_block\_time\_offset\_us}}
\index{\_last\_block\_time\_offset\_us@{\_last\_block\_time\_offset\_us}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_last\_block\_time\_offset\_us}{\_last\_block\_time\_offset\_us}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_aa84d793aebf28b348def7afd484a4f1a} 
\mbox{\hyperlink{stdint_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\+\_\+t}} sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+last\+\_\+block\+\_\+time\+\_\+offset\+\_\+us = 0}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00330}{330}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_ad027592bd832fc428fc2056775487276}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_max\_block\_cpu\_usage\_threshold\_us@{\_max\_block\_cpu\_usage\_threshold\_us}}
\index{\_max\_block\_cpu\_usage\_threshold\_us@{\_max\_block\_cpu\_usage\_threshold\_us}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_max\_block\_cpu\_usage\_threshold\_us}{\_max\_block\_cpu\_usage\_threshold\_us}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_ad027592bd832fc428fc2056775487276} 
\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+max\+\_\+block\+\_\+cpu\+\_\+usage\+\_\+threshold\+\_\+us = 0}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00331}{331}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_ad2cccb2f7374b5446a61dc8b7610d4d6}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_max\_block\_net\_usage\_threshold\_bytes@{\_max\_block\_net\_usage\_threshold\_bytes}}
\index{\_max\_block\_net\_usage\_threshold\_bytes@{\_max\_block\_net\_usage\_threshold\_bytes}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_max\_block\_net\_usage\_threshold\_bytes}{\_max\_block\_net\_usage\_threshold\_bytes}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_ad2cccb2f7374b5446a61dc8b7610d4d6} 
\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+max\+\_\+block\+\_\+net\+\_\+usage\+\_\+threshold\+\_\+bytes = 0}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00332}{332}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_adc02b8bbfdf1e85f4bf2132db2c7510f}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_max\_irreversible\_block\_age\_us@{\_max\_irreversible\_block\_age\_us}}
\index{\_max\_irreversible\_block\_age\_us@{\_max\_irreversible\_block\_age\_us}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_max\_irreversible\_block\_age\_us}{\_max\_irreversible\_block\_age\_us}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_adc02b8bbfdf1e85f4bf2132db2c7510f} 
\mbox{\hyperlink{classfc_1_1microseconds}{fc\+::microseconds}} sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+max\+\_\+irreversible\+\_\+block\+\_\+age\+\_\+us}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00328}{328}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_ab2a5cd86b46f7cac1891871a40cec1c1}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_max\_scheduled\_transaction\_time\_per\_block\_ms@{\_max\_scheduled\_transaction\_time\_per\_block\_ms}}
\index{\_max\_scheduled\_transaction\_time\_per\_block\_ms@{\_max\_scheduled\_transaction\_time\_per\_block\_ms}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_max\_scheduled\_transaction\_time\_per\_block\_ms}{\_max\_scheduled\_transaction\_time\_per\_block\_ms}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_ab2a5cd86b46f7cac1891871a40cec1c1} 
\mbox{\hyperlink{stdint_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\+\_\+t}} sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+max\+\_\+scheduled\+\_\+transaction\+\_\+time\+\_\+per\+\_\+block\+\_\+ms = 0}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00333}{333}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_abfe8262ebb5c1493c44e198ad3cd79ca}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_max\_transaction\_time\_ms@{\_max\_transaction\_time\_ms}}
\index{\_max\_transaction\_time\_ms@{\_max\_transaction\_time\_ms}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_max\_transaction\_time\_ms}{\_max\_transaction\_time\_ms}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_abfe8262ebb5c1493c44e198ad3cd79ca} 
std\+::atomic$<$\mbox{\hyperlink{stdint_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\+\_\+t}}$>$ sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+max\+\_\+transaction\+\_\+time\+\_\+ms}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00326}{326}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_ab33cc5646289fa807b2344628d1f156e}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_options@{\_options}}
\index{\_options@{\_options}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_options}{\_options}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_ab33cc5646289fa807b2344628d1f156e} 
boost\+::program\+\_\+options\+::variables\+\_\+map sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+options}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00312}{312}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_a9992f102be5757c43dcdaedf97fb7c37}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_pause\_production@{\_pause\_production}}
\index{\_pause\_production@{\_pause\_production}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_pause\_production}{\_pause\_production}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a9992f102be5757c43dcdaedf97fb7c37} 
bool sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+pause\+\_\+production = false}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00314}{314}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_pending\_block\_mode@{\_pending\_block\_mode}}
\index{\_pending\_block\_mode@{\_pending\_block\_mode}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_pending\_block\_mode}{\_pending\_block\_mode}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_ae9554f576751ba3ac762b0f0c85fa5f2} 
\mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475}{pending\+\_\+block\+\_\+mode}} sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+pending\+\_\+block\+\_\+mode = \mbox{\hyperlink{namespacesysio_acd1c637e1a22040dbf666b0301cbc475aa25b9b4361a3bd215c739cf4f9cf2e4a}{pending\+\_\+block\+\_\+mode\+::speculating}}}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00322}{322}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_ac8be366b39b451f59a5b2f2e4162f6cd}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_pending\_snapshot\_index@{\_pending\_snapshot\_index}}
\index{\_pending\_snapshot\_index@{\_pending\_snapshot\_index}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_pending\_snapshot\_index}{\_pending\_snapshot\_index}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_ac8be366b39b451f59a5b2f2e4162f6cd} 
\mbox{\hyperlink{namespacesysio_a141379c7defda83a80367f716ab4f78b}{pending\+\_\+snapshot\+\_\+index}} sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+pending\+\_\+snapshot\+\_\+index}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00351}{351}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_a8e8b31bfedc54a91987109a93d906117}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_produce\_time\_offset\_us@{\_produce\_time\_offset\_us}}
\index{\_produce\_time\_offset\_us@{\_produce\_time\_offset\_us}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_produce\_time\_offset\_us}{\_produce\_time\_offset\_us}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a8e8b31bfedc54a91987109a93d906117} 
\mbox{\hyperlink{stdint_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\+\_\+t}} sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+produce\+\_\+time\+\_\+offset\+\_\+us = 0}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00329}{329}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_a56a2e3bfd17e3a5e6637d2c4d39d98e9}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_producer\_watermarks@{\_producer\_watermarks}}
\index{\_producer\_watermarks@{\_producer\_watermarks}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_producer\_watermarks}{\_producer\_watermarks}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a56a2e3bfd17e3a5e6637d2c4d39d98e9} 
std\+::map$<$\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{chain\+::account\+\_\+name}}, \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_aef5ba3d2caaa3a9800a0cc0df02d03f7}{producer\+\_\+watermark}}$>$ sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+producer\+\_\+watermarks}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00321}{321}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_af2f69a8ae164570dd17a1f970ae611eb}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_producers@{\_producers}}
\index{\_producers@{\_producers}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_producers}{\_producers}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_af2f69a8ae164570dd17a1f970ae611eb} 
std\+::set$<$\mbox{\hyperlink{namespacesysio_1_1chain_ac32ce8e75243f2b3f76aff0c1984f11b}{chain\+::account\+\_\+name}}$>$ sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+producers}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00318}{318}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_a26f51591effdca88f46913aa23308695}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_production\_enabled@{\_production\_enabled}}
\index{\_production\_enabled@{\_production\_enabled}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_production\_enabled}{\_production\_enabled}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a26f51591effdca88f46913aa23308695} 
bool sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+production\+\_\+enabled = false}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00313}{313}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_a369d1c5202c442237cb333c850f1634e}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_protocol\_features\_signaled@{\_protocol\_features\_signaled}}
\index{\_protocol\_features\_signaled@{\_protocol\_features\_signaled}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_protocol\_features\_signaled}{\_protocol\_features\_signaled}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a369d1c5202c442237cb333c850f1634e} 
bool sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+protocol\+\_\+features\+\_\+signaled = false}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00341}{341}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_ab8c4a74665eea98fed5866ee31b25d5a}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_protocol\_features\_to\_activate@{\_protocol\_features\_to\_activate}}
\index{\_protocol\_features\_to\_activate@{\_protocol\_features\_to\_activate}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_protocol\_features\_to\_activate}{\_protocol\_features\_to\_activate}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_ab8c4a74665eea98fed5866ee31b25d5a} 
std\+::vector$<$\mbox{\hyperlink{namespacesysio_1_1chain_a357fd9478475457e5bb386a3143079b6}{chain\+::digest\+\_\+type}}$>$ sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+protocol\+\_\+features\+\_\+to\+\_\+activate}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00340}{340}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_aad323427fd3fbc7d0decad90b324f44f}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_received\_block@{\_received\_block}}
\index{\_received\_block@{\_received\_block}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_received\_block}{\_received\_block}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_aad323427fd3fbc7d0decad90b324f44f} 
std\+::atomic$<$bool$>$ sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+received\+\_\+block \{false\}}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00327}{327}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00327\ \{\textcolor{keyword}{false}\};\ \textcolor{comment}{//\ modified\ by\ net\_plugin\ thread\ pool\ and\ app\ thread}}

\end{DoxyCode}
\Hypertarget{classsysio_1_1producer__plugin__impl_ad9173229bf0922a5bd51150e1a95c58f}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_signature\_providers@{\_signature\_providers}}
\index{\_signature\_providers@{\_signature\_providers}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_signature\_providers}{\_signature\_providers}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_ad9173229bf0922a5bd51150e1a95c58f} 
std\+::map$<$\mbox{\hyperlink{namespacesysio_1_1chain_a0628a11f388cd2e43b1ccc1260a1042f}{chain\+::public\+\_\+key\+\_\+type}}, \mbox{\hyperlink{classsysio_1_1producer__plugin__impl_ad426992f015c5b8232753868f5edb366}{signature\+\_\+provider\+\_\+type}}$>$ sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+signature\+\_\+providers}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00317}{317}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_aa3d9b96f6a6642c56f48dcd7919f1bee}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_snapshots\_dir@{\_snapshots\_dir}}
\index{\_snapshots\_dir@{\_snapshots\_dir}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_snapshots\_dir}{\_snapshots\_dir}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_aa3d9b96f6a6642c56f48dcd7919f1bee} 
bfs\+::path sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+snapshots\+\_\+dir}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00375}{375}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_ad44e89d30a1ce2b3abb85711d5342490}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_subjective\_billing@{\_subjective\_billing}}
\index{\_subjective\_billing@{\_subjective\_billing}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_subjective\_billing}{\_subjective\_billing}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_ad44e89d30a1ce2b3abb85711d5342490} 
\mbox{\hyperlink{classsysio_1_1subjective__billing}{subjective\+\_\+billing}} sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+subjective\+\_\+billing}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00352}{352}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_ac255e968852c91eee1583e4989df4173}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_thread\_pool@{\_thread\_pool}}
\index{\_thread\_pool@{\_thread\_pool}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_thread\_pool}{\_thread\_pool}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_ac255e968852c91eee1583e4989df4173} 
std\+::optional$<$\mbox{\hyperlink{classsysio_1_1chain_1_1named__thread__pool}{named\+\_\+thread\+\_\+pool}}$>$ sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+thread\+\_\+pool}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00324}{324}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_ab031fc8338d68f086c7d183e7512c9ea}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_timer@{\_timer}}
\index{\_timer@{\_timer}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_timer}{\_timer}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_ab031fc8338d68f086c7d183e7512c9ea} 
boost\+::asio\+::deadline\+\_\+timer sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+timer}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00319}{319}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_a21693978cec3fac7ce203531e88c7d5a}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_timer\_corelation\_id@{\_timer\_corelation\_id}}
\index{\_timer\_corelation\_id@{\_timer\_corelation\_id}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_timer\_corelation\_id}{\_timer\_corelation\_id}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a21693978cec3fac7ce203531e88c7d5a} 
\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+timer\+\_\+corelation\+\_\+id = 0}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00369}{369}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_a6d12d42f012fe9fd7d0e533952498cab}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_transaction\_ack\_channel@{\_transaction\_ack\_channel}}
\index{\_transaction\_ack\_channel@{\_transaction\_ack\_channel}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_transaction\_ack\_channel}{\_transaction\_ack\_channel}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_a6d12d42f012fe9fd7d0e533952498cab} 
\mbox{\hyperlink{structappbase_1_1channel__decl_aa309e47583ff1b9d37d1d1eef8d00c33}{compat\+::channels\+::transaction\+\_\+ack\+::channel\+\_\+type}}\& sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+transaction\+\_\+ack\+\_\+channel}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00345}{345}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!\_unapplied\_transactions@{\_unapplied\_transactions}}
\index{\_unapplied\_transactions@{\_unapplied\_transactions}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{\_unapplied\_transactions}{\_unapplied\_transactions}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_ab9ac82b1ebcd89332e08e4246fd0a973} 
\mbox{\hyperlink{classsysio_1_1chain_1_1unapplied__transaction__queue}{unapplied\+\_\+transaction\+\_\+queue}} sysio\+::producer\+\_\+plugin\+\_\+impl\+::\+\_\+unapplied\+\_\+transactions}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00323}{323}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4}\index{sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}!chain\_plug@{chain\_plug}}
\index{chain\_plug@{chain\_plug}!sysio::producer\_plugin\_impl@{sysio::producer\_plugin\_impl}}
\doxysubsubsection{\texorpdfstring{chain\_plug}{chain\_plug}}
{\footnotesize\ttfamily \label{classsysio_1_1producer__plugin__impl_ad6dd1910645f0e41a009f59fdfc09cb4} 
\mbox{\hyperlink{classsysio_1_1chain__plugin}{chain\+\_\+plugin}}\texorpdfstring{$\ast$}{*} sysio\+::producer\+\_\+plugin\+\_\+impl\+::chain\+\_\+plug = nullptr}



Definition at line \mbox{\hyperlink{producer__plugin_8cpp_source_l00343}{343}} of file \mbox{\hyperlink{producer__plugin_8cpp_source}{producer\+\_\+plugin.\+cpp}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
plugins/producer\+\_\+plugin/\mbox{\hyperlink{producer__plugin_8cpp}{producer\+\_\+plugin.\+cpp}}\end{DoxyCompactItemize}
