\doxysection{approve.\+py}
\hypertarget{approve_8py_source}{}\label{approve_8py_source}\index{libraries/sys-\/vm/external/Catch2/scripts/approve.py@{libraries/sys-\/vm/external/Catch2/scripts/approve.py}}
\mbox{\hyperlink{approve_8py}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00001}\mbox{\hyperlink{namespaceapprove}{00001}}\ \textcolor{comment}{\#!/usr/bin/env\ python}}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00003}00003\ \textcolor{keyword}{from}\ \ \_\_future\_\_\ \textcolor{keyword}{import}\ \ print\_function}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00005}00005\ \textcolor{keyword}{import}\ os}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00006}00006\ \textcolor{keyword}{import}\ sys}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00007}00007\ \textcolor{keyword}{import}\ shutil}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00008}00008\ \textcolor{keyword}{import}\ glob}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00009}00009\ \textcolor{keyword}{from}\ scriptCommon\ \textcolor{keyword}{import}\ catchPath}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00011}\mbox{\hyperlink{namespaceapprove_acbe52ee7a646c2de1c975906e39af81b}{00011}}\ rootPath\ =\ os.path.join(\ catchPath,\ \textcolor{stringliteral}{'projects/SelfTest/Baselines'}\ )}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00012}00012\ }
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00013}00013\ \textcolor{keywordflow}{if}\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a7360b55975153b822efc5217b7734e6a}{len}}(sys.argv)\ >\ 1:}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00014}\mbox{\hyperlink{namespaceapprove_ac74141eb5bed2ad90470ab44a35d0a4f}{00014}}\ \ \ \ \ files\ =\ [os.path.join(\ rootPath,\ f\ )\ \textcolor{keywordflow}{for}\ f\ \textcolor{keywordflow}{in}\ sys.argv[1:]]}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00015}00015\ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00016}00016\ \ \ \ \ files\ =\ glob.glob(\ os.path.join(\ rootPath,\ \textcolor{stringliteral}{"{}*.unapproved.txt"{}}\ )\ )}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00019}\mbox{\hyperlink{namespaceapprove_ad70a08a48c2f7a3fb39757a857a1cb2b}{00019}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespaceapprove_ad70a08a48c2f7a3fb39757a857a1cb2b}{approveFile}}(\ approvedFile,\ unapprovedFile\ ):}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00020}00020\ \ \ \ \ justFilename\ =\ unapprovedFile[\mbox{\hyperlink{yubihsm__pkcs11_8c_a7360b55975153b822efc5217b7734e6a}{len}}(rootPath)+1:]}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00021}00021\ \ \ \ \ \textcolor{keywordflow}{if}\ os.path.exists(\ unapprovedFile\ ):}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00022}00022\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ os.path.exists(\ approvedFile\ ):}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00023}00023\ \ \ \ \ \ \ \ \ \ \ \ \ os.remove(\ approvedFile\ )}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00024}00024\ \ \ \ \ \ \ \ \ os.rename(\ unapprovedFile,\ approvedFile\ )}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00025}00025\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{210-_evt-_event_listeners_8cpp_a91b9457094088a57b7ba14d485a8771e}{print}}(\ \textcolor{stringliteral}{"{}approved\ "{}}\ +\ justFilename\ )}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00026}00026\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00027}00027\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{210-_evt-_event_listeners_8cpp_a91b9457094088a57b7ba14d485a8771e}{print}}(\ \textcolor{stringliteral}{"{}approval\ file\ "{}}\ +\ justFilename\ +\ \textcolor{stringliteral}{"{}\ does\ not\ exist"{}}\ )}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00028}00028\ }
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00029}00029\ \textcolor{keywordflow}{if}\ files:}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00030}00030\ \ \ \ \ \textcolor{keywordflow}{for}\ unapprovedFile\ \textcolor{keywordflow}{in}\ files:}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00031}00031\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceapprove_ad70a08a48c2f7a3fb39757a857a1cb2b}{approveFile}}(\ unapprovedFile.replace(\ \textcolor{stringliteral}{"{}unapproved.txt"{}},\ \textcolor{stringliteral}{"{}approved.txt"{}}\ ),\ unapprovedFile\ )}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00032}00032\ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{approve_8py_source_l00033}00033\ \ \ \ \ \mbox{\hyperlink{210-_evt-_event_listeners_8cpp_a91b9457094088a57b7ba14d485a8771e}{print}}(\ \textcolor{stringliteral}{"{}no\ files\ to\ approve"{}}\ )}

\end{DoxyCode}
