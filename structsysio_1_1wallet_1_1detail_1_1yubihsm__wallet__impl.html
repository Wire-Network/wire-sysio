<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wire Sysio: sysio::wallet::detail::yubihsm_wallet_impl Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Wire Sysio<span id="projectnumber">&#160;Wire Sysion 1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">sysio::wallet::detail::yubihsm_wallet_impl Struct Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for sysio::wallet::detail::yubihsm_wallet_impl:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl__coll__graph.png" border="0" usemap="#asysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_coll__map" alt="Collaboration graph"/></div>
<map name="asysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_coll__map" id="asysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_coll__map">
<area shape="rect" title=" " alt="" coords="451,266,601,306"/>
<area shape="rect" href="structyh__connector.html" title=" " alt="" coords="191,137,290,163"/>
<area shape="poly" title=" " alt="" coords="291,167,428,228,492,263,489,268,426,233,289,172"/>
<area shape="rect" href="structstate.html" title=" " alt="" coords="501,75,551,100"/>
<area shape="poly" title=" " alt="" coords="304,134,500,90,501,95,306,139"/>
<area shape="rect" title=" " alt="" coords="13,137,67,163"/>
<area shape="poly" title=" " alt="" coords="83,148,190,148,190,153,83,153"/>
<area shape="poly" title=" " alt="" coords="81,133,98,128,219,100,342,86,429,83,501,84,500,89,429,88,342,91,220,105,99,133,82,138"/>
<area shape="rect" href="structyh__session.html" title=" " alt="" coords="197,323,284,348"/>
<area shape="poly" title=" " alt="" coords="57,175,99,243,129,279,164,309,197,325,195,329,161,314,125,282,95,246,52,178"/>
<area shape="poly" title=" " alt="" coords="500,112,467,134,428,152,392,159,356,162,290,160,290,154,356,157,392,154,426,147,465,130,497,108"/>
<area shape="rect" title=" " alt="" coords="218,5,263,31"/>
<area shape="poly" title=" " alt="" coords="279,20,349,31,428,49,502,75,500,80,426,54,348,37,278,26"/>
<area shape="poly" title=" " alt="" coords="299,325,427,304,450,299,451,305,427,309,300,330"/>
<area shape="rect" href="struct_scp__ctx.html" title=" " alt="" coords="5,323,75,348"/>
<area shape="poly" title=" " alt="" coords="90,333,196,333,196,338,90,338"/>
<area shape="rect" title=" " alt="" coords="214,372,267,398"/>
<area shape="poly" title=" " alt="" coords="282,376,350,361,426,337,491,305,493,309,428,342,352,366,283,381"/>
<area shape="rect" title=" " alt="" coords="163,208,318,249"/>
<area shape="poly" title=" " alt="" coords="334,245,451,269,450,274,333,250"/>
<area shape="rect" href="structyh__capabilities.html" title="Capabilities representation." alt="" coords="187,273,294,299"/>
<area shape="poly" title=" " alt="" coords="309,284,451,284,451,289,309,289"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a6da9d4e471e4e9b73f07442b04a28a8a" id="r_a6da9d4e471e4e9b73f07442b04a28a8a"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6da9d4e471e4e9b73f07442b04a28a8a">key_map_type</a> = map&lt;<a class="el" href="namespacesysio_1_1chain.html#a0628a11f388cd2e43b1ccc1260a1042f">public_key_type</a>,<a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&gt;</td></tr>
<tr class="separator:a6da9d4e471e4e9b73f07442b04a28a8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aab88a7a970733811d37fed3fb5041350" id="r_aab88a7a970733811d37fed3fb5041350"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aab88a7a970733811d37fed3fb5041350">yubihsm_wallet_impl</a> (const <a class="el" href="namespacefc.html#a0f3d84fe9e7adcd2d1e0bb7b60b49aa0">string</a> &amp;ep, const <a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> ak)</td></tr>
<tr class="separator:aab88a7a970733811d37fed3fb5041350"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af535b22a76cac37f33ef43715865648c" id="r_af535b22a76cac37f33ef43715865648c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af535b22a76cac37f33ef43715865648c">~yubihsm_wallet_impl</a> ()</td></tr>
<tr class="separator:af535b22a76cac37f33ef43715865648c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ef2e33eace8bf02ac51cfbe036c4840" id="r_a7ef2e33eace8bf02ac51cfbe036c4840"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7ef2e33eace8bf02ac51cfbe036c4840">is_locked</a> () const</td></tr>
<tr class="separator:a7ef2e33eace8bf02ac51cfbe036c4840"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbeac5d7c3d1ad9d3cb6c37cc996d8c5" id="r_adbeac5d7c3d1ad9d3cb6c37cc996d8c5"><td class="memItemLeft" align="right" valign="top">key_map_type::iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adbeac5d7c3d1ad9d3cb6c37cc996d8c5">populate_key_map_with_keyid</a> (const <a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> <a class="el" href="yubihsm__pkcs11_8c.html#ada12860f8f9f5f3cac5b179ef352434c">key_id</a>)</td></tr>
<tr class="separator:adbeac5d7c3d1ad9d3cb6c37cc996d8c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00ee0ac7ac4a819d0b8755bf4f442263" id="r_a00ee0ac7ac4a819d0b8755bf4f442263"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a00ee0ac7ac4a819d0b8755bf4f442263">unlock</a> (const <a class="el" href="namespacefc.html#a0f3d84fe9e7adcd2d1e0bb7b60b49aa0">string</a> &amp;password)</td></tr>
<tr class="separator:a00ee0ac7ac4a819d0b8755bf4f442263"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5920ace754a2d851bdb11322372b849c" id="r_a5920ace754a2d851bdb11322372b849c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5920ace754a2d851bdb11322372b849c">lock</a> ()</td></tr>
<tr class="separator:a5920ace754a2d851bdb11322372b849c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6412f92a0ad381f2370582372a5b6082" id="r_a6412f92a0ad381f2370582372a5b6082"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6412f92a0ad381f2370582372a5b6082">prime_keepalive_timer</a> ()</td></tr>
<tr class="separator:a6412f92a0ad381f2370582372a5b6082"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8987016445813c0391f04894e9bdb002" id="r_a8987016445813c0391f04894e9bdb002"><td class="memItemLeft" align="right" valign="top">std::optional&lt; <a class="el" href="namespacesysio_1_1chain.html#af141a69eb789b86fa0eb93c2d263f0df">signature_type</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8987016445813c0391f04894e9bdb002">try_sign_digest</a> (const <a class="el" href="namespacesysio_1_1chain.html#a357fd9478475457e5bb386a3143079b6">digest_type</a> d, const <a class="el" href="namespacesysio_1_1chain.html#a0628a11f388cd2e43b1ccc1260a1042f">public_key_type</a> <a class="el" href="classfc_1_1crypto_1_1r1_1_1public__key.html">public_key</a>)</td></tr>
<tr class="separator:a8987016445813c0391f04894e9bdb002"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6266bcd9001ddbb02101bea6088f299b" id="r_a6266bcd9001ddbb02101bea6088f299b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacesysio_1_1chain.html#a0628a11f388cd2e43b1ccc1260a1042f">public_key_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6266bcd9001ddbb02101bea6088f299b">create</a> ()</td></tr>
<tr class="separator:a6266bcd9001ddbb02101bea6088f299b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a3fc0c601d7e7a46bc3fa2cb24173bfd0" id="r_a3fc0c601d7e7a46bc3fa2cb24173bfd0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structyh__connector.html">yh_connector</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3fc0c601d7e7a46bc3fa2cb24173bfd0">connector</a> = nullptr</td></tr>
<tr class="separator:a3fc0c601d7e7a46bc3fa2cb24173bfd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a404062c94817a821f452eb9a58237602" id="r_a404062c94817a821f452eb9a58237602"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structyh__session.html">yh_session</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a404062c94817a821f452eb9a58237602">session</a> = nullptr</td></tr>
<tr class="separator:a404062c94817a821f452eb9a58237602"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84c5a15f3ed4be1039139f262afe9902" id="r_a84c5a15f3ed4be1039139f262afe9902"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacefc.html#a0f3d84fe9e7adcd2d1e0bb7b60b49aa0">string</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a84c5a15f3ed4be1039139f262afe9902">endpoint</a></td></tr>
<tr class="separator:a84c5a15f3ed4be1039139f262afe9902"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a302ef005c4374995ad2f38dae8c52660" id="r_a302ef005c4374995ad2f38dae8c52660"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a302ef005c4374995ad2f38dae8c52660">authkey</a></td></tr>
<tr class="separator:a302ef005c4374995ad2f38dae8c52660"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a948f3999fdf3a68b107c100453bf9f89" id="r_a948f3999fdf3a68b107c100453bf9f89"><td class="memItemLeft" align="right" valign="top">map&lt; <a class="el" href="namespacesysio_1_1chain.html#a0628a11f388cd2e43b1ccc1260a1042f">public_key_type</a>, <a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a948f3999fdf3a68b107c100453bf9f89">_keys</a></td></tr>
<tr class="separator:a948f3999fdf3a68b107c100453bf9f89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00ad07ae762532d33f79d0044c3eda48" id="r_a00ad07ae762532d33f79d0044c3eda48"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structyh__capabilities.html">yh_capabilities</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a00ad07ae762532d33f79d0044c3eda48">authkey_caps</a></td></tr>
<tr class="separator:a00ad07ae762532d33f79d0044c3eda48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47e114b6d65d657d7dacfd0d2e850f0b" id="r_a47e114b6d65d657d7dacfd0d2e850f0b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a47e114b6d65d657d7dacfd0d2e850f0b">authkey_domains</a></td></tr>
<tr class="separator:a47e114b6d65d657d7dacfd0d2e850f0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1180885d46905bf11d2f1501bd244cb1" id="r_a1180885d46905bf11d2f1501bd244cb1"><td class="memItemLeft" align="right" valign="top">boost::asio::steady_timer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1180885d46905bf11d2f1501bd244cb1">keepalive_timer</a> {<a class="el" href="namespaceappbase.html#a99374dc23934f008a09f2f79be9eae40">appbase::app</a>().get_io_service()}</td></tr>
<tr class="separator:a1180885d46905bf11d2f1501bd244cb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0eebf9643d30c4e0e28ff6398855a71" id="r_ac0eebf9643d30c4e0e28ff6398855a71"><td class="memItemLeft" align="right" valign="top">fc::ec_key&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac0eebf9643d30c4e0e28ff6398855a71">key</a> = EC_KEY_new_by_curve_name(NID_X9_62_prime256v1)</td></tr>
<tr class="separator:ac0eebf9643d30c4e0e28ff6398855a71"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="yubihsm__wallet_8cpp_source.html#l00020">20</a> of file <a class="el" href="yubihsm__wallet_8cpp_source.html">yubihsm_wallet.cpp</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a6da9d4e471e4e9b73f07442b04a28a8a" name="a6da9d4e471e4e9b73f07442b04a28a8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6da9d4e471e4e9b73f07442b04a28a8a">&#9670;&#160;</a></span>key_map_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="#a6da9d4e471e4e9b73f07442b04a28a8a">sysio::wallet::detail::yubihsm_wallet_impl::key_map_type</a> = map&lt;<a class="el" href="namespacesysio_1_1chain.html#a0628a11f388cd2e43b1ccc1260a1042f">public_key_type</a>,<a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="yubihsm__wallet_8cpp_source.html#l00021">21</a> of file <a class="el" href="yubihsm__wallet_8cpp_source.html">yubihsm_wallet.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aab88a7a970733811d37fed3fb5041350" name="aab88a7a970733811d37fed3fb5041350"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab88a7a970733811d37fed3fb5041350">&#9670;&#160;</a></span>yubihsm_wallet_impl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sysio::wallet::detail::yubihsm_wallet_impl::yubihsm_wallet_impl </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacefc.html#a0f3d84fe9e7adcd2d1e0bb7b60b49aa0">string</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ep</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a></td>          <td class="paramname"><span class="paramname"><em>ak</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="yubihsm__wallet_8cpp_source.html#l00023">23</a> of file <a class="el" href="yubihsm__wallet_8cpp_source.html">yubihsm_wallet.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   23</span>                                                            : <a class="code hl_variable" href="#a84c5a15f3ed4be1039139f262afe9902">endpoint</a>(ep), <a class="code hl_variable" href="#a302ef005c4374995ad2f38dae8c52660">authkey</a>(ak) {</div>
<div class="line"><span class="lineno">   24</span>      <a class="code hl_enumeration" href="yubihsm_8h.html#ae4f602d2343d01b1727dfd633169d366">yh_rc</a> <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a>;</div>
<div class="line"><span class="lineno">   25</span>      <span class="keywordflow">if</span>((<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a> = <a class="code hl_function" href="yubihsm_8c.html#a5392844a98c6220c69fe08d3dcf8f1bc">yh_init</a>()))</div>
<div class="line"><span class="lineno">   26</span>         <a class="code hl_define" href="exception_8hpp.html#a3a1fa84768603c99866fe61af96c9f36">FC_THROW</a>(<span class="stringliteral">&quot;yubihsm init failure: ${c}&quot;</span>, (<span class="stringliteral">&quot;c&quot;</span>, <a class="code hl_function" href="lib_2error_8c.html#a238eedb1e27dbff2a0ab9a3932eb3f8b">yh_strerror</a>(<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a>)));</div>
<div class="line"><span class="lineno">   27</span>   }</div>
<div class="ttc" id="aexception_8hpp_html_a3a1fa84768603c99866fe61af96c9f36"><div class="ttname"><a href="exception_8hpp.html#a3a1fa84768603c99866fe61af96c9f36">FC_THROW</a></div><div class="ttdeci">#define FC_THROW( ...)</div><div class="ttdef"><b>Definition</b> <a href="exception_8hpp_source.html#l00383">exception.hpp:383</a></div></div>
<div class="ttc" id="alib_2error_8c_html_a238eedb1e27dbff2a0ab9a3932eb3f8b"><div class="ttname"><a href="lib_2error_8c.html#a238eedb1e27dbff2a0ab9a3932eb3f8b">yh_strerror</a></div><div class="ttdeci">const char * yh_strerror(yh_rc err)</div><div class="ttdef"><b>Definition</b> <a href="lib_2error_8c_source.html#l00065">error.c:65</a></div></div>
<div class="ttc" id="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_html_a302ef005c4374995ad2f38dae8c52660"><div class="ttname"><a href="#a302ef005c4374995ad2f38dae8c52660">sysio::wallet::detail::yubihsm_wallet_impl::authkey</a></div><div class="ttdeci">uint16_t authkey</div><div class="ttdef"><b>Definition</b> <a href="yubihsm__wallet_8cpp_source.html#l00198">yubihsm_wallet.cpp:198</a></div></div>
<div class="ttc" id="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_html_a84c5a15f3ed4be1039139f262afe9902"><div class="ttname"><a href="#a84c5a15f3ed4be1039139f262afe9902">sysio::wallet::detail::yubihsm_wallet_impl::endpoint</a></div><div class="ttdeci">string endpoint</div><div class="ttdef"><b>Definition</b> <a href="yubihsm__wallet_8cpp_source.html#l00197">yubihsm_wallet.cpp:197</a></div></div>
<div class="ttc" id="ayubihsm_8c_html_a5392844a98c6220c69fe08d3dcf8f1bc"><div class="ttname"><a href="yubihsm_8c.html#a5392844a98c6220c69fe08d3dcf8f1bc">yh_init</a></div><div class="ttdeci">yh_rc yh_init(void)</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8c_source.html#l03857">yubihsm.c:3857</a></div></div>
<div class="ttc" id="ayubihsm_8h_html_ae4f602d2343d01b1727dfd633169d366"><div class="ttname"><a href="yubihsm_8h.html#ae4f602d2343d01b1727dfd633169d366">yh_rc</a></div><div class="ttdeci">yh_rc</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8h_source.html#l00170">yubihsm.h:170</a></div></div>
<div class="ttc" id="ayubihsm__pkcs11_8c_html_a97917e1d5a9fa5e8b7a4495dc9234ac7"><div class="ttname"><a href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a></div><div class="ttdeci">yh_rc rc</div><div class="ttdef"><b>Definition</b> <a href="yubihsm__pkcs11_8c_source.html#l01308">yubihsm_pkcs11.c:1308</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_aab88a7a970733811d37fed3fb5041350_cgraph.png" border="0" usemap="#astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_aab88a7a970733811d37fed3fb5041350_cgraph" alt=""/></div>
<map name="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_aab88a7a970733811d37fed3fb5041350_cgraph" id="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_aab88a7a970733811d37fed3fb5041350_cgraph">
<area shape="rect" title=" " alt="" coords="5,16,156,71"/>
<area shape="rect" href="yubihsm_8c.html#a5392844a98c6220c69fe08d3dcf8f1bc" title=" " alt="" coords="216,5,275,31"/>
<area shape="poly" title=" " alt="" coords="156,29,200,22,201,28,157,35"/>
<area shape="rect" href="lib_2error_8c.html#a238eedb1e27dbff2a0ab9a3932eb3f8b" title=" " alt="" coords="204,55,287,80"/>
<area shape="poly" title=" " alt="" coords="157,52,189,57,188,62,156,57"/>
</map>
</div>

</div>
</div>
<a id="af535b22a76cac37f33ef43715865648c" name="af535b22a76cac37f33ef43715865648c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af535b22a76cac37f33ef43715865648c">&#9670;&#160;</a></span>~yubihsm_wallet_impl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sysio::wallet::detail::yubihsm_wallet_impl::~yubihsm_wallet_impl </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>XXX Probably a race condition on timer shutdown and appbase destruction</p>

<p class="definition">Definition at line <a class="el" href="yubihsm__wallet_8cpp_source.html#l00029">29</a> of file <a class="el" href="yubihsm__wallet_8cpp_source.html">yubihsm_wallet.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   29</span>                          {</div>
<div class="line"><span class="lineno">   30</span>      <a class="code hl_function" href="#a5920ace754a2d851bdb11322372b849c">lock</a>();</div>
<div class="line"><span class="lineno">   31</span>      <a class="code hl_function" href="yubihsm_8c.html#a36e3d9a07c6689e14a9339ca1ebb7259">yh_exit</a>();</div>
<div class="line"><span class="lineno">   32</span>      <span class="comment">//bizarre, is there no way to destroy a yh_connector??</span></div>
<div class="line"><span class="lineno">   33</span> </div>
<div class="line"><span class="lineno">   35</span>   }</div>
<div class="ttc" id="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_html_a5920ace754a2d851bdb11322372b849c"><div class="ttname"><a href="#a5920ace754a2d851bdb11322372b849c">sysio::wallet::detail::yubihsm_wallet_impl::lock</a></div><div class="ttdeci">void lock()</div><div class="ttdef"><b>Definition</b> <a href="yubihsm__wallet_8cpp_source.html#l00104">yubihsm_wallet.cpp:104</a></div></div>
<div class="ttc" id="ayubihsm_8c_html_a36e3d9a07c6689e14a9339ca1ebb7259"><div class="ttname"><a href="yubihsm_8c.html#a36e3d9a07c6689e14a9339ca1ebb7259">yh_exit</a></div><div class="ttdeci">yh_rc yh_exit(void)</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8c_source.html#l03910">yubihsm.c:3910</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_af535b22a76cac37f33ef43715865648c_cgraph.png" border="0" usemap="#astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_af535b22a76cac37f33ef43715865648c_cgraph" alt=""/></div>
<map name="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_af535b22a76cac37f33ef43715865648c_cgraph" id="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_af535b22a76cac37f33ef43715865648c_cgraph">
<area shape="rect" title=" " alt="" coords="5,70,164,126"/>
<area shape="rect" href="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl.html#a5920ace754a2d851bdb11322372b849c" title=" " alt="" coords="212,48,394,89"/>
<area shape="poly" title=" " alt="" coords="164,85,196,81,196,86,165,90"/>
<area shape="rect" href="yubihsm_8c.html#a36e3d9a07c6689e14a9339ca1ebb7259" title=" " alt="" coords="271,113,334,139"/>
<area shape="poly" title=" " alt="" coords="165,106,256,118,255,123,164,111"/>
<area shape="rect" href="yubihsm_8c.html#a1a35f8ae5a739848408633a514e41b2d" title=" " alt="" coords="645,56,782,82"/>
<area shape="poly" title=" " alt="" coords="394,66,630,66,630,72,394,72"/>
<area shape="rect" href="yubihsm_8c.html#ab12d5a42d2219741bd3630b99ed1c7d2" title=" " alt="" coords="464,5,569,31"/>
<area shape="poly" title=" " alt="" coords="391,45,448,32,449,37,392,51"/>
<area shape="rect" href="yubihsm_8c.html#a61ab8dbab67b1cceb49cd306f8c3f4b1" title=" " alt="" coords="442,107,591,132"/>
<area shape="poly" title=" " alt="" coords="392,87,445,100,444,105,391,92"/>
<area shape="rect" href="lib_2error_8c.html#a238eedb1e27dbff2a0ab9a3932eb3f8b" title=" " alt="" coords="1059,107,1142,132"/>
<area shape="poly" title=" " alt="" coords="783,72,1001,98,1045,106,1044,111,1001,103,782,78"/>
<area shape="poly" title=" " alt="" coords="570,15,654,17,763,25,883,41,1002,69,1065,96,1063,101,1000,74,882,47,762,30,654,23,570,20"/>
<area shape="poly" title=" " alt="" coords="592,117,1043,117,1043,122,592,122"/>
<area shape="rect" href="yubihsm_8c.html#a4c26f003b72e800e9c934bca922a404a" title=" " alt="" coords="639,157,788,183"/>
<area shape="poly" title=" " alt="" coords="570,130,647,150,645,155,569,136"/>
<area shape="rect" href="yubihsm_8c.html#a77870209747d5ccd90f9da3aae2bdfa8" title=" " alt="" coords="836,157,1001,183"/>
<area shape="poly" title=" " alt="" coords="788,168,820,168,820,173,788,173"/>
<area shape="rect" href="yubihsm_8c.html#a0e96ea59c5f32def80843fec5a3c2142" title=" " alt="" coords="853,207,984,232"/>
<area shape="poly" title=" " alt="" coords="771,181,848,200,846,205,769,186"/>
<area shape="poly" title=" " alt="" coords="967,154,1043,133,1045,138,968,159"/>
<area shape="rect" href="yubihsm__pkcs11_8c.html#ae785d5badbf1f08b491af31f32a135a1" title=" " alt="" coords="1065,205,1136,231"/>
<area shape="poly" title=" " alt="" coords="971,181,1051,202,1049,208,970,186"/>
<area shape="rect" href="yubihsm__pkcs11_8c.html#adc4bd59a60361844aa0e852efa210105" title=" " alt="" coords="1066,156,1135,182"/>
<area shape="poly" title=" " alt="" coords="1002,167,1051,167,1051,172,1002,172"/>
<area shape="poly" title=" " alt="" coords="978,204,1000,193,1014,181,1023,169,1033,155,1047,141,1052,138,1055,142,1051,146,1037,159,1028,172,1018,185,1002,198,980,208"/>
<area shape="poly" title=" " alt="" coords="984,216,1050,216,1050,221,984,222"/>
<area shape="rect" href="rand_8c.html#a2d3d1e86f4093fbe0a1b2a7eede4cd75" title=" " alt="" coords="1049,255,1152,280"/>
<area shape="poly" title=" " alt="" coords="971,230,1036,248,1034,253,970,236"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6266bcd9001ddbb02101bea6088f299b" name="a6266bcd9001ddbb02101bea6088f299b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6266bcd9001ddbb02101bea6088f299b">&#9670;&#160;</a></span>create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacesysio_1_1chain.html#a0628a11f388cd2e43b1ccc1260a1042f">public_key_type</a> sysio::wallet::detail::yubihsm_wallet_impl::create </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="yubihsm__wallet_8cpp_source.html#l00174">174</a> of file <a class="el" href="yubihsm__wallet_8cpp_source.html">yubihsm_wallet.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  174</span>                            {</div>
<div class="line"><span class="lineno">  175</span>      <span class="keywordflow">if</span>(!<a class="code hl_function" href="yubihsm_8c.html#aba384949362ccaf19cbeae3bb046489c">yh_check_capability</a>(&amp;<a class="code hl_variable" href="#a00ad07ae762532d33f79d0044c3eda48">authkey_caps</a>, <span class="stringliteral">&quot;generate-asymmetric-key&quot;</span>))</div>
<div class="line"><span class="lineno">  176</span>         <a class="code hl_define" href="exception_8hpp.html#a7590ddac4f181b661c3eeaf5feccc6ac">FC_THROW_EXCEPTION</a>(chain::wallet_exception, <span class="stringliteral">&quot;Given authkey cannot create keys&quot;</span>);</div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span>      <a class="code hl_enumeration" href="yubihsm_8h.html#ae4f602d2343d01b1727dfd633169d366">yh_rc</a> <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a>;</div>
<div class="line"><span class="lineno">  179</span>      <a class="code hl_typedef" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> new_key_id = 0;</div>
<div class="line"><span class="lineno">  180</span>      <a class="code hl_struct" href="structyh__capabilities.html">yh_capabilities</a> creation_caps = {};</div>
<div class="line"><span class="lineno">  181</span>      <span class="keywordflow">if</span>(<a class="code hl_function" href="yubihsm_8c.html#aab440e1cb671d9ba7a2e7d1243960e42">yh_string_to_capabilities</a>(<span class="stringliteral">&quot;sign-ecdsa:export-wrapped&quot;</span>, &amp;creation_caps))</div>
<div class="line"><span class="lineno">  182</span>         <a class="code hl_define" href="exception_8hpp.html#a7590ddac4f181b661c3eeaf5feccc6ac">FC_THROW_EXCEPTION</a>(chain::wallet_exception, <span class="stringliteral">&quot;Cannot create caps mask&quot;</span>);</div>
<div class="line"><span class="lineno">  183</span> </div>
<div class="line"><span class="lineno">  184</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  185</span>         <span class="keywordflow">if</span>((<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a> = <a class="code hl_function" href="yubihsm_8c.html#a2db9bbd57a908c5c454fc6254f57dcff">yh_util_generate_ec_key</a>(<a class="code hl_variable" href="#a404062c94817a821f452eb9a58237602">session</a>, &amp;new_key_id, <span class="stringliteral">&quot;kiod created key&quot;</span>, <a class="code hl_variable" href="#a47e114b6d65d657d7dacfd0d2e850f0b">authkey_domains</a>, &amp;creation_caps, <a class="code hl_enumvalue" href="yubihsm_8h.html#a498937b5a72accbb0ef21bb1dcdd55caae4b191baf5c65f9234120080264d129b">YH_ALGO_EC_P256</a>)))</div>
<div class="line"><span class="lineno">  186</span>            <a class="code hl_define" href="exception_8hpp.html#a7590ddac4f181b661c3eeaf5feccc6ac">FC_THROW_EXCEPTION</a>(chain::wallet_exception, <span class="stringliteral">&quot;yh_util_generate_ec_key failed: ${m}&quot;</span>, (<span class="stringliteral">&quot;m&quot;</span>, <a class="code hl_function" href="lib_2error_8c.html#a238eedb1e27dbff2a0ab9a3932eb3f8b">yh_strerror</a>(<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a>)));</div>
<div class="line"><span class="lineno">  187</span>         <span class="keywordflow">return</span> <a class="code hl_function" href="#adbeac5d7c3d1ad9d3cb6c37cc996d8c5">populate_key_map_with_keyid</a>(new_key_id)-&gt;first;</div>
<div class="line"><span class="lineno">  188</span>      }</div>
<div class="line"><span class="lineno">  189</span>      <span class="keywordflow">catch</span>(chain::wallet_exception&amp; e) {</div>
<div class="line"><span class="lineno">  190</span>         <a class="code hl_function" href="#a5920ace754a2d851bdb11322372b849c">lock</a>();</div>
<div class="line"><span class="lineno">  191</span>         <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  192</span>      }</div>
<div class="line"><span class="lineno">  193</span>   }</div>
<div class="ttc" id="aexception_8hpp_html_a7590ddac4f181b661c3eeaf5feccc6ac"><div class="ttname"><a href="exception_8hpp.html#a7590ddac4f181b661c3eeaf5feccc6ac">FC_THROW_EXCEPTION</a></div><div class="ttdeci">#define FC_THROW_EXCEPTION(EXCEPTION, FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="exception_8hpp_source.html#l00395">exception.hpp:395</a></div></div>
<div class="ttc" id="astdint_8h_html_a273cf69d639a59973b6019625df33e30"><div class="ttname"><a href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a></div><div class="ttdeci">unsigned short uint16_t</div><div class="ttdef"><b>Definition</b> <a href="stdint_8h_source.html#l00125">stdint.h:125</a></div></div>
<div class="ttc" id="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_html_a00ad07ae762532d33f79d0044c3eda48"><div class="ttname"><a href="#a00ad07ae762532d33f79d0044c3eda48">sysio::wallet::detail::yubihsm_wallet_impl::authkey_caps</a></div><div class="ttdeci">yh_capabilities authkey_caps</div><div class="ttdef"><b>Definition</b> <a href="yubihsm__wallet_8cpp_source.html#l00202">yubihsm_wallet.cpp:202</a></div></div>
<div class="ttc" id="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_html_a404062c94817a821f452eb9a58237602"><div class="ttname"><a href="#a404062c94817a821f452eb9a58237602">sysio::wallet::detail::yubihsm_wallet_impl::session</a></div><div class="ttdeci">yh_session * session</div><div class="ttdef"><b>Definition</b> <a href="yubihsm__wallet_8cpp_source.html#l00196">yubihsm_wallet.cpp:196</a></div></div>
<div class="ttc" id="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_html_a47e114b6d65d657d7dacfd0d2e850f0b"><div class="ttname"><a href="#a47e114b6d65d657d7dacfd0d2e850f0b">sysio::wallet::detail::yubihsm_wallet_impl::authkey_domains</a></div><div class="ttdeci">uint16_t authkey_domains</div><div class="ttdef"><b>Definition</b> <a href="yubihsm__wallet_8cpp_source.html#l00203">yubihsm_wallet.cpp:203</a></div></div>
<div class="ttc" id="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_html_adbeac5d7c3d1ad9d3cb6c37cc996d8c5"><div class="ttname"><a href="#adbeac5d7c3d1ad9d3cb6c37cc996d8c5">sysio::wallet::detail::yubihsm_wallet_impl::populate_key_map_with_keyid</a></div><div class="ttdeci">key_map_type::iterator populate_key_map_with_keyid(const uint16_t key_id)</div><div class="ttdef"><b>Definition</b> <a href="yubihsm__wallet_8cpp_source.html#l00041">yubihsm_wallet.cpp:41</a></div></div>
<div class="ttc" id="astructyh__capabilities_html"><div class="ttname"><a href="structyh__capabilities.html">yh_capabilities</a></div><div class="ttdoc">Capabilities representation.</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8h_source.html#l00162">yubihsm.h:162</a></div></div>
<div class="ttc" id="ayubihsm_8c_html_a2db9bbd57a908c5c454fc6254f57dcff"><div class="ttname"><a href="yubihsm_8c.html#a2db9bbd57a908c5c454fc6254f57dcff">yh_util_generate_ec_key</a></div><div class="ttdeci">yh_rc yh_util_generate_ec_key(yh_session *session, uint16_t *key_id, const char *label, uint16_t domains, const yh_capabilities *capabilities, yh_algorithm algorithm)</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8c_source.html#l01913">yubihsm.c:1913</a></div></div>
<div class="ttc" id="ayubihsm_8c_html_aab440e1cb671d9ba7a2e7d1243960e42"><div class="ttname"><a href="yubihsm_8c.html#aab440e1cb671d9ba7a2e7d1243960e42">yh_string_to_capabilities</a></div><div class="ttdeci">yh_rc yh_string_to_capabilities(const char *capability, yh_capabilities *result)</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8c_source.html#l04115">yubihsm.c:4115</a></div></div>
<div class="ttc" id="ayubihsm_8c_html_aba384949362ccaf19cbeae3bb046489c"><div class="ttname"><a href="yubihsm_8c.html#aba384949362ccaf19cbeae3bb046489c">yh_check_capability</a></div><div class="ttdeci">bool yh_check_capability(const yh_capabilities *capabilities, const char *capability)</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8c_source.html#l04198">yubihsm.c:4198</a></div></div>
<div class="ttc" id="ayubihsm_8h_html_a498937b5a72accbb0ef21bb1dcdd55caae4b191baf5c65f9234120080264d129b"><div class="ttname"><a href="yubihsm_8h.html#a498937b5a72accbb0ef21bb1dcdd55caae4b191baf5c65f9234120080264d129b">YH_ALGO_EC_P256</a></div><div class="ttdeci">@ YH_ALGO_EC_P256</div><div class="ttdoc">ecp256</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8h_source.html#l00414">yubihsm.h:414</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a6266bcd9001ddbb02101bea6088f299b_cgraph.png" border="0" usemap="#astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a6266bcd9001ddbb02101bea6088f299b_cgraph" alt=""/></div>
<map name="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a6266bcd9001ddbb02101bea6088f299b_cgraph" id="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a6266bcd9001ddbb02101bea6088f299b_cgraph">
<area shape="rect" title=" " alt="" coords="5,395,156,451"/>
<area shape="rect" href="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl.html#a5920ace754a2d851bdb11322372b849c" title=" " alt="" coords="216,113,398,154"/>
<area shape="poly" title=" " alt="" coords="102,393,279,164,283,168,106,396"/>
<area shape="rect" href="lib_2error_8c.html#a238eedb1e27dbff2a0ab9a3932eb3f8b" title=" " alt="" coords="1080,197,1163,222"/>
<area shape="poly" title=" " alt="" coords="82,394,91,333,111,254,127,212,147,171,172,133,202,99,242,65,280,41,316,23,353,13,392,7,434,4,534,4,736,4,820,3,887,6,919,12,951,22,985,39,1024,62,1054,88,1079,120,1112,181,1107,183,1074,123,1050,92,1020,66,983,43,949,27,918,17,887,11,820,8,736,9,534,9,434,10,392,12,354,18,318,28,283,45,246,70,206,103,176,136,151,174,132,214,116,256,96,334,87,395"/>
<area shape="rect" href="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl.html#adbeac5d7c3d1ad9d3cb6c37cc996d8c5" title=" " alt="" coords="204,344,411,400"/>
<area shape="poly" title=" " alt="" coords="155,403,188,396,189,401,156,409"/>
<area shape="rect" href="yubihsm_8c.html#aba384949362ccaf19cbeae3bb046489c" title=" " alt="" coords="238,550,377,576"/>
<area shape="poly" title=" " alt="" coords="109,449,151,490,205,528,235,542,233,547,202,533,148,494,105,453"/>
<area shape="rect" href="yubihsm_8c.html#aab440e1cb671d9ba7a2e7d1243960e42" title=" " alt="" coords="857,499,1022,525"/>
<area shape="poly" title=" " alt="" coords="157,428,842,499,841,505,156,433"/>
<area shape="rect" href="yubihsm_8c.html#a2db9bbd57a908c5c454fc6254f57dcff" title=" " alt="" coords="225,599,390,625"/>
<area shape="poly" title=" " alt="" coords="97,450,115,482,139,519,169,555,205,586,212,590,210,595,202,590,165,559,134,522,110,485,92,452"/>
<area shape="rect" href="yubihsm_8c.html#a1a35f8ae5a739848408633a514e41b2d" title=" " alt="" coords="666,95,803,121"/>
<area shape="poly" title=" " alt="" coords="399,125,650,110,651,116,399,131"/>
<area shape="rect" href="yubihsm_8c.html#ab12d5a42d2219741bd3630b99ed1c7d2" title=" " alt="" coords="682,45,787,70"/>
<area shape="poly" title=" " alt="" coords="399,111,459,99,666,64,667,70,459,104,400,116"/>
<area shape="rect" href="yubihsm_8c.html#a61ab8dbab67b1cceb49cd306f8c3f4b1" title=" " alt="" coords="461,146,610,172"/>
<area shape="poly" title=" " alt="" coords="399,141,446,146,445,151,399,146"/>
<area shape="poly" title=" " alt="" coords="804,104,909,111,967,121,1023,138,1063,159,1097,184,1094,188,1061,163,1021,143,966,126,908,116,803,109"/>
<area shape="poly" title=" " alt="" coords="788,54,839,56,900,64,963,79,1023,103,1049,120,1071,140,1105,182,1101,185,1067,144,1045,124,1021,108,961,84,899,69,839,61,787,59"/>
<area shape="poly" title=" " alt="" coords="611,158,798,167,1022,188,1065,195,1064,200,1022,193,798,173,611,163"/>
<area shape="rect" href="yubihsm_8c.html#a4c26f003b72e800e9c934bca922a404a" title=" " alt="" coords="660,322,809,348"/>
<area shape="poly" title=" " alt="" coords="554,170,709,309,705,313,550,174"/>
<area shape="rect" href="yubihsm_8c.html#a77870209747d5ccd90f9da3aae2bdfa8" title=" " alt="" coords="857,347,1022,373"/>
<area shape="poly" title=" " alt="" coords="809,341,841,345,841,351,808,347"/>
<area shape="rect" href="yubihsm_8c.html#a0e96ea59c5f32def80843fec5a3c2142" title=" " alt="" coords="874,298,1004,324"/>
<area shape="poly" title=" " alt="" coords="809,323,859,317,859,323,809,329"/>
<area shape="poly" title=" " alt="" coords="1000,344,1020,334,1038,317,1060,291,1101,234,1105,237,1064,294,1042,321,1024,338,1003,349"/>
<area shape="rect" href="yubihsm__pkcs11_8c.html#ae785d5badbf1f08b491af31f32a135a1" title=" " alt="" coords="1086,398,1157,424"/>
<area shape="poly" title=" " alt="" coords="989,371,1072,394,1070,399,988,376"/>
<area shape="rect" href="yubihsm__pkcs11_8c.html#adc4bd59a60361844aa0e852efa210105" title=" " alt="" coords="1088,473,1156,498"/>
<area shape="poly" title=" " alt="" coords="961,371,1090,461,1087,465,958,376"/>
<area shape="poly" title=" " alt="" coords="979,295,1021,276,1091,230,1094,234,1023,281,981,300"/>
<area shape="poly" title=" " alt="" coords="997,322,1023,332,1064,358,1097,385,1094,390,1061,362,1021,337,995,327"/>
<area shape="rect" href="rand_8c.html#a2d3d1e86f4093fbe0a1b2a7eede4cd75" title=" " alt="" coords="1070,298,1173,324"/>
<area shape="poly" title=" " alt="" coords="1005,308,1054,308,1054,313,1005,313"/>
<area shape="poly" title=" " alt="" coords="340,342,393,304,425,286,458,271,541,245,627,227,713,214,798,206,951,200,1065,203,1065,208,951,206,798,211,714,219,628,232,542,251,460,276,427,290,396,308,343,346"/>
<area shape="poly" title=" " alt="" coords="412,389,459,395,635,407,809,412,1070,410,1070,415,808,417,635,412,459,400,411,394"/>
<area shape="rect" href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab" title=" " alt="" coords="480,310,591,336"/>
<area shape="poly" title=" " alt="" coords="411,347,464,335,465,341,412,352"/>
<area shape="rect" href="yubihsm_8c.html#aa7b8b42156c4bdaf41d8b9758a2fd73f" title=" " alt="" coords="459,359,612,385"/>
<area shape="poly" title=" " alt="" coords="412,369,443,369,443,375,412,375"/>
<area shape="poly" title=" " alt="" coords="502,311,496,301,500,292,513,285,536,283,560,286,573,293,570,297,559,291,536,289,515,291,504,295,501,301,507,308"/>
<area shape="poly" title=" " alt="" coords="587,356,611,346,625,336,634,326,644,317,659,307,722,289,833,264,1064,217,1065,223,834,269,723,294,661,312,647,321,638,330,628,340,614,350,589,361"/>
<area shape="poly" title=" " alt="" coords="607,356,647,348,648,354,608,361"/>
<area shape="poly" title=" " alt="" coords="613,374,1070,405,1070,410,612,380"/>
<area shape="poly" title=" " alt="" coords="377,557,572,547,808,528,841,524,842,529,809,533,572,552,378,563"/>
<area shape="poly" title=" " alt="" coords="948,497,981,448,1020,384,1043,334,1068,284,1100,233,1104,236,1072,287,1048,336,1024,387,985,451,952,500"/>
<area shape="poly" title=" " alt="" coords="979,496,1021,478,1091,431,1094,436,1023,482,981,501"/>
<area shape="poly" title=" " alt="" coords="1022,497,1072,490,1073,495,1022,503"/>
<area shape="rect" href="yubihsm_8c.html#a3032a8f45bfad36ed6157b0158dd7921" title=" " alt="" coords="499,601,572,626"/>
<area shape="poly" title=" " alt="" coords="390,610,483,610,483,616,390,615"/>
</map>
</div>

</div>
</div>
<a id="a7ef2e33eace8bf02ac51cfbe036c4840" name="a7ef2e33eace8bf02ac51cfbe036c4840"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ef2e33eace8bf02ac51cfbe036c4840">&#9670;&#160;</a></span>is_locked()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool sysio::wallet::detail::yubihsm_wallet_impl::is_locked </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="yubihsm__wallet_8cpp_source.html#l00037">37</a> of file <a class="el" href="yubihsm__wallet_8cpp_source.html">yubihsm_wallet.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   37</span>                          {</div>
<div class="line"><span class="lineno">   38</span>      <span class="keywordflow">return</span> !<a class="code hl_variable" href="#a3fc0c601d7e7a46bc3fa2cb24173bfd0">connector</a>;</div>
<div class="line"><span class="lineno">   39</span>   }</div>
<div class="ttc" id="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_html_a3fc0c601d7e7a46bc3fa2cb24173bfd0"><div class="ttname"><a href="#a3fc0c601d7e7a46bc3fa2cb24173bfd0">sysio::wallet::detail::yubihsm_wallet_impl::connector</a></div><div class="ttdeci">yh_connector * connector</div><div class="ttdef"><b>Definition</b> <a href="yubihsm__wallet_8cpp_source.html#l00195">yubihsm_wallet.cpp:195</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5920ace754a2d851bdb11322372b849c" name="a5920ace754a2d851bdb11322372b849c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5920ace754a2d851bdb11322372b849c">&#9670;&#160;</a></span>lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::wallet::detail::yubihsm_wallet_impl::lock </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="yubihsm__wallet_8cpp_source.html#l00104">104</a> of file <a class="el" href="yubihsm__wallet_8cpp_source.html">yubihsm_wallet.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  104</span>               {</div>
<div class="line"><span class="lineno">  105</span>      <span class="keywordflow">if</span>(<a class="code hl_variable" href="#a404062c94817a821f452eb9a58237602">session</a>) {</div>
<div class="line"><span class="lineno">  106</span>         <a class="code hl_function" href="yubihsm_8c.html#a61ab8dbab67b1cceb49cd306f8c3f4b1">yh_util_close_session</a>(<a class="code hl_variable" href="#a404062c94817a821f452eb9a58237602">session</a>);</div>
<div class="line"><span class="lineno">  107</span>         <a class="code hl_function" href="yubihsm_8c.html#a1a35f8ae5a739848408633a514e41b2d">yh_destroy_session</a>(&amp;<a class="code hl_variable" href="#a404062c94817a821f452eb9a58237602">session</a>);</div>
<div class="line"><span class="lineno">  108</span>      }</div>
<div class="line"><span class="lineno">  109</span>      <a class="code hl_variable" href="#a404062c94817a821f452eb9a58237602">session</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  110</span>      <span class="keywordflow">if</span>(<a class="code hl_variable" href="#a3fc0c601d7e7a46bc3fa2cb24173bfd0">connector</a>)</div>
<div class="line"><span class="lineno">  111</span>         <a class="code hl_function" href="yubihsm_8c.html#ab12d5a42d2219741bd3630b99ed1c7d2">yh_disconnect</a>(<a class="code hl_variable" href="#a3fc0c601d7e7a46bc3fa2cb24173bfd0">connector</a>);</div>
<div class="line"><span class="lineno">  112</span>      <span class="comment">//it would seem like this would leak-- there is no destroy() call for it. But I clearly can&#39;t reuse connectors</span></div>
<div class="line"><span class="lineno">  113</span>      <span class="comment">// as that fails with a &quot;Unable to find a suitable connector&quot;</span></div>
<div class="line"><span class="lineno">  114</span>      <a class="code hl_variable" href="#a3fc0c601d7e7a46bc3fa2cb24173bfd0">connector</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  115</span> </div>
<div class="line"><span class="lineno">  116</span>      <a class="code hl_variable" href="#a948f3999fdf3a68b107c100453bf9f89">_keys</a>.clear();</div>
<div class="line"><span class="lineno">  117</span>      <a class="code hl_variable" href="#a1180885d46905bf11d2f1501bd244cb1">keepalive_timer</a>.cancel();</div>
<div class="line"><span class="lineno">  118</span>   }</div>
<div class="ttc" id="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_html_a1180885d46905bf11d2f1501bd244cb1"><div class="ttname"><a href="#a1180885d46905bf11d2f1501bd244cb1">sysio::wallet::detail::yubihsm_wallet_impl::keepalive_timer</a></div><div class="ttdeci">boost::asio::steady_timer keepalive_timer</div><div class="ttdef"><b>Definition</b> <a href="yubihsm__wallet_8cpp_source.html#l00205">yubihsm_wallet.cpp:205</a></div></div>
<div class="ttc" id="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_html_a948f3999fdf3a68b107c100453bf9f89"><div class="ttname"><a href="#a948f3999fdf3a68b107c100453bf9f89">sysio::wallet::detail::yubihsm_wallet_impl::_keys</a></div><div class="ttdeci">map&lt; public_key_type, uint16_t &gt; _keys</div><div class="ttdef"><b>Definition</b> <a href="yubihsm__wallet_8cpp_source.html#l00200">yubihsm_wallet.cpp:200</a></div></div>
<div class="ttc" id="ayubihsm_8c_html_a1a35f8ae5a739848408633a514e41b2d"><div class="ttname"><a href="yubihsm_8c.html#a1a35f8ae5a739848408633a514e41b2d">yh_destroy_session</a></div><div class="ttdeci">yh_rc yh_destroy_session(yh_session **session)</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8c_source.html#l00890">yubihsm.c:890</a></div></div>
<div class="ttc" id="ayubihsm_8c_html_a61ab8dbab67b1cceb49cd306f8c3f4b1"><div class="ttname"><a href="yubihsm_8c.html#a61ab8dbab67b1cceb49cd306f8c3f4b1">yh_util_close_session</a></div><div class="ttdeci">yh_rc yh_util_close_session(yh_session *session)</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8c_source.html#l01257">yubihsm.c:1257</a></div></div>
<div class="ttc" id="ayubihsm_8c_html_ab12d5a42d2219741bd3630b99ed1c7d2"><div class="ttname"><a href="yubihsm_8c.html#ab12d5a42d2219741bd3630b99ed1c7d2">yh_disconnect</a></div><div class="ttdeci">yh_rc yh_disconnect(yh_connector *connector)</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8c_source.html#l04097">yubihsm.c:4097</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a5920ace754a2d851bdb11322372b849c_cgraph.png" border="0" usemap="#astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a5920ace754a2d851bdb11322372b849c_cgraph" alt=""/></div>
<map name="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a5920ace754a2d851bdb11322372b849c_cgraph" id="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a5920ace754a2d851bdb11322372b849c_cgraph">
<area shape="rect" title=" " alt="" coords="5,48,188,89"/>
<area shape="rect" href="yubihsm_8c.html#a1a35f8ae5a739848408633a514e41b2d" title=" " alt="" coords="438,56,576,82"/>
<area shape="poly" title=" " alt="" coords="188,66,423,66,423,72,188,72"/>
<area shape="rect" href="yubihsm_8c.html#ab12d5a42d2219741bd3630b99ed1c7d2" title=" " alt="" coords="258,5,363,31"/>
<area shape="poly" title=" " alt="" coords="184,45,242,32,243,37,186,51"/>
<area shape="rect" href="yubihsm_8c.html#a61ab8dbab67b1cceb49cd306f8c3f4b1" title=" " alt="" coords="236,107,385,132"/>
<area shape="poly" title=" " alt="" coords="186,87,239,100,238,105,184,92"/>
<area shape="rect" href="lib_2error_8c.html#a238eedb1e27dbff2a0ab9a3932eb3f8b" title=" " alt="" coords="853,107,936,132"/>
<area shape="poly" title=" " alt="" coords="577,72,795,98,838,106,837,111,794,103,576,78"/>
<area shape="poly" title=" " alt="" coords="364,15,448,17,556,25,676,41,796,69,859,96,857,101,794,74,675,47,556,30,447,23,364,20"/>
<area shape="poly" title=" " alt="" coords="385,117,837,117,837,122,385,122"/>
<area shape="rect" href="yubihsm_8c.html#a4c26f003b72e800e9c934bca922a404a" title=" " alt="" coords="433,157,581,183"/>
<area shape="poly" title=" " alt="" coords="364,130,440,150,439,155,363,136"/>
<area shape="rect" href="yubihsm_8c.html#a77870209747d5ccd90f9da3aae2bdfa8" title=" " alt="" coords="629,157,795,183"/>
<area shape="poly" title=" " alt="" coords="581,168,614,168,614,173,581,173"/>
<area shape="rect" href="yubihsm_8c.html#a0e96ea59c5f32def80843fec5a3c2142" title=" " alt="" coords="647,207,777,232"/>
<area shape="poly" title=" " alt="" coords="564,181,641,200,640,205,563,186"/>
<area shape="poly" title=" " alt="" coords="760,154,837,133,838,138,762,159"/>
<area shape="rect" href="yubihsm__pkcs11_8c.html#ae785d5badbf1f08b491af31f32a135a1" title=" " alt="" coords="859,205,930,231"/>
<area shape="poly" title=" " alt="" coords="765,181,844,202,843,208,763,186"/>
<area shape="rect" href="yubihsm__pkcs11_8c.html#adc4bd59a60361844aa0e852efa210105" title=" " alt="" coords="860,156,928,182"/>
<area shape="poly" title=" " alt="" coords="795,167,845,167,845,172,795,172"/>
<area shape="poly" title=" " alt="" coords="772,204,793,193,808,181,817,169,826,155,841,141,846,138,849,142,844,146,830,159,821,172,812,185,796,198,774,208"/>
<area shape="poly" title=" " alt="" coords="778,216,843,216,844,221,778,222"/>
<area shape="rect" href="rand_8c.html#a2d3d1e86f4093fbe0a1b2a7eede4cd75" title=" " alt="" coords="843,255,946,280"/>
<area shape="poly" title=" " alt="" coords="765,230,829,248,828,253,763,236"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a5920ace754a2d851bdb11322372b849c_icgraph.png" border="0" usemap="#astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a5920ace754a2d851bdb11322372b849c_icgraph" alt=""/></div>
<map name="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a5920ace754a2d851bdb11322372b849c_icgraph" id="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a5920ace754a2d851bdb11322372b849c_icgraph">
<area shape="rect" title=" " alt="" coords="411,182,593,223"/>
<area shape="rect" href="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl.html#a6266bcd9001ddbb02101bea6088f299b" title=" " alt="" coords="208,5,358,61"/>
<area shape="poly" title=" " alt="" coords="470,173,421,124,361,75,343,64,346,59,365,71,425,120,474,169"/>
<area shape="rect" href="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl.html#a6412f92a0ad381f2370582372a5b6082" title=" " alt="" coords="204,109,363,165"/>
<area shape="poly" title=" " alt="" coords="416,180,363,164,364,158,418,175"/>
<area shape="rect" href="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl.html#a00ee0ac7ac4a819d0b8755bf4f442263" title=" " alt="" coords="5,143,156,198"/>
<area shape="poly" title=" " alt="" coords="395,197,156,179,156,174,396,192"/>
<area shape="rect" href="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl.html#a8987016445813c0391f04894e9bdb002" title=" " alt="" coords="208,240,358,296"/>
<area shape="poly" title=" " alt="" coords="418,230,360,248,358,243,417,225"/>
<area shape="rect" href="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl.html#af535b22a76cac37f33ef43715865648c" title=" " alt="" coords="204,320,362,376"/>
<area shape="poly" title=" " alt="" coords="466,235,419,272,364,310,344,322,342,317,362,306,416,268,463,231"/>
<area shape="poly" title=" " alt="" coords="315,97,303,90,283,88,266,90,254,95,249,101,249,109,243,109,244,99,251,90,264,85,283,83,305,85,318,92"/>
<area shape="poly" title=" " alt="" coords="189,155,157,161,156,155,188,150"/>
</map>
</div>

</div>
</div>
<a id="adbeac5d7c3d1ad9d3cb6c37cc996d8c5" name="adbeac5d7c3d1ad9d3cb6c37cc996d8c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbeac5d7c3d1ad9d3cb6c37cc996d8c5">&#9670;&#160;</a></span>populate_key_map_with_keyid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">key_map_type::iterator sysio::wallet::detail::yubihsm_wallet_impl::populate_key_map_with_keyid </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a></td>          <td class="paramname"><span class="paramname"><em>key_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>XXX This is junky and common with SE wallet; commonize it</p>

<p class="definition">Definition at line <a class="el" href="yubihsm__wallet_8cpp_source.html#l00041">41</a> of file <a class="el" href="yubihsm__wallet_8cpp_source.html">yubihsm_wallet.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   41</span>                                                                           {</div>
<div class="line"><span class="lineno">   42</span>      <a class="code hl_enumeration" href="yubihsm_8h.html#ae4f602d2343d01b1727dfd633169d366">yh_rc</a> <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a>;</div>
<div class="line"><span class="lineno">   43</span>      <span class="keywordtype">size_t</span> blob_sz = 128;</div>
<div class="line"><span class="lineno">   44</span>      <a class="code hl_typedef" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="code hl_struct" href="structfc_1_1blob.html">blob</a>[blob_sz];</div>
<div class="line"><span class="lineno">   45</span>      <span class="keywordflow">if</span>((<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a> = <a class="code hl_function" href="yubihsm_8c.html#aa7b8b42156c4bdaf41d8b9758a2fd73f">yh_util_get_public_key</a>(<a class="code hl_variable" href="#a404062c94817a821f452eb9a58237602">session</a>, <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#ada12860f8f9f5f3cac5b179ef352434c">key_id</a>, <a class="code hl_struct" href="structfc_1_1blob.html">blob</a>, &amp;blob_sz, <span class="keyword">nullptr</span>)))</div>
<div class="line"><span class="lineno">   46</span>         <a class="code hl_define" href="exception_8hpp.html#a7590ddac4f181b661c3eeaf5feccc6ac">FC_THROW_EXCEPTION</a>(chain::wallet_exception, <span class="stringliteral">&quot;yh_util_get_public_key failed: ${m}&quot;</span>, (<span class="stringliteral">&quot;m&quot;</span>, <a class="code hl_function" href="lib_2error_8c.html#a238eedb1e27dbff2a0ab9a3932eb3f8b">yh_strerror</a>(<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a>)));</div>
<div class="line"><span class="lineno">   47</span>      <span class="keywordflow">if</span>(blob_sz != 64)</div>
<div class="line"><span class="lineno">   48</span>         <a class="code hl_define" href="exception_8hpp.html#a7590ddac4f181b661c3eeaf5feccc6ac">FC_THROW_EXCEPTION</a>(chain::wallet_exception, <span class="stringliteral">&quot;unexpected pubkey size from yh_util_get_public_key&quot;</span>);</div>
<div class="line"><span class="lineno">   49</span> </div>
<div class="line"><span class="lineno">   51</span>      <span class="keywordtype">char</span> serialized_pub_key[<span class="keyword">sizeof</span>(<a class="code hl_typedef" href="namespacefc_1_1crypto_1_1r1.html#a2bfc308262de40acfc2a5e7c725bbe3f">public_key_data</a>) + 1];</div>
<div class="line"><span class="lineno">   52</span>      serialized_pub_key[0] = 0x01; <span class="comment">//means R1 key</span></div>
<div class="line"><span class="lineno">   53</span>      serialized_pub_key[1] = 0x02 + (<a class="code hl_struct" href="structfc_1_1blob.html">blob</a>[63]&amp;1); <span class="comment">//R1 header; even or odd Y</span></div>
<div class="line"><span class="lineno">   54</span>      <a class="code hl_function" href="yubihsm__pkcs11_8c.html#ae785d5badbf1f08b491af31f32a135a1">memcpy</a>(serialized_pub_key+2, <a class="code hl_struct" href="structfc_1_1blob.html">blob</a>, 32); <span class="comment">//copy in the 32 bytes of X</span></div>
<div class="line"><span class="lineno">   55</span> </div>
<div class="line"><span class="lineno">   56</span>      <a class="code hl_class" href="classfc_1_1crypto_1_1public__key.html">public_key_type</a> pub_key;</div>
<div class="line"><span class="lineno">   57</span>      <a class="code hl_class" href="classfc_1_1datastream.html">fc::datastream&lt;const char *&gt;</a> <a class="code hl_function" href="namespace_xbyak_1_1util.html#a4b2aef26182d21706896022467868f7c">ds</a>(serialized_pub_key, <span class="keyword">sizeof</span>(serialized_pub_key));</div>
<div class="line"><span class="lineno">   58</span>      <a class="code hl_function" href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab">fc::raw::unpack</a>(ds, pub_key);</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>      <span class="keywordflow">return</span> <a class="code hl_variable" href="#a948f3999fdf3a68b107c100453bf9f89">_keys</a>.emplace(pub_key, <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#ada12860f8f9f5f3cac5b179ef352434c">key_id</a>).first;</div>
<div class="line"><span class="lineno">   61</span>   }</div>
<div class="ttc" id="aclassfc_1_1crypto_1_1public__key_html"><div class="ttname"><a href="classfc_1_1crypto_1_1public__key.html">fc::crypto::public_key</a></div><div class="ttdef"><b>Definition</b> <a href="public__key_8hpp_source.html#l00023">public_key.hpp:24</a></div></div>
<div class="ttc" id="aclassfc_1_1datastream_html"><div class="ttname"><a href="classfc_1_1datastream.html">fc::datastream</a></div><div class="ttdef"><b>Definition</b> <a href="datastream_8hpp_source.html#l00018">datastream.hpp:18</a></div></div>
<div class="ttc" id="anamespace_xbyak_1_1util_html_a4b2aef26182d21706896022467868f7c"><div class="ttname"><a href="namespace_xbyak_1_1util.html#a4b2aef26182d21706896022467868f7c">Xbyak::util::ds</a></div><div class="ttdeci">static const Segment ds(Segment::ds)</div></div>
<div class="ttc" id="anamespacefc_1_1crypto_1_1r1_html_a2bfc308262de40acfc2a5e7c725bbe3f"><div class="ttname"><a href="namespacefc_1_1crypto_1_1r1.html#a2bfc308262de40acfc2a5e7c725bbe3f">fc::crypto::r1::public_key_data</a></div><div class="ttdeci">fc::array&lt; char, 33 &gt; public_key_data</div><div class="ttdef"><b>Definition</b> <a href="elliptic__r1_8hpp_source.html#l00020">elliptic_r1.hpp:20</a></div></div>
<div class="ttc" id="anamespacefc_1_1raw_html_a0b442d98ceb22dd5a6ae84745e43ffab"><div class="ttname"><a href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab">fc::raw::unpack</a></div><div class="ttdeci">void unpack(Stream &amp;s, std::deque&lt; T &gt; &amp;value)</div><div class="ttdef"><b>Definition</b> <a href="raw_8hpp_source.html#l00540">raw.hpp:540</a></div></div>
<div class="ttc" id="astdint_8h_html_aba7bc1797add20fe3efdf37ced1182c5"><div class="ttname"><a href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></div><div class="ttdeci">unsigned char uint8_t</div><div class="ttdef"><b>Definition</b> <a href="stdint_8h_source.html#l00124">stdint.h:124</a></div></div>
<div class="ttc" id="astructfc_1_1blob_html"><div class="ttname"><a href="structfc_1_1blob.html">fc::blob</a></div><div class="ttdef"><b>Definition</b> <a href="fc_2include_2fc_2variant_8hpp_source.html#l00044">variant.hpp:44</a></div></div>
<div class="ttc" id="ayubihsm_8c_html_aa7b8b42156c4bdaf41d8b9758a2fd73f"><div class="ttname"><a href="yubihsm_8c.html#aa7b8b42156c4bdaf41d8b9758a2fd73f">yh_util_get_public_key</a></div><div class="ttdeci">yh_rc yh_util_get_public_key(yh_session *session, uint16_t id, uint8_t *data, size_t *data_len, yh_algorithm *algorithm)</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8c_source.html#l01216">yubihsm.c:1216</a></div></div>
<div class="ttc" id="ayubihsm__pkcs11_8c_html_ada12860f8f9f5f3cac5b179ef352434c"><div class="ttname"><a href="yubihsm__pkcs11_8c.html#ada12860f8f9f5f3cac5b179ef352434c">key_id</a></div><div class="ttdeci">uint16_t key_id</div><div class="ttdef"><b>Definition</b> <a href="yubihsm__pkcs11_8c_source.html#l01104">yubihsm_pkcs11.c:1104</a></div></div>
<div class="ttc" id="ayubihsm__pkcs11_8c_html_ae785d5badbf1f08b491af31f32a135a1"><div class="ttname"><a href="yubihsm__pkcs11_8c.html#ae785d5badbf1f08b491af31f32a135a1">memcpy</a></div><div class="ttdeci">memcpy((char *) pInfo-&gt;slotDescription, s, l)</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_adbeac5d7c3d1ad9d3cb6c37cc996d8c5_cgraph.png" border="0" usemap="#astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_adbeac5d7c3d1ad9d3cb6c37cc996d8c5_cgraph" alt=""/></div>
<map name="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_adbeac5d7c3d1ad9d3cb6c37cc996d8c5_cgraph" id="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_adbeac5d7c3d1ad9d3cb6c37cc996d8c5_cgraph">
<area shape="rect" title=" " alt="" coords="5,140,213,195"/>
<area shape="rect" href="yubihsm__pkcs11_8c.html#ae785d5badbf1f08b491af31f32a135a1" title=" " alt="" coords="888,5,959,31"/>
<area shape="poly" title=" " alt="" coords="193,137,260,114,456,48,543,27,658,12,773,7,872,11,872,17,773,13,659,17,544,32,457,53,262,119,195,142"/>
<area shape="rect" href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab" title=" " alt="" coords="282,280,393,306"/>
<area shape="poly" title=" " alt="" coords="163,194,300,270,297,274,160,198"/>
<area shape="rect" href="lib_2error_8c.html#a238eedb1e27dbff2a0ab9a3932eb3f8b" title=" " alt="" coords="882,153,965,179"/>
<area shape="poly" title=" " alt="" coords="213,165,824,165,866,164,866,170,824,170,213,171"/>
<area shape="rect" href="yubihsm_8c.html#aa7b8b42156c4bdaf41d8b9758a2fd73f" title=" " alt="" coords="261,129,414,155"/>
<area shape="poly" title=" " alt="" coords="213,153,245,150,245,155,214,159"/>
<area shape="poly" title=" " alt="" coords="304,281,298,271,301,262,315,255,337,253,362,256,374,263,372,268,360,261,337,259,316,261,305,265,303,271,308,278"/>
<area shape="poly" title=" " alt="" coords="367,126,461,89,558,59,658,40,773,25,872,18,872,23,773,30,659,45,560,65,463,94,369,131"/>
<area shape="poly" title=" " alt="" coords="414,143,866,161,866,167,414,148"/>
<area shape="rect" href="yubihsm_8c.html#a4c26f003b72e800e9c934bca922a404a" title=" " alt="" coords="462,104,610,130"/>
<area shape="poly" title=" " alt="" coords="414,130,446,126,447,131,415,135"/>
<area shape="rect" href="yubihsm_8c.html#a77870209747d5ccd90f9da3aae2bdfa8" title=" " alt="" coords="658,55,824,80"/>
<area shape="poly" title=" " alt="" coords="592,101,669,82,670,87,593,106"/>
<area shape="rect" href="yubihsm_8c.html#a0e96ea59c5f32def80843fec5a3c2142" title=" " alt="" coords="676,104,806,130"/>
<area shape="poly" title=" " alt="" coords="610,114,661,114,661,120,610,120"/>
<area shape="poly" title=" " alt="" coords="791,51,872,29,873,34,792,57"/>
<area shape="poly" title=" " alt="" coords="803,79,825,89,841,102,850,114,859,127,873,140,878,143,875,148,870,144,855,131,846,118,837,106,822,94,801,83"/>
<area shape="rect" href="yubihsm__pkcs11_8c.html#adc4bd59a60361844aa0e852efa210105" title=" " alt="" coords="889,55,958,80"/>
<area shape="poly" title=" " alt="" coords="824,65,874,65,874,70,824,70"/>
<area shape="poly" title=" " alt="" coords="801,101,822,91,837,79,846,67,855,54,870,40,875,37,878,41,873,44,859,57,850,70,841,83,825,95,803,106"/>
<area shape="poly" title=" " alt="" coords="792,128,867,148,866,154,791,133"/>
<area shape="rect" href="rand_8c.html#a2d3d1e86f4093fbe0a1b2a7eede4cd75" title=" " alt="" coords="872,104,975,130"/>
<area shape="poly" title=" " alt="" coords="807,114,856,114,856,120,807,120"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_adbeac5d7c3d1ad9d3cb6c37cc996d8c5_icgraph.png" border="0" usemap="#astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_adbeac5d7c3d1ad9d3cb6c37cc996d8c5_icgraph" alt=""/></div>
<map name="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_adbeac5d7c3d1ad9d3cb6c37cc996d8c5_icgraph" id="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_adbeac5d7c3d1ad9d3cb6c37cc996d8c5_icgraph">
<area shape="rect" title=" " alt="" coords="204,45,411,101"/>
<area shape="rect" href="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl.html#a6266bcd9001ddbb02101bea6088f299b" title=" " alt="" coords="5,5,156,61"/>
<area shape="poly" title=" " alt="" coords="188,55,156,49,156,44,189,50"/>
<area shape="rect" href="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl.html#a00ee0ac7ac4a819d0b8755bf4f442263" title=" " alt="" coords="5,85,156,141"/>
<area shape="poly" title=" " alt="" coords="189,97,156,103,156,97,188,92"/>
</map>
</div>

</div>
</div>
<a id="a6412f92a0ad381f2370582372a5b6082" name="a6412f92a0ad381f2370582372a5b6082"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6412f92a0ad381f2370582372a5b6082">&#9670;&#160;</a></span>prime_keepalive_timer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::wallet::detail::yubihsm_wallet_impl::prime_keepalive_timer </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="yubihsm__wallet_8cpp_source.html#l00120">120</a> of file <a class="el" href="yubihsm__wallet_8cpp_source.html">yubihsm_wallet.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  120</span>                                {</div>
<div class="line"><span class="lineno">  121</span>      <a class="code hl_variable" href="#a1180885d46905bf11d2f1501bd244cb1">keepalive_timer</a>.expires_at(std::chrono::steady_clock::now() + std::chrono::seconds(20));</div>
<div class="line"><span class="lineno">  122</span>      <a class="code hl_variable" href="#a1180885d46905bf11d2f1501bd244cb1">keepalive_timer</a>.async_wait([<span class="keyword">this</span>](<span class="keyword">const</span> boost::system::error_code&amp; ec){</div>
<div class="line"><span class="lineno">  123</span>         <span class="keywordflow">if</span>(ec || !<a class="code hl_variable" href="#a404062c94817a821f452eb9a58237602">session</a>)</div>
<div class="line"><span class="lineno">  124</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>         <a class="code hl_typedef" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> data, resp;</div>
<div class="line"><span class="lineno">  127</span>         <a class="code hl_enumeration" href="yubihsm_8h.html#aa5415bafa9c48dfef0e183d8df504b7e">yh_cmd</a> resp_cmd;</div>
<div class="line"><span class="lineno">  128</span>         <span class="keywordtype">size_t</span> resp_sz = 1;</div>
<div class="line"><span class="lineno">  129</span>         <span class="keywordflow">if</span>(<a class="code hl_function" href="yubihsm_8c.html#a4c26f003b72e800e9c934bca922a404a">yh_send_secure_msg</a>(<a class="code hl_variable" href="#a404062c94817a821f452eb9a58237602">session</a>, YHC_ECHO, &amp;data, 1, &amp;resp_cmd, &amp;resp, &amp;resp_sz))</div>
<div class="line"><span class="lineno">  130</span>            <a class="code hl_function" href="#a5920ace754a2d851bdb11322372b849c">lock</a>();</div>
<div class="line"><span class="lineno">  131</span>         <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  132</span>            <a class="code hl_function" href="#a6412f92a0ad381f2370582372a5b6082">prime_keepalive_timer</a>();</div>
<div class="line"><span class="lineno">  133</span>      });</div>
<div class="line"><span class="lineno">  134</span>   }</div>
<div class="ttc" id="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_html_a6412f92a0ad381f2370582372a5b6082"><div class="ttname"><a href="#a6412f92a0ad381f2370582372a5b6082">sysio::wallet::detail::yubihsm_wallet_impl::prime_keepalive_timer</a></div><div class="ttdeci">void prime_keepalive_timer()</div><div class="ttdef"><b>Definition</b> <a href="yubihsm__wallet_8cpp_source.html#l00120">yubihsm_wallet.cpp:120</a></div></div>
<div class="ttc" id="ayubihsm_8c_html_a4c26f003b72e800e9c934bca922a404a"><div class="ttname"><a href="yubihsm_8c.html#a4c26f003b72e800e9c934bca922a404a">yh_send_secure_msg</a></div><div class="ttdeci">yh_rc yh_send_secure_msg(yh_session *session, yh_cmd cmd, const uint8_t *data, size_t data_len, yh_cmd *response_cmd, uint8_t *response, size_t *response_len)</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8c_source.html#l00416">yubihsm.c:416</a></div></div>
<div class="ttc" id="ayubihsm_8h_html_aa5415bafa9c48dfef0e183d8df504b7e"><div class="ttname"><a href="yubihsm_8h.html#aa5415bafa9c48dfef0e183d8df504b7e">yh_cmd</a></div><div class="ttdeci">yh_cmd</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8h_source.html#l00243">yubihsm.h:243</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a6412f92a0ad381f2370582372a5b6082_cgraph.png" border="0" usemap="#astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a6412f92a0ad381f2370582372a5b6082_cgraph" alt=""/></div>
<map name="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a6412f92a0ad381f2370582372a5b6082_cgraph" id="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a6412f92a0ad381f2370582372a5b6082_cgraph">
<area shape="rect" title=" " alt="" coords="5,114,165,170"/>
<area shape="poly" title=" " alt="" coords="42,114,43,104,50,95,65,90,85,88,108,90,122,97,120,102,107,95,85,93,66,95,53,100,47,106,47,114"/>
<area shape="rect" href="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl.html#a5920ace754a2d851bdb11322372b849c" title=" " alt="" coords="213,71,395,112"/>
<area shape="poly" title=" " alt="" coords="164,121,198,113,199,119,166,126"/>
<area shape="rect" href="yubihsm_8c.html#a4c26f003b72e800e9c934bca922a404a" title=" " alt="" coords="640,157,789,183"/>
<area shape="poly" title=" " alt="" coords="165,143,625,164,625,169,165,148"/>
<area shape="rect" href="yubihsm_8c.html#a1a35f8ae5a739848408633a514e41b2d" title=" " alt="" coords="646,5,783,31"/>
<area shape="poly" title=" " alt="" coords="357,68,442,42,539,27,630,19,631,24,540,32,444,47,358,73"/>
<area shape="rect" href="yubihsm_8c.html#ab12d5a42d2219741bd3630b99ed1c7d2" title=" " alt="" coords="465,57,570,83"/>
<area shape="poly" title=" " alt="" coords="395,80,450,74,450,80,396,85"/>
<area shape="rect" href="yubihsm_8c.html#a61ab8dbab67b1cceb49cd306f8c3f4b1" title=" " alt="" coords="443,107,592,132"/>
<area shape="poly" title=" " alt="" coords="396,101,428,105,427,110,395,106"/>
<area shape="rect" href="lib_2error_8c.html#a238eedb1e27dbff2a0ab9a3932eb3f8b" title=" " alt="" coords="1060,107,1143,132"/>
<area shape="poly" title=" " alt="" coords="784,14,889,21,947,31,1003,48,1043,69,1077,94,1074,99,1041,74,1001,53,946,36,888,26,783,19"/>
<area shape="poly" title=" " alt="" coords="571,69,761,77,881,86,1002,98,1045,105,1044,110,1002,103,881,91,761,82,571,74"/>
<area shape="poly" title=" " alt="" coords="593,117,1044,117,1044,122,593,122"/>
<area shape="poly" title=" " alt="" coords="571,130,648,150,646,155,570,136"/>
<area shape="rect" href="yubihsm_8c.html#a77870209747d5ccd90f9da3aae2bdfa8" title=" " alt="" coords="837,157,1002,183"/>
<area shape="poly" title=" " alt="" coords="789,168,821,168,821,173,789,173"/>
<area shape="rect" href="yubihsm_8c.html#a0e96ea59c5f32def80843fec5a3c2142" title=" " alt="" coords="854,207,984,232"/>
<area shape="poly" title=" " alt="" coords="772,181,849,200,847,205,770,186"/>
<area shape="poly" title=" " alt="" coords="968,154,1044,133,1046,138,969,159"/>
<area shape="rect" href="yubihsm__pkcs11_8c.html#ae785d5badbf1f08b491af31f32a135a1" title=" " alt="" coords="1066,205,1137,231"/>
<area shape="poly" title=" " alt="" coords="972,181,1052,202,1050,208,971,186"/>
<area shape="rect" href="yubihsm__pkcs11_8c.html#adc4bd59a60361844aa0e852efa210105" title=" " alt="" coords="1068,156,1136,182"/>
<area shape="poly" title=" " alt="" coords="1003,167,1052,167,1052,172,1003,172"/>
<area shape="poly" title=" " alt="" coords="979,204,1001,193,1015,181,1024,169,1034,155,1048,141,1053,138,1056,142,1052,146,1038,159,1029,172,1019,185,1003,198,981,208"/>
<area shape="poly" title=" " alt="" coords="985,216,1051,216,1051,221,985,222"/>
<area shape="rect" href="rand_8c.html#a2d3d1e86f4093fbe0a1b2a7eede4cd75" title=" " alt="" coords="1050,255,1153,280"/>
<area shape="poly" title=" " alt="" coords="972,230,1037,248,1035,253,971,236"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a6412f92a0ad381f2370582372a5b6082_icgraph.png" border="0" usemap="#astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a6412f92a0ad381f2370582372a5b6082_icgraph" alt=""/></div>
<map name="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a6412f92a0ad381f2370582372a5b6082_icgraph" id="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a6412f92a0ad381f2370582372a5b6082_icgraph">
<area shape="rect" title=" " alt="" coords="204,29,363,85"/>
<area shape="poly" title=" " alt="" coords="315,17,303,10,283,8,266,10,254,15,249,21,249,29,243,29,244,19,251,10,264,5,283,3,305,5,318,12"/>
<area shape="rect" href="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl.html#a00ee0ac7ac4a819d0b8755bf4f442263" title=" " alt="" coords="5,29,156,85"/>
<area shape="poly" title=" " alt="" coords="188,60,156,60,156,54,188,54"/>
</map>
</div>

</div>
</div>
<a id="a8987016445813c0391f04894e9bdb002" name="a8987016445813c0391f04894e9bdb002"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8987016445813c0391f04894e9bdb002">&#9670;&#160;</a></span>try_sign_digest()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt; <a class="el" href="namespacesysio_1_1chain.html#af141a69eb789b86fa0eb93c2d263f0df">signature_type</a> &gt; sysio::wallet::detail::yubihsm_wallet_impl::try_sign_digest </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#a357fd9478475457e5bb386a3143079b6">digest_type</a></td>          <td class="paramname"><span class="paramname"><em>d</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#a0628a11f388cd2e43b1ccc1260a1042f">public_key_type</a></td>          <td class="paramname"><span class="paramname"><em>public_key</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>XXX a lot of this below is similar to SE wallet; commonize it in non-junky way</p>

<p class="definition">Definition at line <a class="el" href="yubihsm__wallet_8cpp_source.html#l00136">136</a> of file <a class="el" href="yubihsm__wallet_8cpp_source.html">yubihsm_wallet.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  136</span>                                                                                                      {</div>
<div class="line"><span class="lineno">  137</span>      <span class="keyword">auto</span> it = <a class="code hl_variable" href="#a948f3999fdf3a68b107c100453bf9f89">_keys</a>.find(<a class="code hl_class" href="classfc_1_1public__key.html">public_key</a>);</div>
<div class="line"><span class="lineno">  138</span>      <span class="keywordflow">if</span>(it == <a class="code hl_variable" href="#a948f3999fdf3a68b107c100453bf9f89">_keys</a>.end())</div>
<div class="line"><span class="lineno">  139</span>         <span class="keywordflow">return</span> std::optional&lt;signature_type&gt;();</div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>      <span class="keywordtype">size_t</span> der_sig_sz = 128;</div>
<div class="line"><span class="lineno">  142</span>      <a class="code hl_typedef" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> der_sig[der_sig_sz];</div>
<div class="line"><span class="lineno">  143</span>      <a class="code hl_enumeration" href="yubihsm_8h.html#ae4f602d2343d01b1727dfd633169d366">yh_rc</a> <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a>;</div>
<div class="line"><span class="lineno">  144</span>      <span class="keywordflow">if</span>((<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a> = <a class="code hl_function" href="yubihsm_8c.html#a5121c90d3bd745afd8264fef2ef39ace">yh_util_sign_ecdsa</a>(<a class="code hl_variable" href="#a404062c94817a821f452eb9a58237602">session</a>, it-&gt;second, (<a class="code hl_typedef" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>*)<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a107648633008a7f2d872b4b3d98c2f96">d</a>.data(), <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a107648633008a7f2d872b4b3d98c2f96">d</a>.data_size(), der_sig, &amp;der_sig_sz))) {</div>
<div class="line"><span class="lineno">  145</span>         <a class="code hl_function" href="#a5920ace754a2d851bdb11322372b849c">lock</a>();</div>
<div class="line"><span class="lineno">  146</span>         <a class="code hl_define" href="exception_8hpp.html#a7590ddac4f181b661c3eeaf5feccc6ac">FC_THROW_EXCEPTION</a>(chain::wallet_exception, <span class="stringliteral">&quot;yh_util_sign_ecdsa failed: ${m}&quot;</span>, (<span class="stringliteral">&quot;m&quot;</span>, <a class="code hl_function" href="lib_2error_8c.html#a238eedb1e27dbff2a0ab9a3932eb3f8b">yh_strerror</a>(<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a>)));</div>
<div class="line"><span class="lineno">  147</span>      }</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  150</span>      fc::ecdsa_sig sig = ECDSA_SIG_new();</div>
<div class="line"><span class="lineno">  151</span>      <a class="code hl_typedef" href="include_2fc_2crypto_2bigint_8hpp.html#a62125ea4e1d748a4a9c1aed9766f451a">BIGNUM</a> *<a class="code hl_variable" href="bn_8cpp.html#af0a5201ca8846f05f25435b41d7f39f7">r</a> = BN_new(), *<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a506da415c9307c897ca9be93acfe1d0f">s</a> = BN_new();</div>
<div class="line"><span class="lineno">  152</span>      BN_bin2bn(der_sig+4, der_sig[3], <a class="code hl_variable" href="bn_8cpp.html#af0a5201ca8846f05f25435b41d7f39f7">r</a>);</div>
<div class="line"><span class="lineno">  153</span>      BN_bin2bn(der_sig+6+der_sig[3], der_sig[4+der_sig[3]+1], <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a506da415c9307c897ca9be93acfe1d0f">s</a>);</div>
<div class="line"><span class="lineno">  154</span>      <a class="code hl_function" href="openssl-compat_8c.html#ae2f28de42b8345422b7ac3b28f330b9b">ECDSA_SIG_set0</a>(sig, <a class="code hl_variable" href="bn_8cpp.html#af0a5201ca8846f05f25435b41d7f39f7">r</a>, <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a506da415c9307c897ca9be93acfe1d0f">s</a>);</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>      <span class="keywordtype">char</span> pub_key_shim_data[64];</div>
<div class="line"><span class="lineno">  157</span>      <a class="code hl_class" href="classfc_1_1datastream.html">fc::datastream&lt;char *&gt;</a> eds(pub_key_shim_data, <span class="keyword">sizeof</span>(pub_key_shim_data));</div>
<div class="line"><span class="lineno">  158</span>      <a class="code hl_function" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a>(eds, it-&gt;first);</div>
<div class="line"><span class="lineno">  159</span>      <a class="code hl_typedef" href="namespacefc_1_1crypto_1_1r1.html#a2bfc308262de40acfc2a5e7c725bbe3f">public_key_data</a>* kd = (<a class="code hl_typedef" href="namespacefc_1_1crypto_1_1r1.html#a2bfc308262de40acfc2a5e7c725bbe3f">public_key_data</a>*)(pub_key_shim_data+1);</div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>      <a class="code hl_typedef" href="namespacefc_1_1crypto_1_1r1.html#ae05a9b8a3e71b719d56c0a87c491a8f6">compact_signature</a> compact_sig;</div>
<div class="line"><span class="lineno">  162</span>      compact_sig = <a class="code hl_function" href="namespacefc_1_1crypto_1_1r1.html#a69fb535e6486039f3d86e9d5dd3ab954">signature_from_ecdsa</a>(key, *kd, sig, d);</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span>      <span class="keywordtype">char</span> serialized_signature[<span class="keyword">sizeof</span>(compact_sig) + 1];</div>
<div class="line"><span class="lineno">  165</span>      serialized_signature[0] = 0x01;</div>
<div class="line"><span class="lineno">  166</span>      <a class="code hl_function" href="yubihsm__pkcs11_8c.html#ae785d5badbf1f08b491af31f32a135a1">memcpy</a>(serialized_signature+1, compact_sig.data, <span class="keyword">sizeof</span>(compact_sig));</div>
<div class="line"><span class="lineno">  167</span> </div>
<div class="line"><span class="lineno">  168</span>      <a class="code hl_class" href="classfc_1_1crypto_1_1signature.html">signature_type</a> final_signature;</div>
<div class="line"><span class="lineno">  169</span>      <a class="code hl_class" href="classfc_1_1datastream.html">fc::datastream&lt;const char *&gt;</a> <a class="code hl_function" href="namespace_xbyak_1_1util.html#a4b2aef26182d21706896022467868f7c">ds</a>(serialized_signature, <span class="keyword">sizeof</span>(serialized_signature));</div>
<div class="line"><span class="lineno">  170</span>      <a class="code hl_function" href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab">fc::raw::unpack</a>(ds, final_signature);</div>
<div class="line"><span class="lineno">  171</span>      <span class="keywordflow">return</span> final_signature;</div>
<div class="line"><span class="lineno">  172</span>   }</div>
<div class="ttc" id="abn_8cpp_html_af0a5201ca8846f05f25435b41d7f39f7"><div class="ttname"><a href="bn_8cpp.html#af0a5201ca8846f05f25435b41d7f39f7">r</a></div><div class="ttdeci">const mie::Vuint &amp; r</div><div class="ttdef"><b>Definition</b> <a href="bn_8cpp_source.html#l00028">bn.cpp:28</a></div></div>
<div class="ttc" id="aclassfc_1_1crypto_1_1signature_html"><div class="ttname"><a href="classfc_1_1crypto_1_1signature.html">fc::crypto::signature</a></div><div class="ttdef"><b>Definition</b> <a href="signature_8hpp_source.html#l00021">signature.hpp:22</a></div></div>
<div class="ttc" id="aclassfc_1_1public__key_html"><div class="ttname"><a href="classfc_1_1public__key.html">fc::public_key</a></div><div class="ttdef"><b>Definition</b> <a href="pke_8hpp_source.html#l00019">pke.hpp:20</a></div></div>
<div class="ttc" id="ainclude_2fc_2crypto_2bigint_8hpp_html_a62125ea4e1d748a4a9c1aed9766f451a"><div class="ttname"><a href="include_2fc_2crypto_2bigint_8hpp.html#a62125ea4e1d748a4a9c1aed9766f451a">BIGNUM</a></div><div class="ttdeci">bignum_st BIGNUM</div><div class="ttdef"><b>Definition</b> <a href="include_2fc_2crypto_2bigint_8hpp_source.html#l00007">bigint.hpp:7</a></div></div>
<div class="ttc" id="anamespacefc_1_1crypto_1_1r1_html_a69fb535e6486039f3d86e9d5dd3ab954"><div class="ttname"><a href="namespacefc_1_1crypto_1_1r1.html#a69fb535e6486039f3d86e9d5dd3ab954">fc::crypto::r1::signature_from_ecdsa</a></div><div class="ttdeci">compact_signature signature_from_ecdsa(const EC_KEY *key, const public_key_data &amp;pub, fc::ecdsa_sig &amp;sig, const fc::sha256 &amp;d)</div><div class="ttdef"><b>Definition</b> <a href="elliptic__r1_8cpp_source.html#l00136">elliptic_r1.cpp:136</a></div></div>
<div class="ttc" id="anamespacefc_1_1crypto_1_1r1_html_ae05a9b8a3e71b719d56c0a87c491a8f6"><div class="ttname"><a href="namespacefc_1_1crypto_1_1r1.html#ae05a9b8a3e71b719d56c0a87c491a8f6">fc::crypto::r1::compact_signature</a></div><div class="ttdeci">fc::array&lt; unsigned char, 65 &gt; compact_signature</div><div class="ttdef"><b>Definition</b> <a href="elliptic__r1_8hpp_source.html#l00024">elliptic_r1.hpp:24</a></div></div>
<div class="ttc" id="anamespacefc_1_1raw_html_a3a18d8161aa5b4f4f02b6fcfdff5e5d1"><div class="ttname"><a href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a></div><div class="ttdeci">void pack(Stream &amp;s, const std::deque&lt; T &gt; &amp;value)</div><div class="ttdef"><b>Definition</b> <a href="raw_8hpp_source.html#l00531">raw.hpp:531</a></div></div>
<div class="ttc" id="aopenssl-compat_8c_html_ae2f28de42b8345422b7ac3b28f330b9b"><div class="ttname"><a href="openssl-compat_8c.html#ae2f28de42b8345422b7ac3b28f330b9b">ECDSA_SIG_set0</a></div><div class="ttdeci">int ECDSA_SIG_set0(ECDSA_SIG *sig, BIGNUM *r, BIGNUM *s)</div><div class="ttdef"><b>Definition</b> <a href="openssl-compat_8c_source.html#l00064">openssl-compat.c:64</a></div></div>
<div class="ttc" id="ayubihsm_8c_html_a5121c90d3bd745afd8264fef2ef39ace"><div class="ttname"><a href="yubihsm_8c.html#a5121c90d3bd745afd8264fef2ef39ace">yh_util_sign_ecdsa</a></div><div class="ttdeci">yh_rc yh_util_sign_ecdsa(yh_session *session, uint16_t key_id, const uint8_t *in, size_t in_len, uint8_t *out, size_t *out_len)</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8c_source.html#l01411">yubihsm.c:1411</a></div></div>
<div class="ttc" id="ayubihsm__pkcs11_8c_html_a107648633008a7f2d872b4b3d98c2f96"><div class="ttname"><a href="yubihsm__pkcs11_8c.html#a107648633008a7f2d872b4b3d98c2f96">d</a></div><div class="ttdeci">CK_ULONG d</div><div class="ttdef"><b>Definition</b> <a href="yubihsm__pkcs11_8c_source.html#l01238">yubihsm_pkcs11.c:1238</a></div></div>
<div class="ttc" id="ayubihsm__pkcs11_8c_html_a506da415c9307c897ca9be93acfe1d0f"><div class="ttname"><a href="yubihsm__pkcs11_8c.html#a506da415c9307c897ca9be93acfe1d0f">s</a></div><div class="ttdeci">char * s</div><div class="ttdef"><b>Definition</b> <a href="yubihsm__pkcs11_8c_source.html#l00524">yubihsm_pkcs11.c:524</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a8987016445813c0391f04894e9bdb002_cgraph.png" border="0" usemap="#astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a8987016445813c0391f04894e9bdb002_cgraph" alt=""/></div>
<map name="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a8987016445813c0391f04894e9bdb002_cgraph" id="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a8987016445813c0391f04894e9bdb002_cgraph">
<area shape="rect" title=" " alt="" coords="5,218,156,274"/>
<area shape="rect" href="openssl-compat_8c.html#ae2f28de42b8345422b7ac3b28f330b9b" title=" " alt="" coords="230,5,360,31"/>
<area shape="poly" title=" " alt="" coords="90,217,106,179,131,134,163,88,202,48,222,35,225,40,205,52,167,91,135,137,111,182,95,219"/>
<area shape="rect" href="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl.html#a5920ace754a2d851bdb11322372b849c" title=" " alt="" coords="204,131,386,172"/>
<area shape="poly" title=" " alt="" coords="142,215,203,188,229,176,232,181,205,193,144,220"/>
<area shape="rect" href="lib_2error_8c.html#a238eedb1e27dbff2a0ab9a3932eb3f8b" title=" " alt="" coords="1051,208,1134,234"/>
<area shape="poly" title=" " alt="" coords="99,216,142,164,170,138,202,117,282,82,349,68,419,65,507,66,707,66,790,68,856,77,919,98,994,133,1037,162,1072,195,1068,199,1034,167,992,138,917,103,855,83,790,74,707,71,507,71,419,70,350,73,284,87,205,122,174,143,145,168,103,220"/>
<area shape="rect" href="yubihsm__pkcs11_8c.html#ae785d5badbf1f08b491af31f32a135a1" title=" " alt="" coords="1057,408,1128,434"/>
<area shape="poly" title=" " alt="" coords="92,274,107,314,130,362,163,408,183,428,205,445,245,467,281,479,315,484,348,484,419,476,507,470,707,470,800,466,892,455,1041,429,1042,435,893,461,800,471,707,475,507,475,419,482,348,490,314,490,280,484,243,472,202,450,179,432,159,412,126,364,102,316,87,275"/>
<area shape="rect" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1" title=" " alt="" coords="246,271,344,296"/>
<area shape="poly" title=" " alt="" coords="156,257,231,270,230,275,155,262"/>
<area shape="rect" href="namespacefc_1_1crypto_1_1r1.html#a69fb535e6486039f3d86e9d5dd3ab954" title=" " alt="" coords="217,320,373,361"/>
<area shape="poly" title=" " alt="" coords="134,272,205,306,218,312,216,317,203,311,132,277"/>
<area shape="rect" href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab" title=" " alt="" coords="239,409,350,435"/>
<area shape="poly" title=" " alt="" coords="106,272,150,321,205,371,252,400,249,404,202,375,146,325,102,276"/>
<area shape="rect" href="yubihsm_8c.html#a5121c90d3bd745afd8264fef2ef39ace" title=" " alt="" coords="442,284,575,310"/>
<area shape="poly" title=" " alt="" coords="156,229,207,223,266,220,327,222,387,232,436,250,477,273,475,278,433,255,385,237,326,227,266,225,208,228,156,235"/>
<area shape="rect" href="yubihsm_8c.html#a1a35f8ae5a739848408633a514e41b2d" title=" " alt="" coords="637,107,774,132"/>
<area shape="poly" title=" " alt="" coords="386,142,621,123,622,129,386,147"/>
<area shape="rect" href="yubihsm_8c.html#ab12d5a42d2219741bd3630b99ed1c7d2" title=" " alt="" coords="653,157,758,183"/>
<area shape="poly" title=" " alt="" coords="386,153,637,164,637,170,386,158"/>
<area shape="rect" href="yubihsm_8c.html#a61ab8dbab67b1cceb49cd306f8c3f4b1" title=" " alt="" coords="434,208,583,234"/>
<area shape="poly" title=" " alt="" coords="361,170,453,200,451,205,359,175"/>
<area shape="poly" title=" " alt="" coords="775,124,879,141,937,154,994,170,1056,198,1054,202,992,175,936,159,878,146,774,130"/>
<area shape="poly" title=" " alt="" coords="759,172,867,183,993,200,1037,207,1036,212,993,205,866,189,758,177"/>
<area shape="poly" title=" " alt="" coords="584,218,1035,218,1035,224,584,224"/>
<area shape="rect" href="yubihsm_8c.html#a4c26f003b72e800e9c934bca922a404a" title=" " alt="" coords="631,309,780,335"/>
<area shape="poly" title=" " alt="" coords="537,232,667,300,664,304,535,237"/>
<area shape="rect" href="yubihsm_8c.html#a77870209747d5ccd90f9da3aae2bdfa8" title=" " alt="" coords="828,359,993,384"/>
<area shape="poly" title=" " alt="" coords="763,333,840,352,838,357,761,338"/>
<area shape="rect" href="yubihsm_8c.html#a0e96ea59c5f32def80843fec5a3c2142" title=" " alt="" coords="845,309,976,335"/>
<area shape="poly" title=" " alt="" coords="780,320,830,320,830,325,780,325"/>
<area shape="poly" title=" " alt="" coords="971,356,991,345,1009,329,1031,303,1072,245,1076,248,1035,306,1013,332,995,350,974,360"/>
<area shape="poly" title=" " alt="" coords="961,382,1043,405,1041,410,960,388"/>
<area shape="rect" href="yubihsm__pkcs11_8c.html#adc4bd59a60361844aa0e852efa210105" title=" " alt="" coords="1058,359,1127,384"/>
<area shape="poly" title=" " alt="" coords="994,369,1043,369,1043,374,994,374"/>
<area shape="poly" title=" " alt="" coords="950,306,992,288,1062,241,1065,246,994,293,952,311"/>
<area shape="poly" title=" " alt="" coords="972,333,994,344,1010,356,1020,369,1029,382,1043,395,1047,398,1044,402,1039,399,1025,385,1015,372,1006,360,992,348,970,338"/>
<area shape="rect" href="rand_8c.html#a2d3d1e86f4093fbe0a1b2a7eede4cd75" title=" " alt="" coords="1041,309,1144,335"/>
<area shape="poly" title=" " alt="" coords="976,320,1025,320,1025,325,976,325"/>
<area shape="poly" title=" " alt="" coords="259,272,252,262,256,252,271,246,295,244,321,247,334,254,332,258,320,252,295,249,272,251,260,256,258,261,263,269"/>
<area shape="poly" title=" " alt="" coords="259,411,252,401,256,391,271,385,295,383,321,385,334,392,332,397,320,390,295,388,272,390,260,395,258,400,263,407"/>
<area shape="poly" title=" " alt="" coords="575,286,1035,225,1036,231,575,291"/>
<area shape="poly" title=" " alt="" coords="576,303,616,308,615,313,575,308"/>
<area shape="poly" title=" " alt="" coords="539,308,632,345,729,375,828,394,943,409,1042,416,1041,421,942,414,827,399,728,380,630,350,537,313"/>
</map>
</div>

</div>
</div>
<a id="a00ee0ac7ac4a819d0b8755bf4f442263" name="a00ee0ac7ac4a819d0b8755bf4f442263"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00ee0ac7ac4a819d0b8755bf4f442263">&#9670;&#160;</a></span>unlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::wallet::detail::yubihsm_wallet_impl::unlock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacefc.html#a0f3d84fe9e7adcd2d1e0bb7b60b49aa0">string</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>password</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="yubihsm__wallet_8cpp_source.html#l00063">63</a> of file <a class="el" href="yubihsm__wallet_8cpp_source.html">yubihsm_wallet.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   63</span>                                       {</div>
<div class="line"><span class="lineno">   64</span>      <a class="code hl_enumeration" href="yubihsm_8h.html#ae4f602d2343d01b1727dfd633169d366">yh_rc</a> <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a>;</div>
<div class="line"><span class="lineno">   65</span> </div>
<div class="line"><span class="lineno">   66</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">   67</span>         <span class="keywordflow">if</span>((<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a> = <a class="code hl_function" href="yubihsm_8c.html#a9c700747902a722d6c1d2073277de294">yh_init_connector</a>(<a class="code hl_variable" href="#a84c5a15f3ed4be1039139f262afe9902">endpoint</a>.c_str(), &amp;<a class="code hl_variable" href="#a3fc0c601d7e7a46bc3fa2cb24173bfd0">connector</a>)))</div>
<div class="line"><span class="lineno">   68</span>            <a class="code hl_define" href="exception_8hpp.html#a7590ddac4f181b661c3eeaf5feccc6ac">FC_THROW_EXCEPTION</a>(chain::wallet_exception, <span class="stringliteral">&quot;Failled to initialize yubihsm connector URL: ${c}&quot;</span>, (<span class="stringliteral">&quot;c&quot;</span>, <a class="code hl_function" href="lib_2error_8c.html#a238eedb1e27dbff2a0ab9a3932eb3f8b">yh_strerror</a>(<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a>)));</div>
<div class="line"><span class="lineno">   69</span>         <span class="keywordflow">if</span>((<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a> = <a class="code hl_function" href="yubihsm_8c.html#aa19be6ac70a2a5d1cef8d7e6902fe05f">yh_connect</a>(<a class="code hl_variable" href="#a3fc0c601d7e7a46bc3fa2cb24173bfd0">connector</a>, 0)))</div>
<div class="line"><span class="lineno">   70</span>            <a class="code hl_define" href="exception_8hpp.html#a7590ddac4f181b661c3eeaf5feccc6ac">FC_THROW_EXCEPTION</a>(chain::wallet_exception, <span class="stringliteral">&quot;Failed to connect to YubiHSM connector: ${m}&quot;</span>, (<span class="stringliteral">&quot;m&quot;</span>, <a class="code hl_function" href="lib_2error_8c.html#a238eedb1e27dbff2a0ab9a3932eb3f8b">yh_strerror</a>(<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a>)));</div>
<div class="line"><span class="lineno">   71</span>         <span class="keywordflow">if</span>((<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a> = <a class="code hl_function" href="yubihsm_8c.html#a3be331dcf8907ff3569e4dc230e1c615">yh_create_session_derived</a>(<a class="code hl_variable" href="#a3fc0c601d7e7a46bc3fa2cb24173bfd0">connector</a>, <a class="code hl_variable" href="#a302ef005c4374995ad2f38dae8c52660">authkey</a>, (<span class="keyword">const</span> <a class="code hl_typedef" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *)password.data(), password.size(), <span class="keyword">false</span>, &amp;<a class="code hl_variable" href="#a404062c94817a821f452eb9a58237602">session</a>)))</div>
<div class="line"><span class="lineno">   72</span>            <a class="code hl_define" href="exception_8hpp.html#a7590ddac4f181b661c3eeaf5feccc6ac">FC_THROW_EXCEPTION</a>(chain::wallet_exception, <span class="stringliteral">&quot;Failed to create YubiHSM session: ${m}&quot;</span>, (<span class="stringliteral">&quot;m&quot;</span>, <a class="code hl_function" href="lib_2error_8c.html#a238eedb1e27dbff2a0ab9a3932eb3f8b">yh_strerror</a>(<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a>)));</div>
<div class="line"><span class="lineno">   73</span>         <span class="keywordflow">if</span>((<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a> = <a class="code hl_function" href="yubihsm_8c.html#a77870209747d5ccd90f9da3aae2bdfa8">yh_authenticate_session</a>(<a class="code hl_variable" href="#a404062c94817a821f452eb9a58237602">session</a>)))</div>
<div class="line"><span class="lineno">   74</span>            <a class="code hl_define" href="exception_8hpp.html#a7590ddac4f181b661c3eeaf5feccc6ac">FC_THROW_EXCEPTION</a>(chain::wallet_exception, <span class="stringliteral">&quot;Failed to authenticate YubiHSM session: ${m}&quot;</span>, (<span class="stringliteral">&quot;m&quot;</span>, <a class="code hl_function" href="lib_2error_8c.html#a238eedb1e27dbff2a0ab9a3932eb3f8b">yh_strerror</a>(<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a>)));</div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span>         <a class="code hl_struct" href="structyh__object__descriptor.html">yh_object_descriptor</a> authkey_desc;</div>
<div class="line"><span class="lineno">   77</span>         <span class="keywordflow">if</span>((<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a> = <a class="code hl_function" href="yubihsm_8c.html#a7b5f1f0c1cbca11fbe21e7e4e6b29a1b">yh_util_get_object_info</a>(<a class="code hl_variable" href="#a404062c94817a821f452eb9a58237602">session</a>, <a class="code hl_variable" href="#a302ef005c4374995ad2f38dae8c52660">authkey</a>, <a class="code hl_enumvalue" href="yubihsm_8h.html#a2fe39512cb4df34b270a67dbb8e13583acee44b775b3c5b6157f0732699935074">YH_AUTHENTICATION_KEY</a>, &amp;authkey_desc)))</div>
<div class="line"><span class="lineno">   78</span>            <a class="code hl_define" href="exception_8hpp.html#a7590ddac4f181b661c3eeaf5feccc6ac">FC_THROW_EXCEPTION</a>(chain::wallet_exception, <span class="stringliteral">&quot;Failed to get authkey info: ${m}&quot;</span>, (<span class="stringliteral">&quot;m&quot;</span>, <a class="code hl_function" href="lib_2error_8c.html#a238eedb1e27dbff2a0ab9a3932eb3f8b">yh_strerror</a>(<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a>)));</div>
<div class="line"><span class="lineno">   79</span> </div>
<div class="line"><span class="lineno">   80</span>         <a class="code hl_variable" href="#a00ad07ae762532d33f79d0044c3eda48">authkey_caps</a> = authkey_desc.<a class="code hl_variable" href="structyh__object__descriptor.html#a94fcb9bbe5ffacadafc207c166f6239f">capabilities</a>;</div>
<div class="line"><span class="lineno">   81</span>         <a class="code hl_variable" href="#a47e114b6d65d657d7dacfd0d2e850f0b">authkey_domains</a> = authkey_desc.<a class="code hl_variable" href="structyh__object__descriptor.html#a31a501a1378bc07a3320febdb21fc898">domains</a>;</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>         <span class="keywordflow">if</span>(!<a class="code hl_function" href="yubihsm_8c.html#aba384949362ccaf19cbeae3bb046489c">yh_check_capability</a>(&amp;<a class="code hl_variable" href="#a00ad07ae762532d33f79d0044c3eda48">authkey_caps</a>, <span class="stringliteral">&quot;sign-ecdsa&quot;</span>))</div>
<div class="line"><span class="lineno">   84</span>            <a class="code hl_define" href="exception_8hpp.html#a7590ddac4f181b661c3eeaf5feccc6ac">FC_THROW_EXCEPTION</a>(chain::wallet_exception, <span class="stringliteral">&quot;Given authkey cannot perform signing&quot;</span>);</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>         <span class="keywordtype">size_t</span> found_objects_n = 64*1024;</div>
<div class="line"><span class="lineno">   87</span>         <a class="code hl_struct" href="structyh__object__descriptor.html">yh_object_descriptor</a> found_objs[found_objects_n];</div>
<div class="line"><span class="lineno">   88</span>         <a class="code hl_struct" href="structyh__capabilities.html">yh_capabilities</a> find_caps;</div>
<div class="line"><span class="lineno">   89</span>         <a class="code hl_function" href="yubihsm_8c.html#aab440e1cb671d9ba7a2e7d1243960e42">yh_string_to_capabilities</a>(<span class="stringliteral">&quot;sign-ecdsa&quot;</span>, &amp;find_caps);</div>
<div class="line"><span class="lineno">   90</span>         <span class="keywordflow">if</span>((<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a> = <a class="code hl_function" href="yubihsm_8c.html#a7cbea7103efff8473ccfaaa35bfc6346">yh_util_list_objects</a>(<a class="code hl_variable" href="#a404062c94817a821f452eb9a58237602">session</a>, 0, <a class="code hl_enumvalue" href="yubihsm_8h.html#a2fe39512cb4df34b270a67dbb8e13583ab71424e16384319d6e6a12f9a3d8ceae">YH_ASYMMETRIC_KEY</a>, 0, &amp;find_caps, <a class="code hl_enumvalue" href="yubihsm_8h.html#a498937b5a72accbb0ef21bb1dcdd55caae4b191baf5c65f9234120080264d129b">YH_ALGO_EC_P256</a>, <span class="keyword">nullptr</span>, found_objs, &amp;found_objects_n)))</div>
<div class="line"><span class="lineno">   91</span>            <a class="code hl_define" href="exception_8hpp.html#a7590ddac4f181b661c3eeaf5feccc6ac">FC_THROW_EXCEPTION</a>(chain::wallet_exception, <span class="stringliteral">&quot;yh_util_list_objects failed: ${m}&quot;</span>, (<span class="stringliteral">&quot;m&quot;</span>, <a class="code hl_function" href="lib_2error_8c.html#a238eedb1e27dbff2a0ab9a3932eb3f8b">yh_strerror</a>(<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a97917e1d5a9fa5e8b7a4495dc9234ac7">rc</a>)));</div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>         <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i &lt; found_objects_n; ++i)</div>
<div class="line"><span class="lineno">   94</span>            <a class="code hl_function" href="#adbeac5d7c3d1ad9d3cb6c37cc996d8c5">populate_key_map_with_keyid</a>(found_objs[i].<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">   95</span>      }</div>
<div class="line"><span class="lineno">   96</span>      <span class="keywordflow">catch</span>(chain::wallet_exception&amp; e) {</div>
<div class="line"><span class="lineno">   97</span>         <a class="code hl_function" href="#a5920ace754a2d851bdb11322372b849c">lock</a>();</div>
<div class="line"><span class="lineno">   98</span>         <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">   99</span>      }</div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  101</span>      <a class="code hl_function" href="#a6412f92a0ad381f2370582372a5b6082">prime_keepalive_timer</a>();</div>
<div class="line"><span class="lineno">  102</span>   }</div>
<div class="ttc" id="astructyh__object__descriptor_html"><div class="ttname"><a href="structyh__object__descriptor.html">yh_object_descriptor</a></div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8h_source.html#l00540">yubihsm.h:540</a></div></div>
<div class="ttc" id="astructyh__object__descriptor_html_a31a501a1378bc07a3320febdb21fc898"><div class="ttname"><a href="structyh__object__descriptor.html#a31a501a1378bc07a3320febdb21fc898">yh_object_descriptor::domains</a></div><div class="ttdeci">uint16_t domains</div><div class="ttdoc">Object domains.</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8h_source.html#l00548">yubihsm.h:548</a></div></div>
<div class="ttc" id="astructyh__object__descriptor_html_a94fcb9bbe5ffacadafc207c166f6239f"><div class="ttname"><a href="structyh__object__descriptor.html#a94fcb9bbe5ffacadafc207c166f6239f">yh_object_descriptor::capabilities</a></div><div class="ttdeci">yh_capabilities capabilities</div><div class="ttdoc">Object capabilities.</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8h_source.html#l00542">yubihsm.h:542</a></div></div>
<div class="ttc" id="ayubihsm_8c_html_a3be331dcf8907ff3569e4dc230e1c615"><div class="ttname"><a href="yubihsm_8c.html#a3be331dcf8907ff3569e4dc230e1c615">yh_create_session_derived</a></div><div class="ttdeci">yh_rc yh_create_session_derived(yh_connector *connector, uint16_t authkey_id, const uint8_t *password, size_t password_len, bool recreate, yh_session **session)</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8c_source.html#l00593">yubihsm.c:593</a></div></div>
<div class="ttc" id="ayubihsm_8c_html_a77870209747d5ccd90f9da3aae2bdfa8"><div class="ttname"><a href="yubihsm_8c.html#a77870209747d5ccd90f9da3aae2bdfa8">yh_authenticate_session</a></div><div class="ttdeci">yh_rc yh_authenticate_session(yh_session *session)</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8c_source.html#l02927">yubihsm.c:2927</a></div></div>
<div class="ttc" id="ayubihsm_8c_html_a7b5f1f0c1cbca11fbe21e7e4e6b29a1b"><div class="ttname"><a href="yubihsm_8c.html#a7b5f1f0c1cbca11fbe21e7e4e6b29a1b">yh_util_get_object_info</a></div><div class="ttdeci">yh_rc yh_util_get_object_info(yh_session *session, uint16_t id, yh_object_type type, yh_object_descriptor *object)</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8c_source.html#l01128">yubihsm.c:1128</a></div></div>
<div class="ttc" id="ayubihsm_8c_html_a7cbea7103efff8473ccfaaa35bfc6346"><div class="ttname"><a href="yubihsm_8c.html#a7cbea7103efff8473ccfaaa35bfc6346">yh_util_list_objects</a></div><div class="ttdeci">yh_rc yh_util_list_objects(yh_session *session, uint16_t id, yh_object_type type, uint16_t domains, const yh_capabilities *capabilities, yh_algorithm algorithm, const char *label, yh_object_descriptor *objects, size_t *n_objects)</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8c_source.html#l01030">yubihsm.c:1030</a></div></div>
<div class="ttc" id="ayubihsm_8c_html_a9c700747902a722d6c1d2073277de294"><div class="ttname"><a href="yubihsm_8c.html#a9c700747902a722d6c1d2073277de294">yh_init_connector</a></div><div class="ttdeci">yh_rc yh_init_connector(const char *url, yh_connector **connector)</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8c_source.html#l04024">yubihsm.c:4024</a></div></div>
<div class="ttc" id="ayubihsm_8c_html_aa19be6ac70a2a5d1cef8d7e6902fe05f"><div class="ttname"><a href="yubihsm_8c.html#aa19be6ac70a2a5d1cef8d7e6902fe05f">yh_connect</a></div><div class="ttdeci">yh_rc yh_connect(yh_connector *connector, int timeout)</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8c_source.html#l04079">yubihsm.c:4079</a></div></div>
<div class="ttc" id="ayubihsm_8h_html_a2fe39512cb4df34b270a67dbb8e13583ab71424e16384319d6e6a12f9a3d8ceae"><div class="ttname"><a href="yubihsm_8h.html#a2fe39512cb4df34b270a67dbb8e13583ab71424e16384319d6e6a12f9a3d8ceae">YH_ASYMMETRIC_KEY</a></div><div class="ttdeci">@ YH_ASYMMETRIC_KEY</div><div class="ttdoc">Asymmetric Key is the private key of an asymmetric key-pair.</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8h_source.html#l00366">yubihsm.h:366</a></div></div>
<div class="ttc" id="ayubihsm_8h_html_a2fe39512cb4df34b270a67dbb8e13583acee44b775b3c5b6157f0732699935074"><div class="ttname"><a href="yubihsm_8h.html#a2fe39512cb4df34b270a67dbb8e13583acee44b775b3c5b6157f0732699935074">YH_AUTHENTICATION_KEY</a></div><div class="ttdeci">@ YH_AUTHENTICATION_KEY</div><div class="ttdoc">Authentication Key is used to establish Sessions with a device.</div><div class="ttdef"><b>Definition</b> <a href="yubihsm_8h_source.html#l00364">yubihsm.h:364</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a00ee0ac7ac4a819d0b8755bf4f442263_cgraph.png" border="0" usemap="#astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a00ee0ac7ac4a819d0b8755bf4f442263_cgraph" alt=""/></div>
<map name="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a00ee0ac7ac4a819d0b8755bf4f442263_cgraph" id="astructsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl_a00ee0ac7ac4a819d0b8755bf4f442263_cgraph">
<area shape="rect" title=" " alt="" coords="5,538,156,594"/>
<area shape="rect" href="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl.html#a5920ace754a2d851bdb11322372b849c" title=" " alt="" coords="424,250,606,291"/>
<area shape="poly" title=" " alt="" coords="83,537,93,483,114,416,130,382,149,348,173,318,202,293,250,268,303,255,357,250,408,251,408,256,357,255,304,260,252,273,205,298,177,322,154,351,135,384,119,418,98,485,88,538"/>
<area shape="rect" href="lib_2error_8c.html#a238eedb1e27dbff2a0ab9a3932eb3f8b" title=" " alt="" coords="1319,361,1403,387"/>
<area shape="poly" title=" " alt="" coords="83,537,94,480,116,404,151,325,174,287,202,254,273,187,306,163,340,145,376,132,416,124,513,118,960,118,1048,113,1120,107,1154,109,1188,116,1224,131,1263,156,1285,176,1303,199,1331,251,1349,303,1358,346,1353,347,1344,304,1326,253,1299,202,1281,179,1260,160,1221,136,1186,121,1153,114,1120,112,1049,118,960,124,513,124,417,129,378,138,342,150,309,168,277,191,206,257,178,290,155,327,121,406,99,481,88,538"/>
<area shape="rect" href="yubihsm_8c.html#a77870209747d5ccd90f9da3aae2bdfa8" title=" " alt="" coords="1096,615,1261,640"/>
<area shape="poly" title=" " alt="" coords="115,592,183,646,278,707,333,734,392,756,452,771,513,777,745,777,803,773,862,762,920,747,975,727,1071,684,1142,646,1144,651,1074,689,976,732,921,752,863,768,804,778,745,782,513,782,451,777,390,761,331,739,276,711,180,650,112,597"/>
<area shape="rect" href="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl.html#adbeac5d7c3d1ad9d3cb6c37cc996d8c5" title=" " alt="" coords="411,505,618,561"/>
<area shape="poly" title=" " alt="" coords="156,558,395,539,396,545,156,563"/>
<area shape="rect" href="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl.html#a6412f92a0ad381f2370582372a5b6082" title=" " alt="" coords="204,332,363,387"/>
<area shape="poly" title=" " alt="" coords="96,537,140,473,169,437,202,404,214,394,218,398,205,408,173,441,144,476,101,540"/>
<area shape="rect" href="yubihsm_8c.html#aba384949362ccaf19cbeae3bb046489c" title=" " alt="" coords="214,969,353,995"/>
<area shape="poly" title=" " alt="" coords="86,594,93,664,111,758,127,809,147,859,173,906,206,948,219,960,216,964,202,952,169,909,142,861,122,811,106,760,87,665,80,595"/>
<area shape="rect" href="yubihsm_8c.html#aab440e1cb671d9ba7a2e7d1243960e42" title=" " alt="" coords="1096,868,1261,894"/>
<area shape="poly" title=" " alt="" coords="85,594,91,660,109,746,124,790,145,833,172,872,205,904,244,929,280,943,314,949,348,948,422,937,465,931,513,929,745,929,838,926,930,917,1091,894,1092,900,931,922,838,931,745,934,513,934,465,937,422,942,348,953,313,954,278,948,242,934,202,908,168,875,140,836,119,792,104,747,86,661,80,595"/>
<area shape="rect" href="yubihsm_8c.html#aa19be6ac70a2a5d1cef8d7e6902fe05f" title=" " alt="" coords="470,57,559,83"/>
<area shape="poly" title=" " alt="" coords="82,538,96,439,120,307,137,241,156,181,177,133,202,100,230,80,262,66,295,57,330,51,397,50,455,56,455,61,397,55,330,57,296,62,264,71,233,85,206,104,182,135,161,183,142,242,126,308,101,440,88,539"/>
<area shape="rect" href="yubihsm_8c.html#a3be331dcf8907ff3569e4dc230e1c615" title=" " alt="" coords="869,361,1048,387"/>
<area shape="poly" title=" " alt="" coords="155,542,203,529,573,446,869,388,870,393,574,452,204,534,156,547"/>
<area shape="rect" href="yubihsm_8c.html#a9c700747902a722d6c1d2073277de294" title=" " alt="" coords="222,868,345,894"/>
<area shape="poly" title=" " alt="" coords="89,594,102,647,124,715,158,785,180,818,205,847,221,858,217,863,202,851,176,821,153,788,119,717,97,649,84,595"/>
<area shape="rect" href="yubihsm_8c.html#a7b5f1f0c1cbca11fbe21e7e4e6b29a1b" title=" " alt="" coords="666,585,821,611"/>
<area shape="poly" title=" " alt="" coords="156,567,651,591,651,596,156,573"/>
<area shape="rect" href="yubihsm_8c.html#a7cbea7103efff8473ccfaaa35bfc6346" title=" " alt="" coords="677,817,810,843"/>
<area shape="poly" title=" " alt="" coords="90,594,103,640,125,696,158,752,180,776,205,796,240,811,288,822,347,830,411,834,545,836,662,832,662,838,546,841,411,839,346,835,287,827,238,816,202,801,176,780,154,755,120,699,98,642,85,595"/>
<area shape="rect" href="yubihsm_8c.html#a1a35f8ae5a739848408633a514e41b2d" title=" " alt="" coords="1110,209,1247,235"/>
<area shape="poly" title=" " alt="" coords="606,252,666,245,899,228,1094,221,1095,226,899,234,667,250,607,258"/>
<area shape="rect" href="yubihsm_8c.html#ab12d5a42d2219741bd3630b99ed1c7d2" title=" " alt="" coords="906,159,1011,184"/>
<area shape="poly" title=" " alt="" coords="553,247,606,222,666,201,724,188,784,179,890,170,890,176,784,184,725,193,667,206,608,227,555,252"/>
<area shape="rect" href="yubihsm_8c.html#a61ab8dbab67b1cceb49cd306f8c3f4b1" title=" " alt="" coords="669,260,818,286"/>
<area shape="poly" title=" " alt="" coords="606,269,653,269,653,275,606,274"/>
<area shape="poly" title=" " alt="" coords="1227,233,1263,252,1289,274,1311,299,1346,346,1342,349,1307,302,1285,278,1260,256,1225,238"/>
<area shape="poly" title=" " alt="" coords="1011,159,1067,154,1132,155,1200,167,1233,179,1263,195,1299,227,1325,268,1344,310,1356,346,1351,347,1339,312,1321,271,1295,231,1260,199,1230,183,1199,172,1132,160,1067,160,1012,165"/>
<area shape="poly" title=" " alt="" coords="819,262,910,258,1022,260,1144,273,1204,285,1262,302,1303,324,1337,349,1334,353,1301,328,1260,307,1203,290,1143,278,1022,265,910,263,819,268"/>
<area shape="rect" href="yubihsm_8c.html#a4c26f003b72e800e9c934bca922a404a" title=" " alt="" coords="884,463,1032,488"/>
<area shape="poly" title=" " alt="" coords="759,284,870,398,931,451,927,455,867,402,755,288"/>
<area shape="poly" title=" " alt="" coords="981,487,1148,604,1144,608,977,491"/>
<area shape="rect" href="yubihsm_8c.html#a0e96ea59c5f32def80843fec5a3c2142" title=" " alt="" coords="1114,513,1244,539"/>
<area shape="poly" title=" " alt="" coords="1018,486,1105,507,1104,512,1017,492"/>
<area shape="poly" title=" " alt="" coords="1230,612,1259,594,1276,566,1300,513,1346,401,1351,403,1305,515,1281,568,1263,597,1233,616"/>
<area shape="rect" href="yubihsm__pkcs11_8c.html#ae785d5badbf1f08b491af31f32a135a1" title=" " alt="" coords="1325,716,1397,742"/>
<area shape="poly" title=" " alt="" coords="1221,639,1263,657,1333,704,1330,708,1260,662,1219,643"/>
<area shape="rect" href="yubihsm__pkcs11_8c.html#adc4bd59a60361844aa0e852efa210105" title=" " alt="" coords="1327,868,1395,894"/>
<area shape="poly" title=" " alt="" coords="1192,639,1344,854,1340,857,1187,642"/>
<area shape="poly" title=" " alt="" coords="1225,510,1260,492,1285,471,1307,446,1342,399,1346,402,1311,450,1289,474,1263,496,1227,515"/>
<area shape="poly" title=" " alt="" coords="1198,538,1263,600,1308,654,1344,702,1340,705,1304,657,1259,604,1194,541"/>
<area shape="rect" href="rand_8c.html#a2d3d1e86f4093fbe0a1b2a7eede4cd75" title=" " alt="" coords="1309,513,1413,539"/>
<area shape="poly" title=" " alt="" coords="1244,524,1294,524,1294,529,1244,529"/>
<area shape="poly" title=" " alt="" coords="553,502,611,464,687,419,775,377,821,360,868,346,928,336,989,330,1110,332,1219,344,1304,359,1303,364,1218,349,1109,337,989,335,928,341,869,351,823,365,777,382,689,424,613,468,556,507"/>
<area shape="poly" title=" " alt="" coords="559,559,610,591,667,621,782,669,875,697,972,711,1096,722,1211,727,1310,727,1310,733,1211,733,1096,728,971,717,874,702,780,674,665,626,607,595,556,564"/>
<area shape="rect" href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab" title=" " alt="" coords="688,487,799,512"/>
<area shape="poly" title=" " alt="" coords="618,515,672,507,673,512,619,520"/>
<area shape="rect" href="yubihsm_8c.html#aa7b8b42156c4bdaf41d8b9758a2fd73f" title=" " alt="" coords="667,536,820,562"/>
<area shape="poly" title=" " alt="" coords="619,537,652,540,651,545,618,543"/>
<area shape="poly" title=" " alt="" coords="708,488,701,478,705,468,720,462,744,460,770,463,783,470,781,474,768,468,743,465,721,467,709,472,706,478,712,485"/>
<area shape="poly" title=" " alt="" coords="801,533,819,523,834,505,842,486,849,466,867,448,902,432,950,418,1070,396,1198,382,1304,374,1304,380,1199,388,1071,402,951,423,904,437,870,452,854,469,847,488,839,507,822,527,804,538"/>
<area shape="poly" title=" " alt="" coords="787,533,820,522,905,492,907,497,822,527,789,538"/>
<area shape="poly" title=" " alt="" coords="789,560,1097,650,1262,694,1311,710,1310,715,1261,699,1095,655,788,565"/>
<area shape="poly" title=" " alt="" coords="356,329,445,294,447,299,358,334"/>
<area shape="poly" title=" " alt="" coords="364,370,821,448,871,457,870,462,820,453,363,375"/>
<area shape="poly" title=" " alt="" coords="243,331,244,321,251,313,264,307,283,305,305,308,318,315,315,319,303,313,283,310,266,312,254,317,249,323,249,331"/>
<area shape="poly" title=" " alt="" coords="354,987,485,995,659,997,755,993,854,984,952,969,1047,948,1100,927,1145,901,1147,905,1102,931,1049,953,953,975,854,989,755,998,659,1002,484,1001,353,992"/>
<area shape="poly" title=" " alt="" coords="1182,867,1259,652,1307,500,1346,400,1351,402,1312,502,1264,654,1187,868"/>
<area shape="poly" title=" " alt="" coords="1225,865,1260,847,1285,825,1307,801,1342,754,1346,757,1311,804,1289,829,1263,851,1227,870"/>
<area shape="poly" title=" " alt="" coords="1261,878,1311,878,1311,884,1261,884"/>
<area shape="poly" title=" " alt="" coords="559,55,690,24,778,11,874,4,976,6,1077,20,1127,33,1174,50,1220,73,1263,100,1290,125,1312,155,1329,189,1341,224,1356,291,1362,346,1356,346,1351,292,1336,225,1324,191,1307,158,1286,129,1260,104,1217,77,1172,55,1125,38,1076,25,975,11,875,9,778,16,691,30,560,60"/>
<area shape="poly" title=" " alt="" coords="1048,372,1304,372,1304,377,1048,377"/>
<area shape="poly" title=" " alt="" coords="981,386,1148,502,1144,507,977,390"/>
<area shape="poly" title=" " alt="" coords="787,582,820,572,934,537,1047,498,1194,441,1314,391,1316,396,1196,446,1049,503,936,542,821,577,788,587"/>
<area shape="poly" title=" " alt="" coords="800,582,819,572,834,556,842,540,851,523,867,505,889,493,891,497,870,510,855,526,847,542,839,559,822,576,803,587"/>
<area shape="poly" title=" " alt="" coords="786,609,922,651,1009,674,1097,694,1211,712,1310,722,1309,728,1210,717,1095,700,1008,679,921,656,784,614"/>
<area shape="poly" title=" " alt="" coords="760,815,894,717,991,655,1095,600,1142,585,1182,580,1219,573,1239,564,1260,550,1292,515,1318,475,1336,436,1349,401,1354,403,1341,438,1322,478,1296,519,1263,554,1241,569,1221,578,1183,585,1143,590,1097,605,994,660,897,721,763,819"/>
<area shape="poly" title=" " alt="" coords="751,815,939,500,944,503,755,818"/>
<area shape="poly" title=" " alt="" coords="810,835,901,840,1015,839,1139,826,1201,813,1260,796,1301,775,1334,750,1337,754,1303,780,1262,801,1202,818,1140,831,1016,844,901,845,810,840"/>
<area shape="poly" title=" " alt="" coords="786,841,872,866,989,891,1056,901,1124,907,1193,908,1261,904,1311,893,1312,898,1262,909,1193,914,1124,912,1055,906,988,896,870,871,784,846"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a948f3999fdf3a68b107c100453bf9f89" name="a948f3999fdf3a68b107c100453bf9f89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a948f3999fdf3a68b107c100453bf9f89">&#9670;&#160;</a></span>_keys</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">map&lt;<a class="el" href="namespacesysio_1_1chain.html#a0628a11f388cd2e43b1ccc1260a1042f">public_key_type</a>,<a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&gt; sysio::wallet::detail::yubihsm_wallet_impl::_keys</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="yubihsm__wallet_8cpp_source.html#l00200">200</a> of file <a class="el" href="yubihsm__wallet_8cpp_source.html">yubihsm_wallet.cpp</a>.</p>

</div>
</div>
<a id="a302ef005c4374995ad2f38dae8c52660" name="a302ef005c4374995ad2f38dae8c52660"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a302ef005c4374995ad2f38dae8c52660">&#9670;&#160;</a></span>authkey</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> sysio::wallet::detail::yubihsm_wallet_impl::authkey</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="yubihsm__wallet_8cpp_source.html#l00198">198</a> of file <a class="el" href="yubihsm__wallet_8cpp_source.html">yubihsm_wallet.cpp</a>.</p>

</div>
</div>
<a id="a00ad07ae762532d33f79d0044c3eda48" name="a00ad07ae762532d33f79d0044c3eda48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00ad07ae762532d33f79d0044c3eda48">&#9670;&#160;</a></span>authkey_caps</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structyh__capabilities.html">yh_capabilities</a> sysio::wallet::detail::yubihsm_wallet_impl::authkey_caps</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="yubihsm__wallet_8cpp_source.html#l00202">202</a> of file <a class="el" href="yubihsm__wallet_8cpp_source.html">yubihsm_wallet.cpp</a>.</p>

</div>
</div>
<a id="a47e114b6d65d657d7dacfd0d2e850f0b" name="a47e114b6d65d657d7dacfd0d2e850f0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47e114b6d65d657d7dacfd0d2e850f0b">&#9670;&#160;</a></span>authkey_domains</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> sysio::wallet::detail::yubihsm_wallet_impl::authkey_domains</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="yubihsm__wallet_8cpp_source.html#l00203">203</a> of file <a class="el" href="yubihsm__wallet_8cpp_source.html">yubihsm_wallet.cpp</a>.</p>

</div>
</div>
<a id="a3fc0c601d7e7a46bc3fa2cb24173bfd0" name="a3fc0c601d7e7a46bc3fa2cb24173bfd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fc0c601d7e7a46bc3fa2cb24173bfd0">&#9670;&#160;</a></span>connector</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structyh__connector.html">yh_connector</a>* sysio::wallet::detail::yubihsm_wallet_impl::connector = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="yubihsm__wallet_8cpp_source.html#l00195">195</a> of file <a class="el" href="yubihsm__wallet_8cpp_source.html">yubihsm_wallet.cpp</a>.</p>

</div>
</div>
<a id="a84c5a15f3ed4be1039139f262afe9902" name="a84c5a15f3ed4be1039139f262afe9902"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84c5a15f3ed4be1039139f262afe9902">&#9670;&#160;</a></span>endpoint</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacefc.html#a0f3d84fe9e7adcd2d1e0bb7b60b49aa0">string</a> sysio::wallet::detail::yubihsm_wallet_impl::endpoint</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="yubihsm__wallet_8cpp_source.html#l00197">197</a> of file <a class="el" href="yubihsm__wallet_8cpp_source.html">yubihsm_wallet.cpp</a>.</p>

</div>
</div>
<a id="a1180885d46905bf11d2f1501bd244cb1" name="a1180885d46905bf11d2f1501bd244cb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1180885d46905bf11d2f1501bd244cb1">&#9670;&#160;</a></span>keepalive_timer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::asio::steady_timer sysio::wallet::detail::yubihsm_wallet_impl::keepalive_timer {<a class="el" href="namespaceappbase.html#a99374dc23934f008a09f2f79be9eae40">appbase::app</a>().get_io_service()}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="yubihsm__wallet_8cpp_source.html#l00205">205</a> of file <a class="el" href="yubihsm__wallet_8cpp_source.html">yubihsm_wallet.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  205</span>{<a class="code hl_function" href="namespaceappbase.html#a99374dc23934f008a09f2f79be9eae40">appbase::app</a>().<a class="code hl_function" href="classappbase_1_1application.html#a916a3366706654967671be9b82ab0e35">get_io_service</a>()};</div>
<div class="ttc" id="aclassappbase_1_1application_html_a916a3366706654967671be9b82ab0e35"><div class="ttname"><a href="classappbase_1_1application.html#a916a3366706654967671be9b82ab0e35">appbase::application::get_io_service</a></div><div class="ttdeci">boost::asio::io_service &amp; get_io_service()</div><div class="ttdef"><b>Definition</b> <a href="application_8hpp_source.html#l00205">application.hpp:205</a></div></div>
<div class="ttc" id="anamespaceappbase_html_a99374dc23934f008a09f2f79be9eae40"><div class="ttname"><a href="namespaceappbase.html#a99374dc23934f008a09f2f79be9eae40">appbase::app</a></div><div class="ttdeci">application &amp; app()</div><div class="ttdef"><b>Definition</b> <a href="application_8cpp_source.html#l00210">application.cpp:210</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac0eebf9643d30c4e0e28ff6398855a71" name="ac0eebf9643d30c4e0e28ff6398855a71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0eebf9643d30c4e0e28ff6398855a71">&#9670;&#160;</a></span>key</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fc::ec_key sysio::wallet::detail::yubihsm_wallet_impl::key = EC_KEY_new_by_curve_name(NID_X9_62_prime256v1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="yubihsm__wallet_8cpp_source.html#l00206">206</a> of file <a class="el" href="yubihsm__wallet_8cpp_source.html">yubihsm_wallet.cpp</a>.</p>

</div>
</div>
<a id="a404062c94817a821f452eb9a58237602" name="a404062c94817a821f452eb9a58237602"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a404062c94817a821f452eb9a58237602">&#9670;&#160;</a></span>session</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structyh__session.html">yh_session</a>* sysio::wallet::detail::yubihsm_wallet_impl::session = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="yubihsm__wallet_8cpp_source.html#l00196">196</a> of file <a class="el" href="yubihsm__wallet_8cpp_source.html">yubihsm_wallet.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>plugins/wallet_plugin/<a class="el" href="yubihsm__wallet_8cpp_source.html">yubihsm_wallet.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacesysio.html">sysio</a></li><li class="navelem"><a class="el" href="namespacesysio_1_1wallet.html">wallet</a></li><li class="navelem"><a class="el" href="namespacesysio_1_1wallet_1_1detail.html">detail</a></li><li class="navelem"><a class="el" href="structsysio_1_1wallet_1_1detail_1_1yubihsm__wallet__impl.html">yubihsm_wallet_impl</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
