<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wire Sysio: sysio::chain::detail::block_log_impl Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Wire Sysio<span id="projectnumber">&#160;Wire Sysion 1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classsysio_1_1chain_1_1detail_1_1block__log__impl.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classsysio_1_1chain_1_1detail_1_1block__log__impl-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">sysio::chain::detail::block_log_impl Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for sysio::chain::detail::block_log_impl:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1detail_1_1block__log__impl__coll__graph.png" border="0" usemap="#asysio_1_1chain_1_1detail_1_1block__log__impl_coll__map" alt="Collaboration graph"/></div>
<map name="asysio_1_1chain_1_1detail_1_1block__log__impl_coll__map" id="asysio_1_1chain_1_1detail_1_1block__log__impl_coll__map">
<area shape="rect" title=" " alt="" coords="29,109,160,150"/>
<area shape="rect" href="classfc_1_1sha256.html" title=" " alt="" coords="5,5,88,31"/>
<area shape="poly" title=" " alt="" coords="55,45,68,84,82,107,77,110,63,86,50,47"/>
<area shape="rect" href="classfc_1_1cfile.html" title=" " alt="" coords="112,5,176,31"/>
<area shape="poly" title=" " alt="" coords="135,46,117,86,106,110,101,108,112,84,130,44"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4492df3dcbaf1731cfc2de0d56d86e6e" id="r_a4492df3dcbaf1731cfc2de0d56d86e6e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4492df3dcbaf1731cfc2de0d56d86e6e">block_log_impl</a> (std::optional&lt; <a class="el" href="structsysio_1_1chain_1_1block__log__prune__config.html">block_log_prune_config</a> &gt; prune_conf)</td></tr>
<tr class="separator:a4492df3dcbaf1731cfc2de0d56d86e6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc78c993bbe5faed8a0a46d3b36eb0e8" id="r_adc78c993bbe5faed8a0a46d3b36eb0e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adc78c993bbe5faed8a0a46d3b36eb0e8">check_open_files</a> ()</td></tr>
<tr class="separator:adc78c993bbe5faed8a0a46d3b36eb0e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af92332d6e5756ef81998039527c3aa44" id="r_af92332d6e5756ef81998039527c3aa44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af92332d6e5756ef81998039527c3aa44">reopen</a> ()</td></tr>
<tr class="separator:af92332d6e5756ef81998039527c3aa44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31dfc2a521d5fa8eae9eb70c0012f748" id="r_a31dfc2a521d5fa8eae9eb70c0012f748"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a31dfc2a521d5fa8eae9eb70c0012f748">try_exit_vacuum</a> ()</td></tr>
<tr class="separator:a31dfc2a521d5fa8eae9eb70c0012f748"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae74e8b82422fd994eae49684c674181" id="r_aae74e8b82422fd994eae49684c674181"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aae74e8b82422fd994eae49684c674181">close</a> ()</td></tr>
<tr class="separator:aae74e8b82422fd994eae49684c674181"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7b6865819f90c5de5bdef7de1403a40" id="r_aa7b6865819f90c5de5bdef7de1403a40"><td class="memTemplParams" colspan="2">template&lt;typename <a class="el" href="prettywritertest_8cpp.html#a6283df8c4e365cc8a01727e2d7ad44bf">T</a> &gt; </td></tr>
<tr class="memitem:aa7b6865819f90c5de5bdef7de1403a40"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#aa7b6865819f90c5de5bdef7de1403a40">reset</a> (const <a class="el" href="prettywritertest_8cpp.html#a6283df8c4e365cc8a01727e2d7ad44bf">T</a> &amp;t, const <a class="el" href="namespacesysio_1_1chain.html#aa10ee348c57604b615bc8570f6685102">signed_block_ptr</a> &amp;genesis_block, <a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="#a386d5ccdef1827a955adfeb2650a641d">first_block_num</a>)</td></tr>
<tr class="separator:aa7b6865819f90c5de5bdef7de1403a40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a42f8e6e30d73b2369e2e5af4f0d76a" id="r_a7a42f8e6e30d73b2369e2e5af4f0d76a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7a42f8e6e30d73b2369e2e5af4f0d76a">write</a> (const <a class="el" href="structsysio_1_1chain_1_1genesis__state.html">genesis_state</a> &amp;gs)</td></tr>
<tr class="separator:a7a42f8e6e30d73b2369e2e5af4f0d76a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc9105c0592b8bbbfe879c51ec7f3241" id="r_acc9105c0592b8bbbfe879c51ec7f3241"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acc9105c0592b8bbbfe879c51ec7f3241">write</a> (const <a class="el" href="structsysio_1_1chain_1_1chain__id__type.html">chain_id_type</a> &amp;chain_id)</td></tr>
<tr class="separator:acc9105c0592b8bbbfe879c51ec7f3241"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fe3e126c7e5357f10db9d4c9244ded9" id="r_a3fe3e126c7e5357f10db9d4c9244ded9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3fe3e126c7e5357f10db9d4c9244ded9">flush</a> ()</td></tr>
<tr class="separator:a3fe3e126c7e5357f10db9d4c9244ded9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab69d5b8b61676bd8a36f7e078d0eab7d" id="r_ab69d5b8b61676bd8a36f7e078d0eab7d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab69d5b8b61676bd8a36f7e078d0eab7d">append</a> (const <a class="el" href="namespacesysio_1_1chain.html#aa10ee348c57604b615bc8570f6685102">signed_block_ptr</a> &amp;b)</td></tr>
<tr class="separator:ab69d5b8b61676bd8a36f7e078d0eab7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26bb835c6572c573061cfd249c8dd04f" id="r_a26bb835c6572c573061cfd249c8dd04f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a26bb835c6572c573061cfd249c8dd04f">prune</a> (const <a class="el" href="classfc_1_1log__level.html">fc::log_level</a> &amp;loglevel)</td></tr>
<tr class="separator:a26bb835c6572c573061cfd249c8dd04f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d674931193a781b4b3d2e89a750550f" id="r_a4d674931193a781b4b3d2e89a750550f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4d674931193a781b4b3d2e89a750550f">vacuum</a> ()</td></tr>
<tr class="separator:a4d674931193a781b4b3d2e89a750550f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bf087087dcea405e245031d4f9db5a4" id="r_a4bf087087dcea405e245031d4f9db5a4"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4bf087087dcea405e245031d4f9db5a4">convert_existing_header_to_vacuumed</a> ()</td></tr>
<tr class="separator:a4bf087087dcea405e245031d4f9db5a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2203611ba80e3920b0cbde67d9ed4bc7" id="r_a2203611ba80e3920b0cbde67d9ed4bc7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2203611ba80e3920b0cbde67d9ed4bc7">get_block_pos</a> (<a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> block_num)</td></tr>
<tr class="separator:a2203611ba80e3920b0cbde67d9ed4bc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a9e4742cc31b5b751d1f6fae18cb42455" id="r_a9e4742cc31b5b751d1f6fae18cb42455"><td class="memTemplParams" colspan="2">template&lt;typename ChainContext , typename Lambda &gt; </td></tr>
<tr class="memitem:a9e4742cc31b5b751d1f6fae18cb42455"><td class="memTemplItemLeft" align="right" valign="top">static std::optional&lt; ChainContext &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a9e4742cc31b5b751d1f6fae18cb42455">extract_chain_context</a> (const <a class="el" href="classfc_1_1path.html">fc::path</a> &amp;data_dir, Lambda &amp;&amp;lambda)</td></tr>
<tr class="separator:a9e4742cc31b5b751d1f6fae18cb42455"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a2817ed62e9f49dfcef66fa1fa62dd2eb" id="r_a2817ed62e9f49dfcef66fa1fa62dd2eb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacesysio_1_1chain.html#aa10ee348c57604b615bc8570f6685102">signed_block_ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2817ed62e9f49dfcef66fa1fa62dd2eb">head</a></td></tr>
<tr class="separator:a2817ed62e9f49dfcef66fa1fa62dd2eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a7504d0ec7d2b78838de654d9403086" id="r_a7a7504d0ec7d2b78838de654d9403086"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacesysio_1_1chain.html#a4b8e4b7ed9dcd18ee75d0de62e88aa17">block_id_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7a7504d0ec7d2b78838de654d9403086">head_id</a></td></tr>
<tr class="separator:a7a7504d0ec7d2b78838de654d9403086"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad255facb8fee2020e71bd0efede5a4a7" id="r_ad255facb8fee2020e71bd0efede5a4a7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfc_1_1cfile.html">fc::cfile</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a></td></tr>
<tr class="separator:ad255facb8fee2020e71bd0efede5a4a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab91832c777d3c1a4ae258705e0b5a012" id="r_ab91832c777d3c1a4ae258705e0b5a012"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfc_1_1cfile.html">fc::cfile</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab91832c777d3c1a4ae258705e0b5a012">index_file</a></td></tr>
<tr class="separator:ab91832c777d3c1a4ae258705e0b5a012"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3e23eb3ef018370ff86033bd5b232c7" id="r_aa3e23eb3ef018370ff86033bd5b232c7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa3e23eb3ef018370ff86033bd5b232c7">open_files</a> = false</td></tr>
<tr class="separator:aa3e23eb3ef018370ff86033bd5b232c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ca403af221cd921ff050caafcc3be96" id="r_a0ca403af221cd921ff050caafcc3be96"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0ca403af221cd921ff050caafcc3be96">genesis_written_to_block_log</a> = false</td></tr>
<tr class="separator:a0ca403af221cd921ff050caafcc3be96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a40dafa28c7166f8cbcb30a9913e35f" id="r_a6a40dafa28c7166f8cbcb30a9913e35f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6a40dafa28c7166f8cbcb30a9913e35f">version</a> = 0</td></tr>
<tr class="separator:a6a40dafa28c7166f8cbcb30a9913e35f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a386d5ccdef1827a955adfeb2650a641d" id="r_a386d5ccdef1827a955adfeb2650a641d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a386d5ccdef1827a955adfeb2650a641d">first_block_num</a> = 0</td></tr>
<tr class="separator:a386d5ccdef1827a955adfeb2650a641d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae656e25129fe4dac801f5b2474f7f429" id="r_ae656e25129fe4dac801f5b2474f7f429"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae656e25129fe4dac801f5b2474f7f429">index_first_block_num</a> = 0</td></tr>
<tr class="separator:ae656e25129fe4dac801f5b2474f7f429"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d6088bd0444c0ec852568a9070ad994" id="r_a2d6088bd0444c0ec852568a9070ad994"><td class="memItemLeft" align="right" valign="top">std::optional&lt; <a class="el" href="structsysio_1_1chain_1_1block__log__prune__config.html">block_log_prune_config</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2d6088bd0444c0ec852568a9070ad994">prune_config</a></td></tr>
<tr class="separator:a2d6088bd0444c0ec852568a9070ad994"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00040">40</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a4492df3dcbaf1731cfc2de0d56d86e6e" name="a4492df3dcbaf1731cfc2de0d56d86e6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4492df3dcbaf1731cfc2de0d56d86e6e">&#9670;&#160;</a></span>block_log_impl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sysio::chain::detail::block_log_impl::block_log_impl </td>
          <td>(</td>
          <td class="paramtype">std::optional&lt; <a class="el" href="structsysio_1_1chain_1_1block__log__prune__config.html">block_log_prune_config</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>prune_conf</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00053">53</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   53</span>                                                                           :</div>
<div class="line"><span class="lineno">   54</span>              <a class="code hl_variable" href="#a2d6088bd0444c0ec852568a9070ad994">prune_config</a>(prune_conf) {</div>
<div class="line"><span class="lineno">   55</span>               <span class="keywordflow">if</span>(<a class="code hl_variable" href="#a2d6088bd0444c0ec852568a9070ad994">prune_config</a>) {</div>
<div class="line"><span class="lineno">   56</span>                  <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(<a class="code hl_variable" href="#a2d6088bd0444c0ec852568a9070ad994">prune_config</a>-&gt;prune_blocks, block_log_exception, <span class="stringliteral">&quot;block log prune configuration requires at least one block&quot;</span>);</div>
<div class="line"><span class="lineno">   57</span>                  <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(__builtin_popcount(<a class="code hl_variable" href="#a2d6088bd0444c0ec852568a9070ad994">prune_config</a>-&gt;prune_threshold) == 1, block_log_exception, <span class="stringliteral">&quot;block log prune threshold must be power of 2&quot;</span>);</div>
<div class="line"><span class="lineno">   58</span>                  <span class="comment">//switch this over to the mask that will be used</span></div>
<div class="line"><span class="lineno">   59</span>                  <a class="code hl_variable" href="#a2d6088bd0444c0ec852568a9070ad994">prune_config</a>-&gt;prune_threshold = ~(<a class="code hl_variable" href="#a2d6088bd0444c0ec852568a9070ad994">prune_config</a>-&gt;prune_threshold-1);</div>
<div class="line"><span class="lineno">   60</span>               }</div>
<div class="line"><span class="lineno">   61</span>            }</div>
<div class="ttc" id="achain_2include_2sysio_2chain_2exceptions_8hpp_html_a40c2826a6fba35c1ffbf912bdf559792"><div class="ttname"><a href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a></div><div class="ttdeci">#define SYS_ASSERT(expr, exc_type, FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2exceptions_8hpp_source.html#l00007">exceptions.hpp:7</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_html_a2d6088bd0444c0ec852568a9070ad994"><div class="ttname"><a href="#a2d6088bd0444c0ec852568a9070ad994">sysio::chain::detail::block_log_impl::prune_config</a></div><div class="ttdeci">std::optional&lt; block_log_prune_config &gt; prune_config</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00051">block_log.cpp:51</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab69d5b8b61676bd8a36f7e078d0eab7d" name="ab69d5b8b61676bd8a36f7e078d0eab7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab69d5b8b61676bd8a36f7e078d0eab7d">&#9670;&#160;</a></span>append()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain::detail::block_log_impl::append </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#aa10ee348c57604b615bc8570f6685102">signed_block_ptr</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>b</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00362">362</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  362</span>                                                              {</div>
<div class="line"><span class="lineno">  363</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  364</span>         <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( <a class="code hl_variable" href="#a0ca403af221cd921ff050caafcc3be96">genesis_written_to_block_log</a>, block_log_append_fail, <span class="stringliteral">&quot;Cannot append to block log until the genesis is first written&quot;</span> );</div>
<div class="line"><span class="lineno">  365</span> </div>
<div class="line"><span class="lineno">  366</span>         <a class="code hl_function" href="#adc78c993bbe5faed8a0a46d3b36eb0e8">check_open_files</a>();</div>
<div class="line"><span class="lineno">  367</span> </div>
<div class="line"><span class="lineno">  368</span>         <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a29badc2b6c1f589d0c79b20ce31cacf0">seek_end</a>(0);</div>
<div class="line"><span class="lineno">  369</span>         <a class="code hl_variable" href="#ab91832c777d3c1a4ae258705e0b5a012">index_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a29badc2b6c1f589d0c79b20ce31cacf0">seek_end</a>(0);</div>
<div class="line"><span class="lineno">  370</span>         <span class="comment">//if pruned log, rewind over count trailer if any block is already present</span></div>
<div class="line"><span class="lineno">  371</span>         <span class="keywordflow">if</span>(<a class="code hl_variable" href="#a2d6088bd0444c0ec852568a9070ad994">prune_config</a> &amp;&amp; <a class="code hl_variable" href="#a2817ed62e9f49dfcef66fa1fa62dd2eb">head</a>)</div>
<div class="line"><span class="lineno">  372</span>            <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a960bb1297aecf2300137c29dcc4f1150">skip</a>(-<span class="keyword">sizeof</span>(<a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>));</div>
<div class="line"><span class="lineno">  373</span>         <a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> pos = <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#abc92fc8d64550b772a69ca1b63f75bfb">tellp</a>();</div>
<div class="line"><span class="lineno">  374</span> </div>
<div class="line"><span class="lineno">  375</span>         <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(<a class="code hl_variable" href="#ab91832c777d3c1a4ae258705e0b5a012">index_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#abc92fc8d64550b772a69ca1b63f75bfb">tellp</a>() == <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>) * (b-&gt;block_num() - <a class="code hl_variable" href="#ae656e25129fe4dac801f5b2474f7f429">index_first_block_num</a>),</div>
<div class="line"><span class="lineno">  376</span>                   block_log_append_fail,</div>
<div class="line"><span class="lineno">  377</span>                   <span class="stringliteral">&quot;Append to index file occuring at wrong position.&quot;</span>,</div>
<div class="line"><span class="lineno">  378</span>                   (<span class="stringliteral">&quot;position&quot;</span>, (<a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>) <a class="code hl_variable" href="#ab91832c777d3c1a4ae258705e0b5a012">index_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#abc92fc8d64550b772a69ca1b63f75bfb">tellp</a>())</div>
<div class="line"><span class="lineno">  379</span>                   (<span class="stringliteral">&quot;expected&quot;</span>, (b-&gt;block_num() - <a class="code hl_variable" href="#ae656e25129fe4dac801f5b2474f7f429">index_first_block_num</a>) * <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>)));</div>
<div class="line"><span class="lineno">  380</span>         <span class="keyword">auto</span> data = <a class="code hl_function" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a>(*b);</div>
<div class="line"><span class="lineno">  381</span>         <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#af6ad44b8179f355db75a9d01de931235">write</a>(data.data(), data.size());</div>
<div class="line"><span class="lineno">  382</span>         <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#af6ad44b8179f355db75a9d01de931235">write</a>((<span class="keywordtype">char</span>*)&amp;pos, <span class="keyword">sizeof</span>(pos));</div>
<div class="line"><span class="lineno">  383</span>         <span class="keyword">const</span> <a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> end = <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#abc92fc8d64550b772a69ca1b63f75bfb">tellp</a>();</div>
<div class="line"><span class="lineno">  384</span>         <a class="code hl_variable" href="#ab91832c777d3c1a4ae258705e0b5a012">index_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#af6ad44b8179f355db75a9d01de931235">write</a>((<span class="keywordtype">char</span>*)&amp;pos, <span class="keyword">sizeof</span>(pos));</div>
<div class="line"><span class="lineno">  385</span>         <a class="code hl_variable" href="#a2817ed62e9f49dfcef66fa1fa62dd2eb">head</a> = b;</div>
<div class="line"><span class="lineno">  386</span>         <a class="code hl_variable" href="#a7a7504d0ec7d2b78838de654d9403086">head_id</a> = b-&gt;calculate_id();</div>
<div class="line"><span class="lineno">  387</span> </div>
<div class="line"><span class="lineno">  388</span>         <span class="keywordflow">if</span>(<a class="code hl_variable" href="#a2d6088bd0444c0ec852568a9070ad994">prune_config</a>) {</div>
<div class="line"><span class="lineno">  389</span>            <span class="keywordflow">if</span>((pos&amp;<a class="code hl_variable" href="#a2d6088bd0444c0ec852568a9070ad994">prune_config</a>-&gt;prune_threshold) != (end&amp;<a class="code hl_variable" href="#a2d6088bd0444c0ec852568a9070ad994">prune_config</a>-&gt;prune_threshold))</div>
<div class="line"><span class="lineno">  390</span>               <a class="code hl_function" href="#a26bb835c6572c573061cfd249c8dd04f">prune</a>(<a class="code hl_enumvalue" href="classfc_1_1log__level.html#a5a5e31c4c1f38d9115ecbe44927fb2e4a30d2de77e71beb8d09d530cac04efa25">fc::log_level::debug</a>);</div>
<div class="line"><span class="lineno">  391</span> </div>
<div class="line"><span class="lineno">  392</span>            <span class="keyword">const</span> <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> num_blocks_in_log = <a class="code hl_function" href="structsysio_1_1chain_1_1block__header.html#a39d57e33ef8d3f6ba59b4c458f0ae375">chain::block_header::num_from_id</a>(<a class="code hl_variable" href="#a7a7504d0ec7d2b78838de654d9403086">head_id</a>) - <a class="code hl_variable" href="#a386d5ccdef1827a955adfeb2650a641d">first_block_num</a> + 1;</div>
<div class="line"><span class="lineno">  393</span>            <a class="code hl_function" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a>(<a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>, num_blocks_in_log);</div>
<div class="line"><span class="lineno">  394</span>         }</div>
<div class="line"><span class="lineno">  395</span> </div>
<div class="line"><span class="lineno">  396</span>         <a class="code hl_function" href="#a3fe3e126c7e5357f10db9d4c9244ded9">flush</a>();</div>
<div class="line"><span class="lineno">  397</span>      }</div>
<div class="line"><span class="lineno">  398</span>      <a class="code hl_define" href="exception_8hpp.html#ae70bfa24f5a3bc0917382b3c17fc033c">FC_LOG_AND_RETHROW</a>()</div>
<div class="line"><span class="lineno">  399</span>   }</div>
<div class="ttc" id="aclassfc_1_1cfile_html_a29badc2b6c1f589d0c79b20ce31cacf0"><div class="ttname"><a href="classfc_1_1cfile.html#a29badc2b6c1f589d0c79b20ce31cacf0">fc::cfile::seek_end</a></div><div class="ttdeci">void seek_end(long loc)</div><div class="ttdef"><b>Definition</b> <a href="cfile_8hpp_source.html#l00096">cfile.hpp:96</a></div></div>
<div class="ttc" id="aclassfc_1_1cfile_html_a960bb1297aecf2300137c29dcc4f1150"><div class="ttname"><a href="classfc_1_1cfile.html#a960bb1297aecf2300137c29dcc4f1150">fc::cfile::skip</a></div><div class="ttdeci">void skip(long loc)</div><div class="ttdef"><b>Definition</b> <a href="cfile_8hpp_source.html#l00105">cfile.hpp:105</a></div></div>
<div class="ttc" id="aclassfc_1_1cfile_html_abc92fc8d64550b772a69ca1b63f75bfb"><div class="ttname"><a href="classfc_1_1cfile.html#abc92fc8d64550b772a69ca1b63f75bfb">fc::cfile::tellp</a></div><div class="ttdeci">size_t tellp() const</div><div class="ttdef"><b>Definition</b> <a href="cfile_8hpp_source.html#l00079">cfile.hpp:79</a></div></div>
<div class="ttc" id="aclassfc_1_1cfile_html_af6ad44b8179f355db75a9d01de931235"><div class="ttname"><a href="classfc_1_1cfile.html#af6ad44b8179f355db75a9d01de931235">fc::cfile::write</a></div><div class="ttdeci">void write(const char *d, size_t n)</div><div class="ttdef"><b>Definition</b> <a href="cfile_8hpp_source.html#l00127">cfile.hpp:127</a></div></div>
<div class="ttc" id="aclassfc_1_1log__level_html_a5a5e31c4c1f38d9115ecbe44927fb2e4a30d2de77e71beb8d09d530cac04efa25"><div class="ttname"><a href="classfc_1_1log__level.html#a5a5e31c4c1f38d9115ecbe44927fb2e4a30d2de77e71beb8d09d530cac04efa25">fc::log_level::debug</a></div><div class="ttdeci">@ debug</div><div class="ttdef"><b>Definition</b> <a href="log__message_8hpp_source.html#l00033">log_message.hpp:33</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_html_a0ca403af221cd921ff050caafcc3be96"><div class="ttname"><a href="#a0ca403af221cd921ff050caafcc3be96">sysio::chain::detail::block_log_impl::genesis_written_to_block_log</a></div><div class="ttdeci">bool genesis_written_to_block_log</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00047">block_log.cpp:47</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_html_a26bb835c6572c573061cfd249c8dd04f"><div class="ttname"><a href="#a26bb835c6572c573061cfd249c8dd04f">sysio::chain::detail::block_log_impl::prune</a></div><div class="ttdeci">void prune(const fc::log_level &amp;loglevel)</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00401">block_log.cpp:401</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_html_a2817ed62e9f49dfcef66fa1fa62dd2eb"><div class="ttname"><a href="#a2817ed62e9f49dfcef66fa1fa62dd2eb">sysio::chain::detail::block_log_impl::head</a></div><div class="ttdeci">signed_block_ptr head</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00042">block_log.cpp:42</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_html_a386d5ccdef1827a955adfeb2650a641d"><div class="ttname"><a href="#a386d5ccdef1827a955adfeb2650a641d">sysio::chain::detail::block_log_impl::first_block_num</a></div><div class="ttdeci">uint32_t first_block_num</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00049">block_log.cpp:49</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_html_a3fe3e126c7e5357f10db9d4c9244ded9"><div class="ttname"><a href="#a3fe3e126c7e5357f10db9d4c9244ded9">sysio::chain::detail::block_log_impl::flush</a></div><div class="ttdeci">void flush()</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00430">block_log.cpp:430</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_html_a7a7504d0ec7d2b78838de654d9403086"><div class="ttname"><a href="#a7a7504d0ec7d2b78838de654d9403086">sysio::chain::detail::block_log_impl::head_id</a></div><div class="ttdeci">block_id_type head_id</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00043">block_log.cpp:43</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_html_ab91832c777d3c1a4ae258705e0b5a012"><div class="ttname"><a href="#ab91832c777d3c1a4ae258705e0b5a012">sysio::chain::detail::block_log_impl::index_file</a></div><div class="ttdeci">fc::cfile index_file</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00045">block_log.cpp:45</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_html_ad255facb8fee2020e71bd0efede5a4a7"><div class="ttname"><a href="#ad255facb8fee2020e71bd0efede5a4a7">sysio::chain::detail::block_log_impl::block_file</a></div><div class="ttdeci">fc::cfile block_file</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00044">block_log.cpp:44</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_html_adc78c993bbe5faed8a0a46d3b36eb0e8"><div class="ttname"><a href="#adc78c993bbe5faed8a0a46d3b36eb0e8">sysio::chain::detail::block_log_impl::check_open_files</a></div><div class="ttdeci">void check_open_files()</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00063">block_log.cpp:63</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_html_ae656e25129fe4dac801f5b2474f7f429"><div class="ttname"><a href="#ae656e25129fe4dac801f5b2474f7f429">sysio::chain::detail::block_log_impl::index_first_block_num</a></div><div class="ttdeci">uint32_t index_first_block_num</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00050">block_log.cpp:50</a></div></div>
<div class="ttc" id="aexception_8hpp_html_ae70bfa24f5a3bc0917382b3c17fc033c"><div class="ttname"><a href="exception_8hpp.html#ae70bfa24f5a3bc0917382b3c17fc033c">FC_LOG_AND_RETHROW</a></div><div class="ttdeci">#define FC_LOG_AND_RETHROW()</div><div class="ttdef"><b>Definition</b> <a href="exception_8hpp_source.html#l00411">exception.hpp:411</a></div></div>
<div class="ttc" id="anamespacefc_1_1raw_html_a3a18d8161aa5b4f4f02b6fcfdff5e5d1"><div class="ttname"><a href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a></div><div class="ttdeci">void pack(Stream &amp;s, const std::deque&lt; T &gt; &amp;value)</div><div class="ttdef"><b>Definition</b> <a href="raw_8hpp_source.html#l00531">raw.hpp:531</a></div></div>
<div class="ttc" id="astdint_8h_html_a435d1572bf3f880d55459d9805097f62"><div class="ttname"><a href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></div><div class="ttdeci">unsigned int uint32_t</div><div class="ttdef"><b>Definition</b> <a href="stdint_8h_source.html#l00126">stdint.h:126</a></div></div>
<div class="ttc" id="astdint_8h_html_aec6fcb673ff035718c238c8c9d544c47"><div class="ttname"><a href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a></div><div class="ttdeci">unsigned __int64 uint64_t</div><div class="ttdef"><b>Definition</b> <a href="stdint_8h_source.html#l00136">stdint.h:136</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1block__header_html_a39d57e33ef8d3f6ba59b4c458f0ae375"><div class="ttname"><a href="structsysio_1_1chain_1_1block__header.html#a39d57e33ef8d3f6ba59b4c458f0ae375">sysio::chain::block_header::num_from_id</a></div><div class="ttdeci">static uint32_t num_from_id(const block_id_type &amp;id)</div><div class="ttdef"><b>Definition</b> <a href="block__header_8cpp_source.html#l00013">block_header.cpp:13</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1detail_1_1block__log__impl_ab69d5b8b61676bd8a36f7e078d0eab7d_cgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1detail_1_1block__log__impl_ab69d5b8b61676bd8a36f7e078d0eab7d_cgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_ab69d5b8b61676bd8a36f7e078d0eab7d_cgraph" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_ab69d5b8b61676bd8a36f7e078d0eab7d_cgraph">
<area shape="rect" title=" " alt="" coords="5,277,171,318"/>
<area shape="rect" href="classsysio_1_1chain_1_1detail_1_1block__log__impl.html#adc78c993bbe5faed8a0a46d3b36eb0e8" title=" " alt="" coords="219,5,377,61"/>
<area shape="poly" title=" " alt="" coords="95,275,140,184,175,129,217,78,227,69,231,73,221,82,179,132,144,187,100,278"/>
<area shape="rect" href="classsysio_1_1chain_1_1detail_1_1block__log__impl.html#a3fe3e126c7e5357f10db9d4c9244ded9" title=" " alt="" coords="222,92,374,132"/>
<area shape="poly" title=" " alt="" coords="101,275,149,214,181,180,217,148,232,138,235,142,220,153,185,184,153,218,106,278"/>
<area shape="rect" href="structsysio_1_1chain_1_1block__header.html#a39d57e33ef8d3f6ba59b4c458f0ae375" title=" " alt="" coords="431,74,581,115"/>
<area shape="poly" title=" " alt="" coords="109,274,156,233,217,192,260,173,295,163,331,155,376,141,438,118,440,123,378,146,333,160,297,168,262,178,220,197,160,237,112,278"/>
<area shape="rect" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1" title=" " alt="" coords="665,263,762,289"/>
<area shape="poly" title=" " alt="" coords="171,292,649,275,649,281,171,297"/>
<area shape="rect" href="classsysio_1_1chain_1_1detail_1_1block__log__impl.html#a26bb835c6572c573061cfd249c8dd04f" title=" " alt="" coords="220,206,376,247"/>
<area shape="poly" title=" " alt="" coords="150,274,220,250,222,255,151,279"/>
<area shape="rect" href="classfc_1_1cfile.html#a29badc2b6c1f589d0c79b20ce31cacf0" title=" " alt="" coords="234,335,362,361"/>
<area shape="poly" title=" " alt="" coords="172,315,227,328,226,333,171,320"/>
<area shape="rect" href="classfc_1_1cfile.html#a960bb1297aecf2300137c29dcc4f1150" title=" " alt="" coords="250,384,346,410"/>
<area shape="poly" title=" " alt="" coords="122,316,167,344,220,371,236,377,234,382,218,376,164,348,119,320"/>
<area shape="rect" href="classfc_1_1cfile.html#abc92fc8d64550b772a69ca1b63f75bfb" title=" " alt="" coords="250,483,346,509"/>
<area shape="poly" title=" " alt="" coords="101,316,119,350,146,391,180,434,220,470,237,479,234,484,217,474,176,437,142,394,115,353,97,319"/>
<area shape="rect" href="classfc_1_1cfile.html#af6ad44b8179f355db75a9d01de931235" title=" " alt="" coords="248,434,348,459"/>
<area shape="poly" title=" " alt="" coords="107,316,155,368,186,396,220,420,234,427,232,432,217,425,183,400,151,372,103,320"/>
<area shape="rect" href="classsysio_1_1chain_1_1detail_1_1block__log__impl.html#af92332d6e5756ef81998039527c3aa44" title=" " alt="" coords="425,9,587,50"/>
<area shape="poly" title=" " alt="" coords="377,29,410,28,410,34,378,34"/>
<area shape="rect" href="integration_8cpp.html#af5b66d867a040d002fb57d645cae3fb4" title=" " alt="" coords="687,16,740,42"/>
<area shape="poly" title=" " alt="" coords="588,26,672,26,672,32,588,32"/>
<area shape="rect" href="namespacefc.html#afb668c55fd6ee73e1fcd67e77d8f6009" title=" " alt="" coords="635,82,792,107"/>
<area shape="poly" title=" " alt="" coords="582,92,620,92,620,97,582,97"/>
<area shape="poly" title=" " alt="" coords="679,264,672,254,676,245,690,238,714,236,739,239,752,246,749,251,737,244,713,242,692,244,680,248,677,254,683,261"/>
<area shape="poly" title=" " alt="" coords="348,203,375,186,390,170,398,155,407,140,423,124,428,121,431,125,427,129,412,143,403,158,394,174,379,190,351,208"/>
<area shape="rect" href="classfc_1_1logger.html#a4e12ef2e794551d593e497b4b90601ab" title=" " alt="" coords="456,139,557,165"/>
<area shape="poly" title=" " alt="" coords="347,203,424,173,442,167,444,172,426,178,349,208"/>
<area shape="rect" href="classfc_1_1logger.html#afbae9b6cd7f4f604f654a4c1914677ac" title=" " alt="" coords="434,188,579,214"/>
<area shape="poly" title=" " alt="" coords="375,214,418,209,418,215,376,220"/>
<area shape="rect" href="namespacefc_1_1raw.html#a64937a5adc8041247f7007882224e225" title=" " alt="" coords="442,238,570,263"/>
<area shape="poly" title=" " alt="" coords="376,233,427,239,426,244,375,238"/>
<area shape="rect" href="structfc_1_1log__config.html#aa0b03f0ae27cb64d934988512465c1a5" title=" " alt="" coords="651,132,776,172"/>
<area shape="poly" title=" " alt="" coords="557,149,635,149,635,154,557,154"/>
<area shape="poly" title=" " alt="" coords="571,256,650,265,649,271,570,261"/>
<area shape="rect" href="classfc_1_1path.html#ab1eae2062df4ea01435348ec52fb3784" title=" " alt="" coords="429,384,583,410"/>
<area shape="poly" title=" " alt="" coords="356,359,435,378,433,383,355,364"/>
<area shape="poly" title=" " alt="" coords="346,394,413,394,413,400,346,400"/>
<area shape="rect" href="classfc_1_1cfile.html#aba9b5dcf06d12cc653b8eb4224351ff7" title=" " alt="" coords="433,483,579,509"/>
<area shape="poly" title=" " alt="" coords="346,493,417,493,417,498,346,498"/>
<area shape="poly" title=" " alt="" coords="348,432,433,412,435,417,349,437"/>
</map>
</div>

</div>
</div>
<a id="adc78c993bbe5faed8a0a46d3b36eb0e8" name="adc78c993bbe5faed8a0a46d3b36eb0e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc78c993bbe5faed8a0a46d3b36eb0e8">&#9670;&#160;</a></span>check_open_files()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain::detail::block_log_impl::check_open_files </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00063">63</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   63</span>                                           {</div>
<div class="line"><span class="lineno">   64</span>               <span class="keywordflow">if</span>( !<a class="code hl_variable" href="#aa3e23eb3ef018370ff86033bd5b232c7">open_files</a> ) {</div>
<div class="line"><span class="lineno">   65</span>                  <a class="code hl_function" href="#af92332d6e5756ef81998039527c3aa44">reopen</a>();</div>
<div class="line"><span class="lineno">   66</span>               }</div>
<div class="line"><span class="lineno">   67</span>            }</div>
<div class="ttc" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_html_aa3e23eb3ef018370ff86033bd5b232c7"><div class="ttname"><a href="#aa3e23eb3ef018370ff86033bd5b232c7">sysio::chain::detail::block_log_impl::open_files</a></div><div class="ttdeci">bool open_files</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00046">block_log.cpp:46</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_html_af92332d6e5756ef81998039527c3aa44"><div class="ttname"><a href="#af92332d6e5756ef81998039527c3aa44">sysio::chain::detail::block_log_impl::reopen</a></div><div class="ttdeci">void reopen()</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00130">block_log.cpp:130</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1detail_1_1block__log__impl_adc78c993bbe5faed8a0a46d3b36eb0e8_cgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1detail_1_1block__log__impl_adc78c993bbe5faed8a0a46d3b36eb0e8_cgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_adc78c993bbe5faed8a0a46d3b36eb0e8_cgraph" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_adc78c993bbe5faed8a0a46d3b36eb0e8_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,164,61"/>
<area shape="rect" href="classsysio_1_1chain_1_1detail_1_1block__log__impl.html#af92332d6e5756ef81998039527c3aa44" title=" " alt="" coords="212,13,374,54"/>
<area shape="poly" title=" " alt="" coords="164,30,196,30,196,36,164,36"/>
<area shape="rect" href="integration_8cpp.html#af5b66d867a040d002fb57d645cae3fb4" title=" " alt="" coords="422,20,474,46"/>
<area shape="poly" title=" " alt="" coords="375,30,407,30,407,36,375,36"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1detail_1_1block__log__impl_adc78c993bbe5faed8a0a46d3b36eb0e8_icgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1detail_1_1block__log__impl_adc78c993bbe5faed8a0a46d3b36eb0e8_icgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_adc78c993bbe5faed8a0a46d3b36eb0e8_icgraph" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_adc78c993bbe5faed8a0a46d3b36eb0e8_icgraph">
<area shape="rect" title=" " alt="" coords="219,5,377,61"/>
<area shape="rect" href="classsysio_1_1chain_1_1detail_1_1block__log__impl.html#ab69d5b8b61676bd8a36f7e078d0eab7d" title=" " alt="" coords="5,13,171,54"/>
<area shape="poly" title=" " alt="" coords="203,36,171,36,171,30,203,30"/>
</map>
</div>

</div>
</div>
<a id="aae74e8b82422fd994eae49684c674181" name="aae74e8b82422fd994eae49684c674181"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae74e8b82422fd994eae49684c674181">&#9670;&#160;</a></span>close()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain::detail::block_log_impl::close </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00091">91</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   91</span>                         {</div>
<div class="line"><span class="lineno">   92</span>               <span class="keywordflow">if</span>( <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#ae5cdb4f43248d08842f7420b48534863">is_open</a>() )</div>
<div class="line"><span class="lineno">   93</span>                  <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a25b3bbb8ed2f690b750a197380153985">close</a>();</div>
<div class="line"><span class="lineno">   94</span>               <span class="keywordflow">if</span>( <a class="code hl_variable" href="#ab91832c777d3c1a4ae258705e0b5a012">index_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#ae5cdb4f43248d08842f7420b48534863">is_open</a>() )</div>
<div class="line"><span class="lineno">   95</span>                  <a class="code hl_variable" href="#ab91832c777d3c1a4ae258705e0b5a012">index_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a25b3bbb8ed2f690b750a197380153985">close</a>();</div>
<div class="line"><span class="lineno">   96</span>               <a class="code hl_variable" href="#aa3e23eb3ef018370ff86033bd5b232c7">open_files</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   97</span>            }</div>
<div class="ttc" id="aclassfc_1_1cfile_html_a25b3bbb8ed2f690b750a197380153985"><div class="ttname"><a href="classfc_1_1cfile.html#a25b3bbb8ed2f690b750a197380153985">fc::cfile::close</a></div><div class="ttdeci">void close()</div><div class="ttdef"><b>Definition</b> <a href="cfile_8hpp_source.html#l00202">cfile.hpp:202</a></div></div>
<div class="ttc" id="aclassfc_1_1cfile_html_ae5cdb4f43248d08842f7420b48534863"><div class="ttname"><a href="classfc_1_1cfile.html#ae5cdb4f43248d08842f7420b48534863">fc::cfile::is_open</a></div><div class="ttdeci">bool is_open() const</div><div class="ttdef"><b>Definition</b> <a href="cfile_8hpp_source.html#l00045">cfile.hpp:45</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1detail_1_1block__log__impl_aae74e8b82422fd994eae49684c674181_cgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1detail_1_1block__log__impl_aae74e8b82422fd994eae49684c674181_cgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_aae74e8b82422fd994eae49684c674181_cgraph" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_aae74e8b82422fd994eae49684c674181_cgraph">
<area shape="rect" title=" " alt="" coords="5,23,160,64"/>
<area shape="rect" href="classfc_1_1cfile.html#a25b3bbb8ed2f690b750a197380153985" title=" " alt="" coords="215,5,318,31"/>
<area shape="poly" title=" " alt="" coords="160,30,199,25,199,30,161,35"/>
<area shape="rect" href="classfc_1_1cfile.html#ae5cdb4f43248d08842f7420b48534863" title=" " alt="" coords="208,55,325,80"/>
<area shape="poly" title=" " alt="" coords="160,51,193,55,192,61,160,56"/>
</map>
</div>

</div>
</div>
<a id="a4bf087087dcea405e245031d4f9db5a4" name="a4bf087087dcea405e245031d4f9db5a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bf087087dcea405e245031d4f9db5a4">&#9670;&#160;</a></span>convert_existing_header_to_vacuumed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t sysio::chain::detail::block_log_impl::convert_existing_header_to_vacuumed </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00435">435</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  435</span>                                                                    {</div>
<div class="line"><span class="lineno">  436</span>      <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> old_version;</div>
<div class="line"><span class="lineno">  437</span>      <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> old_first_block_num;</div>
<div class="line"><span class="lineno">  438</span>      <span class="keyword">const</span> <span class="keyword">auto</span> totem = <a class="code hl_variable" href="classsysio_1_1chain_1_1block__log.html#a02319a8bef22b7a167f17314c00b1ac1">block_log::npos</a>;</div>
<div class="line"><span class="lineno">  439</span> </div>
<div class="line"><span class="lineno">  440</span>      <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a6eb4fe4530480f13c6cf773a7f1e3847">seek</a>(0);</div>
<div class="line"><span class="lineno">  441</span>      <a class="code hl_function" href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab">fc::raw::unpack</a>(<a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>, old_version);</div>
<div class="line"><span class="lineno">  442</span>      <a class="code hl_function" href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab">fc::raw::unpack</a>(<a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>, old_first_block_num);</div>
<div class="line"><span class="lineno">  443</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(is_pruned_log_and_mask_version(old_version), block_log_exception, <span class="stringliteral">&quot;Trying to vacuumed a non-pruned block log&quot;</span>);</div>
<div class="line"><span class="lineno">  444</span> </div>
<div class="line"><span class="lineno">  445</span>      <span class="keywordflow">if</span>(<a class="code hl_function" href="classsysio_1_1chain_1_1block__log.html#ad760661c5030845b1369fee21e08a909">block_log::contains_genesis_state</a>(old_version, old_first_block_num)) {</div>
<div class="line"><span class="lineno">  446</span>         <span class="comment">//we&#39;ll always write a v3 log, but need to possibly mutate the genesis_state to a chainid should we have pruned a log starting with a genesis_state</span></div>
<div class="line"><span class="lineno">  447</span>         genesis_state <a class="code hl_function" href="namespace_xbyak_1_1util.html#a051ad68b75c300988da81d4804273b56">gs</a>;</div>
<div class="line"><span class="lineno">  448</span>         <span class="keyword">auto</span> <a class="code hl_function" href="namespace_xbyak_1_1util.html#a4b2aef26182d21706896022467868f7c">ds</a> = <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a801dd3c493741ff16ef5cf609cc5f9c5">create_datastream</a>();</div>
<div class="line"><span class="lineno">  449</span>         <a class="code hl_function" href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab">fc::raw::unpack</a>(ds, gs);</div>
<div class="line"><span class="lineno">  450</span> </div>
<div class="line"><span class="lineno">  451</span>         <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a6eb4fe4530480f13c6cf773a7f1e3847">seek</a>(0);</div>
<div class="line"><span class="lineno">  452</span>         <a class="code hl_function" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a>(<a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>, <a class="code hl_variable" href="classsysio_1_1chain_1_1block__log.html#add7716a8093b81e1a51ed52897e97770">block_log::max_supported_version</a>);</div>
<div class="line"><span class="lineno">  453</span>         <a class="code hl_function" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a>(<a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>, <a class="code hl_variable" href="#a386d5ccdef1827a955adfeb2650a641d">first_block_num</a>);</div>
<div class="line"><span class="lineno">  454</span>         <span class="keywordflow">if</span>(<a class="code hl_variable" href="#a386d5ccdef1827a955adfeb2650a641d">first_block_num</a> == 1) {</div>
<div class="line"><span class="lineno">  455</span>            <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(old_first_block_num == 1, block_log_exception, <span class="stringliteral">&quot;expected an old first blocknum of 1&quot;</span>);</div>
<div class="line"><span class="lineno">  456</span>            <a class="code hl_function" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a>(<a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>, gs);</div>
<div class="line"><span class="lineno">  457</span>         }</div>
<div class="line"><span class="lineno">  458</span>         <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  459</span>            <a class="code hl_function" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a>(<a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>, <a class="code hl_function" href="namespace_xbyak_1_1util.html#a051ad68b75c300988da81d4804273b56">gs</a>.compute_chain_id());</div>
<div class="line"><span class="lineno">  460</span>         <a class="code hl_function" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a>(<a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>, totem);</div>
<div class="line"><span class="lineno">  461</span>      }</div>
<div class="line"><span class="lineno">  462</span>      <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  463</span>         <span class="comment">//read in the existing chainid, to parrot back out</span></div>
<div class="line"><span class="lineno">  464</span>         <a class="code hl_class" href="classfc_1_1sha256.html">fc::sha256</a> chainid;</div>
<div class="line"><span class="lineno">  465</span>         <a class="code hl_function" href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab">fc::raw::unpack</a>(<a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>, chainid);</div>
<div class="line"><span class="lineno">  466</span> </div>
<div class="line"><span class="lineno">  467</span>         <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a6eb4fe4530480f13c6cf773a7f1e3847">seek</a>(0);</div>
<div class="line"><span class="lineno">  468</span>         <a class="code hl_function" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a>(<a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>, <a class="code hl_variable" href="classsysio_1_1chain_1_1block__log.html#add7716a8093b81e1a51ed52897e97770">block_log::max_supported_version</a>);</div>
<div class="line"><span class="lineno">  469</span>         <a class="code hl_function" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a>(<a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>, <a class="code hl_variable" href="#a386d5ccdef1827a955adfeb2650a641d">first_block_num</a>);</div>
<div class="line"><span class="lineno">  470</span>         <a class="code hl_function" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a>(<a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>, chainid);</div>
<div class="line"><span class="lineno">  471</span>         <a class="code hl_function" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a>(<a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>, totem);</div>
<div class="line"><span class="lineno">  472</span>      }</div>
<div class="line"><span class="lineno">  473</span> </div>
<div class="line"><span class="lineno">  474</span>      <span class="keywordflow">return</span> <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#abc92fc8d64550b772a69ca1b63f75bfb">tellp</a>();</div>
<div class="line"><span class="lineno">  475</span>   }</div>
<div class="ttc" id="aclassfc_1_1cfile_html_a6eb4fe4530480f13c6cf773a7f1e3847"><div class="ttname"><a href="classfc_1_1cfile.html#a6eb4fe4530480f13c6cf773a7f1e3847">fc::cfile::seek</a></div><div class="ttdeci">void seek(long loc)</div><div class="ttdef"><b>Definition</b> <a href="cfile_8hpp_source.html#l00087">cfile.hpp:87</a></div></div>
<div class="ttc" id="aclassfc_1_1cfile_html_a801dd3c493741ff16ef5cf609cc5f9c5"><div class="ttname"><a href="classfc_1_1cfile.html#a801dd3c493741ff16ef5cf609cc5f9c5">fc::cfile::create_datastream</a></div><div class="ttdeci">cfile_datastream create_datastream()</div><div class="ttdef"><b>Definition</b> <a href="cfile_8hpp_source.html#l00249">cfile.hpp:249</a></div></div>
<div class="ttc" id="aclassfc_1_1sha256_html"><div class="ttname"><a href="classfc_1_1sha256.html">fc::sha256</a></div><div class="ttdef"><b>Definition</b> <a href="sha256_8hpp_source.html#l00011">sha256.hpp:12</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1block__log_html_a02319a8bef22b7a167f17314c00b1ac1"><div class="ttname"><a href="classsysio_1_1chain_1_1block__log.html#a02319a8bef22b7a167f17314c00b1ac1">sysio::chain::block_log::npos</a></div><div class="ttdeci">static const uint64_t npos</div><div class="ttdef"><b>Definition</b> <a href="block__log_8hpp_source.html#l00073">block_log.hpp:73</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1block__log_html_ad760661c5030845b1369fee21e08a909"><div class="ttname"><a href="classsysio_1_1chain_1_1block__log.html#ad760661c5030845b1369fee21e08a909">sysio::chain::block_log::contains_genesis_state</a></div><div class="ttdeci">static bool contains_genesis_state(uint32_t version, uint32_t first_block_num)</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l01164">block_log.cpp:1164</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1block__log_html_add7716a8093b81e1a51ed52897e97770"><div class="ttname"><a href="classsysio_1_1chain_1_1block__log.html#add7716a8093b81e1a51ed52897e97770">sysio::chain::block_log::max_supported_version</a></div><div class="ttdeci">static const uint32_t max_supported_version</div><div class="ttdef"><b>Definition</b> <a href="block__log_8hpp_source.html#l00076">block_log.hpp:76</a></div></div>
<div class="ttc" id="anamespace_xbyak_1_1util_html_a051ad68b75c300988da81d4804273b56"><div class="ttname"><a href="namespace_xbyak_1_1util.html#a051ad68b75c300988da81d4804273b56">Xbyak::util::gs</a></div><div class="ttdeci">static const Segment gs(Segment::gs)</div></div>
<div class="ttc" id="anamespace_xbyak_1_1util_html_a4b2aef26182d21706896022467868f7c"><div class="ttname"><a href="namespace_xbyak_1_1util.html#a4b2aef26182d21706896022467868f7c">Xbyak::util::ds</a></div><div class="ttdeci">static const Segment ds(Segment::ds)</div></div>
<div class="ttc" id="anamespacefc_1_1raw_html_a0b442d98ceb22dd5a6ae84745e43ffab"><div class="ttname"><a href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab">fc::raw::unpack</a></div><div class="ttdeci">void unpack(Stream &amp;s, std::deque&lt; T &gt; &amp;value)</div><div class="ttdef"><b>Definition</b> <a href="raw_8hpp_source.html#l00540">raw.hpp:540</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1detail_1_1block__log__impl_a4bf087087dcea405e245031d4f9db5a4_cgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a4bf087087dcea405e245031d4f9db5a4_cgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a4bf087087dcea405e245031d4f9db5a4_cgraph" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a4bf087087dcea405e245031d4f9db5a4_cgraph">
<area shape="rect" title=" " alt="" coords="5,79,210,135"/>
<area shape="rect" href="classsysio_1_1chain_1_1block__log.html#ad760661c5030845b1369fee21e08a909" title=" " alt="" coords="258,5,448,46"/>
<area shape="poly" title=" " alt="" coords="193,76,274,49,275,54,195,81"/>
<area shape="rect" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1" title=" " alt="" coords="304,94,402,120"/>
<area shape="poly" title=" " alt="" coords="210,104,289,104,289,110,210,110"/>
<area shape="rect" href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab" title=" " alt="" coords="297,168,408,193"/>
<area shape="poly" title=" " alt="" coords="204,133,294,160,292,165,202,138"/>
<area shape="poly" title=" " alt="" coords="312,96,304,86,309,76,326,70,353,68,383,70,398,77,396,82,382,75,353,73,327,75,313,80,310,85,316,92"/>
<area shape="poly" title=" " alt="" coords="312,169,304,159,309,149,326,143,353,141,383,144,398,151,396,156,382,149,353,146,327,148,313,153,310,158,316,165"/>
</map>
</div>

</div>
</div>
<a id="a9e4742cc31b5b751d1f6fae18cb42455" name="a9e4742cc31b5b751d1f6fae18cb42455"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e4742cc31b5b751d1f6fae18cb42455">&#9670;&#160;</a></span>extract_chain_context()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ChainContext , typename Lambda &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt; ChainContext &gt; sysio::chain::detail::block_log_impl::extract_chain_context </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfc_1_1path.html">fc::path</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>data_dir</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Lambda &amp;&amp;</td>          <td class="paramname"><span class="paramname"><em>lambda</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00942">942</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  942</span>                                                                                                                  {</div>
<div class="line"><span class="lineno">  943</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( <a class="code hl_function" href="namespacefc.html#ab123bfeadf918cc293ecad88bca7c499">fc::is_directory</a>(data_dir) &amp;&amp; <a class="code hl_function" href="namespacefc.html#a6855142912d4cfb89281ba0c7f4938a2">fc::is_regular_file</a>(data_dir / <span class="stringliteral">&quot;blocks.log&quot;</span>), block_log_not_found,</div>
<div class="line"><span class="lineno">  944</span>                  <span class="stringliteral">&quot;Block log not found in &#39;${blocks_dir}&#39;&quot;</span>, (<span class="stringliteral">&quot;blocks_dir&quot;</span>, data_dir)          );</div>
<div class="line"><span class="lineno">  945</span> </div>
<div class="line"><span class="lineno">  946</span>      std::fstream  block_stream;</div>
<div class="line"><span class="lineno">  947</span>      block_stream.open( (data_dir / <span class="stringliteral">&quot;blocks.log&quot;</span>).generic_string().c_str(), <a class="code hl_define" href="block__log_8cpp.html#a3497123c2fea68436d49bf8958cb4a16">LOG_READ</a> );</div>
<div class="line"><span class="lineno">  948</span> </div>
<div class="line"><span class="lineno">  949</span>      <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code hl_variable" href="#a6a40dafa28c7166f8cbcb30a9913e35f">version</a> = 0;</div>
<div class="line"><span class="lineno">  950</span>      block_stream.read( (<span class="keywordtype">char</span>*)&amp;<a class="code hl_variable" href="#a6a40dafa28c7166f8cbcb30a9913e35f">version</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="#a6a40dafa28c7166f8cbcb30a9913e35f">version</a>) );</div>
<div class="line"><span class="lineno">  951</span>      is_pruned_log_and_mask_version(<a class="code hl_variable" href="#a6a40dafa28c7166f8cbcb30a9913e35f">version</a>);</div>
<div class="line"><span class="lineno">  952</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( <a class="code hl_variable" href="#a6a40dafa28c7166f8cbcb30a9913e35f">version</a> &gt;= <a class="code hl_variable" href="classsysio_1_1chain_1_1block__log.html#a8f0f031e0f64def456185998d462d35d">block_log::min_supported_version</a> &amp;&amp; <a class="code hl_variable" href="#a6a40dafa28c7166f8cbcb30a9913e35f">version</a> &lt;= <a class="code hl_variable" href="classsysio_1_1chain_1_1block__log.html#add7716a8093b81e1a51ed52897e97770">block_log::max_supported_version</a>, block_log_unsupported_version,</div>
<div class="line"><span class="lineno">  953</span>                  <span class="stringliteral">&quot;Unsupported version of block log. Block log version is ${version} while code supports version(s) [${min},${max}]&quot;</span>,</div>
<div class="line"><span class="lineno">  954</span>                  (<span class="stringliteral">&quot;version&quot;</span>, <a class="code hl_variable" href="#a6a40dafa28c7166f8cbcb30a9913e35f">version</a>)(<span class="stringliteral">&quot;min&quot;</span>, <a class="code hl_variable" href="classsysio_1_1chain_1_1block__log.html#a8f0f031e0f64def456185998d462d35d">block_log::min_supported_version</a>)(<span class="stringliteral">&quot;max&quot;</span>, <a class="code hl_variable" href="classsysio_1_1chain_1_1block__log.html#add7716a8093b81e1a51ed52897e97770">block_log::max_supported_version</a>) );</div>
<div class="line"><span class="lineno">  955</span> </div>
<div class="line"><span class="lineno">  956</span>      <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code hl_variable" href="#a386d5ccdef1827a955adfeb2650a641d">first_block_num</a> = 1;</div>
<div class="line"><span class="lineno">  957</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a6a40dafa28c7166f8cbcb30a9913e35f">version</a> != 1) {</div>
<div class="line"><span class="lineno">  958</span>         block_stream.read ( (<span class="keywordtype">char</span>*)&amp;<a class="code hl_variable" href="#a386d5ccdef1827a955adfeb2650a641d">first_block_num</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="#a386d5ccdef1827a955adfeb2650a641d">first_block_num</a>) );</div>
<div class="line"><span class="lineno">  959</span>      }</div>
<div class="line"><span class="lineno">  960</span> </div>
<div class="line"><span class="lineno">  961</span>      <span class="keywordflow">return</span> lambda(block_stream, <a class="code hl_variable" href="#a6a40dafa28c7166f8cbcb30a9913e35f">version</a>, <a class="code hl_variable" href="#a386d5ccdef1827a955adfeb2650a641d">first_block_num</a>);</div>
<div class="line"><span class="lineno">  962</span>   }</div>
<div class="ttc" id="ablock__log_8cpp_html_a3497123c2fea68436d49bf8958cb4a16"><div class="ttname"><a href="block__log_8cpp.html#a3497123c2fea68436d49bf8958cb4a16">LOG_READ</a></div><div class="ttdeci">#define LOG_READ</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00009">block_log.cpp:9</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1block__log_html_a8f0f031e0f64def456185998d462d35d"><div class="ttname"><a href="classsysio_1_1chain_1_1block__log.html#a8f0f031e0f64def456185998d462d35d">sysio::chain::block_log::min_supported_version</a></div><div class="ttdeci">static const uint32_t min_supported_version</div><div class="ttdef"><b>Definition</b> <a href="block__log_8hpp_source.html#l00075">block_log.hpp:75</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_html_a6a40dafa28c7166f8cbcb30a9913e35f"><div class="ttname"><a href="#a6a40dafa28c7166f8cbcb30a9913e35f">sysio::chain::detail::block_log_impl::version</a></div><div class="ttdeci">uint32_t version</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00048">block_log.cpp:48</a></div></div>
<div class="ttc" id="anamespacefc_html_a6855142912d4cfb89281ba0c7f4938a2"><div class="ttname"><a href="namespacefc.html#a6855142912d4cfb89281ba0c7f4938a2">fc::is_regular_file</a></div><div class="ttdeci">bool is_regular_file(const path &amp;p)</div><div class="ttdef"><b>Definition</b> <a href="filesystem_8cpp_source.html#l00226">filesystem.cpp:226</a></div></div>
<div class="ttc" id="anamespacefc_html_ab123bfeadf918cc293ecad88bca7c499"><div class="ttname"><a href="namespacefc.html#ab123bfeadf918cc293ecad88bca7c499">fc::is_directory</a></div><div class="ttdeci">bool is_directory(const path &amp;p)</div><div class="ttdef"><b>Definition</b> <a href="filesystem_8cpp_source.html#l00225">filesystem.cpp:225</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1detail_1_1block__log__impl_a9e4742cc31b5b751d1f6fae18cb42455_cgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a9e4742cc31b5b751d1f6fae18cb42455_cgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a9e4742cc31b5b751d1f6fae18cb42455_cgraph" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a9e4742cc31b5b751d1f6fae18cb42455_cgraph">
<area shape="rect" title=" " alt="" coords="5,16,169,71"/>
<area shape="rect" href="namespacefc.html#ab123bfeadf918cc293ecad88bca7c499" title=" " alt="" coords="223,5,330,31"/>
<area shape="poly" title=" " alt="" coords="168,30,207,25,208,30,169,35"/>
<area shape="rect" href="namespacefc.html#a6855142912d4cfb89281ba0c7f4938a2" title=" " alt="" coords="217,55,337,80"/>
<area shape="poly" title=" " alt="" coords="169,51,201,55,201,61,168,56"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1detail_1_1block__log__impl_a9e4742cc31b5b751d1f6fae18cb42455_icgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a9e4742cc31b5b751d1f6fae18cb42455_icgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a9e4742cc31b5b751d1f6fae18cb42455_icgraph" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a9e4742cc31b5b751d1f6fae18cb42455_icgraph">
<area shape="rect" title=" " alt="" coords="601,391,765,447"/>
<area shape="rect" href="classsysio_1_1chain_1_1block__log.html#ad17bd0904611f780b5d49ad14b363208" title=" " alt="" coords="388,365,537,406"/>
<area shape="poly" title=" " alt="" coords="586,407,537,400,538,394,587,402"/>
<area shape="rect" href="classsysio_1_1chain_1_1block__log.html#a0c03de4dfe3908668418da4620af63e3" title=" " alt="" coords="372,431,553,471"/>
<area shape="poly" title=" " alt="" coords="587,436,554,440,553,435,586,430"/>
<area shape="rect" href="classsysio_1_1testing_1_1base__tester.html#af7edc9d3783d21f8f736cf864482bdea" title=" " alt="" coords="189,365,324,406"/>
<area shape="poly" title=" " alt="" coords="373,388,324,388,324,383,373,383"/>
<area shape="rect" href="classsysio_1_1chain__plugin.html#a0192ac61f3f59d4fdf2dcbbd2c7104ca" title=" " alt="" coords="190,431,322,471"/>
<area shape="poly" title=" " alt="" coords="383,414,324,433,322,427,381,409"/>
<area shape="rect" href="classsysio_1_1testing_1_1base__tester.html#a3fad525eaa1221febd10c786e9dbaaf0" title=" " alt="" coords="5,5,141,46"/>
<area shape="poly" title=" " alt="" coords="249,351,239,290,219,213,186,133,165,95,139,61,124,48,128,44,143,57,169,92,191,131,224,212,244,289,254,350"/>
<area shape="rect" href="classsysio_1_1testing_1_1base__tester.html#a4bc45ee8335f6a9c99bfb044b07f7719" title=" " alt="" coords="5,71,141,111"/>
<area shape="poly" title=" " alt="" coords="245,351,232,302,210,242,180,181,160,152,139,126,124,114,127,110,143,122,165,149,184,178,215,240,237,300,250,349"/>
<area shape="rect" href="classsysio_1_1testing_1_1base__tester.html#a1cbd6f5fc5407a94f5f7b811559cd4f8" title=" " alt="" coords="5,136,141,177"/>
<area shape="poly" title=" " alt="" coords="240,352,201,273,173,230,139,192,122,179,126,175,142,188,177,227,206,270,244,350"/>
<area shape="rect" href="classsysio_1_1testing_1_1base__tester.html#a95257d0bdd37cb42fc3165ea1da98b93" title=" " alt="" coords="5,201,141,242"/>
<area shape="poly" title=" " alt="" coords="230,354,190,306,139,257,120,245,123,240,142,253,194,302,234,351"/>
<area shape="rect" href="classsysio_1_1testing_1_1base__tester.html#a934fa5023a748e09f2396f0e15717024" title=" " alt="" coords="5,267,141,307"/>
<area shape="poly" title=" " alt="" coords="206,360,139,323,115,310,118,305,142,318,208,355"/>
<area shape="rect" href="classsysio_1_1testing_1_1base__tester.html#a096f06629ea18d76bab94b524b056fa2" title=" " alt="" coords="5,332,141,373"/>
<area shape="poly" title=" " alt="" coords="173,373,140,367,141,362,174,368"/>
<area shape="rect" href="classsysio_1_1testing_1_1base__tester.html#ae6248366957999d23ec595271f91ba5e" title=" " alt="" coords="5,397,141,438"/>
<area shape="poly" title=" " alt="" coords="174,403,141,409,140,403,173,398"/>
<area shape="rect" href="classsysio_1_1testing_1_1base__tester.html#ae1a7cc9d4def2eb719d95680e5da6e43" title=" " alt="" coords="5,463,141,503"/>
<area shape="poly" title=" " alt="" coords="200,416,190,421,142,452,119,464,116,460,139,447,187,417,197,411"/>
<area shape="rect" href="classsysio_1_1testing_1_1base__tester.html#aec628f7d49e3600f9863554c5d7c9036" title=" " alt="" coords="5,528,141,569"/>
<area shape="poly" title=" " alt="" coords="194,418,191,421,174,445,167,468,160,492,143,517,127,529,123,525,139,513,155,489,162,466,169,442,187,417,190,414"/>
<area shape="rect" href="classsysio_1_1testing_1_1base__tester.html#a3eb533660c9e2e024d5dfb3f72a9f884" title=" " alt="" coords="5,593,141,634"/>
<area shape="poly" title=" " alt="" coords="193,418,191,421,177,441,170,461,167,500,164,540,157,560,143,582,128,595,125,591,139,579,152,558,159,538,162,499,165,460,172,439,187,417,189,415"/>
<area shape="rect" href="classsysio_1_1testing_1_1base__tester.html#aa94514bfa2c9891911d4bf3d03da3cc8" title=" " alt="" coords="5,659,141,699"/>
<area shape="poly" title=" " alt="" coords="193,418,191,421,174,450,166,478,165,505,167,532,170,560,168,588,161,617,143,647,129,660,125,657,139,644,156,615,163,587,164,560,162,533,160,505,161,477,169,448,186,417,189,415"/>
<area shape="rect" href="classsysio_1_1testing_1_1base__tester.html#abc8727b39ac2db73bed6613f22307daf" title=" " alt="" coords="5,724,141,765"/>
<area shape="poly" title=" " alt="" coords="192,418,191,420,170,459,162,495,162,530,167,565,172,600,173,636,164,673,143,713,130,725,126,722,139,709,159,671,167,635,167,600,162,565,157,530,157,494,165,457,186,418,188,415"/>
<area shape="poly" title=" " alt="" coords="356,454,323,454,323,448,356,448"/>
</map>
</div>

</div>
</div>
<a id="a3fe3e126c7e5357f10db9d4c9244ded9" name="a3fe3e126c7e5357f10db9d4c9244ded9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fe3e126c7e5357f10db9d4c9244ded9">&#9670;&#160;</a></span>flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain::detail::block_log_impl::flush </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00430">430</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  430</span>                                    {</div>
<div class="line"><span class="lineno">  431</span>      <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a2e03001fc7d98a010f98c56fb7c62a69">flush</a>();</div>
<div class="line"><span class="lineno">  432</span>      <a class="code hl_variable" href="#ab91832c777d3c1a4ae258705e0b5a012">index_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a2e03001fc7d98a010f98c56fb7c62a69">flush</a>();</div>
<div class="line"><span class="lineno">  433</span>   }</div>
<div class="ttc" id="aclassfc_1_1cfile_html_a2e03001fc7d98a010f98c56fb7c62a69"><div class="ttname"><a href="classfc_1_1cfile.html#a2e03001fc7d98a010f98c56fb7c62a69">fc::cfile::flush</a></div><div class="ttdeci">void flush()</div><div class="ttdef"><b>Definition</b> <a href="cfile_8hpp_source.html#l00135">cfile.hpp:135</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1detail_1_1block__log__impl_a3fe3e126c7e5357f10db9d4c9244ded9_icgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a3fe3e126c7e5357f10db9d4c9244ded9_icgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a3fe3e126c7e5357f10db9d4c9244ded9_icgraph" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a3fe3e126c7e5357f10db9d4c9244ded9_icgraph">
<area shape="rect" title=" " alt="" coords="219,5,370,46"/>
<area shape="rect" href="classsysio_1_1chain_1_1detail_1_1block__log__impl.html#ab69d5b8b61676bd8a36f7e078d0eab7d" title=" " alt="" coords="5,5,171,46"/>
<area shape="poly" title=" " alt="" coords="203,28,171,28,171,23,203,23"/>
</map>
</div>

</div>
</div>
<a id="a2203611ba80e3920b0cbde67d9ed4bc7" name="a2203611ba80e3920b0cbde67d9ed4bc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2203611ba80e3920b0cbde67d9ed4bc7">&#9670;&#160;</a></span>get_block_pos()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> sysio::chain::detail::block_log_impl::get_block_pos </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></td>          <td class="paramname"><span class="paramname"><em>block_num</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00657">657</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  657</span>                                                                  {</div>
<div class="line"><span class="lineno">  658</span>      <a class="code hl_function" href="#adc78c993bbe5faed8a0a46d3b36eb0e8">check_open_files</a>();</div>
<div class="line"><span class="lineno">  659</span>      <span class="keywordflow">if</span> (!(<a class="code hl_variable" href="#a2817ed62e9f49dfcef66fa1fa62dd2eb">head</a> &amp;&amp; block_num &lt;= <a class="code hl_function" href="structsysio_1_1chain_1_1block__header.html#a39d57e33ef8d3f6ba59b4c458f0ae375">block_header::num_from_id</a>(<a class="code hl_variable" href="#a7a7504d0ec7d2b78838de654d9403086">head_id</a>) &amp;&amp; block_num &gt;= <a class="code hl_variable" href="#a386d5ccdef1827a955adfeb2650a641d">first_block_num</a>))</div>
<div class="line"><span class="lineno">  660</span>         <span class="keywordflow">return</span> <a class="code hl_variable" href="classsysio_1_1chain_1_1block__log.html#a02319a8bef22b7a167f17314c00b1ac1">block_log::npos</a>;</div>
<div class="line"><span class="lineno">  661</span>      <a class="code hl_variable" href="#ab91832c777d3c1a4ae258705e0b5a012">index_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a6eb4fe4530480f13c6cf773a7f1e3847">seek</a>(<span class="keyword">sizeof</span>(<a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>) * (block_num - <a class="code hl_variable" href="#ae656e25129fe4dac801f5b2474f7f429">index_first_block_num</a>));</div>
<div class="line"><span class="lineno">  662</span>      <a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> pos;</div>
<div class="line"><span class="lineno">  663</span>      <a class="code hl_variable" href="#ab91832c777d3c1a4ae258705e0b5a012">index_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a247250a28d17544a57dfafe07012d27b">read</a>((<span class="keywordtype">char</span>*)&amp;pos, <span class="keyword">sizeof</span>(pos));</div>
<div class="line"><span class="lineno">  664</span>      <span class="keywordflow">return</span> pos;</div>
<div class="line"><span class="lineno">  665</span>   }</div>
<div class="ttc" id="aclassfc_1_1cfile_html_a247250a28d17544a57dfafe07012d27b"><div class="ttname"><a href="classfc_1_1cfile.html#a247250a28d17544a57dfafe07012d27b">fc::cfile::read</a></div><div class="ttdeci">void read(char *d, size_t n)</div><div class="ttdef"><b>Definition</b> <a href="cfile_8hpp_source.html#l00114">cfile.hpp:114</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1detail_1_1block__log__impl_a2203611ba80e3920b0cbde67d9ed4bc7_cgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a2203611ba80e3920b0cbde67d9ed4bc7_cgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a2203611ba80e3920b0cbde67d9ed4bc7_cgraph" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a2203611ba80e3920b0cbde67d9ed4bc7_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,147,61"/>
<area shape="rect" href="structsysio_1_1chain_1_1block__header.html#a39d57e33ef8d3f6ba59b4c458f0ae375" title=" " alt="" coords="195,13,345,54"/>
<area shape="poly" title=" " alt="" coords="147,30,179,30,179,36,147,36"/>
<area shape="rect" href="namespacefc.html#afb668c55fd6ee73e1fcd67e77d8f6009" title=" " alt="" coords="393,20,549,46"/>
<area shape="poly" title=" " alt="" coords="345,30,377,30,377,36,345,36"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1detail_1_1block__log__impl_a2203611ba80e3920b0cbde67d9ed4bc7_icgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a2203611ba80e3920b0cbde67d9ed4bc7_icgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a2203611ba80e3920b0cbde67d9ed4bc7_icgraph" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a2203611ba80e3920b0cbde67d9ed4bc7_icgraph">
<area shape="rect" title=" " alt="" coords="192,5,333,61"/>
<area shape="rect" href="classsysio_1_1chain_1_1detail_1_1block__log__impl.html#a31dfc2a521d5fa8eae9eb70c0012f748" title=" " alt="" coords="5,5,144,61"/>
<area shape="poly" title=" " alt="" coords="176,36,144,36,144,30,176,30"/>
</map>
</div>

</div>
</div>
<a id="a26bb835c6572c573061cfd249c8dd04f" name="a26bb835c6572c573061cfd249c8dd04f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26bb835c6572c573061cfd249c8dd04f">&#9670;&#160;</a></span>prune()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain::detail::block_log_impl::prune </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfc_1_1log__level.html">fc::log_level</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>loglevel</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00401">401</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  401</span>                                                               {</div>
<div class="line"><span class="lineno">  402</span>      <span class="keywordflow">if</span>(!<a class="code hl_variable" href="#a2817ed62e9f49dfcef66fa1fa62dd2eb">head</a>)</div>
<div class="line"><span class="lineno">  403</span>         <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  404</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> head_num = <a class="code hl_function" href="structsysio_1_1chain_1_1block__header.html#a39d57e33ef8d3f6ba59b4c458f0ae375">chain::block_header::num_from_id</a>(<a class="code hl_variable" href="#a7a7504d0ec7d2b78838de654d9403086">head_id</a>);</div>
<div class="line"><span class="lineno">  405</span>      <span class="keywordflow">if</span>(head_num - <a class="code hl_variable" href="#a386d5ccdef1827a955adfeb2650a641d">first_block_num &lt; prune_config-&gt;</a>prune_blocks)</div>
<div class="line"><span class="lineno">  406</span>         <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  407</span> </div>
<div class="line"><span class="lineno">  408</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> prune_to_num = head_num - <a class="code hl_variable" href="#a2d6088bd0444c0ec852568a9070ad994">prune_config</a>-&gt;prune_blocks + 1;</div>
<div class="line"><span class="lineno">  409</span> </div>
<div class="line"><span class="lineno">  410</span>      <span class="keyword">static_assert</span>( <a class="code hl_variable" href="classsysio_1_1chain_1_1block__log.html#add7716a8093b81e1a51ed52897e97770">block_log::max_supported_version</a> == 3, <span class="stringliteral">&quot;Code was written to support version 3 format, need to update this code for latest format.&quot;</span> );</div>
<div class="line"><span class="lineno">  411</span>      <span class="keyword">const</span> genesis_state <a class="code hl_function" href="namespace_xbyak_1_1util.html#a051ad68b75c300988da81d4804273b56">gs</a>;</div>
<div class="line"><span class="lineno">  412</span>      <span class="keyword">const</span> <span class="keywordtype">size_t</span> max_header_size_v1  = <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>) + <a class="code hl_function" href="namespacefc_1_1raw.html#a64937a5adc8041247f7007882224e225">fc::raw::pack_size</a>(gs) + <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>);</div>
<div class="line"><span class="lineno">  413</span>      <span class="keyword">const</span> <span class="keywordtype">size_t</span> max_header_size_v23 = <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>) + <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>) + <span class="keyword">sizeof</span>(chain_id_type) + <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>);</div>
<div class="line"><span class="lineno">  414</span>      <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code hl_variable" href="namespacewebsocketpp_1_1http.html#a514b8c48c36a9e42964f9ea35a82bc95">max_header_size</a> = std::max(max_header_size_v1, max_header_size_v23);</div>
<div class="line"><span class="lineno">  415</span> </div>
<div class="line"><span class="lineno">  416</span>      <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a9727290ea0b449e34d6978a60ec22698">punch_hole</a>(max_header_size, <a class="code hl_function" href="#a2203611ba80e3920b0cbde67d9ed4bc7">get_block_pos</a>(prune_to_num));</div>
<div class="line"><span class="lineno">  417</span> </div>
<div class="line"><span class="lineno">  418</span>      <a class="code hl_variable" href="#a386d5ccdef1827a955adfeb2650a641d">first_block_num</a> = prune_to_num;</div>
<div class="line"><span class="lineno">  419</span>      <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a2e03001fc7d98a010f98c56fb7c62a69">flush</a>();</div>
<div class="line"><span class="lineno">  420</span> </div>
<div class="line"><span class="lineno">  421</span>      <span class="keywordflow">if</span>(<span class="keyword">auto</span> <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a89606eca6b563ec68d2da2e84657736f">l</a> = <a class="code hl_function" href="classfc_1_1logger.html#a4e12ef2e794551d593e497b4b90601ab">fc::logger::get</a>(); <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a89606eca6b563ec68d2da2e84657736f">l</a>.<a class="code hl_function" href="classfc_1_1logger.html#afbae9b6cd7f4f604f654a4c1914677ac">is_enabled</a>(loglevel))</div>
<div class="line"><span class="lineno">  422</span>         <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a89606eca6b563ec68d2da2e84657736f">l</a>.log(<a class="code hl_class" href="classfc_1_1log__message.html">fc::log_message</a>(<a class="code hl_class" href="classfc_1_1log__context.html">fc::log_context</a>(loglevel, __FILE__, __LINE__, <a class="code hl_define" href="log__message_8hpp.html#a7d6e1cf1a8d53f38471e9e9db3faf740">__func__</a>),</div>
<div class="line"><span class="lineno">  423</span>                               <span class="stringliteral">&quot;blocks.log pruned to blocks ${b}-${e}&quot;</span>, <a class="code hl_class" href="classfc_1_1mutable__variant__object.html">fc::mutable_variant_object</a>()(<span class="stringliteral">&quot;b&quot;</span>, <a class="code hl_variable" href="#a386d5ccdef1827a955adfeb2650a641d">first_block_num</a>)(<span class="stringliteral">&quot;e&quot;</span>, head_num)));</div>
<div class="line"><span class="lineno">  424</span>   }</div>
<div class="ttc" id="aclassfc_1_1cfile_html_a9727290ea0b449e34d6978a60ec22698"><div class="ttname"><a href="classfc_1_1cfile.html#a9727290ea0b449e34d6978a60ec22698">fc::cfile::punch_hole</a></div><div class="ttdeci">void punch_hole(size_t begin, size_t end)</div><div class="ttdef"><b>Definition</b> <a href="cfile_8hpp_source.html#l00159">cfile.hpp:159</a></div></div>
<div class="ttc" id="aclassfc_1_1log__context_html"><div class="ttname"><a href="classfc_1_1log__context.html">fc::log_context</a></div><div class="ttdoc">provides information about where and when a log message was generated.</div><div class="ttdef"><b>Definition</b> <a href="log__message_8hpp_source.html#l00055">log_message.hpp:56</a></div></div>
<div class="ttc" id="aclassfc_1_1log__message_html"><div class="ttname"><a href="classfc_1_1log__message.html">fc::log_message</a></div><div class="ttdoc">aggregates a message along with the context and associated meta-information.</div><div class="ttdef"><b>Definition</b> <a href="log__message_8hpp_source.html#l00105">log_message.hpp:106</a></div></div>
<div class="ttc" id="aclassfc_1_1logger_html_a4e12ef2e794551d593e497b4b90601ab"><div class="ttname"><a href="classfc_1_1logger.html#a4e12ef2e794551d593e497b4b90601ab">fc::logger::get</a></div><div class="ttdeci">static logger get(const fc::string &amp;name=DEFAULT_LOGGER)</div><div class="ttdef"><b>Definition</b> <a href="logger_8cpp_source.html#l00088">logger.cpp:88</a></div></div>
<div class="ttc" id="aclassfc_1_1logger_html_afbae9b6cd7f4f604f654a4c1914677ac"><div class="ttname"><a href="classfc_1_1logger.html#afbae9b6cd7f4f604f654a4c1914677ac">fc::logger::is_enabled</a></div><div class="ttdeci">bool is_enabled(log_level e) const</div><div class="ttdef"><b>Definition</b> <a href="logger_8cpp_source.html#l00058">logger.cpp:58</a></div></div>
<div class="ttc" id="aclassfc_1_1mutable__variant__object_html"><div class="ttname"><a href="classfc_1_1mutable__variant__object.html">fc::mutable_variant_object</a></div><div class="ttdoc">An order-preserving dictionary of variants.</div><div class="ttdef"><b>Definition</b> <a href="variant__object_8hpp_source.html#l00117">variant_object.hpp:118</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_html_a2203611ba80e3920b0cbde67d9ed4bc7"><div class="ttname"><a href="#a2203611ba80e3920b0cbde67d9ed4bc7">sysio::chain::detail::block_log_impl::get_block_pos</a></div><div class="ttdeci">uint64_t get_block_pos(uint32_t block_num)</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00657">block_log.cpp:657</a></div></div>
<div class="ttc" id="alog__message_8hpp_html_a7d6e1cf1a8d53f38471e9e9db3faf740"><div class="ttname"><a href="log__message_8hpp.html#a7d6e1cf1a8d53f38471e9e9db3faf740">__func__</a></div><div class="ttdeci">#define __func__</div><div class="ttdef"><b>Definition</b> <a href="log__message_8hpp_source.html#l00144">log_message.hpp:144</a></div></div>
<div class="ttc" id="anamespacefc_1_1raw_html_a64937a5adc8041247f7007882224e225"><div class="ttname"><a href="namespacefc_1_1raw.html#a64937a5adc8041247f7007882224e225">fc::raw::pack_size</a></div><div class="ttdeci">size_t pack_size(const T &amp;v)</div><div class="ttdef"><b>Definition</b> <a href="raw_8hpp_source.html#l00671">raw.hpp:671</a></div></div>
<div class="ttc" id="anamespacewebsocketpp_1_1http_html_a514b8c48c36a9e42964f9ea35a82bc95"><div class="ttname"><a href="namespacewebsocketpp_1_1http.html#a514b8c48c36a9e42964f9ea35a82bc95">websocketpp::http::max_header_size</a></div><div class="ttdeci">size_t const max_header_size</div><div class="ttdoc">Maximum size in bytes before rejecting an HTTP header as too big.</div><div class="ttdef"><b>Definition</b> <a href="fc_2vendor_2websocketpp_2websocketpp_2http_2constants_8hpp_source.html#l00065">constants.hpp:65</a></div></div>
<div class="ttc" id="ayubihsm__pkcs11_8c_html_a89606eca6b563ec68d2da2e84657736f"><div class="ttname"><a href="yubihsm__pkcs11_8c.html#a89606eca6b563ec68d2da2e84657736f">l</a></div><div class="ttdeci">int l</div><div class="ttdef"><b>Definition</b> <a href="yubihsm__pkcs11_8c_source.html#l00525">yubihsm_pkcs11.c:525</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1detail_1_1block__log__impl_a26bb835c6572c573061cfd249c8dd04f_cgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a26bb835c6572c573061cfd249c8dd04f_cgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a26bb835c6572c573061cfd249c8dd04f_cgraph" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a26bb835c6572c573061cfd249c8dd04f_cgraph">
<area shape="rect" title=" " alt="" coords="5,84,161,125"/>
<area shape="rect" href="classfc_1_1logger.html#a4e12ef2e794551d593e497b4b90601ab" title=" " alt="" coords="233,13,334,38"/>
<area shape="poly" title=" " alt="" coords="128,81,208,47,224,41,225,46,210,52,130,86"/>
<area shape="rect" href="classfc_1_1logger.html#afbae9b6cd7f4f604f654a4c1914677ac" title=" " alt="" coords="211,62,356,88"/>
<area shape="poly" title=" " alt="" coords="161,90,195,85,196,90,161,96"/>
<area shape="rect" href="structsysio_1_1chain_1_1block__header.html#a39d57e33ef8d3f6ba59b4c458f0ae375" title=" " alt="" coords="209,112,359,153"/>
<area shape="poly" title=" " alt="" coords="161,113,193,117,193,122,161,118"/>
<area shape="rect" href="namespacefc_1_1raw.html#a64937a5adc8041247f7007882224e225" title=" " alt="" coords="220,181,348,206"/>
<area shape="poly" title=" " alt="" coords="127,123,210,162,235,172,233,177,208,167,124,127"/>
<area shape="rect" href="structfc_1_1log__config.html#aa0b03f0ae27cb64d934988512465c1a5" title=" " alt="" coords="422,5,548,46"/>
<area shape="poly" title=" " alt="" coords="335,23,407,23,407,28,335,28"/>
<area shape="rect" href="namespacefc.html#afb668c55fd6ee73e1fcd67e77d8f6009" title=" " alt="" coords="407,116,563,141"/>
<area shape="poly" title=" " alt="" coords="359,128,391,128,391,133,359,134"/>
<area shape="rect" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1" title=" " alt="" coords="436,189,534,214"/>
<area shape="poly" title=" " alt="" coords="349,194,422,196,421,202,348,199"/>
<area shape="poly" title=" " alt="" coords="451,190,445,180,449,170,463,164,485,162,510,165,523,172,520,176,508,170,485,167,464,169,453,174,450,180,456,187"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1detail_1_1block__log__impl_a26bb835c6572c573061cfd249c8dd04f_icgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a26bb835c6572c573061cfd249c8dd04f_icgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a26bb835c6572c573061cfd249c8dd04f_icgraph" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a26bb835c6572c573061cfd249c8dd04f_icgraph">
<area shape="rect" title=" " alt="" coords="219,5,374,46"/>
<area shape="rect" href="classsysio_1_1chain_1_1detail_1_1block__log__impl.html#ab69d5b8b61676bd8a36f7e078d0eab7d" title=" " alt="" coords="5,5,171,46"/>
<area shape="poly" title=" " alt="" coords="203,28,171,28,171,23,203,23"/>
</map>
</div>

</div>
</div>
<a id="af92332d6e5756ef81998039527c3aa44" name="af92332d6e5756ef81998039527c3aa44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af92332d6e5756ef81998039527c3aa44">&#9670;&#160;</a></span>reopen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain::detail::detail::block_log_impl::reopen </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00130">130</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  130</span>                                        {</div>
<div class="line"><span class="lineno">  131</span>         <a class="code hl_function" href="#aae74e8b82422fd994eae49684c674181">close</a>();</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>         <span class="comment">// open to create files if they don&#39;t exist</span></div>
<div class="line"><span class="lineno">  134</span>         <span class="comment">//ilog(&quot;Opening block log at ${path}&quot;, (&quot;path&quot;, my-&gt;block_file.generic_string()));</span></div>
<div class="line"><span class="lineno">  135</span>         <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a9e01adaeee108420312ed271133a2d7d">open</a>( <a class="code hl_define" href="block__log_8cpp.html#ac45b3ac31205498f15768648d162af9c">LOG_WRITE_C</a> );</div>
<div class="line"><span class="lineno">  136</span>         <a class="code hl_variable" href="#ab91832c777d3c1a4ae258705e0b5a012">index_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a9e01adaeee108420312ed271133a2d7d">open</a>( <a class="code hl_define" href="block__log_8cpp.html#ac45b3ac31205498f15768648d162af9c">LOG_WRITE_C</a> );</div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>         <a class="code hl_function" href="#aae74e8b82422fd994eae49684c674181">close</a>();</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>         <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a9e01adaeee108420312ed271133a2d7d">open</a>( <a class="code hl_define" href="block__log_8cpp.html#a644b2e9b450d4e270de82f6fd641d064">LOG_RW_C</a> );</div>
<div class="line"><span class="lineno">  141</span>         <a class="code hl_variable" href="#ab91832c777d3c1a4ae258705e0b5a012">index_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a9e01adaeee108420312ed271133a2d7d">open</a>( <a class="code hl_define" href="block__log_8cpp.html#a644b2e9b450d4e270de82f6fd641d064">LOG_RW_C</a> );</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>         <a class="code hl_variable" href="#aa3e23eb3ef018370ff86033bd5b232c7">open_files</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  144</span>      }</div>
<div class="ttc" id="ablock__log_8cpp_html_a644b2e9b450d4e270de82f6fd641d064"><div class="ttname"><a href="block__log_8cpp.html#a644b2e9b450d4e270de82f6fd641d064">LOG_RW_C</a></div><div class="ttdeci">#define LOG_RW_C</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00013">block_log.cpp:13</a></div></div>
<div class="ttc" id="ablock__log_8cpp_html_ac45b3ac31205498f15768648d162af9c"><div class="ttname"><a href="block__log_8cpp.html#ac45b3ac31205498f15768648d162af9c">LOG_WRITE_C</a></div><div class="ttdeci">#define LOG_WRITE_C</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00012">block_log.cpp:12</a></div></div>
<div class="ttc" id="aclassfc_1_1cfile_html_a9e01adaeee108420312ed271133a2d7d"><div class="ttname"><a href="classfc_1_1cfile.html#a9e01adaeee108420312ed271133a2d7d">fc::cfile::open</a></div><div class="ttdeci">void open(const char *mode)</div><div class="ttdef"><b>Definition</b> <a href="cfile_8hpp_source.html#l00065">cfile.hpp:65</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_html_aae74e8b82422fd994eae49684c674181"><div class="ttname"><a href="#aae74e8b82422fd994eae49684c674181">sysio::chain::detail::block_log_impl::close</a></div><div class="ttdeci">void close()</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00091">block_log.cpp:91</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1detail_1_1block__log__impl_af92332d6e5756ef81998039527c3aa44_cgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1detail_1_1block__log__impl_af92332d6e5756ef81998039527c3aa44_cgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_af92332d6e5756ef81998039527c3aa44_cgraph" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_af92332d6e5756ef81998039527c3aa44_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,168,46"/>
<area shape="rect" href="integration_8cpp.html#af5b66d867a040d002fb57d645cae3fb4" title=" " alt="" coords="216,13,268,38"/>
<area shape="poly" title=" " alt="" coords="168,23,200,23,200,28,168,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1detail_1_1block__log__impl_af92332d6e5756ef81998039527c3aa44_icgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1detail_1_1block__log__impl_af92332d6e5756ef81998039527c3aa44_icgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_af92332d6e5756ef81998039527c3aa44_icgraph" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_af92332d6e5756ef81998039527c3aa44_icgraph">
<area shape="rect" title=" " alt="" coords="425,13,587,54"/>
<area shape="rect" href="classsysio_1_1chain_1_1detail_1_1block__log__impl.html#adc78c993bbe5faed8a0a46d3b36eb0e8" title=" " alt="" coords="219,5,377,61"/>
<area shape="poly" title=" " alt="" coords="410,36,377,36,377,30,410,30"/>
<area shape="rect" href="classsysio_1_1chain_1_1detail_1_1block__log__impl.html#ab69d5b8b61676bd8a36f7e078d0eab7d" title=" " alt="" coords="5,13,171,54"/>
<area shape="poly" title=" " alt="" coords="203,36,171,36,171,30,203,30"/>
</map>
</div>

</div>
</div>
<a id="aa7b6865819f90c5de5bdef7de1403a40" name="aa7b6865819f90c5de5bdef7de1403a40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7b6865819f90c5de5bdef7de1403a40">&#9670;&#160;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename <a class="el" href="prettywritertest_8cpp.html#a6283df8c4e365cc8a01727e2d7ad44bf">T</a> &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain::detail::block_log_impl::reset </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="prettywritertest_8cpp.html#a6283df8c4e365cc8a01727e2d7ad44bf">T</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>t</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#aa10ee348c57604b615bc8570f6685102">signed_block_ptr</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>genesis_block</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></td>          <td class="paramname"><span class="paramname"><em>first_block_num</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00548">548</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  548</span>                                                                                                          {</div>
<div class="line"><span class="lineno">  549</span>      <a class="code hl_function" href="#aae74e8b82422fd994eae49684c674181">close</a>();</div>
<div class="line"><span class="lineno">  550</span> </div>
<div class="line"><span class="lineno">  551</span>      <a class="code hl_function" href="namespacefc.html#a50ad24e0099358d167967f9df2e368fc">fc::remove_all</a>( <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#aba9b5dcf06d12cc653b8eb4224351ff7">get_file_path</a>() );</div>
<div class="line"><span class="lineno">  552</span>      <a class="code hl_function" href="namespacefc.html#a50ad24e0099358d167967f9df2e368fc">fc::remove_all</a>( <a class="code hl_variable" href="#ab91832c777d3c1a4ae258705e0b5a012">index_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#aba9b5dcf06d12cc653b8eb4224351ff7">get_file_path</a>() );</div>
<div class="line"><span class="lineno">  553</span> </div>
<div class="line"><span class="lineno">  554</span>      <a class="code hl_function" href="#af92332d6e5756ef81998039527c3aa44">reopen</a>();</div>
<div class="line"><span class="lineno">  555</span> </div>
<div class="line"><span class="lineno">  556</span>      <a class="code hl_variable" href="#a6a40dafa28c7166f8cbcb30a9913e35f">version</a> = 0; <span class="comment">// version of 0 is invalid; it indicates that subsequent data was not properly written to the block log</span></div>
<div class="line"><span class="lineno">  557</span>      <a class="code hl_variable" href="#ae656e25129fe4dac801f5b2474f7f429">index_first_block_num</a> = <a class="code hl_variable" href="#a386d5ccdef1827a955adfeb2650a641d">first_block_num</a> = first_bnum;</div>
<div class="line"><span class="lineno">  558</span> </div>
<div class="line"><span class="lineno">  559</span>      <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a29badc2b6c1f589d0c79b20ce31cacf0">seek_end</a>(0);</div>
<div class="line"><span class="lineno">  560</span>      <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#af6ad44b8179f355db75a9d01de931235">write</a>((<span class="keywordtype">char</span>*)&amp;<a class="code hl_variable" href="#a6a40dafa28c7166f8cbcb30a9913e35f">version</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="#a6a40dafa28c7166f8cbcb30a9913e35f">version</a>));</div>
<div class="line"><span class="lineno">  561</span>      <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#af6ad44b8179f355db75a9d01de931235">write</a>((<span class="keywordtype">char</span>*)&amp;<a class="code hl_variable" href="#a386d5ccdef1827a955adfeb2650a641d">first_block_num</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="#a386d5ccdef1827a955adfeb2650a641d">first_block_num</a>));</div>
<div class="line"><span class="lineno">  562</span> </div>
<div class="line"><span class="lineno">  563</span>      <a class="code hl_function" href="#a7a42f8e6e30d73b2369e2e5af4f0d76a">write</a>(t);</div>
<div class="line"><span class="lineno">  564</span>      <a class="code hl_variable" href="#a0ca403af221cd921ff050caafcc3be96">genesis_written_to_block_log</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  565</span> </div>
<div class="line"><span class="lineno">  566</span>      <span class="comment">// append a totem to indicate the division between blocks and header</span></div>
<div class="line"><span class="lineno">  567</span>      <span class="keyword">auto</span> totem = <a class="code hl_variable" href="classsysio_1_1chain_1_1block__log.html#a02319a8bef22b7a167f17314c00b1ac1">block_log::npos</a>;</div>
<div class="line"><span class="lineno">  568</span>      <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#af6ad44b8179f355db75a9d01de931235">write</a>((<span class="keywordtype">char</span>*)&amp;totem, <span class="keyword">sizeof</span>(totem));</div>
<div class="line"><span class="lineno">  569</span> </div>
<div class="line"><span class="lineno">  570</span>      <span class="keywordflow">if</span> (first_block) {</div>
<div class="line"><span class="lineno">  571</span>         <a class="code hl_function" href="#ab69d5b8b61676bd8a36f7e078d0eab7d">append</a>(first_block);</div>
<div class="line"><span class="lineno">  572</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  573</span>         <a class="code hl_variable" href="#a2817ed62e9f49dfcef66fa1fa62dd2eb">head</a>.reset();</div>
<div class="line"><span class="lineno">  574</span>         <a class="code hl_variable" href="#a7a7504d0ec7d2b78838de654d9403086">head_id</a> = {};</div>
<div class="line"><span class="lineno">  575</span>         <span class="keywordflow">if</span>(<a class="code hl_variable" href="#a2d6088bd0444c0ec852568a9070ad994">prune_config</a>)</div>
<div class="line"><span class="lineno">  576</span>            <a class="code hl_function" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a>(<a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>, (<a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)0);</div>
<div class="line"><span class="lineno">  577</span>      }</div>
<div class="line"><span class="lineno">  578</span> </div>
<div class="line"><span class="lineno">  579</span>      <span class="keyword">auto</span> pos = <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#abc92fc8d64550b772a69ca1b63f75bfb">tellp</a>();</div>
<div class="line"><span class="lineno">  580</span> </div>
<div class="line"><span class="lineno">  581</span>      <span class="keyword">static_assert</span>( <a class="code hl_variable" href="classsysio_1_1chain_1_1block__log.html#add7716a8093b81e1a51ed52897e97770">block_log::max_supported_version</a> &gt; 0, <span class="stringliteral">&quot;a version number of zero is not supported&quot;</span> );</div>
<div class="line"><span class="lineno">  582</span> </div>
<div class="line"><span class="lineno">  583</span>      <span class="comment">// going back to write correct version to indicate that all block log header data writes completed successfully</span></div>
<div class="line"><span class="lineno">  584</span>      <a class="code hl_variable" href="#a6a40dafa28c7166f8cbcb30a9913e35f">version</a> = <a class="code hl_variable" href="classsysio_1_1chain_1_1block__log.html#add7716a8093b81e1a51ed52897e97770">block_log::max_supported_version</a>;</div>
<div class="line"><span class="lineno">  585</span>      <span class="keywordflow">if</span>(<a class="code hl_variable" href="#a2d6088bd0444c0ec852568a9070ad994">prune_config</a>)</div>
<div class="line"><span class="lineno">  586</span>         <a class="code hl_variable" href="#a6a40dafa28c7166f8cbcb30a9913e35f">version</a> |= <a class="code hl_variable" href="namespacesysio_1_1chain_1_1detail.html#a0edc30f70978f937e139af24359d8654">pruned_version_flag</a>;</div>
<div class="line"><span class="lineno">  587</span>      <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a6eb4fe4530480f13c6cf773a7f1e3847">seek</a>( 0 );</div>
<div class="line"><span class="lineno">  588</span>      <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#af6ad44b8179f355db75a9d01de931235">write</a>( (<span class="keywordtype">char</span>*)&amp;<a class="code hl_variable" href="#a6a40dafa28c7166f8cbcb30a9913e35f">version</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="#a6a40dafa28c7166f8cbcb30a9913e35f">version</a>) );</div>
<div class="line"><span class="lineno">  589</span>      <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a6eb4fe4530480f13c6cf773a7f1e3847">seek</a>( pos );</div>
<div class="line"><span class="lineno">  590</span>      <a class="code hl_function" href="#a3fe3e126c7e5357f10db9d4c9244ded9">flush</a>();</div>
<div class="line"><span class="lineno">  591</span>   }</div>
<div class="ttc" id="aclassfc_1_1cfile_html_aba9b5dcf06d12cc653b8eb4224351ff7"><div class="ttname"><a href="classfc_1_1cfile.html#aba9b5dcf06d12cc653b8eb4224351ff7">fc::cfile::get_file_path</a></div><div class="ttdeci">fc::path get_file_path() const</div><div class="ttdef"><b>Definition</b> <a href="cfile_8hpp_source.html#l00041">cfile.hpp:41</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_html_a7a42f8e6e30d73b2369e2e5af4f0d76a"><div class="ttname"><a href="#a7a42f8e6e30d73b2369e2e5af4f0d76a">sysio::chain::detail::block_log_impl::write</a></div><div class="ttdeci">void write(const genesis_state &amp;gs)</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00603">block_log.cpp:603</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_html_ab69d5b8b61676bd8a36f7e078d0eab7d"><div class="ttname"><a href="#ab69d5b8b61676bd8a36f7e078d0eab7d">sysio::chain::detail::block_log_impl::append</a></div><div class="ttdeci">void append(const signed_block_ptr &amp;b)</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00362">block_log.cpp:362</a></div></div>
<div class="ttc" id="anamespacefc_html_a50ad24e0099358d167967f9df2e368fc"><div class="ttname"><a href="namespacefc.html#a50ad24e0099358d167967f9df2e368fc">fc::remove_all</a></div><div class="ttdeci">void remove_all(const path &amp;p)</div><div class="ttdef"><b>Definition</b> <a href="filesystem_8cpp_source.html#l00248">filesystem.cpp:248</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1detail_html_a0edc30f70978f937e139af24359d8654"><div class="ttname"><a href="namespacesysio_1_1chain_1_1detail.html#a0edc30f70978f937e139af24359d8654">sysio::chain::detail::pruned_version_flag</a></div><div class="ttdeci">constexpr uint32_t pruned_version_flag</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00122">block_log.cpp:122</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1detail_1_1block__log__impl_aa7b6865819f90c5de5bdef7de1403a40_cgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1detail_1_1block__log__impl_aa7b6865819f90c5de5bdef7de1403a40_cgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_aa7b6865819f90c5de5bdef7de1403a40_cgraph" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_aa7b6865819f90c5de5bdef7de1403a40_cgraph">
<area shape="rect" title=" " alt="" coords="5,71,158,112"/>
<area shape="rect" href="integration_8cpp.html#af5b66d867a040d002fb57d645cae3fb4" title=" " alt="" coords="231,5,284,31"/>
<area shape="poly" title=" " alt="" coords="131,68,216,32,218,37,133,73"/>
<area shape="rect" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1" title=" " alt="" coords="209,79,306,104"/>
<area shape="poly" title=" " alt="" coords="158,89,193,89,193,94,158,94"/>
<area shape="rect" href="namespacefc.html#a50ad24e0099358d167967f9df2e368fc" title=" " alt="" coords="206,128,309,154"/>
<area shape="poly" title=" " alt="" coords="157,110,195,121,194,126,156,115"/>
<area shape="poly" title=" " alt="" coords="228,80,222,70,225,60,237,54,257,52,279,55,290,61,287,66,277,60,257,57,239,59,229,64,227,69,232,77"/>
</map>
</div>

</div>
</div>
<a id="a31dfc2a521d5fa8eae9eb70c0012f748" name="a31dfc2a521d5fa8eae9eb70c0012f748"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31dfc2a521d5fa8eae9eb70c0012f748">&#9670;&#160;</a></span>try_exit_vacuum()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain::detail::block_log_impl::try_exit_vacuum </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00072">72</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   72</span>                                   {</div>
<div class="line"><span class="lineno">   73</span>               <span class="comment">//for a pruned log that has at least one block, see if we should vacuum it</span></div>
<div class="line"><span class="lineno">   74</span>               <span class="keywordflow">if</span>( <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#ae5cdb4f43248d08842f7420b48534863">is_open</a>() &amp;&amp; <a class="code hl_variable" href="#ab91832c777d3c1a4ae258705e0b5a012">index_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#ae5cdb4f43248d08842f7420b48534863">is_open</a>() &amp;&amp; <a class="code hl_variable" href="#a2d6088bd0444c0ec852568a9070ad994">prune_config</a> &amp;&amp; <a class="code hl_variable" href="#a2d6088bd0444c0ec852568a9070ad994">prune_config</a>-&gt;vacuum_on_close) {</div>
<div class="line"><span class="lineno">   75</span>                  <span class="keywordflow">if</span>(!<a class="code hl_variable" href="#a2817ed62e9f49dfcef66fa1fa62dd2eb">head</a>) {</div>
<div class="line"><span class="lineno">   76</span>                     <span class="comment">//disregard vacuum_on_close size if there isn&#39;t even a block and just do it silently anyways</span></div>
<div class="line"><span class="lineno">   77</span>                     <a class="code hl_function" href="#a4d674931193a781b4b3d2e89a750550f">vacuum</a>();</div>
<div class="line"><span class="lineno">   78</span>                  }</div>
<div class="line"><span class="lineno">   79</span>                  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   80</span>                     <span class="keyword">const</span> <span class="keywordtype">size_t</span> first_data_pos = <a class="code hl_function" href="#a2203611ba80e3920b0cbde67d9ed4bc7">get_block_pos</a>(<a class="code hl_variable" href="#a386d5ccdef1827a955adfeb2650a641d">first_block_num</a>);</div>
<div class="line"><span class="lineno">   81</span>                     <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a29badc2b6c1f589d0c79b20ce31cacf0">seek_end</a>(-<span class="keyword">sizeof</span>(<a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>));</div>
<div class="line"><span class="lineno">   82</span>                     <span class="keyword">const</span> <span class="keywordtype">size_t</span> last_data_pos = <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#abc92fc8d64550b772a69ca1b63f75bfb">tellp</a>();</div>
<div class="line"><span class="lineno">   83</span>                     <span class="keywordflow">if</span>(last_data_pos - first_data_pos &lt; prune_config-&gt;vacuum_on_close) {</div>
<div class="line"><span class="lineno">   84</span>                        <a class="code hl_define" href="logger_8hpp.html#a831cf08dc63704c11fd154132c6e8bdb">ilog</a>(<span class="stringliteral">&quot;Vacuuming pruned block log&quot;</span>);</div>
<div class="line"><span class="lineno">   85</span>                        <a class="code hl_function" href="#a4d674931193a781b4b3d2e89a750550f">vacuum</a>();</div>
<div class="line"><span class="lineno">   86</span>                     }</div>
<div class="line"><span class="lineno">   87</span>                  }</div>
<div class="line"><span class="lineno">   88</span>               }</div>
<div class="line"><span class="lineno">   89</span>            }</div>
<div class="ttc" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_html_a4d674931193a781b4b3d2e89a750550f"><div class="ttname"><a href="#a4d674931193a781b4b3d2e89a750550f">sysio::chain::detail::block_log_impl::vacuum</a></div><div class="ttdeci">void vacuum()</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00477">block_log.cpp:477</a></div></div>
<div class="ttc" id="alogger_8hpp_html_a831cf08dc63704c11fd154132c6e8bdb"><div class="ttname"><a href="logger_8hpp.html#a831cf08dc63704c11fd154132c6e8bdb">ilog</a></div><div class="ttdeci">#define ilog(FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="logger_8hpp_source.html#l00118">logger.hpp:118</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1detail_1_1block__log__impl_a31dfc2a521d5fa8eae9eb70c0012f748_cgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a31dfc2a521d5fa8eae9eb70c0012f748_cgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a31dfc2a521d5fa8eae9eb70c0012f748_cgraph" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a31dfc2a521d5fa8eae9eb70c0012f748_cgraph">
<area shape="rect" title=" " alt="" coords="5,89,144,145"/>
<area shape="rect" href="classsysio_1_1chain_1_1detail_1_1block__log__impl.html#a2203611ba80e3920b0cbde67d9ed4bc7" title=" " alt="" coords="206,154,347,210"/>
<area shape="poly" title=" " alt="" coords="145,137,192,152,190,157,143,142"/>
<area shape="rect" href="classfc_1_1cfile.html#ae5cdb4f43248d08842f7420b48534863" title=" " alt="" coords="218,55,335,80"/>
<area shape="poly" title=" " alt="" coords="143,97,206,82,207,87,144,103"/>
<area shape="rect" href="classfc_1_1cfile.html#a29badc2b6c1f589d0c79b20ce31cacf0" title=" " alt="" coords="212,5,340,31"/>
<area shape="poly" title=" " alt="" coords="112,86,149,62,191,40,205,34,207,39,193,45,152,67,115,91"/>
<area shape="rect" href="classfc_1_1cfile.html#abc92fc8d64550b772a69ca1b63f75bfb" title=" " alt="" coords="228,104,324,130"/>
<area shape="poly" title=" " alt="" coords="144,114,213,114,213,120,144,120"/>
<area shape="rect" href="classsysio_1_1chain_1_1detail_1_1block__log__impl.html#a4d674931193a781b4b3d2e89a750550f" title=" " alt="" coords="192,234,361,274"/>
<area shape="poly" title=" " alt="" coords="103,143,143,182,193,220,201,224,198,229,190,224,140,186,99,147"/>
<area shape="rect" href="structsysio_1_1chain_1_1block__header.html#a39d57e33ef8d3f6ba59b4c458f0ae375" title=" " alt="" coords="411,166,561,206"/>
<area shape="poly" title=" " alt="" coords="347,181,395,182,395,187,347,186"/>
<area shape="rect" href="namespacefc.html#afb668c55fd6ee73e1fcd67e77d8f6009" title=" " alt="" coords="611,173,768,199"/>
<area shape="poly" title=" " alt="" coords="562,184,596,184,596,189,562,189"/>
<area shape="rect" href="classfc_1_1path.html#ab1eae2062df4ea01435348ec52fb3784" title=" " alt="" coords="409,5,563,31"/>
<area shape="poly" title=" " alt="" coords="341,16,393,16,393,21,341,21"/>
<area shape="rect" href="classfc_1_1cfile.html#aba9b5dcf06d12cc653b8eb4224351ff7" title=" " alt="" coords="413,104,559,130"/>
<area shape="poly" title=" " alt="" coords="325,114,397,114,397,120,325,120"/>
<area shape="poly" title=" " alt="" coords="341,231,406,209,407,214,342,236"/>
<area shape="rect" href="namespacefc.html#aae3e907b120751591ca6919ac66c384b" title=" " alt="" coords="442,287,530,312"/>
<area shape="poly" title=" " alt="" coords="362,270,428,284,426,289,361,275"/>
<area shape="rect" href="namespacefc.html#ab25ea24552f2c490047c335a102f12fc" title=" " alt="" coords="436,237,536,263"/>
<area shape="poly" title=" " alt="" coords="361,250,421,249,421,254,361,255"/>
<area shape="rect" href="namespacefc.html#a2bbff129626558fab1e343fcd5ad8bc5" title=" " alt="" coords="639,237,740,263"/>
<area shape="poly" title=" " alt="" coords="536,248,623,248,623,253,536,253"/>
</map>
</div>

</div>
</div>
<a id="a4d674931193a781b4b3d2e89a750550f" name="a4d674931193a781b4b3d2e89a750550f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d674931193a781b4b3d2e89a750550f">&#9670;&#160;</a></span>vacuum()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain::detail::block_log_impl::vacuum </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00477">477</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  477</span>                                     {</div>
<div class="line"><span class="lineno">  478</span>      <span class="comment">//go ahead and write a new valid header now. if the vacuum fails midway, at least this means maybe the</span></div>
<div class="line"><span class="lineno">  479</span>      <span class="comment">// block recovery can get through some blocks.</span></div>
<div class="line"><span class="lineno">  480</span>      <span class="keywordtype">size_t</span> copy_to_pos = <a class="code hl_function" href="#a4bf087087dcea405e245031d4f9db5a4">convert_existing_header_to_vacuumed</a>();</div>
<div class="line"><span class="lineno">  481</span> </div>
<div class="line"><span class="lineno">  482</span>      <a class="code hl_variable" href="#a6a40dafa28c7166f8cbcb30a9913e35f">version</a> = <a class="code hl_variable" href="classsysio_1_1chain_1_1block__log.html#add7716a8093b81e1a51ed52897e97770">block_log::max_supported_version</a>;</div>
<div class="line"><span class="lineno">  483</span>      <a class="code hl_variable" href="#a2d6088bd0444c0ec852568a9070ad994">prune_config</a>.reset();</div>
<div class="line"><span class="lineno">  484</span> </div>
<div class="line"><span class="lineno">  485</span>      <span class="comment">//if there is no head block though, bail now, otherwise first_block_num won&#39;t actually be available</span></div>
<div class="line"><span class="lineno">  486</span>      <span class="comment">// and it&#39;ll mess this all up. Be sure to still remove the 4 byte trailer though.</span></div>
<div class="line"><span class="lineno">  487</span>      <span class="keywordflow">if</span>(!<a class="code hl_variable" href="#a2817ed62e9f49dfcef66fa1fa62dd2eb">head</a>) {</div>
<div class="line"><span class="lineno">  488</span>         <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a2e03001fc7d98a010f98c56fb7c62a69">flush</a>();</div>
<div class="line"><span class="lineno">  489</span>         <a class="code hl_function" href="namespacefc.html#ab25ea24552f2c490047c335a102f12fc">fc::resize_file</a>(<a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#aba9b5dcf06d12cc653b8eb4224351ff7">get_file_path</a>(), <a class="code hl_function" href="namespacefc.html#aae3e907b120751591ca6919ac66c384b">fc::file_size</a>(<a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#aba9b5dcf06d12cc653b8eb4224351ff7">get_file_path</a>()) - <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>));</div>
<div class="line"><span class="lineno">  490</span>         <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  491</span>      }</div>
<div class="line"><span class="lineno">  492</span> </div>
<div class="line"><span class="lineno">  493</span>      <span class="keywordtype">size_t</span> copy_from_pos = <a class="code hl_function" href="#a2203611ba80e3920b0cbde67d9ed4bc7">get_block_pos</a>(<a class="code hl_variable" href="#a386d5ccdef1827a955adfeb2650a641d">first_block_num</a>);</div>
<div class="line"><span class="lineno">  494</span>      <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a29badc2b6c1f589d0c79b20ce31cacf0">seek_end</a>(-<span class="keyword">sizeof</span>(<a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>));</div>
<div class="line"><span class="lineno">  495</span>      <span class="keywordtype">size_t</span> copy_sz = <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#abc92fc8d64550b772a69ca1b63f75bfb">tellp</a>() - copy_from_pos;</div>
<div class="line"><span class="lineno">  496</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> num_blocks_in_log = <a class="code hl_function" href="structsysio_1_1chain_1_1block__header.html#a39d57e33ef8d3f6ba59b4c458f0ae375">chain::block_header::num_from_id</a>(<a class="code hl_variable" href="#a7a7504d0ec7d2b78838de654d9403086">head_id</a>) - <a class="code hl_variable" href="#a386d5ccdef1827a955adfeb2650a641d">first_block_num</a> + 1;</div>
<div class="line"><span class="lineno">  497</span> </div>
<div class="line"><span class="lineno">  498</span>      <span class="keyword">const</span> <span class="keywordtype">size_t</span> offset_bytes = copy_from_pos - copy_to_pos;</div>
<div class="line"><span class="lineno">  499</span>      <span class="keyword">const</span> <span class="keywordtype">size_t</span> offset_blocks = <a class="code hl_variable" href="#a386d5ccdef1827a955adfeb2650a641d">first_block_num</a> - <a class="code hl_variable" href="#ae656e25129fe4dac801f5b2474f7f429">index_first_block_num</a>;</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>      std::vector&lt;char&gt; buff;</div>
<div class="line"><span class="lineno">  502</span>      buff.resize(4*1024*1024);</div>
<div class="line"><span class="lineno">  503</span> </div>
<div class="line"><span class="lineno">  504</span>      <span class="keyword">auto</span> tick = std::chrono::time_point_cast&lt;std::chrono::seconds&gt;(std::chrono::system_clock::now());</div>
<div class="line"><span class="lineno">  505</span>      <span class="keywordflow">while</span>(copy_sz) {</div>
<div class="line"><span class="lineno">  506</span>         <span class="keyword">const</span> <span class="keywordtype">size_t</span> copy_this_round = std::min(buff.size(), copy_sz);</div>
<div class="line"><span class="lineno">  507</span>         <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a6eb4fe4530480f13c6cf773a7f1e3847">seek</a>(copy_from_pos);</div>
<div class="line"><span class="lineno">  508</span>         <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a247250a28d17544a57dfafe07012d27b">read</a>(buff.data(), copy_this_round);</div>
<div class="line"><span class="lineno">  509</span>         <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a9727290ea0b449e34d6978a60ec22698">punch_hole</a>(copy_to_pos, copy_from_pos+copy_this_round);</div>
<div class="line"><span class="lineno">  510</span>         <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a6eb4fe4530480f13c6cf773a7f1e3847">seek</a>(copy_to_pos);</div>
<div class="line"><span class="lineno">  511</span>         <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#af6ad44b8179f355db75a9d01de931235">write</a>(buff.data(), copy_this_round);</div>
<div class="line"><span class="lineno">  512</span> </div>
<div class="line"><span class="lineno">  513</span>         copy_from_pos += copy_this_round;</div>
<div class="line"><span class="lineno">  514</span>         copy_to_pos += copy_this_round;</div>
<div class="line"><span class="lineno">  515</span>         copy_sz -= copy_this_round;</div>
<div class="line"><span class="lineno">  516</span> </div>
<div class="line"><span class="lineno">  517</span>         <span class="keyword">const</span> <span class="keyword">auto</span> tock = std::chrono::time_point_cast&lt;std::chrono::seconds&gt;(std::chrono::system_clock::now());</div>
<div class="line"><span class="lineno">  518</span>         <span class="keywordflow">if</span>(tick &lt; tock - std::chrono::seconds(5)) {</div>
<div class="line"><span class="lineno">  519</span>            <a class="code hl_define" href="logger_8hpp.html#a831cf08dc63704c11fd154132c6e8bdb">ilog</a>(<span class="stringliteral">&quot;Vacuuming pruned block log, ${b} bytes remaining&quot;</span>, (<span class="stringliteral">&quot;b&quot;</span>, copy_sz));</div>
<div class="line"><span class="lineno">  520</span>            tick = tock;</div>
<div class="line"><span class="lineno">  521</span>         }</div>
<div class="line"><span class="lineno">  522</span>      }</div>
<div class="line"><span class="lineno">  523</span>      <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a2e03001fc7d98a010f98c56fb7c62a69">flush</a>();</div>
<div class="line"><span class="lineno">  524</span>      <a class="code hl_function" href="namespacefc.html#ab25ea24552f2c490047c335a102f12fc">fc::resize_file</a>(<a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#aba9b5dcf06d12cc653b8eb4224351ff7">get_file_path</a>(), <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#abc92fc8d64550b772a69ca1b63f75bfb">tellp</a>());</div>
<div class="line"><span class="lineno">  525</span> </div>
<div class="line"><span class="lineno">  526</span>      <a class="code hl_variable" href="#ab91832c777d3c1a4ae258705e0b5a012">index_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a2e03001fc7d98a010f98c56fb7c62a69">flush</a>();</div>
<div class="line"><span class="lineno">  527</span>      {</div>
<div class="line"><span class="lineno">  528</span>         boost::interprocess::mapped_region index_mapped(<a class="code hl_variable" href="#ab91832c777d3c1a4ae258705e0b5a012">index_file</a>, boost::interprocess::read_write);</div>
<div class="line"><span class="lineno">  529</span>         <a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>* index_ptr = (<a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>*)index_mapped.get_address();</div>
<div class="line"><span class="lineno">  530</span> </div>
<div class="line"><span class="lineno">  531</span>         <span class="keywordflow">for</span>(<a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> new_block_num = 0; new_block_num &lt; num_blocks_in_log; ++new_block_num) {</div>
<div class="line"><span class="lineno">  532</span>            <span class="keyword">const</span> <a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> new_pos = index_ptr[new_block_num + offset_blocks] - offset_bytes;</div>
<div class="line"><span class="lineno">  533</span>            index_ptr[new_block_num] = new_pos;</div>
<div class="line"><span class="lineno">  534</span> </div>
<div class="line"><span class="lineno">  535</span>            <span class="keywordflow">if</span>(new_block_num + 1 != num_blocks_in_log)</div>
<div class="line"><span class="lineno">  536</span>               <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a6eb4fe4530480f13c6cf773a7f1e3847">seek</a>(index_ptr[new_block_num + offset_blocks + 1] - offset_bytes - <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>));</div>
<div class="line"><span class="lineno">  537</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  538</span>               <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#a29badc2b6c1f589d0c79b20ce31cacf0">seek_end</a>(-<span class="keyword">sizeof</span>(<a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>));</div>
<div class="line"><span class="lineno">  539</span>            <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#af6ad44b8179f355db75a9d01de931235">write</a>((<span class="keywordtype">char</span>*)&amp;new_pos, <span class="keyword">sizeof</span>(new_pos));</div>
<div class="line"><span class="lineno">  540</span>         }</div>
<div class="line"><span class="lineno">  541</span>      }</div>
<div class="line"><span class="lineno">  542</span>      <a class="code hl_function" href="namespacefc.html#ab25ea24552f2c490047c335a102f12fc">fc::resize_file</a>(<a class="code hl_variable" href="#ab91832c777d3c1a4ae258705e0b5a012">index_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#aba9b5dcf06d12cc653b8eb4224351ff7">get_file_path</a>(), num_blocks_in_log*<span class="keyword">sizeof</span>(<a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>));</div>
<div class="line"><span class="lineno">  543</span> </div>
<div class="line"><span class="lineno">  544</span>      <a class="code hl_variable" href="#ae656e25129fe4dac801f5b2474f7f429">index_first_block_num</a> = <a class="code hl_variable" href="#a386d5ccdef1827a955adfeb2650a641d">first_block_num</a>;</div>
<div class="line"><span class="lineno">  545</span>   }</div>
<div class="ttc" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_html_a4bf087087dcea405e245031d4f9db5a4"><div class="ttname"><a href="#a4bf087087dcea405e245031d4f9db5a4">sysio::chain::detail::block_log_impl::convert_existing_header_to_vacuumed</a></div><div class="ttdeci">size_t convert_existing_header_to_vacuumed()</div><div class="ttdef"><b>Definition</b> <a href="block__log_8cpp_source.html#l00435">block_log.cpp:435</a></div></div>
<div class="ttc" id="anamespacefc_html_aae3e907b120751591ca6919ac66c384b"><div class="ttname"><a href="namespacefc.html#aae3e907b120751591ca6919ac66c384b">fc::file_size</a></div><div class="ttdeci">uint64_t file_size(const path &amp;p)</div><div class="ttdef"><b>Definition</b> <a href="filesystem_8cpp_source.html#l00227">filesystem.cpp:227</a></div></div>
<div class="ttc" id="anamespacefc_html_ab25ea24552f2c490047c335a102f12fc"><div class="ttname"><a href="namespacefc.html#ab25ea24552f2c490047c335a102f12fc">fc::resize_file</a></div><div class="ttdeci">void resize_file(const path &amp;file, size_t s)</div><div class="ttdef"><b>Definition</b> <a href="filesystem_8cpp_source.html#l00282">filesystem.cpp:282</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1detail_1_1block__log__impl_a4d674931193a781b4b3d2e89a750550f_cgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a4d674931193a781b4b3d2e89a750550f_cgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a4d674931193a781b4b3d2e89a750550f_cgraph" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a4d674931193a781b4b3d2e89a750550f_cgraph">
<area shape="rect" title=" " alt="" coords="5,55,175,96"/>
<area shape="rect" href="namespacefc.html#aae3e907b120751591ca6919ac66c384b" title=" " alt="" coords="254,5,342,31"/>
<area shape="poly" title=" " alt="" coords="165,52,238,32,240,37,167,57"/>
<area shape="rect" href="structsysio_1_1chain_1_1block__header.html#a39d57e33ef8d3f6ba59b4c458f0ae375" title=" " alt="" coords="223,55,373,96"/>
<area shape="poly" title=" " alt="" coords="175,73,207,73,207,78,175,78"/>
<area shape="rect" href="namespacefc.html#ab25ea24552f2c490047c335a102f12fc" title=" " alt="" coords="248,120,348,146"/>
<area shape="poly" title=" " alt="" coords="167,94,235,113,233,118,165,99"/>
<area shape="rect" href="namespacefc.html#afb668c55fd6ee73e1fcd67e77d8f6009" title=" " alt="" coords="421,63,577,88"/>
<area shape="poly" title=" " alt="" coords="373,73,405,73,405,78,373,78"/>
<area shape="rect" href="namespacefc.html#a2bbff129626558fab1e343fcd5ad8bc5" title=" " alt="" coords="448,120,550,146"/>
<area shape="poly" title=" " alt="" coords="348,130,433,130,433,136,348,136"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1detail_1_1block__log__impl_a4d674931193a781b4b3d2e89a750550f_icgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a4d674931193a781b4b3d2e89a750550f_icgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a4d674931193a781b4b3d2e89a750550f_icgraph" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a4d674931193a781b4b3d2e89a750550f_icgraph">
<area shape="rect" title=" " alt="" coords="192,13,361,54"/>
<area shape="rect" href="classsysio_1_1chain_1_1detail_1_1block__log__impl.html#a31dfc2a521d5fa8eae9eb70c0012f748" title=" " alt="" coords="5,5,144,61"/>
<area shape="poly" title=" " alt="" coords="176,36,144,36,144,30,176,30"/>
</map>
</div>

</div>
</div>
<a id="acc9105c0592b8bbbfe879c51ec7f3241" name="acc9105c0592b8bbbfe879c51ec7f3241"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc9105c0592b8bbbfe879c51ec7f3241">&#9670;&#160;</a></span>write() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain::detail::block_log_impl::write </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsysio_1_1chain_1_1chain__id__type.html">chain_id_type</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>chain_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00608">608</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  608</span>                                                                   {</div>
<div class="line"><span class="lineno">  609</span>      <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a> &lt;&lt; chain_id;</div>
<div class="line"><span class="lineno">  610</span>   }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7a42f8e6e30d73b2369e2e5af4f0d76a" name="a7a42f8e6e30d73b2369e2e5af4f0d76a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a42f8e6e30d73b2369e2e5af4f0d76a">&#9670;&#160;</a></span>write() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain::detail::block_log_impl::write </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsysio_1_1chain_1_1genesis__state.html">genesis_state</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>gs</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00603">603</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  603</span>                                                             {</div>
<div class="line"><span class="lineno">  604</span>      <span class="keyword">auto</span> data = <a class="code hl_function" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a>(gs);</div>
<div class="line"><span class="lineno">  605</span>      <a class="code hl_variable" href="#ad255facb8fee2020e71bd0efede5a4a7">block_file</a>.<a class="code hl_function" href="classfc_1_1cfile.html#af6ad44b8179f355db75a9d01de931235">write</a>(data.data(), data.size());</div>
<div class="line"><span class="lineno">  606</span>   }</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1detail_1_1block__log__impl_a7a42f8e6e30d73b2369e2e5af4f0d76a_cgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a7a42f8e6e30d73b2369e2e5af4f0d76a_cgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a7a42f8e6e30d73b2369e2e5af4f0d76a_cgraph" id="aclasssysio_1_1chain_1_1detail_1_1block__log__impl_a7a42f8e6e30d73b2369e2e5af4f0d76a_cgraph">
<area shape="rect" title=" " alt="" coords="5,22,157,62"/>
<area shape="rect" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1" title=" " alt="" coords="205,29,302,55"/>
<area shape="poly" title=" " alt="" coords="157,40,189,40,189,45,157,45"/>
<area shape="poly" title=" " alt="" coords="224,30,218,21,222,11,234,5,253,3,274,5,285,12,283,16,273,10,253,8,235,10,226,15,224,20,229,28"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ad255facb8fee2020e71bd0efede5a4a7" name="ad255facb8fee2020e71bd0efede5a4a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad255facb8fee2020e71bd0efede5a4a7">&#9670;&#160;</a></span>block_file</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfc_1_1cfile.html">fc::cfile</a> sysio::chain::detail::block_log_impl::block_file</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00044">44</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>

</div>
</div>
<a id="a386d5ccdef1827a955adfeb2650a641d" name="a386d5ccdef1827a955adfeb2650a641d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a386d5ccdef1827a955adfeb2650a641d">&#9670;&#160;</a></span>first_block_num</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> sysio::chain::detail::block_log_impl::first_block_num = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00049">49</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>

</div>
</div>
<a id="a0ca403af221cd921ff050caafcc3be96" name="a0ca403af221cd921ff050caafcc3be96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ca403af221cd921ff050caafcc3be96">&#9670;&#160;</a></span>genesis_written_to_block_log</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sysio::chain::detail::block_log_impl::genesis_written_to_block_log = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00047">47</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>

</div>
</div>
<a id="a2817ed62e9f49dfcef66fa1fa62dd2eb" name="a2817ed62e9f49dfcef66fa1fa62dd2eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2817ed62e9f49dfcef66fa1fa62dd2eb">&#9670;&#160;</a></span>head</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacesysio_1_1chain.html#aa10ee348c57604b615bc8570f6685102">signed_block_ptr</a> sysio::chain::detail::block_log_impl::head</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00042">42</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>

</div>
</div>
<a id="a7a7504d0ec7d2b78838de654d9403086" name="a7a7504d0ec7d2b78838de654d9403086"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a7504d0ec7d2b78838de654d9403086">&#9670;&#160;</a></span>head_id</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacesysio_1_1chain.html#a4b8e4b7ed9dcd18ee75d0de62e88aa17">block_id_type</a> sysio::chain::detail::block_log_impl::head_id</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00043">43</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>

</div>
</div>
<a id="ab91832c777d3c1a4ae258705e0b5a012" name="ab91832c777d3c1a4ae258705e0b5a012"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab91832c777d3c1a4ae258705e0b5a012">&#9670;&#160;</a></span>index_file</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfc_1_1cfile.html">fc::cfile</a> sysio::chain::detail::block_log_impl::index_file</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00045">45</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>

</div>
</div>
<a id="ae656e25129fe4dac801f5b2474f7f429" name="ae656e25129fe4dac801f5b2474f7f429"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae656e25129fe4dac801f5b2474f7f429">&#9670;&#160;</a></span>index_first_block_num</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> sysio::chain::detail::block_log_impl::index_first_block_num = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00050">50</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>

</div>
</div>
<a id="aa3e23eb3ef018370ff86033bd5b232c7" name="aa3e23eb3ef018370ff86033bd5b232c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3e23eb3ef018370ff86033bd5b232c7">&#9670;&#160;</a></span>open_files</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sysio::chain::detail::block_log_impl::open_files = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00046">46</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>

</div>
</div>
<a id="a2d6088bd0444c0ec852568a9070ad994" name="a2d6088bd0444c0ec852568a9070ad994"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d6088bd0444c0ec852568a9070ad994">&#9670;&#160;</a></span>prune_config</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt;<a class="el" href="structsysio_1_1chain_1_1block__log__prune__config.html">block_log_prune_config</a>&gt; sysio::chain::detail::block_log_impl::prune_config</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00051">51</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>

</div>
</div>
<a id="a6a40dafa28c7166f8cbcb30a9913e35f" name="a6a40dafa28c7166f8cbcb30a9913e35f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a40dafa28c7166f8cbcb30a9913e35f">&#9670;&#160;</a></span>version</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> sysio::chain::detail::block_log_impl::version = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="block__log_8cpp_source.html#l00048">48</a> of file <a class="el" href="block__log_8cpp_source.html">block_log.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>libraries/chain/<a class="el" href="block__log_8cpp_source.html">block_log.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacesysio.html">sysio</a></li><li class="navelem"><a class="el" href="namespacesysio_1_1chain.html">chain</a></li><li class="navelem"><a class="el" href="namespacesysio_1_1chain_1_1detail.html">detail</a></li><li class="navelem"><a class="el" href="classsysio_1_1chain_1_1detail_1_1block__log__impl.html">block_log_impl</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
