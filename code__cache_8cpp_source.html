<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wire Sysio: libraries/chain/webassembly/runtimes/sys-vm-oc/code_cache.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Wire Sysio<span id="projectnumber">&#160;Wire Sysion 1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('code__cache_8cpp_source.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">code_cache.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="code__cache_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno"><a class="line" href="code__cache_8cpp.html#ad25edacba00e4d0666a9959053b7cc10">    1</a></span><span class="preprocessor">#include &lt;<a class="code" href="logger__config_8hpp.html">fc/log/logger_config.hpp</a>&gt;</span> <span class="comment">//set_thread_name</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno"><a class="line" href="code__cache_8cpp.html#a4191e8e427b7aacaae0c4b0d555b1fba">    2</a></span> </div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="preprocessor">#include &lt;<a class="code" href="code__cache_8hpp.html">sysio/chain/webassembly/sys-vm-oc/code_cache.hpp</a>&gt;</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="preprocessor">#include &lt;<a class="code" href="chain_2include_2sysio_2chain_2webassembly_2sys-vm-oc_2config_8hpp.html">sysio/chain/webassembly/sys-vm-oc/config.hpp</a>&gt;</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &lt;<a class="code" href="libraries_2chain_2include_2sysio_2chain_2webassembly_2common_8hpp.html">sysio/chain/webassembly/common.hpp</a>&gt;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#include &lt;<a class="code" href="chain_2include_2sysio_2chain_2webassembly_2sys-vm-oc_2memory_8hpp.html">sysio/chain/webassembly/sys-vm-oc/memory.hpp</a>&gt;</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &lt;<a class="code" href="sys-vm-oc_2sys-vm-oc_8hpp.html">sysio/chain/webassembly/sys-vm-oc/sys-vm-oc.hpp</a>&gt;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &lt;<a class="code" href="intrinsic_8hpp.html">sysio/chain/webassembly/sys-vm-oc/intrinsic.hpp</a>&gt;</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &lt;<a class="code" href="compile__monitor_8hpp.html">sysio/chain/webassembly/sys-vm-oc/compile_monitor.hpp</a>&gt;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &lt;<a class="code" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html">sysio/chain/exceptions.hpp</a>&gt;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span> </div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &lt;sys/syscall.h&gt;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &lt;sys/mman.h&gt;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &lt;linux/memfd.h&gt;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span> </div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &quot;<a class="code" href="_module_8h.html">IR/Module.h</a>&quot;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &quot;<a class="code" href="_validate_8h.html">IR/Validate.h</a>&quot;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &quot;<a class="code" href="_w_a_s_m_8h.html">WASM/WASM.h</a>&quot;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &quot;<a class="code" href="chain_2webassembly_2runtimes_2sys-vm-oc_2_l_l_v_m_j_i_t_8h.html">LLVMJIT.h</a>&quot;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespace_i_r.html">IR</a>;</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespace_runtime.html">Runtime</a>;</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span> </div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacesysio.html">sysio</a> { <span class="keyword">namespace </span>chain { <span class="keyword">namespace </span>eosvmoc {</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span> </div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> header_offset = 512u;</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> header_size = 512u;</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> total_header_size = header_offset + header_size;</div>
<div class="foldopen" id="foldopen00030" data-start="{" data-end="}">
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno"><a class="line" href="namespacesysio_1_1chain_1_1eosvmoc.html#ad834e3c39ceead0c5229b0e45e079b06">   30</a></span><span class="keyword">static</span> <span class="keyword">constexpr</span> <a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> header_id = 0x32434f4d56534f45ULL; <span class="comment">//&quot;SYSVMOC2&quot; little endian</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span> </div>
<div class="foldopen" id="foldopen00032" data-start="{" data-end="};">
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1code__cache__header.html">   32</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1code__cache__header.html">code_cache_header</a> {</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1code__cache__header.html#ab1c29836774a16a4c7d0f44f0e835a59">   33</a></span>   <a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> <span class="keywordtype">id</span> = header_id;</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1code__cache__header.html#aae34e195211e269a27f27db1dfeb7ac7">   34</a></span>   <span class="keywordtype">bool</span> <a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1code__cache__header.html#aae34e195211e269a27f27db1dfeb7ac7">dirty</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1code__cache__header.html#a82534ad1b411daf319c3c24e74b77289">   35</a></span>   <a class="code hl_typedef" href="stdint_8h.html#a31b85deecb45924320becd11d3ee16ce">uintptr_t</a> <a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1code__cache__header.html#a82534ad1b411daf319c3c24e74b77289">serialized_descriptor_index</a> = 0;</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>} <a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc.html#ad834e3c39ceead0c5229b0e45e079b06">__attribute__</a> ((packed));</div>
</div>
</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> header_dirty_bit_offset_from_file_start = header_offset + offsetof(<a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1code__cache__header.html">code_cache_header</a>, <a class="code hl_variable" href="code__cache_8cpp.html#ad25edacba00e4d0666a9959053b7cc10">dirty</a>);</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> descriptor_ptr_from_file_start = header_offset + offsetof(<a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1code__cache__header.html">code_cache_header</a>, <a class="code hl_variable" href="code__cache_8cpp.html#a4191e8e427b7aacaae0c4b0d555b1fba">serialized_descriptor_index</a>);</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span> </div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="keyword">static_assert</span>(<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1code__cache__header.html">code_cache_header</a>) &lt;= header_size, <span class="stringliteral">&quot;code_cache_header too big&quot;</span>);</div>
<div class="foldopen" id="foldopen00041" data-start="{" data-end="}">
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__sync.html#ab31065b1fab5b6d5910d1cae71bb15cf">   41</a></span> </div>
<div class="foldopen" id="foldopen00042" data-start="{" data-end="}">
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__async.html#ab5e9f17c574c6388b10a05dcedea7fde">   42</a></span><a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__async.html#ab5e9f17c574c6388b10a05dcedea7fde">code_cache_async::code_cache_async</a>(<span class="keyword">const</span> bfs::path data_dir, <span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1config.html">eosvmoc::config</a>&amp; eosvmoc_config, <span class="keyword">const</span> <a class="code hl_class" href="classchainbase_1_1database.html">chainbase::database</a>&amp; db) :</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>   <a class="code hl_class" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html">code_cache_base</a>(data_dir, eosvmoc_config, db),</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>   _result_queue(eosvmoc_config.threads * 2),</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>   _threads(eosvmoc_config.threads)</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>{</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>   <a class="code hl_define" href="exception_8hpp.html#abed525eeff3ae581be7e4e2fcd3b7bf4">FC_ASSERT</a>(_threads, <span class="stringliteral">&quot;SYS VM OC requires at least 1 compile thread&quot;</span>);</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span> </div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>   wait_on_compile_monitor_message();</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span> </div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>   _monitor_reply_thread = std::thread([<span class="keyword">this</span>]() {</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>      <a class="code hl_function" href="namespacefc.html#ab58a7f71e88d7d4d5761bbd24837c595">fc::set_os_thread_name</a>(<span class="stringliteral">&quot;oc-monitor&quot;</span>);</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>      <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#acccb3fc4fe49eb154ea915ee8b350f70">_ctx</a>.run();</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>   });</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>}</div>
</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span> </div>
<div class="foldopen" id="foldopen00057" data-start="{" data-end="}">
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__async.html#ab8076b08d9220abbf0a2ec7f717d5925">   57</a></span><a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__async.html#ab8076b08d9220abbf0a2ec7f717d5925">code_cache_async::~code_cache_async</a>() {</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a1ea07bb510f7b82ecfb324bca6225728">_compile_monitor_write_socket</a>.shutdown(local::datagram_protocol::socket::shutdown_send);</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>   _monitor_reply_thread.join();</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>   consume_compile_thread_queue();</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>}</div>
</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span> </div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span><span class="comment">//remember again: wait_on_compile_monitor_message&#39;s callback is non-main thread!</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span><span class="keywordtype">void</span> code_cache_async::wait_on_compile_monitor_message() {</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a3422663ea869e784bf6b6e72cb43f96b">_compile_monitor_read_socket</a>.async_wait(local::datagram_protocol::socket::wait_read, [<span class="keyword">this</span>](<span class="keyword">auto</span> ec) {</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>      <span class="keywordflow">if</span>(ec) {</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>         <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#acccb3fc4fe49eb154ea915ee8b350f70">_ctx</a>.stop();</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>         <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>      }</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>      <span class="keyword">auto</span> [success, message, fds] = <a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc.html#aa65c4d6c02a0823262c6627a86cc74bc">read_message_with_fds</a>(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a3422663ea869e784bf6b6e72cb43f96b">_compile_monitor_read_socket</a>);</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>      <span class="keywordflow">if</span>(!success || !std::holds_alternative&lt;wasm_compilation_result_message&gt;(message)) {</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>         <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#acccb3fc4fe49eb154ea915ee8b350f70">_ctx</a>.stop();</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>         <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>      }</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span> </div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>      _result_queue.push(std::get&lt;wasm_compilation_result_message&gt;(message));</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span> </div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>      wait_on_compile_monitor_message();</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>   });</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>}</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span> </div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span> </div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span><span class="comment">//number processed, bytes available (only if number processed &gt; 0)</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>std::tuple&lt;size_t, size_t&gt; code_cache_async::consume_compile_thread_queue() {</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>   <span class="keywordtype">size_t</span> bytes_remaining = 0;</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>   <span class="keywordtype">size_t</span> gotsome = _result_queue.consume_all([&amp;](<span class="keyword">const</span> wasm_compilation_result_message&amp; result) {</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>      <span class="keywordflow">if</span>(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a6f9d3065fa9328cb776d6c68b0c9ef1f">_outstanding_compiles_and_poison</a>[result.code] == <span class="keyword">false</span>) {</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>         std::visit(<a class="code hl_function" href="namespacesysio_1_1chain.html#ae5470abf94d0fdeff7866fda992ba844">overloaded</a> {</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>            [&amp;](<span class="keyword">const</span> code_descriptor&amp; cd) {</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>               <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.push_front(cd);</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>            },</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>            [&amp;](<span class="keyword">const</span> compilation_result_unknownfailure&amp;) {</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>               <a class="code hl_define" href="logger_8hpp.html#a1759e5c9691d8ad754bdf5eff8bb23ac">wlog</a>(<span class="stringliteral">&quot;code ${c} failed to tier-up with SYS VM OC&quot;</span>, (<span class="stringliteral">&quot;c&quot;</span>, result.code.code_id));</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>               _blacklist.emplace(result.code);</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>            },</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>            [&amp;](<span class="keyword">const</span> compilation_result_toofull&amp;) {</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>               <a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a543e8301b86cc0682a715686279dc1c3">run_eviction_round</a>();</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>            }</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>         }, result.result);</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>      }</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>      <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a6f9d3065fa9328cb776d6c68b0c9ef1f">_outstanding_compiles_and_poison</a>.erase(result.code);</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>      bytes_remaining = result.cache_free_bytes;</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>   });</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span> </div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>   <span class="keywordflow">return</span> {gotsome, bytes_remaining};</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>}</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span> </div>
<div class="foldopen" id="foldopen00109" data-start="{" data-end="}">
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__async.html#ae6565ec4ecff75fbdbf99ab37604c2b0">  109</a></span><span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html">code_descriptor</a>* <span class="keyword">const</span> <a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__async.html#ae6565ec4ecff75fbdbf99ab37604c2b0">code_cache_async::get_descriptor_for_code</a>(<span class="keyword">const</span> <a class="code hl_class" href="classfc_1_1sha256.html">digest_type</a>&amp; code_id, <span class="keyword">const</span> <a class="code hl_typedef" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&amp; vm_version) {</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>   <span class="comment">//if there are any outstanding compiles, process the result queue now</span></div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>   <span class="keywordflow">if</span>(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a6f9d3065fa9328cb776d6c68b0c9ef1f">_outstanding_compiles_and_poison</a>.size()) {</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>      <span class="keyword">auto</span> [count_processed, bytes_remaining] = consume_compile_thread_queue();</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span> </div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>      <span class="keywordflow">if</span>(count_processed)</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>         <a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a249bdb27d2796f53a728b85a2889db44">check_eviction_threshold</a>(bytes_remaining);</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span> </div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>      <span class="keywordflow">while</span>(count_processed &amp;&amp; <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a44c50f4deb837180fa47026465c55d8a">_queued_compiles</a>.size()) {</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>         <span class="keyword">auto</span> nextup = <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a44c50f4deb837180fa47026465c55d8a">_queued_compiles</a>.begin();</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span> </div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>         <span class="comment">//it&#39;s not clear this check is required: if apply() was called for code then it existed in the code_index; and then</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>         <span class="comment">// if we got notification of it no longer existing we would have removed it from queued_compiles</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>         <span class="keyword">const</span> <a class="code hl_class" href="classsysio_1_1chain_1_1code__object.html">code_object</a>* <span class="keyword">const</span> codeobject = <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#ad7e0e5b63b94e48e35baacc15644b0b7">_db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#aa5a2ca0da0092693ac49b36b7ec6817a">find</a>&lt;<a class="code hl_class" href="classsysio_1_1chain_1_1code__object.html">code_object</a>,by_code_hash&gt;(boost::make_tuple(nextup-&gt;code_id, 0, nextup-&gt;vm_version));</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>         <span class="keywordflow">if</span>(codeobject) {</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>            <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a6f9d3065fa9328cb776d6c68b0c9ef1f">_outstanding_compiles_and_poison</a>.emplace(*nextup, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>            std::vector&lt;wrapped_fd&gt; fds_to_pass;</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>            fds_to_pass.emplace_back(<a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc.html#afe4909c18643f64d0c67a83885aefd90">memfd_for_bytearray</a>(codeobject-&gt;code));</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>            <a class="code hl_define" href="exception_8hpp.html#abed525eeff3ae581be7e4e2fcd3b7bf4">FC_ASSERT</a>(<a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc.html#a8715d32fd2e6a4a668578ca0d946b58b">write_message_with_fds</a>(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a1ea07bb510f7b82ecfb324bca6225728">_compile_monitor_write_socket</a>, <a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1compile__wasm__message.html">compile_wasm_message</a>{ *nextup }, fds_to_pass), <span class="stringliteral">&quot;SYS VM failed to communicate to OOP manager&quot;</span>);</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>            --count_processed;</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>         }</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>         <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a44c50f4deb837180fa47026465c55d8a">_queued_compiles</a>.erase(nextup);</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>      }</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>   }</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span> </div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>   <span class="comment">//check for entry in cache</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>   code_cache_index::index&lt;by_hash&gt;::type::iterator it = <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.get&lt;by_hash&gt;().find(boost::make_tuple(code_id, vm_version));</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>   <span class="keywordflow">if</span>(it != <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.get&lt;by_hash&gt;().end()) {</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>      <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.relocate(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.begin(), <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.project&lt;0&gt;(it));</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>      <span class="keywordflow">return</span> &amp;*it;</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>   }</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span> </div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>   <span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1code__tuple.html">code_tuple</a> ct = <a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1code__tuple.html">code_tuple</a>{code_id, vm_version};</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span> </div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>   <span class="keywordflow">if</span>(_blacklist.find(ct) != _blacklist.end())</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>   <span class="keywordflow">if</span>(<span class="keyword">auto</span> it = <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a6f9d3065fa9328cb776d6c68b0c9ef1f">_outstanding_compiles_and_poison</a>.find(ct); it != <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a6f9d3065fa9328cb776d6c68b0c9ef1f">_outstanding_compiles_and_poison</a>.end()) {</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>      it-&gt;second = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>   }</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>   <span class="keywordflow">if</span>(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a44c50f4deb837180fa47026465c55d8a">_queued_compiles</a>.find(ct) != <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a44c50f4deb837180fa47026465c55d8a">_queued_compiles</a>.end())</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span> </div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>   <span class="keywordflow">if</span>(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a6f9d3065fa9328cb776d6c68b0c9ef1f">_outstanding_compiles_and_poison</a>.size() &gt;= _threads) {</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>      <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a44c50f4deb837180fa47026465c55d8a">_queued_compiles</a>.emplace(ct);</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>   }</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span> </div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>   <span class="keyword">const</span> <a class="code hl_class" href="classsysio_1_1chain_1_1code__object.html">code_object</a>* <span class="keyword">const</span> codeobject = <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#ad7e0e5b63b94e48e35baacc15644b0b7">_db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#aa5a2ca0da0092693ac49b36b7ec6817a">find</a>&lt;<a class="code hl_class" href="classsysio_1_1chain_1_1code__object.html">code_object</a>,by_code_hash&gt;(boost::make_tuple(code_id, 0, vm_version));</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>   <span class="keywordflow">if</span>(!codeobject) <span class="comment">//should be impossible right?</span></div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span> </div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a6f9d3065fa9328cb776d6c68b0c9ef1f">_outstanding_compiles_and_poison</a>.emplace(ct, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>   std::vector&lt;wrapped_fd&gt; fds_to_pass;</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>   fds_to_pass.emplace_back(<a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc.html#afe4909c18643f64d0c67a83885aefd90">memfd_for_bytearray</a>(codeobject-&gt;code));</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>   <a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc.html#a8715d32fd2e6a4a668578ca0d946b58b">write_message_with_fds</a>(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a1ea07bb510f7b82ecfb324bca6225728">_compile_monitor_write_socket</a>, <a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1compile__wasm__message.html">compile_wasm_message</a>{ ct }, fds_to_pass);</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>   <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>}</div>
</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span> </div>
<div class="foldopen" id="foldopen00168" data-start="{" data-end="}">
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__sync.html#ad8925611879b3ff1c1975952543d17d3">  168</a></span><a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__sync.html#ad8925611879b3ff1c1975952543d17d3">code_cache_sync::~code_cache_sync</a>() {</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>   <span class="comment">//it&#39;s exceedingly critical that we wait for the compile monitor to be done with all its work</span></div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>   <span class="comment">//This is easy in the sync case</span></div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a1ea07bb510f7b82ecfb324bca6225728">_compile_monitor_write_socket</a>.shutdown(local::datagram_protocol::socket::shutdown_send);</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>   <span class="keyword">auto</span> [success, message, fds] = <a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc.html#aa65c4d6c02a0823262c6627a86cc74bc">read_message_with_fds</a>(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a3422663ea869e784bf6b6e72cb43f96b">_compile_monitor_read_socket</a>);</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>   <span class="keywordflow">if</span>(success)</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>      <a class="code hl_define" href="logger_8hpp.html#a9e3cdbaecd5a34b42956e888f7326fad">elog</a>(<span class="stringliteral">&quot;unexpected response from SYS VM OC compile monitor during shutdown&quot;</span>);</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>}</div>
</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span> </div>
<div class="foldopen" id="foldopen00177" data-start="{" data-end="}">
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__sync.html#ab6cb5ce5742de26979b108d2e5d908db">  177</a></span><span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html">code_descriptor</a>* <span class="keyword">const</span> <a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__sync.html#ab6cb5ce5742de26979b108d2e5d908db">code_cache_sync::get_descriptor_for_code_sync</a>(<span class="keyword">const</span> <a class="code hl_class" href="classfc_1_1sha256.html">digest_type</a>&amp; code_id, <span class="keyword">const</span> <a class="code hl_typedef" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&amp; vm_version) {</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>   <span class="comment">//check for entry in cache</span></div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>   code_cache_index::index&lt;by_hash&gt;::type::iterator it = <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.get&lt;by_hash&gt;().find(boost::make_tuple(code_id, vm_version));</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>   <span class="keywordflow">if</span>(it != <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.get&lt;by_hash&gt;().end()) {</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>      <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.relocate(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.begin(), <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.project&lt;0&gt;(it));</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>      <span class="keywordflow">return</span> &amp;*it;</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>   }</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span> </div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>   <span class="keyword">const</span> <a class="code hl_class" href="classsysio_1_1chain_1_1code__object.html">code_object</a>* <span class="keyword">const</span> codeobject = <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#ad7e0e5b63b94e48e35baacc15644b0b7">_db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#aa5a2ca0da0092693ac49b36b7ec6817a">find</a>&lt;<a class="code hl_class" href="classsysio_1_1chain_1_1code__object.html">code_object</a>,by_code_hash&gt;(boost::make_tuple(code_id, 0, vm_version));</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>   <span class="keywordflow">if</span>(!codeobject) <span class="comment">//should be impossible right?</span></div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span> </div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>   std::vector&lt;wrapped_fd&gt; fds_to_pass;</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>   fds_to_pass.emplace_back(<a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc.html#afe4909c18643f64d0c67a83885aefd90">memfd_for_bytearray</a>(codeobject-&gt;code));</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span> </div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>   <a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc.html#a8715d32fd2e6a4a668578ca0d946b58b">write_message_with_fds</a>(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a1ea07bb510f7b82ecfb324bca6225728">_compile_monitor_write_socket</a>, <a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1compile__wasm__message.html">compile_wasm_message</a>{ {code_id, vm_version} }, fds_to_pass);</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>   <span class="keyword">auto</span> [success, message, fds] = <a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc.html#aa65c4d6c02a0823262c6627a86cc74bc">read_message_with_fds</a>(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a3422663ea869e784bf6b6e72cb43f96b">_compile_monitor_read_socket</a>);</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(success, wasm_execution_error, <span class="stringliteral">&quot;failed to read response from monitor process&quot;</span>);</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(std::holds_alternative&lt;wasm_compilation_result_message&gt;(message), wasm_execution_error, <span class="stringliteral">&quot;unexpected response from monitor process&quot;</span>);</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span> </div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>   <a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1wasm__compilation__result__message.html">wasm_compilation_result_message</a> result = std::get&lt;wasm_compilation_result_message&gt;(message);</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(std::holds_alternative&lt;code_descriptor&gt;(result.result), wasm_execution_error, <span class="stringliteral">&quot;failed to compile wasm&quot;</span>);</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span> </div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>   <a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a249bdb27d2796f53a728b85a2889db44">check_eviction_threshold</a>(result.cache_free_bytes);</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span> </div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>   <span class="keywordflow">return</span> &amp;*<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.push_front(std::move(std::get&lt;code_descriptor&gt;(result.result))).first;</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>}</div>
</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span> </div>
<div class="foldopen" id="foldopen00205" data-start="{" data-end="}">
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#ab31065b1fab5b6d5910d1cae71bb15cf">  205</a></span><a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#ab31065b1fab5b6d5910d1cae71bb15cf">code_cache_base::code_cache_base</a>(<span class="keyword">const</span> boost::filesystem::path data_dir, <span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1config.html">eosvmoc::config</a>&amp; eosvmoc_config, <span class="keyword">const</span> <a class="code hl_class" href="classchainbase_1_1database.html">chainbase::database</a>&amp; db) :</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>   _db(db),</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>   _cache_file_path(data_dir/<span class="stringliteral">&quot;code_cache.bin&quot;</span>)</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>{</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>   <span class="keyword">static_assert</span>(<span class="keyword">sizeof</span>(<a class="code hl_typedef" href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">allocator_t</a>) &lt;= header_offset, <span class="stringliteral">&quot;header offset intersects with allocator&quot;</span>);</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span> </div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>   bfs::create_directories(data_dir);</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span> </div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>   <span class="keywordflow">if</span>(!bfs::exists(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>)) {</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(eosvmoc_config.<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1config.html#a2af4dcbdc46f6a75548e41b2c52d9fcc">cache_size</a> &gt;= allocator_t::get_min_size(total_header_size), <a class="code hl_variable" href="namespacesysio_1_1chain.html#a6b9cb254135911c4a6d577a9ab7fdd4e">database_exception</a>, <span class="stringliteral">&quot;configured code cache size is too small&quot;</span>);</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>      std::ofstream ofs(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>.generic_string(), std::ofstream::trunc);</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(ofs.good(), <a class="code hl_variable" href="namespacesysio_1_1chain.html#a6b9cb254135911c4a6d577a9ab7fdd4e">database_exception</a>, <span class="stringliteral">&quot;unable to create SYS VM Optimized Compiler code cache&quot;</span>);</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>      bfs::resize_file(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>, eosvmoc_config.<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1config.html#a2af4dcbdc46f6a75548e41b2c52d9fcc">cache_size</a>);</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>      bip::file_mapping creation_mapping(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>.generic_string().c_str(), bip::read_write);</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>      bip::mapped_region creation_region(creation_mapping, bip::read_write);</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>      <span class="keyword">new</span> (creation_region.get_address()) <a class="code hl_typedef" href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">allocator_t</a>(eosvmoc_config.<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1config.html#a2af4dcbdc46f6a75548e41b2c52d9fcc">cache_size</a>, total_header_size);</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>      <span class="keyword">new</span> ((<span class="keywordtype">char</span>*)creation_region.get_address() + header_offset) <a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1code__cache__header.html">code_cache_header</a>;</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>   }</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span> </div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>   <a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1code__cache__header.html">code_cache_header</a> cache_header;</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>   {</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>      <span class="keywordtype">char</span> header_buff[total_header_size];</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>      std::ifstream hs(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>.generic_string(), std::ifstream::binary);</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>      hs.read(header_buff, <span class="keyword">sizeof</span>(header_buff));</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(!hs.fail(), bad_database_version_exception, <span class="stringliteral">&quot;failed to read code cache header&quot;</span>);</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>      <a class="code hl_function" href="yubihsm__pkcs11_8c.html#ae785d5badbf1f08b491af31f32a135a1">memcpy</a>((<span class="keywordtype">char</span>*)&amp;cache_header, header_buff + header_offset, <span class="keyword">sizeof</span>(cache_header));</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>   }</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span> </div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(cache_header.<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1code__cache__header.html#ab1c29836774a16a4c7d0f44f0e835a59">id</a> == header_id, bad_database_version_exception, <span class="stringliteral">&quot;existing SYS VM OC code cache not compatible with this version&quot;</span>);</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(!cache_header.<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1code__cache__header.html#aae34e195211e269a27f27db1dfeb7ac7">dirty</a>, <a class="code hl_variable" href="namespacesysio_1_1chain.html#a6b9cb254135911c4a6d577a9ab7fdd4e">database_exception</a>, <span class="stringliteral">&quot;code cache is dirty&quot;</span>);</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span> </div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>   <a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a9933307339971ede770f460277491587">set_on_disk_region_dirty</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span> </div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>   <span class="keyword">auto</span> existing_file_size = bfs::file_size(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>);</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>   <span class="keywordflow">if</span>(eosvmoc_config.<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1config.html#a2af4dcbdc46f6a75548e41b2c52d9fcc">cache_size</a> &gt; existing_file_size) {</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>      bfs::resize_file(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>, eosvmoc_config.<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1config.html#a2af4dcbdc46f6a75548e41b2c52d9fcc">cache_size</a>);</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span> </div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>      bip::file_mapping resize_mapping(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>.generic_string().c_str(), bip::read_write);</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>      bip::mapped_region resize_region(resize_mapping, bip::read_write);</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span> </div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>      <a class="code hl_typedef" href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">allocator_t</a>* resize_allocator = <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_typedef" href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">allocator_t</a>*<span class="keyword">&gt;</span>(resize_region.get_address());</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>      resize_allocator-&gt;grow(eosvmoc_config.<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1config.html#a2af4dcbdc46f6a75548e41b2c52d9fcc">cache_size</a> - existing_file_size);</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>   }</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span> </div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#aaee1ae29b4dc9f8f3cb0b86f32998dc4">_cache_fd</a> = ::open(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>.generic_string().c_str(), O_RDWR | O_CLOEXEC);</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#aaee1ae29b4dc9f8f3cb0b86f32998dc4">_cache_fd</a> &gt;= 0, <a class="code hl_variable" href="namespacesysio_1_1chain.html#a6b9cb254135911c4a6d577a9ab7fdd4e">database_exception</a>, <span class="stringliteral">&quot;failure to open code cache&quot;</span>);</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span> </div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>   <span class="comment">//load up the previous cache index</span></div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>   <span class="keywordtype">char</span>* code_mapping = (<span class="keywordtype">char</span>*)mmap(<span class="keyword">nullptr</span>, eosvmoc_config.<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1config.html#a2af4dcbdc46f6a75548e41b2c52d9fcc">cache_size</a>, PROT_READ|PROT_WRITE, MAP_SHARED, <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#aaee1ae29b4dc9f8f3cb0b86f32998dc4">_cache_fd</a>, 0);</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(code_mapping != MAP_FAILED, <a class="code hl_variable" href="namespacesysio_1_1chain.html#a6b9cb254135911c4a6d577a9ab7fdd4e">database_exception</a>, <span class="stringliteral">&quot;failure to mmap code cache&quot;</span>);</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span> </div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>   <a class="code hl_typedef" href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">allocator_t</a>* <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a> = <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_typedef" href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">allocator_t</a>*<span class="keyword">&gt;</span>(code_mapping);</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span> </div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>   <span class="keywordflow">if</span>(cache_header.<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1code__cache__header.html#a82534ad1b411daf319c3c24e74b77289">serialized_descriptor_index</a>) {</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>      <a class="code hl_class" href="classfc_1_1datastream.html">fc::datastream&lt;const char*&gt;</a> ds(code_mapping + cache_header.<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1code__cache__header.html#a82534ad1b411daf319c3c24e74b77289">serialized_descriptor_index</a>, eosvmoc_config.<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1config.html#a2af4dcbdc46f6a75548e41b2c52d9fcc">cache_size</a> - cache_header.<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1code__cache__header.html#a82534ad1b411daf319c3c24e74b77289">serialized_descriptor_index</a>);</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>      <span class="keywordtype">unsigned</span> number_entries;</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>      <a class="code hl_function" href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab">fc::raw::unpack</a>(ds, number_entries);</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>      <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> i = 0; i &lt; number_entries; ++i) {</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>         <a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html">code_descriptor</a> cd;</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>         <a class="code hl_function" href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab">fc::raw::unpack</a>(ds, cd);</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>         <span class="keywordflow">if</span>(cd.<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html#a80b47bb46b74041f7b4d91fa519d74bb">codegen_version</a> != current_codegen_version) {</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>            <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;deallocate(code_mapping + cd.<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html#aa9f9cc97088693963338fe86566e75da">code_begin</a>);</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>            <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;deallocate(code_mapping + cd.<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html#a76cda27a12256b762da062c7188d1cf9">initdata_begin</a>);</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>         }</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>         <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.push_back(std::move(cd));</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>      }</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>      <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;deallocate(code_mapping + cache_header.<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1code__cache__header.html#a82534ad1b411daf319c3c24e74b77289">serialized_descriptor_index</a>);</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span> </div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>      <a class="code hl_define" href="logger_8hpp.html#a831cf08dc63704c11fd154132c6e8bdb">ilog</a>(<span class="stringliteral">&quot;SYS VM Optimized Compiler code cache loaded with ${c} entries; ${f} of ${t} bytes free&quot;</span>, (<span class="stringliteral">&quot;c&quot;</span>, number_entries)(<span class="stringliteral">&quot;f&quot;</span>, <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;get_free_memory())(<span class="stringliteral">&quot;t&quot;</span>, <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;get_size()));</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>   }</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>   munmap(code_mapping, eosvmoc_config.<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1config.html#a2af4dcbdc46f6a75548e41b2c52d9fcc">cache_size</a>);</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span> </div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#aa4b8115d88fae51bcaf70a15bd3db3bc">_free_bytes_eviction_threshold</a> = eosvmoc_config.<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1config.html#a2af4dcbdc46f6a75548e41b2c52d9fcc">cache_size</a> * .1;</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span> </div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>   <a class="code hl_class" href="classsysio_1_1chain_1_1eosvmoc_1_1wrapped__fd.html">wrapped_fd</a> compile_monitor_conn = <a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc.html#af77847bae59b1a2878f14d00e46d6bab">get_connection_to_compile_monitor</a>(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#aaee1ae29b4dc9f8f3cb0b86f32998dc4">_cache_fd</a>);</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span> </div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>   <span class="comment">//okay, let&#39;s do this by the book: we&#39;re not allowed to write &amp; read on different threads to the same asio socket. So create two fds</span></div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>   <span class="comment">//representing the same unix socket. we&#39;ll read on one and write on the other</span></div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>   <span class="keywordtype">int</span> duped = dup(compile_monitor_conn);</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a1ea07bb510f7b82ecfb324bca6225728">_compile_monitor_write_socket</a>.assign(local::datagram_protocol(), duped);</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a3422663ea869e784bf6b6e72cb43f96b">_compile_monitor_read_socket</a>.assign(local::datagram_protocol(), compile_monitor_conn.<a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1wrapped__fd.html#a1fd75f5baa00eff2fb96107b6b70e3dc">release</a>());</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>}</div>
</div>
</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span> </div>
<div class="foldopen" id="foldopen00289" data-start="{" data-end="}">
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a9933307339971ede770f460277491587">  289</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a9933307339971ede770f460277491587">code_cache_base::set_on_disk_region_dirty</a>(<span class="keywordtype">bool</span> <a class="code hl_variable" href="code__cache_8cpp.html#ad25edacba00e4d0666a9959053b7cc10">dirty</a>) {</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>   bip::file_mapping dirty_mapping(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>.generic_string().c_str(), bip::read_write);</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>   bip::mapped_region dirty_region(dirty_mapping, bip::read_write);</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span> </div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>   *((<span class="keywordtype">char</span>*)dirty_region.get_address()+header_dirty_bit_offset_from_file_start) = <a class="code hl_variable" href="code__cache_8cpp.html#ad25edacba00e4d0666a9959053b7cc10">dirty</a>;</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>   <span class="keywordflow">if</span>(dirty_region.flush(0, 0, <span class="keyword">false</span>) == <span class="keyword">false</span>)</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>      <a class="code hl_define" href="logger_8hpp.html#a9e3cdbaecd5a34b42956e888f7326fad">elog</a>(<span class="stringliteral">&quot;Syncing code cache failed&quot;</span>);</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>}</div>
</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span> </div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="foldopen" id="foldopen00299" data-start="{" data-end="}">
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a06095b550460307a8e11b2b8a1083230">  299</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a06095b550460307a8e11b2b8a1083230">code_cache_base::serialize_cache_index</a>(<a class="code hl_class" href="classfc_1_1datastream.html">fc::datastream&lt;T&gt;</a>&amp; ds) {</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>   <span class="keywordtype">unsigned</span> entries = <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.size();</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>   <a class="code hl_function" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a>(ds, entries);</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>   <span class="keywordflow">for</span>(<span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html">code_descriptor</a>&amp; cd : <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>)</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>      <a class="code hl_function" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a>(ds, cd);</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>}</div>
</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span> </div>
<div class="foldopen" id="foldopen00306" data-start="{" data-end="}">
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#ac04c389f3eef6d9860d507ce690a4781">  306</a></span><a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#ac04c389f3eef6d9860d507ce690a4781">code_cache_base::~code_cache_base</a>() {</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>   <span class="comment">//reopen the code cache in our process</span></div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>   <span class="keyword">struct </span>stat st;</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>   <span class="keywordflow">if</span>(fstat(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#aaee1ae29b4dc9f8f3cb0b86f32998dc4">_cache_fd</a>, &amp;st))</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>   <span class="keywordtype">char</span>* code_mapping = (<span class="keywordtype">char</span>*)mmap(<span class="keyword">nullptr</span>, st.st_size, PROT_READ|PROT_WRITE, MAP_SHARED, <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#aaee1ae29b4dc9f8f3cb0b86f32998dc4">_cache_fd</a>, 0);</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>   <span class="keywordflow">if</span>(code_mapping == MAP_FAILED)</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span> </div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>   <a class="code hl_typedef" href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">allocator_t</a>* <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a> = <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_typedef" href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">allocator_t</a>*<span class="keyword">&gt;</span>(code_mapping);</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span> </div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>   <span class="comment">//serialize out the cache index</span></div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>   <a class="code hl_class" href="classfc_1_1datastream.html">fc::datastream&lt;size_t&gt;</a> dssz;</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>   <a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a06095b550460307a8e11b2b8a1083230">serialize_cache_index</a>(dssz);</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>   <span class="keywordtype">size_t</span> sz = dssz.tellp();</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span> </div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>   <span class="keywordtype">char</span>* <a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>   <span class="keywordflow">while</span>(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.size()) {</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>      <a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a> = (<span class="keywordtype">char</span>*)<a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;allocate(sz);</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>      <span class="keywordflow">if</span>(<a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a> != <span class="keyword">nullptr</span>)</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>         <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>      <span class="comment">//in theory, there could be too little free space avaiable to store the cache index</span></div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>      <span class="comment">//try to free up some space</span></div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>      <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 25 &amp;&amp; <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.size(); ++i) {</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>         <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;deallocate(code_mapping + <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.back().code_begin);</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>         <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;deallocate(code_mapping + <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.back().initdata_begin);</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>         <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.pop_back();</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>      }</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>   }</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span> </div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>   <span class="keywordflow">if</span>(<a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a>) {</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>      <a class="code hl_class" href="classfc_1_1datastream.html">fc::datastream&lt;char*&gt;</a> ds(<a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a>, sz);</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>      <a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a06095b550460307a8e11b2b8a1083230">serialize_cache_index</a>(ds);</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span> </div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>      <a class="code hl_typedef" href="stdint_8h.html#a31b85deecb45924320becd11d3ee16ce">uintptr_t</a> ptr_offset = <a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a>-code_mapping;</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>      *((<a class="code hl_typedef" href="stdint_8h.html#a31b85deecb45924320becd11d3ee16ce">uintptr_t</a>*)(code_mapping+descriptor_ptr_from_file_start)) = ptr_offset;</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>   }</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>   <span class="keywordflow">else</span></div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>      *((<a class="code hl_typedef" href="stdint_8h.html#a31b85deecb45924320becd11d3ee16ce">uintptr_t</a>*)(code_mapping+descriptor_ptr_from_file_start)) = 0;</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span> </div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>   msync(code_mapping, <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;get_size(), MS_SYNC);</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>   munmap(code_mapping, <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;get_size());</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>   <a class="code hl_function" href="integration_8cpp.html#af5b66d867a040d002fb57d645cae3fb4">close</a>(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#aaee1ae29b4dc9f8f3cb0b86f32998dc4">_cache_fd</a>);</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>   <a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a9933307339971ede770f460277491587">set_on_disk_region_dirty</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span> </div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>}</div>
</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span> </div>
<div class="foldopen" id="foldopen00353" data-start="{" data-end="}">
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a898c78da95cb62a1fc2fbdb197f2836d">  353</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a898c78da95cb62a1fc2fbdb197f2836d">code_cache_base::free_code</a>(<span class="keyword">const</span> <a class="code hl_class" href="classfc_1_1sha256.html">digest_type</a>&amp; code_id, <span class="keyword">const</span> <a class="code hl_typedef" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&amp; vm_version) {</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>   code_cache_index::index&lt;by_hash&gt;::type::iterator it = <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.get&lt;by_hash&gt;().find(boost::make_tuple(code_id, vm_version));</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>   <span class="keywordflow">if</span>(it != <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.get&lt;by_hash&gt;().end()) {</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>      <a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc.html#a8715d32fd2e6a4a668578ca0d946b58b">write_message_with_fds</a>(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a1ea07bb510f7b82ecfb324bca6225728">_compile_monitor_write_socket</a>, <a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1evict__wasms__message.html">evict_wasms_message</a>{ {*it} });</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>      <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.get&lt;by_hash&gt;().erase(it);</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>   }</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span> </div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>   <span class="comment">//if it&#39;s in the queued list, erase it</span></div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a44c50f4deb837180fa47026465c55d8a">_queued_compiles</a>.erase({code_id, vm_version});</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span> </div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>   <span class="comment">//however, if it&#39;s currently being compiled there is no way to cancel the compile,</span></div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>   <span class="comment">//so instead set a poison boolean that indicates not to insert the code in to the cache</span></div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>   <span class="comment">//once the compile is complete</span></div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>   <span class="keyword">const</span> std::unordered_map&lt;code_tuple, bool&gt;::iterator compiling_it = <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a6f9d3065fa9328cb776d6c68b0c9ef1f">_outstanding_compiles_and_poison</a>.find({code_id, vm_version});</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>   <span class="keywordflow">if</span>(compiling_it != <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a6f9d3065fa9328cb776d6c68b0c9ef1f">_outstanding_compiles_and_poison</a>.end())</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>      compiling_it-&gt;second = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>}</div>
</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span> </div>
<div class="foldopen" id="foldopen00371" data-start="{" data-end="}">
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a543e8301b86cc0682a715686279dc1c3">  371</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a543e8301b86cc0682a715686279dc1c3">code_cache_base::run_eviction_round</a>() {</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>   <a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1evict__wasms__message.html">evict_wasms_message</a> evict_msg;</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>   <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 25 &amp;&amp; <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.size() &gt; 1; ++i) {</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>      evict_msg.<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1evict__wasms__message.html#a5fd9534f12b754ec55329fe4970d2802">codes</a>.emplace_back(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.back());</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>      <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.pop_back();</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>   }</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>   <a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc.html#a8715d32fd2e6a4a668578ca0d946b58b">write_message_with_fds</a>(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a1ea07bb510f7b82ecfb324bca6225728">_compile_monitor_write_socket</a>, evict_msg);</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>}</div>
</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span> </div>
<div class="foldopen" id="foldopen00380" data-start="{" data-end="}">
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a249bdb27d2796f53a728b85a2889db44">  380</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a249bdb27d2796f53a728b85a2889db44">code_cache_base::check_eviction_threshold</a>(<span class="keywordtype">size_t</span> free_bytes) {</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>   <span class="keywordflow">if</span>(free_bytes &lt; <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#aa4b8115d88fae51bcaf70a15bd3db3bc">_free_bytes_eviction_threshold</a>)</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>      <a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a543e8301b86cc0682a715686279dc1c3">run_eviction_round</a>();</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>}</div>
</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span> </div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>}}}</div>
<div class="ttc" id="a_module_8h_html"><div class="ttname"><a href="_module_8h.html">Module.h</a></div></div>
<div class="ttc" id="a_validate_8h_html"><div class="ttname"><a href="_validate_8h.html">Validate.h</a></div></div>
<div class="ttc" id="a_w_a_s_m_8h_html"><div class="ttname"><a href="_w_a_s_m_8h.html">WASM.h</a></div></div>
<div class="ttc" id="abn_8cpp_html_a8b0eadcc506862e9d751ab45185053aa"><div class="ttname"><a href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a></div><div class="ttdeci">const mie::Vuint &amp; p</div><div class="ttdef"><b>Definition</b> <a href="bn_8cpp_source.html#l00027">bn.cpp:27</a></div></div>
<div class="ttc" id="achain_2include_2sysio_2chain_2exceptions_8hpp_html"><div class="ttname"><a href="chain_2include_2sysio_2chain_2exceptions_8hpp.html">exceptions.hpp</a></div></div>
<div class="ttc" id="achain_2include_2sysio_2chain_2exceptions_8hpp_html_a40c2826a6fba35c1ffbf912bdf559792"><div class="ttname"><a href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a></div><div class="ttdeci">#define SYS_ASSERT(expr, exc_type, FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2exceptions_8hpp_source.html#l00007">exceptions.hpp:7</a></div></div>
<div class="ttc" id="achain_2include_2sysio_2chain_2webassembly_2sys-vm-oc_2config_8hpp_html"><div class="ttname"><a href="chain_2include_2sysio_2chain_2webassembly_2sys-vm-oc_2config_8hpp.html">config.hpp</a></div></div>
<div class="ttc" id="achain_2include_2sysio_2chain_2webassembly_2sys-vm-oc_2memory_8hpp_html"><div class="ttname"><a href="chain_2include_2sysio_2chain_2webassembly_2sys-vm-oc_2memory_8hpp.html">memory.hpp</a></div></div>
<div class="ttc" id="achain_2webassembly_2runtimes_2sys-vm-oc_2_l_l_v_m_j_i_t_8h_html"><div class="ttname"><a href="chain_2webassembly_2runtimes_2sys-vm-oc_2_l_l_v_m_j_i_t_8h.html">LLVMJIT.h</a></div></div>
<div class="ttc" id="aclasschainbase_1_1database_html"><div class="ttname"><a href="classchainbase_1_1database.html">chainbase::database</a></div><div class="ttdef"><b>Definition</b> <a href="chainbase_8hpp_source.html#l00252">chainbase.hpp:253</a></div></div>
<div class="ttc" id="aclasschainbase_1_1database_html_aa5a2ca0da0092693ac49b36b7ec6817a"><div class="ttname"><a href="classchainbase_1_1database.html#aa5a2ca0da0092693ac49b36b7ec6817a">chainbase::database::find</a></div><div class="ttdeci">const ObjectType * find(CompatibleKey &amp;&amp;key) const</div><div class="ttdef"><b>Definition</b> <a href="chainbase_8hpp_source.html#l00458">chainbase.hpp:458</a></div></div>
<div class="ttc" id="aclassfc_1_1datastream_html"><div class="ttname"><a href="classfc_1_1datastream.html">fc::datastream</a></div><div class="ttdef"><b>Definition</b> <a href="datastream_8hpp_source.html#l00018">datastream.hpp:18</a></div></div>
<div class="ttc" id="aclassfc_1_1sha256_html"><div class="ttname"><a href="classfc_1_1sha256.html">fc::sha256</a></div><div class="ttdef"><b>Definition</b> <a href="sha256_8hpp_source.html#l00011">sha256.hpp:12</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1code__object_html"><div class="ttname"><a href="classsysio_1_1chain_1_1code__object.html">sysio::chain::code_object</a></div><div class="ttdef"><b>Definition</b> <a href="code__object_8hpp_source.html#l00009">code_object.hpp:9</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__async_html_ab5e9f17c574c6388b10a05dcedea7fde"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__async.html#ab5e9f17c574c6388b10a05dcedea7fde">sysio::chain::eosvmoc::code_cache_async::code_cache_async</a></div><div class="ttdeci">code_cache_async(const bfs::path data_dir, const eosvmoc::config &amp;eosvmoc_config, const chainbase::database &amp;db)</div><div class="ttdef"><b>Definition</b> <a href="#l00042">code_cache.cpp:42</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__async_html_ab8076b08d9220abbf0a2ec7f717d5925"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__async.html#ab8076b08d9220abbf0a2ec7f717d5925">sysio::chain::eosvmoc::code_cache_async::~code_cache_async</a></div><div class="ttdeci">~code_cache_async()</div><div class="ttdef"><b>Definition</b> <a href="#l00057">code_cache.cpp:57</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__async_html_ae6565ec4ecff75fbdbf99ab37604c2b0"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__async.html#ae6565ec4ecff75fbdbf99ab37604c2b0">sysio::chain::eosvmoc::code_cache_async::get_descriptor_for_code</a></div><div class="ttdeci">const code_descriptor *const get_descriptor_for_code(const digest_type &amp;code_id, const uint8_t &amp;vm_version)</div><div class="ttdef"><b>Definition</b> <a href="#l00109">code_cache.cpp:109</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html">sysio::chain::eosvmoc::code_cache_base</a></div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00039">code_cache.hpp:39</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_a06095b550460307a8e11b2b8a1083230"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a06095b550460307a8e11b2b8a1083230">sysio::chain::eosvmoc::code_cache_base::serialize_cache_index</a></div><div class="ttdeci">void serialize_cache_index(fc::datastream&lt; T &gt; &amp;ds)</div><div class="ttdef"><b>Definition</b> <a href="#l00299">code_cache.cpp:299</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_a1ea07bb510f7b82ecfb324bca6225728"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a1ea07bb510f7b82ecfb324bca6225728">sysio::chain::eosvmoc::code_cache_base::_compile_monitor_write_socket</a></div><div class="ttdeci">local::datagram_protocol::socket _compile_monitor_write_socket</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00071">code_cache.hpp:71</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_a249bdb27d2796f53a728b85a2889db44"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a249bdb27d2796f53a728b85a2889db44">sysio::chain::eosvmoc::code_cache_base::check_eviction_threshold</a></div><div class="ttdeci">void check_eviction_threshold(size_t free_bytes)</div><div class="ttdef"><b>Definition</b> <a href="#l00380">code_cache.cpp:380</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_a3422663ea869e784bf6b6e72cb43f96b"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a3422663ea869e784bf6b6e72cb43f96b">sysio::chain::eosvmoc::code_cache_base::_compile_monitor_read_socket</a></div><div class="ttdeci">local::datagram_protocol::socket _compile_monitor_read_socket</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00072">code_cache.hpp:72</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_a44c50f4deb837180fa47026465c55d8a"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a44c50f4deb837180fa47026465c55d8a">sysio::chain::eosvmoc::code_cache_base::_queued_compiles</a></div><div class="ttdeci">std::unordered_set&lt; code_tuple &gt; _queued_compiles</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00076">code_cache.hpp:76</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_a543e8301b86cc0682a715686279dc1c3"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a543e8301b86cc0682a715686279dc1c3">sysio::chain::eosvmoc::code_cache_base::run_eviction_round</a></div><div class="ttdeci">void run_eviction_round()</div><div class="ttdef"><b>Definition</b> <a href="#l00371">code_cache.cpp:371</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_a6f9d3065fa9328cb776d6c68b0c9ef1f"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a6f9d3065fa9328cb776d6c68b0c9ef1f">sysio::chain::eosvmoc::code_cache_base::_outstanding_compiles_and_poison</a></div><div class="ttdeci">std::unordered_map&lt; code_tuple, bool &gt; _outstanding_compiles_and_poison</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00077">code_cache.hpp:77</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_a898c78da95cb62a1fc2fbdb197f2836d"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a898c78da95cb62a1fc2fbdb197f2836d">sysio::chain::eosvmoc::code_cache_base::free_code</a></div><div class="ttdeci">void free_code(const digest_type &amp;code_id, const uint8_t &amp;vm_version)</div><div class="ttdef"><b>Definition</b> <a href="#l00353">code_cache.cpp:353</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_a9933307339971ede770f460277491587"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a9933307339971ede770f460277491587">sysio::chain::eosvmoc::code_cache_base::set_on_disk_region_dirty</a></div><div class="ttdeci">void set_on_disk_region_dirty(bool)</div><div class="ttdef"><b>Definition</b> <a href="#l00289">code_cache.cpp:289</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_aa4b8115d88fae51bcaf70a15bd3db3bc"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#aa4b8115d88fae51bcaf70a15bd3db3bc">sysio::chain::eosvmoc::code_cache_base::_free_bytes_eviction_threshold</a></div><div class="ttdeci">size_t _free_bytes_eviction_threshold</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00079">code_cache.hpp:79</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_aaee1ae29b4dc9f8f3cb0b86f32998dc4"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#aaee1ae29b4dc9f8f3cb0b86f32998dc4">sysio::chain::eosvmoc::code_cache_base::_cache_fd</a></div><div class="ttdeci">int _cache_fd</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00068">code_cache.hpp:68</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_ab31065b1fab5b6d5910d1cae71bb15cf"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#ab31065b1fab5b6d5910d1cae71bb15cf">sysio::chain::eosvmoc::code_cache_base::code_cache_base</a></div><div class="ttdeci">code_cache_base(const bfs::path data_dir, const eosvmoc::config &amp;eosvmoc_config, const chainbase::database &amp;db)</div><div class="ttdef"><b>Definition</b> <a href="#l00205">code_cache.cpp:205</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_abbf29e52e658f8089958c93ae87402ac"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">sysio::chain::eosvmoc::code_cache_base::_cache_file_path</a></div><div class="ttdeci">bfs::path _cache_file_path</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00067">code_cache.hpp:67</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_ac04c389f3eef6d9860d507ce690a4781"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#ac04c389f3eef6d9860d507ce690a4781">sysio::chain::eosvmoc::code_cache_base::~code_cache_base</a></div><div class="ttdeci">~code_cache_base()</div><div class="ttdef"><b>Definition</b> <a href="#l00306">code_cache.cpp:306</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_acccb3fc4fe49eb154ea915ee8b350f70"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#acccb3fc4fe49eb154ea915ee8b350f70">sysio::chain::eosvmoc::code_cache_base::_ctx</a></div><div class="ttdeci">io_context _ctx</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00070">code_cache.hpp:70</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_ad7e0e5b63b94e48e35baacc15644b0b7"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#ad7e0e5b63b94e48e35baacc15644b0b7">sysio::chain::eosvmoc::code_cache_base::_db</a></div><div class="ttdeci">const chainbase::database &amp; _db</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00065">code_cache.hpp:65</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_adb969be895a25820aa4e599304dfa252"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">sysio::chain::eosvmoc::code_cache_base::_cache_index</a></div><div class="ttdeci">code_cache_index _cache_index</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00063">code_cache.hpp:63</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__sync_html_ab6cb5ce5742de26979b108d2e5d908db"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__sync.html#ab6cb5ce5742de26979b108d2e5d908db">sysio::chain::eosvmoc::code_cache_sync::get_descriptor_for_code_sync</a></div><div class="ttdeci">const code_descriptor *const get_descriptor_for_code_sync(const digest_type &amp;code_id, const uint8_t &amp;vm_version)</div><div class="ttdef"><b>Definition</b> <a href="#l00177">code_cache.cpp:177</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__sync_html_ad8925611879b3ff1c1975952543d17d3"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__sync.html#ad8925611879b3ff1c1975952543d17d3">sysio::chain::eosvmoc::code_cache_sync::~code_cache_sync</a></div><div class="ttdeci">~code_cache_sync()</div><div class="ttdef"><b>Definition</b> <a href="#l00168">code_cache.cpp:168</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1wrapped__fd_html"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1wrapped__fd.html">sysio::chain::eosvmoc::wrapped_fd</a></div><div class="ttdef"><b>Definition</b> <a href="ipc__helpers_8hpp_source.html#l00014">ipc_helpers.hpp:14</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1wrapped__fd_html_a1fd75f5baa00eff2fb96107b6b70e3dc"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1wrapped__fd.html#a1fd75f5baa00eff2fb96107b6b70e3dc">sysio::chain::eosvmoc::wrapped_fd::release</a></div><div class="ttdeci">int release()</div><div class="ttdef"><b>Definition</b> <a href="ipc__helpers_8hpp_source.html#l00035">ipc_helpers.hpp:35</a></div></div>
<div class="ttc" id="acode__cache_8cpp_html_a4191e8e427b7aacaae0c4b0d555b1fba"><div class="ttname"><a href="code__cache_8cpp.html#a4191e8e427b7aacaae0c4b0d555b1fba">serialized_descriptor_index</a></div><div class="ttdeci">uintptr_t serialized_descriptor_index</div><div class="ttdef"><b>Definition</b> <a href="#l00002">code_cache.cpp:2</a></div></div>
<div class="ttc" id="acode__cache_8cpp_html_ad25edacba00e4d0666a9959053b7cc10"><div class="ttname"><a href="code__cache_8cpp.html#ad25edacba00e4d0666a9959053b7cc10">dirty</a></div><div class="ttdeci">bool dirty</div><div class="ttdef"><b>Definition</b> <a href="#l00001">code_cache.cpp:1</a></div></div>
<div class="ttc" id="acode__cache_8hpp_html"><div class="ttname"><a href="code__cache_8hpp.html">code_cache.hpp</a></div></div>
<div class="ttc" id="acompile__monitor_8hpp_html"><div class="ttname"><a href="compile__monitor_8hpp.html">compile_monitor.hpp</a></div></div>
<div class="ttc" id="aexception_8hpp_html_abed525eeff3ae581be7e4e2fcd3b7bf4"><div class="ttname"><a href="exception_8hpp.html#abed525eeff3ae581be7e4e2fcd3b7bf4">FC_ASSERT</a></div><div class="ttdeci">#define FC_ASSERT(TEST,...)</div><div class="ttdoc">Checks a condition and throws an assert_exception if the test is FALSE.</div><div class="ttdef"><b>Definition</b> <a href="exception_8hpp_source.html#l00362">exception.hpp:362</a></div></div>
<div class="ttc" id="aintegration_8cpp_html_af5b66d867a040d002fb57d645cae3fb4"><div class="ttname"><a href="integration_8cpp.html#af5b66d867a040d002fb57d645cae3fb4">close</a></div><div class="ttdeci">void close(T *e, websocketpp::connection_hdl hdl)</div><div class="ttdef"><b>Definition</b> <a href="integration_8cpp_source.html#l00353">integration.cpp:353</a></div></div>
<div class="ttc" id="aintrinsic_8hpp_html"><div class="ttname"><a href="intrinsic_8hpp.html">intrinsic.hpp</a></div></div>
<div class="ttc" id="alibraries_2chain_2include_2sysio_2chain_2webassembly_2common_8hpp_html"><div class="ttname"><a href="libraries_2chain_2include_2sysio_2chain_2webassembly_2common_8hpp.html">common.hpp</a></div></div>
<div class="ttc" id="alogger_8hpp_html_a1759e5c9691d8ad754bdf5eff8bb23ac"><div class="ttname"><a href="logger_8hpp.html#a1759e5c9691d8ad754bdf5eff8bb23ac">wlog</a></div><div class="ttdeci">#define wlog(FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="logger_8hpp_source.html#l00124">logger.hpp:124</a></div></div>
<div class="ttc" id="alogger_8hpp_html_a831cf08dc63704c11fd154132c6e8bdb"><div class="ttname"><a href="logger_8hpp.html#a831cf08dc63704c11fd154132c6e8bdb">ilog</a></div><div class="ttdeci">#define ilog(FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="logger_8hpp_source.html#l00118">logger.hpp:118</a></div></div>
<div class="ttc" id="alogger_8hpp_html_a9e3cdbaecd5a34b42956e888f7326fad"><div class="ttname"><a href="logger_8hpp.html#a9e3cdbaecd5a34b42956e888f7326fad">elog</a></div><div class="ttdeci">#define elog(FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="logger_8hpp_source.html#l00130">logger.hpp:130</a></div></div>
<div class="ttc" id="alogger__config_8hpp_html"><div class="ttname"><a href="logger__config_8hpp.html">logger_config.hpp</a></div></div>
<div class="ttc" id="anamespace_i_r_html"><div class="ttname"><a href="namespace_i_r.html">IR</a></div><div class="ttdef"><b>Definition</b> <a href="wasm__sysio__constraints_8hpp_source.html#l00006">wasm_sysio_constraints.hpp:6</a></div></div>
<div class="ttc" id="anamespace_runtime_html"><div class="ttname"><a href="namespace_runtime.html">Runtime</a></div><div class="ttdef"><b>Definition</b> <a href="_emscripten_8h_source.html#l00010">Emscripten.h:10</a></div></div>
<div class="ttc" id="anamespacechainbase_html_add7d4cf66ab3f2808fe613e6b0343b89"><div class="ttname"><a href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">chainbase::allocator</a></div><div class="ttdeci">bip::allocator&lt; T, pinnable_mapped_file::segment_manager &gt; allocator</div><div class="ttdef"><b>Definition</b> <a href="chainbase_8hpp_source.html#l00056">chainbase.hpp:56</a></div></div>
<div class="ttc" id="anamespacefc_1_1raw_html_a0b442d98ceb22dd5a6ae84745e43ffab"><div class="ttname"><a href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab">fc::raw::unpack</a></div><div class="ttdeci">void unpack(Stream &amp;s, std::deque&lt; T &gt; &amp;value)</div><div class="ttdef"><b>Definition</b> <a href="raw_8hpp_source.html#l00540">raw.hpp:540</a></div></div>
<div class="ttc" id="anamespacefc_1_1raw_html_a3a18d8161aa5b4f4f02b6fcfdff5e5d1"><div class="ttname"><a href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a></div><div class="ttdeci">void pack(Stream &amp;s, const std::deque&lt; T &gt; &amp;value)</div><div class="ttdef"><b>Definition</b> <a href="raw_8hpp_source.html#l00531">raw.hpp:531</a></div></div>
<div class="ttc" id="anamespacefc_html_ab58a7f71e88d7d4d5761bbd24837c595"><div class="ttname"><a href="namespacefc.html#ab58a7f71e88d7d4d5761bbd24837c595">fc::set_os_thread_name</a></div><div class="ttdeci">void set_os_thread_name(const string &amp;name)</div><div class="ttdef"><b>Definition</b> <a href="logger__config_8cpp_source.html#l00136">logger_config.cpp:136</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1eosvmoc_html_a113f05ff7d17d44ce4cee37bcb2caad7"><div class="ttname"><a href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">sysio::chain::eosvmoc::allocator_t</a></div><div class="ttdeci">bip::rbtree_best_fit&lt; bip::null_mutex_family, bip::offset_ptr&lt; void &gt;, alignof(std::max_align_t)&gt; allocator_t</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00035">code_cache.hpp:35</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1eosvmoc_html_a8715d32fd2e6a4a668578ca0d946b58b"><div class="ttname"><a href="namespacesysio_1_1chain_1_1eosvmoc.html#a8715d32fd2e6a4a668578ca0d946b58b">sysio::chain::eosvmoc::write_message_with_fds</a></div><div class="ttdeci">bool write_message_with_fds(boost::asio::local::datagram_protocol::socket &amp;s, const eosvmoc_message &amp;message, const std::vector&lt; wrapped_fd &gt; &amp;fds=std::vector&lt; wrapped_fd &gt;())</div><div class="ttdef"><b>Definition</b> <a href="ipc__helpers_8cpp_source.html#l00064">ipc_helpers.cpp:64</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1eosvmoc_html_aa65c4d6c02a0823262c6627a86cc74bc"><div class="ttname"><a href="namespacesysio_1_1chain_1_1eosvmoc.html#aa65c4d6c02a0823262c6627a86cc74bc">sysio::chain::eosvmoc::read_message_with_fds</a></div><div class="ttdeci">std::tuple&lt; bool, eosvmoc_message, std::vector&lt; wrapped_fd &gt; &gt; read_message_with_fds(boost::asio::local::datagram_protocol::socket &amp;s)</div><div class="ttdef"><b>Definition</b> <a href="ipc__helpers_8cpp_source.html#l00009">ipc_helpers.cpp:9</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1eosvmoc_html_ad834e3c39ceead0c5229b0e45e079b06"><div class="ttname"><a href="namespacesysio_1_1chain_1_1eosvmoc.html#ad834e3c39ceead0c5229b0e45e079b06">sysio::chain::eosvmoc::__attribute__</a></div><div class="ttdeci">struct sysio::chain::eosvmoc::code_cache_header __attribute__((packed))</div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1eosvmoc_html_af77847bae59b1a2878f14d00e46d6bab"><div class="ttname"><a href="namespacesysio_1_1chain_1_1eosvmoc.html#af77847bae59b1a2878f14d00e46d6bab">sysio::chain::eosvmoc::get_connection_to_compile_monitor</a></div><div class="ttdeci">wrapped_fd get_connection_to_compile_monitor(int cache_fd)</div><div class="ttdef"><b>Definition</b> <a href="compile__monitor_8cpp_source.html#l00306">compile_monitor.cpp:306</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1eosvmoc_html_afe4909c18643f64d0c67a83885aefd90"><div class="ttname"><a href="namespacesysio_1_1chain_1_1eosvmoc.html#afe4909c18643f64d0c67a83885aefd90">sysio::chain::eosvmoc::memfd_for_bytearray</a></div><div class="ttdeci">wrapped_fd memfd_for_bytearray(const T &amp;bytes)</div><div class="ttdef"><b>Definition</b> <a href="ipc__helpers_8hpp_source.html#l00056">ipc_helpers.hpp:56</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_a6b9cb254135911c4a6d577a9ab7fdd4e"><div class="ttname"><a href="namespacesysio_1_1chain.html#a6b9cb254135911c4a6d577a9ab7fdd4e">sysio::chain::database_exception</a></div><div class="ttdeci">key Invalid authority Invalid transaction Invalid block ID Invalid packed transaction Invalid chain ID Invalid symbol Signature type is not a currently activated type Block can not be found Unlinkable block Block does not guarantee concurrent execution without conflicts Block exhausted allowed resources Block is from the future Block is not signed by expected producer Block includes an ill formed protocol feature activation extension Block includes an ill formed additional block signature extension Error decompressing transaction Transaction should have at least one required authority Expired Transaction Invalid Reference Block Duplicate deferred transaction The transaction can not be found Transaction is too big Invalid transaction extension Transaction includes disallowed Transaction exceeded transient resource limit Account name already exists sysio_assert_message assertion failure Action can not be found Attempt to use unaccessible API Inline Action exceeds maximum size limit sysio_assert_code assertion failure uses restricted error code value action return value size too big database_exception</div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2exceptions_8hpp_source.html#l00314">exceptions.hpp:314</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_ae5470abf94d0fdeff7866fda992ba844"><div class="ttname"><a href="namespacesysio_1_1chain.html#ae5470abf94d0fdeff7866fda992ba844">sysio::chain::overloaded</a></div><div class="ttdeci">overloaded(Ts...) -&gt; overloaded&lt; Ts... &gt;</div></div>
<div class="ttc" id="anamespacesysio_html"><div class="ttname"><a href="namespacesysio.html">sysio</a></div><div class="ttdef"><b>Definition</b> <a href="abi__serializer_8cpp_source.html#l00008">abi_serializer.cpp:8</a></div></div>
<div class="ttc" id="astdint_8h_html_a31b85deecb45924320becd11d3ee16ce"><div class="ttname"><a href="stdint_8h.html#a31b85deecb45924320becd11d3ee16ce">uintptr_t</a></div><div class="ttdeci">_W64 unsigned int uintptr_t</div><div class="ttdef"><b>Definition</b> <a href="stdint_8h_source.html#l00165">stdint.h:165</a></div></div>
<div class="ttc" id="astdint_8h_html_aba7bc1797add20fe3efdf37ced1182c5"><div class="ttname"><a href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></div><div class="ttdeci">unsigned char uint8_t</div><div class="ttdef"><b>Definition</b> <a href="stdint_8h_source.html#l00124">stdint.h:124</a></div></div>
<div class="ttc" id="astdint_8h_html_aec6fcb673ff035718c238c8c9d544c47"><div class="ttname"><a href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a></div><div class="ttdeci">unsigned __int64 uint64_t</div><div class="ttdef"><b>Definition</b> <a href="stdint_8h_source.html#l00136">stdint.h:136</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1code__cache__header_html"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1code__cache__header.html">sysio::chain::eosvmoc::code_cache_header</a></div><div class="ttdef"><b>Definition</b> <a href="#l00032">code_cache.cpp:32</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1code__cache__header_html_a82534ad1b411daf319c3c24e74b77289"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1code__cache__header.html#a82534ad1b411daf319c3c24e74b77289">sysio::chain::eosvmoc::code_cache_header::serialized_descriptor_index</a></div><div class="ttdeci">uintptr_t serialized_descriptor_index</div><div class="ttdef"><b>Definition</b> <a href="#l00035">code_cache.cpp:35</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1code__cache__header_html_aae34e195211e269a27f27db1dfeb7ac7"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1code__cache__header.html#aae34e195211e269a27f27db1dfeb7ac7">sysio::chain::eosvmoc::code_cache_header::dirty</a></div><div class="ttdeci">bool dirty</div><div class="ttdef"><b>Definition</b> <a href="#l00034">code_cache.cpp:34</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1code__cache__header_html_ab1c29836774a16a4c7d0f44f0e835a59"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1code__cache__header.html#ab1c29836774a16a4c7d0f44f0e835a59">sysio::chain::eosvmoc::code_cache_header::id</a></div><div class="ttdeci">uint64_t id</div><div class="ttdef"><b>Definition</b> <a href="#l00033">code_cache.cpp:33</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1code__descriptor_html"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html">sysio::chain::eosvmoc::code_descriptor</a></div><div class="ttdef"><b>Definition</b> <a href="sys-vm-oc_2sys-vm-oc_8hpp_source.html#l00033">sys-vm-oc.hpp:33</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1code__descriptor_html_a76cda27a12256b762da062c7188d1cf9"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html#a76cda27a12256b762da062c7188d1cf9">sysio::chain::eosvmoc::code_descriptor::initdata_begin</a></div><div class="ttdeci">size_t initdata_begin</div><div class="ttdef"><b>Definition</b> <a href="sys-vm-oc_2sys-vm-oc_8hpp_source.html#l00041">sys-vm-oc.hpp:41</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1code__descriptor_html_a80b47bb46b74041f7b4d91fa519d74bb"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html#a80b47bb46b74041f7b4d91fa519d74bb">sysio::chain::eosvmoc::code_descriptor::codegen_version</a></div><div class="ttdeci">uint8_t codegen_version</div><div class="ttdef"><b>Definition</b> <a href="sys-vm-oc_2sys-vm-oc_8hpp_source.html#l00036">sys-vm-oc.hpp:36</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1code__descriptor_html_aa9f9cc97088693963338fe86566e75da"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html#aa9f9cc97088693963338fe86566e75da">sysio::chain::eosvmoc::code_descriptor::code_begin</a></div><div class="ttdeci">size_t code_begin</div><div class="ttdef"><b>Definition</b> <a href="sys-vm-oc_2sys-vm-oc_8hpp_source.html#l00037">sys-vm-oc.hpp:37</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1code__tuple_html"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1code__tuple.html">sysio::chain::eosvmoc::code_tuple</a></div><div class="ttdef"><b>Definition</b> <a href="ipc__protocol_8hpp_source.html#l00017">ipc_protocol.hpp:17</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1compile__wasm__message_html"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1compile__wasm__message.html">sysio::chain::eosvmoc::compile_wasm_message</a></div><div class="ttdef"><b>Definition</b> <a href="ipc__protocol_8hpp_source.html#l00023">ipc_protocol.hpp:23</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1config_html"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1config.html">sysio::chain::eosvmoc::config</a></div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2webassembly_2sys-vm-oc_2config_8hpp_source.html#l00013">config.hpp:13</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1config_html_a2af4dcbdc46f6a75548e41b2c52d9fcc"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1config.html#a2af4dcbdc46f6a75548e41b2c52d9fcc">sysio::chain::eosvmoc::config::cache_size</a></div><div class="ttdeci">uint64_t cache_size</div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2webassembly_2sys-vm-oc_2config_8hpp_source.html#l00014">config.hpp:14</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1evict__wasms__message_html"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1evict__wasms__message.html">sysio::chain::eosvmoc::evict_wasms_message</a></div><div class="ttdef"><b>Definition</b> <a href="ipc__protocol_8hpp_source.html#l00028">ipc_protocol.hpp:28</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1evict__wasms__message_html_a5fd9534f12b754ec55329fe4970d2802"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1evict__wasms__message.html#a5fd9534f12b754ec55329fe4970d2802">sysio::chain::eosvmoc::evict_wasms_message::codes</a></div><div class="ttdeci">std::vector&lt; code_descriptor &gt; codes</div><div class="ttdef"><b>Definition</b> <a href="ipc__protocol_8hpp_source.html#l00029">ipc_protocol.hpp:29</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1wasm__compilation__result__message_html"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1wasm__compilation__result__message.html">sysio::chain::eosvmoc::wasm_compilation_result_message</a></div><div class="ttdef"><b>Definition</b> <a href="ipc__protocol_8hpp_source.html#l00048">ipc_protocol.hpp:48</a></div></div>
<div class="ttc" id="asys-vm-oc_2sys-vm-oc_8hpp_html"><div class="ttname"><a href="sys-vm-oc_2sys-vm-oc_8hpp.html">sys-vm-oc.hpp</a></div></div>
<div class="ttc" id="ayubihsm__pkcs11_8c_html_ae785d5badbf1f08b491af31f32a135a1"><div class="ttname"><a href="yubihsm__pkcs11_8c.html#ae785d5badbf1f08b491af31f32a135a1">memcpy</a></div><div class="ttdeci">memcpy((char *) pInfo-&gt;slotDescription, s, l)</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_428556e0652617aa37d2f7d8bcaf7fdf.html">libraries</a></li><li class="navelem"><a class="el" href="dir_0d4aba5c25a4be0a24c819a636048cb8.html">chain</a></li><li class="navelem"><a class="el" href="dir_5ce26c810a83f17a95a83ff8b63a1157.html">webassembly</a></li><li class="navelem"><a class="el" href="dir_c2960930e3b06cebf37819099d4f5ebd.html">runtimes</a></li><li class="navelem"><a class="el" href="dir_cd6419f50f332a9255201564fabdf79a.html">sys-vm-oc</a></li><li class="navelem"><a class="el" href="code__cache_8cpp.html">code_cache.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
