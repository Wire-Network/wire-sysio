\doxysection{cf\+\_\+transaction.\+cpp}
\hypertarget{cf__transaction_8cpp_source}{}\label{cf__transaction_8cpp_source}\index{libraries/chain/webassembly/cf\_transaction.cpp@{libraries/chain/webassembly/cf\_transaction.cpp}}
\mbox{\hyperlink{cf__transaction_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00001}00001\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{interface_8hpp}{sysio/chain/webassembly/interface.hpp}}>}}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00002}00002\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{transaction__context_8hpp}{sysio/chain/transaction\_context.hpp}}>}}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00003}00003\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{apply__context_8hpp}{sysio/chain/apply\_context.hpp}}>}}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00005}00005\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacesysio}{sysio}}\ \{\ \textcolor{keyword}{namespace\ }chain\ \{\ \textcolor{keyword}{namespace\ }webassembly\ \{}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00006}\mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_ad12b2ec5e734771058acc0d640a31aff}{00006}}\ \ \ \ \mbox{\hyperlink{stdint_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\_t}}\ \mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_ad12b2ec5e734771058acc0d640a31aff}{interface::read\_transaction}}(\ \mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy}{legacy\_span<char>}}\ data\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00007}00007\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ data.size()\ ==\ 0\ )\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_ae34c47dec18cb9034c604afc370eba8b}{transaction\_size}}();}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00008}00008\ }
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00009}00009\ \ \ \ \ \ \ \textcolor{comment}{//\ always\ pack\ the\ transaction\ here\ as\ exact\ pack\ format\ is\ part\ of\ consensus}}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00010}00010\ \ \ \ \ \ \ \textcolor{comment}{//\ and\ an\ alternative\ packed\ format\ could\ be\ stored\ in\ get\_packed\_transaction()}}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00011}00011\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsysio_1_1chain_1_1packed__transaction}{packed\_transaction}}\&\ packed\_trx\ =\ \mbox{\hyperlink{structcontext}{context}}.trx\_context.packed\_trx;}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00012}00012\ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1vector}{bytes}}\ trx\ =\ \mbox{\hyperlink{namespacefc_1_1raw_a3a18d8161aa5b4f4f02b6fcfdff5e5d1}{fc::raw::pack}}(\ \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{structsysio_1_1chain_1_1transaction}{transaction}}\&\textcolor{keyword}{>}(\ packed\_trx.\mbox{\hyperlink{structsysio_1_1chain_1_1packed__transaction_ad193d26eb97cfd5b3f7d8b957eaa35a2}{get\_transaction}}()\ )\ );}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00013}00013\ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ copy\_size\ =\ std::min(\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(data.size()),\ trx.size()\ );}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00014}00014\ \ \ \ \ \ \ std::memcpy(\ data.data(),\ trx.data(),\ copy\_size\ );}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00015}00015\ }
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00016}00016\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ copy\_size;}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00017}00017\ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00019}\mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_ae34c47dec18cb9034c604afc370eba8b}{00019}}\ \ \ \ \mbox{\hyperlink{stdint_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\_t}}\ \mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_ae34c47dec18cb9034c604afc370eba8b}{interface::transaction\_size}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00020}00020\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsysio_1_1chain_1_1packed__transaction}{packed\_transaction}}\&\ packed\_trx\ =\ \mbox{\hyperlink{structcontext}{context}}.trx\_context.packed\_trx;}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00021}00021\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacefc_1_1raw_a64937a5adc8041247f7007882224e225}{fc::raw::pack\_size}}(\ \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{structsysio_1_1chain_1_1transaction}{transaction}}\&\textcolor{keyword}{>}(\ packed\_trx.\mbox{\hyperlink{structsysio_1_1chain_1_1packed__transaction_ad193d26eb97cfd5b3f7d8b957eaa35a2}{get\_transaction}}()\ )\ );}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00022}00022\ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00024}\mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_a3efdf48bc7d574000b05f614788b79bb}{00024}}\ \ \ \ \mbox{\hyperlink{stdint_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\_t}}\ \mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_a3efdf48bc7d574000b05f614788b79bb}{interface::expiration}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00025}00025\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structcontext}{context}}.trx\_context.packed\_trx.get\_transaction().expiration.sec\_since\_epoch();}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00026}00026\ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00028}\mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_ac09a65a0483e6fdc0a4e9136f67ea69a}{00028}}\ \ \ \ \mbox{\hyperlink{stdint_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\_t}}\ \mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_ac09a65a0483e6fdc0a4e9136f67ea69a}{interface::tapos\_block\_num}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00029}00029\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structcontext}{context}}.trx\_context.packed\_trx.get\_transaction().ref\_block\_num;}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00030}00030\ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00032}\mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_a614d1eda1062bf4df116b64d3ea18a88}{00032}}\ \ \ \ \mbox{\hyperlink{stdint_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\_t}}\ \mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_a614d1eda1062bf4df116b64d3ea18a88}{interface::tapos\_block\_prefix}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00033}00033\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structcontext}{context}}.trx\_context.packed\_trx.get\_transaction().ref\_block\_prefix;}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00034}00034\ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00036}\mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_a4c58ea322e525d1a5b3615d2d27ae5a2}{00036}}\ \ \ \ \mbox{\hyperlink{stdint_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\_t}}\ \mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_a4c58ea322e525d1a5b3615d2d27ae5a2}{interface::get\_action}}(\ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ type,\ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ index,\ \mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy}{legacy\_span<char>}}\ buffer\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00037}00037\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structcontext}{context}}.get\_action(\ type,\ index,\ buffer.data(),\ buffer.size()\ );}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00038}00038\ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{cf__transaction_8cpp_source_l00039}00039\ \}\}\}\ \textcolor{comment}{//\ ns\ sysio::chain::webassembly}}

\end{DoxyCode}
