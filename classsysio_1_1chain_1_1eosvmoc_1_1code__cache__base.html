<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wire Sysio: sysio::chain::eosvmoc::code_cache_base Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Wire Sysio<span id="projectnumber">&#160;Wire Sysion 1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">sysio::chain::eosvmoc::code_cache_base Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="code__cache_8hpp_source.html">code_cache.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for sysio::chain::eosvmoc::code_cache_base:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base__inherit__graph.png" border="0" usemap="#asysio_1_1chain_1_1eosvmoc_1_1code__cache__base_inherit__map" alt="Inheritance graph"/></div>
<map name="asysio_1_1chain_1_1eosvmoc_1_1code__cache__base_inherit__map" id="asysio_1_1chain_1_1eosvmoc_1_1code__cache__base_inherit__map">
<area shape="rect" title=" " alt="" coords="93,5,246,46"/>
<area shape="rect" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__async.html" title=" " alt="" coords="5,94,158,135"/>
<area shape="poly" title=" " alt="" coords="141,59,103,95,100,92,137,55"/>
<area shape="rect" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__sync.html" title=" " alt="" coords="181,94,334,135"/>
<area shape="poly" title=" " alt="" coords="202,55,239,92,236,95,198,59"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for sysio::chain::eosvmoc::code_cache_base:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base__coll__graph.png" border="0" usemap="#asysio_1_1chain_1_1eosvmoc_1_1code__cache__base_coll__map" alt="Collaboration graph"/></div>
<map name="asysio_1_1chain_1_1eosvmoc_1_1code__cache__base_coll__map" id="asysio_1_1chain_1_1eosvmoc_1_1code__cache__base_coll__map">
<area shape="rect" title=" " alt="" coords="61,109,214,150"/>
<area shape="rect" href="classchainbase_1_1database.html" title=" " alt="" coords="5,5,147,31"/>
<area shape="poly" title=" " alt="" coords="93,43,129,107,124,110,88,46"/>
<area shape="rect" title=" " alt="" coords="170,5,227,31"/>
<area shape="poly" title=" " alt="" coords="187,46,151,110,146,107,182,43"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab31065b1fab5b6d5910d1cae71bb15cf" id="r_ab31065b1fab5b6d5910d1cae71bb15cf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab31065b1fab5b6d5910d1cae71bb15cf">code_cache_base</a> (const bfs::path data_dir, const <a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1config.html">eosvmoc::config</a> &amp;eosvmoc_config, const <a class="el" href="classchainbase_1_1database.html">chainbase::database</a> &amp;db)</td></tr>
<tr class="separator:ab31065b1fab5b6d5910d1cae71bb15cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac04c389f3eef6d9860d507ce690a4781" id="r_ac04c389f3eef6d9860d507ce690a4781"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac04c389f3eef6d9860d507ce690a4781">~code_cache_base</a> ()</td></tr>
<tr class="separator:ac04c389f3eef6d9860d507ce690a4781"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad77b7e524be52fdfab8d5faef376b4db" id="r_ad77b7e524be52fdfab8d5faef376b4db"><td class="memItemLeft" align="right" valign="top">const int &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad77b7e524be52fdfab8d5faef376b4db">fd</a> () const</td></tr>
<tr class="separator:ad77b7e524be52fdfab8d5faef376b4db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a898c78da95cb62a1fc2fbdb197f2836d" id="r_a898c78da95cb62a1fc2fbdb197f2836d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a898c78da95cb62a1fc2fbdb197f2836d">free_code</a> (const <a class="el" href="namespacesysio_1_1chain.html#a357fd9478475457e5bb386a3143079b6">digest_type</a> &amp;code_id, const <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> &amp;vm_version)</td></tr>
<tr class="separator:a898c78da95cb62a1fc2fbdb197f2836d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-types" name="pro-types"></a>
Protected Types</h2></td></tr>
<tr class="memitem:a30f70ce315e8da4166face9c8b4ea5e5" id="r_a30f70ce315e8da4166face9c8b4ea5e5"><td class="memItemLeft" align="right" valign="top">typedef boost::multi_index_container&lt; <a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html">code_descriptor</a>, indexed_by&lt; sequenced&lt;&gt;, hashed_unique&lt; tag&lt; by_hash &gt;, composite_key&lt; <a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html">code_descriptor</a>, member&lt; <a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html">code_descriptor</a>, <a class="el" href="namespacesysio_1_1chain.html#a357fd9478475457e5bb386a3143079b6">digest_type</a>, &amp;<a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html#ada2be2602cbf3bad4ae32cfed797abde">code_descriptor::code_hash</a> &gt;, member&lt; <a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html">code_descriptor</a>, <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, &amp;<a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html#aea83d482172d4dedadbc9dd54e9a5a29">code_descriptor::vm_version</a> &gt; &gt; &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a30f70ce315e8da4166face9c8b4ea5e5">code_cache_index</a></td></tr>
<tr class="separator:a30f70ce315e8da4166face9c8b4ea5e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a249bdb27d2796f53a728b85a2889db44" id="r_a249bdb27d2796f53a728b85a2889db44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a249bdb27d2796f53a728b85a2889db44">check_eviction_threshold</a> (size_t free_bytes)</td></tr>
<tr class="separator:a249bdb27d2796f53a728b85a2889db44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a543e8301b86cc0682a715686279dc1c3" id="r_a543e8301b86cc0682a715686279dc1c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a543e8301b86cc0682a715686279dc1c3">run_eviction_round</a> ()</td></tr>
<tr class="separator:a543e8301b86cc0682a715686279dc1c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9933307339971ede770f460277491587" id="r_a9933307339971ede770f460277491587"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9933307339971ede770f460277491587">set_on_disk_region_dirty</a> (bool)</td></tr>
<tr class="separator:a9933307339971ede770f460277491587"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06095b550460307a8e11b2b8a1083230" id="r_a06095b550460307a8e11b2b8a1083230"><td class="memTemplParams" colspan="2">template&lt;typename <a class="el" href="prettywritertest_8cpp.html#a6283df8c4e365cc8a01727e2d7ad44bf">T</a> &gt; </td></tr>
<tr class="memitem:a06095b550460307a8e11b2b8a1083230"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a06095b550460307a8e11b2b8a1083230">serialize_cache_index</a> (<a class="el" href="classfc_1_1datastream.html">fc::datastream</a>&lt; <a class="el" href="prettywritertest_8cpp.html#a6283df8c4e365cc8a01727e2d7ad44bf">T</a> &gt; &amp;ds)</td></tr>
<tr class="separator:a06095b550460307a8e11b2b8a1083230"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:adb969be895a25820aa4e599304dfa252" id="r_adb969be895a25820aa4e599304dfa252"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a30f70ce315e8da4166face9c8b4ea5e5">code_cache_index</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adb969be895a25820aa4e599304dfa252">_cache_index</a></td></tr>
<tr class="separator:adb969be895a25820aa4e599304dfa252"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7e0e5b63b94e48e35baacc15644b0b7" id="r_ad7e0e5b63b94e48e35baacc15644b0b7"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classchainbase_1_1database.html">chainbase::database</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad7e0e5b63b94e48e35baacc15644b0b7">_db</a></td></tr>
<tr class="separator:ad7e0e5b63b94e48e35baacc15644b0b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbf29e52e658f8089958c93ae87402ac" id="r_abbf29e52e658f8089958c93ae87402ac"><td class="memItemLeft" align="right" valign="top">bfs::path&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a></td></tr>
<tr class="separator:abbf29e52e658f8089958c93ae87402ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaee1ae29b4dc9f8f3cb0b86f32998dc4" id="r_aaee1ae29b4dc9f8f3cb0b86f32998dc4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaee1ae29b4dc9f8f3cb0b86f32998dc4">_cache_fd</a></td></tr>
<tr class="separator:aaee1ae29b4dc9f8f3cb0b86f32998dc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acccb3fc4fe49eb154ea915ee8b350f70" id="r_acccb3fc4fe49eb154ea915ee8b350f70"><td class="memItemLeft" align="right" valign="top">io_context&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acccb3fc4fe49eb154ea915ee8b350f70">_ctx</a></td></tr>
<tr class="separator:acccb3fc4fe49eb154ea915ee8b350f70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ea07bb510f7b82ecfb324bca6225728" id="r_a1ea07bb510f7b82ecfb324bca6225728"><td class="memItemLeft" align="right" valign="top">local::datagram_protocol::socket&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1ea07bb510f7b82ecfb324bca6225728">_compile_monitor_write_socket</a> {<a class="el" href="#acccb3fc4fe49eb154ea915ee8b350f70">_ctx</a>}</td></tr>
<tr class="separator:a1ea07bb510f7b82ecfb324bca6225728"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3422663ea869e784bf6b6e72cb43f96b" id="r_a3422663ea869e784bf6b6e72cb43f96b"><td class="memItemLeft" align="right" valign="top">local::datagram_protocol::socket&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3422663ea869e784bf6b6e72cb43f96b">_compile_monitor_read_socket</a> {<a class="el" href="#acccb3fc4fe49eb154ea915ee8b350f70">_ctx</a>}</td></tr>
<tr class="separator:a3422663ea869e784bf6b6e72cb43f96b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44c50f4deb837180fa47026465c55d8a" id="r_a44c50f4deb837180fa47026465c55d8a"><td class="memItemLeft" align="right" valign="top">std::unordered_set&lt; <a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__tuple.html">code_tuple</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a44c50f4deb837180fa47026465c55d8a">_queued_compiles</a></td></tr>
<tr class="separator:a44c50f4deb837180fa47026465c55d8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f9d3065fa9328cb776d6c68b0c9ef1f" id="r_a6f9d3065fa9328cb776d6c68b0c9ef1f"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__tuple.html">code_tuple</a>, bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6f9d3065fa9328cb776d6c68b0c9ef1f">_outstanding_compiles_and_poison</a></td></tr>
<tr class="separator:a6f9d3065fa9328cb776d6c68b0c9ef1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4b8115d88fae51bcaf70a15bd3db3bc" id="r_aa4b8115d88fae51bcaf70a15bd3db3bc"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa4b8115d88fae51bcaf70a15bd3db3bc">_free_bytes_eviction_threshold</a></td></tr>
<tr class="separator:aa4b8115d88fae51bcaf70a15bd3db3bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="code__cache_8hpp_source.html#l00039">39</a> of file <a class="el" href="code__cache_8hpp_source.html">code_cache.hpp</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a30f70ce315e8da4166face9c8b4ea5e5" name="a30f70ce315e8da4166face9c8b4ea5e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30f70ce315e8da4166face9c8b4ea5e5">&#9670;&#160;</a></span>code_cache_index</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::multi_index_container&lt; <a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html">code_descriptor</a>, indexed_by&lt; sequenced&lt;&gt;, hashed_unique&lt;tag&lt;by_hash&gt;, composite_key&lt; <a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html">code_descriptor</a>, member&lt;<a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html">code_descriptor</a>, <a class="el" href="namespacesysio_1_1chain.html#a357fd9478475457e5bb386a3143079b6">digest_type</a>, &amp;<a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html#ada2be2602cbf3bad4ae32cfed797abde">code_descriptor::code_hash</a>&gt;, member&lt;<a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html">code_descriptor</a>, <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, &amp;<a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html#aea83d482172d4dedadbc9dd54e9a5a29">code_descriptor::vm_version</a>&gt; &gt; &gt; &gt; &gt; <a class="el" href="#a30f70ce315e8da4166face9c8b4ea5e5">sysio::chain::eosvmoc::code_cache_base::code_cache_index</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="code__cache_8hpp_source.html#l00062">62</a> of file <a class="el" href="code__cache_8hpp_source.html">code_cache.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab31065b1fab5b6d5910d1cae71bb15cf" name="ab31065b1fab5b6d5910d1cae71bb15cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab31065b1fab5b6d5910d1cae71bb15cf">&#9670;&#160;</a></span>code_cache_base()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sysio::chain::eosvmoc::code_cache_base::code_cache_base </td>
          <td>(</td>
          <td class="paramtype">const bfs::path</td>          <td class="paramname"><span class="paramname"><em>data_dir</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1config.html">eosvmoc::config</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>eosvmoc_config</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classchainbase_1_1database.html">chainbase::database</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>db</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="code__cache_8cpp_source.html#l00205">205</a> of file <a class="el" href="code__cache_8cpp_source.html">code_cache.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  205</span>                                                                                                                                     :</div>
<div class="line"><span class="lineno">  206</span>   <a class="code hl_variable" href="#ad7e0e5b63b94e48e35baacc15644b0b7">_db</a>(db),</div>
<div class="line"><span class="lineno">  207</span>   <a class="code hl_variable" href="#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>(data_dir/<span class="stringliteral">&quot;code_cache.bin&quot;</span>)</div>
<div class="line"><span class="lineno">  208</span>{</div>
<div class="line"><span class="lineno">  209</span>   <span class="keyword">static_assert</span>(<span class="keyword">sizeof</span>(<a class="code hl_typedef" href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">allocator_t</a>) &lt;= header_offset, <span class="stringliteral">&quot;header offset intersects with allocator&quot;</span>);</div>
<div class="line"><span class="lineno">  210</span> </div>
<div class="line"><span class="lineno">  211</span>   bfs::create_directories(data_dir);</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>   <span class="keywordflow">if</span>(!bfs::exists(<a class="code hl_variable" href="#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>)) {</div>
<div class="line"><span class="lineno">  214</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(eosvmoc_config.cache_size &gt;= allocator_t::get_min_size(total_header_size), <a class="code hl_variable" href="namespacesysio_1_1chain.html#a6b9cb254135911c4a6d577a9ab7fdd4e">database_exception</a>, <span class="stringliteral">&quot;configured code cache size is too small&quot;</span>);</div>
<div class="line"><span class="lineno">  215</span>      std::ofstream ofs(<a class="code hl_variable" href="#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>.generic_string(), std::ofstream::trunc);</div>
<div class="line"><span class="lineno">  216</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(ofs.good(), <a class="code hl_variable" href="namespacesysio_1_1chain.html#a6b9cb254135911c4a6d577a9ab7fdd4e">database_exception</a>, <span class="stringliteral">&quot;unable to create SYS VM Optimized Compiler code cache&quot;</span>);</div>
<div class="line"><span class="lineno">  217</span>      bfs::resize_file(<a class="code hl_variable" href="#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>, eosvmoc_config.cache_size);</div>
<div class="line"><span class="lineno">  218</span>      bip::file_mapping creation_mapping(<a class="code hl_variable" href="#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>.generic_string().c_str(), bip::read_write);</div>
<div class="line"><span class="lineno">  219</span>      bip::mapped_region creation_region(creation_mapping, bip::read_write);</div>
<div class="line"><span class="lineno">  220</span>      <span class="keyword">new</span> (creation_region.get_address()) <a class="code hl_typedef" href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">allocator_t</a>(eosvmoc_config.cache_size, total_header_size);</div>
<div class="line"><span class="lineno">  221</span>      <span class="keyword">new</span> ((<span class="keywordtype">char</span>*)creation_region.get_address() + header_offset) code_cache_header;</div>
<div class="line"><span class="lineno">  222</span>   }</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>   code_cache_header cache_header;</div>
<div class="line"><span class="lineno">  225</span>   {</div>
<div class="line"><span class="lineno">  226</span>      <span class="keywordtype">char</span> header_buff[total_header_size];</div>
<div class="line"><span class="lineno">  227</span>      std::ifstream hs(<a class="code hl_variable" href="#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>.generic_string(), std::ifstream::binary);</div>
<div class="line"><span class="lineno">  228</span>      hs.read(header_buff, <span class="keyword">sizeof</span>(header_buff));</div>
<div class="line"><span class="lineno">  229</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(!hs.fail(), bad_database_version_exception, <span class="stringliteral">&quot;failed to read code cache header&quot;</span>);</div>
<div class="line"><span class="lineno">  230</span>      <a class="code hl_function" href="yubihsm__pkcs11_8c.html#ae785d5badbf1f08b491af31f32a135a1">memcpy</a>((<span class="keywordtype">char</span>*)&amp;cache_header, header_buff + header_offset, <span class="keyword">sizeof</span>(cache_header));</div>
<div class="line"><span class="lineno">  231</span>   }</div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(cache_header.id == header_id, bad_database_version_exception, <span class="stringliteral">&quot;existing SYS VM OC code cache not compatible with this version&quot;</span>);</div>
<div class="line"><span class="lineno">  234</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(!cache_header.dirty, <a class="code hl_variable" href="namespacesysio_1_1chain.html#a6b9cb254135911c4a6d577a9ab7fdd4e">database_exception</a>, <span class="stringliteral">&quot;code cache is dirty&quot;</span>);</div>
<div class="line"><span class="lineno">  235</span> </div>
<div class="line"><span class="lineno">  236</span>   <a class="code hl_function" href="#a9933307339971ede770f460277491587">set_on_disk_region_dirty</a>(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>   <span class="keyword">auto</span> existing_file_size = bfs::file_size(<a class="code hl_variable" href="#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>);</div>
<div class="line"><span class="lineno">  239</span>   <span class="keywordflow">if</span>(eosvmoc_config.cache_size &gt; existing_file_size) {</div>
<div class="line"><span class="lineno">  240</span>      bfs::resize_file(<a class="code hl_variable" href="#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>, eosvmoc_config.cache_size);</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span>      bip::file_mapping resize_mapping(<a class="code hl_variable" href="#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>.generic_string().c_str(), bip::read_write);</div>
<div class="line"><span class="lineno">  243</span>      bip::mapped_region resize_region(resize_mapping, bip::read_write);</div>
<div class="line"><span class="lineno">  244</span> </div>
<div class="line"><span class="lineno">  245</span>      <a class="code hl_typedef" href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">allocator_t</a>* resize_allocator = <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_typedef" href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">allocator_t</a>*<span class="keyword">&gt;</span>(resize_region.get_address());</div>
<div class="line"><span class="lineno">  246</span>      resize_allocator-&gt;grow(eosvmoc_config.cache_size - existing_file_size);</div>
<div class="line"><span class="lineno">  247</span>   }</div>
<div class="line"><span class="lineno">  248</span> </div>
<div class="line"><span class="lineno">  249</span>   <a class="code hl_variable" href="#aaee1ae29b4dc9f8f3cb0b86f32998dc4">_cache_fd</a> = ::open(<a class="code hl_variable" href="#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>.generic_string().c_str(), O_RDWR | O_CLOEXEC);</div>
<div class="line"><span class="lineno">  250</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(<a class="code hl_variable" href="#aaee1ae29b4dc9f8f3cb0b86f32998dc4">_cache_fd</a> &gt;= 0, <a class="code hl_variable" href="namespacesysio_1_1chain.html#a6b9cb254135911c4a6d577a9ab7fdd4e">database_exception</a>, <span class="stringliteral">&quot;failure to open code cache&quot;</span>);</div>
<div class="line"><span class="lineno">  251</span> </div>
<div class="line"><span class="lineno">  252</span>   <span class="comment">//load up the previous cache index</span></div>
<div class="line"><span class="lineno">  253</span>   <span class="keywordtype">char</span>* code_mapping = (<span class="keywordtype">char</span>*)mmap(<span class="keyword">nullptr</span>, eosvmoc_config.cache_size, PROT_READ|PROT_WRITE, MAP_SHARED, <a class="code hl_variable" href="#aaee1ae29b4dc9f8f3cb0b86f32998dc4">_cache_fd</a>, 0);</div>
<div class="line"><span class="lineno">  254</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(code_mapping != MAP_FAILED, <a class="code hl_variable" href="namespacesysio_1_1chain.html#a6b9cb254135911c4a6d577a9ab7fdd4e">database_exception</a>, <span class="stringliteral">&quot;failure to mmap code cache&quot;</span>);</div>
<div class="line"><span class="lineno">  255</span> </div>
<div class="line"><span class="lineno">  256</span>   <a class="code hl_typedef" href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">allocator_t</a>* <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a> = <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_typedef" href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">allocator_t</a>*<span class="keyword">&gt;</span>(code_mapping);</div>
<div class="line"><span class="lineno">  257</span> </div>
<div class="line"><span class="lineno">  258</span>   <span class="keywordflow">if</span>(cache_header.serialized_descriptor_index) {</div>
<div class="line"><span class="lineno">  259</span>      <a class="code hl_class" href="classfc_1_1datastream.html">fc::datastream&lt;const char*&gt;</a> <a class="code hl_function" href="namespace_xbyak_1_1util.html#a4b2aef26182d21706896022467868f7c">ds</a>(code_mapping + cache_header.serialized_descriptor_index, eosvmoc_config.cache_size - cache_header.serialized_descriptor_index);</div>
<div class="line"><span class="lineno">  260</span>      <span class="keywordtype">unsigned</span> number_entries;</div>
<div class="line"><span class="lineno">  261</span>      <a class="code hl_function" href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab">fc::raw::unpack</a>(ds, number_entries);</div>
<div class="line"><span class="lineno">  262</span>      <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> i = 0; i &lt; number_entries; ++i) {</div>
<div class="line"><span class="lineno">  263</span>         code_descriptor cd;</div>
<div class="line"><span class="lineno">  264</span>         <a class="code hl_function" href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab">fc::raw::unpack</a>(ds, cd);</div>
<div class="line"><span class="lineno">  265</span>         <span class="keywordflow">if</span>(cd.codegen_version != current_codegen_version) {</div>
<div class="line"><span class="lineno">  266</span>            <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;deallocate(code_mapping + cd.code_begin);</div>
<div class="line"><span class="lineno">  267</span>            <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;deallocate(code_mapping + cd.initdata_begin);</div>
<div class="line"><span class="lineno">  268</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  269</span>         }</div>
<div class="line"><span class="lineno">  270</span>         <a class="code hl_variable" href="#adb969be895a25820aa4e599304dfa252">_cache_index</a>.push_back(std::move(cd));</div>
<div class="line"><span class="lineno">  271</span>      }</div>
<div class="line"><span class="lineno">  272</span>      <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;deallocate(code_mapping + cache_header.serialized_descriptor_index);</div>
<div class="line"><span class="lineno">  273</span> </div>
<div class="line"><span class="lineno">  274</span>      <a class="code hl_define" href="logger_8hpp.html#a831cf08dc63704c11fd154132c6e8bdb">ilog</a>(<span class="stringliteral">&quot;SYS VM Optimized Compiler code cache loaded with ${c} entries; ${f} of ${t} bytes free&quot;</span>, (<span class="stringliteral">&quot;c&quot;</span>, number_entries)(<span class="stringliteral">&quot;f&quot;</span>, <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;get_free_memory())(<span class="stringliteral">&quot;t&quot;</span>, <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;get_size()));</div>
<div class="line"><span class="lineno">  275</span>   }</div>
<div class="line"><span class="lineno">  276</span>   munmap(code_mapping, eosvmoc_config.cache_size);</div>
<div class="line"><span class="lineno">  277</span> </div>
<div class="line"><span class="lineno">  278</span>   <a class="code hl_variable" href="#aa4b8115d88fae51bcaf70a15bd3db3bc">_free_bytes_eviction_threshold</a> = eosvmoc_config.cache_size * .1;</div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>   wrapped_fd compile_monitor_conn = <a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc.html#af77847bae59b1a2878f14d00e46d6bab">get_connection_to_compile_monitor</a>(<a class="code hl_variable" href="#aaee1ae29b4dc9f8f3cb0b86f32998dc4">_cache_fd</a>);</div>
<div class="line"><span class="lineno">  281</span> </div>
<div class="line"><span class="lineno">  282</span>   <span class="comment">//okay, let&#39;s do this by the book: we&#39;re not allowed to write &amp; read on different threads to the same asio socket. So create two fds</span></div>
<div class="line"><span class="lineno">  283</span>   <span class="comment">//representing the same unix socket. we&#39;ll read on one and write on the other</span></div>
<div class="line"><span class="lineno">  284</span>   <span class="keywordtype">int</span> duped = dup(compile_monitor_conn);</div>
<div class="line"><span class="lineno">  285</span>   <a class="code hl_variable" href="#a1ea07bb510f7b82ecfb324bca6225728">_compile_monitor_write_socket</a>.assign(local::datagram_protocol(), duped);</div>
<div class="line"><span class="lineno">  286</span>   <a class="code hl_variable" href="#a3422663ea869e784bf6b6e72cb43f96b">_compile_monitor_read_socket</a>.assign(local::datagram_protocol(), compile_monitor_conn.release());</div>
<div class="line"><span class="lineno">  287</span>}</div>
<div class="ttc" id="achain_2include_2sysio_2chain_2exceptions_8hpp_html_a40c2826a6fba35c1ffbf912bdf559792"><div class="ttname"><a href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a></div><div class="ttdeci">#define SYS_ASSERT(expr, exc_type, FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2exceptions_8hpp_source.html#l00007">exceptions.hpp:7</a></div></div>
<div class="ttc" id="aclassfc_1_1datastream_html"><div class="ttname"><a href="classfc_1_1datastream.html">fc::datastream</a></div><div class="ttdef"><b>Definition</b> <a href="datastream_8hpp_source.html#l00018">datastream.hpp:18</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_a1ea07bb510f7b82ecfb324bca6225728"><div class="ttname"><a href="#a1ea07bb510f7b82ecfb324bca6225728">sysio::chain::eosvmoc::code_cache_base::_compile_monitor_write_socket</a></div><div class="ttdeci">local::datagram_protocol::socket _compile_monitor_write_socket</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00071">code_cache.hpp:71</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_a3422663ea869e784bf6b6e72cb43f96b"><div class="ttname"><a href="#a3422663ea869e784bf6b6e72cb43f96b">sysio::chain::eosvmoc::code_cache_base::_compile_monitor_read_socket</a></div><div class="ttdeci">local::datagram_protocol::socket _compile_monitor_read_socket</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00072">code_cache.hpp:72</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_a9933307339971ede770f460277491587"><div class="ttname"><a href="#a9933307339971ede770f460277491587">sysio::chain::eosvmoc::code_cache_base::set_on_disk_region_dirty</a></div><div class="ttdeci">void set_on_disk_region_dirty(bool)</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8cpp_source.html#l00289">code_cache.cpp:289</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_aa4b8115d88fae51bcaf70a15bd3db3bc"><div class="ttname"><a href="#aa4b8115d88fae51bcaf70a15bd3db3bc">sysio::chain::eosvmoc::code_cache_base::_free_bytes_eviction_threshold</a></div><div class="ttdeci">size_t _free_bytes_eviction_threshold</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00079">code_cache.hpp:79</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_aaee1ae29b4dc9f8f3cb0b86f32998dc4"><div class="ttname"><a href="#aaee1ae29b4dc9f8f3cb0b86f32998dc4">sysio::chain::eosvmoc::code_cache_base::_cache_fd</a></div><div class="ttdeci">int _cache_fd</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00068">code_cache.hpp:68</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_abbf29e52e658f8089958c93ae87402ac"><div class="ttname"><a href="#abbf29e52e658f8089958c93ae87402ac">sysio::chain::eosvmoc::code_cache_base::_cache_file_path</a></div><div class="ttdeci">bfs::path _cache_file_path</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00067">code_cache.hpp:67</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_ad7e0e5b63b94e48e35baacc15644b0b7"><div class="ttname"><a href="#ad7e0e5b63b94e48e35baacc15644b0b7">sysio::chain::eosvmoc::code_cache_base::_db</a></div><div class="ttdeci">const chainbase::database &amp; _db</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00065">code_cache.hpp:65</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_adb969be895a25820aa4e599304dfa252"><div class="ttname"><a href="#adb969be895a25820aa4e599304dfa252">sysio::chain::eosvmoc::code_cache_base::_cache_index</a></div><div class="ttdeci">code_cache_index _cache_index</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00063">code_cache.hpp:63</a></div></div>
<div class="ttc" id="alogger_8hpp_html_a831cf08dc63704c11fd154132c6e8bdb"><div class="ttname"><a href="logger_8hpp.html#a831cf08dc63704c11fd154132c6e8bdb">ilog</a></div><div class="ttdeci">#define ilog(FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="logger_8hpp_source.html#l00118">logger.hpp:118</a></div></div>
<div class="ttc" id="anamespace_xbyak_1_1util_html_a4b2aef26182d21706896022467868f7c"><div class="ttname"><a href="namespace_xbyak_1_1util.html#a4b2aef26182d21706896022467868f7c">Xbyak::util::ds</a></div><div class="ttdeci">static const Segment ds(Segment::ds)</div></div>
<div class="ttc" id="anamespacechainbase_html_add7d4cf66ab3f2808fe613e6b0343b89"><div class="ttname"><a href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">chainbase::allocator</a></div><div class="ttdeci">bip::allocator&lt; T, pinnable_mapped_file::segment_manager &gt; allocator</div><div class="ttdef"><b>Definition</b> <a href="chainbase_8hpp_source.html#l00056">chainbase.hpp:56</a></div></div>
<div class="ttc" id="anamespacefc_1_1raw_html_a0b442d98ceb22dd5a6ae84745e43ffab"><div class="ttname"><a href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab">fc::raw::unpack</a></div><div class="ttdeci">void unpack(Stream &amp;s, std::deque&lt; T &gt; &amp;value)</div><div class="ttdef"><b>Definition</b> <a href="raw_8hpp_source.html#l00540">raw.hpp:540</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1eosvmoc_html_a113f05ff7d17d44ce4cee37bcb2caad7"><div class="ttname"><a href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">sysio::chain::eosvmoc::allocator_t</a></div><div class="ttdeci">bip::rbtree_best_fit&lt; bip::null_mutex_family, bip::offset_ptr&lt; void &gt;, alignof(std::max_align_t)&gt; allocator_t</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00035">code_cache.hpp:35</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1eosvmoc_html_af77847bae59b1a2878f14d00e46d6bab"><div class="ttname"><a href="namespacesysio_1_1chain_1_1eosvmoc.html#af77847bae59b1a2878f14d00e46d6bab">sysio::chain::eosvmoc::get_connection_to_compile_monitor</a></div><div class="ttdeci">wrapped_fd get_connection_to_compile_monitor(int cache_fd)</div><div class="ttdef"><b>Definition</b> <a href="compile__monitor_8cpp_source.html#l00306">compile_monitor.cpp:306</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_a6b9cb254135911c4a6d577a9ab7fdd4e"><div class="ttname"><a href="namespacesysio_1_1chain.html#a6b9cb254135911c4a6d577a9ab7fdd4e">sysio::chain::database_exception</a></div><div class="ttdeci">key Invalid authority Invalid transaction Invalid block ID Invalid packed transaction Invalid chain ID Invalid symbol Signature type is not a currently activated type Block can not be found Unlinkable block Block does not guarantee concurrent execution without conflicts Block exhausted allowed resources Block is from the future Block is not signed by expected producer Block includes an ill formed protocol feature activation extension Block includes an ill formed additional block signature extension Error decompressing transaction Transaction should have at least one required authority Expired Transaction Invalid Reference Block Duplicate deferred transaction The transaction can not be found Transaction is too big Invalid transaction extension Transaction includes disallowed Transaction exceeded transient resource limit Account name already exists sysio_assert_message assertion failure Action can not be found Attempt to use unaccessible API Inline Action exceeds maximum size limit sysio_assert_code assertion failure uses restricted error code value action return value size too big database_exception</div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2exceptions_8hpp_source.html#l00314">exceptions.hpp:314</a></div></div>
<div class="ttc" id="ayubihsm__pkcs11_8c_html_ae785d5badbf1f08b491af31f32a135a1"><div class="ttname"><a href="yubihsm__pkcs11_8c.html#ae785d5badbf1f08b491af31f32a135a1">memcpy</a></div><div class="ttdeci">memcpy((char *) pInfo-&gt;slotDescription, s, l)</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base_ab31065b1fab5b6d5910d1cae71bb15cf_cgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_ab31065b1fab5b6d5910d1cae71bb15cf_cgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_ab31065b1fab5b6d5910d1cae71bb15cf_cgraph" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_ab31065b1fab5b6d5910d1cae71bb15cf_cgraph">
<area shape="rect" title=" " alt="" coords="5,188,176,244"/>
<area shape="rect" href="namespacesysio_1_1chain_1_1eosvmoc.html#af77847bae59b1a2878f14d00e46d6bab" title=" " alt="" coords="224,66,411,122"/>
<area shape="poly" title=" " alt="" coords="132,186,222,131,233,126,235,131,225,136,135,190"/>
<area shape="rect" href="yubihsm__pkcs11_8c.html#ae785d5badbf1f08b491af31f32a135a1" title=" " alt="" coords="282,146,353,172"/>
<area shape="poly" title=" " alt="" coords="175,192,266,169,267,174,177,197"/>
<area shape="rect" href="classsysio_1_1chain_1_1eosvmoc_1_1wrapped__fd.html#a1fd75f5baa00eff2fb96107b6b70e3dc" title=" " alt="" coords="241,196,394,237"/>
<area shape="poly" title=" " alt="" coords="176,214,226,214,226,219,176,219"/>
<area shape="rect" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a9933307339971ede770f460277491587" title=" " alt="" coords="237,260,398,316"/>
<area shape="poly" title=" " alt="" coords="177,241,223,256,221,261,175,246"/>
<area shape="rect" href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab" title=" " alt="" coords="262,365,373,390"/>
<area shape="poly" title=" " alt="" coords="123,243,170,284,225,326,275,355,272,360,222,331,166,288,119,247"/>
<area shape="poly" title=" " alt="" coords="273,65,273,55,281,47,296,41,317,39,341,42,356,49,354,53,340,47,317,44,297,46,284,51,278,57,278,66"/>
<area shape="rect" href="namespacesysio_1_1chain_1_1eosvmoc.html#aa65c4d6c02a0823262c6627a86cc74bc" title=" " alt="" coords="460,29,631,70"/>
<area shape="poly" title=" " alt="" coords="411,73,445,66,446,72,412,78"/>
<area shape="rect" href="namespacesysio_1_1chain_1_1eosvmoc.html#a8715d32fd2e6a4a668578ca0d946b58b" title=" " alt="" coords="459,119,632,159"/>
<area shape="poly" title=" " alt="" coords="412,110,444,116,443,121,411,115"/>
<area shape="poly" title=" " alt="" coords="503,29,500,19,508,10,523,5,546,3,570,5,585,11,583,16,569,10,546,8,524,10,511,15,506,21,508,28"/>
<area shape="poly" title=" " alt="" coords="503,119,500,109,508,100,523,94,546,92,570,94,585,101,583,106,569,100,546,97,524,99,511,104,506,110,508,117"/>
<area shape="poly" title=" " alt="" coords="280,366,272,356,277,346,292,340,317,338,345,341,359,348,357,352,344,346,317,343,293,346,280,350,278,356,284,363"/>
</map>
</div>

</div>
</div>
<a id="ac04c389f3eef6d9860d507ce690a4781" name="ac04c389f3eef6d9860d507ce690a4781"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac04c389f3eef6d9860d507ce690a4781">&#9670;&#160;</a></span>~code_cache_base()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sysio::chain::eosvmoc::code_cache_base::~code_cache_base </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="code__cache_8cpp_source.html#l00306">306</a> of file <a class="el" href="code__cache_8cpp_source.html">code_cache.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  306</span>                                  {</div>
<div class="line"><span class="lineno">  307</span>   <span class="comment">//reopen the code cache in our process</span></div>
<div class="line"><span class="lineno">  308</span>   <span class="keyword">struct </span>stat st;</div>
<div class="line"><span class="lineno">  309</span>   <span class="keywordflow">if</span>(fstat(<a class="code hl_variable" href="#aaee1ae29b4dc9f8f3cb0b86f32998dc4">_cache_fd</a>, &amp;st))</div>
<div class="line"><span class="lineno">  310</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  311</span>   <span class="keywordtype">char</span>* code_mapping = (<span class="keywordtype">char</span>*)mmap(<span class="keyword">nullptr</span>, st.st_size, PROT_READ|PROT_WRITE, MAP_SHARED, <a class="code hl_variable" href="#aaee1ae29b4dc9f8f3cb0b86f32998dc4">_cache_fd</a>, 0);</div>
<div class="line"><span class="lineno">  312</span>   <span class="keywordflow">if</span>(code_mapping == MAP_FAILED)</div>
<div class="line"><span class="lineno">  313</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  314</span> </div>
<div class="line"><span class="lineno">  315</span>   <a class="code hl_typedef" href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">allocator_t</a>* <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a> = <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_typedef" href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">allocator_t</a>*<span class="keyword">&gt;</span>(code_mapping);</div>
<div class="line"><span class="lineno">  316</span> </div>
<div class="line"><span class="lineno">  317</span>   <span class="comment">//serialize out the cache index</span></div>
<div class="line"><span class="lineno">  318</span>   <a class="code hl_class" href="classfc_1_1datastream.html">fc::datastream&lt;size_t&gt;</a> dssz;</div>
<div class="line"><span class="lineno">  319</span>   <a class="code hl_function" href="#a06095b550460307a8e11b2b8a1083230">serialize_cache_index</a>(dssz);</div>
<div class="line"><span class="lineno">  320</span>   <span class="keywordtype">size_t</span> sz = dssz.tellp();</div>
<div class="line"><span class="lineno">  321</span> </div>
<div class="line"><span class="lineno">  322</span>   <span class="keywordtype">char</span>* <a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  323</span>   <span class="keywordflow">while</span>(<a class="code hl_variable" href="#adb969be895a25820aa4e599304dfa252">_cache_index</a>.size()) {</div>
<div class="line"><span class="lineno">  324</span>      <a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a> = (<span class="keywordtype">char</span>*)<a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;allocate(sz);</div>
<div class="line"><span class="lineno">  325</span>      <span class="keywordflow">if</span>(<a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a> != <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno">  326</span>         <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  327</span>      <span class="comment">//in theory, there could be too little free space avaiable to store the cache index</span></div>
<div class="line"><span class="lineno">  328</span>      <span class="comment">//try to free up some space</span></div>
<div class="line"><span class="lineno">  329</span>      <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 25 &amp;&amp; <a class="code hl_variable" href="#adb969be895a25820aa4e599304dfa252">_cache_index</a>.size(); ++i) {</div>
<div class="line"><span class="lineno">  330</span>         <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;deallocate(code_mapping + <a class="code hl_variable" href="#adb969be895a25820aa4e599304dfa252">_cache_index</a>.back().code_begin);</div>
<div class="line"><span class="lineno">  331</span>         <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;deallocate(code_mapping + <a class="code hl_variable" href="#adb969be895a25820aa4e599304dfa252">_cache_index</a>.back().initdata_begin);</div>
<div class="line"><span class="lineno">  332</span>         <a class="code hl_variable" href="#adb969be895a25820aa4e599304dfa252">_cache_index</a>.pop_back();</div>
<div class="line"><span class="lineno">  333</span>      }</div>
<div class="line"><span class="lineno">  334</span>   }</div>
<div class="line"><span class="lineno">  335</span> </div>
<div class="line"><span class="lineno">  336</span>   <span class="keywordflow">if</span>(<a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a>) {</div>
<div class="line"><span class="lineno">  337</span>      <a class="code hl_class" href="classfc_1_1datastream.html">fc::datastream&lt;char*&gt;</a> <a class="code hl_function" href="namespace_xbyak_1_1util.html#a4b2aef26182d21706896022467868f7c">ds</a>(<a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a>, sz);</div>
<div class="line"><span class="lineno">  338</span>      <a class="code hl_function" href="#a06095b550460307a8e11b2b8a1083230">serialize_cache_index</a>(ds);</div>
<div class="line"><span class="lineno">  339</span> </div>
<div class="line"><span class="lineno">  340</span>      <a class="code hl_typedef" href="stdint_8h.html#a31b85deecb45924320becd11d3ee16ce">uintptr_t</a> ptr_offset = <a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a>-code_mapping;</div>
<div class="line"><span class="lineno">  341</span>      *((<a class="code hl_typedef" href="stdint_8h.html#a31b85deecb45924320becd11d3ee16ce">uintptr_t</a>*)(code_mapping+descriptor_ptr_from_file_start)) = ptr_offset;</div>
<div class="line"><span class="lineno">  342</span>   }</div>
<div class="line"><span class="lineno">  343</span>   <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  344</span>      *((<a class="code hl_typedef" href="stdint_8h.html#a31b85deecb45924320becd11d3ee16ce">uintptr_t</a>*)(code_mapping+descriptor_ptr_from_file_start)) = 0;</div>
<div class="line"><span class="lineno">  345</span> </div>
<div class="line"><span class="lineno">  346</span>   msync(code_mapping, <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;get_size(), MS_SYNC);</div>
<div class="line"><span class="lineno">  347</span>   munmap(code_mapping, <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;get_size());</div>
<div class="line"><span class="lineno">  348</span>   <a class="code hl_function" href="integration_8cpp.html#af5b66d867a040d002fb57d645cae3fb4">close</a>(<a class="code hl_variable" href="#aaee1ae29b4dc9f8f3cb0b86f32998dc4">_cache_fd</a>);</div>
<div class="line"><span class="lineno">  349</span>   <a class="code hl_function" href="#a9933307339971ede770f460277491587">set_on_disk_region_dirty</a>(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span>}</div>
<div class="ttc" id="abn_8cpp_html_a8b0eadcc506862e9d751ab45185053aa"><div class="ttname"><a href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a></div><div class="ttdeci">const mie::Vuint &amp; p</div><div class="ttdef"><b>Definition</b> <a href="bn_8cpp_source.html#l00027">bn.cpp:27</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_a06095b550460307a8e11b2b8a1083230"><div class="ttname"><a href="#a06095b550460307a8e11b2b8a1083230">sysio::chain::eosvmoc::code_cache_base::serialize_cache_index</a></div><div class="ttdeci">void serialize_cache_index(fc::datastream&lt; T &gt; &amp;ds)</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8cpp_source.html#l00299">code_cache.cpp:299</a></div></div>
<div class="ttc" id="aintegration_8cpp_html_af5b66d867a040d002fb57d645cae3fb4"><div class="ttname"><a href="integration_8cpp.html#af5b66d867a040d002fb57d645cae3fb4">close</a></div><div class="ttdeci">void close(T *e, websocketpp::connection_hdl hdl)</div><div class="ttdef"><b>Definition</b> <a href="integration_8cpp_source.html#l00353">integration.cpp:353</a></div></div>
<div class="ttc" id="astdint_8h_html_a31b85deecb45924320becd11d3ee16ce"><div class="ttname"><a href="stdint_8h.html#a31b85deecb45924320becd11d3ee16ce">uintptr_t</a></div><div class="ttdeci">_W64 unsigned int uintptr_t</div><div class="ttdef"><b>Definition</b> <a href="stdint_8h_source.html#l00165">stdint.h:165</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base_ac04c389f3eef6d9860d507ce690a4781_cgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_ac04c389f3eef6d9860d507ce690a4781_cgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_ac04c389f3eef6d9860d507ce690a4781_cgraph" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_ac04c389f3eef6d9860d507ce690a4781_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,184,111"/>
<area shape="rect" href="integration_8cpp.html#af5b66d867a040d002fb57d645cae3fb4" title=" " alt="" coords="301,5,353,31"/>
<area shape="poly" title=" " alt="" coords="183,55,231,41,285,26,287,31,232,46,185,60"/>
<area shape="rect" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a06095b550460307a8e11b2b8a1083230" title=" " alt="" coords="232,56,422,111"/>
<area shape="poly" title=" " alt="" coords="184,81,216,81,216,86,184,86"/>
<area shape="rect" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a9933307339971ede770f460277491587" title=" " alt="" coords="247,136,407,191"/>
<area shape="poly" title=" " alt="" coords="178,109,233,128,231,133,177,114"/>
<area shape="rect" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1" title=" " alt="" coords="470,71,567,96"/>
<area shape="poly" title=" " alt="" coords="422,81,455,81,455,86,422,86"/>
<area shape="poly" title=" " alt="" coords="486,72,480,62,484,52,497,46,519,44,542,47,554,54,552,58,541,52,519,49,499,51,488,56,485,61,491,69"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a249bdb27d2796f53a728b85a2889db44" name="a249bdb27d2796f53a728b85a2889db44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a249bdb27d2796f53a728b85a2889db44">&#9670;&#160;</a></span>check_eviction_threshold()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain::eosvmoc::code_cache_base::check_eviction_threshold </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>free_bytes</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="code__cache_8cpp_source.html#l00380">380</a> of file <a class="el" href="code__cache_8cpp_source.html">code_cache.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  380</span>                                                                {</div>
<div class="line"><span class="lineno">  381</span>   <span class="keywordflow">if</span>(free_bytes &lt; <a class="code hl_variable" href="#aa4b8115d88fae51bcaf70a15bd3db3bc">_free_bytes_eviction_threshold</a>)</div>
<div class="line"><span class="lineno">  382</span>      <a class="code hl_function" href="#a543e8301b86cc0682a715686279dc1c3">run_eviction_round</a>();</div>
<div class="line"><span class="lineno">  383</span>}</div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_a543e8301b86cc0682a715686279dc1c3"><div class="ttname"><a href="#a543e8301b86cc0682a715686279dc1c3">sysio::chain::eosvmoc::code_cache_base::run_eviction_round</a></div><div class="ttdeci">void run_eviction_round()</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8cpp_source.html#l00371">code_cache.cpp:371</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a249bdb27d2796f53a728b85a2889db44_cgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a249bdb27d2796f53a728b85a2889db44_cgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a249bdb27d2796f53a728b85a2889db44_cgraph" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a249bdb27d2796f53a728b85a2889db44_cgraph">
<area shape="rect" title=" " alt="" coords="5,22,183,78"/>
<area shape="rect" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a543e8301b86cc0682a715686279dc1c3" title=" " alt="" coords="231,22,391,78"/>
<area shape="poly" title=" " alt="" coords="183,47,215,47,215,52,183,52"/>
<area shape="rect" href="namespacesysio_1_1chain_1_1eosvmoc.html#a8715d32fd2e6a4a668578ca0d946b58b" title=" " alt="" coords="439,29,612,70"/>
<area shape="poly" title=" " alt="" coords="391,47,423,47,423,52,391,52"/>
<area shape="poly" title=" " alt="" coords="485,29,483,19,490,10,504,5,526,3,549,5,563,11,561,16,548,10,526,8,505,10,493,15,488,20,490,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a249bdb27d2796f53a728b85a2889db44_icgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a249bdb27d2796f53a728b85a2889db44_icgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a249bdb27d2796f53a728b85a2889db44_icgraph" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a249bdb27d2796f53a728b85a2889db44_icgraph">
<area shape="rect" title=" " alt="" coords="496,45,673,101"/>
<area shape="rect" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__async.html#ae6565ec4ecff75fbdbf99ab37604c2b0" title=" " alt="" coords="276,5,443,61"/>
<area shape="poly" title=" " alt="" coords="481,57,443,51,444,45,482,52"/>
<area shape="rect" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__sync.html#ab6cb5ce5742de26979b108d2e5d908db" title=" " alt="" coords="271,85,448,141"/>
<area shape="poly" title=" " alt="" coords="482,94,449,100,448,95,481,89"/>
<area shape="rect" href="classsysio_1_1chain_1_1webassembly_1_1eosvmoc_1_1eosvmoc__instantiated__module.html#a4832906addea3310a04753ee52792b21" title=" " alt="" coords="5,85,223,141"/>
<area shape="poly" title=" " alt="" coords="255,116,223,116,223,110,255,110"/>
</map>
</div>

</div>
</div>
<a id="ad77b7e524be52fdfab8d5faef376b4db" name="ad77b7e524be52fdfab8d5faef376b4db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad77b7e524be52fdfab8d5faef376b4db">&#9670;&#160;</a></span>fd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int &amp; sysio::chain::eosvmoc::code_cache_base::fd </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="code__cache_8hpp_source.html#l00044">44</a> of file <a class="el" href="code__cache_8hpp_source.html">code_cache.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   44</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="#aaee1ae29b4dc9f8f3cb0b86f32998dc4">_cache_fd</a>; }</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base_ad77b7e524be52fdfab8d5faef376b4db_icgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_ad77b7e524be52fdfab8d5faef376b4db_icgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_ad77b7e524be52fdfab8d5faef376b4db_icgraph" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_ad77b7e524be52fdfab8d5faef376b4db_icgraph">
<area shape="rect" title=" " alt="" coords="206,5,359,46"/>
<area shape="rect" href="classsysio_1_1chain_1_1eosvmoc_1_1executor.html#a7775dd291ec388bee1237d0005238516" title=" " alt="" coords="5,5,158,46"/>
<area shape="poly" title=" " alt="" coords="190,28,158,28,158,23,190,23"/>
</map>
</div>

</div>
</div>
<a id="a898c78da95cb62a1fc2fbdb197f2836d" name="a898c78da95cb62a1fc2fbdb197f2836d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a898c78da95cb62a1fc2fbdb197f2836d">&#9670;&#160;</a></span>free_code()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain::eosvmoc::code_cache_base::free_code </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#a357fd9478475457e5bb386a3143079b6">digest_type</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>code_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>vm_version</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="code__cache_8cpp_source.html#l00353">353</a> of file <a class="el" href="code__cache_8cpp_source.html">code_cache.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  353</span>                                                                                     {</div>
<div class="line"><span class="lineno">  354</span>   code_cache_index::index&lt;by_hash&gt;::type::iterator it = <a class="code hl_variable" href="#adb969be895a25820aa4e599304dfa252">_cache_index</a>.get&lt;by_hash&gt;().<a class="code hl_function" href="namespace_intrinsics.html#a7b30616029cc015f330ebf338c3fb454">find</a>(boost::make_tuple(code_id, vm_version));</div>
<div class="line"><span class="lineno">  355</span>   <span class="keywordflow">if</span>(it != <a class="code hl_variable" href="#adb969be895a25820aa4e599304dfa252">_cache_index</a>.get&lt;by_hash&gt;().end()) {</div>
<div class="line"><span class="lineno">  356</span>      <a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc.html#a8715d32fd2e6a4a668578ca0d946b58b">write_message_with_fds</a>(<a class="code hl_variable" href="#a1ea07bb510f7b82ecfb324bca6225728">_compile_monitor_write_socket</a>, evict_wasms_message{ {*it} });</div>
<div class="line"><span class="lineno">  357</span>      <a class="code hl_variable" href="#adb969be895a25820aa4e599304dfa252">_cache_index</a>.get&lt;by_hash&gt;().erase(it);</div>
<div class="line"><span class="lineno">  358</span>   }</div>
<div class="line"><span class="lineno">  359</span> </div>
<div class="line"><span class="lineno">  360</span>   <span class="comment">//if it&#39;s in the queued list, erase it</span></div>
<div class="line"><span class="lineno">  361</span>   <a class="code hl_variable" href="#a44c50f4deb837180fa47026465c55d8a">_queued_compiles</a>.erase({code_id, vm_version});</div>
<div class="line"><span class="lineno">  362</span> </div>
<div class="line"><span class="lineno">  363</span>   <span class="comment">//however, if it&#39;s currently being compiled there is no way to cancel the compile,</span></div>
<div class="line"><span class="lineno">  364</span>   <span class="comment">//so instead set a poison boolean that indicates not to insert the code in to the cache</span></div>
<div class="line"><span class="lineno">  365</span>   <span class="comment">//once the compile is complete</span></div>
<div class="line"><span class="lineno">  366</span>   <span class="keyword">const</span> std::unordered_map&lt;code_tuple, bool&gt;::iterator compiling_it = <a class="code hl_variable" href="#a6f9d3065fa9328cb776d6c68b0c9ef1f">_outstanding_compiles_and_poison</a>.find({code_id, vm_version});</div>
<div class="line"><span class="lineno">  367</span>   <span class="keywordflow">if</span>(compiling_it != <a class="code hl_variable" href="#a6f9d3065fa9328cb776d6c68b0c9ef1f">_outstanding_compiles_and_poison</a>.end())</div>
<div class="line"><span class="lineno">  368</span>      compiling_it-&gt;second = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  369</span>}</div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_a44c50f4deb837180fa47026465c55d8a"><div class="ttname"><a href="#a44c50f4deb837180fa47026465c55d8a">sysio::chain::eosvmoc::code_cache_base::_queued_compiles</a></div><div class="ttdeci">std::unordered_set&lt; code_tuple &gt; _queued_compiles</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00076">code_cache.hpp:76</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_a6f9d3065fa9328cb776d6c68b0c9ef1f"><div class="ttname"><a href="#a6f9d3065fa9328cb776d6c68b0c9ef1f">sysio::chain::eosvmoc::code_cache_base::_outstanding_compiles_and_poison</a></div><div class="ttdeci">std::unordered_map&lt; code_tuple, bool &gt; _outstanding_compiles_and_poison</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00077">code_cache.hpp:77</a></div></div>
<div class="ttc" id="anamespace_intrinsics_html_a7b30616029cc015f330ebf338c3fb454"><div class="ttname"><a href="namespace_intrinsics.html#a7b30616029cc015f330ebf338c3fb454">Intrinsics::find</a></div><div class="ttdeci">RUNTIME_API Runtime::ObjectInstance * find(const std::string &amp;name, const IR::ObjectType &amp;type)</div><div class="ttdef"><b>Definition</b> <a href="_intrinsics_8cpp_source.html#l00048">Intrinsics.cpp:48</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1eosvmoc_html_a8715d32fd2e6a4a668578ca0d946b58b"><div class="ttname"><a href="namespacesysio_1_1chain_1_1eosvmoc.html#a8715d32fd2e6a4a668578ca0d946b58b">sysio::chain::eosvmoc::write_message_with_fds</a></div><div class="ttdeci">bool write_message_with_fds(boost::asio::local::datagram_protocol::socket &amp;s, const eosvmoc_message &amp;message, const std::vector&lt; wrapped_fd &gt; &amp;fds=std::vector&lt; wrapped_fd &gt;())</div><div class="ttdef"><b>Definition</b> <a href="ipc__helpers_8cpp_source.html#l00064">ipc_helpers.cpp:64</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a898c78da95cb62a1fc2fbdb197f2836d_cgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a898c78da95cb62a1fc2fbdb197f2836d_cgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a898c78da95cb62a1fc2fbdb197f2836d_cgraph" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a898c78da95cb62a1fc2fbdb197f2836d_cgraph">
<area shape="rect" title=" " alt="" coords="5,29,205,70"/>
<area shape="rect" href="namespacesysio_1_1chain_1_1eosvmoc.html#a8715d32fd2e6a4a668578ca0d946b58b" title=" " alt="" coords="253,29,426,70"/>
<area shape="poly" title=" " alt="" coords="205,47,237,47,237,52,205,52"/>
<area shape="poly" title=" " alt="" coords="295,29,293,19,300,10,316,5,339,3,365,5,380,11,378,16,363,10,339,8,317,10,303,15,298,21,300,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a898c78da95cb62a1fc2fbdb197f2836d_icgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a898c78da95cb62a1fc2fbdb197f2836d_icgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a898c78da95cb62a1fc2fbdb197f2836d_icgraph" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a898c78da95cb62a1fc2fbdb197f2836d_icgraph">
<area shape="rect" title=" " alt="" coords="316,13,515,54"/>
<area shape="rect" href="classsysio_1_1chain_1_1webassembly_1_1eosvmoc_1_1eosvmoc__instantiated__module.html#a424133e42f187fe4e6b2ae1537513c7d" title=" " alt="" coords="5,5,268,61"/>
<area shape="poly" title=" " alt="" coords="300,36,268,36,268,30,300,30"/>
</map>
</div>

</div>
</div>
<a id="a543e8301b86cc0682a715686279dc1c3" name="a543e8301b86cc0682a715686279dc1c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a543e8301b86cc0682a715686279dc1c3">&#9670;&#160;</a></span>run_eviction_round()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain::eosvmoc::code_cache_base::run_eviction_round </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="code__cache_8cpp_source.html#l00371">371</a> of file <a class="el" href="code__cache_8cpp_source.html">code_cache.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  371</span>                                         {</div>
<div class="line"><span class="lineno">  372</span>   evict_wasms_message evict_msg;</div>
<div class="line"><span class="lineno">  373</span>   <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 25 &amp;&amp; <a class="code hl_variable" href="#adb969be895a25820aa4e599304dfa252">_cache_index</a>.size() &gt; 1; ++i) {</div>
<div class="line"><span class="lineno">  374</span>      evict_msg.codes.emplace_back(<a class="code hl_variable" href="#adb969be895a25820aa4e599304dfa252">_cache_index</a>.back());</div>
<div class="line"><span class="lineno">  375</span>      <a class="code hl_variable" href="#adb969be895a25820aa4e599304dfa252">_cache_index</a>.pop_back();</div>
<div class="line"><span class="lineno">  376</span>   }</div>
<div class="line"><span class="lineno">  377</span>   <a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc.html#a8715d32fd2e6a4a668578ca0d946b58b">write_message_with_fds</a>(<a class="code hl_variable" href="#a1ea07bb510f7b82ecfb324bca6225728">_compile_monitor_write_socket</a>, evict_msg);</div>
<div class="line"><span class="lineno">  378</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a543e8301b86cc0682a715686279dc1c3_cgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a543e8301b86cc0682a715686279dc1c3_cgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a543e8301b86cc0682a715686279dc1c3_cgraph" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a543e8301b86cc0682a715686279dc1c3_cgraph">
<area shape="rect" title=" " alt="" coords="5,22,166,78"/>
<area shape="rect" href="namespacesysio_1_1chain_1_1eosvmoc.html#a8715d32fd2e6a4a668578ca0d946b58b" title=" " alt="" coords="214,29,387,70"/>
<area shape="poly" title=" " alt="" coords="166,47,198,47,198,52,166,52"/>
<area shape="poly" title=" " alt="" coords="260,29,258,19,264,10,279,5,300,3,324,5,337,11,335,16,322,10,300,8,280,10,268,15,263,20,265,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a543e8301b86cc0682a715686279dc1c3_icgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a543e8301b86cc0682a715686279dc1c3_icgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a543e8301b86cc0682a715686279dc1c3_icgraph" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a543e8301b86cc0682a715686279dc1c3_icgraph">
<area shape="rect" title=" " alt="" coords="721,45,882,101"/>
<area shape="rect" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a249bdb27d2796f53a728b85a2889db44" title=" " alt="" coords="496,45,673,101"/>
<area shape="poly" title=" " alt="" coords="706,76,674,76,674,70,706,70"/>
<area shape="rect" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__async.html#ae6565ec4ecff75fbdbf99ab37604c2b0" title=" " alt="" coords="276,5,443,61"/>
<area shape="poly" title=" " alt="" coords="481,57,443,51,444,45,482,52"/>
<area shape="rect" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__sync.html#ab6cb5ce5742de26979b108d2e5d908db" title=" " alt="" coords="271,85,448,141"/>
<area shape="poly" title=" " alt="" coords="482,94,449,100,448,95,481,89"/>
<area shape="rect" href="classsysio_1_1chain_1_1webassembly_1_1eosvmoc_1_1eosvmoc__instantiated__module.html#a4832906addea3310a04753ee52792b21" title=" " alt="" coords="5,85,223,141"/>
<area shape="poly" title=" " alt="" coords="255,116,223,116,223,110,255,110"/>
</map>
</div>

</div>
</div>
<a id="a06095b550460307a8e11b2b8a1083230" name="a06095b550460307a8e11b2b8a1083230"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06095b550460307a8e11b2b8a1083230">&#9670;&#160;</a></span>serialize_cache_index()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename <a class="el" href="prettywritertest_8cpp.html#a6283df8c4e365cc8a01727e2d7ad44bf">T</a> &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain::eosvmoc::code_cache_base::serialize_cache_index </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfc_1_1datastream.html">fc::datastream</a>&lt; <a class="el" href="prettywritertest_8cpp.html#a6283df8c4e365cc8a01727e2d7ad44bf">T</a> &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>ds</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="code__cache_8cpp_source.html#l00299">299</a> of file <a class="el" href="code__cache_8cpp_source.html">code_cache.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  299</span>                                                               {</div>
<div class="line"><span class="lineno">  300</span>   <span class="keywordtype">unsigned</span> entries = <a class="code hl_variable" href="#adb969be895a25820aa4e599304dfa252">_cache_index</a>.size();</div>
<div class="line"><span class="lineno">  301</span>   <a class="code hl_function" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a>(ds, entries);</div>
<div class="line"><span class="lineno">  302</span>   <span class="keywordflow">for</span>(<span class="keyword">const</span> code_descriptor&amp; cd : <a class="code hl_variable" href="#adb969be895a25820aa4e599304dfa252">_cache_index</a>)</div>
<div class="line"><span class="lineno">  303</span>      <a class="code hl_function" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a>(ds, cd);</div>
<div class="line"><span class="lineno">  304</span>}</div>
<div class="ttc" id="anamespacefc_1_1raw_html_a3a18d8161aa5b4f4f02b6fcfdff5e5d1"><div class="ttname"><a href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a></div><div class="ttdeci">void pack(Stream &amp;s, const std::deque&lt; T &gt; &amp;value)</div><div class="ttdef"><b>Definition</b> <a href="raw_8hpp_source.html#l00531">raw.hpp:531</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a06095b550460307a8e11b2b8a1083230_cgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a06095b550460307a8e11b2b8a1083230_cgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a06095b550460307a8e11b2b8a1083230_cgraph" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a06095b550460307a8e11b2b8a1083230_cgraph">
<area shape="rect" title=" " alt="" coords="5,14,196,70"/>
<area shape="rect" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1" title=" " alt="" coords="244,29,341,55"/>
<area shape="poly" title=" " alt="" coords="196,40,228,40,228,45,196,45"/>
<area shape="poly" title=" " alt="" coords="260,30,254,21,258,11,271,5,292,3,316,5,328,12,325,17,314,10,292,8,272,10,261,15,259,20,265,27"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a06095b550460307a8e11b2b8a1083230_icgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a06095b550460307a8e11b2b8a1083230_icgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a06095b550460307a8e11b2b8a1083230_icgraph" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a06095b550460307a8e11b2b8a1083230_icgraph">
<area shape="rect" title=" " alt="" coords="232,5,422,61"/>
<area shape="rect" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#ac04c389f3eef6d9860d507ce690a4781" title=" " alt="" coords="5,5,184,61"/>
<area shape="poly" title=" " alt="" coords="216,36,184,36,184,30,216,30"/>
</map>
</div>

</div>
</div>
<a id="a9933307339971ede770f460277491587" name="a9933307339971ede770f460277491587"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9933307339971ede770f460277491587">&#9670;&#160;</a></span>set_on_disk_region_dirty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain::eosvmoc::code_cache_base::set_on_disk_region_dirty </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>dirty</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="code__cache_8cpp_source.html#l00289">289</a> of file <a class="el" href="code__cache_8cpp_source.html">code_cache.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  289</span>                                                         {</div>
<div class="line"><span class="lineno">  290</span>   bip::file_mapping dirty_mapping(<a class="code hl_variable" href="#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>.generic_string().c_str(), bip::read_write);</div>
<div class="line"><span class="lineno">  291</span>   bip::mapped_region dirty_region(dirty_mapping, bip::read_write);</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>   *((<span class="keywordtype">char</span>*)dirty_region.get_address()+header_dirty_bit_offset_from_file_start) = <a class="code hl_variable" href="code__cache_8cpp.html#ad25edacba00e4d0666a9959053b7cc10">dirty</a>;</div>
<div class="line"><span class="lineno">  294</span>   <span class="keywordflow">if</span>(dirty_region.flush(0, 0, <span class="keyword">false</span>) == <span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  295</span>      <a class="code hl_define" href="logger_8hpp.html#a9e3cdbaecd5a34b42956e888f7326fad">elog</a>(<span class="stringliteral">&quot;Syncing code cache failed&quot;</span>);</div>
<div class="line"><span class="lineno">  296</span>}</div>
<div class="ttc" id="acode__cache_8cpp_html_ad25edacba00e4d0666a9959053b7cc10"><div class="ttname"><a href="code__cache_8cpp.html#ad25edacba00e4d0666a9959053b7cc10">dirty</a></div><div class="ttdeci">bool dirty</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8cpp_source.html#l00001">code_cache.cpp:1</a></div></div>
<div class="ttc" id="alogger_8hpp_html_a9e3cdbaecd5a34b42956e888f7326fad"><div class="ttname"><a href="logger_8hpp.html#a9e3cdbaecd5a34b42956e888f7326fad">elog</a></div><div class="ttdeci">#define elog(FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="logger_8hpp_source.html#l00130">logger.hpp:130</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a9933307339971ede770f460277491587_icgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a9933307339971ede770f460277491587_icgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a9933307339971ede770f460277491587_icgraph" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_a9933307339971ede770f460277491587_icgraph">
<area shape="rect" title=" " alt="" coords="232,45,392,101"/>
<area shape="rect" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#ab31065b1fab5b6d5910d1cae71bb15cf" title=" " alt="" coords="9,5,180,61"/>
<area shape="poly" title=" " alt="" coords="216,58,180,52,181,46,217,53"/>
<area shape="rect" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#ac04c389f3eef6d9860d507ce690a4781" title=" " alt="" coords="5,85,184,141"/>
<area shape="poly" title=" " alt="" coords="217,93,185,99,184,94,216,88"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aaee1ae29b4dc9f8f3cb0b86f32998dc4" name="aaee1ae29b4dc9f8f3cb0b86f32998dc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaee1ae29b4dc9f8f3cb0b86f32998dc4">&#9670;&#160;</a></span>_cache_fd</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int sysio::chain::eosvmoc::code_cache_base::_cache_fd</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="code__cache_8hpp_source.html#l00068">68</a> of file <a class="el" href="code__cache_8hpp_source.html">code_cache.hpp</a>.</p>

</div>
</div>
<a id="abbf29e52e658f8089958c93ae87402ac" name="abbf29e52e658f8089958c93ae87402ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbf29e52e658f8089958c93ae87402ac">&#9670;&#160;</a></span>_cache_file_path</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bfs::path sysio::chain::eosvmoc::code_cache_base::_cache_file_path</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="code__cache_8hpp_source.html#l00067">67</a> of file <a class="el" href="code__cache_8hpp_source.html">code_cache.hpp</a>.</p>

</div>
</div>
<a id="adb969be895a25820aa4e599304dfa252" name="adb969be895a25820aa4e599304dfa252"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb969be895a25820aa4e599304dfa252">&#9670;&#160;</a></span>_cache_index</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a30f70ce315e8da4166face9c8b4ea5e5">code_cache_index</a> sysio::chain::eosvmoc::code_cache_base::_cache_index</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="code__cache_8hpp_source.html#l00063">63</a> of file <a class="el" href="code__cache_8hpp_source.html">code_cache.hpp</a>.</p>

</div>
</div>
<a id="a3422663ea869e784bf6b6e72cb43f96b" name="a3422663ea869e784bf6b6e72cb43f96b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3422663ea869e784bf6b6e72cb43f96b">&#9670;&#160;</a></span>_compile_monitor_read_socket</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">local::datagram_protocol::socket sysio::chain::eosvmoc::code_cache_base::_compile_monitor_read_socket {<a class="el" href="#acccb3fc4fe49eb154ea915ee8b350f70">_ctx</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="code__cache_8hpp_source.html#l00072">72</a> of file <a class="el" href="code__cache_8hpp_source.html">code_cache.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   72</span>{<a class="code hl_variable" href="#acccb3fc4fe49eb154ea915ee8b350f70">_ctx</a>};</div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_acccb3fc4fe49eb154ea915ee8b350f70"><div class="ttname"><a href="#acccb3fc4fe49eb154ea915ee8b350f70">sysio::chain::eosvmoc::code_cache_base::_ctx</a></div><div class="ttdeci">io_context _ctx</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00070">code_cache.hpp:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1ea07bb510f7b82ecfb324bca6225728" name="a1ea07bb510f7b82ecfb324bca6225728"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ea07bb510f7b82ecfb324bca6225728">&#9670;&#160;</a></span>_compile_monitor_write_socket</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">local::datagram_protocol::socket sysio::chain::eosvmoc::code_cache_base::_compile_monitor_write_socket {<a class="el" href="#acccb3fc4fe49eb154ea915ee8b350f70">_ctx</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="code__cache_8hpp_source.html#l00071">71</a> of file <a class="el" href="code__cache_8hpp_source.html">code_cache.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   71</span>{<a class="code hl_variable" href="#acccb3fc4fe49eb154ea915ee8b350f70">_ctx</a>};</div>
</div><!-- fragment -->
</div>
</div>
<a id="acccb3fc4fe49eb154ea915ee8b350f70" name="acccb3fc4fe49eb154ea915ee8b350f70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acccb3fc4fe49eb154ea915ee8b350f70">&#9670;&#160;</a></span>_ctx</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">io_context sysio::chain::eosvmoc::code_cache_base::_ctx</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="code__cache_8hpp_source.html#l00070">70</a> of file <a class="el" href="code__cache_8hpp_source.html">code_cache.hpp</a>.</p>

</div>
</div>
<a id="ad7e0e5b63b94e48e35baacc15644b0b7" name="ad7e0e5b63b94e48e35baacc15644b0b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7e0e5b63b94e48e35baacc15644b0b7">&#9670;&#160;</a></span>_db</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classchainbase_1_1database.html">chainbase::database</a>&amp; sysio::chain::eosvmoc::code_cache_base::_db</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="code__cache_8hpp_source.html#l00065">65</a> of file <a class="el" href="code__cache_8hpp_source.html">code_cache.hpp</a>.</p>

</div>
</div>
<a id="aa4b8115d88fae51bcaf70a15bd3db3bc" name="aa4b8115d88fae51bcaf70a15bd3db3bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4b8115d88fae51bcaf70a15bd3db3bc">&#9670;&#160;</a></span>_free_bytes_eviction_threshold</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t sysio::chain::eosvmoc::code_cache_base::_free_bytes_eviction_threshold</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="code__cache_8hpp_source.html#l00079">79</a> of file <a class="el" href="code__cache_8hpp_source.html">code_cache.hpp</a>.</p>

</div>
</div>
<a id="a6f9d3065fa9328cb776d6c68b0c9ef1f" name="a6f9d3065fa9328cb776d6c68b0c9ef1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f9d3065fa9328cb776d6c68b0c9ef1f">&#9670;&#160;</a></span>_outstanding_compiles_and_poison</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__tuple.html">code_tuple</a>, bool&gt; sysio::chain::eosvmoc::code_cache_base::_outstanding_compiles_and_poison</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="code__cache_8hpp_source.html#l00077">77</a> of file <a class="el" href="code__cache_8hpp_source.html">code_cache.hpp</a>.</p>

</div>
</div>
<a id="a44c50f4deb837180fa47026465c55d8a" name="a44c50f4deb837180fa47026465c55d8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44c50f4deb837180fa47026465c55d8a">&#9670;&#160;</a></span>_queued_compiles</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_set&lt;<a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__tuple.html">code_tuple</a>&gt; sysio::chain::eosvmoc::code_cache_base::_queued_compiles</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="code__cache_8hpp_source.html#l00076">76</a> of file <a class="el" href="code__cache_8hpp_source.html">code_cache.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>libraries/chain/include/sysio/chain/webassembly/sys-vm-oc/<a class="el" href="code__cache_8hpp_source.html">code_cache.hpp</a></li>
<li>libraries/chain/webassembly/runtimes/sys-vm-oc/<a class="el" href="code__cache_8cpp_source.html">code_cache.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacesysio.html">sysio</a></li><li class="navelem"><a class="el" href="namespacesysio_1_1chain.html">chain</a></li><li class="navelem"><a class="el" href="namespacesysio_1_1chain_1_1eosvmoc.html">eosvmoc</a></li><li class="navelem"><a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html">code_cache_base</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
