\doxysection{request\+\_\+handler.\+cpp}
\hypertarget{request__handler_8cpp_source}{}\label{request__handler_8cpp_source}\index{plugins/trace\_api\_plugin/request\_handler.cpp@{plugins/trace\_api\_plugin/request\_handler.cpp}}
\mbox{\hyperlink{request__handler_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00001}00001\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{request__handler_8hpp}{sysio/trace\_api/request\_handler.hpp}}>}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00003}00003\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00005}00005\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{variant__object_8hpp}{fc/variant\_object.hpp}}>}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00006}00006\ }
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00007}00007\ \textcolor{keyword}{namespace\ }\{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00008}00008\ \ \ \ \textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespacesysio_1_1trace__api}{sysio::trace\_api}};}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00009}00009\ }
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00010}00010\ \ \ \ std::string\ to\_iso8601\_datetime(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classfc_1_1time__point}{fc::time\_point}}\&\ t)\ \{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00011}00011\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (std::string)t\ +\ \textcolor{stringliteral}{"{}Z"{}};}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00012}00012\ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00014}00014\ \ \ \ \mbox{\hyperlink{namespacefc_a9148361f6aaa3d739990a75ac557fe59}{fc::variants}}\ process\_authorizations(\textcolor{keyword}{const}\ std::vector<authorization\_trace\_v0>\&\ authorizations,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classfc_1_1optional__delegate}{yield\_function}}\&\ yield\ )\ \{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00015}00015\ \ \ \ \ \ \ \mbox{\hyperlink{namespacefc_a9148361f6aaa3d739990a75ac557fe59}{fc::variants}}\ result;}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00016}00016\ \ \ \ \ \ \ result.reserve(authorizations.size());}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00017}00017\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}:\ authorizations)\ \{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00018}00018\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceboost_1_1fibers_1_1asio_a65142b77539b20ba6d2abb35a0d4f5d2}{yield}}();}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00019}00019\ }
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00020}00020\ \ \ \ \ \ \ \ \ \ result.emplace\_back(\mbox{\hyperlink{classfc_1_1mutable__variant__object}{fc::mutable\_variant\_object}}()}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00021}00021\ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}account"{}},\ \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.account.to\_string())}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00022}00022\ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}permission"{}},\ \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.permission.to\_string())}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00023}00023\ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00024}00024\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00025}00025\ }
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00026}00026\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00028}00028\ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00029}00029\ }
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00030}00030\ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ ActionTrace>}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00031}00031\ \ \ \ \mbox{\hyperlink{namespacefc_a9148361f6aaa3d739990a75ac557fe59}{fc::variants}}\ process\_actions(\textcolor{keyword}{const}\ std::vector<ActionTrace>\&\ actions,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_1_1trace__api_ae306675da343477bc1ebdf6512c76066}{data\_handler\_function}}\ \&\ data\_handler,\ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classfc_1_1optional__delegate}{yield\_function}}\&\ yield\ )\ \{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00032}00032\ \ \ \ \ \ \ \mbox{\hyperlink{namespacefc_a9148361f6aaa3d739990a75ac557fe59}{fc::variants}}\ result;}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00033}00033\ \ \ \ \ \ \ result.reserve(actions.size());}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00034}00034\ \ \ \ \ \ \ \textcolor{comment}{//\ create\ a\ vector\ of\ indices\ to\ sort\ based\ on\ actions\ to\ avoid\ copies}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00035}00035\ \ \ \ \ \ \ std::vector<int>\ indices(actions.size());}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00036}00036\ \ \ \ \ \ \ std::iota(indices.begin(),\ indices.end(),\ 0);}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00037}00037\ \ \ \ \ \ \ std::sort(indices.begin(),\ indices.end(),\ [\&actions](\textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\&\ lhs,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\&\ rhs)\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00038}00038\ \ \ \ \ \ \ \ \ \ return\ actions.at(lhs).global\_sequence\ <\ actions.at(rhs).global\_sequence;}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00039}00039\ \ \ \ \ \ \ \});}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00040}00040\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keywordtype}{int}\ index\ :\ indices)\ \{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00041}00041\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceboost_1_1fibers_1_1asio_a65142b77539b20ba6d2abb35a0d4f5d2}{yield}}();}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00043}00043\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}\ =\ actions.at(index);}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00044}00044\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ common\_mvo\ =\ \mbox{\hyperlink{classfc_1_1mutable__variant__object}{fc::mutable\_variant\_object}}();}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00045}00045\ }
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00046}00046\ \ \ \ \ \ \ \ \ \ common\_mvo(\textcolor{stringliteral}{"{}global\_sequence"{}},\ \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.global\_sequence)}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00047}00047\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}receiver"{}},\ \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.receiver.to\_string())}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00048}00048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}account"{}},\ \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.account.to\_string())}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00049}00049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}action"{}},\ \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.action.to\_string())}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00050}00050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}authorization"{}},\ process\_authorizations(\mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.authorization,\ yield))}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00051}00051\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}data"{}},\ \mbox{\hyperlink{namespacefc_aab567c89004d329f560014d9943afcd6}{fc::to\_hex}}(\mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.data.data(),\ \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.data.size()));}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00052}00052\ }
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00053}00053\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ action\_variant\ =\ \mbox{\hyperlink{classfc_1_1mutable__variant__object}{fc::mutable\_variant\_object}}();}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00054}00054\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}(std::is\_same\_v<ActionTrace,\ action\_trace\_v0>)\{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00055}00055\ \ \ \ \ \ \ \ \ \ \ \ \ action\_variant(std::move(common\_mvo));}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00056}00056\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ [\mbox{\hyperlink{test__account__query__db_8cpp_aedc91aab307c8fb7ad822c3e16a6dd73}{params}},\ return\_data]\ =\ data\_handler(\mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}},\ yield);}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00057}00057\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{test__account__query__db_8cpp_aedc91aab307c8fb7ad822c3e16a6dd73}{params}}.is\_null())\ \{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00058}00058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ action\_variant(\textcolor{stringliteral}{"{}params"{}},\ \mbox{\hyperlink{test__account__query__db_8cpp_aedc91aab307c8fb7ad822c3e16a6dd73}{params}});}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00059}00059\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00060}00060\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00061}00061\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}(std::is\_same\_v<ActionTrace,\ action\_trace\_v1>)\{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00062}00062\ \ \ \ \ \ \ \ \ \ \ \ \ action\_variant(std::move(common\_mvo));}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00063}00063\ \ \ \ \ \ \ \ \ \ \ \ \ action\_variant(\textcolor{stringliteral}{"{}return\_value"{}},\ \mbox{\hyperlink{namespacefc_aab567c89004d329f560014d9943afcd6}{fc::to\_hex}}(\mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.return\_value.data(),\mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.return\_value.size()))\ ;}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00064}00064\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ [\mbox{\hyperlink{test__account__query__db_8cpp_aedc91aab307c8fb7ad822c3e16a6dd73}{params}},\ return\_data]\ =\ data\_handler(\mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}},\ yield);}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00065}00065\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{test__account__query__db_8cpp_aedc91aab307c8fb7ad822c3e16a6dd73}{params}}.is\_null())\ \{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00066}00066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ action\_variant(\textcolor{stringliteral}{"{}params"{}},\ \mbox{\hyperlink{test__account__query__db_8cpp_aedc91aab307c8fb7ad822c3e16a6dd73}{params}});}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00067}00067\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00068}00068\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(return\_data.has\_value())\{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00069}00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ action\_variant(\textcolor{stringliteral}{"{}return\_data"{}},\ *return\_data);}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00070}00070\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00071}00071\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00072}00072\ \ \ \ \ \ \ \ \ \ result.emplace\_back(\ std::move(action\_variant)\ );}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00073}00073\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00074}00074\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00075}00075\ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00076}00076\ }
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00077}00077\ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ TransactionTrace>}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00078}00078\ \ \ \ \mbox{\hyperlink{namespacefc_a9148361f6aaa3d739990a75ac557fe59}{fc::variants}}\ process\_transactions(\textcolor{keyword}{const}\ std::vector<TransactionTrace>\&\ transactions,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_1_1trace__api_ae306675da343477bc1ebdf6512c76066}{data\_handler\_function}}\&\ data\_handler,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classfc_1_1optional__delegate}{yield\_function}}\&\ yield\ )\ \{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00079}00079\ \ \ \ \ \ \ \mbox{\hyperlink{namespacefc_a9148361f6aaa3d739990a75ac557fe59}{fc::variants}}\ result;}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00080}00080\ \ \ \ \ \ \ result.reserve(transactions.size());}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00081}00081\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ t:\ transactions)\ \{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00082}00082\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceboost_1_1fibers_1_1asio_a65142b77539b20ba6d2abb35a0d4f5d2}{yield}}();}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00083}00083\ }
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00084}00084\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}(std::is\_same\_v<TransactionTrace,\ transaction\_trace\_v0>)\{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00085}00085\ \ \ \ \ \ \ \ \ \ \ \ \ result.emplace\_back(}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00086}00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1mutable__variant__object}{fc::mutable\_variant\_object}}()}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00087}00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}id"{}},\ t.id.str())}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00088}00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}actions"{}},\ process\_actions<action\_trace\_v0>(t.actions,\ data\_handler,\ yield)));}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00089}00089\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00090}00090\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ common\_mvo\ =\ \mbox{\hyperlink{classfc_1_1mutable__variant__object}{fc::mutable\_variant\_object}}();}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00091}00091\ \ \ \ \ \ \ \ \ \ \ \ \ common\_mvo(\textcolor{stringliteral}{"{}status"{}},\ t.status)}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00092}00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}cpu\_usage\_us"{}},\ t.cpu\_usage\_us)}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00093}00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}net\_usage\_words"{}},\ t.net\_usage\_words)}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00094}00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}signatures"{}},\ t.signatures)}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00095}00095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}transaction\_header"{}},\ t.trx\_header);}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00096}00096\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}(std::is\_same\_v<TransactionTrace,\ transaction\_trace\_v1>)\{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00097}00097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result.emplace\_back(}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00098}00098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1mutable__variant__object}{fc::mutable\_variant\_object}}()}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00099}00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}id"{}},\ t.id.str())}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00100}00100\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}actions"{}},\ process\_actions<action\_trace\_v0>(t.actions,\ data\_handler,\ yield))}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00101}00101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (std::move(common\_mvo)));}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00102}00102\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00103}00103\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}(std::is\_same\_v<TransactionTrace,\ transaction\_trace\_v2>)\{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00104}00104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result.emplace\_back(}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00105}00105\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1mutable__variant__object}{fc::mutable\_variant\_object}}()}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00106}00106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}id"{}},\ t.id.str())}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00107}00107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}actions"{}},\ process\_actions<action\_trace\_v1>(std::get<std::vector<action\_trace\_v1>>(t.actions),\ data\_handler,\ yield))}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00108}00108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (std::move(common\_mvo)));}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00109}00109\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00110}00110\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}(std::is\_same\_v<TransactionTrace,\ transaction\_trace\_v3>)\{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00111}00111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result.emplace\_back(}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00112}00112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1mutable__variant__object}{fc::mutable\_variant\_object}}()}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00113}00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}id"{}},\ t.id.str())}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00114}00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}block\_num"{}},\ t.block\_num)}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00115}00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}block\_time"{}},\ t.block\_time)}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00116}00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}producer\_block\_id"{}},\ t.producer\_block\_id)}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00117}00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}actions"{}},\ process\_actions<action\_trace\_v1>(std::get<std::vector<action\_trace\_v1>>(t.actions),\ data\_handler,\ yield))}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00118}00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (std::move(common\_mvo))}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00119}00119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00120}00120\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00121}00121\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00122}00122\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00123}00123\ }
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00124}00124\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00125}00125\ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00126}00126\ \}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00127}00127\ }
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00128}00128\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacesysio_1_1trace__api_1_1detail}{sysio::trace\_api::detail}}\ \{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00129}\mbox{\hyperlink{classsysio_1_1trace__api_1_1detail_1_1response__formatter_a0d5fa7307ab3dfca56f3892da858ccef}{00129}}\ \ \ \ \ \mbox{\hyperlink{classfc_1_1variant}{fc::variant}}\ \mbox{\hyperlink{classsysio_1_1trace__api_1_1detail_1_1response__formatter_a0d5fa7307ab3dfca56f3892da858ccef}{response\_formatter::process\_block}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_1_1trace__api_a98bdcc53a9d9aa6aff851a743516c3b9}{data\_log\_entry}}\&\ trace,\ \textcolor{keywordtype}{bool}\ irreversible,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_1_1trace__api_ae306675da343477bc1ebdf6512c76066}{data\_handler\_function}}\&\ data\_handler,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classfc_1_1optional__delegate}{yield\_function}}\&\ yield\ )\ \{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00130}00130\ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ common\_mvo\ \ =\ std::visit([\&](\textcolor{keyword}{auto}\&\&\ arg)\ -\/>\ \mbox{\hyperlink{classfc_1_1mutable__variant__object}{fc::mutable\_variant\_object}}\ \{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00131}00131\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classfc_1_1mutable__variant__object}{fc::mutable\_variant\_object}}()}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00132}00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}id"{}},\ arg.id.str())}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00133}00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}number"{}},\ arg.number\ )}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00134}00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}previous\_id"{}},\ arg.previous\_id.str())}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00135}00135\ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}status"{}},\ irreversible\ ?\ \textcolor{stringliteral}{"{}irreversible"{}}\ :\ \textcolor{stringliteral}{"{}pending"{}}\ )}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00136}00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}timestamp"{}},\ to\_iso8601\_datetime(arg.timestamp))}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00137}00137\ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}producer"{}},\ arg.producer.to\_string());\},\ trace);}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00138}00138\ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \ (std::holds\_alternative<block\_trace\_v0>\ (trace))\{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00139}00139\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ block\_trace\ =\ std::get<block\_trace\_v0>(trace);}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00140}00140\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \ \mbox{\hyperlink{classfc_1_1mutable__variant__object}{fc::mutable\_variant\_object}}()}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00141}00141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (std::move(common\_mvo))}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00142}00142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}transactions"{}},\ process\_transactions<transaction\_trace\_v0>(block\_trace.transactions,\ data\_handler,\ yield\ ));}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00143}00143\ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(std::holds\_alternative<block\_trace\_v1>(trace))\{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00144}00144\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ block\_trace\ =\ std::get<block\_trace\_v1>(trace);}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00145}00145\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \ \ \ \mbox{\hyperlink{classfc_1_1mutable__variant__object}{fc::mutable\_variant\_object}}()}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00146}00146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (std::move(common\_mvo))}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00147}00147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}transaction\_mroot"{}},\ block\_trace.transaction\_mroot)}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00148}00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}action\_mroot"{}},\ block\_trace.action\_mroot)}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00149}00149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}schedule\_version"{}},\ block\_trace.schedule\_version)}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00150}00150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}transactions"{}},\ process\_transactions<transaction\_trace\_v1>(\ block\_trace.transactions\_v1,\ data\_handler,\ yield\ ))\ ;}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00151}00151\ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(std::holds\_alternative<block\_trace\_v2>(trace))\{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00152}00152\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ block\_trace\ =\ std::get<block\_trace\_v2>(trace);}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00153}00153\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ transactions\ =\ std::visit([\&](\textcolor{keyword}{auto}\&\&\ arg)\{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00154}00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ process\_transactions(arg,\ data\_handler,\ yield);}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00155}00155\ \ \ \ \ \ \ \ \ \ \ \},\ block\_trace.transactions);}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00156}00156\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \ \ \ \mbox{\hyperlink{classfc_1_1mutable__variant__object}{fc::mutable\_variant\_object}}()}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00157}00157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (std::move(common\_mvo))}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00158}00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}transaction\_mroot"{}},\ block\_trace.transaction\_mroot)}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00159}00159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}action\_mroot"{}},\ block\_trace.action\_mroot)}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00160}00160\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}schedule\_version"{}},\ block\_trace.schedule\_version)}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00161}00161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}transactions"{}},\ transactions)\ ;}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00162}00162\ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00163}00163\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classfc_1_1mutable__variant__object}{fc::mutable\_variant\_object}}();}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00164}00164\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00165}00165\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{request__handler_8cpp_source_l00166}00166\ \}}

\end{DoxyCode}
