\doxysection{argument\+\_\+proxy.\+hpp}
\hypertarget{sysio_2vm_2argument__proxy_8hpp_source}{}\label{sysio_2vm_2argument__proxy_8hpp_source}\index{libraries/sys-\/vm/include/sysio/sysio/vm/argument\_proxy.hpp@{libraries/sys-\/vm/include/sysio/sysio/vm/argument\_proxy.hpp}}
\mbox{\hyperlink{sysio_2vm_2argument__proxy_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00001}00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00003}00003\ \textcolor{preprocessor}{\#include\ <sysio/vm/types.hpp>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00004}00004\ \textcolor{preprocessor}{\#include\ <sysio/vm/span.hpp>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00005}00005\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00006}00006\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00007}00007\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacesysio}{sysio}}\ \{\ \textcolor{keyword}{namespace\ }vm\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00008}00008\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00009}00009\ \ \ \ \textcolor{comment}{//\ Used\ for\ pointer\ arguments\ to\ intrinsics.}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00010}00010\ \ \ \ \textcolor{comment}{//\ T\ should\ be\ a\ type\ that\ points\ to\ external\ memory,\ such\ as\ a\ pointer\ or\ span.}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00011}00011\ \ \ \ \textcolor{comment}{//\ The\ type\ that\ T\ points\ to\ must\ be\ trivially\ copyable.}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00012}00012\ \ \ \ \textcolor{comment}{//\ argument\_proxy\ copies\ unaligned\ memory\ into\ zero\ or\ more\ objects\ of\ the\ pointee\ type.}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00013}00013\ \ \ \ \textcolor{comment}{//\ If\ LegacyAlign\ is\ non-\/zero\ it\ will\ only\ copy\ the\ memory\ if\ it\ is\ not\ aligned\ to\ LegacyAlign.}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00014}00014\ \ \ \ \textcolor{comment}{//\ If\ the\ pointee\ is\ mutable,\ the\ memory\ will\ be\ written\ back\ by\ the\ destructor.}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00015}00015\ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ std::\textcolor{keywordtype}{size\_t}\ LegacyAlign=0>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00016}00016\ \ \ \ \textcolor{keyword}{struct\ }argument\_proxy;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00018}00018\ \ \ \ \textcolor{comment}{//\ specialization\ of\ argument\_proxy\ for\ pointers.}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00019}00019\ \ \ \ \textcolor{comment}{//\ copies\ a\ single\ element.}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00020}00020\ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ std::\textcolor{keywordtype}{size\_t}\ LegacyAlign>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00021}00021\ \ \ \ \textcolor{keyword}{struct\ }argument\_proxy<\mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}}*,\ LegacyAlign>\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00022}00022\ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(LegacyAlign\ \%\ \textcolor{keyword}{alignof}(\mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}})\ ==\ 0,\ \textcolor{stringliteral}{"{}Specified\ alignment\ must\ be\ at\ least\ alignment\ of\ T"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00023}00023\ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_trivially\_copyable\_v<T>,\ \textcolor{stringliteral}{"{}argument\_proxy\ requires\ a\ trivially\ copyable\ type"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00024}\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_a8d173cd81e1d985dda2db30d9f282c11}{00024}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_a8d173cd81e1d985dda2db30d9f282c11}{argument\_proxy}}(\textcolor{keywordtype}{void}*\ ptr)\ :\ original\_ptr(ptr)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00025}00025\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!LegacyAlign\ ||\ \textcolor{keyword}{reinterpret\_cast<}std::uintptr\_t\textcolor{keyword}{>}(original\_ptr)\ \%\ LegacyAlign\ !=\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00026}00026\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacefc_a79771837fffd80fcc4bc658ee2fc4b2b}{copy}}.emplace();}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00027}00027\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_ae785d5badbf1f08b491af31f32a135a1}{memcpy}}(\ std::addressof(*\mbox{\hyperlink{namespacefc_a79771837fffd80fcc4bc658ee2fc4b2b}{copy}}),\ original\_ptr,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}})\ );}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00028}00028\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00029}00029\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00030}\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_af7d08ad33e80b13992a662a7c436500d}{00030}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_af7d08ad33e80b13992a662a7c436500d}{argument\_proxy}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy}{argument\_proxy}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00031}\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_a92747e03b1ea4e6daa3c142968c7a35a}{00031}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_a92747e03b1ea4e6daa3c142968c7a35a}{argument\_proxy}}(\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy}{argument\_proxy}}\&\&\ other)\ :\ original\_ptr(other.original\_ptr),\ \mbox{\hyperlink{namespacefc_a79771837fffd80fcc4bc658ee2fc4b2b}{copy}}(other.\mbox{\hyperlink{namespacefc_a79771837fffd80fcc4bc658ee2fc4b2b}{copy}})\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00032}00032\ \ \ \ \ \ \ \ \ \ other.copy.reset();}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00033}00033\ \ \ \ \ \ \ \ \ \ other.original\_ptr\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00034}00034\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00035}\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_a65c37e11f2901c70e364f4fd4ddbcea0}{00035}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_a65c37e11f2901c70e364f4fd4ddbcea0}{\string~argument\_proxy}}()\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00036}00036\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ push}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00037}00037\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ ignored\ "{}-\/Wnonnull"{}}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00038}00038\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (!std::is\_const\_v<T>)}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00039}00039\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacefc_a79771837fffd80fcc4bc658ee2fc4b2b}{copy}})}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00040}00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_ae785d5badbf1f08b491af31f32a135a1}{memcpy}}(original\_ptr,\ std::addressof(*\mbox{\hyperlink{namespacefc_a79771837fffd80fcc4bc658ee2fc4b2b}{copy}}),\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}}));}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00041}00041\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ pop}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00042}00042\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00043}\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_ade955eaaa6b2ecbeceb83e926a547a5d}{00043}}\ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{operator}\ \mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}}*()\ \{\ \textcolor{keywordflow}{return}\ get();\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00044}\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_a67387735effd8ae6bee38b0e49ae2f82}{00044}}\ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{operator}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}}*()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ get();\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00045}00045\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00046}\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_a68a9e93645a321e74910a9a5c6e26c12}{00046}}\ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}}*\ \mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_a68a9e93645a321e74910a9a5c6e26c12}{get}}()\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{const\_cast<}\mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}}*\textcolor{keyword}{>}(\textcolor{keyword}{const\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy}{argument\_proxy}}*\textcolor{keyword}{>}(\textcolor{keyword}{this})-\/>get());\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00047}\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_ac843554ee24427fa2a5b4d3b66d21700}{00047}}\ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}}*\ \mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_ac843554ee24427fa2a5b4d3b66d21700}{get}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00048}00048\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacefc_a79771837fffd80fcc4bc658ee2fc4b2b}{copy}})}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00049}00049\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::addressof(*\mbox{\hyperlink{namespacefc_a79771837fffd80fcc4bc658ee2fc4b2b}{copy}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00050}00050\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00051}00051\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}}*\textcolor{keyword}{>}(original\_ptr);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00052}00052\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00053}\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_afa9a9608cb5fb2101c447e2518522851}{00053}}\ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}}*\ \mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_afa9a9608cb5fb2101c447e2518522851}{operator-\/>}}()\ \{\ \textcolor{keywordflow}{return}\ get();\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00054}\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_aace2f7cfd7e82d8bab3f2f9ad5f54d71}{00054}}\ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}}*\ \mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_aace2f7cfd7e82d8bab3f2f9ad5f54d71}{operator-\/>}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ get();\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00055}00055\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00056}\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_a6b6c26a5e64a01d92cdf844814925af8}{00056}}\ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_a6b6c26a5e64a01d92cdf844814925af8}{is\_legacy}}()\ \{\ \textcolor{keywordflow}{return}\ LegacyAlign\ !=\ 0;\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00057}\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_a969716e9f02492f3aacb185c13528b8c}{00057}}\ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_a969716e9f02492f3aacb185c13528b8c}{pointee\_type}}\ =\ \mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00058}\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_ac2d34c7a31c42b8883fce199e45b90d4}{00058}}\ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_ac2d34c7a31c42b8883fce199e45b90d4}{proxy\_type}}\ =\ \mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}}*;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00059}\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_a6b74be1697f8629603ae48f5c6cc9027}{00059}}\ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01_t_01_5_00_01_legacy_align_01_4_a6b74be1697f8629603ae48f5c6cc9027}{get\_original\_pointer}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ original\_ptr;\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00060}00060\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00061}00061\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00062}00062\ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ original\_ptr;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00063}00063\ \ \ \ \ \ \ std::optional<std::remove\_cv\_t<T>>\ \mbox{\hyperlink{namespacefc_a79771837fffd80fcc4bc658ee2fc4b2b}{copy}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00064}00064\ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00065}00065\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00066}00066\ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ std::\textcolor{keywordtype}{size\_t}\ LegacyAlign>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00067}00067\ \ \ \ \textcolor{keyword}{struct\ }argument\_proxy<\mbox{\hyperlink{classsysio_1_1vm_1_1span}{span}}<\mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}}>,\ LegacyAlign>\ :\ \mbox{\hyperlink{classsysio_1_1vm_1_1span}{span}}<T>\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00068}00068\ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(LegacyAlign\ \%\ \textcolor{keyword}{alignof}(\mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}})\ ==\ 0,\ \textcolor{stringliteral}{"{}Specified\ alignment\ must\ be\ at\ least\ alignment\ of\ T"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00069}00069\ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_trivially\_copyable\_v<T>,\ \textcolor{stringliteral}{"{}argument\_proxy\ requires\ a\ trivially\ copyable\ type"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00070}\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01span_3_01_t_01_4_00_01_legacy_align_01_4_aa3bd9494e5c3133799e20b66154d2dfb}{00070}}\ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01span_3_01_t_01_4_00_01_legacy_align_01_4_aa3bd9494e5c3133799e20b66154d2dfb}{pointee\_type}}\ =\ \mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00071}\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01span_3_01_t_01_4_00_01_legacy_align_01_4_ae79b95e381a56e484f7c978f4853a37a}{00071}}\ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classsysio_1_1vm_1_1span}{proxy\_type}}\ =\ \mbox{\hyperlink{classsysio_1_1vm_1_1span}{span<T>}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00072}\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01span_3_01_t_01_4_00_01_legacy_align_01_4_aef22b300983a0964edb496fc89e6ab01}{00072}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01span_3_01_t_01_4_00_01_legacy_align_01_4_aef22b300983a0964edb496fc89e6ab01}{argument\_proxy}}(\textcolor{keywordtype}{void}*\ ptr,\ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ size)}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00073}00073\ \ \ \ \ \ \ \ \ \ :\ original\_ptr(ptr),}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00074}00074\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacefc_a79771837fffd80fcc4bc658ee2fc4b2b}{copy}}(\ is\_aligned(ptr)\ ?\ nullptr\ :\ new\ \mbox{\hyperlink{namespacestd}{std}}::remove\_cv\_t<\mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}}>[size]\ )\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00075}00075\ \ \ \ \ \ \ \ \ \ *\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classsysio_1_1vm_1_1span}{span<T>}}*\textcolor{keyword}{>}(\textcolor{keyword}{this})\ =\ \mbox{\hyperlink{namespacesysio_1_1chain_a68ee5032824b9877df35eec12344398d}{span<T>}}(\ \mbox{\hyperlink{namespacefc_a79771837fffd80fcc4bc658ee2fc4b2b}{copy}}\ ?\ \mbox{\hyperlink{namespacefc_a79771837fffd80fcc4bc658ee2fc4b2b}{copy}}.get()\ :\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}}*\textcolor{keyword}{>}(ptr),\ size\ );}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00076}00076\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacefc_a79771837fffd80fcc4bc658ee2fc4b2b}{copy}})}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00077}00077\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_ae785d5badbf1f08b491af31f32a135a1}{memcpy}}(\ \mbox{\hyperlink{namespacefc_a79771837fffd80fcc4bc658ee2fc4b2b}{copy}}.get(),\ original\_ptr,\ this-\/>size\_bytes()\ );}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00078}00078\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00079}\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01span_3_01_t_01_4_00_01_legacy_align_01_4_adfdd09ca6dfc0309acd7f6d8c9e7cfba}{00079}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01span_3_01_t_01_4_00_01_legacy_align_01_4_adfdd09ca6dfc0309acd7f6d8c9e7cfba}{argument\_proxy}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy}{argument\_proxy}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00080}\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01span_3_01_t_01_4_00_01_legacy_align_01_4_a70c9c28e2ba302d5ca7e035c3ff1b840}{00080}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01span_3_01_t_01_4_00_01_legacy_align_01_4_a70c9c28e2ba302d5ca7e035c3ff1b840}{argument\_proxy}}(\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy}{argument\_proxy}}\&\&)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00081}\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01span_3_01_t_01_4_00_01_legacy_align_01_4_a975a2bb6fcc592768d43284b1f9bfc6c}{00081}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01span_3_01_t_01_4_00_01_legacy_align_01_4_a975a2bb6fcc592768d43284b1f9bfc6c}{\string~argument\_proxy}}()\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00082}00082\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ push}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00083}00083\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ ignored\ "{}-\/Wnonnull"{}}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00084}00084\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (!std::is\_const\_v<T>)}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00085}00085\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacefc_a79771837fffd80fcc4bc658ee2fc4b2b}{copy}})}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00086}00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_ae785d5badbf1f08b491af31f32a135a1}{memcpy}}(original\_ptr,\ \mbox{\hyperlink{namespacefc_a79771837fffd80fcc4bc658ee2fc4b2b}{copy}}.get(),\ this-\/>size\_bytes());}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00087}00087\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ pop}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00088}00088\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00089}\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01span_3_01_t_01_4_00_01_legacy_align_01_4_a5361bb736fc9e8052e26b53f9dff26c6}{00089}}\ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01span_3_01_t_01_4_00_01_legacy_align_01_4_a5361bb736fc9e8052e26b53f9dff26c6}{is\_legacy}}()\ \{\ \textcolor{keywordflow}{return}\ LegacyAlign\ !=\ 0;\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00090}\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01span_3_01_t_01_4_00_01_legacy_align_01_4_a1f8adc3d3689280b9c5771d918cddaca}{00090}}\ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy_3_01span_3_01_t_01_4_00_01_legacy_align_01_4_a1f8adc3d3689280b9c5771d918cddaca}{get\_original\_pointer}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ original\_ptr;\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00091}00091\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00092}00092\ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00093}00093\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ is\_aligned(\textcolor{keywordtype}{void}*\ ptr)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{reinterpret\_cast<}std::uintptr\_t\textcolor{keyword}{>}(ptr)\ \%\ LegacyAlign\ ==\ 0;\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00094}00094\ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ original\_ptr;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00095}00095\ \ \ \ \ \ \ std::unique\_ptr<std::remove\_cv\_t<T>[]>\ \mbox{\hyperlink{namespacefc_a79771837fffd80fcc4bc658ee2fc4b2b}{copy}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00096}00096\ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00097}00097\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00098}\mbox{\hyperlink{namespacesysio_1_1vm_1_1detail}{00098}}\ \ \ \ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedetail}{detail}}\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00099}00099\ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00100}\mbox{\hyperlink{namespacesysio_1_1vm_1_1detail_a42b060b0b2177e20c45d849f0e73ffb6}{00100}}\ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{inline}\ std::true\_type\ \mbox{\hyperlink{namespacesysio_1_1vm_1_1detail_a42b060b0b2177e20c45d849f0e73ffb6}{is\_argument\_proxy\_type}}(\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy}{argument\_proxy<T>}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00101}00101\ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ std::\textcolor{keywordtype}{size\_t}\ LA>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00102}\mbox{\hyperlink{namespacesysio_1_1vm_1_1detail_a5baf75bfcc46c8e9d472f3eec49b3610}{00102}}\ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{inline}\ std::true\_type\ \mbox{\hyperlink{namespacesysio_1_1vm_1_1detail_a42b060b0b2177e20c45d849f0e73ffb6}{is\_argument\_proxy\_type}}(\mbox{\hyperlink{structsysio_1_1vm_1_1argument__proxy}{argument\_proxy<T,\ LA>}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00103}00103\ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00104}\mbox{\hyperlink{namespacesysio_1_1vm_1_1detail_a2200c665d8f388b43fb92d9dbc387772}{00104}}\ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{inline}\ std::false\_type\ \mbox{\hyperlink{namespacesysio_1_1vm_1_1detail_a42b060b0b2177e20c45d849f0e73ffb6}{is\_argument\_proxy\_type}}(\mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00105}00105\ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00106}00106\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00107}00107\ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00108}00108\ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{inline}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ is\_argument\_proxy\_type\_v\ =\ std::is\_same\_v<decltype(detail::is\_argument\_proxy\_type(std::declval<T>())),\ std::true\_type>;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00109}00109\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2argument__proxy_8hpp_source_l00110}00110\ \}\}\ \textcolor{comment}{//\ ns\ sysio::vm}}

\end{DoxyCode}
