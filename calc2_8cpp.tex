\doxysection{libraries/fc/libraries/ff/depends/xbyak/sample/calc2.cpp File Reference}
\hypertarget{calc2_8cpp}{}\label{calc2_8cpp}\index{libraries/fc/libraries/ff/depends/xbyak/sample/calc2.cpp@{libraries/fc/libraries/ff/depends/xbyak/sample/calc2.cpp}}
{\ttfamily \#include $<$boost/config/warning\+\_\+disable.\+hpp$>$}\newline
{\ttfamily \#include $<$boost/spirit/include/qi.\+hpp$>$}\newline
{\ttfamily \#include $<$boost/spirit/include/phoenix\+\_\+core.\+hpp$>$}\newline
{\ttfamily \#include $<$boost/spirit/include/phoenix\+\_\+container.\+hpp$>$}\newline
{\ttfamily \#include $<$boost/spirit/include/phoenix\+\_\+bind.\+hpp$>$}\newline
{\ttfamily \#include $<$boost/timer.\+hpp$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$assert.\+h$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
{\ttfamily \#include "{}xbyak/xbyak.\+h"{}}\newline
Include dependency graph for calc2.\+cpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{calc2_8cpp__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_code}{Code}}
\item 
struct \mbox{\hyperlink{struct_vm}{Vm}}
\item 
class \mbox{\hyperlink{class_jit}{Jit}}
\item 
struct \mbox{\hyperlink{struct_parser}{Parser$<$ Iterator $>$}}
\item 
struct \mbox{\hyperlink{struct_parser_jit}{Parser\+Jit$<$ Iterator $>$}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{calc2_8cpp_a3ede98665532cce0e33f614fac5150f9}{XBYAK\+\_\+\+NO\+\_\+\+OP\+\_\+\+NAMES}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef std\+::vector$<$ \mbox{\hyperlink{struct_code}{Code}} $>$ \mbox{\hyperlink{calc2_8cpp_a4d36d6404b7fdd840ca4b2782d82877e}{Code\+Set}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9}{Operand}} \{ \newline
\mbox{\hyperlink{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9ab6840212ac8e951ae9de3b08d5e6cd50}{Op\+Add}}
, \mbox{\hyperlink{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9a58f96555a50de9117a39fdfbc8668543}{Op\+Sub}}
, \mbox{\hyperlink{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9a3ae71bba8b27b9302d5ece3256e9b54a}{Op\+Mul}}
, \mbox{\hyperlink{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9a64c05a08a4c58bef9b3792549b6a449a}{Op\+Div}}
, \newline
\mbox{\hyperlink{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9a47f210afaa74fb4d3e685795b51a3798}{Op\+Neg}}
, \mbox{\hyperlink{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9a7d2a5b523e3291abcc68a86f040eddb3}{Op\+Imm}}
, \mbox{\hyperlink{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9a364d02b5982c9c4932fa80bd6aa16d7c}{Op\+VarX}}
 \}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$\mbox{\hyperlink{yubihsm__pkcs11_8c_a5c230edcb923568000cb7982cf84dfce}{class}} Func $>$ }\\void \mbox{\hyperlink{calc2_8cpp_a6c72baef6803424fe07b1767de15a1f7}{Test}} (const char \texorpdfstring{$\ast$}{*}msg, const Func \&\mbox{\hyperlink{_x02-_disabled_macros_8cpp_ae28240b98d91d6eb7da702b770490f39}{f}})
\item 
int \mbox{\hyperlink{calc2_8cpp_a0ddf1224851353fc92bfbff6f499fa97}{main}} (int argc, char \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{hello__driver_8cpp_af2efa898e9eed6fe6715279cb1ec35b0}{argv}}\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\Hypertarget{calc2_8cpp_a3ede98665532cce0e33f614fac5150f9}\index{calc2.cpp@{calc2.cpp}!XBYAK\_NO\_OP\_NAMES@{XBYAK\_NO\_OP\_NAMES}}
\index{XBYAK\_NO\_OP\_NAMES@{XBYAK\_NO\_OP\_NAMES}!calc2.cpp@{calc2.cpp}}
\doxysubsubsection{\texorpdfstring{XBYAK\_NO\_OP\_NAMES}{XBYAK\_NO\_OP\_NAMES}}
{\footnotesize\ttfamily \label{calc2_8cpp_a3ede98665532cce0e33f614fac5150f9} 
\#define XBYAK\+\_\+\+NO\+\_\+\+OP\+\_\+\+NAMES}



Definition at line \mbox{\hyperlink{calc2_8cpp_source_l00025}{25}} of file \mbox{\hyperlink{calc2_8cpp_source}{calc2.\+cpp}}.



\doxysubsection{Typedef Documentation}
\Hypertarget{calc2_8cpp_a4d36d6404b7fdd840ca4b2782d82877e}\index{calc2.cpp@{calc2.cpp}!CodeSet@{CodeSet}}
\index{CodeSet@{CodeSet}!calc2.cpp@{calc2.cpp}}
\doxysubsubsection{\texorpdfstring{CodeSet}{CodeSet}}
{\footnotesize\ttfamily \label{calc2_8cpp_a4d36d6404b7fdd840ca4b2782d82877e} 
typedef std\+::vector$<$\mbox{\hyperlink{struct_code}{Code}}$>$ \mbox{\hyperlink{calc2_8cpp_a4d36d6404b7fdd840ca4b2782d82877e}{Code\+Set}}}



Definition at line \mbox{\hyperlink{calc2_8cpp_source_l00053}{53}} of file \mbox{\hyperlink{calc2_8cpp_source}{calc2.\+cpp}}.



\doxysubsection{Enumeration Type Documentation}
\Hypertarget{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9}\index{calc2.cpp@{calc2.cpp}!Operand@{Operand}}
\index{Operand@{Operand}!calc2.cpp@{calc2.cpp}}
\doxysubsubsection{\texorpdfstring{Operand}{Operand}}
{\footnotesize\ttfamily \label{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9} 
enum \mbox{\hyperlink{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9}{Operand}}}

\begin{DoxyEnumFields}[2]{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{OpAdd@{OpAdd}!calc2.cpp@{calc2.cpp}}\index{calc2.cpp@{calc2.cpp}!OpAdd@{OpAdd}}}\Hypertarget{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9ab6840212ac8e951ae9de3b08d5e6cd50}\label{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9} 
Op\+Add&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{OpSub@{OpSub}!calc2.cpp@{calc2.cpp}}\index{calc2.cpp@{calc2.cpp}!OpSub@{OpSub}}}\Hypertarget{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9a58f96555a50de9117a39fdfbc8668543}\label{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9} 
Op\+Sub&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{OpMul@{OpMul}!calc2.cpp@{calc2.cpp}}\index{calc2.cpp@{calc2.cpp}!OpMul@{OpMul}}}\Hypertarget{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9a3ae71bba8b27b9302d5ece3256e9b54a}\label{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9} 
Op\+Mul&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{OpDiv@{OpDiv}!calc2.cpp@{calc2.cpp}}\index{calc2.cpp@{calc2.cpp}!OpDiv@{OpDiv}}}\Hypertarget{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9a64c05a08a4c58bef9b3792549b6a449a}\label{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9} 
Op\+Div&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{OpNeg@{OpNeg}!calc2.cpp@{calc2.cpp}}\index{calc2.cpp@{calc2.cpp}!OpNeg@{OpNeg}}}\Hypertarget{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9a47f210afaa74fb4d3e685795b51a3798}\label{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9} 
Op\+Neg&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{OpImm@{OpImm}!calc2.cpp@{calc2.cpp}}\index{calc2.cpp@{calc2.cpp}!OpImm@{OpImm}}}\Hypertarget{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9a7d2a5b523e3291abcc68a86f040eddb3}\label{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9} 
Op\+Imm&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{OpVarX@{OpVarX}!calc2.cpp@{calc2.cpp}}\index{calc2.cpp@{calc2.cpp}!OpVarX@{OpVarX}}}\Hypertarget{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9a364d02b5982c9c4932fa80bd6aa16d7c}\label{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9} 
Op\+VarX&\\
\hline

\end{DoxyEnumFields}


Definition at line \mbox{\hyperlink{calc2_8cpp_source_l00028}{28}} of file \mbox{\hyperlink{calc2_8cpp_source}{calc2.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00029\ \ \ \ \ \mbox{\hyperlink{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9ab6840212ac8e951ae9de3b08d5e6cd50}{OpAdd}},}
\DoxyCodeLine{00030\ \ \ \ \ \mbox{\hyperlink{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9a58f96555a50de9117a39fdfbc8668543}{OpSub}},}
\DoxyCodeLine{00031\ \ \ \ \ \mbox{\hyperlink{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9a3ae71bba8b27b9302d5ece3256e9b54a}{OpMul}},}
\DoxyCodeLine{00032\ \ \ \ \ \mbox{\hyperlink{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9a64c05a08a4c58bef9b3792549b6a449a}{OpDiv}},}
\DoxyCodeLine{00033\ \ \ \ \ \mbox{\hyperlink{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9a47f210afaa74fb4d3e685795b51a3798}{OpNeg}},}
\DoxyCodeLine{00034\ \ \ \ \ \mbox{\hyperlink{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9a7d2a5b523e3291abcc68a86f040eddb3}{OpImm}},}
\DoxyCodeLine{00035\ \ \ \ \ \mbox{\hyperlink{calc2_8cpp_a0cab31dfe640baa3b72c492ed1d0a4a9a364d02b5982c9c4932fa80bd6aa16d7c}{OpVarX}}}
\DoxyCodeLine{00036\ \};}

\end{DoxyCode}


\doxysubsection{Function Documentation}
\Hypertarget{calc2_8cpp_a0ddf1224851353fc92bfbff6f499fa97}\index{calc2.cpp@{calc2.cpp}!main@{main}}
\index{main@{main}!calc2.cpp@{calc2.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily \label{calc2_8cpp_a0ddf1224851353fc92bfbff6f499fa97} 
int main (\begin{DoxyParamCaption}\item[{int}]{argc}{, }\item[{char \texorpdfstring{$\ast$}{*}}]{argv}{\mbox{[}$\,$\mbox{]}}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{calc2_8cpp_source_l00267}{267}} of file \mbox{\hyperlink{calc2_8cpp_source}{calc2.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00268\ \{}
\DoxyCodeLine{00269\ \ \ \ \ \textcolor{keywordflow}{if}\ (argc\ <\ 2)\ \{}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ fprintf(stderr,\ \textcolor{stringliteral}{"{}input\ formula\(\backslash\)n"{}});}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00272\ \ \ \ \ \}}
\DoxyCodeLine{00273\ \ \ \ \ \textcolor{keyword}{const}\ std::string\ \mbox{\hyperlink{namespace_c_l_i_1_1detail_ab4542375c903302c3876ce0403d55596}{str}}(\mbox{\hyperlink{hello__driver_8cpp_af2efa898e9eed6fe6715279cb1ec35b0}{argv}}[1]);}
\DoxyCodeLine{00274\ }
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_vm}{Vm}}\ vm;}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_parser}{Parser<std::string::const\_iterator>}}\ parser(vm.\mbox{\hyperlink{struct_vm_a19c8007cb3594ebea0eb00e350dc4e36}{code\_}});}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_parser_jit}{ParserJit<std::string::const\_iterator>}}\ parserJit;}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string::const\_iterator\ end\ =\ \mbox{\hyperlink{namespace_c_l_i_1_1detail_ab4542375c903302c3876ce0403d55596}{str}}.end();}
\DoxyCodeLine{00281\ }
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ std::string::const\_iterator\ i\ =\ \mbox{\hyperlink{namespace_c_l_i_1_1detail_ab4542375c903302c3876ce0403d55596}{str}}.begin();}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!phrase\_parse(i,\ end,\ parser,\ boost::spirit::ascii::space)\ ||\ i\ !=\ end)\ \{}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ puts(\textcolor{stringliteral}{"{}err\ 1"{}});}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_log_a83926634a3916d0927abca4aca58a60a}{printf}}(\textcolor{stringliteral}{"{}ret=\%f\(\backslash\)n"{}},\ vm(2.3));}
\DoxyCodeLine{00288\ }
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ i\ =\ \mbox{\hyperlink{namespace_c_l_i_1_1detail_ab4542375c903302c3876ce0403d55596}{str}}.begin();}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!phrase\_parse(i,\ end,\ parserJit,\ boost::spirit::ascii::space)\ ||\ i\ !=\ end)\ \{}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ puts(\textcolor{stringliteral}{"{}err\ 2"{}});}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ parserJit.\mbox{\hyperlink{struct_parser_jit_a0bf6be16d955a16b8a1180a1bb56ae88}{code\_}}.\mbox{\hyperlink{class_jit_a0434c54efd4360a515a2d761c0fc8e55}{complete}}();}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ double\ (*jit)(double)\ =\ parserJit.\mbox{\hyperlink{struct_parser_jit_a0bf6be16d955a16b8a1180a1bb56ae88}{code\_}}.\mbox{\hyperlink{class_xbyak_1_1_code_array_a9ad8a38842d1e0de9045338e460f58ce}{getCode}}<double\ (*)(double)>();}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{calc2_8cpp_a6c72baef6803424fe07b1767de15a1f7}{Test}}(\textcolor{stringliteral}{"{}VM\ "{}},\ vm);}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{calc2_8cpp_a6c72baef6803424fe07b1767de15a1f7}{Test}}(\textcolor{stringliteral}{"{}JIT"{}},\ jit);}
\DoxyCodeLine{00299\ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (...)\ \{}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ fprintf(stderr,\ \textcolor{stringliteral}{"{}err\(\backslash\)n"{}});}
\DoxyCodeLine{00301\ \ \ \ \ \}}
\DoxyCodeLine{00302\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{calc2_8cpp_a0ddf1224851353fc92bfbff6f499fa97_cgraph}
\end{center}
\end{figure}
\Hypertarget{calc2_8cpp_a6c72baef6803424fe07b1767de15a1f7}\index{calc2.cpp@{calc2.cpp}!Test@{Test}}
\index{Test@{Test}!calc2.cpp@{calc2.cpp}}
\doxysubsubsection{\texorpdfstring{Test()}{Test()}}
{\footnotesize\ttfamily \label{calc2_8cpp_a6c72baef6803424fe07b1767de15a1f7} 
template$<$\mbox{\hyperlink{yubihsm__pkcs11_8c_a5c230edcb923568000cb7982cf84dfce}{class}} Func $>$ \\
void Test (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{msg}{, }\item[{const Func \&}]{f}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{calc2_8cpp_source_l00256}{256}} of file \mbox{\hyperlink{calc2_8cpp_source}{calc2.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00257\ \{}
\DoxyCodeLine{00258\ \ \ \ \ \mbox{\hyperlink{namespace_log_a83926634a3916d0927abca4aca58a60a}{printf}}(\textcolor{stringliteral}{"{}\%s:"{}},\ msg);}
\DoxyCodeLine{00259\ \ \ \ \ boost::timer\ t;}
\DoxyCodeLine{00260\ \ \ \ \ \textcolor{keywordtype}{double}\ sum\ =\ 0;}
\DoxyCodeLine{00261\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{double}\ x\ =\ 0;\ x\ <\ 1000;\ x\ +=\ 0.0001)\ \{}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ sum\ +=\ \mbox{\hyperlink{_x02-_disabled_macros_8cpp_ae28240b98d91d6eb7da702b770490f39}{f}}(x);}
\DoxyCodeLine{00263\ \ \ \ \ \}}
\DoxyCodeLine{00264\ \ \ \ \ \mbox{\hyperlink{namespace_log_a83926634a3916d0927abca4aca58a60a}{printf}}(\textcolor{stringliteral}{"{}sum=\%f,\ \%fsec\(\backslash\)n"{}},\ sum,\ t.elapsed());}
\DoxyCodeLine{00265\ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=188pt]{calc2_8cpp_a6c72baef6803424fe07b1767de15a1f7_icgraph}
\end{center}
\end{figure}
