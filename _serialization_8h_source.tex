\doxysection{Serialization.\+h}
\hypertarget{_serialization_8h_source}{}\label{_serialization_8h_source}\index{libraries/wasm-\/jit/Include/Inline/Serialization.h@{libraries/wasm-\/jit/Include/Inline/Serialization.h}}
\mbox{\hyperlink{_serialization_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00001}00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00003}00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{wasm-jit_2_include_2_platform_2platform_8h}{Platform/Platform.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00005}00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{wasm__sysio__constraints_8hpp}{../../../chain/include/sysio/chain/wasm\_sysio\_constraints.hpp}}"{}}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00006}00006\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00007}00007\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00008}00008\ \textcolor{preprocessor}{\#include\ <string.h>}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00009}00009\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00011}\mbox{\hyperlink{namespace_w_a_s_m}{00011}}\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_w_a_s_m}{WASM}}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00012}00012\ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00013}00013\ \ \ \ \ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespace_w_a_s_m_a5c8e6887571b126ae374d7cb5c38eac4}{check\_limits}};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00014}00014\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00015}\mbox{\hyperlink{namespace_serialization}{00015}}\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_serialization}{Serialization}}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00016}00016\ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00017}00017\ \ \ \ \ \textcolor{comment}{//\ An\ exception\ that\ is\ thrown\ for\ various\ errors\ during\ serialization.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00018}00018\ \ \ \ \ \textcolor{comment}{//\ Any\ code\ using\ serialization\ should\ handle\ it!}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00019}\mbox{\hyperlink{struct_serialization_1_1_fatal_serialization_exception}{00019}}\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_serialization_1_1_fatal_serialization_exception}{FatalSerializationException}}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00020}00020\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00021}\mbox{\hyperlink{struct_serialization_1_1_fatal_serialization_exception_ae65cd23b2cf7b4f0c9a062d3584bbdde}{00021}}\ \ \ \ \ \ \ \ \ std::string\ \mbox{\hyperlink{struct_serialization_1_1_fatal_serialization_exception_ae65cd23b2cf7b4f0c9a062d3584bbdde}{message}};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00022}\mbox{\hyperlink{struct_serialization_1_1_fatal_serialization_exception_ad027735c5c4b59726dfebcc627104ee9}{00022}}\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_serialization_1_1_fatal_serialization_exception_ad027735c5c4b59726dfebcc627104ee9}{FatalSerializationException}}(std::string\&\&\ inMessage)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00023}00023\ \ \ \ \ \ \ \ \ :\ message(\mbox{\hyperlink{namespacestd}{std}}::move(inMessage))\ \{\}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00024}00024\ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00025}00025\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00026}00026\ \ \ \ \ \textcolor{comment}{//\ An\ abstract\ output\ stream.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00027}\mbox{\hyperlink{struct_serialization_1_1_output_stream}{00027}}\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_serialization_1_1_output_stream}{OutputStream}}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00028}00028\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00029}\mbox{\hyperlink{struct_serialization_1_1_output_stream_ac1714f9a6bf67c3d43da4224e23fdadfa56fd45070e04dbf5aa8a7c122abd79f2}{00029}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{enum}\ \{\ \mbox{\hyperlink{struct_serialization_1_1_output_stream_ac1714f9a6bf67c3d43da4224e23fdadfa56fd45070e04dbf5aa8a7c122abd79f2}{isInput}}\ =\ \textcolor{keyword}{false}\ \};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00030}00030\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00031}\mbox{\hyperlink{struct_serialization_1_1_output_stream_aa0d8731bacb3f9c268d197e008c5cd50}{00031}}\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_serialization_1_1_output_stream_aa0d8731bacb3f9c268d197e008c5cd50}{OutputStream}}():\ \mbox{\hyperlink{struct_serialization_1_1_output_stream_a6b5f479d5d7ca4a5c0a43607cfebe8e3}{next}}(nullptr),\ end(nullptr)\ \{\}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00032}00032\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00033}\mbox{\hyperlink{struct_serialization_1_1_output_stream_acbf665b52ca229f30af8ef45fa9c3b8a}{00033}}\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}}\ \mbox{\hyperlink{struct_serialization_1_1_output_stream_acbf665b52ca229f30af8ef45fa9c3b8a}{capacity}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{stdint_8h_a3c75bb398badb69c7577b21486f9963f}{SIZE\_MAX}};\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00034}00034\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00035}00035\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Advances\ the\ stream\ cursor\ by\ numBytes,\ and\ returns\ a\ pointer\ to\ the\ previous\ stream\ cursor.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00036}\mbox{\hyperlink{struct_serialization_1_1_output_stream_a30478da9be388effe667062547675663}{00036}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}*\ \mbox{\hyperlink{struct_serialization_1_1_output_stream_a30478da9be388effe667062547675663}{advance}}(\mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}}\ numBytes)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00037}00037\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00038}00038\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{struct_serialization_1_1_output_stream_a6b5f479d5d7ca4a5c0a43607cfebe8e3}{next}}\ +\ numBytes\ >\ end)\ \{\ \mbox{\hyperlink{struct_serialization_1_1_output_stream_ab50708fb37e9f1f3cb0688e733e50cdd}{extendBuffer}}(numBytes);\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00039}00039\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_errors_8h_a03bec6af3af0dd492e348b40cbe40a46}{WAVM\_ASSERT\_THROW}}(\mbox{\hyperlink{struct_serialization_1_1_output_stream_a6b5f479d5d7ca4a5c0a43607cfebe8e3}{next}}\ +\ numBytes\ <=\ end);}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00040}00040\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00041}00041\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}*\ data\ =\ \mbox{\hyperlink{struct_serialization_1_1_output_stream_a6b5f479d5d7ca4a5c0a43607cfebe8e3}{next}};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00042}00042\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_serialization_1_1_output_stream_a6b5f479d5d7ca4a5c0a43607cfebe8e3}{next}}\ +=\ numBytes;}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00043}00043\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ data;}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00044}00044\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00045}00045\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00046}00046\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00048}\mbox{\hyperlink{struct_serialization_1_1_output_stream_a6b5f479d5d7ca4a5c0a43607cfebe8e3}{00048}}\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}*\ \mbox{\hyperlink{struct_serialization_1_1_output_stream_a6b5f479d5d7ca4a5c0a43607cfebe8e3}{next}};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00049}\mbox{\hyperlink{struct_serialization_1_1_output_stream_a10ed33bdcaa84aa831c7ff09808d9a68}{00049}}\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}*\ \mbox{\hyperlink{struct_serialization_1_1_output_stream_a10ed33bdcaa84aa831c7ff09808d9a68}{end}};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00050}00050\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00051}00051\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Called\ when\ there\ isn't\ enough\ space\ in\ the\ buffer\ to\ hold\ a\ write\ to\ the\ stream.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00052}00052\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Should\ update\ next\ and\ end\ to\ point\ to\ a\ new\ buffer,\ and\ ensure\ that\ the\ new}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00053}00053\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ buffer\ has\ at\ least\ numBytes.\ May\ throw\ FatalSerializationException.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00054}\mbox{\hyperlink{struct_serialization_1_1_output_stream_ab50708fb37e9f1f3cb0688e733e50cdd}{00054}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_serialization_1_1_output_stream_ab50708fb37e9f1f3cb0688e733e50cdd}{extendBuffer}}(\mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}}\ numBytes)\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00055}00055\ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00056}00056\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00057}00057\ \ \ \ \ \textcolor{comment}{//\ An\ output\ stream\ that\ writes\ to\ an\ array\ of\ bytes.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00058}\mbox{\hyperlink{struct_serialization_1_1_array_output_stream}{00058}}\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_serialization_1_1_array_output_stream}{ArrayOutputStream}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{struct_serialization_1_1_output_stream}{OutputStream}}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00059}00059\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00060}00060\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Moves\ the\ output\ array\ from\ the\ stream\ to\ the\ caller.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00061}\mbox{\hyperlink{struct_serialization_1_1_array_output_stream_aaf6d663f4644239d5960b4cbdd426488}{00061}}\ \ \ \ \ \ \ \ \ std::vector<U8>\&\&\ \mbox{\hyperlink{struct_serialization_1_1_array_output_stream_aaf6d663f4644239d5960b4cbdd426488}{getBytes}}()}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00062}00062\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00063}00063\ \ \ \ \ \ \ \ \ \ \ \ \ bytes.resize(\mbox{\hyperlink{struct_serialization_1_1_output_stream_a6b5f479d5d7ca4a5c0a43607cfebe8e3}{next}}\ -\/\ bytes.data());}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00064}00064\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_serialization_1_1_output_stream_a6b5f479d5d7ca4a5c0a43607cfebe8e3}{next}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00065}00065\ \ \ \ \ \ \ \ \ \ \ \ \ end\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00066}00066\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::move(bytes);}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00067}00067\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00068}00068\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00069}00069\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00070}00070\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00071}00071\ \ \ \ \ \ \ \ \ std::vector<U8>\ bytes;}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00072}00072\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00073}00073\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ extendBuffer(\mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}}\ numBytes)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00074}00074\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00075}00075\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}}\ nextIndex\ =\ \mbox{\hyperlink{struct_serialization_1_1_output_stream_a6b5f479d5d7ca4a5c0a43607cfebe8e3}{next}}\ -\/\ bytes.data();}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00076}00076\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00077}00077\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Grow\ the\ array\ by\ larger\ and\ larger\ increments,\ so\ the\ time\ spent\ growing}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00078}00078\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ buffer\ is\ O(1).}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00079}00079\ \ \ \ \ \ \ \ \ \ \ \ \ bytes.resize(std::max((\mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}})nextIndex+numBytes,(\mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}})bytes.size()\ *\ 7\ /\ 5\ +\ 32));}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00080}00080\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00081}00081\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_serialization_1_1_output_stream_a6b5f479d5d7ca4a5c0a43607cfebe8e3}{next}}\ =\ bytes.data()\ +\ nextIndex;}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00082}00082\ \ \ \ \ \ \ \ \ \ \ \ \ end\ =\ bytes.data()\ +\ bytes.size();}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00083}00083\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00084}00084\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ canExtendBuffer(\mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}}\ numBytes)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00085}00085\ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00086}00086\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00087}00087\ \ \ \ \ \textcolor{comment}{//\ An\ abstract\ input\ stream.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00088}\mbox{\hyperlink{struct_serialization_1_1_input_stream}{00088}}\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_serialization_1_1_input_stream}{InputStream}}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00089}00089\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00090}\mbox{\hyperlink{struct_serialization_1_1_input_stream_a08472b9b8291abc571588af8862669afac94823bb11cb319cf6c9ceb9f1ac01a6}{00090}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{enum}\ \{\ \mbox{\hyperlink{struct_serialization_1_1_input_stream_a08472b9b8291abc571588af8862669afac94823bb11cb319cf6c9ceb9f1ac01a6}{isInput}}\ =\ \textcolor{keyword}{true}\ \};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00091}00091\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00092}\mbox{\hyperlink{struct_serialization_1_1_input_stream_aab2721dd35672f8484a4e4045fd03e9f}{00092}}\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_serialization_1_1_input_stream_aab2721dd35672f8484a4e4045fd03e9f}{InputStream}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}*\ inNext,\textcolor{keyword}{const}\ \mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}*\ inEnd):\ \mbox{\hyperlink{struct_serialization_1_1_input_stream_a3b710216e24ed9386dcf28ead395ef0d}{next}}(inNext),\ end(inEnd)\ \{\}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00093}00093\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00094}\mbox{\hyperlink{struct_serialization_1_1_input_stream_a960a261ed276a5f6e81472739c0958ca}{00094}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}}\ \mbox{\hyperlink{struct_serialization_1_1_input_stream_a960a261ed276a5f6e81472739c0958ca}{capacity}}()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00095}00095\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00096}00096\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Advances\ the\ stream\ cursor\ by\ numBytes,\ and\ returns\ a\ pointer\ to\ the\ previous\ stream\ cursor.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00097}\mbox{\hyperlink{struct_serialization_1_1_input_stream_a172b7a3fd8d2e702daf092b8860c0946}{00097}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}*\ \mbox{\hyperlink{struct_serialization_1_1_input_stream_a172b7a3fd8d2e702daf092b8860c0946}{advance}}(\mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}}\ numBytes)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00098}00098\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00099}00099\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{struct_serialization_1_1_input_stream_a3b710216e24ed9386dcf28ead395ef0d}{next}}\ +\ numBytes\ >\ end)\ \{\ \mbox{\hyperlink{struct_serialization_1_1_input_stream_a888d6a1c0486a2bd4024f1f5c9be2d22}{getMoreData}}(numBytes);\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00100}00100\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}*\ data\ =\ \mbox{\hyperlink{struct_serialization_1_1_input_stream_a3b710216e24ed9386dcf28ead395ef0d}{next}};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00101}00101\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_serialization_1_1_input_stream_a3b710216e24ed9386dcf28ead395ef0d}{next}}\ +=\ numBytes;}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00102}00102\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ data;}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00103}00103\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00104}00104\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00105}00105\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Returns\ a\ pointer\ to\ the\ current\ stream\ cursor,\ ensuring\ that\ there\ are\ at\ least\ numBytes\ following\ it.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00106}\mbox{\hyperlink{struct_serialization_1_1_input_stream_a663d3d04bc19c80453a729e5a09a03cb}{00106}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}*\ \mbox{\hyperlink{struct_serialization_1_1_input_stream_a663d3d04bc19c80453a729e5a09a03cb}{peek}}(\mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}}\ numBytes)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00107}00107\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00108}00108\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{struct_serialization_1_1_input_stream_a3b710216e24ed9386dcf28ead395ef0d}{next}}\ +\ numBytes\ >\ end)\ \{\ \mbox{\hyperlink{struct_serialization_1_1_input_stream_a888d6a1c0486a2bd4024f1f5c9be2d22}{getMoreData}}(numBytes);\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00109}00109\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_serialization_1_1_input_stream_a3b710216e24ed9386dcf28ead395ef0d}{next}};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00110}00110\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00111}00111\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00112}00112\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00113}00113\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00114}\mbox{\hyperlink{struct_serialization_1_1_input_stream_a3b710216e24ed9386dcf28ead395ef0d}{00114}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}*\ \mbox{\hyperlink{struct_serialization_1_1_input_stream_a3b710216e24ed9386dcf28ead395ef0d}{next}};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00115}\mbox{\hyperlink{struct_serialization_1_1_input_stream_ac94b47818b240805db6babfe91814000}{00115}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}*\ \mbox{\hyperlink{struct_serialization_1_1_input_stream_ac94b47818b240805db6babfe91814000}{end}};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00116}00116\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00117}00117\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Called\ when\ there\ isn't\ enough\ space\ in\ the\ buffer\ to\ satisfy\ a\ read\ from\ the\ stream.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00118}00118\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Should\ update\ next\ and\ end\ to\ point\ to\ a\ new\ buffer,\ and\ ensure\ that\ the\ new}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00119}00119\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ buffer\ has\ at\ least\ numBytes.\ May\ throw\ FatalSerializationException.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00120}\mbox{\hyperlink{struct_serialization_1_1_input_stream_a888d6a1c0486a2bd4024f1f5c9be2d22}{00120}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_serialization_1_1_input_stream_a888d6a1c0486a2bd4024f1f5c9be2d22}{getMoreData}}(\mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}}\ numBytes)\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00121}00121\ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00122}00122\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00123}00123\ \ \ \ \ \textcolor{comment}{//\ An\ input\ stream\ that\ reads\ from\ a\ contiguous\ range\ of\ memory.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00124}\mbox{\hyperlink{struct_serialization_1_1_memory_input_stream}{00124}}\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_serialization_1_1_memory_input_stream}{MemoryInputStream}}\ :\ \mbox{\hyperlink{struct_serialization_1_1_input_stream}{InputStream}}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00125}00125\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00126}\mbox{\hyperlink{struct_serialization_1_1_memory_input_stream_a09ddbe4a226083e5cadc9426958c24b2}{00126}}\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_serialization_1_1_memory_input_stream_a09ddbe4a226083e5cadc9426958c24b2}{MemoryInputStream}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}*\ begin,\mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}}\ numBytes):\ \mbox{\hyperlink{struct_serialization_1_1_input_stream}{InputStream}}(begin,begin+numBytes)\ \{\}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00127}\mbox{\hyperlink{struct_serialization_1_1_memory_input_stream_a23beec28239d63e3ed3623c7a224dc7c}{00127}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}}\ \mbox{\hyperlink{struct_serialization_1_1_memory_input_stream_a23beec28239d63e3ed3623c7a224dc7c}{capacity}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ end\ -\/\ \mbox{\hyperlink{struct_serialization_1_1_input_stream_a3b710216e24ed9386dcf28ead395ef0d}{next}};\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00128}00128\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00129}00129\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ getMoreData(\mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}}\ numBytes)\ \{\ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{struct_serialization_1_1_fatal_serialization_exception}{FatalSerializationException}}(\textcolor{stringliteral}{"{}expected\ data\ but\ found\ end\ of\ stream"{}});\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00130}00130\ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00131}00131\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00132}00132\ \ \ \ \ \textcolor{comment}{//\ Serialize\ raw\ byte\ sequences.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00133}\mbox{\hyperlink{namespace_serialization_aee190f414695b837a7b75cd86adc516f}{00133}}\ \ \ \ \ \mbox{\hyperlink{wasm-jit_2_include_2_platform_2platform_8h_a724fb9f82013c782db5c3c12ea36aac8}{FORCEINLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_aee190f414695b837a7b75cd86adc516f}{serializeBytes}}(\mbox{\hyperlink{struct_serialization_1_1_output_stream}{OutputStream}}\&\ stream,\textcolor{keyword}{const}\ \mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}*\ bytes,\mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}}\ numBytes)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00134}00134\ \ \ \ \ \{\ \mbox{\hyperlink{yubihsm__pkcs11_8c_ae785d5badbf1f08b491af31f32a135a1}{memcpy}}(stream.advance(numBytes),bytes,numBytes);\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00135}\mbox{\hyperlink{namespace_serialization_ab3502c43ba150270c3c65b4e7c87080e}{00135}}\ \ \ \ \ \mbox{\hyperlink{wasm-jit_2_include_2_platform_2platform_8h_a724fb9f82013c782db5c3c12ea36aac8}{FORCEINLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_aee190f414695b837a7b75cd86adc516f}{serializeBytes}}(\mbox{\hyperlink{struct_serialization_1_1_input_stream}{InputStream}}\&\ stream,\mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}*\ bytes,\mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}}\ numBytes)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00136}00136\ \ \ \ \ \{\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00137}00137\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ numBytes\ <\ sysio::chain::wasm\_constraints::wasm\_page\_size\ ||\ !\mbox{\hyperlink{namespace_w_a_s_m_a5c8e6887571b126ae374d7cb5c38eac4}{WASM::check\_limits}})}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00138}00138\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_ae785d5badbf1f08b491af31f32a135a1}{memcpy}}(bytes,stream.advance(numBytes),numBytes);\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00139}00139\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00140}00140\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{struct_serialization_1_1_fatal_serialization_exception}{FatalSerializationException}}(std::string(\textcolor{stringliteral}{"{}Trying\ to\ deserialize\ bytes\ of\ size\ :\ "{}}\ +\ std::to\_string((\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}})numBytes)));}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00141}00141\ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00142}00142\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00143}00143\ \ \ \ \ \textcolor{comment}{//\ Serialize\ basic\ C++\ types.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00144}00144\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Stream,\textcolor{keyword}{typename}\ Value>}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00145}\mbox{\hyperlink{namespace_serialization_acbd5d61d25bec4a37a4ecc33f7734155}{00145}}\ \ \ \ \ \mbox{\hyperlink{wasm-jit_2_include_2_platform_2platform_8h_a724fb9f82013c782db5c3c12ea36aac8}{FORCEINLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_acbd5d61d25bec4a37a4ecc33f7734155}{serializeNativeValue}}(\mbox{\hyperlink{classrapidjson_1_1_stream}{Stream}}\&\ stream,\mbox{\hyperlink{class_generic_value}{Value}}\&\ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}})\ \{\ \mbox{\hyperlink{namespace_serialization_aee190f414695b837a7b75cd86adc516f}{serializeBytes}}(stream,(\mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}*)\&\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}},\textcolor{keyword}{sizeof}(\mbox{\hyperlink{class_generic_value}{Value}}));\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00146}00146\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00147}\mbox{\hyperlink{namespace_serialization_a2a05c5aff4847073ca0fb887d20ac485}{00147}}\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Stream>\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_a2a05c5aff4847073ca0fb887d20ac485}{serialize}}(\mbox{\hyperlink{classrapidjson_1_1_stream}{Stream}}\&\ stream,\mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}\&\ i)\ \{\ \mbox{\hyperlink{namespace_serialization_acbd5d61d25bec4a37a4ecc33f7734155}{serializeNativeValue}}(stream,i);\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00148}\mbox{\hyperlink{namespace_serialization_aa8a7b1baac3660bd63f2418dbbd61efe}{00148}}\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Stream>\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_a2a05c5aff4847073ca0fb887d20ac485}{serialize}}(\mbox{\hyperlink{classrapidjson_1_1_stream}{Stream}}\&\ stream,\mbox{\hyperlink{_basic_types_8h_a696390429f2f3b644bde8d0322a24124}{U32}}\&\ i)\ \{\ \mbox{\hyperlink{namespace_serialization_acbd5d61d25bec4a37a4ecc33f7734155}{serializeNativeValue}}(stream,i);\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00149}\mbox{\hyperlink{namespace_serialization_a4ac446f43ac33663fbfb891e78049e0f}{00149}}\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Stream>\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_a2a05c5aff4847073ca0fb887d20ac485}{serialize}}(\mbox{\hyperlink{classrapidjson_1_1_stream}{Stream}}\&\ stream,\mbox{\hyperlink{_basic_types_8h_a25809e0734a149248fcf5831efa4e33d}{U64}}\&\ i)\ \{\ \mbox{\hyperlink{namespace_serialization_acbd5d61d25bec4a37a4ecc33f7734155}{serializeNativeValue}}(stream,i);\ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00150}\mbox{\hyperlink{namespace_serialization_a4354d6cf14b1ce6de06039ef97269365}{00150}}\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Stream>\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_a2a05c5aff4847073ca0fb887d20ac485}{serialize}}(\mbox{\hyperlink{classrapidjson_1_1_stream}{Stream}}\&\ stream,\mbox{\hyperlink{_basic_types_8h_a33c92dd47950aa8c1d6df7e1c163e5a6}{I8}}\&\ i)\ \{\ \mbox{\hyperlink{namespace_serialization_acbd5d61d25bec4a37a4ecc33f7734155}{serializeNativeValue}}(stream,i);\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00151}\mbox{\hyperlink{namespace_serialization_afb8810a09bbf513478059c7abafbf891}{00151}}\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Stream>\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_a2a05c5aff4847073ca0fb887d20ac485}{serialize}}(\mbox{\hyperlink{classrapidjson_1_1_stream}{Stream}}\&\ stream,\mbox{\hyperlink{_basic_types_8h_a2f1a62071dd7dc3f6ef85c1b7612dc35}{I32}}\&\ i)\ \{\ \mbox{\hyperlink{namespace_serialization_acbd5d61d25bec4a37a4ecc33f7734155}{serializeNativeValue}}(stream,i);\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00152}\mbox{\hyperlink{namespace_serialization_ad66c33ddcb4f0294cbbf939530f192ee}{00152}}\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Stream>\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_a2a05c5aff4847073ca0fb887d20ac485}{serialize}}(\mbox{\hyperlink{classrapidjson_1_1_stream}{Stream}}\&\ stream,\mbox{\hyperlink{_basic_types_8h_a416b74ff5b1dc365af5713a3f48fb8b9}{I64}}\&\ i)\ \{\ \mbox{\hyperlink{namespace_serialization_acbd5d61d25bec4a37a4ecc33f7734155}{serializeNativeValue}}(stream,i);\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00153}\mbox{\hyperlink{namespace_serialization_a10e426850f78156cd8c3bcf355f85e08}{00153}}\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Stream>\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_a2a05c5aff4847073ca0fb887d20ac485}{serialize}}(\mbox{\hyperlink{classrapidjson_1_1_stream}{Stream}}\&\ stream,\mbox{\hyperlink{_basic_types_8h_a841d3674577a1e86afdc2f4845f46c4b}{F32}}\&\ \mbox{\hyperlink{_x02-_disabled_macros_8cpp_ae28240b98d91d6eb7da702b770490f39}{f}})\ \{\ \mbox{\hyperlink{namespace_serialization_acbd5d61d25bec4a37a4ecc33f7734155}{serializeNativeValue}}(stream,\mbox{\hyperlink{_x02-_disabled_macros_8cpp_ae28240b98d91d6eb7da702b770490f39}{f}});\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00154}\mbox{\hyperlink{namespace_serialization_a855a29de6a26c8f99d47c22f11804a5f}{00154}}\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Stream>\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_a2a05c5aff4847073ca0fb887d20ac485}{serialize}}(\mbox{\hyperlink{classrapidjson_1_1_stream}{Stream}}\&\ stream,\mbox{\hyperlink{_basic_types_8h_adc9896ee12db3bb116fc63b3464c72c7}{F64}}\&\ \mbox{\hyperlink{_x02-_disabled_macros_8cpp_ae28240b98d91d6eb7da702b770490f39}{f}})\ \{\ \mbox{\hyperlink{namespace_serialization_acbd5d61d25bec4a37a4ecc33f7734155}{serializeNativeValue}}(stream,\mbox{\hyperlink{_x02-_disabled_macros_8cpp_ae28240b98d91d6eb7da702b770490f39}{f}});\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00155}00155\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00156}00156\ \ \ \ \ \textcolor{comment}{//\ LEB128\ variable-\/length\ integer\ serialization.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00157}00157\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Value,Uptr\ maxBits>}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00158}\mbox{\hyperlink{namespace_serialization_a7542db4eecbd9af4bc8398241da2614d}{00158}}\ \ \ \ \ \mbox{\hyperlink{wasm-jit_2_include_2_platform_2platform_8h_a724fb9f82013c782db5c3c12ea36aac8}{FORCEINLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_a7542db4eecbd9af4bc8398241da2614d}{serializeVarInt}}(\mbox{\hyperlink{struct_serialization_1_1_output_stream}{OutputStream}}\&\ stream,\mbox{\hyperlink{class_generic_value}{Value}}\&\ inValue,\mbox{\hyperlink{class_generic_value}{Value}}\ minValue,\mbox{\hyperlink{class_generic_value}{Value}}\ maxValue)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00159}00159\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00160}00160\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_generic_value}{Value}}\ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}}\ =\ inValue;}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00161}00161\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00162}00162\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value\ <\ minValue\ ||\ value\ >}}\ maxValue)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00163}00163\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00164}00164\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{struct_serialization_1_1_fatal_serialization_exception}{FatalSerializationException}}(std::string(\textcolor{stringliteral}{"{}out-\/of-\/range\ value:\ "{}})\ +\ std::to\_string(minValue)\ +\ \textcolor{stringliteral}{"{}<="{}}\ +\ std::to\_string(\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}})\ +\ \textcolor{stringliteral}{"{}<="{}}\ +\ std::to\_string(maxValue));}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00165}00165\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00166}00166\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00167}00167\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ more\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00168}00168\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(more)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00169}00169\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00170}00170\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}\ outputByte\ =\ (\mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}})(\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}}\&127);}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00171}00171\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}}\ >>=\ 7;}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00172}00172\ \ \ \ \ \ \ \ \ \ \ \ \ more\ =\ std::is\_signed<Value>::value}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00173}00173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ?\ (\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}}\ !=\ 0\ \&\&\ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}}\ !=\ \mbox{\hyperlink{document_8h_a071cf97155ba72ac9a1fc4ad7e63d481}{Value}}(-\/1))\ ||\ (\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}}\ >=\ 0\ \&\&\ (outputByte\ \&\ 0x40))\ ||\ (\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}}\ <\ 0\ \&\&\ !(outputByte\ \&\ 0x40))}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00174}00174\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ (\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}}\ !=\ 0);}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00175}00175\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(more)\ \{\ outputByte\ |=\ 0x80;\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00176}00176\ \ \ \ \ \ \ \ \ \ \ \ \ *stream.advance(1)\ =\ outputByte;}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00177}00177\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00178}00178\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00179}00179\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00180}00180\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Value,Uptr\ maxBits>}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00181}\mbox{\hyperlink{namespace_serialization_a3999d7df48f01a86a1c743401da00fc6}{00181}}\ \ \ \ \ \mbox{\hyperlink{wasm-jit_2_include_2_platform_2platform_8h_a724fb9f82013c782db5c3c12ea36aac8}{FORCEINLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_a7542db4eecbd9af4bc8398241da2614d}{serializeVarInt}}(\mbox{\hyperlink{struct_serialization_1_1_input_stream}{InputStream}}\&\ stream,\mbox{\hyperlink{class_generic_value}{Value}}\&\ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}},\mbox{\hyperlink{class_generic_value}{Value}}\ minValue,\mbox{\hyperlink{class_generic_value}{Value}}\ maxValue)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00182}00182\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00183}00183\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ First,\ read\ the\ variable\ number\ of\ input\ bytes\ into\ a\ fixed\ size\ buffer.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00184}00184\ \ \ \ \ \ \ \ \ \textcolor{keyword}{enum}\ \{\ maxBytes\ =\ (maxBits\ +\ 6)\ /\ 7\ \};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00185}00185\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}\ bytes[maxBytes]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00186}00186\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}}\ numBytes\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00187}00187\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_basic_types_8h_a33c92dd47950aa8c1d6df7e1c163e5a6}{I8}}\ signExtendShift\ =\ (\mbox{\hyperlink{_basic_types_8h_a33c92dd47950aa8c1d6df7e1c163e5a6}{I8}})\textcolor{keyword}{sizeof}(\mbox{\hyperlink{class_generic_value}{Value}})\ *\ 8;}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00188}00188\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(numBytes\ <\ maxBytes)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00189}00189\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00190}00190\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}\ \textcolor{keywordtype}{byte}\ =\ *stream.advance(1);}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00191}00191\ \ \ \ \ \ \ \ \ \ \ \ \ bytes[numBytes]\ =\ byte;}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00192}00192\ \ \ \ \ \ \ \ \ \ \ \ \ ++numBytes;}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00193}00193\ \ \ \ \ \ \ \ \ \ \ \ \ signExtendShift\ -\/=\ 7;}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00194}00194\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(!(\textcolor{keywordtype}{byte}\ \&\ 0x80))\ \{\ \textcolor{keywordflow}{break};\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00195}00195\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00196}00196\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00197}00197\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Ensure\ that\ the\ input\ does\ not\ encode\ more\ than\ maxBits\ of\ data.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00198}00198\ \ \ \ \ \ \ \ \ \textcolor{keyword}{enum}\ \{\ numUsedBitsInLastByte\ =\ maxBits\ -\/\ (maxBytes-\/1)\ *\ 7\ \};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00199}00199\ \ \ \ \ \ \ \ \ \textcolor{keyword}{enum}\ \{\ numUnusedBitsInLast\ =\ 8\ -\/\ numUsedBitsInLastByte\ \};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00200}00200\ \ \ \ \ \ \ \ \ \textcolor{keyword}{enum}\ \{\ lastBitUsedMask\ =\ \mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}(1<<(numUsedBitsInLastByte-\/1))\ \};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00201}00201\ \ \ \ \ \ \ \ \ \textcolor{keyword}{enum}\ \{\ lastByteUsedMask\ =\ \mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}(1<<numUsedBitsInLastByte)-\/\mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}(1)\ \};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00202}00202\ \ \ \ \ \ \ \ \ \textcolor{keyword}{enum}\ \{\ lastByteSignedMask\ =\ \mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}(\string~\mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}(lastByteUsedMask)\ \&\ \string~\mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}(0x80))\ \};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00203}00203\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}\ lastByte\ =\ bytes[maxBytes-\/1];}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00204}00204\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(!std::is\_signed<Value>::value)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00205}00205\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00206}00206\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}((lastByte\ \&\ \string~lastByteUsedMask)\ !=\ 0)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00207}00207\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00208}00208\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{struct_serialization_1_1_fatal_serialization_exception}{FatalSerializationException}}(\textcolor{stringliteral}{"{}Invalid\ unsigned\ LEB\ encoding:\ unused\ bits\ in\ final\ byte\ must\ be\ 0"{}});}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00209}00209\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00210}00210\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00211}00211\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00212}00212\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00213}00213\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{_basic_types_8h_a33c92dd47950aa8c1d6df7e1c163e5a6}{I8}}\ \mbox{\hyperlink{fp128_8h_a24a207bac48041c7a290ab7b276a3b8b}{signBit}}\ =\ \mbox{\hyperlink{_basic_types_8h_a33c92dd47950aa8c1d6df7e1c163e5a6}{I8}}((lastByte\ \&\ lastBitUsedMask)\ <<\ numUnusedBitsInLast);}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00214}00214\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{_basic_types_8h_a33c92dd47950aa8c1d6df7e1c163e5a6}{I8}}\ signExtendedLastBit\ =\ \mbox{\hyperlink{fp128_8h_a24a207bac48041c7a290ab7b276a3b8b}{signBit}}\ >>\ numUnusedBitsInLast;}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00215}00215\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}((lastByte\ \&\ \string~lastByteUsedMask)\ !=\ (signExtendedLastBit\ \&\ lastByteSignedMask))}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00216}00216\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00217}00217\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{struct_serialization_1_1_fatal_serialization_exception}{FatalSerializationException}}(}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00218}00218\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Invalid\ signed\ LEB\ encoding:\ unused\ bits\ in\ final\ byte\ must\ match\ the\ most-\/significant\ used\ bit"{}});}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00219}00219\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00220}00220\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00221}00221\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00222}00222\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Decode\ the\ buffer's\ bytes\ into\ the\ output\ integer.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00223}00223\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00224}00224\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}}\ byteIndex\ =\ 0;byteIndex\ <\ maxBytes;++byteIndex)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00225}00225\ \ \ \ \ \ \ \ \ \{\ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}}\ |=\ \mbox{\hyperlink{document_8h_a071cf97155ba72ac9a1fc4ad7e63d481}{Value}}(bytes[byteIndex]\ \&\ \string~0x80)\ <<\ (byteIndex\ *\ 7);\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00226}00226\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00227}00227\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Sign\ extend\ the\ output\ integer\ to\ the\ full\ size\ of\ Value.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00228}00228\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(std::is\_signed<Value>::value\ \&\&\ signExtendShift\ >\ 0)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00229}00229\ \ \ \ \ \ \ \ \ \{\ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}}\ =\ \mbox{\hyperlink{document_8h_a071cf97155ba72ac9a1fc4ad7e63d481}{Value}}(\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}}\ <<\ signExtendShift)\ >>\ signExtendShift;\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00230}00230\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00231}00231\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ that\ the\ output\ integer\ is\ in\ the\ expected\ range.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00232}00232\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value\ <\ minValue\ ||\ value\ >}}\ maxValue)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00233}00233\ \ \ \ \ \ \ \ \ \{\ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{struct_serialization_1_1_fatal_serialization_exception}{FatalSerializationException}}(std::string(\textcolor{stringliteral}{"{}out-\/of-\/range\ value:\ "{}})\ +\ std::to\_string(minValue)\ +\ \textcolor{stringliteral}{"{}<="{}}\ +\ std::to\_string(\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}})\ +\ \textcolor{stringliteral}{"{}<="{}}\ +\ std::to\_string(maxValue));\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00234}00234\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00235}00235\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00236}00236\ \ \ \ \ \textcolor{comment}{//\ Helpers\ for\ various\ common\ LEB128\ parameters.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00237}\mbox{\hyperlink{namespace_serialization_a46462b1f33100cfe651e13e844827dec}{00237}}\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Stream,\textcolor{keyword}{typename}\ Value>\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_a46462b1f33100cfe651e13e844827dec}{serializeVarUInt1}}(\mbox{\hyperlink{classrapidjson_1_1_stream}{Stream}}\&\ stream,\mbox{\hyperlink{class_generic_value}{Value}}\&\ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}})\ \{\ \mbox{\hyperlink{namespace_serialization_a7542db4eecbd9af4bc8398241da2614d}{serializeVarInt<Value,1>}}(stream,\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}},0,1);\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00238}\mbox{\hyperlink{namespace_serialization_af14a3f6c258b4253ad4d75a57827d41e}{00238}}\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Stream,\textcolor{keyword}{typename}\ Value>\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_af14a3f6c258b4253ad4d75a57827d41e}{serializeVarUInt7}}(\mbox{\hyperlink{classrapidjson_1_1_stream}{Stream}}\&\ stream,\mbox{\hyperlink{class_generic_value}{Value}}\&\ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}})\ \{\ \mbox{\hyperlink{namespace_serialization_a7542db4eecbd9af4bc8398241da2614d}{serializeVarInt<Value,7>}}(stream,\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}},0,127);\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00239}\mbox{\hyperlink{namespace_serialization_a1ea6ecb2f4de00340f936648398f4f66}{00239}}\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Stream,\textcolor{keyword}{typename}\ Value>\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_a1ea6ecb2f4de00340f936648398f4f66}{serializeVarUInt32}}(\mbox{\hyperlink{classrapidjson_1_1_stream}{Stream}}\&\ stream,\mbox{\hyperlink{class_generic_value}{Value}}\&\ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}})\ \{\ \mbox{\hyperlink{namespace_serialization_a7542db4eecbd9af4bc8398241da2614d}{serializeVarInt<Value,32>}}(stream,\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}},0,\mbox{\hyperlink{stdint_8h_ab5eb23180f7cc12b7d6c04a8ec067fdd}{UINT32\_MAX}});\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00240}\mbox{\hyperlink{namespace_serialization_a4ac33cb15215c7dbaae4eb516786aba4}{00240}}\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Stream,\textcolor{keyword}{typename}\ Value>\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_a4ac33cb15215c7dbaae4eb516786aba4}{serializeVarUInt64}}(\mbox{\hyperlink{classrapidjson_1_1_stream}{Stream}}\&\ stream,\mbox{\hyperlink{class_generic_value}{Value}}\&\ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}})\ \{\ \mbox{\hyperlink{namespace_serialization_a7542db4eecbd9af4bc8398241da2614d}{serializeVarInt<Value,64>}}(stream,\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}},0,\mbox{\hyperlink{stdint_8h_a30654b4b67d97c42ca3f9b6052dda916}{UINT64\_MAX}});\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00241}\mbox{\hyperlink{namespace_serialization_aa3a610a68eadc6fc16175ae3b4e3a829}{00241}}\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Stream,\textcolor{keyword}{typename}\ Value>\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_aa3a610a68eadc6fc16175ae3b4e3a829}{serializeVarInt7}}(\mbox{\hyperlink{classrapidjson_1_1_stream}{Stream}}\&\ stream,\mbox{\hyperlink{class_generic_value}{Value}}\&\ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}})\ \{\ \mbox{\hyperlink{namespace_serialization_a7542db4eecbd9af4bc8398241da2614d}{serializeVarInt<Value,7>}}(stream,\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}},-\/64,63);\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00242}\mbox{\hyperlink{namespace_serialization_ad134d54737dffbb61803344f6ffbd778}{00242}}\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Stream,\textcolor{keyword}{typename}\ Value>\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_ad134d54737dffbb61803344f6ffbd778}{serializeVarInt32}}(\mbox{\hyperlink{classrapidjson_1_1_stream}{Stream}}\&\ stream,\mbox{\hyperlink{class_generic_value}{Value}}\&\ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}})\ \{\ \mbox{\hyperlink{namespace_serialization_a7542db4eecbd9af4bc8398241da2614d}{serializeVarInt<Value,32>}}(stream,\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}},\mbox{\hyperlink{stdint_8h_a688eb21a22db27c2b2bd5836943cdcbe}{INT32\_MIN}},\mbox{\hyperlink{stdint_8h_a181807730d4a375f848ba139813ce04f}{INT32\_MAX}});\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00243}\mbox{\hyperlink{namespace_serialization_aa9ecd5c87d12b25bb872a2f822d0b729}{00243}}\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Stream,\textcolor{keyword}{typename}\ Value>\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_aa9ecd5c87d12b25bb872a2f822d0b729}{serializeVarInt64}}(\mbox{\hyperlink{classrapidjson_1_1_stream}{Stream}}\&\ stream,\mbox{\hyperlink{class_generic_value}{Value}}\&\ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}})\ \{\ \mbox{\hyperlink{namespace_serialization_a7542db4eecbd9af4bc8398241da2614d}{serializeVarInt<Value,64>}}(stream,\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}},\mbox{\hyperlink{stdint_8h_ab21f12f372f67b8ff0aa3432336ede67}{INT64\_MIN}},\mbox{\hyperlink{stdint_8h_ad0d744f05898e32d01f73f8af3cd2071}{INT64\_MAX}});\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00244}00244\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00245}00245\ \ \ \ \ \textcolor{comment}{//\ Serializes\ a\ constant.\ If\ deserializing,\ throws\ a\ FatalSerializationException\ if\ the\ deserialized\ value\ doesn't\ match\ the\ constant.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00246}00246\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Constant>}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00247}\mbox{\hyperlink{namespace_serialization_a1b9abe1b3bbe0732eb1f8d900be0f3aa}{00247}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_a1b9abe1b3bbe0732eb1f8d900be0f3aa}{serializeConstant}}(\mbox{\hyperlink{struct_serialization_1_1_input_stream}{InputStream}}\&\ stream,\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ constantMismatchMessage,Constant\ constant)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00248}00248\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00249}00249\ \ \ \ \ \ \ \ \ Constant\ savedConstant;}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00250}00250\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_serialization_a2a05c5aff4847073ca0fb887d20ac485}{serialize}}(stream,savedConstant);}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00251}00251\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(savedConstant\ !=\ constant)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00252}00252\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00253}00253\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{struct_serialization_1_1_fatal_serialization_exception}{FatalSerializationException}}(std::string(constantMismatchMessage)\ +\ \textcolor{stringliteral}{"{}:\ loaded\ "{}}\ +\ std::to\_string(savedConstant)\ +\ \textcolor{stringliteral}{"{}\ but\ was\ expecting\ "{}}\ +\ std::to\_string(constant));}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00254}00254\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00255}00255\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00256}00256\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Constant>}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00257}\mbox{\hyperlink{namespace_serialization_aa8b915b1069c6ce250def8c15606cbbf}{00257}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_a1b9abe1b3bbe0732eb1f8d900be0f3aa}{serializeConstant}}(\mbox{\hyperlink{struct_serialization_1_1_output_stream}{OutputStream}}\&\ stream,\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ constantMismatchMessage,Constant\ constant)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00258}00258\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00259}00259\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_serialization_a2a05c5aff4847073ca0fb887d20ac485}{serialize}}(stream,constant);}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00260}00260\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00261}00261\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00262}00262\ \ \ \ \ \textcolor{comment}{//\ Serialize\ containers.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00263}00263\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Stream>}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00264}\mbox{\hyperlink{namespace_serialization_a9af40bc27e193e72b3946d97f4f40cb2}{00264}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_a2a05c5aff4847073ca0fb887d20ac485}{serialize}}(\mbox{\hyperlink{classrapidjson_1_1_stream}{Stream}}\&\ stream,std::string\&\ \textcolor{keywordtype}{string})}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00265}00265\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00266}00266\ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{size\_t}\ max\_size\ =\ \mbox{\hyperlink{namespacesysio_1_1chain_1_1wasm__constraints_acd9b29a2807d996ee0e61249e1f5fde3}{sysio::chain::wasm\_constraints::maximum\_func\_local\_bytes}};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00267}00267\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}}\ size\ =\ \textcolor{keywordtype}{string}.size();}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00268}00268\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_serialization_a1ea6ecb2f4de00340f936648398f4f66}{serializeVarUInt32}}(stream,size);}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00269}00269\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(Stream::isInput)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00270}00270\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00271}00271\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Advance\ the\ stream\ before\ resizing\ the\ string:}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00272}00272\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ try\ to\ get\ a\ serialization\ exception\ before\ making\ a\ huge\ allocation\ for\ malformed\ input.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00273}00273\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}*\ inputBytes\ =\ stream.advance(size);}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00274}00274\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (size\ >=\ max\_size\ \&\&\ \mbox{\hyperlink{namespace_w_a_s_m_a5c8e6887571b126ae374d7cb5c38eac4}{WASM::check\_limits}})}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00275}00275\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{struct_serialization_1_1_fatal_serialization_exception}{FatalSerializationException}}(std::string(\textcolor{stringliteral}{"{}Trying\ to\ deserialize\ string\ of\ size\ :\ "{}}\ +\ std::to\_string((\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}})size)\ +\ \textcolor{stringliteral}{"{},\ which\ is\ over\ by\ "{}}+std::to\_string(size\ -\/\ max\_size\ )+\textcolor{stringliteral}{"{}\ bytes"{}}));}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00276}00276\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}.resize(size);}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00277}00277\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_ae785d5badbf1f08b491af31f32a135a1}{memcpy}}(\textcolor{keyword}{const\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\textcolor{keywordtype}{string}.data()),inputBytes,size);}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00278}00278\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}.shrink\_to\_fit();}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00279}00279\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00280}00280\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{\ \mbox{\hyperlink{namespace_serialization_aee190f414695b837a7b75cd86adc516f}{serializeBytes}}(stream,(\mbox{\hyperlink{_basic_types_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}*)\textcolor{keywordtype}{string}.c\_str(),size);\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00281}00281\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00282}00282\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00283}00283\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Stream,\textcolor{keyword}{typename}\ Element,\textcolor{keyword}{typename}\ Allocator,\textcolor{keyword}{typename}\ SerializeElement>}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00284}\mbox{\hyperlink{namespace_serialization_a4eb4f7ddb9c392ea5af0205ef8e4e987}{00284}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_a4eb4f7ddb9c392ea5af0205ef8e4e987}{serializeArray}}(\mbox{\hyperlink{classrapidjson_1_1_stream}{Stream}}\&\ stream,std::vector<Element,Allocator>\&\ vector,SerializeElement\ serializeElement)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00285}00285\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00286}00286\ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{size\_t}\ max\_size\ =\ \mbox{\hyperlink{namespacesysio_1_1chain_1_1wasm__constraints_acd9b29a2807d996ee0e61249e1f5fde3}{sysio::chain::wasm\_constraints::maximum\_func\_local\_bytes}};}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00287}00287\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}}\ size\ =\ vector.size();}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00288}00288\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_serialization_a1ea6ecb2f4de00340f936648398f4f66}{serializeVarUInt32}}(stream,size);}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00289}00289\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(Stream::isInput)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00290}00290\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00291}00291\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Grow\ the\ vector\ one\ element\ at\ a\ time:}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00292}00292\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ try\ to\ get\ a\ serialization\ exception\ before\ making\ a\ huge\ allocation\ for\ malformed\ input.}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00293}00293\ \ \ \ \ \ \ \ \ \ \ \ \ vector.clear();}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00294}00294\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (size\ >=\ max\_size\ \&\&\ \mbox{\hyperlink{namespace_w_a_s_m_a5c8e6887571b126ae374d7cb5c38eac4}{WASM::check\_limits}})}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00295}00295\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{struct_serialization_1_1_fatal_serialization_exception}{FatalSerializationException}}(std::string(\textcolor{stringliteral}{"{}Trying\ to\ deserialize\ array\ of\ size\ :\ "{}}\ +\ std::to\_string((\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}})size)\ +\ \textcolor{stringliteral}{"{},\ which\ is\ over\ by\ "{}}+std::to\_string(size\ -\/\ max\_size\ )+\textcolor{stringliteral}{"{}\ bytes"{}}));}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00296}00296\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}}\ index\ =\ 0;index\ <\ size;++index)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00297}00297\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00298}00298\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vector.push\_back(Element());}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00299}00299\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ serializeElement(stream,vector.back());}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00300}00300\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00301}00301\ \ \ \ \ \ \ \ \ \ vector.shrink\_to\_fit();}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00302}00302\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00303}00303\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00304}00304\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00305}00305\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{_basic_types_8h_af4b74e6229378a16db5de05834273c54}{Uptr}}\ index\ =\ 0;index\ <\ vector.size();++index)\ \{\ serializeElement(stream,vector[index]);\ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00306}00306\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00307}00307\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00308}00308\ }
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00309}00309\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Stream,\textcolor{keyword}{typename}\ Element,\textcolor{keyword}{typename}\ Allocator>}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00310}\mbox{\hyperlink{namespace_serialization_a28ab1a84c8ac0af04f22000d514e17b5}{00310}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_serialization_a2a05c5aff4847073ca0fb887d20ac485}{serialize}}(\mbox{\hyperlink{classrapidjson_1_1_stream}{Stream}}\&\ stream,std::vector<Element,Allocator>\&\ vector)}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00311}00311\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00312}00312\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_serialization_a4eb4f7ddb9c392ea5af0205ef8e4e987}{serializeArray}}(stream,vector,[](\mbox{\hyperlink{classrapidjson_1_1_stream}{Stream}}\&\ stream,Element\&\ element)\{\mbox{\hyperlink{namespace_serialization_a2a05c5aff4847073ca0fb887d20ac485}{serialize}}(stream,element);\});}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00313}00313\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_serialization_8h_source_l00314}00314\ \}}

\end{DoxyCode}
