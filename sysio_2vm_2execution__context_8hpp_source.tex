\doxysection{execution\+\_\+context.\+hpp}
\hypertarget{sysio_2vm_2execution__context_8hpp_source}{}\label{sysio_2vm_2execution__context_8hpp_source}\index{libraries/sys-\/vm/include/sysio/sysio/vm/execution\_context.hpp@{libraries/sys-\/vm/include/sysio/sysio/vm/execution\_context.hpp}}
\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00001}00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00003}00003\ \textcolor{preprocessor}{\#include\ <sysio/vm/allocator.hpp>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00004}00004\ \textcolor{preprocessor}{\#include\ <sysio/vm/constants.hpp>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00005}00005\ \textcolor{preprocessor}{\#include\ <sysio/vm/exceptions.hpp>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00006}00006\ \textcolor{preprocessor}{\#include\ <sysio/vm/execution\_interface.hpp>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00007}00007\ \textcolor{preprocessor}{\#include\ <sysio/vm/host\_function.hpp>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00008}00008\ \textcolor{preprocessor}{\#include\ <sysio/vm/opcodes.hpp>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00009}00009\ \textcolor{preprocessor}{\#include\ <sysio/vm/signals.hpp>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00010}00010\ \textcolor{preprocessor}{\#include\ <sysio/vm/types.hpp>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00011}00011\ \textcolor{preprocessor}{\#include\ <sysio/vm/utils.hpp>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00012}00012\ \textcolor{preprocessor}{\#include\ <sysio/vm/wasm\_stack.hpp>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00014}00014\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00015}00015\ \textcolor{preprocessor}{\#include\ <cassert>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00016}00016\ \textcolor{preprocessor}{\#include\ <signal.h>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00017}00017\ \textcolor{preprocessor}{\#include\ <cstddef>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00018}00018\ \textcolor{preprocessor}{\#include\ <cstdint>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00019}00019\ \textcolor{preprocessor}{\#include\ <cstring>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00020}00020\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00021}00021\ \textcolor{preprocessor}{\#include\ <limits>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00022}00022\ \textcolor{preprocessor}{\#include\ <optional>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00023}00023\ \textcolor{preprocessor}{\#include\ <string\_view>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00024}00024\ \textcolor{preprocessor}{\#include\ <system\_error>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00025}00025\ \textcolor{preprocessor}{\#include\ <utility>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00026}00026\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00027}00027\ \textcolor{comment}{//\ OSX\ requires\ \_XOPEN\_SOURCE\ to\ \#include\ <ucontext.h>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00028}00028\ \textcolor{preprocessor}{\#ifdef\ \_\_APPLE\_\_}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00029}00029\ \textcolor{preprocessor}{\#ifndef\ \_XOPEN\_SOURCE}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00030}00030\ \textcolor{preprocessor}{\#define\ \_XOPEN\_SOURCE\ 700}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00031}00031\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00032}00032\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00033}00033\ \textcolor{preprocessor}{\#include\ <ucontext.h>}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00034}00034\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00035}00035\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacesysio}{sysio}}\ \{\ \textcolor{keyword}{namespace\ }vm\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00036}00036\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00037}00037\ \ \ \ \textcolor{keyword}{struct\ }null\_host\_functions\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00038}00038\ \ \ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}...\ \mbox{\hyperlink{namespace_a}{A}}>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00039}\mbox{\hyperlink{structsysio_1_1vm_1_1null__host__functions_a375db3feff0b1a5908ff22b34ddbf461}{00039}}\ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structsysio_1_1vm_1_1null__host__functions_a375db3feff0b1a5908ff22b34ddbf461}{operator()}}(\mbox{\hyperlink{namespace_a}{A}}\&\&...)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00040}00040\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sys-vm_2include_2sysio_2sysio_2vm_2exceptions_8hpp_a2b63f5625ff6dcb6dedeb3ae08c4584a}{SYS\_VM\_ASSERT}}(\textcolor{keyword}{false},\ wasm\_interpreter\_exception,}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00041}00041\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Should\ never\ get\ here\ because\ it's\ impossible\ to\ link\ a\ module\ "{}}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00042}00042\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}that\ imports\ any\ host\ functions,\ when\ no\ host\ functions\ are\ available"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00043}00043\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00044}00044\ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00045}00045\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00046}00046\ \ \ \ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedetail}{detail}}\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00047}00047\ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ HostFunctions>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00048}00048\ \ \ \ \ \ \ \textcolor{keyword}{struct\ }host\_type\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00049}\mbox{\hyperlink{structsysio_1_1vm_1_1detail_1_1host__type_a301088af82c32d4923853f30dd482df6}{00049}}\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structsysio_1_1vm_1_1detail_1_1host__type_a301088af82c32d4923853f30dd482df6}{type}}\ =\ \textcolor{keyword}{typename}\ HostFunctions::host\_type\_t;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00050}00050\ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00051}00051\ \ \ \ \ \ \ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00052}00052\ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structsysio_1_1vm_1_1detail_1_1host__type}{host\_type}}<\mbox{\hyperlink{namespacestd}{std}}::nullptr\_t>\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00053}\mbox{\hyperlink{structsysio_1_1vm_1_1detail_1_1host__type_3_01std_1_1nullptr__t_01_4_a33bb14601106c45a2c946204a393473d}{00053}}\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structsysio_1_1vm_1_1detail_1_1host__type_3_01std_1_1nullptr__t_01_4_a33bb14601106c45a2c946204a393473d}{type}}\ =\ std::nullptr\_t;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00054}00054\ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00055}00055\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00056}00056\ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ HF>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00057}\mbox{\hyperlink{namespacesysio_1_1vm_1_1detail_a5a6e1b013a967116383cbeb09297a5a5}{00057}}\ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespacesysio_1_1vm_1_1detail_a5a6e1b013a967116383cbeb09297a5a5}{host\_type\_t}}\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structsysio_1_1vm_1_1detail_1_1host__type_a301088af82c32d4923853f30dd482df6}{host\_type<HF>::type}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00058}00058\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00059}00059\ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ HostFunctions>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00060}00060\ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structsysio_1_1vm_1_1detail_1_1type__converter}{type\_converter}}\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00061}\mbox{\hyperlink{structsysio_1_1vm_1_1detail_1_1type__converter_a2ff2abbe964f4ee1f932a6f556657e9f}{00061}}\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structsysio_1_1vm_1_1detail_1_1type__converter_a2ff2abbe964f4ee1f932a6f556657e9f}{type}}\ =\ \textcolor{keyword}{typename}\ HostFunctions::type\_converter\_t;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00062}00062\ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00063}00063\ \ \ \ \ \ \ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00064}00064\ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structsysio_1_1vm_1_1detail_1_1type__converter}{type\_converter}}<\mbox{\hyperlink{namespacestd}{std}}::nullptr\_t>\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00065}\mbox{\hyperlink{structsysio_1_1vm_1_1detail_1_1type__converter_3_01std_1_1nullptr__t_01_4_acdc35110f82a88fca0da487cc1a6f7fb}{00065}}\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structsysio_1_1vm_1_1type__converter}{type}}\ =\ \mbox{\hyperlink{structsysio_1_1vm_1_1type__converter}{sysio::vm::type\_converter<std::nullptr\_t,\ sysio::vm::execution\_interface>}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00066}00066\ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00067}00067\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00068}00068\ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ HF>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00069}\mbox{\hyperlink{namespacesysio_1_1vm_1_1detail_a57bb3eb0b0c335a0007e53cbee0fb777}{00069}}\ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespacesysio_1_1vm_1_1detail_a57bb3eb0b0c335a0007e53cbee0fb777}{type\_converter\_t}}\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structsysio_1_1vm_1_1detail_1_1type__converter}{type\_converter<HF>::type}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00070}00070\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00071}00071\ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ HostFunctions>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00072}00072\ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structsysio_1_1vm_1_1detail_1_1host__invoker}{host\_invoker}}\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00073}\mbox{\hyperlink{structsysio_1_1vm_1_1detail_1_1host__invoker_a348b21c3f84cc85fa522b174eab6b61a}{00073}}\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structsysio_1_1vm_1_1detail_1_1host__invoker_a348b21c3f84cc85fa522b174eab6b61a}{type}}\ =\ HostFunctions;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00074}00074\ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00075}00075\ \ \ \ \ \ \ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00076}00076\ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structsysio_1_1vm_1_1detail_1_1host__invoker}{host\_invoker}}<\mbox{\hyperlink{namespacestd}{std}}::nullptr\_t>\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00077}\mbox{\hyperlink{structsysio_1_1vm_1_1detail_1_1host__invoker_3_01std_1_1nullptr__t_01_4_adcd0652470c006a6f9ee73b464f53b54}{00077}}\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structsysio_1_1vm_1_1null__host__functions}{type}}\ =\ \mbox{\hyperlink{structsysio_1_1vm_1_1null__host__functions}{null\_host\_functions}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00078}00078\ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00079}00079\ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ HF>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00080}\mbox{\hyperlink{namespacesysio_1_1vm_1_1detail_affd752998217b56f9a027d41f1e47d34}{00080}}\ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespacesysio_1_1vm_1_1detail_affd752998217b56f9a027d41f1e47d34}{host\_invoker\_t}}\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structsysio_1_1vm_1_1detail_1_1host__invoker_a348b21c3f84cc85fa522b174eab6b61a}{host\_invoker<HF>::type}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00081}00081\ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00082}00082\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00083}00083\ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Derived,\ \textcolor{keyword}{typename}\ Host>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00084}00084\ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base}{execution\_context\_base}}\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00085}00085\ \ \ \ \ \ \ \textcolor{keyword}{using\ }host\_type\ \ =\ \mbox{\hyperlink{namespacesysio_1_1vm_1_1detail_a5a6e1b013a967116383cbeb09297a5a5}{detail::host\_type\_t<Host>}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00086}00086\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00087}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a7e732e0cf69fe1d17790eb404c18f7a6}{00087}}\ \ \ \ \ \ \ Derived\&\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a7e732e0cf69fe1d17790eb404c18f7a6}{derived}}()\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}Derived\&\textcolor{keyword}{>}(*this);\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00088}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a20cde357ba3b172a48ab8d7c5477b703}{00088}}\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a20cde357ba3b172a48ab8d7c5477b703}{execution\_context\_base}}(\mbox{\hyperlink{structsysio_1_1vm_1_1module}{module}}\&\ m)\ :\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a10264d78efee5ae7720bddc2853c1bc8}{\_mod}}(m)\ \{\}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00089}00089\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00090}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a500f64a4c221a4b05a726d018c0ece47}{00090}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{stdint_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\_t}}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a500f64a4c221a4b05a726d018c0ece47}{grow\_linear\_memory}}(\mbox{\hyperlink{stdint_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\_t}}\ pages)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00091}00091\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{stdint_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\_t}}\ sz\ =\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_ae39c6d22c72f01ce0b6e795f009dd201}{\_wasm\_alloc}}-\/>\mbox{\hyperlink{classsysio_1_1vm_1_1wasm__allocator_ac7b27cff26088c7ad01afb6118d547d2}{get\_current\_page}}();}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00092}00092\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pages\ <\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00093}00093\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sz\ +\ pages\ <\ 0)}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00094}00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00095}00095\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_ae39c6d22c72f01ce0b6e795f009dd201}{\_wasm\_alloc}}-\/>\mbox{\hyperlink{classsysio_1_1vm_1_1wasm__allocator_a50a1cea0225ea715ba193c7001033770}{free}}<\textcolor{keywordtype}{char}>(-\/pages);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00096}00096\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00097}00097\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a10264d78efee5ae7720bddc2853c1bc8}{\_mod}}.\mbox{\hyperlink{structsysio_1_1vm_1_1module_a9521678c346f576e21097c13939e8b8f}{memories}}.size()\ ||\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a3451a7f27c6424c8989a515b2ff8c4f0}{\_max\_pages}}\ -\/\ sz\ <\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\textcolor{keyword}{>}(pages)\ ||}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00098}00098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a10264d78efee5ae7720bddc2853c1bc8}{\_mod}}.\mbox{\hyperlink{structsysio_1_1vm_1_1module_a9521678c346f576e21097c13939e8b8f}{memories}}[0].limits.flags\ \&\&\ (\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{stdint_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\_t}}\textcolor{keyword}{>}(\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a10264d78efee5ae7720bddc2853c1bc8}{\_mod}}.\mbox{\hyperlink{structsysio_1_1vm_1_1module_a9521678c346f576e21097c13939e8b8f}{memories}}[0].limits.maximum)\ -\/\ sz\ <\ pages)))}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00099}00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00100}00100\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_ae39c6d22c72f01ce0b6e795f009dd201}{\_wasm\_alloc}}-\/>\mbox{\hyperlink{classsysio_1_1vm_1_1wasm__allocator_a5d174bad6aeb4700da180e9c00634dbd}{alloc}}<\textcolor{keywordtype}{char}>(pages);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00101}00101\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00102}00102\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ sz;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00103}00103\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00104}00104\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00105}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_af7a7b2061cdfaae55d8125e13e5be185}{00105}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{stdint_8h_ab1967d8591af1a4e48c37fd2b0f184d0}{int32\_t}}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_af7a7b2061cdfaae55d8125e13e5be185}{current\_linear\_memory}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_ae39c6d22c72f01ce0b6e795f009dd201}{\_wasm\_alloc}}-\/>\mbox{\hyperlink{classsysio_1_1vm_1_1wasm__allocator_ac7b27cff26088c7ad01afb6118d547d2}{get\_current\_page}}();\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00106}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_af8ec54d93e1bcf8c2bbb694ff6bdc5cb}{00106}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_af8ec54d93e1bcf8c2bbb694ff6bdc5cb}{exit}}(std::error\_code\ err\ =\ std::error\_code())\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00107}00107\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ FIXME:\ system\_error?}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00108}00108\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a60328b847940f19ecaf6de0a4d9de4aa}{\_error\_code}}\ =\ err;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00109}00109\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ wasm\_exit\_exception\{\textcolor{stringliteral}{"{}Exiting"{}}\};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00110}00110\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00111}00111\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00112}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a863571b049ae80af9b9384a0114c8e82}{00112}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{module}\&\ \ \ \ \ get\_module()\ \{\ return\ \_mod;\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00113}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a90a6d0025dbbccab0ec2f0185197d1ae}{00113}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a90a6d0025dbbccab0ec2f0185197d1ae}{set\_wasm\_allocator}}(\mbox{\hyperlink{classsysio_1_1vm_1_1wasm__allocator}{wasm\_allocator}}*\ alloc)\ \{\ \_wasm\_alloc\ =\ alloc;\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00114}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a7aaca95cd6fbe51d568f1290e54eb017}{00114}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a7aaca95cd6fbe51d568f1290e54eb017}{get\_wasm\_allocator}}()\ \{\ \textcolor{keywordflow}{return}\ \_wasm\_alloc;\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00115}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_aad1ab4903de26a0564c8a02f05ac4fe6}{00115}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{char}*\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_aad1ab4903de26a0564c8a02f05ac4fe6}{linear\_memory}}()\ \{\ \textcolor{keywordflow}{return}\ \_linear\_memory;\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00116}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a0b4188bd88810e7208c403c67ddd5354}{00116}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\&\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a0b4188bd88810e7208c403c67ddd5354}{get\_operand\_stack}}()\ \{\ \textcolor{keywordflow}{return}\ \_os;\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00117}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_ab889ea2c8f14eeb3a3df360125debb90}{00117}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_ab889ea2c8f14eeb3a3df360125debb90}{get\_operand\_stack}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \_os;\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00118}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_ab48a9c325fcb2d2a4b532396eb2d65f3}{00118}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_ab48a9c325fcb2d2a4b532396eb2d65f3}{get\_interface}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structsysio_1_1vm_1_1execution__interface}{execution\_interface}}\{\ \_linear\_memory,\ \&\_os\ \};\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00119}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_ae3875fa4e318d090889db24536fce550}{00119}}\ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_ae3875fa4e318d090889db24536fce550}{set\_max\_pages}}(std::uint32\_t\ \mbox{\hyperlink{namespacesysio_1_1vm_a0ae6751a77293216df4656dee5081eb2a95b0fd1e8f1e450ae134af180be894f3}{max\_pages}})\ \{\ \_max\_pages\ =\ std::min(\mbox{\hyperlink{namespacesysio_1_1vm_a0ae6751a77293216df4656dee5081eb2a95b0fd1e8f1e450ae134af180be894f3}{max\_pages}},\ \textcolor{keyword}{static\_cast<}std::uint32\_t\textcolor{keyword}{>}(\mbox{\hyperlink{namespacesysio_1_1vm_a0ae6751a77293216df4656dee5081eb2a95b0fd1e8f1e450ae134af180be894f3}{vm::max\_pages}}));\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00120}00120\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00121}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a689fcf5cdec89398a3cf05e7834546dc}{00121}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ std::error\_code\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a689fcf5cdec89398a3cf05e7834546dc}{get\_error\_code}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \_error\_code;\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00122}00122\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00123}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a7ff12ef5c12cdbdaf4e22014846079e5}{00123}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a7ff12ef5c12cdbdaf4e22014846079e5}{reset}}()\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00124}00124\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sys-vm_2include_2sysio_2sysio_2vm_2exceptions_8hpp_a2b63f5625ff6dcb6dedeb3ae08c4584a}{SYS\_VM\_ASSERT}}(\_mod.error\ ==\ \textcolor{keyword}{nullptr},\ wasm\_interpreter\_exception,\ \_mod.error);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00125}00125\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00126}00126\ \ \ \ \ \ \ \ \ \ \_linear\_memory\ =\ \_wasm\_alloc-\/>get\_base\_ptr<\textcolor{keywordtype}{char}>();}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00127}00127\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\_mod.memories.size())\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00128}00128\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sys-vm_2include_2sysio_2sysio_2vm_2exceptions_8hpp_a2b63f5625ff6dcb6dedeb3ae08c4584a}{SYS\_VM\_ASSERT}}(\_mod.memories[0].limits.initial\ <=\ \_max\_pages,\ wasm\_bad\_alloc,\ \textcolor{stringliteral}{"{}Cannot\ allocate\ initial\ linear\ memory."{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00129}00129\ \ \ \ \ \ \ \ \ \ \ \ \ \_wasm\_alloc-\/>reset(\_mod.memories[0].limits.initial);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00130}00130\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00131}00131\ \ \ \ \ \ \ \ \ \ \ \ \ \_wasm\_alloc-\/>reset();}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00132}00132\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00133}00133\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ i\ =\ 0;\ i\ <\ \_mod.data.size();\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00134}00134\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ data\_seg\ =\ \_mod.data[i];}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00135}00135\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ offset\ =\ data\_seg.offset.value.i32;\ \textcolor{comment}{//\ force\ to\ unsigned}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00136}00136\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ available\_memory\ =\ \ \_mod.memories[0].limits.initial\ *\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacesysio_1_1vm_a0ae6751a77293216df4656dee5081eb2a10108b6260714ad13914454c1dd1ec8f}{page\_size}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00137}00137\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ required\_memory\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}}\textcolor{keyword}{>}(offset)\ +\ data\_seg.data.size();}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00138}00138\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sys-vm_2include_2sysio_2sysio_2vm_2exceptions_8hpp_a2b63f5625ff6dcb6dedeb3ae08c4584a}{SYS\_VM\_ASSERT}}(required\_memory\ <=\ available\_memory,\ wasm\_memory\_exception,\ \textcolor{stringliteral}{"{}data\ out\ of\ range"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00139}00139\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ addr\ =\ \_linear\_memory\ +\ offset;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00140}00140\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_ae785d5badbf1f08b491af31f32a135a1}{memcpy}}((\textcolor{keywordtype}{char}*)(addr),\ data\_seg.data.raw(),\ data\_seg.data.size());}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00141}00141\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00142}00142\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00143}00143\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ reset\ the\ mutable\ globals}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00144}00144\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ i\ =\ 0;\ i\ <\ \_mod.globals.size();\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00145}00145\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_mod.globals[i].type.mutability)}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00146}00146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_mod.globals[i].current\ =\ \_mod.globals[i].init;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00147}00147\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00148}00148\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00149}00149\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00150}00150\ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Visitor,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00151}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_abc08d4ee8c1657dfd870cb728a202d73}{00151}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ std::optional<operand\_stack\_elem>\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_abc08d4ee8c1657dfd870cb728a202d73}{execute}}(host\_type*\ host,\ Visitor\&\&\ \mbox{\hyperlink{structfc_1_1visitor}{visitor}},\ \textcolor{keyword}{const}\ std::string\_view\ \mbox{\hyperlink{namespacesysio_1_1vm_aea2b0c85e98f4073b07115a97b46ae55a6b56c53a1b24e55124ff7f71bb9817d2}{func}},}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00152}00152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Args...\ args)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00153}00153\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ func\_index\ =\ \_mod.get\_exported\_function(\mbox{\hyperlink{namespacesysio_1_1vm_aea2b0c85e98f4073b07115a97b46ae55a6b56c53a1b24e55124ff7f71bb9817d2}{func}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00154}00154\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ derived().execute(host,\ std::forward<Visitor>(\mbox{\hyperlink{structfc_1_1visitor}{visitor}}),\ func\_index,\ std::forward<Args>(args)...);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00155}00155\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00156}00156\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00157}00157\ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Visitor,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00158}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_ab7566e2440f2d83af6ea733557c06021}{00158}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_ab7566e2440f2d83af6ea733557c06021}{execute\_start}}(host\_type*\ host,\ Visitor\&\&\ \mbox{\hyperlink{structfc_1_1visitor}{visitor}})\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00159}00159\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_mod.start\ !=\ std::numeric\_limits<uint32\_t>::max())}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00160}00160\ \ \ \ \ \ \ \ \ \ \ \ \ derived().execute(host,\ std::forward<Visitor>(\mbox{\hyperlink{structfc_1_1visitor}{visitor}}),\ \_mod.start);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00161}00161\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00162}00162\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00163}00163\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00164}00164\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00165}00165\ \ \ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00166}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a3216ee9d029d8647ced8e787d32f91de}{00166}}\ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a3216ee9d029d8647ced8e787d32f91de}{type\_check\_args}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsysio_1_1vm_1_1func__type}{func\_type}}\&\ ft,\ Args\&\&...)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00167}00167\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sys-vm_2include_2sysio_2sysio_2vm_2exceptions_8hpp_a2b63f5625ff6dcb6dedeb3ae08c4584a}{SYS\_VM\_ASSERT}}(\textcolor{keyword}{sizeof}...(Args)\ ==\ ft.\mbox{\hyperlink{structsysio_1_1vm_1_1func__type_a4280492c32f4103cc575ce3b3808bea6}{param\_types}}.size(),\ wasm\_interpreter\_exception,\ \textcolor{stringliteral}{"{}wrong\ number\ of\ arguments"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00168}00168\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ i\ =\ 0;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00169}00169\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sys-vm_2include_2sysio_2sysio_2vm_2exceptions_8hpp_a2b63f5625ff6dcb6dedeb3ae08c4584a}{SYS\_VM\_ASSERT}}((...\ \&\&\ (\mbox{\hyperlink{namespacesysio_1_1vm_acf952e498ff10f62e2a351976c2522f3}{to\_wasm\_type\_v}}<\mbox{\hyperlink{namespacesysio_1_1vm_1_1detail_a57bb3eb0b0c335a0007e53cbee0fb777}{detail::type\_converter\_t<Host>}},\ Args>\ ==\ ft.\mbox{\hyperlink{structsysio_1_1vm_1_1func__type_a4280492c32f4103cc575ce3b3808bea6}{param\_types}}.at(i++))),\ wasm\_interpreter\_exception,\ \textcolor{stringliteral}{"{}unexpected\ argument\ type"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00170}00170\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00171}00171\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00172}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_adbb09aabc8ed0d1310fde20211c550e5}{00172}}\ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_adbb09aabc8ed0d1310fde20211c550e5}{handle\_signal}}(\textcolor{keywordtype}{int}\ sig)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00173}00173\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}(sig)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00174}00174\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ SIGSEGV:}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00175}00175\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ SIGBUS:}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00176}00176\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ SIGFPE:}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00177}00177\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00178}00178\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00179}00179\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ TODO\ fix\ this\ */}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00180}00180\ \ \ \ \ \ \ \ \ \ \ \ \ assert(!\textcolor{stringliteral}{"{}??????"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00181}00181\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00182}00182\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ wasm\_memory\_exception\{\ \textcolor{stringliteral}{"{}wasm\ memory\ out-\/of-\/bounds"{}}\ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00183}00183\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00184}00184\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00185}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a547ccd31976e472f437163f65a2b2e57}{00185}}\ \ \ \ \ \ \ \textcolor{keywordtype}{char}*\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_linear\_memory\ \ \ \ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00186}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a10264d78efee5ae7720bddc2853c1bc8}{00186}}\ \ \ \ \ \ \ \textcolor{keyword}{module}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_mod;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00187}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_ae39c6d22c72f01ce0b6e795f009dd201}{00187}}\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1wasm__allocator}{wasm\_allocator}}*\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_ae39c6d22c72f01ce0b6e795f009dd201}{\_wasm\_alloc}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00188}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a3451a7f27c6424c8989a515b2ff8c4f0}{00188}}\ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_max\_pages\ =\ \mbox{\hyperlink{namespacesysio_1_1vm_a0ae6751a77293216df4656dee5081eb2a95b0fd1e8f1e450ae134af180be894f3}{max\_pages}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00189}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_afb21eb88496d63b7af1f1329cab1ef08}{00189}}\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_1_1vm_1_1detail_affd752998217b56f9a027d41f1e47d34}{detail::host\_invoker\_t<Host>}}\ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_afb21eb88496d63b7af1f1329cab1ef08}{\_rhf}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00190}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a60328b847940f19ecaf6de0a4d9de4aa}{00190}}\ \ \ \ \ \ \ std::error\_code\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_a60328b847940f19ecaf6de0a4d9de4aa}{\_error\_code}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00191}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_af14c2171e884ca3cbffec0f21d57fceb}{00191}}\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1stack}{operand\_stack}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base_af14c2171e884ca3cbffec0f21d57fceb}{\_os}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00192}00192\ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00193}00193\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00194}\mbox{\hyperlink{structsysio_1_1vm_1_1jit__visitor_a98173812308ca204b1ddc83466bfe639}{00194}}\ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structsysio_1_1vm_1_1jit__visitor}{jit\_visitor}}\ \{\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>\ \mbox{\hyperlink{structsysio_1_1vm_1_1jit__visitor_a98173812308ca204b1ddc83466bfe639}{jit\_visitor}}(\mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}}\&\&)\ \{\}\ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00195}00195\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00196}00196\ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Host>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00197}00197\ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classsysio_1_1vm_1_1null__execution__context}{null\_execution\_context}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base}{execution\_context\_base}}<null\_execution\_context<Host>,\ Host>\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00198}00198\ \ \ \ \ \ \ \textcolor{keyword}{using\ }base\_type\ =\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base}{execution\_context\_base<null\_execution\_context<Host>}},\ Host>;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00199}00199\ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00200}\mbox{\hyperlink{classsysio_1_1vm_1_1null__execution__context_a3102f0a3bbad5da099b3bddbde48507e}{00200}}\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1null__execution__context_a3102f0a3bbad5da099b3bddbde48507e}{null\_execution\_context}}(\mbox{\hyperlink{structsysio_1_1vm_1_1module}{module}}\&\ m,\ std::uint32\_t\ max\_call\_depth)\ :\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base}{base\_type}}(m)\ \{\}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00201}00201\ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00202}00202\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00203}00203\ \ \ \ \textcolor{keyword}{template}<\textcolor{keywordtype}{bool}\ EnableBacktrace>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00204}00204\ \ \ \ \textcolor{keyword}{struct\ }frame\_info\_holder\ \{\};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00205}00205\ \ \ \ \textcolor{keyword}{template}<>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00206}00206\ \ \ \ \textcolor{keyword}{struct\ }frame\_info\_holder<true>\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00207}\mbox{\hyperlink{structsysio_1_1vm_1_1frame__info__holder_3_01true_01_4_afa1e85f2ef0859a6c518fa8dd60fb447}{00207}}\ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ \textcolor{keyword}{volatile}\ \_bottom\_frame\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00208}\mbox{\hyperlink{structsysio_1_1vm_1_1frame__info__holder_3_01true_01_4_a424ebca1dd8442527fd41ae129e10718}{00208}}\ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ \textcolor{keyword}{volatile}\ \_top\_frame\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00209}00209\ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00210}00210\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00211}00211\ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Host,\ \textcolor{keywordtype}{bool}\ EnableBacktrace\ =\ false>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00212}00212\ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classsysio_1_1vm_1_1jit__execution__context}{jit\_execution\_context}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{structsysio_1_1vm_1_1frame__info__holder}{frame\_info\_holder}}<EnableBacktrace>,\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base}{execution\_context\_base}}<jit\_execution\_context<Host,\ EnableBacktrace>,\ Host>\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00213}00213\ \ \ \ \ \ \ \textcolor{keyword}{using\ }base\_type\ =\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base}{execution\_context\_base<jit\_execution\_context<Host,\ EnableBacktrace>}},\ Host>;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00214}00214\ \ \ \ \ \ \ \textcolor{keyword}{using\ }host\_type\ \ =\ \mbox{\hyperlink{namespacesysio_1_1vm_1_1detail_a5a6e1b013a967116383cbeb09297a5a5}{detail::host\_type\_t<Host>}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00215}00215\ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00216}00216\ \ \ \ \ \ \ \textcolor{keyword}{using\ }base\_type::execute;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00217}00217\ \ \ \ \ \ \ \textcolor{keyword}{using\ }base\_type::base\_type;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00218}00218\ \ \ \ \ \ \ \textcolor{keyword}{using\ }base\_type::\_mod;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00219}00219\ \ \ \ \ \ \ \textcolor{keyword}{using\ }base\_type::\_rhf;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00220}00220\ \ \ \ \ \ \ \textcolor{keyword}{using\ }base\_type::\_error\_code;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00221}00221\ \ \ \ \ \ \ \textcolor{keyword}{using\ }base\_type::handle\_signal;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00222}00222\ \ \ \ \ \ \ \textcolor{keyword}{using\ }base\_type::get\_operand\_stack;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00223}00223\ \ \ \ \ \ \ \textcolor{keyword}{using\ }base\_type::linear\_memory;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00224}00224\ \ \ \ \ \ \ \textcolor{keyword}{using\ }base\_type::get\_interface;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00225}00225\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00226}\mbox{\hyperlink{classsysio_1_1vm_1_1jit__execution__context_a96158c3ce116da5d36c4e3d6a1507a2a}{00226}}\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1jit__execution__context_a96158c3ce116da5d36c4e3d6a1507a2a}{jit\_execution\_context}}(\mbox{\hyperlink{structsysio_1_1vm_1_1module}{module}}\&\ m,\ std::uint32\_t\ max\_call\_depth)\ :\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base}{base\_type}}(m),\ \_remaining\_call\_depth(\mbox{\hyperlink{namespacesysio_1_1vm_a0ae6751a77293216df4656dee5081eb2a2b205b0f9a2199e9e6bf7d96d768f15a}{max\_call\_depth}})\ \{\}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00227}00227\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00228}\mbox{\hyperlink{classsysio_1_1vm_1_1jit__execution__context_a6432508a2591567b41af7b8aebea02d4}{00228}}\ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsysio_1_1vm_1_1jit__execution__context_a6432508a2591567b41af7b8aebea02d4}{set\_max\_call\_depth}}(std::uint32\_t\ max\_call\_depth)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00229}00229\ \ \ \ \ \ \ \ \ \ \_remaining\_call\_depth\ =\ \mbox{\hyperlink{namespacesysio_1_1vm_a0ae6751a77293216df4656dee5081eb2a2b205b0f9a2199e9e6bf7d96d768f15a}{max\_call\_depth}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00230}00230\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00231}00231\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00232}\mbox{\hyperlink{classsysio_1_1vm_1_1jit__execution__context_a6bd958664d7f20be65075b631855f33a}{00232}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{unionsysio_1_1vm_1_1native__value}{native\_value}}\ \mbox{\hyperlink{classsysio_1_1vm_1_1jit__execution__context_a6bd958664d7f20be65075b631855f33a}{call\_host\_function}}(\mbox{\hyperlink{unionsysio_1_1vm_1_1native__value}{native\_value}}*\ \mbox{\hyperlink{classsysio_1_1vm_1_1stack}{stack}},\ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ index)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00233}00233\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ ft\ =\ \_mod.get\_function\_type(index);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00234}00234\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ num\_params\ =\ ft.param\_types.size();}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00235}00235\ \textcolor{preprocessor}{\#ifndef\ NDEBUG}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00236}00236\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ original\_operands\ =\ get\_operand\_stack().size();}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00237}00237\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00238}00238\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ i\ =\ 0;\ i\ <\ ft.param\_types.size();\ ++i)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00239}00239\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}(ft.param\_types[i])\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00240}00240\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ i32:\ get\_operand\_stack().push(i32\_const\_t\{\mbox{\hyperlink{classsysio_1_1vm_1_1stack}{stack}}[num\_params\ -\/\ i\ -\/\ 1].i32\});\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00241}00241\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ i64:\ get\_operand\_stack().push(i64\_const\_t\{\mbox{\hyperlink{classsysio_1_1vm_1_1stack}{stack}}[num\_params\ -\/\ i\ -\/\ 1].i64\});\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00242}00242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ f32:\ get\_operand\_stack().push(f32\_const\_t\{\mbox{\hyperlink{classsysio_1_1vm_1_1stack}{stack}}[num\_params\ -\/\ i\ -\/\ 1].f32\});\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00243}00243\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ f64:\ get\_operand\_stack().push(f64\_const\_t\{\mbox{\hyperlink{classsysio_1_1vm_1_1stack}{stack}}[num\_params\ -\/\ i\ -\/\ 1].f64\});\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00244}00244\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:\ assert(!\textcolor{stringliteral}{"{}Unexpected\ type\ in\ param\_types."{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00245}00245\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00246}00246\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00247}00247\ \ \ \ \ \ \ \ \ \ \_rhf(\_host,\ get\_interface(),\ \_mod.import\_functions[index]);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00248}00248\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{unionsysio_1_1vm_1_1native__value}{native\_value}}\ result\{\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}}\{0\}\};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00249}00249\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ guarantee\ that\ the\ junk\ bits\ are\ zero,\ to\ avoid\ problems.}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00250}00250\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ set\_result\ =\ [\&result](\textcolor{keyword}{auto}\ val)\ \{\ std::memcpy(\&result,\ \&val,\ \textcolor{keyword}{sizeof}(val));\ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00251}00251\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(ft.return\_count)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00252}00252\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1operand__stack__elem}{operand\_stack\_elem}}\ el\ =\ get\_operand\_stack().pop();}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00253}00253\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}(ft.return\_type)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00254}00254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ i32:\ set\_result(el.\mbox{\hyperlink{classsysio_1_1vm_1_1operand__stack__elem_a0d0c392cd07bda5183839422f259a175}{to\_ui32}}());\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00255}00255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ i64:\ set\_result(el.\mbox{\hyperlink{classsysio_1_1vm_1_1operand__stack__elem_a88dd4f14ccf18f1b49328e8e37ebe49c}{to\_ui64}}());\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00256}00256\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ f32:\ set\_result(el.\mbox{\hyperlink{classsysio_1_1vm_1_1operand__stack__elem_ac732a8ec4c0bc0fa1dd4c457446449f0}{to\_f32}}());\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00257}00257\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ f64:\ set\_result(el.\mbox{\hyperlink{classsysio_1_1vm_1_1operand__stack__elem_ade755b1588a330ee6ee73917fbf37114}{to\_f64}}());\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00258}00258\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:\ assert(!\textcolor{stringliteral}{"{}Unexpected\ function\ return\ type."{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00259}00259\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00260}00260\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00261}00261\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00262}00262\ \ \ \ \ \ \ \ \ \ assert(get\_operand\_stack().size()\ ==\ original\_operands);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00263}00263\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00264}00264\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00265}00265\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00266}\mbox{\hyperlink{classsysio_1_1vm_1_1jit__execution__context_a55c6536bb63744dab05f72d6690bd3c5}{00266}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsysio_1_1vm_1_1jit__execution__context_a55c6536bb63744dab05f72d6690bd3c5}{reset}}()\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00267}00267\ \ \ \ \ \ \ \ \ \ base\_type::reset();}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00268}00268\ \ \ \ \ \ \ \ \ \ get\_operand\_stack().eat(0);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00269}00269\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00270}00270\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00271}00271\ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00272}\mbox{\hyperlink{classsysio_1_1vm_1_1jit__execution__context_a3a32bce66020501bfe2168765eba95cf}{00272}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ std::optional<operand\_stack\_elem>\ \mbox{\hyperlink{classsysio_1_1vm_1_1jit__execution__context_a3a32bce66020501bfe2168765eba95cf}{execute}}(host\_type*\ host,\ \mbox{\hyperlink{structsysio_1_1vm_1_1jit__visitor}{jit\_visitor}},\ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ func\_index,\ Args...\ args)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00273}00273\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ saved\_host\ =\ \_host;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00274}00274\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ saved\_os\_size\ =\ get\_operand\_stack().size();}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00275}00275\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ g\ =\ \mbox{\hyperlink{structsysio_1_1vm_1_1scope__guard}{scope\_guard}}([\&]()\{\ \_host\ =\ saved\_host;\ get\_operand\_stack().eat(saved\_os\_size);\ \});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00276}00276\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00277}00277\ \ \ \ \ \ \ \ \ \ \_host\ =\ \mbox{\hyperlink{programs_2sysio-launcher_2main_8cpp_a8d747b8417c90b78c386111de7934753}{host}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00278}00278\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00279}00279\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structsysio_1_1vm_1_1func__type}{func\_type}}\&\ ft\ =\ \_mod.get\_function\_type(func\_index);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00280}00280\ \ \ \ \ \ \ \ \ \ this-\/>type\_check\_args(ft,\ \textcolor{keyword}{static\_cast<}Args\&\&\textcolor{keyword}{>}(args)...);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00281}00281\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{unionsysio_1_1vm_1_1native__value}{native\_value}}\ result;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00282}00282\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{unionsysio_1_1vm_1_1native__value}{native\_value}}\ args\_raw[]\ =\ \{\ transform\_arg(\textcolor{keyword}{static\_cast<}Args\&\&\textcolor{keyword}{>}(args))...\ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00283}00283\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00284}00284\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00285}00285\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (func\_index\ <\ \_mod.get\_imported\_functions\_size())\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00286}00286\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::reverse(args\_raw\ +\ 0,\ args\_raw\ +\ \textcolor{keyword}{sizeof}...(Args));}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00287}00287\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ call\_host\_function(args\_raw,\ func\_index);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00288}00288\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00289}00289\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::size\_t\ maximum\_stack\_usage\ =}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00290}00290\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\_mod.maximum\_stack\ +\ 2\ \textcolor{comment}{/*frame\ ptr\ +\ return\ ptr*/})\ *\ (\_remaining\_call\_depth\ +\ 1)\ +}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00291}00291\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}...(Args)\ +\ 4\ \textcolor{comment}{/*\ scratch\ space\ */};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00292}00292\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1stack__allocator}{stack\_allocator}}\ alt\_stack(maximum\_stack\_usage\ *\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{unionsysio_1_1vm_1_1native__value}{native\_value}}));}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00293}00293\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ reserve\ 24\ bytes\ for\ data\ accessed\ by\ inline\ assembly}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00294}00294\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{classsysio_1_1vm_1_1stack}{stack}}\ =\ alt\_stack.\mbox{\hyperlink{classsysio_1_1vm_1_1stack__allocator_aa074c483bd9a1b6ef0b18a0ea869f541}{top}}();}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00295}00295\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classsysio_1_1vm_1_1stack}{stack}})\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00296}00296\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1stack}{stack}}\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\mbox{\hyperlink{classsysio_1_1vm_1_1stack}{stack}})\ -\/\ 24;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00297}00297\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00298}00298\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ fn\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{unionsysio_1_1vm_1_1native__value}{native\_value}}\ (*)(\textcolor{keywordtype}{void}*,\ \textcolor{keywordtype}{void}*)\textcolor{keyword}{>}(\_mod.code[func\_index\ -\/\ \_mod.get\_imported\_functions\_size()].jit\_code\_offset\ +\ \_mod.allocator.\_code\_base);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00299}00299\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00300}00300\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}(EnableBacktrace)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00301}00301\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sigset\_t\ block\_mask;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00302}00302\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sigemptyset(\&block\_mask);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00303}00303\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sigaddset(\&block\_mask,\ SIGPROF);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00304}00304\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pthread\_sigmask(SIG\_BLOCK,\ \&block\_mask,\ nullptr);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00305}00305\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ auto\ restore\ =\ scope\_guard\{[this,\ \&block\_mask]\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00306}00306\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>\_top\_frame\ =\ nullptr;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00307}00307\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>\_bottom\_frame\ =\ nullptr;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00308}00308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pthread\_sigmask(SIG\_UNBLOCK,\ \&block\_mask,\ nullptr);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00309}00309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00310}00310\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00311}00311\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vm::invoke\_with\_signal\_handler([\&]()\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00312}00312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ execute<sizeof...(Args)>(args\_raw,\ fn,\ this,\ base\_type::linear\_memory(),\ stack);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00313}00313\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},\ \&handle\_signal);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00314}00314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00315}00315\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vm::invoke\_with\_signal\_handler([\&]()\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00316}00316\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ execute<\textcolor{keyword}{sizeof}...(Args)>(args\_raw,\ fn,\ \textcolor{keyword}{this},\ base\_type::linear\_memory(),\ \mbox{\hyperlink{classsysio_1_1vm_1_1stack}{stack}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00317}00317\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},\ \&handle\_signal);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00318}00318\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00319}00319\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00320}00320\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(wasm\_exit\_exception\&)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00321}00321\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00322}00322\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00323}00323\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00324}00324\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(!ft.return\_count)}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00325}00325\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00326}00326\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{switch}\ (ft.return\_type)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00327}00327\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespace_native_types_a311886d455d2ab8a224f354d068152e4}{i32}}:\ \textcolor{keywordflow}{return}\ \{i32\_const\_t\{result.i32\}\};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00328}00328\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespace_native_types_afdf3569bb6d1de98f5165a3078f88fab}{i64}}:\ \textcolor{keywordflow}{return}\ \{i64\_const\_t\{result.i64\}\};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00329}00329\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespace_native_types_a23011aa347dea57b6464532524a4c27a}{f32}}:\ \textcolor{keywordflow}{return}\ \{f32\_const\_t\{result.f32\}\};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00330}00330\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespace_native_types_acc49687873d8ecf0740b2d8ec4e19ca4}{f64}}:\ \textcolor{keywordflow}{return}\ \{f64\_const\_t\{result.f64\}\};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00331}00331\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:\ assert(!\textcolor{stringliteral}{"{}Unexpected\ function\ return\ type"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00332}00332\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00333}00333\ \ \ \ \ \ \ \ \ \ \_\_builtin\_unreachable();}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00334}00334\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00335}00335\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00336}00336\ \textcolor{preprocessor}{\#ifdef\ \_\_x86\_64\_\_}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00337}00337\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ backtrace(\textcolor{keywordtype}{void}**\ out,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{gmock__stress__test_8cc_afd9db40e3361ae09188795e8cbe19752}{count}},\ \textcolor{keywordtype}{void}*\ uc)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00338}00338\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(EnableBacktrace);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00339}00339\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ end\ =\ this-\/>\_top\_frame;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00340}00340\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(end\ ==\ \textcolor{keyword}{nullptr})\ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00341}00341\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ rbp;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00342}00342\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ i\ =\ 0;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00343}00343\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(this-\/>\_bottom\_frame)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00344}00344\ \ \ \ \ \ \ \ \ \ \ \ \ rbp\ =\ this-\/>\_bottom\_frame;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00345}00345\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\mbox{\hyperlink{gmock__stress__test_8cc_afd9db40e3361ae09188795e8cbe19752}{count}}\ !=\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00346}00346\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(uc)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00347}00347\ \textcolor{preprocessor}{\#ifdef\ \_\_APPLE\_\_}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00348}00348\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ rip\ =\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\textcolor{keyword}{static\_cast<}ucontext\_t*\textcolor{keyword}{>}(uc)-\/>uc\_mcontext-\/>\_\_ss.\_\_rip);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00349}00349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rbp\ =\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\textcolor{keyword}{static\_cast<}ucontext\_t*\textcolor{keyword}{>}(uc)-\/>uc\_mcontext-\/>\_\_ss.\_\_rbp);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00350}00350\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ rsp\ =\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\textcolor{keyword}{static\_cast<}ucontext\_t*\textcolor{keyword}{>}(uc)-\/>uc\_mcontext-\/>\_\_ss.\_\_rsp);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00351}00351\ \textcolor{preprocessor}{\#elif\ defined\ \_\_FreeBSD\_\_}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00352}00352\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ rip\ =\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\textcolor{keyword}{static\_cast<}ucontext\_t*\textcolor{keyword}{>}(uc)-\/>uc\_mcontext.mc\_rip);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00353}00353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rbp\ =\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\textcolor{keyword}{static\_cast<}ucontext\_t*\textcolor{keyword}{>}(uc)-\/>uc\_mcontext.mc\_rbp);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00354}00354\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ rsp\ =\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\textcolor{keyword}{static\_cast<}ucontext\_t*\textcolor{keyword}{>}(uc)-\/>uc\_mcontext.mc\_rsp);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00355}00355\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00356}00356\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ rip\ =\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\textcolor{keyword}{static\_cast<}ucontext\_t*\textcolor{keyword}{>}(uc)-\/>uc\_mcontext.gregs[REG\_RIP]);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00357}00357\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rbp\ =\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\textcolor{keyword}{static\_cast<}ucontext\_t*\textcolor{keyword}{>}(uc)-\/>uc\_mcontext.gregs[REG\_RBP]);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00358}00358\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ rsp\ =\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\textcolor{keyword}{static\_cast<}ucontext\_t*\textcolor{keyword}{>}(uc)-\/>uc\_mcontext.gregs[REG\_RSP]);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00359}00359\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00360}00360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ out[i++]\ =\ rip;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00361}00361\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ we\ were\ interrupted\ in\ the\ function\ prologue\ or\ epilogue,}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00362}00362\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ avoid\ dropping\ the\ parent\ frame.}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00363}00363\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ code\_base\ =\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\_mod.allocator.get\_code\_start());}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00364}00364\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ code\_end\ =\ code\_base\ +\ \_mod.allocator.\_code\_size;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00365}00365\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(rip\ >=\ code\_base\ \&\&\ rip\ <\ code\_end\ \&\&\ count\ >\ 1)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00366}00366\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ function\ prologue}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00367}00367\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(*\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*\textcolor{keyword}{>}(rip)\ ==\ 0x55)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00368}00368\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(rip\ !=\ *\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}**\textcolor{keyword}{>}(rsp))\ \{\ \textcolor{comment}{//\ Ignore\ fake\ frame\ set\ up\ for\ softfloat\ calls}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00369}00369\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ out[i++]\ =\ *\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}**\textcolor{keyword}{>}(rsp);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00370}00370\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00371}00371\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(rip[0]\ ==\ 0x48\ \&\&\ rip[1]\ ==\ 0x89\ \&\&\ (rip[2]\ ==\ 0xe5\ ||\ rip[2]\ ==\ 0x27))\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00372}00372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}((rip\ -\/\ 1)\ !=\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}**\textcolor{keyword}{>}(rsp)[1])\ \{\ \textcolor{comment}{//\ Ignore\ fake\ frame\ set\ up\ for\ softfloat\ calls}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00373}00373\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ out[i++]\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}**\textcolor{keyword}{>}(rsp)[1];}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00374}00374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00375}00375\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00376}00376\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ function\ epilogue}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00377}00377\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(rip[0]\ ==\ 0xc3)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00378}00378\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ out[i++]\ =\ *\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}**\textcolor{keyword}{>}(rsp);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00379}00379\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00380}00380\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00381}00381\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00382}00382\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rbp\ =\ \_\_builtin\_frame\_address(0);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00383}00383\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00384}00384\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00385}00385\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(i\ <\ \mbox{\hyperlink{gmock__stress__test_8cc_afd9db40e3361ae09188795e8cbe19752}{count}})\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00386}00386\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ rip\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}**\textcolor{keyword}{>}(rbp)[1];}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00387}00387\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(rbp\ ==\ end)\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00388}00388\ \ \ \ \ \ \ \ \ \ \ \ \ out[i++]\ =\ rip;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00389}00389\ \ \ \ \ \ \ \ \ \ \ \ \ rbp\ =\ *\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}**\textcolor{keyword}{>}(rbp);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00390}00390\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00391}00391\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ i;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00392}00392\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00393}00393\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00394}00394\ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ async\_backtrace()\ \{\ \textcolor{keywordflow}{return}\ EnableBacktrace;\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00395}00395\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00396}00396\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00397}00397\ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00398}00398\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00399}00399\ \ \ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00400}\mbox{\hyperlink{classsysio_1_1vm_1_1jit__execution__context_a9186421702dc931bcea9329161edd992}{00400}}\ \ \ \ \ \ \ \mbox{\hyperlink{unionsysio_1_1vm_1_1native__value}{native\_value}}\ \mbox{\hyperlink{classsysio_1_1vm_1_1jit__execution__context_a9186421702dc931bcea9329161edd992}{transform\_arg}}(\mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}}\&\&\ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}})\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00401}00401\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ make\ sure\ that\ the\ garbage\ bits\ are\ always\ zero.}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00402}00402\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{unionsysio_1_1vm_1_1native__value}{native\_value}}\ result;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00403}00403\ \ \ \ \ \ \ \ \ \ std::memset(\&result,\ 0,\ \textcolor{keyword}{sizeof}(result));}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00404}00404\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ tc\ =\ \mbox{\hyperlink{namespacesysio_1_1vm_1_1detail_a57bb3eb0b0c335a0007e53cbee0fb777}{detail::type\_converter\_t<Host>}}\{\_host,\ get\_interface()\};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00405}00405\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ transformed\_value\ =\ detail::resolve\_result(tc,\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{prettywritertest_8cpp_a6283df8c4e365cc8a01727e2d7ad44bf}{T}}\&\&\textcolor{keyword}{>}(\mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}})).data;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00406}00406\ \ \ \ \ \ \ \ \ \ std::memcpy(\&result,\ \&transformed\_value,\ \textcolor{keyword}{sizeof}(transformed\_value));}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00407}00407\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00408}00408\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00409}00409\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00410}00410\ \textcolor{preprocessor}{\#ifdef\ \_\_x86\_64\_\_}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00411}00411\ \ \ \ \ \ \ \textcolor{comment}{/*\ TODO\ abstract\ this\ and\ clean\ this\ up\ a\ bit,\ this\ really\ doesn't\ belong\ here\ */}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00412}00412\ \ \ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keywordtype}{int}\ Count>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00413}00413\ \ \ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{unionsysio_1_1vm_1_1native__value}{native\_value}}\ execute(\mbox{\hyperlink{unionsysio_1_1vm_1_1native__value}{native\_value}}*\ data,\ \mbox{\hyperlink{unionsysio_1_1vm_1_1native__value}{native\_value}}\ (*fun)(\textcolor{keywordtype}{void}*,\ \textcolor{keywordtype}{void}*),\ \mbox{\hyperlink{classsysio_1_1vm_1_1jit__execution__context}{jit\_execution\_context}}*\ \mbox{\hyperlink{structcontext}{context}},\ \textcolor{keywordtype}{void}*\ linear\_memory,\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{classsysio_1_1vm_1_1stack}{stack}})\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00414}00414\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{unionsysio_1_1vm_1_1native__value}{native\_value}})\ ==\ 8,\ \textcolor{stringliteral}{"{}8-\/bytes\ expected\ for\ native\_value"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00415}00415\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{unionsysio_1_1vm_1_1native__value}{native\_value}}\ result;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00416}00416\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ stack\_check\ =\ \mbox{\hyperlink{structcontext}{context}}-\/>\_remaining\_call\_depth;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00417}00417\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO\ refactor\ this\ whole\ thing\ to\ not\ need\ all\ of\ this,\ should\ be\ generated\ from\ the\ backend}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00418}00418\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ currently\ ignoring\ register\ c++17\ warning}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00419}00419\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{register}\ \textcolor{keywordtype}{void}*\ stack\_top\ \textcolor{keyword}{asm}\ (\textcolor{stringliteral}{"{}r12"{}})\ =\ \mbox{\hyperlink{classsysio_1_1vm_1_1stack}{stack}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00420}00420\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 0x1f80\ is\ the\ default\ MXCSR\ value}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00421}00421\ \textcolor{preprocessor}{\#define\ ASM\_CODE(before,\ after)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00422}00422\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ asm\ volatile(\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00423}00423\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}test\ \%[stack\_top],\ \%[stack\_top];\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00424}00424\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}jnz\ 3f;\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00425}00425\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}mov\ \%\%rsp,\ \%[stack\_top];\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00426}00426\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}sub\ \$0x98,\ \%\%rsp;\ "{}\ }\textcolor{comment}{/*\ red-\/zone\ +\ 24\ bytes*/}\textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00427}00427\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}mov\ \%[stack\_top],\ (\%\%rsp);\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00428}00428\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}jmp\ 4f;\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00429}00429\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}3:\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00430}00430\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}mov\ \%\%rsp,\ (\%[stack\_top]);\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00431}00431\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}mov\ \%[stack\_top],\ \%\%rsp;\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00432}00432\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}4:\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00433}00433\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}stmxcsr\ 16(\%\%rsp);\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00434}00434\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}mov\ \$0x1f80,\ \%\%rax;\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00435}00435\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}mov\ \%\%rax,\ 8(\%\%rsp);\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00436}00436\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}ldmxcsr\ 8(\%\%rsp);\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00437}00437\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}mov\ \%[Count],\ \%\%rax;\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00438}00438\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}test\ \%\%rax,\ \%\%rax;\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00439}00439\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}jz\ 2f;\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00440}00440\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}1:\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00441}00441\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}movq\ (\%[data]),\ \%\%r8;\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00442}00442\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}lea\ 8(\%[data]),\ \%[data];\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00443}00443\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}pushq\ \%\%r8;\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00444}00444\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}dec\ \%\%rax;\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00445}00445\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}jnz\ 1b;\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00446}00446\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}2:\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00447}00447\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ before\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00448}00448\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}callq\ *\%[fun];\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00449}00449\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ after\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00450}00450\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}add\ \%[StackOffset],\ \%\%rsp;\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00451}00451\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}ldmxcsr\ 16(\%\%rsp);\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00452}00452\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}mov\ (\%\%rsp),\ \%\%rsp;\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00453}00453\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ }\textcolor{comment}{/*\ Force\ explicit\ register\ allocation,\ because\ otherwise\ it's\ too\ hard\ to\ get\ the\ clobbers\ right.\ */}\textcolor{preprocessor}{\ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00454}00454\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ :\ [result]\ "{}=\&a"{}\ (result),\ }\textcolor{comment}{/*\ output,\ reused\ as\ a\ scratch\ register\ */}\textcolor{preprocessor}{\ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00455}00455\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ [data]\ "{}+d"{}\ (data),\ [fun]\ "{}+c"{}\ (fun),\ [stack\_top]\ "{}+r"{}\ (stack\_top)\ }\textcolor{comment}{/*\ input\ only,\ but\ may\ be\ clobbered\ */}\textcolor{preprocessor}{\ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00456}00456\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ :\ [context]\ "{}D"{}\ (context),\ [linear\_memory]\ "{}S"{}\ (linear\_memory),\ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00457}00457\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ [StackOffset]\ "{}n"{}\ (Count*8),\ [Count]\ "{}n"{}\ (Count),\ "{}b"{}\ (stack\_check)\ }\textcolor{comment}{/*\ input\ */}\textcolor{preprocessor}{\ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00458}00458\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ :\ "{}memory"{},\ "{}cc"{},\ }\textcolor{comment}{/*\ clobber\ */}\textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00459}00459\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ }\textcolor{comment}{/*\ call\ clobbered\ registers,\ that\ are\ not\ otherwise\ used\ */}\textcolor{preprocessor}{\ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00460}00460\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ }\textcolor{comment}{/*"{}rax"{},\ "{}rcx"{},\ "{}rdx"{},\ "{}rsi"{},\ "{}rdi"{},*/}\textcolor{preprocessor}{\ "{}r8"{},\ "{}r9"{},\ "{}r10"{},\ "{}r11"{},\ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00461}00461\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}xmm0"{},\ "{}xmm1"{},\ "{}xmm2"{},\ "{}xmm3"{},\ "{}xmm4"{},\ "{}xmm5"{},\ "{}xmm6"{},\ "{}xmm7"{},\ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00462}00462\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}xmm8"{},\ "{}xmm9"{},\ "{}xmm10"{},\ "{}xmm11"{},\ "{}xmm12"{},\ "{}xmm13"{},\ "{}xmm14"{},\ "{}xmm15"{},\ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00463}00463\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}mm0"{},"{}mm1"{},\ "{}mm2"{},\ "{}mm3"{},\ "{}mm4"{},\ "{}mm5"{},\ "{}mm6"{},\ "{}mm6"{},\ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00464}00464\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}st"{},\ "{}st(1)"{},\ "{}st(2)"{},\ "{}st(3)"{},\ "{}st(4)"{},\ "{}st(5)"{},\ "{}st(6)"{},\ "{}st(7)"{}\ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00465}00465\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ );}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00466}00466\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (!EnableBacktrace)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00467}00467\ \ \ \ \ \ \ \ \ \ \ \ \ ASM\_CODE(\textcolor{stringliteral}{"{}"{}},\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00468}00468\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00469}00469\ \ \ \ \ \ \ \ \ \ \ \ \ ASM\_CODE(\textcolor{stringliteral}{"{}movq\ \%\%rbp,\ 8(\%[context]);\ "{}},}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00470}00470\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}xor\ \%[fun],\ \%[fun];\ "{}}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00471}00471\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}mov\ \%[fun],\ 8(\%[context]);\ "{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00472}00472\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00473}00473\ \textcolor{preprocessor}{\#undef\ ASM\_CODE}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00474}00474\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00475}00475\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00476}00476\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00477}00477\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00478}\mbox{\hyperlink{classsysio_1_1vm_1_1jit__execution__context_ab7a88abe7f50acea3cd6ed677934d66a}{00478}}\ \ \ \ \ \ \ host\_type\ *\ \_host\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00479}\mbox{\hyperlink{classsysio_1_1vm_1_1jit__execution__context_abddbc46dcfef76d04aaf37ad3440fec6}{00479}}\ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ \mbox{\hyperlink{classsysio_1_1vm_1_1jit__execution__context_abddbc46dcfef76d04aaf37ad3440fec6}{\_remaining\_call\_depth}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00480}00480\ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00481}00481\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00482}00482\ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Host>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00483}00483\ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context}{execution\_context}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base}{execution\_context\_base}}<execution\_context<Host>,\ Host>\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00484}00484\ \ \ \ \ \ \ \textcolor{keyword}{using\ }base\_type\ =\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base}{execution\_context\_base<execution\_context<Host>}},\ Host>;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00485}00485\ \ \ \ \ \ \ \textcolor{keyword}{using\ }host\_type\ \ =\ \mbox{\hyperlink{namespacesysio_1_1vm_1_1detail_a5a6e1b013a967116383cbeb09297a5a5}{detail::host\_type\_t<Host>}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00486}00486\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00487}00487\ \ \ \ \ \ \ \textcolor{keyword}{using\ }base\_type::\_mod;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00488}00488\ \ \ \ \ \ \ \textcolor{keyword}{using\ }base\_type::\_rhf;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00489}00489\ \ \ \ \ \ \ \textcolor{keyword}{using\ }base\_type::\_error\_code;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00490}00490\ \ \ \ \ \ \ \textcolor{keyword}{using\ }base\_type::handle\_signal;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00491}00491\ \ \ \ \ \ \ \textcolor{keyword}{using\ }base\_type::get\_operand\_stack;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00492}00492\ \ \ \ \ \ \ \textcolor{keyword}{using\ }base\_type::linear\_memory;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00493}00493\ \ \ \ \ \ \ \textcolor{keyword}{using\ }base\_type::get\_interface;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00494}00494\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00495}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_aa909098233a4282b6e3926baef8dc7da}{00495}}\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_aa909098233a4282b6e3926baef8dc7da}{execution\_context}}(\mbox{\hyperlink{structsysio_1_1vm_1_1module}{module}}\&\ m,\ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ max\_call\_depth)}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00496}00496\ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context__base}{base\_type}}(m),\ \_base\_allocator\{\mbox{\hyperlink{namespacesysio_1_1vm_a0ae6751a77293216df4656dee5081eb2a2b205b0f9a2199e9e6bf7d96d768f15a}{max\_call\_depth}}*\mbox{\hyperlink{yubihsm__pkcs11_8c_af82555d15fc1c126f72a5c0566b5389a}{sizeof}}(\mbox{\hyperlink{structsysio_1_1vm_1_1activation__frame}{activation\_frame}})\},}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00497}00497\ \ \ \ \ \ \ \ \ \ \_as\{\mbox{\hyperlink{namespacesysio_1_1vm_a0ae6751a77293216df4656dee5081eb2a2b205b0f9a2199e9e6bf7d96d768f15a}{max\_call\_depth}},\ \_base\_allocator\},\ \_halt(exit\_t\{\})\ \{\}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00498}00498\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00499}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a9388e394c9582cf500f0ed28ffece526}{00499}}\ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a9388e394c9582cf500f0ed28ffece526}{set\_max\_call\_depth}}(\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ max\_call\_depth)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00500}00500\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_trivially\_move\_assignable\_v<call\_stack>,\ \textcolor{stringliteral}{"{}This\ is\ seriously\ broken\ if\ call\_stack\ move\ assignment\ might\ use\ the\ existing\ memory"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00501}00501\ \ \ \ \ \ \ \ \ \ std::size\_t\ mem\_size\ =\ \mbox{\hyperlink{namespacesysio_1_1vm_a0ae6751a77293216df4656dee5081eb2a2b205b0f9a2199e9e6bf7d96d768f15a}{max\_call\_depth}}*\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structsysio_1_1vm_1_1activation__frame}{activation\_frame}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00502}00502\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(mem\_size\ >\ \_base\_allocator.mem\_size)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00503}00503\ \ \ \ \ \ \ \ \ \ \ \ \ \_base\_allocator\ =\ \mbox{\hyperlink{classsysio_1_1vm_1_1bounded__allocator}{bounded\_allocator}}\{mem\_size\};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00504}00504\ \ \ \ \ \ \ \ \ \ \ \ \ \_as\ =\ \mbox{\hyperlink{classsysio_1_1vm_1_1stack}{call\_stack}}\{\mbox{\hyperlink{namespacesysio_1_1vm_a0ae6751a77293216df4656dee5081eb2a2b205b0f9a2199e9e6bf7d96d768f15a}{max\_call\_depth}},\ \_base\_allocator\};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00505}00505\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacesysio_1_1vm_a0ae6751a77293216df4656dee5081eb2a2b205b0f9a2199e9e6bf7d96d768f15a}{max\_call\_depth}}\ !=\ \_as.capacity())\{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00506}00506\ \ \ \ \ \ \ \ \ \ \ \ \ \_base\_allocator.index\ =\ 0;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00507}00507\ \ \ \ \ \ \ \ \ \ \ \ \ \_as\ =\ \mbox{\hyperlink{classsysio_1_1vm_1_1stack}{call\_stack}}\{\mbox{\hyperlink{namespacesysio_1_1vm_a0ae6751a77293216df4656dee5081eb2a2b205b0f9a2199e9e6bf7d96d768f15a}{max\_call\_depth}},\ \_base\_allocator\};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00508}00508\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00509}00509\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00510}00510\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00511}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a60c788efa219316778349ccd3f7ac149}{00511}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a60c788efa219316778349ccd3f7ac149}{call}}(\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ index)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00512}00512\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO\ validate\ index\ is\ valid}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00513}00513\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (index\ <\ \_mod.get\_imported\_functions\_size())\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00514}00514\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO\ validate\ only\ importing\ functions}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00515}00515\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ ft\ =\ \_mod.types[\_mod.imports[index].type.func\_t];}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00516}00516\ \ \ \ \ \ \ \ \ \ \ \ \ type\_check(ft);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00517}00517\ \ \ \ \ \ \ \ \ \ \ \ \ inc\_pc();}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00518}00518\ \ \ \ \ \ \ \ \ \ \ \ \ push\_call(\ \mbox{\hyperlink{structsysio_1_1vm_1_1activation__frame}{activation\_frame}}\{\ \textcolor{keyword}{nullptr},\ 0\ \}\ );}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00519}00519\ \ \ \ \ \ \ \ \ \ \ \ \ \_rhf(\_state.host,\ get\_interface(),\ \_mod.import\_functions[index]);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00520}00520\ \ \ \ \ \ \ \ \ \ \ \ \ pop\_call();}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00521}00521\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00522}00522\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ const\ auto\&\ ft\ =\ \_mod.types[\_mod.functions[index\ -\/\ \_mod.get\_imported\_functions\_size()]];}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00523}00523\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ type\_check(ft);}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00524}00524\ \ \ \ \ \ \ \ \ \ \ \ \ push\_call(index);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00525}00525\ \ \ \ \ \ \ \ \ \ \ \ \ setup\_locals(index);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00526}00526\ \ \ \ \ \ \ \ \ \ \ \ \ set\_pc(\ \_mod.get\_function\_pc(index)\ );}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00527}00527\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00528}00528\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00529}00529\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00530}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a324b6b85edf9bc29b745a25f175e66a2}{00530}}\ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a324b6b85edf9bc29b745a25f175e66a2}{print\_stack}}()\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00531}00531\ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}STACK\ \{\ "{}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00532}00532\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ get\_operand\_stack().size();\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00533}00533\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}("{}}\ <<\ i\ <<\ \textcolor{stringliteral}{"{})"{}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00534}00534\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_1_1vm_a1419a3e0b38f21f92401fe8acde2ef0e}{visit}}(\mbox{\hyperlink{structsysio_1_1vm_1_1overloaded}{overloaded}}\ \{\ [\&](i32\_const\_t\ el)\ \{\ std::cout\ <<\ \textcolor{stringliteral}{"{}i32:"{}}\ <<\ el.data.ui\ <<\ \textcolor{stringliteral}{"{},\ "{}};\ \},}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00535}00535\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&](i64\_const\_t\ el)\ \{\ std::cout\ <<\ \textcolor{stringliteral}{"{}i64:"{}}\ <<\ el.data.ui\ <<\ \textcolor{stringliteral}{"{},\ "{}};\ \},}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00536}00536\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&](f32\_const\_t\ el)\ \{\ std::cout\ <<\ \textcolor{stringliteral}{"{}f32:"{}}\ <<\ el.data.f\ <<\ \textcolor{stringliteral}{"{},\ "{}};\ \},}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00537}00537\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&](f64\_const\_t\ el)\ \{\ std::cout\ <<\ \textcolor{stringliteral}{"{}f64:"{}}\ <<\ el.data.f\ <<\ \textcolor{stringliteral}{"{},\ "{}};\ \},}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00538}00538\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&](\textcolor{keyword}{auto}\ el)\ \{\ std::cout\ <<\ \textcolor{stringliteral}{"{}(INDEX\ "{}}\ <<\ el.index()\ <<\ \textcolor{stringliteral}{"{}),\ "{}};\ \}\ \},\ get\_operand\_stack().get(i));}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00539}00539\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00540}00540\ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}\ \}\(\backslash\)n"{}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00541}00541\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00542}00542\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00543}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a8adde9084f84292135d9502447a3d151}{00543}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a8adde9084f84292135d9502447a3d151}{table\_elem}}(\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ i)\ \{\ \textcolor{keywordflow}{return}\ \_mod.tables[0].table[i];\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00544}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_af0ed85f9c9b953779dd5327d6492d907}{00544}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_af0ed85f9c9b953779dd5327d6492d907}{push\_operand}}(\mbox{\hyperlink{classsysio_1_1vm_1_1operand__stack__elem}{operand\_stack\_elem}}\ el)\ \{\ get\_operand\_stack().push(std::move(el));\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00545}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a44465567a4f7d0fc055e2f26937147c5}{00545}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classsysio_1_1vm_1_1operand__stack__elem}{operand\_stack\_elem}}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a44465567a4f7d0fc055e2f26937147c5}{get\_operand}}(\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ index)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ get\_operand\_stack().\mbox{\hyperlink{classsysio_1_1vm_1_1variant_a103670098d49aaf3b2f5dffdc29d4635}{get}}(\_last\_op\_index\ +\ index);\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00546}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a4d6a1d82f4bffd680dcea40e73cff1c2}{00546}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a4d6a1d82f4bffd680dcea40e73cff1c2}{eat\_operands}}(\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ index)\ \{\ get\_operand\_stack().eat(index);\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00547}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_afa8e916208da6a391c4e1b010a9d200a}{00547}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_afa8e916208da6a391c4e1b010a9d200a}{compact\_operand}}(\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ index)\ \{\ get\_operand\_stack().compact(index);\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00548}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a518f45cfb7fb4c3abed5812a3641d1c5}{00548}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a518f45cfb7fb4c3abed5812a3641d1c5}{set\_operand}}(\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ index,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsysio_1_1vm_1_1operand__stack__elem}{operand\_stack\_elem}}\&\ el)\ \{\ get\_operand\_stack().set(\_last\_op\_index\ +\ index,\ el);\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00549}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a374e353c8844f3cfd8a9ccbb45d497b2}{00549}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a374e353c8844f3cfd8a9ccbb45d497b2}{current\_operands\_index}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ get\_operand\_stack().current\_index();\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00550}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a6ef7ced7cd9333fcdabe6d976cbd9614}{00550}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a6ef7ced7cd9333fcdabe6d976cbd9614}{push\_call}}(\mbox{\hyperlink{structsysio_1_1vm_1_1activation__frame}{activation\_frame}}\&\&\ el)\ \{\ \_as.push(std::move(el));\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00551}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a227dd5aab68c5e7d6e74b73b1e40ff23}{00551}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{structsysio_1_1vm_1_1activation__frame}{activation\_frame}}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a227dd5aab68c5e7d6e74b73b1e40ff23}{pop\_call}}()\ \{\ \textcolor{keywordflow}{return}\ \_as.pop();\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00552}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a528eeab5a299e673aec75baa3de13828}{00552}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a528eeab5a299e673aec75baa3de13828}{call\_depth}}()\textcolor{keyword}{const\ }\{\ \textcolor{keywordflow}{return}\ \_as.size();\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00553}00553\ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ Should\_Exit=false>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00554}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a21bd4599233ebfb38c44900385834dd2}{00554}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a21bd4599233ebfb38c44900385834dd2}{push\_call}}(\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ index)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00555}00555\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1variant}{opcode}}*\ return\_pc\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classsysio_1_1vm_1_1variant}{opcode}}*\textcolor{keyword}{>}(\&\_halt);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00556}00556\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (!Should\_Exit)}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00557}00557\ \ \ \ \ \ \ \ \ \ \ \ \ return\_pc\ =\ \_state.pc\ +\ 1;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00558}00558\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00559}00559\ \ \ \ \ \ \ \ \ \ \_as.push(\ \mbox{\hyperlink{structsysio_1_1vm_1_1activation__frame}{activation\_frame}}\{\ return\_pc,\ \_last\_op\_index\ \}\ );}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00560}00560\ \ \ \ \ \ \ \ \ \ \_last\_op\_index\ =\ get\_operand\_stack().size()\ -\/\ \_mod.get\_function\_type(index).param\_types.size();}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00561}00561\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00562}00562\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00563}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a024ff95f11804856ab7215f3158ad557}{00563}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a024ff95f11804856ab7215f3158ad557}{apply\_pop\_call}}(\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ num\_locals,\ \mbox{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t}}\ return\_count)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00564}00564\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ af\ =\ \_as.pop();}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00565}00565\ \ \ \ \ \ \ \ \ \ \_state.pc\ =\ af.pc;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00566}00566\ \ \ \ \ \ \ \ \ \ \_last\_op\_index\ =\ af.last\_op\_index;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00567}00567\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (return\_count)}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00568}00568\ \ \ \ \ \ \ \ \ \ \ \ \ compact\_operand(get\_operand\_stack().size()\ -\/\ num\_locals\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00569}00569\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00570}00570\ \ \ \ \ \ \ \ \ \ \ \ \ eat\_operands(get\_operand\_stack().size()\ -\/\ num\_locals);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00571}00571\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00572}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_ae44980cab619a70992f3e1257c51bc0d}{00572}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classsysio_1_1vm_1_1operand__stack__elem}{operand\_stack\_elem}}\ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_ae44980cab619a70992f3e1257c51bc0d}{pop\_operand}}()\ \{\ \textcolor{keywordflow}{return}\ get\_operand\_stack().pop();\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00573}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_ab6cbdca4ae880ab831061c9f1630f3d2}{00573}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classsysio_1_1vm_1_1operand__stack__elem}{operand\_stack\_elem}}\&\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_ab6cbdca4ae880ab831061c9f1630f3d2}{peek\_operand}}(\textcolor{keywordtype}{size\_t}\ i\ =\ 0)\ \{\ \textcolor{keywordflow}{return}\ get\_operand\_stack().peek(i);\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00574}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a1c93c0efa6555876a62c5e974578e8ca}{00574}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classsysio_1_1vm_1_1operand__stack__elem}{operand\_stack\_elem}}\ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a1c93c0efa6555876a62c5e974578e8ca}{get\_global}}(\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ index)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00575}00575\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sys-vm_2include_2sysio_2sysio_2vm_2exceptions_8hpp_a2b63f5625ff6dcb6dedeb3ae08c4584a}{SYS\_VM\_ASSERT}}(index\ <\ \_mod.globals.size(),\ wasm\_interpreter\_exception,\ \textcolor{stringliteral}{"{}global\ index\ out\ of\ range"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00576}00576\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ gl\ =\ \_mod.globals[index];}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00577}00577\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (gl.type.content\_type)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00578}00578\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ types::i32:\ \textcolor{keywordflow}{return}\ i32\_const\_t\{\ *(\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}*)\&gl.current.value.i32\ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00579}00579\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ types::i64:\ \textcolor{keywordflow}{return}\ i64\_const\_t\{\ *(\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}}*)\&gl.current.value.i64\ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00580}00580\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ types::f32:\ \textcolor{keywordflow}{return}\ f32\_const\_t\{\ gl.current.value.f32\ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00581}00581\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ types::f64:\ \textcolor{keywordflow}{return}\ f64\_const\_t\{\ gl.current.value.f64\ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00582}00582\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:\ \textcolor{keywordflow}{throw}\ wasm\_interpreter\_exception\{\ \textcolor{stringliteral}{"{}invalid\ global\ type"{}}\ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00583}00583\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00584}00584\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00585}00585\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00586}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_aad39aff1a6353fe5963e8ce63ac53dee}{00586}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_aad39aff1a6353fe5963e8ce63ac53dee}{set\_global}}(\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ index,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsysio_1_1vm_1_1operand__stack__elem}{operand\_stack\_elem}}\&\ el)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00587}00587\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sys-vm_2include_2sysio_2sysio_2vm_2exceptions_8hpp_a2b63f5625ff6dcb6dedeb3ae08c4584a}{SYS\_VM\_ASSERT}}(index\ <\ \_mod.globals.size(),\ wasm\_interpreter\_exception,\ \textcolor{stringliteral}{"{}global\ index\ out\ of\ range"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00588}00588\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ gl\ =\ \_mod.globals[index];}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00589}00589\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sys-vm_2include_2sysio_2sysio_2vm_2exceptions_8hpp_a2b63f5625ff6dcb6dedeb3ae08c4584a}{SYS\_VM\_ASSERT}}(gl.type.mutability,\ wasm\_interpreter\_exception,\ \textcolor{stringliteral}{"{}global\ is\ not\ mutable"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00590}00590\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_1_1vm_a1419a3e0b38f21f92401fe8acde2ef0e}{visit}}(\mbox{\hyperlink{structsysio_1_1vm_1_1overloaded}{overloaded}}\{\ [\&](\textcolor{keyword}{const}\ i32\_const\_t\&\ i)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00591}00591\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sys-vm_2include_2sysio_2sysio_2vm_2exceptions_8hpp_a2b63f5625ff6dcb6dedeb3ae08c4584a}{SYS\_VM\_ASSERT}}(gl.type.content\_type\ ==\ types::i32,\ wasm\_interpreter\_exception,}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00592}00592\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}expected\ i32\ global\ type"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00593}00593\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ gl.current.value.i32\ =\ i.data.ui;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00594}00594\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00595}00595\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&](\textcolor{keyword}{const}\ i64\_const\_t\&\ i)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00596}00596\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sys-vm_2include_2sysio_2sysio_2vm_2exceptions_8hpp_a2b63f5625ff6dcb6dedeb3ae08c4584a}{SYS\_VM\_ASSERT}}(gl.type.content\_type\ ==\ types::i64,\ wasm\_interpreter\_exception,}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00597}00597\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}expected\ i64\ global\ type"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00598}00598\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ gl.current.value.i64\ =\ i.data.ui;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00599}00599\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00600}00600\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&](\textcolor{keyword}{const}\ f32\_const\_t\&\ \mbox{\hyperlink{_x02-_disabled_macros_8cpp_ae28240b98d91d6eb7da702b770490f39}{f}})\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00601}00601\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sys-vm_2include_2sysio_2sysio_2vm_2exceptions_8hpp_a2b63f5625ff6dcb6dedeb3ae08c4584a}{SYS\_VM\_ASSERT}}(gl.type.content\_type\ ==\ types::f32,\ wasm\_interpreter\_exception,}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00602}00602\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}expected\ f32\ global\ type"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00603}00603\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ gl.current.value.f32\ =\ \mbox{\hyperlink{_x02-_disabled_macros_8cpp_ae28240b98d91d6eb7da702b770490f39}{f}}.data.ui;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00604}00604\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00605}00605\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&](\textcolor{keyword}{const}\ f64\_const\_t\&\ \mbox{\hyperlink{_x02-_disabled_macros_8cpp_ae28240b98d91d6eb7da702b770490f39}{f}})\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00606}00606\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sys-vm_2include_2sysio_2sysio_2vm_2exceptions_8hpp_a2b63f5625ff6dcb6dedeb3ae08c4584a}{SYS\_VM\_ASSERT}}(gl.type.content\_type\ ==\ types::f64,\ wasm\_interpreter\_exception,}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00607}00607\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}expected\ f64\ global\ type"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00608}00608\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ gl.current.value.f64\ =\ \mbox{\hyperlink{_x02-_disabled_macros_8cpp_ae28240b98d91d6eb7da702b770490f39}{f}}.data.ui;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00609}00609\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00610}00610\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [](\textcolor{keyword}{auto})\ \{\ \textcolor{keywordflow}{throw}\ wasm\_interpreter\_exception\{\ \textcolor{stringliteral}{"{}invalid\ global\ type"{}}\ \};\ \}\ \},}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00611}00611\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ el);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00612}00612\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00613}00613\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00614}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a4419b32f6b003c3450eb7ccbf3ab07a3}{00614}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a4419b32f6b003c3450eb7ccbf3ab07a3}{is\_true}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classsysio_1_1vm_1_1operand__stack__elem}{operand\_stack\_elem}}\&\ el)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00615}00615\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ ret\_val\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00616}00616\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_1_1vm_a1419a3e0b38f21f92401fe8acde2ef0e}{visit}}(\mbox{\hyperlink{structsysio_1_1vm_1_1overloaded}{overloaded}}\{\ [\&](\textcolor{keyword}{const}\ i32\_const\_t\&\ i32)\ \{\ ret\_val\ =\ i32.data.ui;\ \},}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00617}00617\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&](\textcolor{keyword}{auto})\ \{\ \textcolor{keywordflow}{throw}\ wasm\_invalid\_element\{\ \textcolor{stringliteral}{"{}should\ be\ an\ i32\ type"{}}\ \};\ \}\ \},}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00618}00618\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ el);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00619}00619\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ret\_val;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00620}00620\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00621}00621\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00622}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a00565eb80d96e02a9a9681ddfbca035a}{00622}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a00565eb80d96e02a9a9681ddfbca035a}{type\_check}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsysio_1_1vm_1_1func__type}{func\_type}}\&\ ft)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00623}00623\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ i\ =\ 0;\ i\ <\ ft.\mbox{\hyperlink{structsysio_1_1vm_1_1func__type_a4280492c32f4103cc575ce3b3808bea6}{param\_types}}.size();\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00624}00624\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{unionop}{op}}\ =\ peek\_operand((ft.\mbox{\hyperlink{structsysio_1_1vm_1_1func__type_a4280492c32f4103cc575ce3b3808bea6}{param\_types}}.size()\ -\/\ 1)\ -\/\ i);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00625}00625\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_1_1vm_a1419a3e0b38f21f92401fe8acde2ef0e}{visit}}(\mbox{\hyperlink{structsysio_1_1vm_1_1overloaded}{overloaded}}\{\ [\&](\textcolor{keyword}{const}\ i32\_const\_t\&)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00626}00626\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sys-vm_2include_2sysio_2sysio_2vm_2exceptions_8hpp_a2b63f5625ff6dcb6dedeb3ae08c4584a}{SYS\_VM\_ASSERT}}(ft.\mbox{\hyperlink{structsysio_1_1vm_1_1func__type_a4280492c32f4103cc575ce3b3808bea6}{param\_types}}[i]\ ==\ types::i32,\ wasm\_interpreter\_exception,}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00627}00627\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}function\ param\ type\ mismatch"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00628}00628\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00629}00629\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&](\textcolor{keyword}{const}\ f32\_const\_t\&)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00630}00630\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sys-vm_2include_2sysio_2sysio_2vm_2exceptions_8hpp_a2b63f5625ff6dcb6dedeb3ae08c4584a}{SYS\_VM\_ASSERT}}(ft.\mbox{\hyperlink{structsysio_1_1vm_1_1func__type_a4280492c32f4103cc575ce3b3808bea6}{param\_types}}[i]\ ==\ types::f32,\ wasm\_interpreter\_exception,}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00631}00631\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}function\ param\ type\ mismatch"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00632}00632\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00633}00633\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&](\textcolor{keyword}{const}\ i64\_const\_t\&)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00634}00634\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sys-vm_2include_2sysio_2sysio_2vm_2exceptions_8hpp_a2b63f5625ff6dcb6dedeb3ae08c4584a}{SYS\_VM\_ASSERT}}(ft.\mbox{\hyperlink{structsysio_1_1vm_1_1func__type_a4280492c32f4103cc575ce3b3808bea6}{param\_types}}[i]\ ==\ types::i64,\ wasm\_interpreter\_exception,}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00635}00635\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}function\ param\ type\ mismatch"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00636}00636\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00637}00637\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&](\textcolor{keyword}{const}\ f64\_const\_t\&)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00638}00638\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sys-vm_2include_2sysio_2sysio_2vm_2exceptions_8hpp_a2b63f5625ff6dcb6dedeb3ae08c4584a}{SYS\_VM\_ASSERT}}(ft.\mbox{\hyperlink{structsysio_1_1vm_1_1func__type_a4280492c32f4103cc575ce3b3808bea6}{param\_types}}[i]\ ==\ types::f64,\ wasm\_interpreter\_exception,}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00639}00639\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}function\ param\ type\ mismatch"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00640}00640\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00641}00641\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&](\textcolor{keyword}{auto})\ \{\ \textcolor{keywordflow}{throw}\ wasm\_interpreter\_exception\{\ \textcolor{stringliteral}{"{}function\ param\ invalid\ type"{}}\ \};\ \}\ \},}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00642}00642\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{unionop}{op}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00643}00643\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00644}00644\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00645}00645\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00646}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a13d5ae830bcf60add6d7c162cc520fa7}{00646}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classsysio_1_1vm_1_1variant}{opcode}}*\ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a13d5ae830bcf60add6d7c162cc520fa7}{get\_pc}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \_state.pc;\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00647}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_af627be49e454b4029b9c8e676fa12458}{00647}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_af627be49e454b4029b9c8e676fa12458}{set\_relative\_pc}}(\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ pc\_offset)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00648}00648\ \ \ \ \ \ \ \ \ \ \_state.pc\ =\ \_mod.code[0].code\ +\ pc\_offset;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00649}00649\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00650}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_ac376dabe397c23b0f141d01b77f91c86}{00650}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_ac376dabe397c23b0f141d01b77f91c86}{set\_pc}}(\mbox{\hyperlink{classsysio_1_1vm_1_1variant}{opcode}}*\ pc)\ \{\ \_state.pc\ =\ pc;\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00651}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_abf515593526ce65040eb517e31cc68a8}{00651}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_abf515593526ce65040eb517e31cc68a8}{inc\_pc}}(\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ offset=1)\ \{\ \_state.pc\ +=\ offset;\ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00652}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_aa63d0c2a64f7e646725077bb9c4bb720}{00652}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_aa63d0c2a64f7e646725077bb9c4bb720}{exit}}(std::error\_code\ err\ =\ std::error\_code())\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00653}00653\ \ \ \ \ \ \ \ \ \ \_error\_code\ =\ err;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00654}00654\ \ \ \ \ \ \ \ \ \ \_state.pc\ =\ \&\_halt;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00655}00655\ \ \ \ \ \ \ \ \ \ \_state.exiting\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00656}00656\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00657}00657\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00658}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a7039475f697758ef433a6108c7ad7859}{00658}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a7039475f697758ef433a6108c7ad7859}{reset}}()\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00659}00659\ \ \ \ \ \ \ \ \ \ base\_type::reset();}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00660}00660\ \ \ \ \ \ \ \ \ \ \_state\ =\ execution\_state\{\};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00661}00661\ \ \ \ \ \ \ \ \ \ get\_operand\_stack().eat(\_state.os\_index);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00662}00662\ \ \ \ \ \ \ \ \ \ \_as.eat(\_state.as\_index);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00663}00663\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00664}00664\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00665}00665\ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Visitor,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00666}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a9f4b2e18a075e6f1e981dabe3c8aa770}{00666}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ std::optional<operand\_stack\_elem>\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a9f4b2e18a075e6f1e981dabe3c8aa770}{execute\_func\_table}}(host\_type*\ host,\ Visitor\&\&\ \mbox{\hyperlink{structfc_1_1visitor}{visitor}},\ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ table\_index,}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00667}00667\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Args...\ args)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00668}00668\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ execute(host,\ std::forward<Visitor>(\mbox{\hyperlink{structfc_1_1visitor}{visitor}}),\ table\_elem(table\_index),\ std::forward<Args>(args)...);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00669}00669\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00670}00670\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00671}00671\ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Visitor,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00672}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_aca88f56477415268cc66c85bf2ee1ef7}{00672}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ std::optional<operand\_stack\_elem>\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_aca88f56477415268cc66c85bf2ee1ef7}{execute}}(host\_type*\ host,\ Visitor\&\&\ \mbox{\hyperlink{structfc_1_1visitor}{visitor}},\ \textcolor{keyword}{const}\ std::string\_view\ func,}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00673}00673\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Args...\ args)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00674}00674\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ func\_index\ =\ \_mod.get\_exported\_function(\mbox{\hyperlink{namespacesysio_1_1vm_aea2b0c85e98f4073b07115a97b46ae55a6b56c53a1b24e55124ff7f71bb9817d2}{func}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00675}00675\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ execute(host,\ std::forward<Visitor>(\mbox{\hyperlink{structfc_1_1visitor}{visitor}}),\ func\_index,\ std::forward<Args>(args)...);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00676}00676\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00677}00677\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00678}00678\ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Visitor,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00679}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a26327213bf8a53d99223ea6ce24a0564}{00679}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a26327213bf8a53d99223ea6ce24a0564}{execute\_start}}(host\_type*\ host,\ Visitor\&\&\ \mbox{\hyperlink{structfc_1_1visitor}{visitor}})\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00680}00680\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_mod.start\ !=\ std::numeric\_limits<uint32\_t>::max())}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00681}00681\ \ \ \ \ \ \ \ \ \ \ \ \ execute(host,\ std::forward<Visitor>(\mbox{\hyperlink{structfc_1_1visitor}{visitor}}),\ \_mod.start);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00682}00682\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00683}00683\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00684}00684\ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Visitor,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00685}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a75d4b4e02d1ea3da4aa4a700967a2050}{00685}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ std::optional<operand\_stack\_elem>\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a75d4b4e02d1ea3da4aa4a700967a2050}{execute}}(host\_type*\ host,\ Visitor\&\&\ \mbox{\hyperlink{structfc_1_1visitor}{visitor}},\ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ func\_index,\ Args...\ args)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00686}00686\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sys-vm_2include_2sysio_2sysio_2vm_2exceptions_8hpp_a2b63f5625ff6dcb6dedeb3ae08c4584a}{SYS\_VM\_ASSERT}}(func\_index\ <\ std::numeric\_limits<uint32\_t>::max(),\ wasm\_interpreter\_exception,}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00687}00687\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}cannot\ execute\ function,\ function\ not\ found"{}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00688}00688\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00689}00689\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ last\_last\_op\_index\ =\ \_last\_op\_index;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00690}00690\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00691}00691\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ save\ the\ state\ of\ the\ original\ calling\ context}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00692}00692\ \ \ \ \ \ \ \ \ \ execution\_state\ saved\_state\ =\ \_state;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00693}00693\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00694}00694\ \ \ \ \ \ \ \ \ \ \_state.host\ \ \ \ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{programs_2sysio-launcher_2main_8cpp_a8d747b8417c90b78c386111de7934753}{host}};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00695}00695\ \ \ \ \ \ \ \ \ \ \_state.as\_index\ \ \ \ \ \ \ \ \ =\ \_as.size();}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00696}00696\ \ \ \ \ \ \ \ \ \ \_state.os\_index\ \ \ \ \ \ \ \ \ =\ get\_operand\_stack().size();}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00697}00697\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00698}00698\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ cleanup\ =\ \mbox{\hyperlink{structsysio_1_1vm_1_1scope__guard}{scope\_guard}}([\&]()\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00699}00699\ \ \ \ \ \ \ \ \ \ \ \ \ get\_operand\_stack().eat(\_state.os\_index);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00700}00700\ \ \ \ \ \ \ \ \ \ \ \ \ \_as.eat(\_state.as\_index);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00701}00701\ \ \ \ \ \ \ \ \ \ \ \ \ \_state\ =\ saved\_state;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00702}00702\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00703}00703\ \ \ \ \ \ \ \ \ \ \ \ \ \_last\_op\_index\ =\ last\_last\_op\_index;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00704}00704\ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00705}00705\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00706}00706\ \ \ \ \ \ \ \ \ \ this-\/>type\_check\_args(\_mod.get\_function\_type(func\_index),\ \textcolor{keyword}{static\_cast<}Args\&\&\textcolor{keyword}{>}(args)...);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00707}00707\ \ \ \ \ \ \ \ \ \ push\_args(args...);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00708}00708\ \ \ \ \ \ \ \ \ \ push\_call<true>(func\_index);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00709}00709\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00710}00710\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (func\_index\ <\ \_mod.get\_imported\_functions\_size())\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00711}00711\ \ \ \ \ \ \ \ \ \ \ \ \ \_rhf(\_state.host,\ get\_interface(),\ \_mod.import\_functions[func\_index]);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00712}00712\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00713}00713\ \ \ \ \ \ \ \ \ \ \ \ \ \_state.pc\ =\ \_mod.get\_function\_pc(func\_index);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00714}00714\ \ \ \ \ \ \ \ \ \ \ \ \ setup\_locals(func\_index);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00715}00715\ \ \ \ \ \ \ \ \ \ \ \ \ vm::invoke\_with\_signal\_handler([\&]()\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00716}00716\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ execute(\mbox{\hyperlink{structfc_1_1visitor}{visitor}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00717}00717\ \ \ \ \ \ \ \ \ \ \ \ \ \},\ \&handle\_signal);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00718}00718\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00719}00719\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00720}00720\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_mod.get\_function\_type(func\_index).return\_count\ \&\&\ !\_state.exiting)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00721}00721\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pop\_operand();}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00722}00722\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00723}00723\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00724}00724\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00725}00725\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00726}00726\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00727}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_aa4ba310f4e5218dc03aae0074cde3998}{00727}}\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_aa4ba310f4e5218dc03aae0074cde3998}{jump}}(\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ pop\_info,\ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ new\_pc)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00728}00728\ \ \ \ \ \ \ \ \ \ set\_relative\_pc(new\_pc);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00729}00729\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((pop\_info\ \&\ 0x80000000u))\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00730}00730\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{unionop}{op}}\ =\ pop\_operand();}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00731}00731\ \ \ \ \ \ \ \ \ \ \ \ \ eat\_operands(get\_operand\_stack().size()\ -\/\ ((pop\_info\ \&\ 0x7FFFFFFFu)\ -\/\ 1));}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00732}00732\ \ \ \ \ \ \ \ \ \ \ \ \ push\_operand(\mbox{\hyperlink{unionop}{op}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00733}00733\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00734}00734\ \ \ \ \ \ \ \ \ \ \ \ \ eat\_operands(get\_operand\_stack().size()\ -\/\ pop\_info);}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00735}00735\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00736}00736\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00737}00737\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00738}00738\ \ \ \ \ \ \ \textcolor{comment}{//\ This\ isn't\ async-\/signal-\/safe.\ \ Cross\ fingers\ and\ hope\ for\ the\ best.}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00739}00739\ \ \ \ \ \ \ \textcolor{comment}{//\ It's\ only\ used\ for\ profiling.}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00740}\mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a9845b3dd6159f63d729bdb78800f22da}{00740}}\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classsysio_1_1vm_1_1execution__context_a9845b3dd6159f63d729bdb78800f22da}{backtrace}}(\textcolor{keywordtype}{void}**\ data,\ \textcolor{keywordtype}{int}\ limit,\ \textcolor{keywordtype}{void}*\ uc)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00741}00741\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ out\ =\ 0;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00742}00742\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(limit\ !=\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00743}00743\ \ \ \ \ \ \ \ \ \ \ \ \ data[out++]\ =\ \_state.pc;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00744}00744\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00745}00745\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 0;\ out\ <\ limit\ \&\&\ i\ <\ \_as.size();\ ++i)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00746}00746\ \ \ \ \ \ \ \ \ \ \ \ \ data[out++]\ =\ \_as.get\_back(i).pc;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00747}00747\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00748}00748\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00749}00749\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00750}00750\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00751}00751\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00752}00752\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00753}00753\ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00754}00754\ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ push\_args(Args\&\&...\ args)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00755}00755\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ tc\ =\ \mbox{\hyperlink{namespacesysio_1_1vm_1_1detail_a57bb3eb0b0c335a0007e53cbee0fb777}{detail::type\_converter\_t<Host>}}\{\ \_host,\ get\_interface()\ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00756}00756\ \ \ \ \ \ \ \ \ \ (void)tc;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00757}00757\ \ \ \ \ \ \ \ \ \ (...\ ,\ push\_operand(detail::resolve\_result(tc,\ std::move(args))));}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00758}00758\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00759}00759\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00760}00760\ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ setup\_locals(\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ index)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00761}00761\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ fn\ =\ \_mod.code[index\ -\/\ \_mod.get\_imported\_functions\_size()];}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00762}00762\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ i\ =\ 0;\ i\ <\ fn.locals.size();\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00763}00763\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a538d097420e725c4dad63c3caa9e55bd}{j}}\ =\ 0;\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a538d097420e725c4dad63c3caa9e55bd}{j}}\ <\ fn.locals[i].count;\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a538d097420e725c4dad63c3caa9e55bd}{j}}++)}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00764}00764\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (fn.locals[i].type)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00765}00765\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ types::i32:\ push\_operand(i32\_const\_t\{\ (\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}})0\ \});\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00766}00766\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ types::i64:\ push\_operand(i64\_const\_t\{\ (\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}})0\ \});\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00767}00767\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ types::f32:\ push\_operand(f32\_const\_t\{\ (\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}})0\ \});\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00768}00768\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ types::f64:\ push\_operand(f64\_const\_t\{\ (\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}})0\ \});\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00769}00769\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:\ \textcolor{keywordflow}{throw}\ wasm\_interpreter\_exception\{\ \textcolor{stringliteral}{"{}invalid\ function\ param\ type"{}}\ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00770}00770\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00771}00771\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00772}00772\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00773}00773\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00774}\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_af76f16b5b54ca2f53f4f45455ea523e9}{00774}}\ \textcolor{preprocessor}{\#define\ CREATE\_TABLE\_ENTRY(NAME,\ CODE)\ \&\&ev\_label\_\#\#NAME,}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00775}\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_a944a0fd97294454cd9dcd486391f3073}{00775}}\ \textcolor{preprocessor}{\#define\ CREATE\_LABEL(NAME,\ CODE)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00776}00776\ \textcolor{preprocessor}{\ \ \ \ \ \ ev\_label\_\#\#NAME\ :\ visitor(ev\_variant-\/>template\ get<sysio::vm::SYS\_VM\_OPCODE\_T(NAME)>());\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00777}00777\ \textcolor{preprocessor}{\ \ \ \ \ \ ev\_variant\ =\ \_state.pc;\ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00778}00778\ \textcolor{preprocessor}{\ \ \ \ \ \ goto*\ dispatch\_table[ev\_variant-\/>index()];}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00779}\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_ad9a27f4e96bc6be8c0a671cfda5ff653}{00779}}\ \textcolor{preprocessor}{\#define\ CREATE\_EXIT\_LABEL(NAME,\ CODE)\ ev\_label\_\#\#NAME\ :\ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00780}00780\ \textcolor{preprocessor}{\ \ \ \ \ \ return;}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00781}\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_a8d626565470cf62f56e76c030b5b1ae4}{00781}}\ \textcolor{preprocessor}{\#define\ CREATE\_EMPTY\_LABEL(NAME,\ CODE)\ ev\_label\_\#\#NAME\ :\ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00782}00782\ \textcolor{preprocessor}{\ \ \ \ \ \ throw\ wasm\_interpreter\_exception\{"{}empty\ operand"{}\};}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00783}00783\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00784}00784\ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Visitor>}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00785}00785\ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ execute(Visitor\&\&\ visitor)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00786}00786\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}*\ dispatch\_table[]\ =\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00787}00787\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_abd8782a549085609074c6c69d5cd2d97}{SYS\_VM\_CONTROL\_FLOW\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_af76f16b5b54ca2f53f4f45455ea523e9}{CREATE\_TABLE\_ENTRY}})}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00788}00788\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_af21f9de2ba8e3f679648a5191da27fce}{SYS\_VM\_BR\_TABLE\_OP}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_af76f16b5b54ca2f53f4f45455ea523e9}{CREATE\_TABLE\_ENTRY}})}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00789}00789\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a121d0950383bd19f2ab3f9c002c34e6c}{SYS\_VM\_RETURN\_OP}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_af76f16b5b54ca2f53f4f45455ea523e9}{CREATE\_TABLE\_ENTRY}})}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00790}00790\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a812b692aafa5c80483c442f0d71722b1}{SYS\_VM\_CALL\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_af76f16b5b54ca2f53f4f45455ea523e9}{CREATE\_TABLE\_ENTRY}})}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00791}00791\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a9f06c54d449604fad73a9455c8812858}{SYS\_VM\_CALL\_IMM\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_af76f16b5b54ca2f53f4f45455ea523e9}{CREATE\_TABLE\_ENTRY}})}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00792}00792\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_adadc0f4760d5b1b861978f94bf779883}{SYS\_VM\_PARAMETRIC\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_af76f16b5b54ca2f53f4f45455ea523e9}{CREATE\_TABLE\_ENTRY}})}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00793}00793\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a95de92951ac0d980e13f9efb273bd051}{SYS\_VM\_VARIABLE\_ACCESS\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_af76f16b5b54ca2f53f4f45455ea523e9}{CREATE\_TABLE\_ENTRY}})}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00794}00794\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a60304cb9f34cbee69d483a705f5a6b1f}{SYS\_VM\_MEMORY\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_af76f16b5b54ca2f53f4f45455ea523e9}{CREATE\_TABLE\_ENTRY}})}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00795}00795\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a69e0d988cd91bed33d70534bda2008d1}{SYS\_VM\_I32\_CONSTANT\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_af76f16b5b54ca2f53f4f45455ea523e9}{CREATE\_TABLE\_ENTRY}})}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00796}00796\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a694e09ce604f561df1e40fcdd8b25577}{SYS\_VM\_I64\_CONSTANT\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_af76f16b5b54ca2f53f4f45455ea523e9}{CREATE\_TABLE\_ENTRY}})}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00797}00797\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_ae110cbdd36b1d9cdbfa5beccdc1b65f8}{SYS\_VM\_F32\_CONSTANT\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_af76f16b5b54ca2f53f4f45455ea523e9}{CREATE\_TABLE\_ENTRY}})}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00798}00798\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a0df979b9770c5056d0f795034ddabb7c}{SYS\_VM\_F64\_CONSTANT\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_af76f16b5b54ca2f53f4f45455ea523e9}{CREATE\_TABLE\_ENTRY}})}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00799}00799\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a204578ac1952c2df161a909f4375f693}{SYS\_VM\_COMPARISON\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_af76f16b5b54ca2f53f4f45455ea523e9}{CREATE\_TABLE\_ENTRY}})}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00800}00800\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a881d40db151cbe2320f29027b7e14fe0}{SYS\_VM\_NUMERIC\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_af76f16b5b54ca2f53f4f45455ea523e9}{CREATE\_TABLE\_ENTRY}})}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00801}00801\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a91c11ea5280d9861ae565b494fa494e1}{SYS\_VM\_CONVERSION\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_af76f16b5b54ca2f53f4f45455ea523e9}{CREATE\_TABLE\_ENTRY}})}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00802}00802\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a1efd77b1bfac80757916bc1638a39c4b}{SYS\_VM\_EXIT\_OP}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_af76f16b5b54ca2f53f4f45455ea523e9}{CREATE\_TABLE\_ENTRY}})}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00803}00803\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a9e39407aa4f7cf22d622726763af293e}{SYS\_VM\_EMPTY\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_af76f16b5b54ca2f53f4f45455ea523e9}{CREATE\_TABLE\_ENTRY}})}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00804}00804\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_abe9234baee521deb37d406026bd82971}{SYS\_VM\_ERROR\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_af76f16b5b54ca2f53f4f45455ea523e9}{CREATE\_TABLE\_ENTRY}})}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00805}00805\ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\_\_ev\_last}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00806}00806\ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00807}00807\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}*\ ev\_variant\ =\ \_state.pc;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00808}00808\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ *dispatch\_table[ev\_variant-\/>index()];}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00809}00809\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (1)\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00810}00810\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_abd8782a549085609074c6c69d5cd2d97}{SYS\_VM\_CONTROL\_FLOW\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_a944a0fd97294454cd9dcd486391f3073}{CREATE\_LABEL}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00811}00811\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_af21f9de2ba8e3f679648a5191da27fce}{SYS\_VM\_BR\_TABLE\_OP}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_a944a0fd97294454cd9dcd486391f3073}{CREATE\_LABEL}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00812}00812\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a121d0950383bd19f2ab3f9c002c34e6c}{SYS\_VM\_RETURN\_OP}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_a944a0fd97294454cd9dcd486391f3073}{CREATE\_LABEL}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00813}00813\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a812b692aafa5c80483c442f0d71722b1}{SYS\_VM\_CALL\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_a944a0fd97294454cd9dcd486391f3073}{CREATE\_LABEL}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00814}00814\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a9f06c54d449604fad73a9455c8812858}{SYS\_VM\_CALL\_IMM\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_a944a0fd97294454cd9dcd486391f3073}{CREATE\_LABEL}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00815}00815\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_adadc0f4760d5b1b861978f94bf779883}{SYS\_VM\_PARAMETRIC\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_a944a0fd97294454cd9dcd486391f3073}{CREATE\_LABEL}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00816}00816\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a95de92951ac0d980e13f9efb273bd051}{SYS\_VM\_VARIABLE\_ACCESS\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_a944a0fd97294454cd9dcd486391f3073}{CREATE\_LABEL}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00817}00817\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a60304cb9f34cbee69d483a705f5a6b1f}{SYS\_VM\_MEMORY\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_a944a0fd97294454cd9dcd486391f3073}{CREATE\_LABEL}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00818}00818\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a69e0d988cd91bed33d70534bda2008d1}{SYS\_VM\_I32\_CONSTANT\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_a944a0fd97294454cd9dcd486391f3073}{CREATE\_LABEL}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00819}00819\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a694e09ce604f561df1e40fcdd8b25577}{SYS\_VM\_I64\_CONSTANT\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_a944a0fd97294454cd9dcd486391f3073}{CREATE\_LABEL}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00820}00820\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_ae110cbdd36b1d9cdbfa5beccdc1b65f8}{SYS\_VM\_F32\_CONSTANT\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_a944a0fd97294454cd9dcd486391f3073}{CREATE\_LABEL}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00821}00821\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a0df979b9770c5056d0f795034ddabb7c}{SYS\_VM\_F64\_CONSTANT\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_a944a0fd97294454cd9dcd486391f3073}{CREATE\_LABEL}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00822}00822\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a204578ac1952c2df161a909f4375f693}{SYS\_VM\_COMPARISON\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_a944a0fd97294454cd9dcd486391f3073}{CREATE\_LABEL}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00823}00823\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a881d40db151cbe2320f29027b7e14fe0}{SYS\_VM\_NUMERIC\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_a944a0fd97294454cd9dcd486391f3073}{CREATE\_LABEL}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00824}00824\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a91c11ea5280d9861ae565b494fa494e1}{SYS\_VM\_CONVERSION\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_a944a0fd97294454cd9dcd486391f3073}{CREATE\_LABEL}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00825}00825\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a1efd77b1bfac80757916bc1638a39c4b}{SYS\_VM\_EXIT\_OP}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_ad9a27f4e96bc6be8c0a671cfda5ff653}{CREATE\_EXIT\_LABEL}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00826}00826\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_a9e39407aa4f7cf22d622726763af293e}{SYS\_VM\_EMPTY\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_a8d626565470cf62f56e76c030b5b1ae4}{CREATE\_EMPTY\_LABEL}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00827}00827\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{sysio_2vm_2opcodes__def_8hpp_abe9234baee521deb37d406026bd82971}{SYS\_VM\_ERROR\_OPS}}(\mbox{\hyperlink{sysio_2vm_2execution__context_8hpp_a944a0fd97294454cd9dcd486391f3073}{CREATE\_LABEL}});}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00828}00828\ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_ev\_last:}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00829}00829\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ wasm\_interpreter\_exception\{\textcolor{stringliteral}{"{}should\ never\ reach\ here"{}}\};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00830}00830\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00831}00831\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00832}00832\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00833}00833\ \textcolor{preprocessor}{\#undef\ CREATE\_EMPTY\_LABEL}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00834}00834\ \textcolor{preprocessor}{\#undef\ CREATE\_LABEL}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00835}00835\ \textcolor{preprocessor}{\#undef\ CREATE\_TABLE\_ENTRY}}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00836}00836\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00837}00837\ \ \ \ \ \ \ \textcolor{keyword}{struct\ }execution\_state\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00838}00838\ \ \ \ \ \ \ \ \ \ host\_type*\ host\ \ \ \ \ \ \ \ \ \ \ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00839}00839\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ as\_index\ \ \ \ \ \ \ \ \ =\ 0;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00840}00840\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ os\_index\ \ \ \ \ \ \ \ \ =\ 0;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00841}00841\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_1_1vm_af1bb7d8ae2889df51b65eaef31f1ea74}{opcode}}*\ \ pc\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00842}00842\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ exiting\ \ \ \ \ \ \ \ \ \ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00843}00843\ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00844}00844\ }
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00845}00845\ \ \ \ \ \ \ bounded\_allocator\ \_base\_allocator\ =\ \{}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00846}00846\ \ \ \ \ \ \ \ \ \ (constants::max\_call\_depth\ +\ 1)\ *\ \textcolor{keyword}{sizeof}(activation\_frame)}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00847}00847\ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00848}00848\ \ \ \ \ \ \ execution\_state\ \_state;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00849}00849\ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_last\_op\_index\ \ \ \ =\ 0;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00850}00850\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_1_1vm_a5491df8eb4ad32b5173d3678e0341d67}{call\_stack}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_as\ =\ \{\ \_base\_allocator\ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00851}00851\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_1_1vm_af1bb7d8ae2889df51b65eaef31f1ea74}{opcode}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_halt;}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00852}00852\ \ \ \ \ \ \ host\_type*\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_host\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00853}00853\ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{sysio_2vm_2execution__context_8hpp_source_l00854}00854\ \}\}\ \textcolor{comment}{//\ namespace\ sysio::vm}}

\end{DoxyCode}
