<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wire Sysio: plugins/chain_plugin/test/test_trx_retry_db.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Wire Sysio<span id="projectnumber">&#160;Wire Sysion 1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('test__trx__retry__db_8cpp.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">test_trx_retry_db.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;boost/test/included/unit_test.hpp&gt;</code><br />
<code>#include &lt;<a class="el" href="trx__retry__db_8hpp_source.html">sysio/chain_plugin/trx_retry_db.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="tester_8hpp_source.html">sysio/testing/tester.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="controller_8hpp_source.html">sysio/chain/controller.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="genesis__state_8hpp_source.html">sysio/chain/genesis_state.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="thread__utils_8hpp_source.html">sysio/chain/thread_utils.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="transaction__metadata_8hpp_source.html">sysio/chain/transaction_metadata.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="libraries_2chain_2include_2sysio_2chain_2trace_8hpp_source.html">sysio/chain/trace.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="name_8hpp_source.html">sysio/chain/name.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="application_8hpp_source.html">appbase/application.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="plugin__interface_8hpp_source.html">sysio/chain/plugin_interface.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="mock__time_8hpp_source.html">fc/mock_time.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="bitutil_8hpp_source.html">fc/bitutil.hpp</a>&gt;</code><br />
<code>#include &lt;boost/asio.hpp&gt;</code><br />
<code>#include &lt;boost/date_time/posix_time/posix_time.hpp&gt;</code><br />
<code>#include &lt;boost/filesystem.hpp&gt;</code><br />
<code>#include &lt;thread&gt;</code><br />
<code>#include &lt;condition_variable&gt;</code><br />
<code>#include &lt;deque&gt;</code><br />
<code>#include &lt;memory&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for test_trx_retry_db.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="test__trx__retry__db_8cpp__incl.png" border="0" usemap="#aplugins_2chain__plugin_2test_2test__trx__retry__db_8cpp" alt=""/></div>
<map name="aplugins_2chain__plugin_2test_2test__trx__retry__db_8cpp" id="aplugins_2chain__plugin_2test_2test__trx__retry__db_8cpp">
<area shape="rect" title=" " alt="" coords="2458,5,2596,61"/>
<area shape="rect" title=" " alt="" coords="5,109,137,150"/>
<area shape="poly" title=" " alt="" coords="2458,38,2019,42,1352,53,997,63,662,75,373,92,155,112,153,112,152,107,155,106,373,86,662,70,997,58,1352,48,2019,36,2458,32"/>
<area shape="rect" href="trx__retry__db_8hpp.html" title=" " alt="" coords="1199,198,1327,238"/>
<area shape="poly" title=" " alt="" coords="2458,37,2303,41,2089,52,1846,74,1722,91,1601,112,1526,129,1452,151,1327,194,1325,189,1451,146,1525,124,1600,106,1721,85,1845,69,2089,46,2303,36,2458,32"/>
<area shape="rect" href="name_8hpp.html" title=" " alt="" coords="2224,641,2372,667"/>
<area shape="poly" title=" " alt="" coords="2597,36,2648,44,2705,57,2763,77,2816,107,2854,138,2900,183,2949,237,2995,297,3035,358,3063,416,3071,443,3073,467,3071,488,3061,506,3041,525,3015,542,2945,571,2858,595,2760,614,2658,629,2557,639,2387,652,2387,646,2557,634,2657,623,2759,609,2857,590,2943,566,3012,537,3038,521,3057,503,3065,487,3068,467,3065,444,3058,418,3031,361,2991,300,2945,241,2896,186,2851,142,2814,111,2761,82,2704,62,2647,49,2596,41"/>
<area shape="rect" title=" " alt="" coords="2132,641,2200,667"/>
<area shape="poly" title=" " alt="" coords="2538,61,2559,143,2569,198,2575,258,2575,322,2568,387,2551,449,2521,506,2501,526,2470,546,2387,585,2295,617,2215,642,2214,637,2293,612,2385,580,2467,542,2498,522,2517,503,2546,447,2563,386,2570,322,2569,259,2563,198,2554,144,2533,62"/>
<area shape="rect" title=" " alt="" coords="839,641,895,667"/>
<area shape="poly" title=" " alt="" coords="2458,38,2015,43,1362,55,1031,65,736,77,507,93,426,102,373,112,301,125,237,138,212,148,193,163,181,185,176,217,176,485,182,508,197,529,222,548,255,565,340,593,442,614,551,629,658,640,823,649,823,654,657,645,551,635,441,619,338,598,253,570,219,552,193,533,177,510,171,486,171,216,176,183,189,159,210,143,236,132,300,120,372,106,425,96,506,87,736,72,1031,59,1362,49,2014,37,2458,32"/>
<area shape="rect" href="transaction__metadata_8hpp.html" title=" " alt="" coords="2329,375,2485,416"/>
<area shape="poly" title=" " alt="" coords="2524,62,2493,179,2470,254,2443,328,2427,362,2422,360,2438,326,2465,252,2488,178,2518,61"/>
<area shape="rect" href="libraries_2chain_2include_2sysio_2chain_2trace_8hpp.html" title=" " alt="" coords="1545,382,1690,408"/>
<area shape="poly" title=" " alt="" coords="2457,36,2250,38,1948,47,1775,56,1596,69,1415,88,1238,112,1164,121,1095,126,1032,131,975,140,923,157,878,184,858,203,840,226,807,287,786,337,780,361,784,365,795,367,842,364,927,356,1057,350,1239,354,1481,372,1530,378,1529,384,1480,378,1239,359,1057,356,928,361,843,369,795,372,782,370,775,362,781,335,802,285,835,223,854,200,875,180,921,152,973,135,1031,126,1094,121,1163,115,1237,106,1414,82,1595,64,1775,51,1948,41,2250,32,2457,31"/>
<area shape="rect" href="tester_8hpp.html" title=" " alt="" coords="1613,116,1769,142"/>
<area shape="poly" title=" " alt="" coords="2458,45,1785,120,1784,115,2457,40"/>
<area shape="rect" href="controller_8hpp.html" title=" " alt="" coords="906,205,1074,231"/>
<area shape="poly" title=" " alt="" coords="2458,38,2280,43,2029,54,1739,76,1590,92,1445,112,1333,132,1222,157,1046,203,1044,198,1221,151,1332,127,1444,106,1589,87,1738,71,2028,49,2280,37,2457,33"/>
<area shape="rect" href="genesis__state_8hpp.html" title=" " alt="" coords="1082,375,1218,416"/>
<area shape="poly" title=" " alt="" coords="2457,38,2148,45,1707,59,1259,80,1072,95,931,112,829,123,736,126,652,127,574,131,502,143,468,154,434,170,401,190,368,216,335,248,303,288,294,307,296,316,302,325,316,334,340,343,413,358,511,369,626,378,867,388,1066,391,1066,396,867,393,625,383,511,375,412,363,339,348,314,339,298,329,291,318,289,307,298,285,331,245,364,212,398,186,431,165,466,149,501,138,574,125,651,122,736,121,828,118,931,106,1072,89,1259,75,1707,53,2148,40,2457,33"/>
<area shape="rect" title=" " alt="" coords="257,382,400,408"/>
<area shape="poly" title=" " alt="" coords="2457,37,2032,41,1411,52,1096,62,816,75,599,91,523,101,473,112,402,138,375,153,351,171,331,192,314,218,300,249,288,287,285,307,288,326,298,349,311,369,306,372,293,351,283,328,279,307,283,286,295,247,310,216,327,189,347,167,372,149,400,133,472,106,522,96,599,86,816,69,1096,57,1411,47,2032,36,2457,32"/>
<area shape="rect" href="thread__utils_8hpp.html" title=" " alt="" coords="2582,375,2709,416"/>
<area shape="poly" title=" " alt="" coords="2548,60,2573,108,2598,176,2618,246,2642,359,2637,360,2613,247,2593,178,2569,110,2543,63"/>
<area shape="rect" href="application_8hpp.html" title=" " alt="" coords="2641,116,2802,142"/>
<area shape="poly" title=" " alt="" coords="2584,59,2684,107,2682,112,2582,64"/>
<area shape="rect" href="plugin__interface_8hpp.html" title=" " alt="" coords="2288,198,2414,238"/>
<area shape="poly" title=" " alt="" coords="2503,63,2382,188,2378,185,2499,60"/>
<area shape="rect" href="mock__time_8hpp.html" title=" " alt="" coords="2878,116,3003,142"/>
<area shape="poly" title=" " alt="" coords="2597,47,2860,106,2874,110,2873,115,2858,112,2596,52"/>
<area shape="rect" href="bitutil_8hpp.html" title=" " alt="" coords="3028,116,3120,142"/>
<area shape="poly" title=" " alt="" coords="2597,39,2787,64,2902,83,3016,106,3026,109,3025,114,3014,112,2901,88,2786,69,2596,44"/>
<area shape="rect" title=" " alt="" coords="3144,116,3251,142"/>
<area shape="poly" title=" " alt="" coords="2597,37,2835,60,2984,80,3133,106,3146,109,3145,115,3132,112,2983,85,2835,65,2596,42"/>
<area shape="rect" title=" " alt="" coords="3275,109,3424,150"/>
<area shape="poly" title=" " alt="" coords="2597,36,2882,60,3068,80,3260,106,3259,111,3068,85,2882,65,2596,42"/>
<area shape="rect" title=" " alt="" coords="3449,116,3506,142"/>
<area shape="poly" title=" " alt="" coords="2597,34,2784,43,3026,58,3264,79,3363,92,3437,106,3442,108,3440,113,3436,112,3362,97,3264,84,3026,63,2783,48,2597,40"/>
<area shape="rect" title=" " alt="" coords="3531,116,3656,142"/>
<area shape="poly" title=" " alt="" coords="2597,33,2761,38,2990,50,3253,72,3388,87,3519,106,3537,110,3536,115,3519,112,3387,93,3253,77,2990,55,2761,43,2597,38"/>
<area shape="rect" href="chain_2include_2sysio_2chain_2types_8hpp.html" title=" " alt="" coords="1641,560,1789,586"/>
<area shape="poly" title=" " alt="" coords="1328,228,1375,236,1459,240,1569,241,1624,244,1675,252,1716,265,1745,284,1765,315,1775,350,1777,387,1773,424,1754,494,1731,547,1726,545,1749,492,1768,423,1771,387,1769,351,1760,318,1741,288,1714,269,1673,257,1624,250,1569,246,1459,245,1375,241,1327,233"/>
<area shape="rect" href="block__state_8hpp.html" title=" " alt="" coords="2078,294,2261,320"/>
<area shape="poly" title=" " alt="" coords="1328,227,1390,236,1760,272,2063,296,2062,301,1759,278,1389,241,1327,232"/>
<area shape="poly" title=" " alt="" coords="1328,232,1346,236,1431,241,1543,242,1599,245,1651,252,1693,264,1722,285,1730,298,1731,311,1726,324,1716,337,1690,359,1659,377,1656,373,1687,355,1713,333,1721,322,1725,310,1725,299,1718,288,1691,269,1649,257,1599,250,1543,247,1431,246,1345,241,1327,237"/>
<area shape="poly" title=" " alt="" coords="1790,581,2209,638,2208,643,1789,587"/>
<area shape="poly" title=" " alt="" coords="1785,583,2116,641,2115,646,1784,589"/>
<area shape="rect" title=" " alt="" coords="920,641,977,667"/>
<area shape="poly" title=" " alt="" coords="1641,584,993,651,993,645,1640,579"/>
<area shape="poly" title=" " alt="" coords="1641,578,1506,583,1326,594,1121,614,911,644,910,638,1121,608,1326,589,1506,578,1640,573"/>
<area shape="rect" title=" " alt="" coords="882,715,935,740"/>
<area shape="poly" title=" " alt="" coords="2224,668,2213,669,1830,697,1457,715,951,728,951,723,1457,709,1829,692,2212,664,2223,663"/>
<area shape="rect" title=" " alt="" coords="2165,715,2225,740"/>
<area shape="poly" title=" " alt="" coords="2282,669,2226,708,2223,703,2279,665"/>
<area shape="poly" title=" " alt="" coords="2204,318,2340,367,2338,372,2202,323"/>
<area shape="poly" title=" " alt="" coords="2330,414,2229,436,2120,466,2069,487,2019,507,1905,537,1801,559,1799,554,1904,532,2017,502,2067,482,2118,461,2228,431,2329,409"/>
<area shape="rect" href="transaction_8hpp.html" title=" " alt="" coords="2132,471,2312,497"/>
<area shape="poly" title=" " alt="" coords="2366,419,2262,467,2260,462,2364,414"/>
<area shape="rect" title=" " alt="" coords="2336,471,2507,497"/>
<area shape="poly" title=" " alt="" coords="2413,416,2420,455,2414,456,2408,417"/>
<area shape="rect" title=" " alt="" coords="2581,471,2636,497"/>
<area shape="poly" title=" " alt="" coords="2454,414,2568,463,2566,467,2452,419"/>
<area shape="poly" title=" " alt="" coords="1770,129,1942,134,2149,146,2247,154,2331,165,2393,179,2414,187,2428,196,2436,212,2434,229,2424,248,2408,268,2361,310,2302,352,2182,426,2139,452,2121,465,2098,518,2091,565,2099,611,2121,665,2137,687,2158,704,2155,708,2133,691,2117,668,2094,613,2086,565,2093,517,2117,462,2136,447,2179,422,2299,348,2358,306,2404,264,2420,245,2429,228,2430,213,2424,199,2412,191,2392,184,2330,170,2246,160,2149,151,1942,140,1770,135"/>
<area shape="poly" title=" " alt="" coords="1613,140,1379,164,1093,200,1066,205,1065,199,1092,195,1379,159,1612,135"/>
<area shape="rect" href="abi__serializer_8hpp.html" title=" " alt="" coords="1517,294,1708,320"/>
<area shape="poly" title=" " alt="" coords="1612,138,1493,147,1360,161,1247,179,1209,189,1189,200,1159,228,1127,248,1096,262,1066,270,1020,272,1007,268,1002,260,1010,252,1030,246,1114,241,1268,251,1506,284,1531,288,1530,293,1505,289,1267,256,1114,247,1031,252,1013,257,1007,260,1010,263,1021,266,1066,264,1094,257,1125,244,1156,224,1185,196,1207,184,1246,173,1359,156,1493,142,1612,133"/>
<area shape="rect" href="account__object_8hpp.html" title=" " alt="" coords="1356,286,1493,327"/>
<area shape="poly" title=" " alt="" coords="1612,137,1483,146,1335,159,1209,177,1167,188,1145,200,1139,209,1137,217,1145,236,1213,254,1341,284,1340,289,1212,260,1141,240,1132,218,1134,207,1141,196,1165,183,1208,172,1335,154,1482,140,1612,132"/>
<area shape="rect" href="asset_8hpp.html" title=" " alt="" coords="1804,382,1952,408"/>
<area shape="poly" title=" " alt="" coords="1614,145,1476,172,1420,186,1392,200,1384,218,1385,227,1392,237,1405,248,1424,256,1472,266,1531,268,1596,267,1724,264,1777,270,1799,276,1816,284,1837,302,1852,323,1872,367,1868,369,1848,326,1833,305,1814,289,1797,281,1776,275,1724,270,1596,272,1531,274,1471,271,1422,261,1403,252,1388,240,1381,229,1378,218,1388,196,1418,181,1474,166,1613,140"/>
<area shape="rect" href="contract__table__objects_8hpp.html" title=" " alt="" coords="1402,198,1540,238"/>
<area shape="poly" title=" " alt="" coords="1661,145,1536,194,1534,189,1659,140"/>
<area shape="rect" href="unapplied__transaction__queue_8hpp.html" title=" " alt="" coords="2105,198,2264,238"/>
<area shape="poly" title=" " alt="" coords="1766,140,2086,195,2090,196,2089,201,2085,200,1765,145"/>
<area shape="rect" href="json_8hpp.html" title=" " alt="" coords="1564,205,1663,231"/>
<area shape="poly" title=" " alt="" coords="1682,144,1637,195,1633,192,1678,141"/>
<area shape="rect" title=" " alt="" coords="1688,205,1846,231"/>
<area shape="poly" title=" " alt="" coords="1704,141,1748,192,1744,195,1700,144"/>
<area shape="rect" title=" " alt="" coords="1870,205,2029,231"/>
<area shape="poly" title=" " alt="" coords="1728,140,1900,197,1898,202,1727,145"/>
<area shape="rect" title=" " alt="" coords="1939,471,2006,497"/>
<area shape="poly" title=" " alt="" coords="1770,132,1847,138,1928,150,1999,169,2025,181,2044,196,2052,217,2053,247,2038,320,2012,397,1986,458,1981,456,2007,395,2033,318,2048,246,2047,218,2040,199,2023,186,1997,174,1927,156,1846,144,1769,137"/>
<area shape="poly" title=" " alt="" coords="1074,225,1187,236,1676,272,2062,296,2062,302,1676,277,1187,241,1074,231"/>
<area shape="poly" title=" " alt="" coords="1065,229,1165,250,1272,284,1309,304,1345,325,1441,355,1532,376,1531,382,1439,360,1343,329,1306,309,1270,289,1163,256,1064,234"/>
<area shape="rect" href="block__log_8hpp.html" title=" " alt="" coords="571,294,742,320"/>
<area shape="poly" title=" " alt="" coords="943,234,718,292,717,287,942,229"/>
<area shape="poly" title=" " alt="" coords="1051,229,1135,252,1171,267,1193,285,1201,305,1199,325,1190,346,1179,364,1174,362,1186,343,1194,324,1195,305,1189,288,1168,272,1134,257,1050,234"/>
<area shape="rect" href="pinnable__mapped__file_8hpp.html" title=" " alt="" coords="313,286,445,327"/>
<area shape="poly" title=" " alt="" coords="905,230,704,254,465,289,461,290,460,284,464,284,703,248,905,225"/>
<area shape="rect" title=" " alt="" coords="816,294,984,320"/>
<area shape="poly" title=" " alt="" coords="979,233,925,285,922,281,975,229"/>
<area shape="poly" title=" " alt="" coords="1075,227,1506,284,1533,288,1532,293,1505,289,1074,232"/>
<area shape="poly" title=" " alt="" coords="1055,229,1337,284,1341,285,1340,290,1336,289,1054,234"/>
<area shape="rect" href="snapshot_8hpp.html" title=" " alt="" coords="1009,294,1178,320"/>
<area shape="poly" title=" " alt="" coords="1006,229,1070,282,1066,286,1002,233"/>
<area shape="rect" href="protocol__feature__manager_8hpp.html" title=" " alt="" coords="1319,375,1468,416"/>
<area shape="poly" title=" " alt="" coords="1044,229,1126,251,1215,284,1291,323,1355,364,1352,368,1288,328,1213,289,1124,256,1043,234"/>
<area shape="rect" href="chain_2include_2sysio_2chain_2webassembly_2sys-vm-oc_2config_8hpp.html" title=" " alt="" coords="593,552,765,593"/>
<area shape="poly" title=" " alt="" coords="905,222,805,226,695,236,644,245,599,256,563,270,540,288,522,319,519,352,527,387,544,422,567,456,594,488,646,540,642,544,590,492,563,460,540,425,522,389,514,353,517,317,536,285,561,266,597,251,643,239,694,231,805,220,905,217"/>
<area shape="rect" href="s__root__extension_8hpp.html" title=" " alt="" coords="738,464,865,504"/>
<area shape="poly" title=" " alt="" coords="905,223,810,227,706,238,658,246,616,257,583,271,561,288,547,314,549,338,562,362,586,384,618,405,653,424,727,455,725,460,651,429,615,410,583,388,558,365,543,340,542,312,557,285,580,267,615,252,657,241,706,233,809,222,905,217"/>
<area shape="poly" title=" " alt="" coords="723,318,761,324,1067,377,1066,383,760,330,722,323"/>
<area shape="poly" title=" " alt="" coords="1219,403,1475,436,1640,461,1663,479,1681,501,1707,544,1702,547,1677,504,1659,483,1638,466,1475,441,1218,408"/>
<area shape="poly" title=" " alt="" coords="1104,418,1071,438,1044,465,1028,492,1020,517,1017,565,1015,613,1007,640,992,668,971,691,948,708,945,704,968,687,987,665,1002,638,1009,613,1012,564,1015,516,1023,490,1040,462,1068,434,1101,414"/>
<area shape="poly" title=" " alt="" coords="1082,415,1037,434,1016,448,998,465,975,504,960,548,953,590,951,626,945,625,948,590,955,546,970,502,994,462,1013,444,1034,430,1080,410"/>
<area shape="rect" href="chain__config_8hpp.html" title=" " alt="" coords="1438,471,1627,497"/>
<area shape="poly" title=" " alt="" coords="1219,409,1465,465,1463,470,1217,415"/>
<area shape="rect" href="wasm__config_8hpp.html" title=" " alt="" coords="1053,471,1246,497"/>
<area shape="poly" title=" " alt="" coords="1152,416,1152,456,1147,456,1147,416"/>
<area shape="rect" href="sha256_8hpp.html" title=" " alt="" coords="1270,471,1413,497"/>
<area shape="poly" title=" " alt="" coords="1194,414,1302,462,1300,467,1192,419"/>
<area shape="poly" title=" " alt="" coords="1559,495,1677,550,1674,555,1557,500"/>
<area shape="poly" title=" " alt="" coords="370,329,345,371,341,368,365,326"/>
<area shape="poly" title=" " alt="" coords="1616,320,1619,367,1613,367,1610,320"/>
<area shape="poly" title=" " alt="" coords="1469,407,1601,434,1655,449,1685,462,1699,480,1709,502,1717,544,1712,545,1704,503,1695,483,1681,466,1653,454,1600,440,1468,413"/>
<area shape="poly" title=" " alt="" coords="699,592,737,628,784,664,827,689,868,708,866,713,824,693,782,669,734,632,696,595"/>
<area shape="poly" title=" " alt="" coords="747,591,905,637,904,642,746,596"/>
<area shape="poly" title=" " alt="" coords="866,489,1626,560,1626,566,866,494"/>
<area shape="poly" title=" " alt="" coords="802,505,801,538,803,579,812,624,829,665,848,687,871,704,867,709,844,691,825,668,807,625,798,580,796,538,797,505"/>
<area shape="poly" title=" " alt="" coords="1870,410,1786,506,1741,551,1737,547,1782,503,1866,407"/>
<area shape="poly" title=" " alt="" coords="2184,239,2177,279,2172,278,2178,238"/>
<area shape="poly" title=" " alt="" coords="2212,237,2275,284,2373,363,2370,367,2272,288,2209,241"/>
<area shape="poly" title=" " alt="" coords="2122,241,1672,380,1671,375,2120,236"/>
<area shape="poly" title=" " alt="" coords="2653,416,2657,458,2656,482,2650,505,2634,537,2617,560,2595,578,2564,595,2516,617,2473,629,2434,634,2396,636,2315,634,2269,636,2215,643,2215,638,2268,631,2315,629,2396,630,2434,629,2472,624,2514,612,2562,591,2592,574,2614,556,2630,535,2644,503,2650,481,2652,458,2648,416"/>
<area shape="poly" title=" " alt="" coords="2596,419,2468,468,2466,463,2594,414"/>
<area shape="poly" title=" " alt="" coords="2640,417,2622,458,2617,456,2635,415"/>
<area shape="poly" title=" " alt="" coords="2582,407,2119,466,2021,479,2021,474,2119,461,2581,402"/>
<area shape="rect" title=" " alt="" coords="2869,471,3046,497"/>
<area shape="poly" title=" " alt="" coords="2711,412,2900,464,2898,469,2709,417"/>
<area shape="rect" title=" " alt="" coords="2710,471,2845,497"/>
<area shape="poly" title=" " alt="" coords="2677,414,2748,460,2745,465,2674,418"/>
<area shape="poly" title=" " alt="" coords="2311,241,2210,289,2207,284,2309,236"/>
<area shape="poly" title=" " alt="" coords="2382,237,2404,258,2421,285,2427,304,2428,324,2422,360,2417,360,2422,324,2421,305,2417,287,2400,262,2378,241"/>
<area shape="poly" title=" " alt="" coords="2345,240,2319,286,2300,310,2275,329,2231,347,2174,358,2108,366,2038,370,1899,373,1791,378,1706,387,1705,382,1791,372,1898,368,2037,364,2108,360,2174,353,2230,342,2272,325,2296,306,2315,283,2341,237"/>
</map>
</div>
</div>
<p><a href="test__trx__retry__db_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsysio_1_1test_1_1detail_1_1testit.html">sysio::test::detail::testit</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesysio.html">sysio</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesysio_1_1test.html">sysio::test</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesysio_1_1test_1_1detail.html">sysio::test::detail</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6b2a3852db8bb19ab6909bac01859985" id="r_a6b2a3852db8bb19ab6909bac01859985"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6b2a3852db8bb19ab6909bac01859985">BOOST_TEST_MODULE</a>&#160;&#160;&#160;transaction_retry</td></tr>
<tr class="separator:a6b2a3852db8bb19ab6909bac01859985"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a253cc0c74fd06c934d9c7d4ee67ccf87" id="r_a253cc0c74fd06c934d9c7d4ee67ccf87"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a253cc0c74fd06c934d9c7d4ee67ccf87">BOOST_AUTO_TEST_CASE</a> (trx_retry_logic)</td></tr>
<tr class="separator:a253cc0c74fd06c934d9c7d4ee67ccf87"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a6b2a3852db8bb19ab6909bac01859985" name="a6b2a3852db8bb19ab6909bac01859985"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b2a3852db8bb19ab6909bac01859985">&#9670;&#160;</a></span>BOOST_TEST_MODULE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BOOST_TEST_MODULE&#160;&#160;&#160;transaction_retry</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test__trx__retry__db_8cpp_source.html#l00001">1</a> of file <a class="el" href="test__trx__retry__db_8cpp_source.html">test_trx_retry_db.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a253cc0c74fd06c934d9c7d4ee67ccf87" name="a253cc0c74fd06c934d9c7d4ee67ccf87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a253cc0c74fd06c934d9c7d4ee67ccf87">&#9670;&#160;</a></span>BOOST_AUTO_TEST_CASE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">trx_retry_logic</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test__trx__retry__db_8cpp_source.html#l00199">199</a> of file <a class="el" href="test__trx__retry__db_8cpp_source.html">test_trx_retry_db.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  199</span>                                      {</div>
<div class="line"><span class="lineno">  200</span>   boost::filesystem::path temp = boost::filesystem::temp_directory_path() / boost::filesystem::unique_path();</div>
<div class="line"><span class="lineno">  201</span> </div>
<div class="line"><span class="lineno">  202</span>   <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  203</span>      <a class="code hl_function" href="classfc_1_1logger.html#a4e12ef2e794551d593e497b4b90601ab">fc::logger::get</a>(<a class="code hl_define" href="logger_8hpp.html#a8c7a288fea519c7e895518f8dff4888f">DEFAULT_LOGGER</a>).<a class="code hl_function" href="classfc_1_1logger.html#a4c22e498cec41efb806fda9733662650">set_log_level</a>(<a class="code hl_enumvalue" href="classfc_1_1log__level.html#a5a5e31c4c1f38d9115ecbe44927fb2e4a30d2de77e71beb8d09d530cac04efa25">fc::log_level::debug</a>);</div>
<div class="line"><span class="lineno">  204</span> </div>
<div class="line"><span class="lineno">  205</span>      <span class="comment">// just need a controller for trx_retry_db, doesn&#39;t actually have to do anything</span></div>
<div class="line"><span class="lineno">  206</span>      std::optional&lt;controller&gt; chain;</div>
<div class="line"><span class="lineno">  207</span>      <a class="code hl_struct" href="structsysio_1_1chain_1_1genesis__state.html">genesis_state</a> <a class="code hl_function" href="namespace_xbyak_1_1util.html#a051ad68b75c300988da81d4804273b56">gs</a>{};</div>
<div class="line"><span class="lineno">  208</span>      {</div>
<div class="line"><span class="lineno">  209</span>         <a class="code hl_struct" href="structsysio_1_1chain_1_1controller_1_1config.html">controller::config</a> <a class="code hl_struct" href="structsysio_1_1chain_1_1chain__config__v1.html">chain_config</a> = <a class="code hl_struct" href="structsysio_1_1chain_1_1controller_1_1config.html">controller::config</a>();</div>
<div class="line"><span class="lineno">  210</span>         <a class="code hl_struct" href="structsysio_1_1chain_1_1chain__config__v1.html">chain_config</a>.blocks_dir = temp;</div>
<div class="line"><span class="lineno">  211</span>         <a class="code hl_struct" href="structsysio_1_1chain_1_1chain__config__v1.html">chain_config</a>.state_dir = temp;</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>         <span class="keyword">const</span> <span class="keyword">auto</span>&amp; genesis_chain_id = <a class="code hl_function" href="namespace_xbyak_1_1util.html#a051ad68b75c300988da81d4804273b56">gs</a>.compute_chain_id();</div>
<div class="line"><span class="lineno">  214</span>         <a class="code hl_class" href="classsysio_1_1chain_1_1protocol__feature__set.html">protocol_feature_set</a> pfs;</div>
<div class="line"><span class="lineno">  215</span>         chain.emplace( <a class="code hl_struct" href="structsysio_1_1chain_1_1chain__config__v1.html">chain_config</a>, std::move( pfs ), genesis_chain_id );</div>
<div class="line"><span class="lineno">  216</span>         chain-&gt;add_indices();</div>
<div class="line"><span class="lineno">  217</span>      }</div>
<div class="line"><span class="lineno">  218</span> </div>
<div class="line"><span class="lineno">  219</span>      <span class="comment">// control time by using set_now, call before spawning any threads</span></div>
<div class="line"><span class="lineno">  220</span>      <span class="keyword">auto</span> pnow = boost::posix_time::time_from_string(<span class="stringliteral">&quot;2022-04-04 4:44:44.000&quot;</span>);</div>
<div class="line"><span class="lineno">  221</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span>      <span class="comment">// run app() so that channels::transaction_ack work</span></div>
<div class="line"><span class="lineno">  224</span>      std::thread app_thread( [&amp;]() {</div>
<div class="line"><span class="lineno">  225</span>         <a class="code hl_function" href="namespaceappbase.html#a99374dc23934f008a09f2f79be9eae40">appbase::app</a>().<a class="code hl_function" href="classappbase_1_1application.html#a39286b0b034b97f6940568a00f44edaf">exec</a>();</div>
<div class="line"><span class="lineno">  226</span>      } );</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>      <span class="keywordtype">size_t</span> max_mem_usage_size = 5ul*1024*1024*1024;</div>
<div class="line"><span class="lineno">  229</span>      <a class="code hl_class" href="classfc_1_1microseconds.html">fc::microseconds</a> retry_interval = <a class="code hl_function" href="namespacefc.html#a9623b8cae3f48bbed6aa1fc2afe9b174">fc::seconds</a>(10);</div>
<div class="line"><span class="lineno">  230</span>      boost::posix_time::seconds pretry_interval = boost::posix_time::seconds(10);</div>
<div class="line"><span class="lineno">  231</span>      BOOST_REQUIRE(retry_interval.<a class="code hl_function" href="classfc_1_1microseconds.html#a20fba59ec7e1f50c6b8f2c9443cc9b92">count</a>() == pretry_interval.total_microseconds());</div>
<div class="line"><span class="lineno">  232</span>      <a class="code hl_class" href="classfc_1_1microseconds.html">fc::microseconds</a> max_expiration_time = <a class="code hl_function" href="namespacefc.html#a6e85a2de1275728bcc4a3d01f14d9172">fc::hours</a>(1);</div>
<div class="line"><span class="lineno">  233</span>      <a class="code hl_class" href="classsysio_1_1chain__apis_1_1trx__retry__db.html">trx_retry_db</a> trx_retry( *chain, max_mem_usage_size, retry_interval, max_expiration_time, <a class="code hl_function" href="namespacefc.html#a9623b8cae3f48bbed6aa1fc2afe9b174">fc::seconds</a>(10) );</div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>      <span class="comment">// provide a subscriber for the transaction_ack channel</span></div>
<div class="line"><span class="lineno">  236</span>      blocking_queue&lt;std::pair&lt;fc::exception_ptr, packed_transaction_ptr&gt;&gt; transactions_acked;</div>
<div class="line"><span class="lineno">  237</span>      plugin_interface::compat::channels::transaction_ack::channel_type::handle incoming_transaction_ack_subscription =</div>
<div class="line"><span class="lineno">  238</span>            <a class="code hl_function" href="namespaceappbase.html#a99374dc23934f008a09f2f79be9eae40">appbase::app</a>().<a class="code hl_function" href="classappbase_1_1application.html#ac9e3f923a46466ea3ffbf4fea3187682">get_channel</a>&lt;<a class="code hl_struct" href="structappbase_1_1channel__decl.html">plugin_interface::compat::channels::transaction_ack</a>&gt;().subscribe(</div>
<div class="line"><span class="lineno">  239</span>                  [&amp;transactions_acked]( <span class="keyword">const</span> std::pair&lt;fc::exception_ptr, packed_transaction_ptr&gt;&amp; t){</div>
<div class="line"><span class="lineno">  240</span>                     transactions_acked.push( t );</div>
<div class="line"><span class="lineno">  241</span>                  } );</div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span>      <span class="comment">// test get_max_expiration_time</span></div>
<div class="line"><span class="lineno">  245</span>      BOOST_CHECK( <a class="code hl_function" href="classfc_1_1time__point.html#aa164ff1268a16d4b32afcff181f6100e">fc::time_point::now</a>() + <a class="code hl_function" href="namespacefc.html#a6e85a2de1275728bcc4a3d01f14d9172">fc::hours</a>(1) == <a class="code hl_class" href="classfc_1_1time__point.html">fc::time_point</a>( trx_retry.get_max_expiration_time() ) );</div>
<div class="line"><span class="lineno">  246</span> </div>
<div class="line"><span class="lineno">  247</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">  248</span>      <span class="comment">// test expired, not in a block</span></div>
<div class="line"><span class="lineno">  249</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">  250</span>      <span class="keyword">auto</span> lib = std::optional&lt;uint16_t&gt;{};</div>
<div class="line"><span class="lineno">  251</span>      <span class="keyword">auto</span> trx_1 = make_unique_trx(chain-&gt;get_chain_id(), <a class="code hl_function" href="namespacefc.html#a9623b8cae3f48bbed6aa1fc2afe9b174">fc::seconds</a>(2), 1);</div>
<div class="line"><span class="lineno">  252</span>      <span class="keywordtype">bool</span> trx_1_expired = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  253</span>      trx_retry.track_transaction( trx_1, lib, [&amp;trx_1_expired](<span class="keyword">const</span> std::variant&lt;<a class="code hl_typedef" href="namespacefc.html#a15170d1be1e682691dfe6ae09790edce">fc::exception_ptr</a>, std::unique_ptr&lt;fc::variant&gt;&gt;&amp; result){</div>
<div class="line"><span class="lineno">  254</span>         BOOST_REQUIRE( std::holds_alternative&lt;fc::exception_ptr&gt;(result) );</div>
<div class="line"><span class="lineno">  255</span>         BOOST_CHECK_EQUAL( std::get&lt;fc::exception_ptr&gt;(result)-&gt;code(), expired_tx_exception::code_value );</div>
<div class="line"><span class="lineno">  256</span>         trx_1_expired = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  257</span>      } );</div>
<div class="line"><span class="lineno">  258</span>      <span class="keyword">auto</span> trx_2 = make_unique_trx(chain-&gt;get_chain_id(), <a class="code hl_function" href="namespacefc.html#a9623b8cae3f48bbed6aa1fc2afe9b174">fc::seconds</a>(4), 2);</div>
<div class="line"><span class="lineno">  259</span>      <span class="keywordtype">bool</span> trx_2_expired = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  260</span>      trx_retry.track_transaction( trx_2, lib, [&amp;trx_2_expired](<span class="keyword">const</span> std::variant&lt;<a class="code hl_typedef" href="namespacefc.html#a15170d1be1e682691dfe6ae09790edce">fc::exception_ptr</a>, std::unique_ptr&lt;fc::variant&gt;&gt;&amp; result){</div>
<div class="line"><span class="lineno">  261</span>         BOOST_REQUIRE( std::holds_alternative&lt;fc::exception_ptr&gt;(result) );</div>
<div class="line"><span class="lineno">  262</span>         BOOST_CHECK_EQUAL( std::get&lt;fc::exception_ptr&gt;(result)-&gt;code(), expired_tx_exception::code_value );</div>
<div class="line"><span class="lineno">  263</span>         trx_2_expired = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  264</span>      } );</div>
<div class="line"><span class="lineno">  265</span>      <span class="comment">// signal block, nothing should be expired as now has not changed</span></div>
<div class="line"><span class="lineno">  266</span>      <span class="keyword">auto</span> bsp1 = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(1, {});</div>
<div class="line"><span class="lineno">  267</span>      trx_retry.on_block_start(1);</div>
<div class="line"><span class="lineno">  268</span>      trx_retry.on_accepted_block(bsp1);</div>
<div class="line"><span class="lineno">  269</span>      trx_retry.on_irreversible_block(bsp1);</div>
<div class="line"><span class="lineno">  270</span>      BOOST_CHECK(!trx_1_expired);</div>
<div class="line"><span class="lineno">  271</span>      BOOST_CHECK(!trx_2_expired);</div>
<div class="line"><span class="lineno">  272</span>      <span class="comment">// increase time by 3 seconds to expire first</span></div>
<div class="line"><span class="lineno">  273</span>      pnow += boost::posix_time::seconds(3);</div>
<div class="line"><span class="lineno">  274</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  275</span>      <span class="comment">// signal block, first transaction should expire</span></div>
<div class="line"><span class="lineno">  276</span>      <span class="keyword">auto</span> bsp2 = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(2, {});</div>
<div class="line"><span class="lineno">  277</span>      trx_retry.on_block_start(2);</div>
<div class="line"><span class="lineno">  278</span>      trx_retry.on_accepted_block(bsp2);</div>
<div class="line"><span class="lineno">  279</span>      trx_retry.on_irreversible_block(bsp2);</div>
<div class="line"><span class="lineno">  280</span>      BOOST_CHECK(trx_1_expired);</div>
<div class="line"><span class="lineno">  281</span>      BOOST_CHECK(!trx_2_expired);</div>
<div class="line"><span class="lineno">  282</span>      <span class="comment">// increase time by 2 seconds to expire second</span></div>
<div class="line"><span class="lineno">  283</span>      pnow += boost::posix_time::seconds(2);</div>
<div class="line"><span class="lineno">  284</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  285</span>      <span class="comment">// signal block, second transaction should expire</span></div>
<div class="line"><span class="lineno">  286</span>      <span class="keyword">auto</span> bsp3 = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(3, {});</div>
<div class="line"><span class="lineno">  287</span>      trx_retry.on_block_start(3);</div>
<div class="line"><span class="lineno">  288</span>      trx_retry.on_accepted_block(bsp3);</div>
<div class="line"><span class="lineno">  289</span>      trx_retry.on_irreversible_block(bsp3);</div>
<div class="line"><span class="lineno">  290</span>      BOOST_CHECK(trx_1_expired);</div>
<div class="line"><span class="lineno">  291</span>      BOOST_CHECK(trx_2_expired);</div>
<div class="line"><span class="lineno">  292</span>      BOOST_CHECK_EQUAL(0, trx_retry.size());</div>
<div class="line"><span class="lineno">  293</span> </div>
<div class="line"><span class="lineno">  294</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">  295</span>      <span class="comment">// test resend trx if not in block</span></div>
<div class="line"><span class="lineno">  296</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">  297</span>      <span class="keyword">auto</span> trx_3 = make_unique_trx(chain-&gt;get_chain_id(), <a class="code hl_function" href="namespacefc.html#a9623b8cae3f48bbed6aa1fc2afe9b174">fc::seconds</a>(30), 3);</div>
<div class="line"><span class="lineno">  298</span>      <span class="keywordtype">bool</span> trx_3_expired = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  299</span>      trx_retry.track_transaction( trx_3, lib, [&amp;trx_3_expired](<span class="keyword">const</span> std::variant&lt;<a class="code hl_typedef" href="namespacefc.html#a15170d1be1e682691dfe6ae09790edce">fc::exception_ptr</a>, std::unique_ptr&lt;fc::variant&gt;&gt;&amp; result){</div>
<div class="line"><span class="lineno">  300</span>         BOOST_REQUIRE( std::holds_alternative&lt;fc::exception_ptr&gt;(result) );</div>
<div class="line"><span class="lineno">  301</span>         BOOST_CHECK_EQUAL( std::get&lt;fc::exception_ptr&gt;(result)-&gt;code(), expired_tx_exception::code_value );</div>
<div class="line"><span class="lineno">  302</span>         trx_3_expired = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  303</span>      } );</div>
<div class="line"><span class="lineno">  304</span>      <span class="comment">// increase time by 1 seconds, so trx_4 retry interval diff than 3</span></div>
<div class="line"><span class="lineno">  305</span>      pnow += boost::posix_time::seconds(1);</div>
<div class="line"><span class="lineno">  306</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  307</span>      <span class="keyword">auto</span> trx_4 = make_unique_trx(chain-&gt;get_chain_id(), <a class="code hl_function" href="namespacefc.html#a9623b8cae3f48bbed6aa1fc2afe9b174">fc::seconds</a>(30), 4);</div>
<div class="line"><span class="lineno">  308</span>      <span class="keywordtype">bool</span> trx_4_expired = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  309</span>      trx_retry.track_transaction( trx_4, lib, [&amp;trx_4_expired](<span class="keyword">const</span> std::variant&lt;<a class="code hl_typedef" href="namespacefc.html#a15170d1be1e682691dfe6ae09790edce">fc::exception_ptr</a>, std::unique_ptr&lt;fc::variant&gt;&gt;&amp; result){</div>
<div class="line"><span class="lineno">  310</span>         BOOST_REQUIRE( std::holds_alternative&lt;fc::exception_ptr&gt;(result) );</div>
<div class="line"><span class="lineno">  311</span>         BOOST_CHECK_EQUAL( std::get&lt;fc::exception_ptr&gt;(result)-&gt;code(), expired_tx_exception::code_value );</div>
<div class="line"><span class="lineno">  312</span>         trx_4_expired = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  313</span>      } );</div>
<div class="line"><span class="lineno">  314</span>      <span class="comment">// increase time by interval to cause send</span></div>
<div class="line"><span class="lineno">  315</span>      pnow += (pretry_interval - boost::posix_time::seconds(1));</div>
<div class="line"><span class="lineno">  316</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  317</span>      <span class="comment">// signal block, transaction 3 should be sent</span></div>
<div class="line"><span class="lineno">  318</span>      <span class="keyword">auto</span> bsp4 = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(4, {});</div>
<div class="line"><span class="lineno">  319</span>      trx_retry.on_block_start(4);</div>
<div class="line"><span class="lineno">  320</span>      trx_retry.on_accepted_block(bsp4);</div>
<div class="line"><span class="lineno">  321</span>      BOOST_CHECK( get_id(transactions_acked.pop().second) == 3 );</div>
<div class="line"><span class="lineno">  322</span>      BOOST_CHECK_EQUAL( 0, transactions_acked.size() );</div>
<div class="line"><span class="lineno">  323</span>      <span class="comment">// increase time by 1 seconds, so trx_4 is sent</span></div>
<div class="line"><span class="lineno">  324</span>      pnow += boost::posix_time::seconds(1);</div>
<div class="line"><span class="lineno">  325</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  326</span>      <span class="comment">// signal block, transaction 4 should be sent</span></div>
<div class="line"><span class="lineno">  327</span>      <span class="keyword">auto</span> bsp5 = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(5, {});</div>
<div class="line"><span class="lineno">  328</span>      trx_retry.on_block_start(5);</div>
<div class="line"><span class="lineno">  329</span>      trx_retry.on_accepted_block(bsp5);</div>
<div class="line"><span class="lineno">  330</span>      BOOST_CHECK( get_id(transactions_acked.pop().second) == 4 );</div>
<div class="line"><span class="lineno">  331</span>      BOOST_CHECK_EQUAL( 0, transactions_acked.size() );</div>
<div class="line"><span class="lineno">  332</span>      BOOST_CHECK(!trx_3_expired);</div>
<div class="line"><span class="lineno">  333</span>      BOOST_CHECK(!trx_4_expired);</div>
<div class="line"><span class="lineno">  334</span>      <span class="comment">// go ahead and expire them now</span></div>
<div class="line"><span class="lineno">  335</span>      pnow += boost::posix_time::seconds(30);</div>
<div class="line"><span class="lineno">  336</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  337</span>      <span class="keyword">auto</span> bsp6 = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(6, {});</div>
<div class="line"><span class="lineno">  338</span>      trx_retry.on_block_start(6);</div>
<div class="line"><span class="lineno">  339</span>      trx_retry.on_accepted_block(bsp6);</div>
<div class="line"><span class="lineno">  340</span>      trx_retry.on_irreversible_block(bsp4);</div>
<div class="line"><span class="lineno">  341</span>      trx_retry.on_irreversible_block(bsp5);</div>
<div class="line"><span class="lineno">  342</span>      trx_retry.on_irreversible_block(bsp6);</div>
<div class="line"><span class="lineno">  343</span>      BOOST_CHECK(trx_3_expired);</div>
<div class="line"><span class="lineno">  344</span>      BOOST_CHECK(trx_4_expired);</div>
<div class="line"><span class="lineno">  345</span>      BOOST_CHECK_EQUAL(0, trx_retry.size());</div>
<div class="line"><span class="lineno">  346</span> </div>
<div class="line"><span class="lineno">  347</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">  348</span>      <span class="comment">// test reply to user</span></div>
<div class="line"><span class="lineno">  349</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">  350</span>      <span class="keyword">auto</span> trx_5 = make_unique_trx(chain-&gt;get_chain_id(), <a class="code hl_function" href="namespacefc.html#a9623b8cae3f48bbed6aa1fc2afe9b174">fc::seconds</a>(30), 5);</div>
<div class="line"><span class="lineno">  351</span>      <span class="keywordtype">bool</span> trx_5_variant = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  352</span>      trx_retry.track_transaction( trx_5, lib, [&amp;trx_5_variant](<span class="keyword">const</span> std::variant&lt;<a class="code hl_typedef" href="namespacefc.html#a15170d1be1e682691dfe6ae09790edce">fc::exception_ptr</a>, std::unique_ptr&lt;fc::variant&gt;&gt;&amp; result){</div>
<div class="line"><span class="lineno">  353</span>         BOOST_REQUIRE( std::holds_alternative&lt;std::unique_ptr&lt;fc::variant&gt;&gt;(result) );</div>
<div class="line"><span class="lineno">  354</span>         BOOST_CHECK( !!std::get&lt;std::unique_ptr&lt;fc::variant&gt;&gt;(result) );</div>
<div class="line"><span class="lineno">  355</span>         trx_5_variant = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  356</span>      } );</div>
<div class="line"><span class="lineno">  357</span>      <span class="comment">// increase time by 1 seconds, so trx_6 retry interval diff than 5</span></div>
<div class="line"><span class="lineno">  358</span>      pnow += boost::posix_time::seconds(1);</div>
<div class="line"><span class="lineno">  359</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  360</span>      <span class="keyword">auto</span> trx_6 = make_unique_trx(chain-&gt;get_chain_id(), <a class="code hl_function" href="namespacefc.html#a9623b8cae3f48bbed6aa1fc2afe9b174">fc::seconds</a>(30), 6);</div>
<div class="line"><span class="lineno">  361</span>      <span class="keywordtype">bool</span> trx_6_variant = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  362</span>      trx_retry.track_transaction( trx_6, std::optional&lt;uint32_t&gt;(2), [&amp;trx_6_variant](<span class="keyword">const</span> std::variant&lt;<a class="code hl_typedef" href="namespacefc.html#a15170d1be1e682691dfe6ae09790edce">fc::exception_ptr</a>, std::unique_ptr&lt;fc::variant&gt;&gt;&amp; result){</div>
<div class="line"><span class="lineno">  363</span>         BOOST_REQUIRE( std::holds_alternative&lt;std::unique_ptr&lt;fc::variant&gt;&gt;(result) );</div>
<div class="line"><span class="lineno">  364</span>         BOOST_CHECK( !!std::get&lt;std::unique_ptr&lt;fc::variant&gt;&gt;(result) );</div>
<div class="line"><span class="lineno">  365</span>         trx_6_variant = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  366</span>      } );</div>
<div class="line"><span class="lineno">  367</span>      <span class="comment">// not in block 7, so not returned to user</span></div>
<div class="line"><span class="lineno">  368</span>      <span class="keyword">auto</span> bsp7 = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(7, {});</div>
<div class="line"><span class="lineno">  369</span>      trx_retry.on_block_start(7);</div>
<div class="line"><span class="lineno">  370</span>      trx_retry.on_accepted_block(bsp7);</div>
<div class="line"><span class="lineno">  371</span>      BOOST_CHECK(!trx_5_variant);</div>
<div class="line"><span class="lineno">  372</span>      BOOST_CHECK(!trx_6_variant);</div>
<div class="line"><span class="lineno">  373</span>      <span class="comment">// 5,6 in block 8</span></div>
<div class="line"><span class="lineno">  374</span>      pnow += boost::posix_time::seconds(1); <span class="comment">// new block, new time</span></div>
<div class="line"><span class="lineno">  375</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  376</span>      trx_retry.on_block_start(8);</div>
<div class="line"><span class="lineno">  377</span>      <span class="keyword">auto</span> trace_5 = make_transaction_trace( trx_5, 8);</div>
<div class="line"><span class="lineno">  378</span>      <span class="keyword">auto</span> trace_6 = make_transaction_trace( trx_6, 8);</div>
<div class="line"><span class="lineno">  379</span>      trx_retry.on_applied_transaction(trace_5, trx_5);</div>
<div class="line"><span class="lineno">  380</span>      trx_retry.on_applied_transaction(trace_6, trx_6);</div>
<div class="line"><span class="lineno">  381</span>      <span class="keyword">auto</span> bsp8 = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(8, {trx_5, trx_6});</div>
<div class="line"><span class="lineno">  382</span>      trx_retry.on_accepted_block(bsp8);</div>
<div class="line"><span class="lineno">  383</span>      BOOST_CHECK(!trx_5_variant);</div>
<div class="line"><span class="lineno">  384</span>      BOOST_CHECK(!trx_6_variant);</div>
<div class="line"><span class="lineno">  385</span>      <span class="comment">// need 2 blocks before 6 returned to user</span></div>
<div class="line"><span class="lineno">  386</span>      pnow += boost::posix_time::seconds(1); <span class="comment">// new block, new time</span></div>
<div class="line"><span class="lineno">  387</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  388</span>      <span class="keyword">auto</span> bsp9 = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(9, {});</div>
<div class="line"><span class="lineno">  389</span>      trx_retry.on_block_start(9);</div>
<div class="line"><span class="lineno">  390</span>      trx_retry.on_accepted_block(bsp9);</div>
<div class="line"><span class="lineno">  391</span>      BOOST_CHECK(!trx_5_variant);</div>
<div class="line"><span class="lineno">  392</span>      BOOST_CHECK(!trx_6_variant);</div>
<div class="line"><span class="lineno">  393</span>      pnow += boost::posix_time::seconds(1); <span class="comment">// new block, new time</span></div>
<div class="line"><span class="lineno">  394</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  395</span>      <span class="keyword">auto</span> bsp10 = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(10, {});</div>
<div class="line"><span class="lineno">  396</span>      trx_retry.on_block_start(10);</div>
<div class="line"><span class="lineno">  397</span>      trx_retry.on_accepted_block(bsp10);</div>
<div class="line"><span class="lineno">  398</span>      BOOST_CHECK(!trx_5_variant);</div>
<div class="line"><span class="lineno">  399</span>      BOOST_CHECK(trx_6_variant);</div>
<div class="line"><span class="lineno">  400</span>      <span class="comment">// now signal lib for trx_6</span></div>
<div class="line"><span class="lineno">  401</span>      pnow += boost::posix_time::seconds(1); <span class="comment">// new block, new time</span></div>
<div class="line"><span class="lineno">  402</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  403</span>      <span class="keyword">auto</span> bsp11 = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(11, {});</div>
<div class="line"><span class="lineno">  404</span>      trx_retry.on_block_start(11);</div>
<div class="line"><span class="lineno">  405</span>      trx_retry.on_accepted_block(bsp11);</div>
<div class="line"><span class="lineno">  406</span>      BOOST_CHECK(!trx_5_variant);</div>
<div class="line"><span class="lineno">  407</span>      BOOST_CHECK(trx_6_variant);</div>
<div class="line"><span class="lineno">  408</span>      trx_retry.on_irreversible_block(bsp7);</div>
<div class="line"><span class="lineno">  409</span>      BOOST_CHECK(!trx_5_variant);</div>
<div class="line"><span class="lineno">  410</span>      BOOST_CHECK(trx_6_variant);</div>
<div class="line"><span class="lineno">  411</span>      trx_retry.on_irreversible_block(bsp8);</div>
<div class="line"><span class="lineno">  412</span>      BOOST_CHECK(trx_5_variant);</div>
<div class="line"><span class="lineno">  413</span>      BOOST_CHECK(trx_6_variant);</div>
<div class="line"><span class="lineno">  414</span>      BOOST_CHECK_EQUAL(0, trx_retry.size());</div>
<div class="line"><span class="lineno">  415</span> </div>
<div class="line"><span class="lineno">  416</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">  417</span>      <span class="comment">// test forking</span></div>
<div class="line"><span class="lineno">  418</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">  419</span>      <span class="keyword">auto</span> trx_7 = make_unique_trx(chain-&gt;get_chain_id(), <a class="code hl_function" href="namespacefc.html#a9623b8cae3f48bbed6aa1fc2afe9b174">fc::seconds</a>(30), 7);</div>
<div class="line"><span class="lineno">  420</span>      <span class="keywordtype">bool</span> trx_7_variant = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  421</span>      trx_retry.track_transaction( trx_7, lib, [&amp;trx_7_variant](<span class="keyword">const</span> std::variant&lt;<a class="code hl_typedef" href="namespacefc.html#a15170d1be1e682691dfe6ae09790edce">fc::exception_ptr</a>, std::unique_ptr&lt;fc::variant&gt;&gt;&amp; result){</div>
<div class="line"><span class="lineno">  422</span>         BOOST_REQUIRE( std::holds_alternative&lt;std::unique_ptr&lt;fc::variant&gt;&gt;(result) );</div>
<div class="line"><span class="lineno">  423</span>         BOOST_CHECK( !!std::get&lt;std::unique_ptr&lt;fc::variant&gt;&gt;(result) );</div>
<div class="line"><span class="lineno">  424</span>         trx_7_variant = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  425</span>      } );</div>
<div class="line"><span class="lineno">  426</span>      <span class="comment">// increase time by 1 seconds, so trx_8 retry interval diff than 7</span></div>
<div class="line"><span class="lineno">  427</span>      pnow += boost::posix_time::seconds(1);</div>
<div class="line"><span class="lineno">  428</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  429</span>      <span class="keyword">auto</span> trx_8 = make_unique_trx(chain-&gt;get_chain_id(), <a class="code hl_function" href="namespacefc.html#a9623b8cae3f48bbed6aa1fc2afe9b174">fc::seconds</a>(30), 8);</div>
<div class="line"><span class="lineno">  430</span>      <span class="keywordtype">bool</span> trx_8_variant = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  431</span>      trx_retry.track_transaction( trx_8, std::optional&lt;uint32_t&gt;(3), [&amp;trx_8_variant](<span class="keyword">const</span> std::variant&lt;<a class="code hl_typedef" href="namespacefc.html#a15170d1be1e682691dfe6ae09790edce">fc::exception_ptr</a>, std::unique_ptr&lt;fc::variant&gt;&gt;&amp; result){</div>
<div class="line"><span class="lineno">  432</span>         BOOST_REQUIRE( std::holds_alternative&lt;std::unique_ptr&lt;fc::variant&gt;&gt;(result) );</div>
<div class="line"><span class="lineno">  433</span>         BOOST_CHECK( !!std::get&lt;std::unique_ptr&lt;fc::variant&gt;&gt;(result) );</div>
<div class="line"><span class="lineno">  434</span>         trx_8_variant = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  435</span>      } );</div>
<div class="line"><span class="lineno">  436</span>      <span class="comment">// one to expire, will be forked out never to return</span></div>
<div class="line"><span class="lineno">  437</span>      <span class="keyword">auto</span> trx_9 = make_unique_trx(chain-&gt;get_chain_id(), <a class="code hl_function" href="namespacefc.html#a9623b8cae3f48bbed6aa1fc2afe9b174">fc::seconds</a>(30), 9);</div>
<div class="line"><span class="lineno">  438</span>      <span class="keywordtype">bool</span> trx_9_expired = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  439</span>      trx_retry.track_transaction( trx_9, lib, [&amp;trx_9_expired](<span class="keyword">const</span> std::variant&lt;<a class="code hl_typedef" href="namespacefc.html#a15170d1be1e682691dfe6ae09790edce">fc::exception_ptr</a>, std::unique_ptr&lt;fc::variant&gt;&gt;&amp; result){</div>
<div class="line"><span class="lineno">  440</span>         BOOST_REQUIRE( std::holds_alternative&lt;fc::exception_ptr&gt;(result) );</div>
<div class="line"><span class="lineno">  441</span>         BOOST_CHECK_EQUAL( std::get&lt;fc::exception_ptr&gt;(result)-&gt;code(), expired_tx_exception::code_value );</div>
<div class="line"><span class="lineno">  442</span>         trx_9_expired = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  443</span>      } );</div>
<div class="line"><span class="lineno">  444</span> </div>
<div class="line"><span class="lineno">  445</span>      <span class="comment">// not in block 12</span></div>
<div class="line"><span class="lineno">  446</span>      <span class="keyword">auto</span> bsp12 = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(12, {});</div>
<div class="line"><span class="lineno">  447</span>      trx_retry.on_block_start(12);</div>
<div class="line"><span class="lineno">  448</span>      trx_retry.on_accepted_block(bsp12);</div>
<div class="line"><span class="lineno">  449</span>      BOOST_CHECK(!trx_7_variant);</div>
<div class="line"><span class="lineno">  450</span>      BOOST_CHECK(!trx_8_variant);</div>
<div class="line"><span class="lineno">  451</span>      BOOST_CHECK(!trx_9_expired);</div>
<div class="line"><span class="lineno">  452</span>      <span class="comment">// 7,8 in block 13</span></div>
<div class="line"><span class="lineno">  453</span>      pnow += boost::posix_time::seconds(1); <span class="comment">// new block, new time</span></div>
<div class="line"><span class="lineno">  454</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  455</span>      trx_retry.on_block_start(13);</div>
<div class="line"><span class="lineno">  456</span>      <span class="keyword">auto</span> trace_7 = make_transaction_trace( trx_7, 13);</div>
<div class="line"><span class="lineno">  457</span>      <span class="keyword">auto</span> trace_8 = make_transaction_trace( trx_8, 13);</div>
<div class="line"><span class="lineno">  458</span>      <span class="keyword">auto</span> trace_9 = make_transaction_trace( trx_9, 13);</div>
<div class="line"><span class="lineno">  459</span>      trx_retry.on_applied_transaction(trace_7, trx_7);</div>
<div class="line"><span class="lineno">  460</span>      trx_retry.on_applied_transaction(trace_8, trx_8);</div>
<div class="line"><span class="lineno">  461</span>      trx_retry.on_applied_transaction(trace_9, trx_9);</div>
<div class="line"><span class="lineno">  462</span>      <span class="keyword">auto</span> bsp13 = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(13, {trx_7, trx_8, trx_9});</div>
<div class="line"><span class="lineno">  463</span>      trx_retry.on_accepted_block(bsp13);</div>
<div class="line"><span class="lineno">  464</span>      BOOST_CHECK(!trx_7_variant);</div>
<div class="line"><span class="lineno">  465</span>      BOOST_CHECK(!trx_8_variant);</div>
<div class="line"><span class="lineno">  466</span>      BOOST_CHECK(!trx_9_expired);</div>
<div class="line"><span class="lineno">  467</span>      <span class="comment">// need 3 blocks before 8 returned to user</span></div>
<div class="line"><span class="lineno">  468</span>      pnow += boost::posix_time::seconds(1); <span class="comment">// new block, new time, 1st block</span></div>
<div class="line"><span class="lineno">  469</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  470</span>      <span class="keyword">auto</span> bsp14 = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(14, {});</div>
<div class="line"><span class="lineno">  471</span>      trx_retry.on_block_start(14);</div>
<div class="line"><span class="lineno">  472</span>      trx_retry.on_accepted_block(bsp14);</div>
<div class="line"><span class="lineno">  473</span>      BOOST_CHECK(!trx_7_variant);</div>
<div class="line"><span class="lineno">  474</span>      BOOST_CHECK(!trx_8_variant);</div>
<div class="line"><span class="lineno">  475</span>      BOOST_CHECK(!trx_9_expired);</div>
<div class="line"><span class="lineno">  476</span>      pnow += boost::posix_time::seconds(1); <span class="comment">// new block, new time, 2nd block</span></div>
<div class="line"><span class="lineno">  477</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  478</span>      <span class="keyword">auto</span> bsp15 = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(15, {});</div>
<div class="line"><span class="lineno">  479</span>      trx_retry.on_block_start(15);</div>
<div class="line"><span class="lineno">  480</span>      trx_retry.on_accepted_block(bsp15);</div>
<div class="line"><span class="lineno">  481</span>      BOOST_CHECK(!trx_7_variant);</div>
<div class="line"><span class="lineno">  482</span>      BOOST_CHECK(!trx_8_variant);</div>
<div class="line"><span class="lineno">  483</span>      BOOST_CHECK(!trx_9_expired);</div>
<div class="line"><span class="lineno">  484</span>      <span class="comment">// now fork out including 13 which had traces, trx_9 will be forked out and not re-appear</span></div>
<div class="line"><span class="lineno">  485</span>      pnow += boost::posix_time::seconds(1); <span class="comment">// new block, new time</span></div>
<div class="line"><span class="lineno">  486</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  487</span>      trx_retry.on_block_start(13);</div>
<div class="line"><span class="lineno">  488</span>      <span class="comment">// should still be tracking them</span></div>
<div class="line"><span class="lineno">  489</span>      BOOST_CHECK_EQUAL(3, trx_retry.size());</div>
<div class="line"><span class="lineno">  490</span>      <span class="comment">// now produce an empty 13</span></div>
<div class="line"><span class="lineno">  491</span>      <span class="keyword">auto</span> bsp13b = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(13, {}); <span class="comment">// now 13 has no traces</span></div>
<div class="line"><span class="lineno">  492</span>      trx_retry.on_accepted_block(bsp13b);</div>
<div class="line"><span class="lineno">  493</span>      <span class="comment">// produced another empty block</span></div>
<div class="line"><span class="lineno">  494</span>      pnow += boost::posix_time::seconds(1); <span class="comment">// new block, new time</span></div>
<div class="line"><span class="lineno">  495</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  496</span>      trx_retry.on_block_start(14);</div>
<div class="line"><span class="lineno">  497</span>      <span class="comment">// now produce an empty 14</span></div>
<div class="line"><span class="lineno">  498</span>      <span class="keyword">auto</span> bsp14b = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(14, {}); <span class="comment">// empty</span></div>
<div class="line"><span class="lineno">  499</span>      trx_retry.on_accepted_block(bsp14b);</div>
<div class="line"><span class="lineno">  500</span>      <span class="comment">// produce block with 7,8</span></div>
<div class="line"><span class="lineno">  501</span>      trx_retry.on_block_start(15);</div>
<div class="line"><span class="lineno">  502</span>      <span class="keyword">auto</span> trace_7b = make_transaction_trace( trx_7, 15);</div>
<div class="line"><span class="lineno">  503</span>      <span class="keyword">auto</span> trace_8b = make_transaction_trace( trx_8, 15);</div>
<div class="line"><span class="lineno">  504</span>      trx_retry.on_applied_transaction(trace_7b, trx_7);</div>
<div class="line"><span class="lineno">  505</span>      trx_retry.on_applied_transaction(trace_8b, trx_8);</div>
<div class="line"><span class="lineno">  506</span>      <span class="keyword">auto</span> bsp15b = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(15, {trx_7, trx_8});</div>
<div class="line"><span class="lineno">  507</span>      trx_retry.on_accepted_block(bsp15b);</div>
<div class="line"><span class="lineno">  508</span>      <span class="comment">// need 3 blocks before 8 returned to user</span></div>
<div class="line"><span class="lineno">  509</span>      pnow += boost::posix_time::seconds(1); <span class="comment">// new block, new time</span></div>
<div class="line"><span class="lineno">  510</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  511</span>      <span class="keyword">auto</span> bsp16 = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(16, {});</div>
<div class="line"><span class="lineno">  512</span>      trx_retry.on_block_start(16);</div>
<div class="line"><span class="lineno">  513</span>      trx_retry.on_accepted_block(bsp16);</div>
<div class="line"><span class="lineno">  514</span>      BOOST_CHECK(!trx_7_variant);</div>
<div class="line"><span class="lineno">  515</span>      BOOST_CHECK(!trx_8_variant);</div>
<div class="line"><span class="lineno">  516</span>      BOOST_CHECK(!trx_9_expired);</div>
<div class="line"><span class="lineno">  517</span>      pnow += boost::posix_time::seconds(1); <span class="comment">// new block, new time</span></div>
<div class="line"><span class="lineno">  518</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  519</span>      <span class="keyword">auto</span> bsp17 = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(17, {});</div>
<div class="line"><span class="lineno">  520</span>      trx_retry.on_block_start(17);</div>
<div class="line"><span class="lineno">  521</span>      trx_retry.on_accepted_block(bsp17);</div>
<div class="line"><span class="lineno">  522</span>      BOOST_CHECK(!trx_7_variant);</div>
<div class="line"><span class="lineno">  523</span>      BOOST_CHECK(!trx_8_variant);</div>
<div class="line"><span class="lineno">  524</span>      BOOST_CHECK(!trx_9_expired);</div>
<div class="line"><span class="lineno">  525</span>      pnow += boost::posix_time::seconds(1); <span class="comment">// new block, new time, 3rd one</span></div>
<div class="line"><span class="lineno">  526</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  527</span>      <span class="keyword">auto</span> bsp18 = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(18, {});</div>
<div class="line"><span class="lineno">  528</span>      trx_retry.on_block_start(18);</div>
<div class="line"><span class="lineno">  529</span>      trx_retry.on_accepted_block(bsp18);</div>
<div class="line"><span class="lineno">  530</span>      BOOST_CHECK(!trx_7_variant);</div>
<div class="line"><span class="lineno">  531</span>      BOOST_CHECK(trx_8_variant);</div>
<div class="line"><span class="lineno">  532</span>      BOOST_CHECK(!trx_9_expired);</div>
<div class="line"><span class="lineno">  533</span>      trx_retry.on_irreversible_block(bsp9);</div>
<div class="line"><span class="lineno">  534</span>      trx_retry.on_irreversible_block(bsp10);</div>
<div class="line"><span class="lineno">  535</span>      trx_retry.on_irreversible_block(bsp11);</div>
<div class="line"><span class="lineno">  536</span>      trx_retry.on_irreversible_block(bsp12);</div>
<div class="line"><span class="lineno">  537</span>      trx_retry.on_irreversible_block(bsp13b);</div>
<div class="line"><span class="lineno">  538</span>      trx_retry.on_irreversible_block(bsp14b);</div>
<div class="line"><span class="lineno">  539</span>      BOOST_CHECK(!trx_7_variant);</div>
<div class="line"><span class="lineno">  540</span>      BOOST_CHECK(trx_8_variant);</div>
<div class="line"><span class="lineno">  541</span>      BOOST_CHECK(!trx_9_expired);</div>
<div class="line"><span class="lineno">  542</span>      trx_retry.on_irreversible_block(bsp15b);</div>
<div class="line"><span class="lineno">  543</span>      BOOST_CHECK(trx_7_variant);</div>
<div class="line"><span class="lineno">  544</span>      BOOST_CHECK(trx_8_variant);</div>
<div class="line"><span class="lineno">  545</span>      BOOST_CHECK(!trx_9_expired);</div>
<div class="line"><span class="lineno">  546</span>      <span class="comment">// verify trx_9 expires</span></div>
<div class="line"><span class="lineno">  547</span>      pnow += boost::posix_time::seconds(21); <span class="comment">// new block, new time, before expire</span></div>
<div class="line"><span class="lineno">  548</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  549</span>      <span class="keyword">auto</span> bsp19 = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(19, {});</div>
<div class="line"><span class="lineno">  550</span>      trx_retry.on_block_start(19);</div>
<div class="line"><span class="lineno">  551</span>      trx_retry.on_accepted_block(bsp19);</div>
<div class="line"><span class="lineno">  552</span>      trx_retry.on_irreversible_block(bsp15);</div>
<div class="line"><span class="lineno">  553</span>      trx_retry.on_irreversible_block(bsp16);</div>
<div class="line"><span class="lineno">  554</span>      trx_retry.on_irreversible_block(bsp17);</div>
<div class="line"><span class="lineno">  555</span>      trx_retry.on_irreversible_block(bsp18);</div>
<div class="line"><span class="lineno">  556</span>      trx_retry.on_irreversible_block(bsp19);</div>
<div class="line"><span class="lineno">  557</span>      BOOST_CHECK(trx_7_variant);</div>
<div class="line"><span class="lineno">  558</span>      BOOST_CHECK(trx_8_variant);</div>
<div class="line"><span class="lineno">  559</span>      BOOST_CHECK(!trx_9_expired);</div>
<div class="line"><span class="lineno">  560</span>      pnow += boost::posix_time::seconds(1); <span class="comment">// new block, new time, trx_9 now expired</span></div>
<div class="line"><span class="lineno">  561</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  562</span>      <span class="keyword">auto</span> bsp20 = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(20, {});</div>
<div class="line"><span class="lineno">  563</span>      trx_retry.on_block_start(20);</div>
<div class="line"><span class="lineno">  564</span>      trx_retry.on_accepted_block(bsp20);</div>
<div class="line"><span class="lineno">  565</span>      <span class="comment">// waits for LIB</span></div>
<div class="line"><span class="lineno">  566</span>      BOOST_CHECK(trx_7_variant);</div>
<div class="line"><span class="lineno">  567</span>      BOOST_CHECK(trx_8_variant);</div>
<div class="line"><span class="lineno">  568</span>      BOOST_CHECK(!trx_9_expired);</div>
<div class="line"><span class="lineno">  569</span>      trx_retry.on_irreversible_block(bsp20);</div>
<div class="line"><span class="lineno">  570</span>      BOOST_CHECK(trx_7_variant);</div>
<div class="line"><span class="lineno">  571</span>      BOOST_CHECK(trx_8_variant);</div>
<div class="line"><span class="lineno">  572</span>      BOOST_CHECK(trx_9_expired);</div>
<div class="line"><span class="lineno">  573</span>      BOOST_CHECK_EQUAL(0, trx_retry.size());</div>
<div class="line"><span class="lineno">  574</span> </div>
<div class="line"><span class="lineno">  575</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">  576</span>      <span class="comment">// test reply to user for num_blocks == 0</span></div>
<div class="line"><span class="lineno">  577</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">  578</span>      <span class="keyword">auto</span> trx_10 = make_unique_trx(chain-&gt;get_chain_id(), <a class="code hl_function" href="namespacefc.html#a9623b8cae3f48bbed6aa1fc2afe9b174">fc::seconds</a>(30), 10);</div>
<div class="line"><span class="lineno">  579</span>      <span class="keywordtype">bool</span> trx_10_variant = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  580</span>      trx_retry.track_transaction( trx_10, std::optional&lt;uint32_t&gt;(0), [&amp;trx_10_variant](<span class="keyword">const</span> std::variant&lt;<a class="code hl_typedef" href="namespacefc.html#a15170d1be1e682691dfe6ae09790edce">fc::exception_ptr</a>, std::unique_ptr&lt;fc::variant&gt;&gt;&amp; result){</div>
<div class="line"><span class="lineno">  581</span>         BOOST_REQUIRE( std::holds_alternative&lt;std::unique_ptr&lt;fc::variant&gt;&gt;(result) );</div>
<div class="line"><span class="lineno">  582</span>         BOOST_CHECK( !!std::get&lt;std::unique_ptr&lt;fc::variant&gt;&gt;(result) );</div>
<div class="line"><span class="lineno">  583</span>         trx_10_variant = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  584</span>      } );</div>
<div class="line"><span class="lineno">  585</span>      <span class="keyword">auto</span> trx_11 = make_unique_trx(chain-&gt;get_chain_id(), <a class="code hl_function" href="namespacefc.html#a9623b8cae3f48bbed6aa1fc2afe9b174">fc::seconds</a>(30), 11);</div>
<div class="line"><span class="lineno">  586</span>      <span class="keywordtype">bool</span> trx_11_variant = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  587</span>      trx_retry.track_transaction( trx_11, std::optional&lt;uint32_t&gt;(1), [&amp;trx_11_variant](<span class="keyword">const</span> std::variant&lt;<a class="code hl_typedef" href="namespacefc.html#a15170d1be1e682691dfe6ae09790edce">fc::exception_ptr</a>, std::unique_ptr&lt;fc::variant&gt;&gt;&amp; result){</div>
<div class="line"><span class="lineno">  588</span>         BOOST_REQUIRE( std::holds_alternative&lt;std::unique_ptr&lt;fc::variant&gt;&gt;(result) );</div>
<div class="line"><span class="lineno">  589</span>         BOOST_CHECK( !!std::get&lt;std::unique_ptr&lt;fc::variant&gt;&gt;(result) );</div>
<div class="line"><span class="lineno">  590</span>         trx_11_variant = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  591</span>      } );</div>
<div class="line"><span class="lineno">  592</span>      <span class="comment">// seen in block immediately</span></div>
<div class="line"><span class="lineno">  593</span>      trx_retry.on_block_start(21);</div>
<div class="line"><span class="lineno">  594</span>      <span class="keyword">auto</span> trace_10 = make_transaction_trace( trx_10, 21);</div>
<div class="line"><span class="lineno">  595</span>      <span class="keyword">auto</span> trace_11 = make_transaction_trace( trx_11, 21);</div>
<div class="line"><span class="lineno">  596</span>      trx_retry.on_applied_transaction(trace_10, trx_10);</div>
<div class="line"><span class="lineno">  597</span>      trx_retry.on_applied_transaction(trace_11, trx_11);</div>
<div class="line"><span class="lineno">  598</span>      <span class="keyword">auto</span> bsp21 = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(21, {trx_10, trx_11});</div>
<div class="line"><span class="lineno">  599</span>      trx_retry.on_accepted_block(bsp21);</div>
<div class="line"><span class="lineno">  600</span>      BOOST_CHECK(trx_10_variant);</div>
<div class="line"><span class="lineno">  601</span>      BOOST_CHECK(!trx_11_variant);</div>
<div class="line"><span class="lineno">  602</span>      pnow += boost::posix_time::seconds(1); <span class="comment">// new block, new time</span></div>
<div class="line"><span class="lineno">  603</span>      <a class="code hl_function" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a>(pnow);</div>
<div class="line"><span class="lineno">  604</span>      <span class="keyword">auto</span> bsp22 = <a class="code hl_function" href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">make_block_state</a>(22, {});</div>
<div class="line"><span class="lineno">  605</span>      trx_retry.on_block_start(22);</div>
<div class="line"><span class="lineno">  606</span>      trx_retry.on_accepted_block(bsp22);</div>
<div class="line"><span class="lineno">  607</span>      BOOST_CHECK(trx_10_variant);</div>
<div class="line"><span class="lineno">  608</span>      BOOST_CHECK(trx_11_variant);</div>
<div class="line"><span class="lineno">  609</span>      BOOST_CHECK_EQUAL(0, trx_retry.size());</div>
<div class="line"><span class="lineno">  610</span> </div>
<div class="line"><span class="lineno">  611</span> </div>
<div class="line"><span class="lineno">  612</span>      <span class="comment">// shutdown</span></div>
<div class="line"><span class="lineno">  613</span>      <a class="code hl_function" href="namespaceappbase.html#a99374dc23934f008a09f2f79be9eae40">appbase::app</a>().<a class="code hl_function" href="classappbase_1_1application.html#a81aa58d3f94570b7976145039155fc46">quit</a>();</div>
<div class="line"><span class="lineno">  614</span>      app_thread.join();</div>
<div class="line"><span class="lineno">  615</span> </div>
<div class="line"><span class="lineno">  616</span>   } <span class="keywordflow">catch</span> ( ... ) {</div>
<div class="line"><span class="lineno">  617</span>      boost::filesystem::remove_all( temp );</div>
<div class="line"><span class="lineno">  618</span>      <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  619</span>   }</div>
<div class="line"><span class="lineno">  620</span>   boost::filesystem::remove_all( temp );</div>
<div class="line"><span class="lineno">  621</span>}</div>
<div class="ttc" id="aclassappbase_1_1application_html_a39286b0b034b97f6940568a00f44edaf"><div class="ttname"><a href="classappbase_1_1application.html#a39286b0b034b97f6940568a00f44edaf">appbase::application::exec</a></div><div class="ttdeci">void exec()</div><div class="ttdef"><b>Definition</b> <a href="application_8cpp_source.html#l00442">application.cpp:442</a></div></div>
<div class="ttc" id="aclassappbase_1_1application_html_a81aa58d3f94570b7976145039155fc46"><div class="ttname"><a href="classappbase_1_1application.html#a81aa58d3f94570b7976145039155fc46">appbase::application::quit</a></div><div class="ttdeci">void quit()</div><div class="ttdef"><b>Definition</b> <a href="application_8cpp_source.html#l00415">application.cpp:415</a></div></div>
<div class="ttc" id="aclassappbase_1_1application_html_ac9e3f923a46466ea3ffbf4fea3187682"><div class="ttname"><a href="classappbase_1_1application.html#ac9e3f923a46466ea3ffbf4fea3187682">appbase::application::get_channel</a></div><div class="ttdeci">auto get_channel() -&gt; std::enable_if_t&lt; is_channel_decl&lt; ChannelDecl &gt;::value, typename ChannelDecl::channel_type &amp; &gt;</div><div class="ttdef"><b>Definition</b> <a href="application_8hpp_source.html#l00188">application.hpp:188</a></div></div>
<div class="ttc" id="aclassfc_1_1log__level_html_a5a5e31c4c1f38d9115ecbe44927fb2e4a30d2de77e71beb8d09d530cac04efa25"><div class="ttname"><a href="classfc_1_1log__level.html#a5a5e31c4c1f38d9115ecbe44927fb2e4a30d2de77e71beb8d09d530cac04efa25">fc::log_level::debug</a></div><div class="ttdeci">@ debug</div><div class="ttdef"><b>Definition</b> <a href="log__message_8hpp_source.html#l00033">log_message.hpp:33</a></div></div>
<div class="ttc" id="aclassfc_1_1logger_html_a4c22e498cec41efb806fda9733662650"><div class="ttname"><a href="classfc_1_1logger.html#a4c22e498cec41efb806fda9733662650">fc::logger::set_log_level</a></div><div class="ttdeci">logger &amp; set_log_level(log_level e)</div><div class="ttdef"><b>Definition</b> <a href="logger_8cpp_source.html#l00100">logger.cpp:100</a></div></div>
<div class="ttc" id="aclassfc_1_1logger_html_a4e12ef2e794551d593e497b4b90601ab"><div class="ttname"><a href="classfc_1_1logger.html#a4e12ef2e794551d593e497b4b90601ab">fc::logger::get</a></div><div class="ttdeci">static logger get(const fc::string &amp;name=DEFAULT_LOGGER)</div><div class="ttdef"><b>Definition</b> <a href="logger_8cpp_source.html#l00088">logger.cpp:88</a></div></div>
<div class="ttc" id="aclassfc_1_1microseconds_html"><div class="ttname"><a href="classfc_1_1microseconds.html">fc::microseconds</a></div><div class="ttdef"><b>Definition</b> <a href="include_2fc_2time_8hpp_source.html#l00011">time.hpp:11</a></div></div>
<div class="ttc" id="aclassfc_1_1microseconds_html_a20fba59ec7e1f50c6b8f2c9443cc9b92"><div class="ttname"><a href="classfc_1_1microseconds.html#a20fba59ec7e1f50c6b8f2c9443cc9b92">fc::microseconds::count</a></div><div class="ttdeci">constexpr int64_t count() const</div><div class="ttdef"><b>Definition</b> <a href="include_2fc_2time_8hpp_source.html#l00026">time.hpp:26</a></div></div>
<div class="ttc" id="aclassfc_1_1mock__time__traits_html_a374e695ad10b80d8a13e7955cf5abbd8"><div class="ttname"><a href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8">fc::mock_time_traits::set_now</a></div><div class="ttdeci">static void set_now(time_type t)</div><div class="ttdef"><b>Definition</b> <a href="mock__time_8cpp_source.html#l00014">mock_time.cpp:14</a></div></div>
<div class="ttc" id="aclassfc_1_1time__point_html"><div class="ttname"><a href="classfc_1_1time__point.html">fc::time_point</a></div><div class="ttdef"><b>Definition</b> <a href="include_2fc_2time_8hpp_source.html#l00042">time.hpp:42</a></div></div>
<div class="ttc" id="aclassfc_1_1time__point_html_aa164ff1268a16d4b32afcff181f6100e"><div class="ttname"><a href="classfc_1_1time__point.html#aa164ff1268a16d4b32afcff181f6100e">fc::time_point::now</a></div><div class="ttdeci">static time_point now()</div><div class="ttdef"><b>Definition</b> <a href="time_8cpp_source.html#l00014">time.cpp:14</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1protocol__feature__set_html"><div class="ttname"><a href="classsysio_1_1chain_1_1protocol__feature__set.html">sysio::chain::protocol_feature_set</a></div><div class="ttdef"><b>Definition</b> <a href="protocol__feature__manager_8hpp_source.html#l00131">protocol_feature_manager.hpp:131</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain__apis_1_1trx__retry__db_html"><div class="ttname"><a href="classsysio_1_1chain__apis_1_1trx__retry__db.html">sysio::chain_apis::trx_retry_db</a></div><div class="ttdef"><b>Definition</b> <a href="trx__retry__db_8hpp_source.html#l00019">trx_retry_db.hpp:19</a></div></div>
<div class="ttc" id="alogger_8hpp_html_a8c7a288fea519c7e895518f8dff4888f"><div class="ttname"><a href="logger_8hpp.html#a8c7a288fea519c7e895518f8dff4888f">DEFAULT_LOGGER</a></div><div class="ttdeci">#define DEFAULT_LOGGER</div><div class="ttdef"><b>Definition</b> <a href="logger_8hpp_source.html#l00007">logger.hpp:7</a></div></div>
<div class="ttc" id="anamespace_xbyak_1_1util_html_a051ad68b75c300988da81d4804273b56"><div class="ttname"><a href="namespace_xbyak_1_1util.html#a051ad68b75c300988da81d4804273b56">Xbyak::util::gs</a></div><div class="ttdeci">static const Segment gs(Segment::gs)</div></div>
<div class="ttc" id="anamespaceappbase_html_a99374dc23934f008a09f2f79be9eae40"><div class="ttname"><a href="namespaceappbase.html#a99374dc23934f008a09f2f79be9eae40">appbase::app</a></div><div class="ttdeci">application &amp; app()</div><div class="ttdef"><b>Definition</b> <a href="application_8cpp_source.html#l00210">application.cpp:210</a></div></div>
<div class="ttc" id="anamespacefc_html_a15170d1be1e682691dfe6ae09790edce"><div class="ttname"><a href="namespacefc.html#a15170d1be1e682691dfe6ae09790edce">fc::exception_ptr</a></div><div class="ttdeci">std::shared_ptr&lt; exception &gt; exception_ptr</div><div class="ttdef"><b>Definition</b> <a href="exception_8hpp_source.html#l00139">exception.hpp:139</a></div></div>
<div class="ttc" id="anamespacefc_html_a6e85a2de1275728bcc4a3d01f14d9172"><div class="ttname"><a href="namespacefc.html#a6e85a2de1275728bcc4a3d01f14d9172">fc::hours</a></div><div class="ttdeci">constexpr microseconds hours(int64_t h)</div><div class="ttdef"><b>Definition</b> <a href="include_2fc_2time_8hpp_source.html#l00035">time.hpp:35</a></div></div>
<div class="ttc" id="anamespacefc_html_a9623b8cae3f48bbed6aa1fc2afe9b174"><div class="ttname"><a href="namespacefc.html#a9623b8cae3f48bbed6aa1fc2afe9b174">fc::seconds</a></div><div class="ttdeci">constexpr microseconds seconds(int64_t s)</div><div class="ttdef"><b>Definition</b> <a href="include_2fc_2time_8hpp_source.html#l00032">time.hpp:32</a></div></div>
<div class="ttc" id="anamespacesysio_1_1trace__api_1_1test__common_html_a7ad028261e9ab9a38fd557c8f7628615"><div class="ttname"><a href="namespacesysio_1_1trace__api_1_1test__common.html#a7ad028261e9ab9a38fd557c8f7628615">sysio::trace_api::test_common::make_block_state</a></div><div class="ttdeci">auto make_block_state(chain::block_id_type previous, uint32_t height, uint32_t slot, chain::name producer, std::vector&lt; chain::packed_transaction &gt; trxs)</div><div class="ttdef"><b>Definition</b> <a href="test__common_8hpp_source.html#l00055">test_common.hpp:55</a></div></div>
<div class="ttc" id="astructappbase_1_1channel__decl_html"><div class="ttname"><a href="structappbase_1_1channel__decl.html">appbase::channel_decl</a></div><div class="ttdef"><b>Definition</b> <a href="channel_8hpp_source.html#l00183">channel.hpp:183</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1chain__config__v1_html"><div class="ttname"><a href="structsysio_1_1chain_1_1chain__config__v1.html">sysio::chain::chain_config_v1</a></div><div class="ttdoc">v1 Producer-voted blockchain configuration parameters</div><div class="ttdef"><b>Definition</b> <a href="chain__config_8hpp_source.html#l00143">chain_config.hpp:143</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1controller_1_1config_html"><div class="ttname"><a href="structsysio_1_1chain_1_1controller_1_1config.html">sysio::chain::controller::config</a></div><div class="ttdef"><b>Definition</b> <a href="controller_8hpp_source.html#l00065">controller.hpp:65</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1genesis__state_html"><div class="ttname"><a href="structsysio_1_1chain_1_1genesis__state.html">sysio::chain::genesis_state</a></div><div class="ttdef"><b>Definition</b> <a href="genesis__state_8hpp_source.html#l00014">genesis_state.hpp:14</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="test__trx__retry__db_8cpp_a253cc0c74fd06c934d9c7d4ee67ccf87_cgraph.png" border="0" usemap="#atest__trx__retry__db_8cpp_a253cc0c74fd06c934d9c7d4ee67ccf87_cgraph" alt=""/></div>
<map name="atest__trx__retry__db_8cpp_a253cc0c74fd06c934d9c7d4ee67ccf87_cgraph" id="atest__trx__retry__db_8cpp_a253cc0c74fd06c934d9c7d4ee67ccf87_cgraph">
<area shape="rect" title=" " alt="" coords="5,536,202,561"/>
<area shape="rect" href="namespaceappbase.html#a99374dc23934f008a09f2f79be9eae40" title=" " alt="" coords="310,32,410,57"/>
<area shape="poly" title=" " alt="" coords="102,535,108,459,115,403,127,339,145,272,171,205,204,142,248,85,269,68,294,56,296,61,272,72,252,89,209,145,176,208,151,274,132,341,120,403,113,459,108,535"/>
<area shape="rect" href="classfc_1_1microseconds.html#a20fba59ec7e1f50c6b8f2c9443cc9b92" title=" " alt="" coords="279,100,440,125"/>
<area shape="poly" title=" " alt="" coords="103,535,108,464,116,413,129,356,147,297,172,238,205,183,248,136,264,125,267,129,251,140,210,186,177,240,152,298,134,357,121,414,114,465,108,535"/>
<area shape="rect" href="classappbase_1_1application.html#a39286b0b034b97f6940568a00f44edaf" title=" " alt="" coords="290,149,430,190"/>
<area shape="poly" title=" " alt="" coords="104,535,115,476,140,388,159,340,183,292,212,246,248,206,274,189,277,193,251,210,217,250,187,294,164,342,145,390,120,477,109,536"/>
<area shape="rect" href="classappbase_1_1application.html#a81aa58d3f94570b7976145039155fc46" title=" " alt="" coords="729,177,870,218"/>
<area shape="poly" title=" " alt="" coords="104,535,115,481,140,402,159,360,183,318,213,281,248,250,274,240,317,232,441,217,713,199,714,204,442,223,318,237,275,246,251,255,216,285,187,321,164,362,145,404,120,482,109,536"/>
<area shape="rect" href="classfc_1_1logger.html#a4e12ef2e794551d593e497b4b90601ab" title=" " alt="" coords="309,265,410,290"/>
<area shape="poly" title=" " alt="" coords="106,534,121,489,150,426,191,358,218,327,248,301,270,289,293,281,295,286,272,294,251,305,222,331,196,361,154,428,126,491,111,536"/>
<area shape="rect" href="classappbase_1_1application.html#ac9e3f923a46466ea3ffbf4fea3187682" title=" " alt="" coords="290,315,430,355"/>
<area shape="poly" title=" " alt="" coords="109,534,129,500,159,454,200,406,248,365,274,351,276,356,251,369,204,410,164,457,133,503,114,536"/>
<area shape="rect" href="classsysio_1_1chain__apis_1_1trx__retry__db.html#a660b3e800a99fdd86094eab55469dc8b" title=" " alt="" coords="286,379,434,435"/>
<area shape="poly" title=" " alt="" coords="121,533,177,494,248,451,272,439,275,444,251,456,180,499,124,537"/>
<area shape="rect" href="classfc_1_1time__point.html#aa164ff1268a16d4b32afcff181f6100e" title=" " alt="" coords="534,417,666,442"/>
<area shape="poly" title=" " alt="" coords="138,532,249,495,391,462,518,439,519,445,392,468,250,500,140,537"/>
<area shape="rect" href="namespacefc.html#a6e85a2de1275728bcc4a3d01f14d9172" title=" " alt="" coords="324,510,396,536"/>
<area shape="poly" title=" " alt="" coords="202,536,308,525,308,531,202,541"/>
<area shape="rect" href="namespacefc.html#a9623b8cae3f48bbed6aa1fc2afe9b174" title=" " alt="" coords="755,561,844,586"/>
<area shape="poly" title=" " alt="" coords="202,549,739,569,739,574,202,555"/>
<area shape="rect" href="classsysio_1_1chain__apis_1_1trx__retry__db.html#aa7baf34c40190b65c61c87ae42c9f72e" title=" " alt="" coords="255,611,465,651"/>
<area shape="poly" title=" " alt="" coords="147,559,281,603,280,608,145,564"/>
<area shape="rect" href="classsysio_1_1chain__apis_1_1trx__retry__db.html#a0e2be9e478ae0ec15310265367781ed6" title=" " alt="" coords="280,675,440,731"/>
<area shape="poly" title=" " alt="" coords="120,560,175,608,212,636,251,661,267,669,264,674,248,665,209,640,172,612,117,564"/>
<area shape="rect" href="classsysio_1_1chain__apis_1_1trx__retry__db.html#ac3d9bd5ac2085676e9f3ecf67d3ab8fc" title=" " alt="" coords="268,755,452,795"/>
<area shape="poly" title=" " alt="" coords="113,560,132,596,162,645,202,697,226,720,251,741,258,745,255,749,248,745,222,724,198,700,158,648,127,599,108,563"/>
<area shape="rect" href="classsysio_1_1chain__apis_1_1trx__retry__db.html#a84150dab60a7a856372d038e43338c65" title=" " alt="" coords="250,820,470,861"/>
<area shape="poly" title=" " alt="" coords="111,561,126,607,154,673,195,744,221,777,251,805,258,810,255,814,248,809,218,780,191,747,149,675,121,609,106,562"/>
<area shape="rect" href="classfc_1_1logger.html#a4c22e498cec41efb806fda9733662650" title=" " alt="" coords="297,885,422,926"/>
<area shape="poly" title=" " alt="" coords="109,561,121,618,146,701,165,747,188,792,217,834,251,870,284,889,281,894,248,874,213,837,184,795,160,749,141,703,116,619,104,562"/>
<area shape="rect" href="classfc_1_1mock__time__traits.html#a374e695ad10b80d8a13e7955cf5abbd8" title=" " alt="" coords="530,788,670,829"/>
<area shape="poly" title=" " alt="" coords="108,561,112,631,119,681,131,736,149,792,174,847,208,896,251,936,280,953,306,964,331,970,356,970,408,959,469,935,502,917,531,892,575,840,579,843,535,896,505,921,471,940,410,964,356,975,331,975,304,969,277,958,248,940,204,899,169,850,144,794,125,737,114,682,107,632,102,562"/>
<area shape="rect" href="classsysio_1_1chain__apis_1_1trx__retry__db.html#af46a9168d0df4be1252ba36df2a27ef2" title=" " alt="" coords="295,1000,425,1041"/>
<area shape="poly" title=" " alt="" coords="108,562,114,634,135,746,153,808,178,870,210,928,251,980,282,1000,279,1005,248,984,206,931,173,872,148,810,129,747,109,635,103,562"/>
<area shape="rect" href="classsysio_1_1chain__apis_1_1trx__retry__db.html#a963c0f454e3d7bf60e6afe32274c0f53" title=" " alt="" coords="295,1064,425,1120"/>
<area shape="poly" title=" " alt="" coords="107,562,110,644,116,705,127,774,145,847,170,920,206,989,252,1050,282,1072,279,1076,248,1054,201,992,165,922,140,849,122,775,111,706,105,644,102,562"/>
<area shape="rect" href="classappbase_1_1application.html#ac874b2659b400fe254f1ae4260d06ecf" title=" " alt="" coords="530,5,670,46"/>
<area shape="poly" title=" " alt="" coords="410,38,514,30,514,35,410,43"/>
<area shape="rect" href="classappbase_1_1execution__priority__queue.html#a86081d87bce3735b5addeeb6d44dbcb2" title=" " alt="" coords="518,70,681,126"/>
<area shape="poly" title=" " alt="" coords="430,147,469,135,502,125,504,130,471,140,431,152"/>
<area shape="rect" href="classappbase_1_1application.html#a116e20109f980460cf8c38e349766bcc" title=" " alt="" coords="530,149,670,190"/>
<area shape="poly" title=" " alt="" coords="430,167,514,167,514,172,430,172"/>
<area shape="poly" title=" " alt="" coords="670,177,714,183,713,188,670,182"/>
<area shape="rect" href="structfc_1_1log__config.html#aa0b03f0ae27cb64d934988512465c1a5" title=" " alt="" coords="537,264,662,305"/>
<area shape="poly" title=" " alt="" coords="411,276,521,280,521,285,411,282"/>
<area shape="poly" title=" " alt="" coords="435,411,518,419,518,425,434,417"/>
<area shape="rect" href="classfc_1_1mock__time__traits.html#a0bed781012a73b8c15882648397b56be" title=" " alt="" coords="729,300,870,341"/>
<area shape="poly" title=" " alt="" coords="621,414,728,351,739,346,741,350,731,356,624,418"/>
<area shape="rect" href="classfc_1_1mock__time__traits.html#adddeebdf472c33f927827c111ddbf0b1" title=" " alt="" coords="729,365,870,406"/>
<area shape="poly" title=" " alt="" coords="661,414,714,402,715,407,662,419"/>
<area shape="rect" href="classfc_1_1time__point.html#ab46781dcaab4880902bc136f36e39e5e" title=" " alt="" coords="733,431,866,471"/>
<area shape="poly" title=" " alt="" coords="666,434,718,440,717,445,666,439"/>
<area shape="rect" href="classfc_1_1time__point.html#abfea5efbe9ef58024cda814395ee9945" title=" " alt="" coords="733,496,866,537"/>
<area shape="poly" title=" " alt="" coords="632,441,738,487,735,492,630,445"/>
<area shape="rect" href="classfc_1_1mock__time__traits.html#a0d7245b32fd62b3bc712f658250cc4db" title=" " alt="" coords="918,474,1090,500"/>
<area shape="poly" title=" " alt="" coords="851,339,871,352,936,407,984,461,981,464,932,411,868,356,848,344"/>
<area shape="rect" href="namespacefc.html#a9c3f2826ca2b6652fcef4da96f33503a" title=" " alt="" coords="556,510,643,536"/>
<area shape="poly" title=" " alt="" coords="396,520,541,520,541,526,396,526"/>
<area shape="poly" title=" " alt="" coords="644,531,740,556,739,561,643,536"/>
<area shape="poly" title=" " alt="" coords="627,785,868,597,974,508,977,512,871,601,630,790"/>
<area shape="poly" title=" " alt="" coords="562,788,560,778,566,769,579,763,600,761,621,764,634,770,632,775,620,769,600,767,581,769,569,773,565,779,567,787"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_4500636a3a05d93d2a8a287b45607964.html">plugins</a></li><li class="navelem"><a class="el" href="dir_95a45f31b2765047583177e8fd034f3f.html">chain_plugin</a></li><li class="navelem"><a class="el" href="dir_7318d3ae3de44e7ec50ddeacc9bf890d.html">test</a></li><li class="navelem"><a class="el" href="test__trx__retry__db_8cpp.html">test_trx_retry_db.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
