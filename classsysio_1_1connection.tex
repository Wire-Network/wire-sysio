\doxysection{sysio\+::connection Class Reference}
\hypertarget{classsysio_1_1connection}{}\label{classsysio_1_1connection}\index{sysio::connection@{sysio::connection}}


Inheritance diagram for sysio\+::connection\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=207pt]{classsysio_1_1connection__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for sysio\+::connection\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsysio_1_1connection_ac2471e946c569bcc409e211e452c4860}{connection}} (const \mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} \&endpoint)
\item 
\mbox{\hyperlink{classsysio_1_1connection_ab20a18eecf990abbc37dd8cf3a221623}{connection}} ()
\item 
\mbox{\hyperlink{classsysio_1_1connection_a69709b0cfa29006569e7dcc6cd935c89}{\texorpdfstring{$\sim$}{\string~}connection}} ()=default
\item 
bool \mbox{\hyperlink{classsysio_1_1connection_a4267b7b591fb8051841cf1d11228e0e1}{start\+\_\+session}} ()
\item 
bool \mbox{\hyperlink{classsysio_1_1connection_adee4be2152a35cc0122e53365e8e1937}{socket\+\_\+is\+\_\+open}} () const
\item 
const \mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} \& \mbox{\hyperlink{classsysio_1_1connection_aca3e3acacf8047c389e0bda758da197d}{peer\+\_\+address}} () const
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a1e59aa67f74b1e5bb0a2d8e7db584cdd}{set\+\_\+connection\+\_\+type}} (const \mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} \&peer\+\_\+addr)
\item 
bool \mbox{\hyperlink{classsysio_1_1connection_a9e344302f09cb876c9549cb2aa368f2e}{is\+\_\+transactions\+\_\+only\+\_\+connection}} () const
\item 
bool \mbox{\hyperlink{classsysio_1_1connection_a7a00f9a9487c8604ac53ff47aa7316e8}{is\+\_\+blocks\+\_\+only\+\_\+connection}} () const
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a028630cf58fe0facfd2d756f6c203180}{set\+\_\+heartbeat\+\_\+timeout}} (std\+::chrono\+::milliseconds msec)
\item 
\mbox{\hyperlink{structsysio_1_1connection__status}{connection\+\_\+status}} \mbox{\hyperlink{classsysio_1_1connection_a0a7d761d1d284b8cbbeeb74d20615d6d}{get\+\_\+status}} () const
\item 
bool \mbox{\hyperlink{classsysio_1_1connection_a389358826bf8da3e54bebbd7db92120c}{connected}} ()
\item 
bool \mbox{\hyperlink{classsysio_1_1connection_aeb1cd3ec121a5ff8d01c2292834923a1}{current}} ()
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a7fe7bb50b91bd69cdf56c7c09a868e29}{close}} (bool reconnect=true, bool shutdown=false)
\item 
bool \mbox{\hyperlink{classsysio_1_1connection_aec8d94a6b6483822c52f08624e8dc9e7}{populate\+\_\+handshake}} (\mbox{\hyperlink{structsysio_1_1handshake__message}{handshake\+\_\+message}} \&hello)
\item 
bool \mbox{\hyperlink{classsysio_1_1connection_a11ecb500e5bd8050f97f0c5a585df2ad}{resolve\+\_\+and\+\_\+connect}} ()
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a4bb332843c0924e4597fe1d992367232}{connect}} (const std\+::shared\+\_\+ptr$<$ tcp\+::resolver $>$ \&resolver, tcp\+::resolver\+::results\+\_\+type endpoints)
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a5b1658474d4667bfca0ee4e1e2c605a8}{start\+\_\+read\+\_\+message}} ()
\item 
bool \mbox{\hyperlink{classsysio_1_1connection_a27f41e41ebd6b4570bc19a31b4bb1fef}{process\+\_\+next\+\_\+message}} (\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} message\+\_\+length)
\begin{DoxyCompactList}\small\item\em Process the next message from the pending message buffer. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classsysio_1_1connection_a55b561baeda5353d7c1a1e2a8a0c88e1}{send\+\_\+handshake}} ()
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a5b9e30160fc0db3e2842bcb868cb34a0}{blk\+\_\+send\+\_\+branch}} (const \mbox{\hyperlink{namespacesysio_1_1chain_a4b8e4b7ed9dcd18ee75d0de62e88aa17}{block\+\_\+id\+\_\+type}} \&msg\+\_\+head\+\_\+id)
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a97f2f3f3cbd12528d708c86e7568e282}{blk\+\_\+send\+\_\+branch\+\_\+impl}} (\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} msg\+\_\+head\+\_\+num, \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} lib\+\_\+num, \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} head\+\_\+num)
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a26752470d31dda1a5140351cbfa375c4}{blk\+\_\+send}} (const \mbox{\hyperlink{namespacesysio_1_1chain_a4b8e4b7ed9dcd18ee75d0de62e88aa17}{block\+\_\+id\+\_\+type}} \&blkid)
\item 
void \mbox{\hyperlink{classsysio_1_1connection_ab07f49d550a613d2ceb2520b331f5ac1}{stop\+\_\+send}} ()
\item 
void \mbox{\hyperlink{classsysio_1_1connection_ad6a1bcdfc4bd9d2c7ab2278240def6b6}{enqueue}} (const \mbox{\hyperlink{namespacesysio_a783ade47a6f13a71a9b75cd2c68d9965}{net\+\_\+message}} \&msg)
\item 
void \mbox{\hyperlink{classsysio_1_1connection_af8cc5bf70b8c46a2325c5021a3fd06fb}{enqueue\+\_\+block}} (const \mbox{\hyperlink{namespacesysio_1_1chain_aa10ee348c57604b615bc8570f6685102}{signed\+\_\+block\+\_\+ptr}} \&sb, bool to\+\_\+sync\+\_\+queue=false)
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a111bb23671fbd3acac7e1196a6cf8617}{enqueue\+\_\+buffer}} (const std\+::shared\+\_\+ptr$<$ std\+::vector$<$ char $>$ $>$ \&send\+\_\+buffer, \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673f}{go\+\_\+away\+\_\+reason}} close\+\_\+after\+\_\+send, bool to\+\_\+sync\+\_\+queue=false)
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a088db9bdbe7600d3af19c9272359b7fe}{cancel\+\_\+sync}} (\mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673f}{go\+\_\+away\+\_\+reason}})
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a51ccfb43cb79f666e6548ffeb9f205f2}{flush\+\_\+queues}} ()
\item 
bool \mbox{\hyperlink{classsysio_1_1connection_a099523d62bc60e4a13deda1fe15845ad}{enqueue\+\_\+sync\+\_\+block}} ()
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a080e39968a1bee189ac8ae9beca41a62}{request\+\_\+sync\+\_\+blocks}} (\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} start, \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} end)
\item 
void \mbox{\hyperlink{classsysio_1_1connection_ae3a7d2b5432bfc0eccde29ce39abd4b8}{cancel\+\_\+wait}} ()
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a80478330d64f3618011b52a3d46741bf}{sync\+\_\+wait}} ()
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a58095c1fbfc10594cbb531df695da740}{fetch\+\_\+wait}} ()
\item 
void \mbox{\hyperlink{classsysio_1_1connection_ad0e0cfdddd3e9310edf72ac725bbe995}{sync\+\_\+timeout}} (boost\+::system\+::error\+\_\+code ec)
\item 
void \mbox{\hyperlink{classsysio_1_1connection_adde007266cc5383dab51c24d67d541f5}{fetch\+\_\+timeout}} (boost\+::system\+::error\+\_\+code ec)
\item 
void \mbox{\hyperlink{classsysio_1_1connection_ae85a6909e1a531d6c27c0d22f12e61c9}{queue\+\_\+write}} (const std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classfc_1_1vector}{vector}}$<$ char $>$ $>$ \&buff, std\+::function$<$ void(boost\+::system\+::error\+\_\+code, std\+::size\+\_\+t)$>$ callback, bool to\+\_\+sync\+\_\+queue=false)
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a4f6ca81d49c22eef80854175bff8ed42}{do\+\_\+queue\+\_\+write}} ()
\item 
bool \mbox{\hyperlink{classsysio_1_1connection_ac8f79d24686c4aad7bf12f3784970d98}{is\+\_\+valid}} (const \mbox{\hyperlink{structsysio_1_1handshake__message}{handshake\+\_\+message}} \&msg) const
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a6969d80878d60791744f4ace46f1b806}{handle\+\_\+message}} (const \mbox{\hyperlink{structsysio_1_1handshake__message}{handshake\+\_\+message}} \&msg)
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a86eaa1ae6ad496f117a4b6285a5ea960}{handle\+\_\+message}} (const \mbox{\hyperlink{structsysio_1_1chain__size__message}{chain\+\_\+size\+\_\+message}} \&msg)
\item 
void \mbox{\hyperlink{classsysio_1_1connection_ace5604a0cfadaf357cee46c842a9a54e}{handle\+\_\+message}} (const \mbox{\hyperlink{structsysio_1_1go__away__message}{go\+\_\+away\+\_\+message}} \&msg)
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a5334d7cde64019b2ab84f3930bb54de9}{handle\+\_\+message}} (const \mbox{\hyperlink{structsysio_1_1notice__message}{notice\+\_\+message}} \&msg)
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a7ec6bfca8f639dbced53570e5a41ce36}{handle\+\_\+message}} (const \mbox{\hyperlink{structsysio_1_1request__message}{request\+\_\+message}} \&msg)
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a21ed2c2f522d3a525417073d7548a4b5}{handle\+\_\+message}} (const \mbox{\hyperlink{structsysio_1_1sync__request__message}{sync\+\_\+request\+\_\+message}} \&msg)
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a3087a10ef1596db0cd6b18b1530df0c4}{handle\+\_\+message}} (const \mbox{\hyperlink{structsysio_1_1chain_1_1signed__block}{signed\+\_\+block}} \&msg)=delete
\item 
void \mbox{\hyperlink{classsysio_1_1connection_aca549a337da8361f2208ba79d156555c}{handle\+\_\+message}} (const \mbox{\hyperlink{namespacesysio_1_1chain_a4b8e4b7ed9dcd18ee75d0de62e88aa17}{block\+\_\+id\+\_\+type}} \&\mbox{\hyperlink{code__cache_8cpp_aa0efefe21f4700d78692edc823e763be}{id}}, \mbox{\hyperlink{namespacesysio_1_1chain_aa10ee348c57604b615bc8570f6685102}{signed\+\_\+block\+\_\+ptr}} msg)
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a9e24c2d2916cc6530e1c5526cf7a1316}{handle\+\_\+message}} (const \mbox{\hyperlink{structsysio_1_1chain_1_1packed__transaction}{packed\+\_\+transaction}} \&msg)=delete
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a5b525888f8a53ca2b7665fc7f5860746}{handle\+\_\+message}} (\mbox{\hyperlink{namespacesysio_1_1chain_a7041c0316bd294d0866609ab3e0cc7a7}{packed\+\_\+transaction\+\_\+ptr}} msg)
\item 
void \mbox{\hyperlink{classsysio_1_1connection_a6f592c3d4516eababd8ecbfac04c4b7e}{process\+\_\+signed\+\_\+block}} (const \mbox{\hyperlink{namespacesysio_1_1chain_a4b8e4b7ed9dcd18ee75d0de62e88aa17}{block\+\_\+id\+\_\+type}} \&\mbox{\hyperlink{code__cache_8cpp_aa0efefe21f4700d78692edc823e763be}{id}}, \mbox{\hyperlink{namespacesysio_1_1chain_aa10ee348c57604b615bc8570f6685102}{signed\+\_\+block\+\_\+ptr}} msg, \mbox{\hyperlink{namespacesysio_1_1chain_ab9b14f4554cc4a0da2c361e9757b1662}{block\+\_\+state\+\_\+ptr}} bsp)
\item 
\mbox{\hyperlink{classfc_1_1variant__object}{fc\+::variant\+\_\+object}} \mbox{\hyperlink{classsysio_1_1connection_a48cd1f7c86fbfa7801324ea18b9a8ae6}{get\+\_\+logger\+\_\+variant}} () const
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
boost\+::asio\+::io\+\_\+context\+::strand \mbox{\hyperlink{classsysio_1_1connection_a950c534737276c9d0a2724d9801d7def}{strand}}
\item 
std\+::shared\+\_\+ptr$<$ tcp\+::socket $>$ \mbox{\hyperlink{classsysio_1_1connection_adb1c345e310c4bf64faa889c01440404}{socket}}
\item 
\mbox{\hyperlink{classfc_1_1message__buffer}{fc\+::message\+\_\+buffer}}$<$ 1024 \texorpdfstring{$\ast$}{*}1024 $>$ \mbox{\hyperlink{classsysio_1_1connection_af241d498d210d4e238b73f7bcd1c45d1}{pending\+\_\+message\+\_\+buffer}}
\item 
std\+::atomic$<$ std\+::size\+\_\+t $>$ \mbox{\hyperlink{classsysio_1_1connection_a3de4218791d8273eb83a54409af84cf1}{outstanding\+\_\+read\+\_\+bytes}} \{0\}
\item 
\mbox{\hyperlink{classsysio_1_1queued__buffer}{queued\+\_\+buffer}} \mbox{\hyperlink{classsysio_1_1connection_a8386b853edf1cbab18a09b8123cc525c}{buffer\+\_\+queue}}
\item 
\mbox{\hyperlink{classfc_1_1sha256}{fc\+::sha256}} \mbox{\hyperlink{classsysio_1_1connection_a5876262162c34ec954ada46f15fe9992}{conn\+\_\+node\+\_\+id}}
\item 
\mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} \mbox{\hyperlink{classsysio_1_1connection_a855625cd0312ce982b74ddc4e5a753ff}{short\+\_\+conn\+\_\+node\+\_\+id}}
\item 
\mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} \mbox{\hyperlink{classsysio_1_1connection_aaeb74503530f57f9cc88f8a33bdb2980}{log\+\_\+p2p\+\_\+address}}
\item 
\mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} \mbox{\hyperlink{classsysio_1_1connection_ac0e50a9bca0cca0c77ce7d1763832714}{log\+\_\+remote\+\_\+endpoint\+\_\+ip}}
\item 
\mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} \mbox{\hyperlink{classsysio_1_1connection_a9d6df697090f0105fbcd82ee97f65712}{log\+\_\+remote\+\_\+endpoint\+\_\+port}}
\item 
\mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} \mbox{\hyperlink{classsysio_1_1connection_abaffefd3dd270392c59a876c12f86bf2}{local\+\_\+endpoint\+\_\+ip}}
\item 
\mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} \mbox{\hyperlink{classsysio_1_1connection_af46386111a6f93fe2ce3a9029677dca4}{local\+\_\+endpoint\+\_\+port}}
\item 
std\+::atomic$<$ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} $>$ \mbox{\hyperlink{classsysio_1_1connection_ad60ce32fad045e086d4681636391851b}{trx\+\_\+in\+\_\+progress\+\_\+size}} \{0\}
\item 
\mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} \mbox{\hyperlink{classsysio_1_1connection_a5568620d90b51490488682e99abe1802}{last\+\_\+dropped\+\_\+trx\+\_\+msg\+\_\+time}}
\item 
const \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} \mbox{\hyperlink{classsysio_1_1connection_a1eb3bd460e47bead479e1b6f7eb58df4}{connection\+\_\+id}}
\item 
\mbox{\hyperlink{stdint_8h_a269259c924dce846340ddbb810db2e3c}{int16\+\_\+t}} \mbox{\hyperlink{classsysio_1_1connection_a3b487d20a19e5f81f3024d276078d397}{sent\+\_\+handshake\+\_\+count}} = 0
\item 
std\+::atomic$<$ bool $>$ \mbox{\hyperlink{classsysio_1_1connection_a2cb1b55074b31325f9845700fd7ede82}{connecting}} \{true\}
\item 
std\+::atomic$<$ bool $>$ \mbox{\hyperlink{classsysio_1_1connection_ab77357d0ed0b422c2d6a15065d818ff6}{syncing}} \{false\}
\item 
std\+::atomic$<$ \mbox{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}} $>$ \mbox{\hyperlink{classsysio_1_1connection_ad20dc31a68afa8406a64e6e69ecebb02}{protocol\+\_\+version}} = 0
\item 
\mbox{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}} \mbox{\hyperlink{classsysio_1_1connection_aa7543fc95097fd14c4d8f66173af561a}{net\+\_\+version}} = \mbox{\hyperlink{namespacesysio_a0d4d33daf7d396995fc2eb0d016bd1d2}{net\+\_\+version\+\_\+max}}
\item 
\mbox{\hyperlink{classsysio_1_1block__status__monitor}{block\+\_\+status\+\_\+monitor}} \mbox{\hyperlink{classsysio_1_1connection_a92ba884c29f380a737f997a9ff3264f5}{block\+\_\+status\+\_\+monitor\+\_\+}}
\item 
std\+::atomic$<$ \mbox{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}} $>$ \mbox{\hyperlink{classsysio_1_1connection_a78f01e104b28e119cd1dbc3dff3a9af0}{consecutive\+\_\+immediate\+\_\+connection\+\_\+close}} = 0
\item 
std\+::mutex \mbox{\hyperlink{classsysio_1_1connection_a70c7d2d3ab6b30deeaf88b98925623c2}{response\+\_\+expected\+\_\+timer\+\_\+mtx}}
\item 
boost\+::asio\+::steady\+\_\+timer \mbox{\hyperlink{classsysio_1_1connection_a237374fa72d9b4b4e56f6f9a685bed1a}{response\+\_\+expected\+\_\+timer}}
\item 
std\+::atomic$<$ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673f}{go\+\_\+away\+\_\+reason}} $>$ \mbox{\hyperlink{classsysio_1_1connection_a6b2649c5a44369243b03ddc3a5ee3695}{no\+\_\+retry}} \{\mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa35a3ee195246082e99a69c2636252839}{no\+\_\+reason}}\}
\item 
std\+::mutex \mbox{\hyperlink{classsysio_1_1connection_a675e5b04f968aa689c49d511c601fffa}{conn\+\_\+mtx}}
\item 
std\+::optional$<$ \mbox{\hyperlink{structsysio_1_1request__message}{request\+\_\+message}} $>$ \mbox{\hyperlink{classsysio_1_1connection_aba96e14eb1339b623e37c8e097560e8f}{last\+\_\+req}}
\item 
\mbox{\hyperlink{structsysio_1_1handshake__message}{handshake\+\_\+message}} \mbox{\hyperlink{classsysio_1_1connection_a158c59b44186c7757311f14f71818ec8}{last\+\_\+handshake\+\_\+recv}}
\item 
\mbox{\hyperlink{structsysio_1_1handshake__message}{handshake\+\_\+message}} \mbox{\hyperlink{classsysio_1_1connection_ab3d0dbb3bb254cbea92508af42dfe75b}{last\+\_\+handshake\+\_\+sent}}
\item 
\mbox{\hyperlink{namespacesysio_1_1chain_a4b8e4b7ed9dcd18ee75d0de62e88aa17}{block\+\_\+id\+\_\+type}} \mbox{\hyperlink{classsysio_1_1connection_a8ab199b4d05aa4d83530e3342ecbfa1e}{fork\+\_\+head}}
\item 
\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} \mbox{\hyperlink{classsysio_1_1connection_aa85ae38be5738029a500379b8d893091}{fork\+\_\+head\+\_\+num}} \{0\}
\item 
\mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} \mbox{\hyperlink{classsysio_1_1connection_a1b3e4fc9f2aba1b00e501e2419a2ca1c}{last\+\_\+close}}
\item 
\mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} \mbox{\hyperlink{classsysio_1_1connection_a653ababe3f1f98f1bc7af29fff045b4f}{remote\+\_\+endpoint\+\_\+ip}}
\item 
\mbox{\hyperlink{namespacesysio_a42c15380188aaacda97b061d7c538d13}{tstamp}} \mbox{\hyperlink{classsysio_1_1connection_a718e2bd1f4e3bcd87979a578e1d49d7a}{latest\+\_\+msg\+\_\+time}} \{0\}
\item 
\mbox{\hyperlink{namespacesysio_a42c15380188aaacda97b061d7c538d13}{tstamp}} \mbox{\hyperlink{classsysio_1_1connection_a1f3730a3eedfe33fa59dae7c485c341a}{hb\+\_\+timeout}} \{std\+::chrono\+::milliseconds\{\mbox{\hyperlink{namespacesysio_abc26639460234641b6403139e74422ed}{def\+\_\+keepalive\+\_\+interval}}\}.\mbox{\hyperlink{gmock__stress__test_8cc_afd9db40e3361ae09188795e8cbe19752}{count}}()\}
\item 
\mbox{\hyperlink{namespacesysio_a42c15380188aaacda97b061d7c538d13}{tstamp}} \mbox{\hyperlink{classsysio_1_1connection_a1bf388b9e64d25616cefd8d6b1175fc7}{latest\+\_\+blk\+\_\+time}} \{0\}
\end{DoxyCompactItemize}
\doxysubsubsection*{Peer Timestamps}
Time message handling \begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacesysio_a42c15380188aaacda97b061d7c538d13}{tstamp}} \mbox{\hyperlink{classsysio_1_1connection_a6c055550228586b3534a4f2b5e87bc4e}{org}} \{0\}
\begin{DoxyCompactList}\small\item\em originate timestamp \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesysio_a42c15380188aaacda97b061d7c538d13}{tstamp}} \mbox{\hyperlink{classsysio_1_1connection_a0bc9d553ad16bc63449cdbcf6825c59f}{rec}} \{0\}
\begin{DoxyCompactList}\small\item\em receive timestamp \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesysio_a42c15380188aaacda97b061d7c538d13}{tstamp}} \mbox{\hyperlink{classsysio_1_1connection_af43cec49a0884310396dad6d01c392e1}{dst}} \{0\}
\begin{DoxyCompactList}\small\item\em destination timestamp \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacesysio_a42c15380188aaacda97b061d7c538d13}{tstamp}} \mbox{\hyperlink{classsysio_1_1connection_a1ddd29a8f7e1d9a3d21a79c8fdf21521}{xmt}} \{0\}
\begin{DoxyCompactList}\small\item\em transmit timestamp \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classsysio_1_1connection_ad02fe050af3c833e156bea91308d6c1b}{check\+\_\+heartbeat}} (\mbox{\hyperlink{namespacesysio_a42c15380188aaacda97b061d7c538d13}{tstamp}} current\+\_\+time)
\begin{DoxyCompactList}\small\item\em Check heartbeat time and send Time\+\_\+message. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classsysio_1_1connection_a1c134c29679142daab81ca9fe4a10996}{send\+\_\+time}} ()
\begin{DoxyCompactList}\small\item\em Populate and queue \doxylink{structsysio_1_1time__message}{time\+\_\+message}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classsysio_1_1connection_a0a699ed89ab1cf5d95aba5aa7de17e18}{send\+\_\+time}} (const \mbox{\hyperlink{structsysio_1_1time__message}{time\+\_\+message}} \&msg)
\begin{DoxyCompactList}\small\item\em Populate and queue \doxylink{structsysio_1_1time__message}{time\+\_\+message} immediately using incoming \doxylink{structsysio_1_1time__message}{time\+\_\+message}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classsysio_1_1connection_a674cbe920ea083be64a0746c0ce76c86}{handle\+\_\+message}} (const \mbox{\hyperlink{structsysio_1_1time__message}{time\+\_\+message}} \&msg)
\begin{DoxyCompactList}\small\item\em Process \doxylink{structsysio_1_1time__message}{time\+\_\+message}. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{namespacesysio_a42c15380188aaacda97b061d7c538d13}{tstamp}} \mbox{\hyperlink{classsysio_1_1connection_aa74b147947e087bc084d72a3d892a06f}{get\+\_\+time}} ()
\begin{DoxyCompactList}\small\item\em Read system time and convert to a 64 bit integer. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00581}{581}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classsysio_1_1connection_ac2471e946c569bcc409e211e452c4860}\index{sysio::connection@{sysio::connection}!connection@{connection}}
\index{connection@{connection}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{connection()}{connection()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_ac2471e946c569bcc409e211e452c4860} 
sysio\+::connection\+::connection (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} \&}]{endpoint}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00878}{878}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00879\ \ \ \ \ \ \ :\ peer\_addr(\ endpoint\ ),}
\DoxyCodeLine{00880\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a950c534737276c9d0a2724d9801d7def}{strand}}(\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_ad2e4fb9d1d2decf22a234af61f93ab63}{thread\_pool}}-\/>get\_executor()\ ),}
\DoxyCodeLine{00881\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_adb1c345e310c4bf64faa889c01440404}{socket}}(\ \textcolor{keyword}{new}\ tcp::socket(\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_ad2e4fb9d1d2decf22a234af61f93ab63}{thread\_pool}}-\/>get\_executor()\ )\ ),}
\DoxyCodeLine{00882\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_aaeb74503530f57f9cc88f8a33bdb2980}{log\_p2p\_address}}(\ endpoint\ ),}
\DoxyCodeLine{00883\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a1eb3bd460e47bead479e1b6f7eb58df4}{connection\_id}}(\ ++my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a735275cfeaf111f22a33c20eeb3df9da}{current\_connection\_id}}\ ),}
\DoxyCodeLine{00884\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a237374fa72d9b4b4e56f6f9a685bed1a}{response\_expected\_timer}}(\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_ad2e4fb9d1d2decf22a234af61f93ab63}{thread\_pool}}-\/>get\_executor()\ ),}
\DoxyCodeLine{00885\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a158c59b44186c7757311f14f71818ec8}{last\_handshake\_recv}}(),}
\DoxyCodeLine{00886\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_ab3d0dbb3bb254cbea92508af42dfe75b}{last\_handshake\_sent}}()}
\DoxyCodeLine{00887\ \ \ \ \{}
\DoxyCodeLine{00888\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a067e87b091ade3787bcdda5775354654}{fc\_ilog}}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}created\ connection\ \$\{c\}\ to\ \$\{n\}"{}},\ (\textcolor{stringliteral}{"{}c"{}},\ \mbox{\hyperlink{classsysio_1_1connection_a1eb3bd460e47bead479e1b6f7eb58df4}{connection\_id}})(\textcolor{stringliteral}{"{}n"{}},\ endpoint)\ );}
\DoxyCodeLine{00889\ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsysio_1_1connection_ab20a18eecf990abbc37dd8cf3a221623}\index{sysio::connection@{sysio::connection}!connection@{connection}}
\index{connection@{connection}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{connection()}{connection()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_ab20a18eecf990abbc37dd8cf3a221623} 
sysio\+::connection\+::connection (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00891}{891}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00892\ \ \ \ \ \ \ :\ peer\_addr(),}
\DoxyCodeLine{00893\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a950c534737276c9d0a2724d9801d7def}{strand}}(\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_ad2e4fb9d1d2decf22a234af61f93ab63}{thread\_pool}}-\/>get\_executor()\ ),}
\DoxyCodeLine{00894\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_adb1c345e310c4bf64faa889c01440404}{socket}}(\ \textcolor{keyword}{new}\ tcp::socket(\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_ad2e4fb9d1d2decf22a234af61f93ab63}{thread\_pool}}-\/>get\_executor()\ )\ ),}
\DoxyCodeLine{00895\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a1eb3bd460e47bead479e1b6f7eb58df4}{connection\_id}}(\ ++my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a735275cfeaf111f22a33c20eeb3df9da}{current\_connection\_id}}\ ),}
\DoxyCodeLine{00896\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a237374fa72d9b4b4e56f6f9a685bed1a}{response\_expected\_timer}}(\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_ad2e4fb9d1d2decf22a234af61f93ab63}{thread\_pool}}-\/>get\_executor()\ ),}
\DoxyCodeLine{00897\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a158c59b44186c7757311f14f71818ec8}{last\_handshake\_recv}}(),}
\DoxyCodeLine{00898\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_ab3d0dbb3bb254cbea92508af42dfe75b}{last\_handshake\_sent}}()}
\DoxyCodeLine{00899\ \ \ \ \{}
\DoxyCodeLine{00900\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}new\ connection\ object\ created"{}}\ );}
\DoxyCodeLine{00901\ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsysio_1_1connection_a69709b0cfa29006569e7dcc6cd935c89}\index{sysio::connection@{sysio::connection}!````~connection@{\texorpdfstring{$\sim$}{\string~}connection}}
\index{````~connection@{\texorpdfstring{$\sim$}{\string~}connection}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}connection()}{\string~connection()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a69709b0cfa29006569e7dcc6cd935c89} 
sysio\+::connection\+::\texorpdfstring{$\sim$}{\string~}connection (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}



\doxysubsection{Member Function Documentation}
\Hypertarget{classsysio_1_1connection_a26752470d31dda1a5140351cbfa375c4}\index{sysio::connection@{sysio::connection}!blk\_send@{blk\_send}}
\index{blk\_send@{blk\_send}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{blk\_send()}{blk\_send()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a26752470d31dda1a5140351cbfa375c4} 
void sysio\+::connection\+::blk\+\_\+send (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_a4b8e4b7ed9dcd18ee75d0de62e88aa17}{block\+\_\+id\+\_\+type}} \&}]{blkid}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l01104}{1104}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01105\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_a6a48b685d0bf226f8d96c5cbbd648945}{connection\_wptr}}\ weak\ =\ shared\_from\_this();}
\DoxyCodeLine{01106\ \ \ \ \ \ \ \mbox{\hyperlink{namespaceappbase_a99374dc23934f008a09f2f79be9eae40}{app}}().\mbox{\hyperlink{classappbase_1_1application_a77aff91b861010fd61a616c59b310dcc}{post}}(\ \mbox{\hyperlink{structappbase_1_1priority_a89fc0f21b0f87574f0299932fc1724b4}{priority::medium}},\ [blkid,\ weak\{std::move(weak)\}]()\ \{}
\DoxyCodeLine{01107\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{debug__client_8cpp_ae9c9779aea742ab80689add7e553df0d}{connection\_ptr}}\ c\ =\ weak.lock();}
\DoxyCodeLine{01108\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !c\ )\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01109\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{01110\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1controller}{controller}}\&\ cc\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a932907eaa912c9420b96ea45103b66b8}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a14a5e77b31ecf267c8062267d03440ae}{chain}}();}
\DoxyCodeLine{01111\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_1_1chain_aa10ee348c57604b615bc8570f6685102}{signed\_block\_ptr}}\ b\ =\ cc.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a7d6e058e892e067510650db853794338}{fetch\_block\_by\_id}}(\ blkid\ );}
\DoxyCodeLine{01112\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ b\ )\ \{}
\DoxyCodeLine{01113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}fetch\_block\_by\_id\ num\ \$\{n\},\ connection\ \$\{cid\}"{}},}
\DoxyCodeLine{01114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}n"{}},\ b-\/>block\_num())(\textcolor{stringliteral}{"{}cid"{}},\ c-\/>connection\_id)\ );}
\DoxyCodeLine{01115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a5b302f8ed2594b44aa126082cd07d941}{dispatcher}}-\/>add\_peer\_block(\ blkid,\ c-\/>connection\_id\ );}
\DoxyCodeLine{01116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>strand.post(\ [c,\ b\{std::move(b)\}]()\ \{}
\DoxyCodeLine{01117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>enqueue\_block(\ b\ );}
\DoxyCodeLine{01118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ );}
\DoxyCodeLine{01119\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a067e87b091ade3787bcdda5775354654}{fc\_ilog}}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}fetch\ block\ by\ id\ returned\ null,\ id\ \$\{id\},\ connection\ \$\{cid\}"{}},}
\DoxyCodeLine{01121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}id"{}},\ blkid)(\textcolor{stringliteral}{"{}cid"{}},\ c-\/>connection\_id)\ );}
\DoxyCodeLine{01122\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01123\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ \textcolor{keyword}{const}\ assert\_exception\&\ ex\ )\ \{}
\DoxyCodeLine{01124\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_ae75bea0ceb7483fdf0ed20c22556a907}{fc\_elog}}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}caught\ assert\ on\ fetch\_block\_by\_id,\ \$\{ex\},\ id\ \$\{id\},\ connection\ \$\{cid\}"{}},}
\DoxyCodeLine{01125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}ex"{}},\ ex.to\_string())(\textcolor{stringliteral}{"{}id"{}},\ blkid)(\textcolor{stringliteral}{"{}cid"{}},\ c-\/>connection\_id)\ );}
\DoxyCodeLine{01126\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ ...\ )\ \{}
\DoxyCodeLine{01127\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_ae75bea0ceb7483fdf0ed20c22556a907}{fc\_elog}}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}caught\ other\ exception\ fetching\ block\ id\ \$\{id\},\ connection\ \$\{cid\}"{}},}
\DoxyCodeLine{01128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}id"{}},\ blkid)(\textcolor{stringliteral}{"{}cid"{}},\ c-\/>connection\_id)\ );}
\DoxyCodeLine{01129\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01130\ \ \ \ \ \ \ \});}
\DoxyCodeLine{01131\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_a26752470d31dda1a5140351cbfa375c4_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=313pt]{classsysio_1_1connection_a26752470d31dda1a5140351cbfa375c4_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a5b9e30160fc0db3e2842bcb868cb34a0}\index{sysio::connection@{sysio::connection}!blk\_send\_branch@{blk\_send\_branch}}
\index{blk\_send\_branch@{blk\_send\_branch}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{blk\_send\_branch()}{blk\_send\_branch()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a5b9e30160fc0db3e2842bcb868cb34a0} 
void sysio\+::connection\+::blk\+\_\+send\+\_\+branch (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_a4b8e4b7ed9dcd18ee75d0de62e88aa17}{block\+\_\+id\+\_\+type}} \&}]{msg\+\_\+head\+\_\+id}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l01029}{1029}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01029\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01030\ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ head\_num\ =\ 0;}
\DoxyCodeLine{01031\ \ \ \ \ \ \ std::tie(\ std::ignore,\ std::ignore,\ head\_num,}
\DoxyCodeLine{01032\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::ignore,\ std::ignore,\ std::ignore\ )\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_ab7de62c1cba9cb5a30060a687ef913e2}{get\_chain\_info}}();}
\DoxyCodeLine{01033\ }
\DoxyCodeLine{01034\ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a051c62a0ec99dcd3e7a38fd03bec1fe0}{peer\_dlog}}(\textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}head\_num\ =\ \$\{h\}"{}},(\textcolor{stringliteral}{"{}h"{}},head\_num));}
\DoxyCodeLine{01035\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(head\_num\ ==\ 0)\ \{}
\DoxyCodeLine{01036\ \ \ \ \ \ \ \ \ \ notice\_message\ note;}
\DoxyCodeLine{01037\ \ \ \ \ \ \ \ \ \ note.known\_blocks.mode\ =\ \mbox{\hyperlink{namespacesysio_a3a283f786468e0f0e35b0177214ca59ea13cebc41fab7b311a3f8f8bfae78f2ae}{normal}};}
\DoxyCodeLine{01038\ \ \ \ \ \ \ \ \ \ note.known\_blocks.pending\ =\ 0;}
\DoxyCodeLine{01039\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_ad6a1bcdfc4bd9d2c7ab2278240def6b6}{enqueue}}(note);}
\DoxyCodeLine{01040\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01041\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01042\ \ \ \ \ \ \ std::unique\_lock<std::mutex>\ g\_conn(\ \mbox{\hyperlink{classsysio_1_1connection_a675e5b04f968aa689c49d511c601fffa}{conn\_mtx}}\ );}
\DoxyCodeLine{01043\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1connection_a158c59b44186c7757311f14f71818ec8}{last\_handshake\_recv}}.\mbox{\hyperlink{structsysio_1_1handshake__message_a62247b1e0a1a552278fc2b156d4d663f}{generation}}\ >=\ 1\ )\ \{}
\DoxyCodeLine{01044\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a051c62a0ec99dcd3e7a38fd03bec1fe0}{peer\_dlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}maybe\ truncating\ branch\ at\ =\ \$\{h\}:\$\{id\}"{}},}
\DoxyCodeLine{01045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}h"{}},\ \mbox{\hyperlink{structsysio_1_1chain_1_1block__header_a39d57e33ef8d3f6ba59b4c458f0ae375}{block\_header::num\_from\_id}}(\mbox{\hyperlink{classsysio_1_1connection_a158c59b44186c7757311f14f71818ec8}{last\_handshake\_recv}}.\mbox{\hyperlink{structsysio_1_1handshake__message_a2ca0bcb5e2387d67ae1d05e7a9718595}{head\_id}}))(\textcolor{stringliteral}{"{}id"{}},\ \mbox{\hyperlink{classsysio_1_1connection_a158c59b44186c7757311f14f71818ec8}{last\_handshake\_recv}}.\mbox{\hyperlink{structsysio_1_1handshake__message_a2ca0bcb5e2387d67ae1d05e7a9718595}{head\_id}})\ );}
\DoxyCodeLine{01046\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01047\ }
\DoxyCodeLine{01048\ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1sha256}{block\_id\_type}}\ lib\_id\ =\ \mbox{\hyperlink{classsysio_1_1connection_a158c59b44186c7757311f14f71818ec8}{last\_handshake\_recv}}.\mbox{\hyperlink{structsysio_1_1handshake__message_add797e772415837261beaef238a7faa6}{last\_irreversible\_block\_id}};}
\DoxyCodeLine{01049\ \ \ \ \ \ \ g\_conn.unlock();}
\DoxyCodeLine{01050\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ lib\_num\ =\ \mbox{\hyperlink{structsysio_1_1chain_1_1block__header_a39d57e33ef8d3f6ba59b4c458f0ae375}{block\_header::num\_from\_id}}(lib\_id);}
\DoxyCodeLine{01051\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ lib\_num\ ==\ 0\ )\ \textcolor{keywordflow}{return};\ \textcolor{comment}{//\ if\ last\_irreversible\_block\_id\ is\ null\ (we\ have\ not\ received\ handshake\ or\ reset)}}
\DoxyCodeLine{01052\ }
\DoxyCodeLine{01053\ \ \ \ \ \ \ \mbox{\hyperlink{namespaceappbase_a99374dc23934f008a09f2f79be9eae40}{app}}().\mbox{\hyperlink{classappbase_1_1application_a77aff91b861010fd61a616c59b310dcc}{post}}(\ \mbox{\hyperlink{structappbase_1_1priority_a89fc0f21b0f87574f0299932fc1724b4}{priority::medium}},\ [chain\_plug\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a932907eaa912c9420b96ea45103b66b8}{chain\_plug}},\ c\ =\ shared\_from\_this(),}
\DoxyCodeLine{01054\ \ \ \ \ \ \ \ \ \ \ \ \ lib\_num,\ head\_num,\ msg\_head\_id]()\ \{}
\DoxyCodeLine{01055\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ msg\_head\_num\ =\ \mbox{\hyperlink{structsysio_1_1chain_1_1block__header_a39d57e33ef8d3f6ba59b4c458f0ae375}{block\_header::num\_from\_id}}(msg\_head\_id);}
\DoxyCodeLine{01056\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ on\_fork\ =\ msg\_head\_num\ ==\ 0;}
\DoxyCodeLine{01057\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ unknown\_block\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01058\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !on\_fork\ )\ \{}
\DoxyCodeLine{01059\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{01060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classsysio_1_1chain_1_1controller}{controller}}\&\ cc\ =\ chain\_plug-\/>chain();}
\DoxyCodeLine{01061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1sha256}{block\_id\_type}}\ my\_id\ =\ cc.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a9a55edb4766f1f3302ede12e329b1ea6}{get\_block\_id\_for\_num}}(\ msg\_head\_num\ );}
\DoxyCodeLine{01062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ on\_fork\ =\ my\_id\ !=\ msg\_head\_id;}
\DoxyCodeLine{01063\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ \textcolor{keyword}{const}\ unknown\_block\_exception\&\ )\ \{}
\DoxyCodeLine{01064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ unknown\_block\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01065\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ ...\ )\ \{}
\DoxyCodeLine{01066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ on\_fork\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01067\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01068\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01069\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ unknown\_block\ )\ \{}
\DoxyCodeLine{01070\ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>strand.post(\ [msg\_head\_num,\ c]()\ \{}
\DoxyCodeLine{01071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_ad909b2ce03eb19202983c88ae2abe9bd}{peer\_ilog}}(\ c,\ \textcolor{stringliteral}{"{}Peer\ asked\ for\ unknown\ block\ \$\{mn\},\ sending:\ benign\_other\ go\ away"{}},\ (\textcolor{stringliteral}{"{}mn"{}},\ msg\_head\_num)\ );}
\DoxyCodeLine{01072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>no\_retry\ =\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fafd1331a94b3ecffdc5fcfdcd3d03687c}{benign\_other}};}
\DoxyCodeLine{01073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>enqueue(\ go\_away\_message(\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fafd1331a94b3ecffdc5fcfdcd3d03687c}{benign\_other}}\ )\ );}
\DoxyCodeLine{01074\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ );}
\DoxyCodeLine{01075\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01076\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ on\_fork\ )\ msg\_head\_num\ =\ 0;}
\DoxyCodeLine{01077\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ peer\ on\ fork,\ start\ at\ their\ last\ lib,\ otherwise\ we\ can\ start\ at\ msg\_head+1}}
\DoxyCodeLine{01078\ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>strand.post(\ [c,\ msg\_head\_num,\ lib\_num,\ head\_num]()\ \{}
\DoxyCodeLine{01079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>blk\_send\_branch\_impl(\ msg\_head\_num,\ lib\_num,\ head\_num\ );}
\DoxyCodeLine{01080\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ );}
\DoxyCodeLine{01081\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01082\ \ \ \ \ \ \ \}\ );}
\DoxyCodeLine{01083\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_a5b9e30160fc0db3e2842bcb868cb34a0_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=313pt]{classsysio_1_1connection_a5b9e30160fc0db3e2842bcb868cb34a0_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a97f2f3f3cbd12528d708c86e7568e282}\index{sysio::connection@{sysio::connection}!blk\_send\_branch\_impl@{blk\_send\_branch\_impl}}
\index{blk\_send\_branch\_impl@{blk\_send\_branch\_impl}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{blk\_send\_branch\_impl()}{blk\_send\_branch\_impl()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a97f2f3f3cbd12528d708c86e7568e282} 
void sysio\+::connection\+::blk\+\_\+send\+\_\+branch\+\_\+impl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}}}]{msg\+\_\+head\+\_\+num}{, }\item[{\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}}}]{lib\+\_\+num}{, }\item[{\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}}}]{head\+\_\+num}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l01086}{1086}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01087\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !peer\_requested\ )\ \{}
\DoxyCodeLine{01088\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ last\ =\ msg\_head\_num\ !=\ 0\ ?\ msg\_head\_num\ :\ lib\_num;}
\DoxyCodeLine{01089\ \ \ \ \ \ \ \ \ \ peer\_requested\ =\ peer\_sync\_state(\ last+1,\ head\_num,\ last\ );}
\DoxyCodeLine{01090\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01091\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ last\ =\ msg\_head\_num\ !=\ 0\ ?\ msg\_head\_num\ :\ std::min(\ peer\_requested-\/>last,\ lib\_num\ );}
\DoxyCodeLine{01092\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ end\ \ \ =\ std::max(\ peer\_requested-\/>end\_block,\ head\_num\ );}
\DoxyCodeLine{01093\ \ \ \ \ \ \ \ \ \ peer\_requested\ =\ peer\_sync\_state(\ last+1,\ end,\ last\ );}
\DoxyCodeLine{01094\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01095\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ peer\_requested-\/>start\_block\ <=\ peer\_requested-\/>end\_block\ )\ \{}
\DoxyCodeLine{01096\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_ad909b2ce03eb19202983c88ae2abe9bd}{peer\_ilog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}enqueue\ \$\{s\}\ -\/\ \$\{e\}"{}},\ (\textcolor{stringliteral}{"{}s"{}},\ peer\_requested-\/>start\_block)(\textcolor{stringliteral}{"{}e"{}},\ peer\_requested-\/>end\_block)\ );}
\DoxyCodeLine{01097\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a099523d62bc60e4a13deda1fe15845ad}{enqueue\_sync\_block}}();}
\DoxyCodeLine{01098\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01099\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_ad909b2ce03eb19202983c88ae2abe9bd}{peer\_ilog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}nothing\ to\ enqueue"{}}\ );}
\DoxyCodeLine{01100\ \ \ \ \ \ \ \ \ \ peer\_requested.reset();}
\DoxyCodeLine{01101\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01102\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_a97f2f3f3cbd12528d708c86e7568e282_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a088db9bdbe7600d3af19c9272359b7fe}\index{sysio::connection@{sysio::connection}!cancel\_sync@{cancel\_sync}}
\index{cancel\_sync@{cancel\_sync}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{cancel\_sync()}{cancel\_sync()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a088db9bdbe7600d3af19c9272359b7fe} 
void sysio\+::connection\+::cancel\+\_\+sync (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673f}{go\+\_\+away\+\_\+reason}}}]{reason}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l01262}{1262}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01263\ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a051c62a0ec99dcd3e7a38fd03bec1fe0}{peer\_dlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}cancel\ sync\ reason\ =\ \$\{m\},\ write\ queue\ size\ \$\{o\}\ bytes"{}},}
\DoxyCodeLine{01264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}m"{}},\ \mbox{\hyperlink{namespacesysio_a9d60317a4b83cb3c91674336886005ee}{reason\_str}}(\ reason\ ))(\textcolor{stringliteral}{"{}o"{}},\ \mbox{\hyperlink{classsysio_1_1connection_a8386b853edf1cbab18a09b8123cc525c}{buffer\_queue}}.\mbox{\hyperlink{classsysio_1_1queued__buffer_a6175551ba72684aede34883da1ca00fe}{write\_queue\_size}}())\ );}
\DoxyCodeLine{01265\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_ae3a7d2b5432bfc0eccde29ce39abd4b8}{cancel\_wait}}();}
\DoxyCodeLine{01266\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a51ccfb43cb79f666e6548ffeb9f205f2}{flush\_queues}}();}
\DoxyCodeLine{01267\ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (reason)\ \{}
\DoxyCodeLine{01268\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673faf33f5d368dfd5563446edd1687b908bb}{validation}}\ :}
\DoxyCodeLine{01269\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa834d6ee2ad87c888db23aa35bfe5a7eb}{fatal\_other}}\ :\ \{}
\DoxyCodeLine{01270\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a6b2649c5a44369243b03ddc3a5ee3695}{no\_retry}}\ =\ reason;}
\DoxyCodeLine{01271\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_ad6a1bcdfc4bd9d2c7ab2278240def6b6}{enqueue}}(\ go\_away\_message(\ reason\ ));}
\DoxyCodeLine{01272\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01273\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01274\ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01275\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_ad909b2ce03eb19202983c88ae2abe9bd}{peer\_ilog}}(\textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}sending\ empty\ request\ but\ not\ calling\ sync\ wait"{}});}
\DoxyCodeLine{01276\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_ad6a1bcdfc4bd9d2c7ab2278240def6b6}{enqueue}}(\ (\ sync\_request\_message\ )\ \{0,0\}\ );}
\DoxyCodeLine{01277\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01278\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=321pt]{classsysio_1_1connection_a088db9bdbe7600d3af19c9272359b7fe_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_ae3a7d2b5432bfc0eccde29ce39abd4b8}\index{sysio::connection@{sysio::connection}!cancel\_wait@{cancel\_wait}}
\index{cancel\_wait@{cancel\_wait}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{cancel\_wait()}{cancel\_wait()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_ae3a7d2b5432bfc0eccde29ce39abd4b8} 
void sysio\+::connection\+::cancel\+\_\+wait (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l01457}{1457}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01457\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01458\ \ \ \ \ \ \ std::lock\_guard<std::mutex>\ g(\ \mbox{\hyperlink{classsysio_1_1connection_a70c7d2d3ab6b30deeaf88b98925623c2}{response\_expected\_timer\_mtx}}\ );}
\DoxyCodeLine{01459\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a237374fa72d9b4b4e56f6f9a685bed1a}{response\_expected\_timer}}.cancel();}
\DoxyCodeLine{01460\ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsysio_1_1connection_ad02fe050af3c833e156bea91308d6c1b}\index{sysio::connection@{sysio::connection}!check\_heartbeat@{check\_heartbeat}}
\index{check\_heartbeat@{check\_heartbeat}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{check\_heartbeat()}{check\_heartbeat()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_ad02fe050af3c833e156bea91308d6c1b} 
void sysio\+::connection\+::check\+\_\+heartbeat (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesysio_a42c15380188aaacda97b061d7c538d13}{tstamp}}}]{current\+\_\+time}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l01156}{1156}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01157\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1connection_a718e2bd1f4e3bcd87979a578e1d49d7a}{latest\_msg\_time}}\ >\ 0\ )\ \{}
\DoxyCodeLine{01158\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ current\_time\ >\ \mbox{\hyperlink{classsysio_1_1connection_a718e2bd1f4e3bcd87979a578e1d49d7a}{latest\_msg\_time}}\ +\ \mbox{\hyperlink{classsysio_1_1connection_a1f3730a3eedfe33fa59dae7c485c341a}{hb\_timeout}}\ )\ \{}
\DoxyCodeLine{01159\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a6b2649c5a44369243b03ddc3a5ee3695}{no\_retry}}\ =\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fafd1331a94b3ecffdc5fcfdcd3d03687c}{benign\_other}};}
\DoxyCodeLine{01160\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{classsysio_1_1connection_aca3e3acacf8047c389e0bda758da197d}{peer\_address}}().empty()\ )\ \{}
\DoxyCodeLine{01161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_af53787454493a30650fdab0193037465}{peer\_wlog}}(\textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}heartbeat\ timed\ out\ for\ peer\ address"{}});}
\DoxyCodeLine{01162\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a7fe7bb50b91bd69cdf56c7c09a868e29}{close}}(\textcolor{keyword}{true});}
\DoxyCodeLine{01163\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_af53787454493a30650fdab0193037465}{peer\_wlog}}(\textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}heartbeat\ timed\ out"{}});}
\DoxyCodeLine{01165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a7fe7bb50b91bd69cdf56c7c09a868e29}{close}}(\textcolor{keyword}{false});}
\DoxyCodeLine{01166\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01167\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01168\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01169\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_a42c15380188aaacda97b061d7c538d13}{tstamp}}\ timeout\ =\ std::max(\mbox{\hyperlink{classsysio_1_1connection_a1f3730a3eedfe33fa59dae7c485c341a}{hb\_timeout}}/2,\ 2*std::chrono::milliseconds(config::block\_interval\_ms).\mbox{\hyperlink{gmock__stress__test_8cc_afd9db40e3361ae09188795e8cbe19752}{count}}());}
\DoxyCodeLine{01170\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ current\_time\ >\ \mbox{\hyperlink{classsysio_1_1connection_a1bf388b9e64d25616cefd8d6b1175fc7}{latest\_blk\_time}}\ +\ timeout\ )\ \{}
\DoxyCodeLine{01171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a55b561baeda5353d7c1a1e2a8a0c88e1}{send\_handshake}}();}
\DoxyCodeLine{01172\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01173\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01174\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01175\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01176\ }
\DoxyCodeLine{01177\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a1c134c29679142daab81ca9fe4a10996}{send\_time}}();}
\DoxyCodeLine{01178\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_ad02fe050af3c833e156bea91308d6c1b_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a7fe7bb50b91bd69cdf56c7c09a868e29}\index{sysio::connection@{sysio::connection}!close@{close}}
\index{close@{close}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{close()}{close()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a7fe7bb50b91bd69cdf56c7c09a868e29} 
void sysio\+::connection\+::close (\begin{DoxyParamCaption}\item[{bool}]{reconnect}{ = {\ttfamily true}, }\item[{bool}]{shutdown}{ = {\ttfamily false}}\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em reconnect} & true if we should try and reconnect immediately after close \\
\hline
{\em shutdown} & true only if plugin is shutting down \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00985}{985}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00985\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00986\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a950c534737276c9d0a2724d9801d7def}{strand}}.post(\ [\mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a}{self}}\ =\ shared\_from\_this(),\ reconnect,\ shutdown]()\ \{}
\DoxyCodeLine{00987\ \ \ \ \ \ \ \ \ \ connection::\_close(\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a}{self}}.get(),\ reconnect,\ shutdown\ );}
\DoxyCodeLine{00988\ \ \ \ \ \ \ \});}
\DoxyCodeLine{00989\ \ \ \ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_a7fe7bb50b91bd69cdf56c7c09a868e29_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a4bb332843c0924e4597fe1d992367232}\index{sysio::connection@{sysio::connection}!connect@{connect}}
\index{connect@{connect}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{connect()}{connect()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a4bb332843c0924e4597fe1d992367232} 
void sysio\+::connection\+::connect (\begin{DoxyParamCaption}\item[{const std\+::shared\+\_\+ptr$<$ tcp\+::resolver $>$ \&}]{resolver}{, }\item[{tcp\+::resolver\+::results\+\_\+type}]{endpoints}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l02343}{2343}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02343\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02344\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a2cb1b55074b31325f9845700fd7ede82}{connecting}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02345\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_af241d498d210d4e238b73f7bcd1c45d1}{pending\_message\_buffer}}.\mbox{\hyperlink{classfc_1_1message__buffer_a49d9f621f19529a42cbfa0de7b9266dd}{reset}}();}
\DoxyCodeLine{02346\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a8386b853edf1cbab18a09b8123cc525c}{buffer\_queue}}.\mbox{\hyperlink{classsysio_1_1queued__buffer_a6a5614c85ba08a707d94f8303b561940}{clear\_out\_queue}}();}
\DoxyCodeLine{02347\ \ \ \ \ \ \ boost::asio::async\_connect(\ *\mbox{\hyperlink{classsysio_1_1connection_adb1c345e310c4bf64faa889c01440404}{socket}},\ endpoints,}
\DoxyCodeLine{02348\ \ \ \ \ \ \ \ \ \ boost::asio::bind\_executor(\ \mbox{\hyperlink{classsysio_1_1connection_a950c534737276c9d0a2724d9801d7def}{strand}},}
\DoxyCodeLine{02349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [resolver,\ c\ =\ shared\_from\_this(),\ \mbox{\hyperlink{classsysio_1_1connection_adb1c345e310c4bf64faa889c01440404}{socket}}=\mbox{\hyperlink{classsysio_1_1connection_adb1c345e310c4bf64faa889c01440404}{socket}}](\ \textcolor{keyword}{const}\ boost::system::error\_code\&\ err,\ \textcolor{keyword}{const}\ tcp::endpoint\&\ endpoint\ )\ \{}
\DoxyCodeLine{02350\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !err\ \&\&\ \mbox{\hyperlink{classsysio_1_1connection_adb1c345e310c4bf64faa889c01440404}{socket}}-\/>is\_open()\ \&\&\ \mbox{\hyperlink{classsysio_1_1connection_adb1c345e310c4bf64faa889c01440404}{socket}}\ ==\ c-\/>socket\ )\ \{}
\DoxyCodeLine{02351\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ c-\/>start\_session()\ )\ \{}
\DoxyCodeLine{02352\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>send\_handshake();}
\DoxyCodeLine{02353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02354\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02355\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_ae75bea0ceb7483fdf0ed20c22556a907}{fc\_elog}}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}connection\ failed\ to\ \$\{host\}:\$\{port\}\ \$\{error\}"{}},}
\DoxyCodeLine{02356\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}host"{}},\ endpoint.address().to\_string())(\textcolor{stringliteral}{"{}port"{}},\ endpoint.port())(\ \textcolor{stringliteral}{"{}error"{}},\ err.message()));}
\DoxyCodeLine{02357\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>close(\ \textcolor{keyword}{false}\ );}
\DoxyCodeLine{02358\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02359\ \ \ \ \ \ \ \}\ )\ );}
\DoxyCodeLine{02360\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=321pt]{classsysio_1_1connection_a4bb332843c0924e4597fe1d992367232_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a389358826bf8da3e54bebbd7db92120c}\index{sysio::connection@{sysio::connection}!connected@{connected}}
\index{connected@{connected}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{connected()}{connected()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a389358826bf8da3e54bebbd7db92120c} 
bool sysio\+::connection\+::connected (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00973}{973}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00973\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00974\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classsysio_1_1connection_adee4be2152a35cc0122e53365e8e1937}{socket\_is\_open}}()\ \&\&\ !\mbox{\hyperlink{classsysio_1_1connection_a2cb1b55074b31325f9845700fd7ede82}{connecting}};}
\DoxyCodeLine{00975\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=313pt]{classsysio_1_1connection_a389358826bf8da3e54bebbd7db92120c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=313pt]{classsysio_1_1connection_a389358826bf8da3e54bebbd7db92120c_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_aeb1cd3ec121a5ff8d01c2292834923a1}\index{sysio::connection@{sysio::connection}!current@{current}}
\index{current@{current}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{current()}{current()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_aeb1cd3ec121a5ff8d01c2292834923a1} 
bool sysio\+::connection\+::current (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00977}{977}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00977\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00978\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{classsysio_1_1connection_a389358826bf8da3e54bebbd7db92120c}{connected}}()\ \&\&\ !\mbox{\hyperlink{classsysio_1_1connection_ab77357d0ed0b422c2d6a15065d818ff6}{syncing}});}
\DoxyCodeLine{00979\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_aeb1cd3ec121a5ff8d01c2292834923a1_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a4f6ca81d49c22eef80854175bff8ed42}\index{sysio::connection@{sysio::connection}!do\_queue\_write@{do\_queue\_write}}
\index{do\_queue\_write@{do\_queue\_write}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{do\_queue\_write()}{do\_queue\_write()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a4f6ca81d49c22eef80854175bff8ed42} 
void sysio\+::connection\+::do\+\_\+queue\+\_\+write (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l01212}{1212}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01212\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01213\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{classsysio_1_1connection_a8386b853edf1cbab18a09b8123cc525c}{buffer\_queue}}.\mbox{\hyperlink{classsysio_1_1queued__buffer_a17b570f0d6ec495cd2823c84110cab79}{ready\_to\_send}}()\ )}
\DoxyCodeLine{01214\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01215\ \ \ \ \ \ \ \mbox{\hyperlink{debug__client_8cpp_ae9c9779aea742ab80689add7e553df0d}{connection\_ptr}}\ c(shared\_from\_this());}
\DoxyCodeLine{01216\ }
\DoxyCodeLine{01217\ \ \ \ \ \ \ std::vector<boost::asio::const\_buffer>\ bufs;}
\DoxyCodeLine{01218\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a8386b853edf1cbab18a09b8123cc525c}{buffer\_queue}}.\mbox{\hyperlink{classsysio_1_1queued__buffer_a382e1e4ae7f849e775c04e051400a5dc}{fill\_out\_buffer}}(\ bufs\ );}
\DoxyCodeLine{01219\ }
\DoxyCodeLine{01220\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a950c534737276c9d0a2724d9801d7def}{strand}}.post(\ [c\{std::move(c)\},\ bufs\{std::move(bufs)\}]()\ \{}
\DoxyCodeLine{01221\ \ \ \ \ \ \ \ \ \ boost::asio::async\_write(\ *c-\/>socket,\ bufs,}
\DoxyCodeLine{01222\ \ \ \ \ \ \ \ \ \ \ \ \ boost::asio::bind\_executor(\ c-\/>strand,\ [c,\ \mbox{\hyperlink{classsysio_1_1connection_adb1c345e310c4bf64faa889c01440404}{socket}}=c-\/>socket](\ boost::system::error\_code\ ec,\ std::size\_t\ w\ )\ \{}
\DoxyCodeLine{01223\ \ \ \ \ \ \ \ \ \ \ \ \ try\ \{}
\DoxyCodeLine{01224\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>buffer\_queue.clear\_out\_queue();}
\DoxyCodeLine{01225\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ May\ have\ closed\ connection\ and\ cleared\ buffer\_queue}}
\DoxyCodeLine{01226\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if(\ !c-\/>socket\_is\_open()\ ||\ socket\ !=\ c-\/>socket\ )\ \{}
\DoxyCodeLine{01227\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ peer\_ilog(\ c,\ \textcolor{stringliteral}{"{}async\ write\ socket\ \$\{r\}\ before\ callback"{}},\ (\textcolor{stringliteral}{"{}r"{}},\ c-\/>socket\_is\_open()\ ?\ \textcolor{stringliteral}{"{}changed"{}}\ :\ \textcolor{stringliteral}{"{}closed"{}})\ );}
\DoxyCodeLine{01228\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>close();}
\DoxyCodeLine{01229\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ return;}
\DoxyCodeLine{01230\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01231\ }
\DoxyCodeLine{01232\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if(\ ec\ )\ \{}
\DoxyCodeLine{01233\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if(\ ec.value()\ !=\ boost::asio::error::eof\ )\ \{}
\DoxyCodeLine{01234\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ peer\_elog(\ c,\ \textcolor{stringliteral}{"{}Error\ sending\ to\ peer:\ \$\{i\}"{}},\ (\ \textcolor{stringliteral}{"{}i"{}},\ ec.message()\ )\ );}
\DoxyCodeLine{01235\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ else\ \{}
\DoxyCodeLine{01236\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ peer\_wlog(\ c,\ \textcolor{stringliteral}{"{}connection\ closure\ detected\ on\ write"{}}\ );}
\DoxyCodeLine{01237\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>close();}
\DoxyCodeLine{01239\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ return;}
\DoxyCodeLine{01240\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01241\ }
\DoxyCodeLine{01242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>buffer\_queue.out\_callback(\ ec,\ w\ );}
\DoxyCodeLine{01243\ }
\DoxyCodeLine{01244\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>enqueue\_sync\_block();}
\DoxyCodeLine{01245\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>do\_queue\_write();}
\DoxyCodeLine{01246\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{hello__driver_8cpp_a1204fa6444ae7174767e202a6d39b815}{catch}}\ (\ \textcolor{keyword}{const}\ std::bad\_alloc\&\ )\ \{}
\DoxyCodeLine{01247\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw};}
\DoxyCodeLine{01248\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\ \textcolor{keyword}{const}\ boost::interprocess::bad\_alloc\&\ )\ \{}
\DoxyCodeLine{01249\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw};}
\DoxyCodeLine{01250\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classfc_1_1exception}{fc::exception}}\&\ ex\ )\ \{}
\DoxyCodeLine{01251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ c,\ \textcolor{stringliteral}{"{}fc::exception\ in\ do\_queue\_write:\ \$\{s\}"{}},\ (\textcolor{stringliteral}{"{}s"{}},\ ex.\mbox{\hyperlink{classfc_1_1exception_adbc4557b14bc29b74e9cf9f0ed5fb8d8}{to\_string}}())\ );}
\DoxyCodeLine{01252\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ \textcolor{keyword}{const}\ std::exception\&\ ex\ )\ \{}
\DoxyCodeLine{01253\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ c,\ \textcolor{stringliteral}{"{}std::exception\ in\ do\_queue\_write:\ \$\{s\}"{}},\ (\textcolor{stringliteral}{"{}s"{}},\ ex.what())\ );}
\DoxyCodeLine{01254\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ ...\ )\ \{}
\DoxyCodeLine{01255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ c,\ \textcolor{stringliteral}{"{}Unknown\ exception\ in\ do\_queue\_write"{}}\ );}
\DoxyCodeLine{01256\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01257\ \ \ \ \ \ \ \ \ \ \}));}
\DoxyCodeLine{01258\ \ \ \ \ \ \ \});}
\DoxyCodeLine{01259\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_a4f6ca81d49c22eef80854175bff8ed42_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=313pt]{classsysio_1_1connection_a4f6ca81d49c22eef80854175bff8ed42_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_ad6a1bcdfc4bd9d2c7ab2278240def6b6}\index{sysio::connection@{sysio::connection}!enqueue@{enqueue}}
\index{enqueue@{enqueue}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{enqueue()}{enqueue()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_ad6a1bcdfc4bd9d2c7ab2278240def6b6} 
void sysio\+::connection\+::enqueue (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacesysio_a783ade47a6f13a71a9b75cd2c68d9965}{net\+\_\+message}} \&}]{msg}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l01414}{1414}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01414\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01415\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_a19cc0c616331757f980d857722b4e07e}{verify\_strand\_in\_this\_thread}}(\ \mbox{\hyperlink{classsysio_1_1connection_a950c534737276c9d0a2724d9801d7def}{strand}},\ \mbox{\hyperlink{log__message_8hpp_a7d6e1cf1a8d53f38471e9e9db3faf740}{\_\_func\_\_}},\ \_\_LINE\_\_\ );}
\DoxyCodeLine{01416\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673f}{go\_away\_reason}}\ close\_after\_send\ =\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa35a3ee195246082e99a69c2636252839}{no\_reason}};}
\DoxyCodeLine{01417\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (std::holds\_alternative<go\_away\_message>(m))\ \{}
\DoxyCodeLine{01418\ \ \ \ \ \ \ \ \ \ close\_after\_send\ =\ std::get<go\_away\_message>(m).reason;}
\DoxyCodeLine{01419\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01420\ }
\DoxyCodeLine{01421\ \ \ \ \ \ \ buffer\_factory\ buff\_factory;}
\DoxyCodeLine{01422\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ send\_buffer\ =\ buff\_factory.get\_send\_buffer(\ m\ );}
\DoxyCodeLine{01423\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a111bb23671fbd3acac7e1196a6cf8617}{enqueue\_buffer}}(\ send\_buffer,\ close\_after\_send\ );}
\DoxyCodeLine{01424\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_ad6a1bcdfc4bd9d2c7ab2278240def6b6_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_ad6a1bcdfc4bd9d2c7ab2278240def6b6_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_af8cc5bf70b8c46a2325c5021a3fd06fb}\index{sysio::connection@{sysio::connection}!enqueue\_block@{enqueue\_block}}
\index{enqueue\_block@{enqueue\_block}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{enqueue\_block()}{enqueue\_block()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_af8cc5bf70b8c46a2325c5021a3fd06fb} 
void sysio\+::connection\+::enqueue\+\_\+block (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_aa10ee348c57604b615bc8570f6685102}{signed\+\_\+block\+\_\+ptr}} \&}]{sb}{, }\item[{bool}]{to\+\_\+sync\+\_\+queue}{ = {\ttfamily false}}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l01427}{1427}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01427\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01428\ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a051c62a0ec99dcd3e7a38fd03bec1fe0}{peer\_dlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}enqueue\ block\ \$\{num\}"{}},\ (\textcolor{stringliteral}{"{}num"{}},\ b-\/>block\_num())\ );}
\DoxyCodeLine{01429\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_a19cc0c616331757f980d857722b4e07e}{verify\_strand\_in\_this\_thread}}(\ \mbox{\hyperlink{classsysio_1_1connection_a950c534737276c9d0a2724d9801d7def}{strand}},\ \mbox{\hyperlink{log__message_8hpp_a7d6e1cf1a8d53f38471e9e9db3faf740}{\_\_func\_\_}},\ \_\_LINE\_\_\ );}
\DoxyCodeLine{01430\ }
\DoxyCodeLine{01431\ \ \ \ \ \ \ block\_buffer\_factory\ buff\_factory;}
\DoxyCodeLine{01432\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ sb\ =\ buff\_factory.get\_send\_buffer(\ b\ );}
\DoxyCodeLine{01433\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a1bf388b9e64d25616cefd8d6b1175fc7}{latest\_blk\_time}}\ =\ \mbox{\hyperlink{classsysio_1_1connection_aa74b147947e087bc084d72a3d892a06f}{get\_time}}();}
\DoxyCodeLine{01434\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a111bb23671fbd3acac7e1196a6cf8617}{enqueue\_buffer}}(\ sb,\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa35a3ee195246082e99a69c2636252839}{no\_reason}},\ to\_sync\_queue);}
\DoxyCodeLine{01435\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_af8cc5bf70b8c46a2325c5021a3fd06fb_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a111bb23671fbd3acac7e1196a6cf8617}\index{sysio::connection@{sysio::connection}!enqueue\_buffer@{enqueue\_buffer}}
\index{enqueue\_buffer@{enqueue\_buffer}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{enqueue\_buffer()}{enqueue\_buffer()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a111bb23671fbd3acac7e1196a6cf8617} 
void sysio\+::connection\+::enqueue\+\_\+buffer (\begin{DoxyParamCaption}\item[{const std\+::shared\+\_\+ptr$<$ std\+::vector$<$ char $>$ $>$ \&}]{send\+\_\+buffer}{, }\item[{\mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673f}{go\+\_\+away\+\_\+reason}}}]{close\+\_\+after\+\_\+send}{, }\item[{bool}]{to\+\_\+sync\+\_\+queue}{ = {\ttfamily false}}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l01438}{1438}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01441\ \ \ \ \{}
\DoxyCodeLine{01442\ \ \ \ \ \ \ \mbox{\hyperlink{debug__client_8cpp_ae9c9779aea742ab80689add7e553df0d}{connection\_ptr}}\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a}{self}}\ =\ shared\_from\_this();}
\DoxyCodeLine{01443\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_ae85a6909e1a531d6c27c0d22f12e61c9}{queue\_write}}(send\_buffer,}
\DoxyCodeLine{01444\ \ \ \ \ \ \ \ \ \ \ \ \ [conn\{std::move(\mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a}{self}})\},\ close\_after\_send](boost::system::error\_code\ ec,\ std::size\_t\ )\ \{}
\DoxyCodeLine{01445\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ec)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01446\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (close\_after\_send\ !=\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa35a3ee195246082e99a69c2636252839}{no\_reason}})\ \{}
\DoxyCodeLine{01447\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a067e87b091ade3787bcdda5775354654}{fc\_ilog}}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}sent\ a\ go\ away\ message:\ \$\{r\},\ closing\ connection\ \$\{cid\}"{}},}
\DoxyCodeLine{01448\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}r"{}},\ \mbox{\hyperlink{namespacesysio_a9d60317a4b83cb3c91674336886005ee}{reason\_str}}(close\_after\_send))(\textcolor{stringliteral}{"{}cid"{}},\ conn-\/>connection\_id)\ );}
\DoxyCodeLine{01449\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ conn-\/>close();}
\DoxyCodeLine{01450\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01451\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01452\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{01453\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ to\_sync\_queue);}
\DoxyCodeLine{01454\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=306pt]{classsysio_1_1connection_a111bb23671fbd3acac7e1196a6cf8617_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a099523d62bc60e4a13deda1fe15845ad}\index{sysio::connection@{sysio::connection}!enqueue\_sync\_block@{enqueue\_sync\_block}}
\index{enqueue\_sync\_block@{enqueue\_sync\_block}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{enqueue\_sync\_block()}{enqueue\_sync\_block()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a099523d62bc60e4a13deda1fe15845ad} 
bool sysio\+::connection\+::enqueue\+\_\+sync\+\_\+block (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l01281}{1281}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01281\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01282\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !peer\_requested\ )\ \{}
\DoxyCodeLine{01283\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01284\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01285\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a051c62a0ec99dcd3e7a38fd03bec1fe0}{peer\_dlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}enqueue\ sync\ block\ \$\{num\}"{}},\ (\textcolor{stringliteral}{"{}num"{}},\ peer\_requested-\/>last\ +\ 1)\ );}
\DoxyCodeLine{01286\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01287\ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ \mbox{\hyperlink{namespace_i_r_aa1afcba889279fa935b76ba278be7fd6a0fc3cfbc27e91ea60a787de13dae3e3c}{num}}\ =\ ++peer\_requested-\/>last;}
\DoxyCodeLine{01288\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(num\ ==\ peer\_requested-\/>end\_block)\ \{}
\DoxyCodeLine{01289\ \ \ \ \ \ \ \ \ \ peer\_requested.reset();}
\DoxyCodeLine{01290\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a051c62a0ec99dcd3e7a38fd03bec1fe0}{peer\_dlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}completing\ enqueue\_sync\_block\ \$\{num\}"{}},\ (\textcolor{stringliteral}{"{}num"{}},\ num)\ );}
\DoxyCodeLine{01291\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01292\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_a6a48b685d0bf226f8d96c5cbbd648945}{connection\_wptr}}\ weak\ =\ shared\_from\_this();}
\DoxyCodeLine{01293\ \ \ \ \ \ \ \mbox{\hyperlink{namespaceappbase_a99374dc23934f008a09f2f79be9eae40}{app}}().\mbox{\hyperlink{classappbase_1_1application_a77aff91b861010fd61a616c59b310dcc}{post}}(\ \mbox{\hyperlink{structappbase_1_1priority_a89fc0f21b0f87574f0299932fc1724b4}{priority::medium}},\ [num,\ weak\{std::move(weak)\}]()\ \{}
\DoxyCodeLine{01294\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{debug__client_8cpp_ae9c9779aea742ab80689add7e553df0d}{connection\_ptr}}\ c\ =\ weak.lock();}
\DoxyCodeLine{01295\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !c\ )\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01296\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1controller}{controller}}\&\ cc\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a932907eaa912c9420b96ea45103b66b8}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a14a5e77b31ecf267c8062267d03440ae}{chain}}();}
\DoxyCodeLine{01297\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_1_1chain_aa10ee348c57604b615bc8570f6685102}{signed\_block\_ptr}}\ sb;}
\DoxyCodeLine{01298\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{01299\ \ \ \ \ \ \ \ \ \ \ \ \ sb\ =\ cc.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a1379e43325b7e517a058bddce15571eb}{fetch\_block\_by\_number}}(\ num\ );}
\DoxyCodeLine{01300\ \ \ \ \ \ \ \ \ \ \}\ \mbox{\hyperlink{exception_8hpp_aed56aa2593b6f6fc6a839b7cb5c6e8e3}{FC\_LOG\_AND\_DROP}}();}
\DoxyCodeLine{01301\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ sb\ )\ \{}
\DoxyCodeLine{01302\ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>strand.post(\ [c,\ sb\{std::move(sb)\}]()\ \{}
\DoxyCodeLine{01303\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>enqueue\_block(\ sb,\ \textcolor{keyword}{true}\ );}
\DoxyCodeLine{01304\ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{01305\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01306\ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>strand.post(\ [c,\ num]()\ \{}
\DoxyCodeLine{01307\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_ad909b2ce03eb19202983c88ae2abe9bd}{peer\_ilog}}(\ c,\ \textcolor{stringliteral}{"{}enqueue\ sync,\ unable\ to\ fetch\ block\ \$\{num\},\ sending\ benign\_other\ go\ away"{}},\ (\textcolor{stringliteral}{"{}num"{}},\ num)\ );}
\DoxyCodeLine{01308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>peer\_requested.reset();\ \textcolor{comment}{//\ unable\ to\ provide\ requested\ blocks}}
\DoxyCodeLine{01309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>no\_retry\ =\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fafd1331a94b3ecffdc5fcfdcd3d03687c}{benign\_other}};}
\DoxyCodeLine{01310\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>enqueue(\ go\_away\_message(\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fafd1331a94b3ecffdc5fcfdcd3d03687c}{benign\_other}}\ )\ );}
\DoxyCodeLine{01311\ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{01312\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01313\ \ \ \ \ \ \ \});}
\DoxyCodeLine{01314\ }
\DoxyCodeLine{01315\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01316\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_a099523d62bc60e4a13deda1fe15845ad_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=336pt]{classsysio_1_1connection_a099523d62bc60e4a13deda1fe15845ad_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_adde007266cc5383dab51c24d67d541f5}\index{sysio::connection@{sysio::connection}!fetch\_timeout@{fetch\_timeout}}
\index{fetch\_timeout@{fetch\_timeout}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{fetch\_timeout()}{fetch\_timeout()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_adde007266cc5383dab51c24d67d541f5} 
void sysio\+::connection\+::fetch\+\_\+timeout (\begin{DoxyParamCaption}\item[{boost\+::system\+::error\+\_\+code}]{ec}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l01495}{1495}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01495\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01496\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !ec\ )\ \{}
\DoxyCodeLine{01497\ \ \ \ \ \ \ \ \ \ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a5b302f8ed2594b44aa126082cd07d941}{dispatcher}}-\/>retry\_fetch(\ shared\_from\_this()\ );}
\DoxyCodeLine{01498\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\ ec\ !=\ boost::asio::error::operation\_aborted\ )\ \{\ \textcolor{comment}{//\ don't\ log\ on\ operation\_aborted,\ called\ on\ destroy}}
\DoxyCodeLine{01499\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}setting\ timer\ for\ fetch\ request\ got\ error\ \$\{ec\}"{}},\ (\textcolor{stringliteral}{"{}ec"{}},\ ec.message()\ )\ );}
\DoxyCodeLine{01500\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01501\ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsysio_1_1connection_a58095c1fbfc10594cbb531df695da740}\index{sysio::connection@{sysio::connection}!fetch\_wait@{fetch\_wait}}
\index{fetch\_wait@{fetch\_wait}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{fetch\_wait()}{fetch\_wait()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a58095c1fbfc10594cbb531df695da740} 
void sysio\+::connection\+::fetch\+\_\+wait (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l01474}{1474}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01474\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01475\ \ \ \ \ \ \ \mbox{\hyperlink{debug__client_8cpp_ae9c9779aea742ab80689add7e553df0d}{connection\_ptr}}\ c(\ shared\_from\_this()\ );}
\DoxyCodeLine{01476\ \ \ \ \ \ \ std::lock\_guard<std::mutex>\ g(\ \mbox{\hyperlink{classsysio_1_1connection_a70c7d2d3ab6b30deeaf88b98925623c2}{response\_expected\_timer\_mtx}}\ );}
\DoxyCodeLine{01477\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a237374fa72d9b4b4e56f6f9a685bed1a}{response\_expected\_timer}}.expires\_from\_now(\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a889da348e86c742b7551deac74b592aa}{resp\_expected\_period}}\ );}
\DoxyCodeLine{01478\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a237374fa72d9b4b4e56f6f9a685bed1a}{response\_expected\_timer}}.async\_wait(}
\DoxyCodeLine{01479\ \ \ \ \ \ \ \ \ \ \ \ \ boost::asio::bind\_executor(\ c-\/>strand,\ [c](\ boost::system::error\_code\ ec\ )\ \{}
\DoxyCodeLine{01480\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>fetch\_timeout(ec);}
\DoxyCodeLine{01481\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ )\ );}
\DoxyCodeLine{01482\ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsysio_1_1connection_a51ccfb43cb79f666e6548ffeb9f205f2}\index{sysio::connection@{sysio::connection}!flush\_queues@{flush\_queues}}
\index{flush\_queues@{flush\_queues}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{flush\_queues()}{flush\_queues()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a51ccfb43cb79f666e6548ffeb9f205f2} 
void sysio\+::connection\+::flush\+\_\+queues (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00981}{981}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00981\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00982\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a8386b853edf1cbab18a09b8123cc525c}{buffer\_queue}}.\mbox{\hyperlink{classsysio_1_1queued__buffer_ad5cee9e3bed9ece107058fc422298e6e}{clear\_write\_queue}}();}
\DoxyCodeLine{00983\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=321pt]{classsysio_1_1connection_a51ccfb43cb79f666e6548ffeb9f205f2_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=313pt]{classsysio_1_1connection_a51ccfb43cb79f666e6548ffeb9f205f2_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a48cd1f7c86fbfa7801324ea18b9a8ae6}\index{sysio::connection@{sysio::connection}!get\_logger\_variant@{get\_logger\_variant}}
\index{get\_logger\_variant@{get\_logger\_variant}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{get\_logger\_variant()}{get\_logger\_variant()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a48cd1f7c86fbfa7801324ea18b9a8ae6} 
\mbox{\hyperlink{classfc_1_1variant__object}{fc\+::variant\+\_\+object}} sysio\+::connection\+::get\+\_\+logger\+\_\+variant (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00790}{790}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00790\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00791\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1mutable__variant__object}{fc::mutable\_variant\_object}}\ mvo;}
\DoxyCodeLine{00792\ \ \ \ \ \ \ \ \ \ mvo(\ \textcolor{stringliteral}{"{}\_name"{}},\ \mbox{\hyperlink{classsysio_1_1connection_aaeb74503530f57f9cc88f8a33bdb2980}{log\_p2p\_address}})}
\DoxyCodeLine{00793\ \ \ \ \ \ \ \ \ \ \ \ \ (\ \textcolor{stringliteral}{"{}\_cid"{}},\ \mbox{\hyperlink{classsysio_1_1connection_a1eb3bd460e47bead479e1b6f7eb58df4}{connection\_id}}\ )}
\DoxyCodeLine{00794\ \ \ \ \ \ \ \ \ \ \ \ \ (\ \textcolor{stringliteral}{"{}\_id"{}},\ \mbox{\hyperlink{classsysio_1_1connection_a5876262162c34ec954ada46f15fe9992}{conn\_node\_id}}\ )}
\DoxyCodeLine{00795\ \ \ \ \ \ \ \ \ \ \ \ \ (\ \textcolor{stringliteral}{"{}\_sid"{}},\ \mbox{\hyperlink{classsysio_1_1connection_a855625cd0312ce982b74ddc4e5a753ff}{short\_conn\_node\_id}}\ )}
\DoxyCodeLine{00796\ \ \ \ \ \ \ \ \ \ \ \ \ (\ \textcolor{stringliteral}{"{}\_ip"{}},\ \mbox{\hyperlink{classsysio_1_1connection_ac0e50a9bca0cca0c77ce7d1763832714}{log\_remote\_endpoint\_ip}}\ )}
\DoxyCodeLine{00797\ \ \ \ \ \ \ \ \ \ \ \ \ (\ \textcolor{stringliteral}{"{}\_port"{}},\ \mbox{\hyperlink{classsysio_1_1connection_a9d6df697090f0105fbcd82ee97f65712}{log\_remote\_endpoint\_port}}\ )}
\DoxyCodeLine{00798\ \ \ \ \ \ \ \ \ \ \ \ \ (\ \textcolor{stringliteral}{"{}\_lip"{}},\ \mbox{\hyperlink{classsysio_1_1connection_abaffefd3dd270392c59a876c12f86bf2}{local\_endpoint\_ip}}\ )}
\DoxyCodeLine{00799\ \ \ \ \ \ \ \ \ \ \ \ \ (\ \textcolor{stringliteral}{"{}\_lport"{}},\ \mbox{\hyperlink{classsysio_1_1connection_af46386111a6f93fe2ce3a9029677dca4}{local\_endpoint\_port}}\ );}
\DoxyCodeLine{00800\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ mvo;}
\DoxyCodeLine{00801\ \ \ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsysio_1_1connection_a0a7d761d1d284b8cbbeeb74d20615d6d}\index{sysio::connection@{sysio::connection}!get\_status@{get\_status}}
\index{get\_status@{get\_status}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{get\_status()}{get\_status()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a0a7d761d1d284b8cbbeeb74d20615d6d} 
\mbox{\hyperlink{structsysio_1_1connection__status}{connection\+\_\+status}} sysio\+::connection\+::get\+\_\+status (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00943}{943}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00943\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00944\ \ \ \ \ \ \ connection\_status\ stat;}
\DoxyCodeLine{00945\ \ \ \ \ \ \ stat.peer\ =\ peer\_addr;}
\DoxyCodeLine{00946\ \ \ \ \ \ \ stat.connecting\ =\ \mbox{\hyperlink{classsysio_1_1connection_a2cb1b55074b31325f9845700fd7ede82}{connecting}};}
\DoxyCodeLine{00947\ \ \ \ \ \ \ stat.syncing\ =\ \mbox{\hyperlink{classsysio_1_1connection_ab77357d0ed0b422c2d6a15065d818ff6}{syncing}};}
\DoxyCodeLine{00948\ \ \ \ \ \ \ std::lock\_guard<std::mutex>\ g(\ \mbox{\hyperlink{classsysio_1_1connection_a675e5b04f968aa689c49d511c601fffa}{conn\_mtx}}\ );}
\DoxyCodeLine{00949\ \ \ \ \ \ \ stat.last\_handshake\ =\ \mbox{\hyperlink{classsysio_1_1connection_a158c59b44186c7757311f14f71818ec8}{last\_handshake\_recv}};}
\DoxyCodeLine{00950\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ stat;}
\DoxyCodeLine{00951\ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsysio_1_1connection_aa74b147947e087bc084d72a3d892a06f}\index{sysio::connection@{sysio::connection}!get\_time@{get\_time}}
\index{get\_time@{get\_time}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{get\_time()}{get\_time()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_aa74b147947e087bc084d72a3d892a06f} 
static \mbox{\hyperlink{namespacesysio_a42c15380188aaacda97b061d7c538d13}{tstamp}} sysio\+::connection\+::get\+\_\+time (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}

There are only two calls on this routine in the program. One when a packet arrives from the network and the other when a packet is placed on the send queue. Calls the kernel time of day routine and converts to a (at least) 64 bit integer. 

Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00729}{729}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00729\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00730\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::chrono::system\_clock::now().time\_since\_epoch().count();}
\DoxyCodeLine{00731\ \ \ \ \ \ \ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_aa74b147947e087bc084d72a3d892a06f_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_aca549a337da8361f2208ba79d156555c}\index{sysio::connection@{sysio::connection}!handle\_message@{handle\_message}}
\index{handle\_message@{handle\_message}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{handle\_message()}{handle\_message()}\hspace{0.1cm}{\footnotesize\ttfamily [1/11]}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_aca549a337da8361f2208ba79d156555c} 
void sysio\+::connection\+::handle\+\_\+message (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_a4b8e4b7ed9dcd18ee75d0de62e88aa17}{block\+\_\+id\+\_\+type}} \&}]{id}{, }\item[{\mbox{\hyperlink{namespacesysio_1_1chain_aa10ee348c57604b615bc8570f6685102}{signed\+\_\+block\+\_\+ptr}}}]{msg}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l03136}{3136}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{03136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03137\ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a051c62a0ec99dcd3e7a38fd03bec1fe0}{peer\_dlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}received\ signed\_block\ \$\{num\},\ id\ \$\{id\}"{}},\ (\textcolor{stringliteral}{"{}num"{}},\ ptr-\/>block\_num())(\textcolor{stringliteral}{"{}id"{}},\ \textcolor{keywordtype}{id})\ );}
\DoxyCodeLine{03138\ }
\DoxyCodeLine{03139\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1controller}{controller}}\&\ cc\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a932907eaa912c9420b96ea45103b66b8}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a14a5e77b31ecf267c8062267d03440ae}{chain}}();}
\DoxyCodeLine{03140\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_1_1chain_ab9b14f4554cc4a0da2c361e9757b1662}{block\_state\_ptr}}\ bsp;}
\DoxyCodeLine{03141\ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classfc_1_1exception}{exception}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{03142\ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{03143\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ cc.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_acd214861da435dc956d30c81de7c50ff}{fetch\_block\_state\_by\_id}}(\ \textcolor{keywordtype}{id}\ )\ )\ \{}
\DoxyCodeLine{03144\ \ \ \ \ \ \ \ \ \ \ \ \ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a5b302f8ed2594b44aa126082cd07d941}{dispatcher}}-\/>add\_peer\_block(\ \textcolor{keywordtype}{id},\ \mbox{\hyperlink{classsysio_1_1connection_a1eb3bd460e47bead479e1b6f7eb58df4}{connection\_id}}\ );}
\DoxyCodeLine{03145\ \ \ \ \ \ \ \ \ \ \ \ \ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a1ec38b54825da7f4f2ba7901d6318fd7}{sync\_master}}-\/>sync\_recv\_block(\ shared\_from\_this(),\ \textcolor{keywordtype}{id},\ ptr-\/>block\_num(),\ \textcolor{keyword}{false}\ );}
\DoxyCodeLine{03146\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{03147\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03148\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this\ may\ return\ null\ if\ block\ is\ not\ immediately\ ready\ to\ be\ processed}}
\DoxyCodeLine{03149\ \ \ \ \ \ \ \ \ \ bsp\ =\ cc.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a31dc2787a93d98c0c591d7432aea569a}{create\_block\_state}}(\ \textcolor{keywordtype}{id},\ ptr\ );}
\DoxyCodeLine{03150\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classfc_1_1exception}{fc::exception}}\&\ ex\ )\ \{}
\DoxyCodeLine{03151\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1exception}{exception}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{03152\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}bad\ block\ exception:\ \#\$\{n\}\ \$\{id\}...:\ \$\{m\}"{}},}
\DoxyCodeLine{03153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}n"{}},\ ptr-\/>block\_num())(\textcolor{stringliteral}{"{}id"{}},\ \textcolor{keywordtype}{id}.str().substr(8,16))(\textcolor{stringliteral}{"{}m"{}},ex.\mbox{\hyperlink{classfc_1_1exception_adbc4557b14bc29b74e9cf9f0ed5fb8d8}{to\_string}}()));}
\DoxyCodeLine{03154\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ ...\ )\ \{}
\DoxyCodeLine{03155\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1exception}{exception}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{03156\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}bad\ block:\ \#\$\{n\}\ \$\{id\}...:\ unknown\ exception"{}},}
\DoxyCodeLine{03157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}n"{}},\ ptr-\/>block\_num())(\textcolor{stringliteral}{"{}id"{}},\ \textcolor{keywordtype}{id}.str().substr(8,16)));}
\DoxyCodeLine{03158\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03159\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classfc_1_1exception}{exception}}\ )\ \{}
\DoxyCodeLine{03160\ \ \ \ \ \ \ \ \ \ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a1ec38b54825da7f4f2ba7901d6318fd7}{sync\_master}}-\/>rejected\_block(\ shared\_from\_this(),\ ptr-\/>block\_num()\ );}
\DoxyCodeLine{03161\ \ \ \ \ \ \ \ \ \ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a5b302f8ed2594b44aa126082cd07d941}{dispatcher}}-\/>rejected\_block(\ \textcolor{keywordtype}{id}\ );}
\DoxyCodeLine{03162\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{03163\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03164\ }
\DoxyCodeLine{03165\ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ signal\_producer\ =\ !!bsp;\ \textcolor{comment}{//\ ready\ to\ process\ immediately,\ so\ signal\ producer\ to\ interrupt\ start\_block}}
\DoxyCodeLine{03166\ \ \ \ \ \ \ \mbox{\hyperlink{namespaceappbase_a99374dc23934f008a09f2f79be9eae40}{app}}().\mbox{\hyperlink{classappbase_1_1application_a77aff91b861010fd61a616c59b310dcc}{post}}(\mbox{\hyperlink{structappbase_1_1priority_a89fc0f21b0f87574f0299932fc1724b4}{priority::medium}},\ [ptr\{std::move(ptr)\},\ bsp\{std::move(bsp)\},\ \mbox{\hyperlink{code__cache_8cpp_aa0efefe21f4700d78692edc823e763be}{id}},\ c\ =\ shared\_from\_this()]()\ \textcolor{keyword}{mutable}\ \{}
\DoxyCodeLine{03167\ \ \ \ \ \ \ \ \ \ c-\/>process\_signed\_block(\ \textcolor{keywordtype}{id},\ std::move(ptr),\ std::move(bsp)\ );}
\DoxyCodeLine{03168\ \ \ \ \ \ \ \});}
\DoxyCodeLine{03169\ }
\DoxyCodeLine{03170\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ signal\_producer\ )}
\DoxyCodeLine{03171\ \ \ \ \ \ \ \ \ \ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a7a336e3a6c55a53fd662e23ef16276bf}{producer\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1producer__plugin_ae697c5d94a3c6d02dab4a159ec9a30cb}{received\_block}}();}
\DoxyCodeLine{03172\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_aca549a337da8361f2208ba79d156555c_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a86eaa1ae6ad496f117a4b6285a5ea960}\index{sysio::connection@{sysio::connection}!handle\_message@{handle\_message}}
\index{handle\_message@{handle\_message}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{handle\_message()}{handle\_message()}\hspace{0.1cm}{\footnotesize\ttfamily [2/11]}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a86eaa1ae6ad496f117a4b6285a5ea960} 
void sysio\+::connection\+::handle\+\_\+message (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structsysio_1_1chain__size__message}{chain\+\_\+size\+\_\+message}} \&}]{msg}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l02759}{2759}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02759\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02760\ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a051c62a0ec99dcd3e7a38fd03bec1fe0}{peer\_dlog}}(\textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}received\ chain\_size\_message"{}});}
\DoxyCodeLine{02761\ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsysio_1_1connection_ace5604a0cfadaf357cee46c842a9a54e}\index{sysio::connection@{sysio::connection}!handle\_message@{handle\_message}}
\index{handle\_message@{handle\_message}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{handle\_message()}{handle\_message()}\hspace{0.1cm}{\footnotesize\ttfamily [3/11]}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_ace5604a0cfadaf357cee46c842a9a54e} 
void sysio\+::connection\+::handle\+\_\+message (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structsysio_1_1go__away__message}{go\+\_\+away\+\_\+message}} \&}]{msg}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l02922}{2922}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02922\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02923\ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_af53787454493a30650fdab0193037465}{peer\_wlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}received\ go\_away\_message,\ reason\ =\ \$\{r\}"{}},\ (\textcolor{stringliteral}{"{}r"{}},\ \mbox{\hyperlink{namespacesysio_a9d60317a4b83cb3c91674336886005ee}{reason\_str}}(\ msg.reason\ ))\ );}
\DoxyCodeLine{02924\ }
\DoxyCodeLine{02925\ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ retry\ =\ \mbox{\hyperlink{classsysio_1_1connection_a6b2649c5a44369243b03ddc3a5ee3695}{no\_retry}}\ ==\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa35a3ee195246082e99a69c2636252839}{no\_reason}};\ \textcolor{comment}{//\ if\ no\ previous\ go\ away\ message}}
\DoxyCodeLine{02926\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a6b2649c5a44369243b03ddc3a5ee3695}{no\_retry}}\ =\ msg.reason;}
\DoxyCodeLine{02927\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ msg.reason\ ==\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa0e69706b2240fb348d4933bc1fe7e883}{duplicate}}\ )\ \{}
\DoxyCodeLine{02928\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a5876262162c34ec954ada46f15fe9992}{conn\_node\_id}}\ =\ msg.node\_id;}
\DoxyCodeLine{02929\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02930\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ msg.reason\ ==\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa756f81d28cc81faaeb96abc5172a3e5c}{wrong\_version}}\ )\ \{}
\DoxyCodeLine{02931\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !retry\ )\ \mbox{\hyperlink{classsysio_1_1connection_a6b2649c5a44369243b03ddc3a5ee3695}{no\_retry}}\ =\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa834d6ee2ad87c888db23aa35bfe5a7eb}{fatal\_other}};\ \textcolor{comment}{//\ only\ retry\ once\ on\ wrong\ version}}
\DoxyCodeLine{02932\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02933\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ msg.reason\ ==\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fafd1331a94b3ecffdc5fcfdcd3d03687c}{benign\_other}}\ )\ \{}
\DoxyCodeLine{02934\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ retry\ )\ \mbox{\hyperlink{net__plugin_8cpp_a051c62a0ec99dcd3e7a38fd03bec1fe0}{peer\_dlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}received\ benign\_other\ reason,\ retrying\ to\ connect"{}});}
\DoxyCodeLine{02935\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02936\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02937\ \ \ \ \ \ \ \ \ \ retry\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02938\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02939\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a51ccfb43cb79f666e6548ffeb9f205f2}{flush\_queues}}();}
\DoxyCodeLine{02940\ }
\DoxyCodeLine{02941\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a7fe7bb50b91bd69cdf56c7c09a868e29}{close}}(\ retry\ );\ \textcolor{comment}{//\ reconnect\ if\ wrong\_version}}
\DoxyCodeLine{02942\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_ace5604a0cfadaf357cee46c842a9a54e_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a6969d80878d60791744f4ace46f1b806}\index{sysio::connection@{sysio::connection}!handle\_message@{handle\_message}}
\index{handle\_message@{handle\_message}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{handle\_message()}{handle\_message()}\hspace{0.1cm}{\footnotesize\ttfamily [4/11]}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a6969d80878d60791744f4ace46f1b806} 
void sysio\+::connection\+::handle\+\_\+message (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structsysio_1_1handshake__message}{handshake\+\_\+message}} \&}]{msg}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l02763}{2763}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02763\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02764\ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a051c62a0ec99dcd3e7a38fd03bec1fe0}{peer\_dlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}received\ handshake\_message"{}}\ );}
\DoxyCodeLine{02765\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{classsysio_1_1connection_ac8f79d24686c4aad7bf12f3784970d98}{is\_valid}}(\ msg\ )\ )\ \{}
\DoxyCodeLine{02766\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}bad\ handshake\ message"{}});}
\DoxyCodeLine{02767\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a6b2649c5a44369243b03ddc3a5ee3695}{no\_retry}}\ =\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa834d6ee2ad87c888db23aa35bfe5a7eb}{go\_away\_reason::fatal\_other}};}
\DoxyCodeLine{02768\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_ad6a1bcdfc4bd9d2c7ab2278240def6b6}{enqueue}}(\ go\_away\_message(\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa834d6ee2ad87c888db23aa35bfe5a7eb}{fatal\_other}}\ )\ );}
\DoxyCodeLine{02769\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02770\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02771\ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a051c62a0ec99dcd3e7a38fd03bec1fe0}{peer\_dlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}received\ handshake\ gen\ \$\{g\},\ lib\ \$\{lib\},\ head\ \$\{head\}"{}},}
\DoxyCodeLine{02772\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}g"{}},\ msg.generation)(\textcolor{stringliteral}{"{}lib"{}},\ msg.last\_irreversible\_block\_num)(\textcolor{stringliteral}{"{}head"{}},\ msg.head\_num)\ );}
\DoxyCodeLine{02773\ }
\DoxyCodeLine{02774\ \ \ \ \ \ \ std::unique\_lock<std::mutex>\ g\_conn(\ \mbox{\hyperlink{classsysio_1_1connection_a675e5b04f968aa689c49d511c601fffa}{conn\_mtx}}\ );}
\DoxyCodeLine{02775\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a158c59b44186c7757311f14f71818ec8}{last\_handshake\_recv}}\ =\ msg;}
\DoxyCodeLine{02776\ \ \ \ \ \ \ g\_conn.unlock();}
\DoxyCodeLine{02777\ }
\DoxyCodeLine{02778\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a2cb1b55074b31325f9845700fd7ede82}{connecting}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02779\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (msg.generation\ ==\ 1)\ \{}
\DoxyCodeLine{02780\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ msg.node\_id\ ==\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a34b87d3870bcb637f7e8c2b5a0f40956}{node\_id}})\ \{}
\DoxyCodeLine{02781\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}Self\ connection\ detected\ node\_id\ \$\{id\}.\ Closing\ connection"{}},\ (\textcolor{stringliteral}{"{}id"{}},\ msg.node\_id)\ );}
\DoxyCodeLine{02782\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a6b2649c5a44369243b03ddc3a5ee3695}{no\_retry}}\ =\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a}{go\_away\_reason::self}};}
\DoxyCodeLine{02783\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_ad6a1bcdfc4bd9d2c7ab2278240def6b6}{enqueue}}(\ go\_away\_message(\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a}{go\_away\_reason::self}}\ )\ );}
\DoxyCodeLine{02784\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02785\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02786\ }
\DoxyCodeLine{02787\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_aaeb74503530f57f9cc88f8a33bdb2980}{log\_p2p\_address}}\ =\ msg.p2p\_address;}
\DoxyCodeLine{02788\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1connection_aca3e3acacf8047c389e0bda758da197d}{peer\_address}}().empty()\ )\ \{}
\DoxyCodeLine{02789\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a1e59aa67f74b1e5bb0a2d8e7db584cdd}{set\_connection\_type}}(\ msg.p2p\_address\ );}
\DoxyCodeLine{02790\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02791\ }
\DoxyCodeLine{02792\ \ \ \ \ \ \ \ \ \ std::unique\_lock<std::mutex>\ g\_conn(\ \mbox{\hyperlink{classsysio_1_1connection_a675e5b04f968aa689c49d511c601fffa}{conn\_mtx}}\ );}
\DoxyCodeLine{02793\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1connection_aca3e3acacf8047c389e0bda758da197d}{peer\_address}}().empty()\ ||\ \mbox{\hyperlink{classsysio_1_1connection_a158c59b44186c7757311f14f71818ec8}{last\_handshake\_recv}}.\mbox{\hyperlink{structsysio_1_1handshake__message_a7f8190c5079ab1745b344ffc43d4cad3}{node\_id}}\ ==\ \mbox{\hyperlink{classfc_1_1sha256}{fc::sha256}}())\ \{}
\DoxyCodeLine{02794\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ c\_time\ =\ \mbox{\hyperlink{classsysio_1_1connection_ab3d0dbb3bb254cbea92508af42dfe75b}{last\_handshake\_sent}}.\mbox{\hyperlink{structsysio_1_1handshake__message_ad620c6e5ccdc5205e285934b9b8c15f3}{time}};}
\DoxyCodeLine{02795\ \ \ \ \ \ \ \ \ \ \ \ \ g\_conn.unlock();}
\DoxyCodeLine{02796\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a051c62a0ec99dcd3e7a38fd03bec1fe0}{peer\_dlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}checking\ for\ duplicate"{}}\ );}
\DoxyCodeLine{02797\ \ \ \ \ \ \ \ \ \ \ \ \ std::shared\_lock<std::shared\_mutex>\ g\_cnts(\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a7dbd010078ad6742db516aa60b60397f}{connections\_mtx}}\ );}
\DoxyCodeLine{02798\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ check\ :\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_aecea483506e35c049eb68961784f9d25}{connections}})\ \{}
\DoxyCodeLine{02799\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(check.get()\ ==\ \textcolor{keyword}{this})}
\DoxyCodeLine{02800\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02801\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::unique\_lock<std::mutex>\ g\_check\_conn(\ check-\/>conn\_mtx\ );}
\DoxyCodeLine{02802\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}dup\ check:\ connected\ \$\{c\},\ \$\{l\}\ =?\ \$\{r\}"{}},}
\DoxyCodeLine{02803\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}c"{}},\ check-\/>connected())(\textcolor{stringliteral}{"{}l"{}},\ check-\/>last\_handshake\_recv.node\_id)(\textcolor{stringliteral}{"{}r"{}},\ msg.node\_id)\ );}
\DoxyCodeLine{02804\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(check-\/>connected()\ \&\&\ check-\/>last\_handshake\_recv.node\_id\ ==\ msg.node\_id)\ \{}
\DoxyCodeLine{02805\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsysio_1_1connection_aa7543fc95097fd14c4d8f66173af561a}{net\_version}}\ <\ \mbox{\hyperlink{namespacesysio_a2320831a5974b3edbe0aca875c583156}{proto\_dup\_goaway\_resolution}}\ ||\ msg.network\_version\ <\ \mbox{\hyperlink{namespacesysio_a2320831a5974b3edbe0aca875c583156}{proto\_dup\_goaway\_resolution}})\ \{}
\DoxyCodeLine{02806\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ It's\ possible\ that\ both\ peers\ could\ arrive\ here\ at\ relatively\ the\ same\ time,\ so}}
\DoxyCodeLine{02807\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ need\ to\ avoid\ the\ case\ where\ they\ would\ both\ tell\ a\ different\ connection\ to\ go\ away.}}
\DoxyCodeLine{02808\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Using\ the\ sum\ of\ the\ initial\ handshake\ times\ of\ the\ two\ connections,\ we\ will}}
\DoxyCodeLine{02809\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ arbitrarily\ (but\ consistently\ between\ the\ two\ peers)\ keep\ one\ of\ them.}}
\DoxyCodeLine{02810\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{02811\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ check\_time\ =\ check-\/>last\_handshake\_sent.time\ +\ check-\/>last\_handshake\_recv.time;}
\DoxyCodeLine{02812\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ g\_check\_conn.unlock();}
\DoxyCodeLine{02813\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (msg.time\ +\ c\_time\ <=\ check\_time)}
\DoxyCodeLine{02814\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02815\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classsysio_1_1connection_aa7543fc95097fd14c4d8f66173af561a}{net\_version}}\ <\ \mbox{\hyperlink{namespacesysio_ae452afac6c86798086b2c3f4fbbc16a0}{proto\_dup\_node\_id\_goaway}}\ ||\ msg.network\_version\ <\ \mbox{\hyperlink{namespacesysio_ae452afac6c86798086b2c3f4fbbc16a0}{proto\_dup\_node\_id\_goaway}})\ \{}
\DoxyCodeLine{02816\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_ad0038d5b0dc359bdd3eab428e20efa3c}{p2p\_address}}\ <\ msg.p2p\_address)\ \{}
\DoxyCodeLine{02817\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}my\_impl-\/>p2p\_address\ '\$\{lhs\}'\ <\ msg.p2p\_address\ '\$\{rhs\}'"{}},}
\DoxyCodeLine{02818\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}lhs"{}},\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_ad0038d5b0dc359bdd3eab428e20efa3c}{p2p\_address}})(\ \textcolor{stringliteral}{"{}rhs"{}},\ msg.p2p\_address\ )\ );}
\DoxyCodeLine{02819\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ only\ the\ connection\ from\ lower\ p2p\_address\ to\ higher\ p2p\_address\ will\ be\ considered\ as\ a\ duplicate,}}
\DoxyCodeLine{02820\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ so\ there\ is\ no\ chance\ for\ both\ connections\ to\ be\ closed}}
\DoxyCodeLine{02821\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02822\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02823\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a34b87d3870bcb637f7e8c2b5a0f40956}{node\_id}}\ <\ msg.node\_id)\ \{}
\DoxyCodeLine{02824\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}not\ duplicate,\ my\_impl-\/>node\_id\ '\$\{lhs\}'\ <\ msg.node\_id\ '\$\{rhs\}'"{}},}
\DoxyCodeLine{02825\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}lhs"{}},\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a34b87d3870bcb637f7e8c2b5a0f40956}{node\_id}})(\textcolor{stringliteral}{"{}rhs"{}},\ msg.node\_id)\ );}
\DoxyCodeLine{02826\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ only\ the\ connection\ from\ lower\ node\_id\ to\ higher\ node\_id\ will\ be\ considered\ as\ a\ duplicate,}}
\DoxyCodeLine{02827\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ so\ there\ is\ no\ chance\ for\ both\ connections\ to\ be\ closed}}
\DoxyCodeLine{02828\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};\ }
\DoxyCodeLine{02829\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02830\ }
\DoxyCodeLine{02831\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ g\_cnts.unlock();}
\DoxyCodeLine{02832\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a051c62a0ec99dcd3e7a38fd03bec1fe0}{peer\_dlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}sending\ go\_away\ duplicate,\ msg.p2p\_address:\ \$\{add\}"{}},\ (\textcolor{stringliteral}{"{}add"{}},\ msg.p2p\_address)\ );}
\DoxyCodeLine{02833\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ go\_away\_message\ gam(\mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa0e69706b2240fb348d4933bc1fe7e883}{duplicate}});}
\DoxyCodeLine{02834\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ gam.node\_id\ =\ \mbox{\hyperlink{classsysio_1_1connection_a5876262162c34ec954ada46f15fe9992}{conn\_node\_id}};}
\DoxyCodeLine{02835\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_ad6a1bcdfc4bd9d2c7ab2278240def6b6}{enqueue}}(gam);}
\DoxyCodeLine{02836\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a6b2649c5a44369243b03ddc3a5ee3695}{no\_retry}}\ =\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa0e69706b2240fb348d4933bc1fe7e883}{duplicate}};}
\DoxyCodeLine{02837\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02838\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02839\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02840\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02841\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a051c62a0ec99dcd3e7a38fd03bec1fe0}{peer\_dlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}skipping\ duplicate\ check,\ addr\ ==\ \$\{pa\},\ id\ =\ \$\{ni\}"{}},}
\DoxyCodeLine{02842\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}pa"{}},\ \mbox{\hyperlink{classsysio_1_1connection_aca3e3acacf8047c389e0bda758da197d}{peer\_address}}())(\ \textcolor{stringliteral}{"{}ni"{}},\ \mbox{\hyperlink{classsysio_1_1connection_a158c59b44186c7757311f14f71818ec8}{last\_handshake\_recv}}.\mbox{\hyperlink{structsysio_1_1handshake__message_a7f8190c5079ab1745b344ffc43d4cad3}{node\_id}}\ )\ );}
\DoxyCodeLine{02843\ \ \ \ \ \ \ \ \ \ \ \ \ g\_conn.unlock();}
\DoxyCodeLine{02844\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02845\ }
\DoxyCodeLine{02846\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ msg.chain\_id\ !=\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a37adff467a5dc9da8cfbcd1d0f2a5080}{chain\_id}}\ )\ \{}
\DoxyCodeLine{02847\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}Peer\ on\ a\ different\ chain.\ Closing\ connection"{}}\ );}
\DoxyCodeLine{02848\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a6b2649c5a44369243b03ddc3a5ee3695}{no\_retry}}\ =\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa6beb3e193600b115b972b9e8a811ee91}{go\_away\_reason::wrong\_chain}};}
\DoxyCodeLine{02849\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_ad6a1bcdfc4bd9d2c7ab2278240def6b6}{enqueue}}(\ go\_away\_message(\mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa6beb3e193600b115b972b9e8a811ee91}{go\_away\_reason::wrong\_chain}})\ );}
\DoxyCodeLine{02850\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02851\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02852\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_ad20dc31a68afa8406a64e6e69ecebb02}{protocol\_version}}\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_addc568c6264c34f8cf32f4c7518efc25}{to\_protocol\_version}}(msg.network\_version);}
\DoxyCodeLine{02853\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1connection_ad20dc31a68afa8406a64e6e69ecebb02}{protocol\_version}}\ !=\ \mbox{\hyperlink{classsysio_1_1connection_aa7543fc95097fd14c4d8f66173af561a}{net\_version}}\ )\ \{}
\DoxyCodeLine{02854\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_ad909b2ce03eb19202983c88ae2abe9bd}{peer\_ilog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}Local\ network\ version\ different:\ \$\{nv\}\ Remote\ version:\ \$\{mnv\}"{}},}
\DoxyCodeLine{02855\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}nv"{}},\ \mbox{\hyperlink{classsysio_1_1connection_aa7543fc95097fd14c4d8f66173af561a}{net\_version}})(\textcolor{stringliteral}{"{}mnv"{}},\ \mbox{\hyperlink{classsysio_1_1connection_ad20dc31a68afa8406a64e6e69ecebb02}{protocol\_version}}.load())\ );}
\DoxyCodeLine{02856\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02857\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_ad909b2ce03eb19202983c88ae2abe9bd}{peer\_ilog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}Local\ network\ version:\ \$\{nv\}"{}},\ (\textcolor{stringliteral}{"{}nv"{}},\ \mbox{\hyperlink{classsysio_1_1connection_aa7543fc95097fd14c4d8f66173af561a}{net\_version}})\ );}
\DoxyCodeLine{02858\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02859\ }
\DoxyCodeLine{02860\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a5876262162c34ec954ada46f15fe9992}{conn\_node\_id}}\ =\ msg.node\_id;}
\DoxyCodeLine{02861\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a855625cd0312ce982b74ddc4e5a753ff}{short\_conn\_node\_id}}\ =\ \mbox{\hyperlink{classsysio_1_1connection_a5876262162c34ec954ada46f15fe9992}{conn\_node\_id}}.\mbox{\hyperlink{classfc_1_1sha256_a71ac4efc1d964d24fdf00aeffcf0a9c9}{str}}().substr(\ 0,\ 7\ );}
\DoxyCodeLine{02862\ }
\DoxyCodeLine{02863\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a4b6d30c7436c1587f57cb19fd8b72d90}{authenticate\_peer}}(\ msg\ )\ )\ \{}
\DoxyCodeLine{02864\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}Peer\ not\ authenticated.\ \ Closing\ connection."{}}\ );}
\DoxyCodeLine{02865\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a6b2649c5a44369243b03ddc3a5ee3695}{no\_retry}}\ =\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fad2a37e2f8300c685976362d71bfe9de5}{go\_away\_reason::authentication}};}
\DoxyCodeLine{02866\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_ad6a1bcdfc4bd9d2c7ab2278240def6b6}{enqueue}}(\ go\_away\_message(\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fad2a37e2f8300c685976362d71bfe9de5}{go\_away\_reason::authentication}}\ )\ );}
\DoxyCodeLine{02867\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02868\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02869\ }
\DoxyCodeLine{02870\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ peer\_lib\ =\ msg.last\_irreversible\_block\_num;}
\DoxyCodeLine{02871\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_a6a48b685d0bf226f8d96c5cbbd648945}{connection\_wptr}}\ weak\ =\ shared\_from\_this();}
\DoxyCodeLine{02872\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceappbase_a99374dc23934f008a09f2f79be9eae40}{app}}().\mbox{\hyperlink{classappbase_1_1application_a77aff91b861010fd61a616c59b310dcc}{post}}(\ \mbox{\hyperlink{structappbase_1_1priority_a89fc0f21b0f87574f0299932fc1724b4}{priority::medium}},\ [peer\_lib,\ chain\_plug\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a932907eaa912c9420b96ea45103b66b8}{chain\_plug}},\ weak\{std::move(weak)\},}
\DoxyCodeLine{02873\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ msg\_lib\_id\ =\ msg.last\_irreversible\_block\_id]()\ \{}
\DoxyCodeLine{02874\ \ \ \ \ \ \ \ \ \ \ \ \ connection\_ptr\ c\ =\ weak.lock();}
\DoxyCodeLine{02875\ \ \ \ \ \ \ \ \ \ \ \ \ if(\ !c\ )\ return;}
\DoxyCodeLine{02876\ \ \ \ \ \ \ \ \ \ \ \ \ controller\&\ cc\ =\ chain\_plug-\/>chain();}
\DoxyCodeLine{02877\ \ \ \ \ \ \ \ \ \ \ \ \ uint32\_t\ lib\_num\ =\ cc.last\_irreversible\_block\_num();}
\DoxyCodeLine{02878\ }
\DoxyCodeLine{02879\ \ \ \ \ \ \ \ \ \ \ \ \ fc\_dlog(\ logger,\ \textcolor{stringliteral}{"{}handshake\ check\ for\ fork\ lib\_num\ =\ \$\{ln\},\ peer\_lib\ =\ \$\{pl\},\ connection\ \$\{cid\}"{}},}
\DoxyCodeLine{02880\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}ln"{}},\ lib\_num)(\textcolor{stringliteral}{"{}pl"{}},\ peer\_lib)(\textcolor{stringliteral}{"{}cid"{}},\ c-\/>connection\_id)\ );}
\DoxyCodeLine{02881\ }
\DoxyCodeLine{02882\ \ \ \ \ \ \ \ \ \ \ \ \ if(\ peer\_lib\ <=\ lib\_num\ \&\&\ peer\_lib\ >\ 0\ )\ \{}
\DoxyCodeLine{02883\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bool\ on\_fork\ =\ false;}
\DoxyCodeLine{02884\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ try\ \{}
\DoxyCodeLine{02885\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ block\_id\_type\ peer\_lib\_id\ =\ cc.get\_block\_id\_for\_num(\ peer\_lib\ );}
\DoxyCodeLine{02886\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ on\_fork\ =\ (msg\_lib\_id\ !=\ peer\_lib\_id);}
\DoxyCodeLine{02887\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ catch(\ const\ unknown\_block\_exception\&\ )\ \{}
\DoxyCodeLine{02888\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ allow\ this\ for\ now,\ will\ be\ checked\ on\ sync}}
\DoxyCodeLine{02889\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fc\_dlog(\ logger,\ \textcolor{stringliteral}{"{}peer\ last\ irreversible\ block\ \$\{pl\}\ is\ unknown,\ connection\ \$\{cid\}"{}},}
\DoxyCodeLine{02890\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}pl"{}},\ peer\_lib)(\textcolor{stringliteral}{"{}cid"{}},\ c-\/>connection\_id)\ );}
\DoxyCodeLine{02891\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ catch(\ ...\ )\ \{}
\DoxyCodeLine{02892\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fc\_wlog(\ logger,\ \textcolor{stringliteral}{"{}caught\ an\ exception\ getting\ block\ id\ for\ \$\{pl\},\ connection\ \$\{cid\}"{}},}
\DoxyCodeLine{02893\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}pl"{}},\ peer\_lib)(\textcolor{stringliteral}{"{}cid"{}},\ c-\/>connection\_id)\ );}
\DoxyCodeLine{02894\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ on\_fork\ =\ true;}
\DoxyCodeLine{02895\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02896\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if(\ on\_fork\ )\ \{}
\DoxyCodeLine{02897\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>strand.post(\ [c]()\ \{}
\DoxyCodeLine{02898\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ peer\_elog(\ c,\ \textcolor{stringliteral}{"{}Peer\ chain\ is\ forked,\ sending:\ forked\ go\ away"{}}\ );}
\DoxyCodeLine{02899\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>no\_retry\ =\ go\_away\_reason::forked;}
\DoxyCodeLine{02900\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>enqueue(\ go\_away\_message(\ go\_away\_reason::forked\ )\ );}
\DoxyCodeLine{02901\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ );}
\DoxyCodeLine{02902\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02903\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02904\ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{02905\ }
\DoxyCodeLine{02906\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ don't\ support\ the\ 2.1\ packed\_transaction\ \&\ signed\_block,\ so\ tell\ 2.1\ clients\ we\ are\ 2.0}}
\DoxyCodeLine{02907\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1connection_ad20dc31a68afa8406a64e6e69ecebb02}{protocol\_version}}\ >=\ \mbox{\hyperlink{namespacesysio_a68820bfe4ab6dbec0857c904974a3a7c}{proto\_pruned\_types}}\ \&\&\ \mbox{\hyperlink{classsysio_1_1connection_ad20dc31a68afa8406a64e6e69ecebb02}{protocol\_version}}\ <\ \mbox{\hyperlink{namespacesysio_a2ae0513ec4067dff1493f977f6c3cb39}{proto\_wire\_sysio\_initial}}\ )\ \{}
\DoxyCodeLine{02908\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a3b487d20a19e5f81f3024d276078d397}{sent\_handshake\_count}}\ =\ 0;}
\DoxyCodeLine{02909\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_aa7543fc95097fd14c4d8f66173af561a}{net\_version}}\ =\ \mbox{\hyperlink{namespacesysio_a1956cf3e030fe2e14e12eed6c6c3e280}{proto\_explicit\_sync}};}
\DoxyCodeLine{02910\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a55b561baeda5353d7c1a1e2a8a0c88e1}{send\_handshake}}();}
\DoxyCodeLine{02911\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02912\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02913\ }
\DoxyCodeLine{02914\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1connection_a3b487d20a19e5f81f3024d276078d397}{sent\_handshake\_count}}\ ==\ 0\ )\ \{}
\DoxyCodeLine{02915\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a55b561baeda5353d7c1a1e2a8a0c88e1}{send\_handshake}}();}
\DoxyCodeLine{02916\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02917\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02918\ }
\DoxyCodeLine{02919\ \ \ \ \ \ \ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a1ec38b54825da7f4f2ba7901d6318fd7}{sync\_master}}-\/>recv\_handshake(\ shared\_from\_this(),\ msg\ );}
\DoxyCodeLine{02920\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_a6969d80878d60791744f4ace46f1b806_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a5334d7cde64019b2ab84f3930bb54de9}\index{sysio::connection@{sysio::connection}!handle\_message@{handle\_message}}
\index{handle\_message@{handle\_message}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{handle\_message()}{handle\_message()}\hspace{0.1cm}{\footnotesize\ttfamily [5/11]}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a5334d7cde64019b2ab84f3930bb54de9} 
void sysio\+::connection\+::handle\+\_\+message (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structsysio_1_1notice__message}{notice\+\_\+message}} \&}]{msg}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l02984}{2984}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02984\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02985\ \ \ \ \ \ \ \textcolor{comment}{//\ peer\ tells\ us\ about\ one\ or\ more\ blocks\ or\ txns.\ When\ done\ syncing,\ forward\ on}}
\DoxyCodeLine{02986\ \ \ \ \ \ \ \textcolor{comment}{//\ notices\ of\ previously\ unknown\ blocks\ or\ txns,}}
\DoxyCodeLine{02987\ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{02988\ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a051c62a0ec99dcd3e7a38fd03bec1fe0}{peer\_dlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}received\ notice\_message"{}}\ );}
\DoxyCodeLine{02989\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a2cb1b55074b31325f9845700fd7ede82}{connecting}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02990\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ msg.known\_blocks.ids.size()\ >\ 1\ )\ \{}
\DoxyCodeLine{02991\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}Invalid\ notice\_message,\ known\_blocks.ids.size\ \$\{s\},\ closing\ connection"{}},}
\DoxyCodeLine{02992\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}s"{}},\ msg.known\_blocks.ids.size())\ );}
\DoxyCodeLine{02993\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a7fe7bb50b91bd69cdf56c7c09a868e29}{close}}(\ \textcolor{keyword}{false}\ );}
\DoxyCodeLine{02994\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02995\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02996\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ msg.known\_trx.mode\ !=\ \mbox{\hyperlink{namespacesysio_a3a283f786468e0f0e35b0177214ca59ea3820b1d3d12c986267353dcda2fdf2d6}{none}}\ )\ \{}
\DoxyCodeLine{02997\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}}.\mbox{\hyperlink{classfc_1_1logger_afbae9b6cd7f4f604f654a4c1914677ac}{is\_enabled}}(\ \mbox{\hyperlink{classfc_1_1log__level_a5a5e31c4c1f38d9115ecbe44927fb2e4a30d2de77e71beb8d09d530cac04efa25}{fc::log\_level::debug}}\ )\ )\ \{}
\DoxyCodeLine{02998\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classfc_1_1sha256}{block\_id\_type}}\&\ blkid\ =\ msg.known\_blocks.ids.empty()\ ?\ \mbox{\hyperlink{classfc_1_1sha256}{block\_id\_type}}\{\}\ :\ msg.known\_blocks.ids.back();}
\DoxyCodeLine{02999\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a051c62a0ec99dcd3e7a38fd03bec1fe0}{peer\_dlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}this\ is\ a\ \$\{m\}\ notice\ with\ \$\{n\}\ pending\ blocks:\ \$\{num\}\ \$\{id\}..."{}},}
\DoxyCodeLine{03000\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}m"{}},\ \mbox{\hyperlink{namespacesysio_a454edd6d34c5564da3a8c796090837fe}{modes\_str}}(\ msg.known\_blocks.mode\ ))(\textcolor{stringliteral}{"{}n"{}},\ msg.known\_blocks.pending)}
\DoxyCodeLine{03001\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}num"{}},\ \mbox{\hyperlink{structsysio_1_1chain_1_1block__header_a39d57e33ef8d3f6ba59b4c458f0ae375}{block\_header::num\_from\_id}}(\ blkid\ ))(\textcolor{stringliteral}{"{}id"{}},\ blkid.\mbox{\hyperlink{classfc_1_1sha256_a71ac4efc1d964d24fdf00aeffcf0a9c9}{str}}().substr(\ 8,\ 16\ ))\ );}
\DoxyCodeLine{03002\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03003\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03004\ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (msg.known\_trx.mode)\ \{}
\DoxyCodeLine{03005\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesysio_a3a283f786468e0f0e35b0177214ca59ea3820b1d3d12c986267353dcda2fdf2d6}{none}}:}
\DoxyCodeLine{03006\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03007\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesysio_a3a283f786468e0f0e35b0177214ca59ea528a803ed30b308213498b10d8048e62}{last\_irr\_catch\_up}}:\ \{}
\DoxyCodeLine{03008\ \ \ \ \ \ \ \ \ \ std::unique\_lock<std::mutex>\ g\_conn(\ \mbox{\hyperlink{classsysio_1_1connection_a675e5b04f968aa689c49d511c601fffa}{conn\_mtx}}\ );}
\DoxyCodeLine{03009\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a158c59b44186c7757311f14f71818ec8}{last\_handshake\_recv}}.\mbox{\hyperlink{structsysio_1_1handshake__message_a1b2717cc284cb6f783d1a2c4602f66d3}{head\_num}}\ =\ msg.known\_blocks.pending;}
\DoxyCodeLine{03010\ \ \ \ \ \ \ \ \ \ g\_conn.unlock();}
\DoxyCodeLine{03011\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03012\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03013\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesysio_a3a283f786468e0f0e35b0177214ca59ea9b09221c2cc0fc2ea1d69a00b99ea58f}{catch\_up}}\ :\ \{}
\DoxyCodeLine{03014\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03015\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03016\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesysio_a3a283f786468e0f0e35b0177214ca59ea13cebc41fab7b311a3f8f8bfae78f2ae}{normal}}:\ \{}
\DoxyCodeLine{03017\ \ \ \ \ \ \ \ \ \ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a5b302f8ed2594b44aa126082cd07d941}{dispatcher}}-\/>recv\_notice(\ shared\_from\_this(),\ msg,\ \textcolor{keyword}{false}\ );}
\DoxyCodeLine{03018\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03019\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03020\ }
\DoxyCodeLine{03021\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ msg.known\_blocks.mode\ !=\ \mbox{\hyperlink{namespacesysio_a3a283f786468e0f0e35b0177214ca59ea3820b1d3d12c986267353dcda2fdf2d6}{none}}\ )\ \{}
\DoxyCodeLine{03022\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a051c62a0ec99dcd3e7a38fd03bec1fe0}{peer\_dlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}this\ is\ a\ \$\{m\}\ notice\ with\ \$\{n\}\ blocks"{}},}
\DoxyCodeLine{03023\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}m"{}},\ \mbox{\hyperlink{namespacesysio_a454edd6d34c5564da3a8c796090837fe}{modes\_str}}(\ msg.known\_blocks.mode\ ))(\ \textcolor{stringliteral}{"{}n"{}},\ msg.known\_blocks.pending\ )\ );}
\DoxyCodeLine{03024\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03025\ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (msg.known\_blocks.mode)\ \{}
\DoxyCodeLine{03026\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesysio_a3a283f786468e0f0e35b0177214ca59ea3820b1d3d12c986267353dcda2fdf2d6}{none}}\ :\ \{}
\DoxyCodeLine{03027\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03028\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03029\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesysio_a3a283f786468e0f0e35b0177214ca59ea528a803ed30b308213498b10d8048e62}{last\_irr\_catch\_up}}:}
\DoxyCodeLine{03030\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesysio_a3a283f786468e0f0e35b0177214ca59ea9b09221c2cc0fc2ea1d69a00b99ea58f}{catch\_up}}:\ \{}
\DoxyCodeLine{03031\ \ \ \ \ \ \ \ \ \ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a1ec38b54825da7f4f2ba7901d6318fd7}{sync\_master}}-\/>sync\_recv\_notice(\ shared\_from\_this(),\ msg\ );}
\DoxyCodeLine{03032\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03033\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03034\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesysio_a3a283f786468e0f0e35b0177214ca59ea13cebc41fab7b311a3f8f8bfae78f2ae}{normal}}\ :\ \{}
\DoxyCodeLine{03035\ \ \ \ \ \ \ \ \ \ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a5b302f8ed2594b44aa126082cd07d941}{dispatcher}}-\/>recv\_notice(\ shared\_from\_this(),\ msg,\ \textcolor{keyword}{false}\ );}
\DoxyCodeLine{03036\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03037\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03038\ \ \ \ \ \ \ \textcolor{keywordflow}{default}:\ \{}
\DoxyCodeLine{03039\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}bad\ notice\_message\ :\ invalid\ known\_blocks.mode\ \$\{m\}"{}},}
\DoxyCodeLine{03040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}m"{}},\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\textcolor{keyword}{>}(msg.known\_blocks.mode))\ );}
\DoxyCodeLine{03041\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03042\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03043\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_a5334d7cde64019b2ab84f3930bb54de9_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a9e24c2d2916cc6530e1c5526cf7a1316}\index{sysio::connection@{sysio::connection}!handle\_message@{handle\_message}}
\index{handle\_message@{handle\_message}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{handle\_message()}{handle\_message()}\hspace{0.1cm}{\footnotesize\ttfamily [6/11]}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a9e24c2d2916cc6530e1c5526cf7a1316} 
void sysio\+::connection\+::handle\+\_\+message (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structsysio_1_1chain_1_1packed__transaction}{packed\+\_\+transaction}} \&}]{msg}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}

\Hypertarget{classsysio_1_1connection_a7ec6bfca8f639dbced53570e5a41ce36}\index{sysio::connection@{sysio::connection}!handle\_message@{handle\_message}}
\index{handle\_message@{handle\_message}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{handle\_message()}{handle\_message()}\hspace{0.1cm}{\footnotesize\ttfamily [7/11]}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a7ec6bfca8f639dbced53570e5a41ce36} 
void sysio\+::connection\+::handle\+\_\+message (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structsysio_1_1request__message}{request\+\_\+message}} \&}]{msg}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l03045}{3045}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{03045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03046\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ msg.req\_blocks.ids.size()\ >\ 1\ )\ \{}
\DoxyCodeLine{03047\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}Invalid\ request\_message,\ req\_blocks.ids.size\ \$\{s\},\ closing"{}},}
\DoxyCodeLine{03048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}s"{}},\ msg.req\_blocks.ids.size())\ );}
\DoxyCodeLine{03049\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a7fe7bb50b91bd69cdf56c7c09a868e29}{close}}();}
\DoxyCodeLine{03050\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{03051\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03052\ }
\DoxyCodeLine{03053\ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (msg.req\_blocks.mode)\ \{}
\DoxyCodeLine{03054\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesysio_a3a283f786468e0f0e35b0177214ca59ea9b09221c2cc0fc2ea1d69a00b99ea58f}{catch\_up}}\ :}
\DoxyCodeLine{03055\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a051c62a0ec99dcd3e7a38fd03bec1fe0}{peer\_dlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}received\ request\_message:catch\_up"{}}\ );}
\DoxyCodeLine{03056\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a5b9e30160fc0db3e2842bcb868cb34a0}{blk\_send\_branch}}(\ msg.req\_blocks.ids.empty()\ ?\ \mbox{\hyperlink{classfc_1_1sha256}{block\_id\_type}}()\ :\ msg.req\_blocks.ids.back()\ );}
\DoxyCodeLine{03057\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03058\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesysio_a3a283f786468e0f0e35b0177214ca59ea13cebc41fab7b311a3f8f8bfae78f2ae}{normal}}\ :}
\DoxyCodeLine{03059\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a051c62a0ec99dcd3e7a38fd03bec1fe0}{peer\_dlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}received\ request\_message:normal"{}}\ );}
\DoxyCodeLine{03060\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !msg.req\_blocks.ids.empty()\ )\ \{}
\DoxyCodeLine{03061\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a26752470d31dda1a5140351cbfa375c4}{blk\_send}}(\ msg.req\_blocks.ids.back()\ );}
\DoxyCodeLine{03062\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03063\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03064\ \ \ \ \ \ \ \textcolor{keywordflow}{default}:;}
\DoxyCodeLine{03065\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03066\ }
\DoxyCodeLine{03067\ }
\DoxyCodeLine{03068\ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (msg.req\_trx.mode)\ \{}
\DoxyCodeLine{03069\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesysio_a3a283f786468e0f0e35b0177214ca59ea9b09221c2cc0fc2ea1d69a00b99ea58f}{catch\_up}}\ :}
\DoxyCodeLine{03070\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03071\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesysio_a3a283f786468e0f0e35b0177214ca59ea3820b1d3d12c986267353dcda2fdf2d6}{none}}\ :}
\DoxyCodeLine{03072\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ msg.req\_blocks.mode\ ==\ \mbox{\hyperlink{namespacesysio_a3a283f786468e0f0e35b0177214ca59ea3820b1d3d12c986267353dcda2fdf2d6}{none}}\ )\ \{}
\DoxyCodeLine{03073\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_ab07f49d550a613d2ceb2520b331f5ac1}{stop\_send}}();}
\DoxyCodeLine{03074\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03075\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ no\ break}}
\DoxyCodeLine{03076\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesysio_a3a283f786468e0f0e35b0177214ca59ea13cebc41fab7b311a3f8f8bfae78f2ae}{normal}}\ :}
\DoxyCodeLine{03077\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !msg.req\_trx.ids.empty()\ )\ \{}
\DoxyCodeLine{03078\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}Invalid\ request\_message,\ req\_trx.ids.size\ \$\{s\}"{}},\ (\textcolor{stringliteral}{"{}s"{}},\ msg.req\_trx.ids.size())\ );}
\DoxyCodeLine{03079\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a7fe7bb50b91bd69cdf56c7c09a868e29}{close}}();}
\DoxyCodeLine{03080\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{03081\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03082\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03083\ \ \ \ \ \ \ \textcolor{keywordflow}{default}:;}
\DoxyCodeLine{03084\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03085\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_a7ec6bfca8f639dbced53570e5a41ce36_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a3087a10ef1596db0cd6b18b1530df0c4}\index{sysio::connection@{sysio::connection}!handle\_message@{handle\_message}}
\index{handle\_message@{handle\_message}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{handle\_message()}{handle\_message()}\hspace{0.1cm}{\footnotesize\ttfamily [8/11]}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a3087a10ef1596db0cd6b18b1530df0c4} 
void sysio\+::connection\+::handle\+\_\+message (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structsysio_1_1chain_1_1signed__block}{signed\+\_\+block}} \&}]{msg}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}

\Hypertarget{classsysio_1_1connection_a21ed2c2f522d3a525417073d7548a4b5}\index{sysio::connection@{sysio::connection}!handle\_message@{handle\_message}}
\index{handle\_message@{handle\_message}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{handle\_message()}{handle\_message()}\hspace{0.1cm}{\footnotesize\ttfamily [9/11]}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a21ed2c2f522d3a525417073d7548a4b5} 
void sysio\+::connection\+::handle\+\_\+message (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structsysio_1_1sync__request__message}{sync\+\_\+request\+\_\+message}} \&}]{msg}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l03087}{3087}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{03087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03088\ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a051c62a0ec99dcd3e7a38fd03bec1fe0}{peer\_dlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}peer\ requested\ \$\{start\}\ to\ \$\{end\}"{}},\ (\textcolor{stringliteral}{"{}start"{}},\ msg.start\_block)(\textcolor{stringliteral}{"{}end"{}},\ msg.end\_block)\ );}
\DoxyCodeLine{03089\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ msg.end\_block\ ==\ 0\ )\ \{}
\DoxyCodeLine{03090\ \ \ \ \ \ \ \ \ \ peer\_requested.reset();}
\DoxyCodeLine{03091\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a51ccfb43cb79f666e6548ffeb9f205f2}{flush\_queues}}();}
\DoxyCodeLine{03092\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03093\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (peer\_requested)\ \{}
\DoxyCodeLine{03094\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ happens\ when\ peer\ already\ requested\ some\ range\ and\ sync\ is\ still\ in\ progress}}
\DoxyCodeLine{03095\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ It\ could\ be\ higher\ in\ case\ of\ peer\ requested\ head\ catchup\ and\ current\ request\ is\ lib\ catchup}}
\DoxyCodeLine{03096\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ So\ to\ make\ sure\ peer\ will\ receive\ all\ requested\ blocks\ we\ assign\ end\_block\ to\ highest\ value}}
\DoxyCodeLine{03097\ \ \ \ \ \ \ \ \ \ \ \ \ peer\_requested-\/>end\_block\ =\ std::max(msg.end\_block,\ peer\_requested-\/>end\_block);}
\DoxyCodeLine{03098\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03099\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03100\ \ \ \ \ \ \ \ \ \ \ \ \ peer\_requested\ =\ peer\_sync\_state(\ msg.start\_block,\ msg.end\_block,\ msg.start\_block-\/1);}
\DoxyCodeLine{03101\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03102\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a099523d62bc60e4a13deda1fe15845ad}{enqueue\_sync\_block}}();}
\DoxyCodeLine{03103\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03104\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_a21ed2c2f522d3a525417073d7548a4b5_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a674cbe920ea083be64a0746c0ce76c86}\index{sysio::connection@{sysio::connection}!handle\_message@{handle\_message}}
\index{handle\_message@{handle\_message}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{handle\_message()}{handle\_message()}\hspace{0.1cm}{\footnotesize\ttfamily [10/11]}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a674cbe920ea083be64a0746c0ce76c86} 
void sysio\+::connection\+::handle\+\_\+message (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structsysio_1_1time__message}{time\+\_\+message}} \&}]{msg}{}\end{DoxyParamCaption})}

Calculate offset, delay and dispersion. Note carefully the implied processing. The first-\/order difference is done directly in 64-\/bit arithmetic, then the result is converted to floating double. All further processing is in floating-\/double arithmetic with rounding done by the hardware. This is necessary in order to avoid overflow and preserve precision. 

Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l02944}{2944}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02944\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02945\ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_ad909b2ce03eb19202983c88ae2abe9bd}{peer\_ilog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}received\ time\_message"{}}\ );}
\DoxyCodeLine{02946\ }
\DoxyCodeLine{02947\ \ \ \ \ \ \ \textcolor{comment}{/*\ We've\ already\ lost\ however\ many\ microseconds\ it\ took\ to\ dispatch}}
\DoxyCodeLine{02948\ \textcolor{comment}{\ \ \ \ \ \ \ *\ the\ message,\ but\ it\ can't\ be\ helped.}}
\DoxyCodeLine{02949\ \textcolor{comment}{\ \ \ \ \ \ \ */}}
\DoxyCodeLine{02950\ \ \ \ \ \ \ msg.dst\ =\ \mbox{\hyperlink{classsysio_1_1connection_aa74b147947e087bc084d72a3d892a06f}{get\_time}}();}
\DoxyCodeLine{02951\ }
\DoxyCodeLine{02952\ \ \ \ \ \ \ \textcolor{comment}{//\ If\ the\ transmit\ timestamp\ is\ zero,\ the\ peer\ is\ horribly\ broken.}}
\DoxyCodeLine{02953\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(msg.xmt\ ==\ 0)}
\DoxyCodeLine{02954\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ invalid\ timestamp\ */}}
\DoxyCodeLine{02955\ }
\DoxyCodeLine{02956\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(msg.xmt\ ==\ \mbox{\hyperlink{classsysio_1_1connection_a1ddd29a8f7e1d9a3d21a79c8fdf21521}{xmt}})}
\DoxyCodeLine{02957\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ duplicate\ packet\ */}}
\DoxyCodeLine{02958\ }
\DoxyCodeLine{02959\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a1ddd29a8f7e1d9a3d21a79c8fdf21521}{xmt}}\ =\ msg.xmt;}
\DoxyCodeLine{02960\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a0bc9d553ad16bc63449cdbcf6825c59f}{rec}}\ =\ msg.rec;}
\DoxyCodeLine{02961\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_af43cec49a0884310396dad6d01c392e1}{dst}}\ =\ msg.dst;}
\DoxyCodeLine{02962\ }
\DoxyCodeLine{02963\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ msg.org\ ==\ 0\ )\ \{}
\DoxyCodeLine{02964\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a1c134c29679142daab81ca9fe4a10996}{send\_time}}(\ msg\ );}
\DoxyCodeLine{02965\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};\ \ \textcolor{comment}{//\ We\ don't\ have\ enough\ data\ to\ perform\ the\ calculation\ yet.}}
\DoxyCodeLine{02966\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02967\ }
\DoxyCodeLine{02968\ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ offset\ =\ (double(\mbox{\hyperlink{classsysio_1_1connection_a0bc9d553ad16bc63449cdbcf6825c59f}{rec}}\ -\/\ \mbox{\hyperlink{classsysio_1_1connection_a6c055550228586b3534a4f2b5e87bc4e}{org}})\ +\ double(msg.xmt\ -\/\ \mbox{\hyperlink{classsysio_1_1connection_af43cec49a0884310396dad6d01c392e1}{dst}}))\ /\ 2;}
\DoxyCodeLine{02969\ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ NsecPerUsec\{1000\};}
\DoxyCodeLine{02970\ }
\DoxyCodeLine{02971\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}}.\mbox{\hyperlink{classfc_1_1logger_afbae9b6cd7f4f604f654a4c1914677ac}{is\_enabled}}(\ \mbox{\hyperlink{classfc_1_1log__level_a5a5e31c4c1f38d9115ecbe44927fb2e4a890e233ab2c5d4db2a1c26a10bd2de7d}{fc::log\_level::all}}\ )\ )}
\DoxyCodeLine{02972\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1logger}{logger}}.\mbox{\hyperlink{classfc_1_1logger_a8699bbd7c059f568f456b1446b97b0e4}{log}}(\ \mbox{\hyperlink{log__message_8hpp_a4a4df4bb5cffbe07aadf7d29fd44c75e}{FC\_LOG\_MESSAGE}}(\ all,\ \textcolor{stringliteral}{"{}Clock\ offset\ is\ \$\{o\}ns\ (\$\{us\}us)"{}},}
\DoxyCodeLine{02973\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}o"{}},\ offset)(\ \textcolor{stringliteral}{"{}us"{}},\ offset\ /\ NsecPerUsec\ )\ )\ );}
\DoxyCodeLine{02974\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a6c055550228586b3534a4f2b5e87bc4e}{org}}\ =\ 0;}
\DoxyCodeLine{02975\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a0bc9d553ad16bc63449cdbcf6825c59f}{rec}}\ =\ 0;}
\DoxyCodeLine{02976\ }
\DoxyCodeLine{02977\ \ \ \ \ \ \ std::unique\_lock<std::mutex>\ g\_conn(\ \mbox{\hyperlink{classsysio_1_1connection_a675e5b04f968aa689c49d511c601fffa}{conn\_mtx}}\ );}
\DoxyCodeLine{02978\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1connection_a158c59b44186c7757311f14f71818ec8}{last\_handshake\_recv}}.\mbox{\hyperlink{structsysio_1_1handshake__message_a62247b1e0a1a552278fc2b156d4d663f}{generation}}\ ==\ 0\ )\ \{}
\DoxyCodeLine{02979\ \ \ \ \ \ \ \ \ \ g\_conn.unlock();}
\DoxyCodeLine{02980\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a55b561baeda5353d7c1a1e2a8a0c88e1}{send\_handshake}}();}
\DoxyCodeLine{02981\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02982\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_a674cbe920ea083be64a0746c0ce76c86_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a5b525888f8a53ca2b7665fc7f5860746}\index{sysio::connection@{sysio::connection}!handle\_message@{handle\_message}}
\index{handle\_message@{handle\_message}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{handle\_message()}{handle\_message()}\hspace{0.1cm}{\footnotesize\ttfamily [11/11]}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a5b525888f8a53ca2b7665fc7f5860746} 
void sysio\+::connection\+::handle\+\_\+message (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacesysio_1_1chain_a7041c0316bd294d0866609ab3e0cc7a7}{packed\+\_\+transaction\+\_\+ptr}}}]{msg}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l03110}{3110}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{03110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03111\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ tid\ =\ trx-\/>id();}
\DoxyCodeLine{03112\ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a051c62a0ec99dcd3e7a38fd03bec1fe0}{peer\_dlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}received\ packed\_transaction\ \$\{id\}"{}},\ (\textcolor{stringliteral}{"{}id"{}},\ tid)\ );}
\DoxyCodeLine{03113\ }
\DoxyCodeLine{03114\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_ad60ce32fad045e086d4681636391851b}{trx\_in\_progress\_size}}\ +=\ \mbox{\hyperlink{namespacesysio_a2194dd4e6a446fc52f18df8563e8e9b4}{calc\_trx\_size}}(\ trx\ );}
\DoxyCodeLine{03115\ \ \ \ \ \ \ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a932907eaa912c9420b96ea45103b66b8}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_ac6ac57ec54c2d3ee93ee361862e86a93}{accept\_transaction}}(\ trx,}
\DoxyCodeLine{03116\ \ \ \ \ \ \ \ \ \ [weak\ =\ weak\_from\_this(),\ trx](\textcolor{keyword}{const}\ std::variant<fc::exception\_ptr,\ transaction\_trace\_ptr>\&\ result)\ \textcolor{keyword}{mutable}\ \{}
\DoxyCodeLine{03117\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ next\ (this\ lambda)\ called\ from\ application\ thread}}
\DoxyCodeLine{03118\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (std::holds\_alternative<fc::exception\_ptr>(result))\ \{}
\DoxyCodeLine{03119\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}bad\ packed\_transaction\ :\ \$\{m\}"{}},\ (\textcolor{stringliteral}{"{}m"{}},\ std::get<fc::exception\_ptr>(result)-\/>what())\ );}
\DoxyCodeLine{03120\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03121\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_1_1chain_a4ee2867a6bec961c7a78b203cfd76be9}{transaction\_trace\_ptr}}\&\ trace\ =\ std::get<transaction\_trace\_ptr>(result);}
\DoxyCodeLine{03122\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !trace-\/>except\ )\ \{}
\DoxyCodeLine{03123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}chain\ accepted\ transaction,\ bcast\ \$\{id\}"{}},\ (\textcolor{stringliteral}{"{}id"{}},\ trace-\/>id)\ );}
\DoxyCodeLine{03124\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_ae75bea0ceb7483fdf0ed20c22556a907}{fc\_elog}}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}bad\ packed\_transaction\ :\ \$\{m\}"{}},\ (\textcolor{stringliteral}{"{}m"{}},\ trace-\/>except-\/>what()));}
\DoxyCodeLine{03126\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03127\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03128\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{debug__client_8cpp_ae9c9779aea742ab80689add7e553df0d}{connection\_ptr}}\ conn\ =\ weak.lock();}
\DoxyCodeLine{03129\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ conn\ )\ \{}
\DoxyCodeLine{03130\ \ \ \ \ \ \ \ \ \ \ \ \ conn-\/>trx\_in\_progress\_size\ -\/=\ \mbox{\hyperlink{namespacesysio_a2194dd4e6a446fc52f18df8563e8e9b4}{calc\_trx\_size}}(\ trx\ );}
\DoxyCodeLine{03131\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03132\ \ \ \ \ \ \ \});}
\DoxyCodeLine{03133\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=319pt]{classsysio_1_1connection_a5b525888f8a53ca2b7665fc7f5860746_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a7a00f9a9487c8604ac53ff47aa7316e8}\index{sysio::connection@{sysio::connection}!is\_blocks\_only\_connection@{is\_blocks\_only\_connection}}
\index{is\_blocks\_only\_connection@{is\_blocks\_only\_connection}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{is\_blocks\_only\_connection()}{is\_blocks\_only\_connection()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a7a00f9a9487c8604ac53ff47aa7316e8} 
bool sysio\+::connection\+::is\+\_\+blocks\+\_\+only\+\_\+connection (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00595}{595}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00595\ \{\ \textcolor{keywordflow}{return}\ connection\_type\ ==\ blocks\_only;\ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_a7a00f9a9487c8604ac53ff47aa7316e8_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a9e344302f09cb876c9549cb2aa368f2e}\index{sysio::connection@{sysio::connection}!is\_transactions\_only\_connection@{is\_transactions\_only\_connection}}
\index{is\_transactions\_only\_connection@{is\_transactions\_only\_connection}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{is\_transactions\_only\_connection()}{is\_transactions\_only\_connection()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a9e344302f09cb876c9549cb2aa368f2e} 
bool sysio\+::connection\+::is\+\_\+transactions\+\_\+only\+\_\+connection (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00594}{594}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00594\ \{\ \textcolor{keywordflow}{return}\ connection\_type\ ==\ transactions\_only;\ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=327pt]{classsysio_1_1connection_a9e344302f09cb876c9549cb2aa368f2e_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_ac8f79d24686c4aad7bf12f3784970d98}\index{sysio::connection@{sysio::connection}!is\_valid@{is\_valid}}
\index{is\_valid@{is\_valid}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{is\_valid()}{is\_valid()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_ac8f79d24686c4aad7bf12f3784970d98} 
bool sysio\+::connection\+::is\+\_\+valid (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structsysio_1_1handshake__message}{handshake\+\_\+message}} \&}]{msg}{}\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l02720}{2720}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02720\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02721\ \ \ \ \ \ \ \textcolor{comment}{//\ Do\ some\ basic\ validation\ of\ an\ incoming\ handshake\_message,\ so\ things}}
\DoxyCodeLine{02722\ \ \ \ \ \ \ \textcolor{comment}{//\ that\ really\ aren't\ handshake\ messages\ can\ be\ quickly\ discarded\ without}}
\DoxyCodeLine{02723\ \ \ \ \ \ \ \textcolor{comment}{//\ affecting\ state.}}
\DoxyCodeLine{02724\ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ valid\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02725\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (msg.last\_irreversible\_block\_num\ >\ msg.head\_num)\ \{}
\DoxyCodeLine{02726\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_af53787454493a30650fdab0193037465}{peer\_wlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}Handshake\ message\ validation:\ last\ irreversible\ block\ (\$\{i\})\ is\ greater\ than\ head\ block\ (\$\{h\})"{}},}
\DoxyCodeLine{02727\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}i"{}},\ msg.last\_irreversible\_block\_num)(\textcolor{stringliteral}{"{}h"{}},\ msg.head\_num)\ );}
\DoxyCodeLine{02728\ \ \ \ \ \ \ \ \ \ valid\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02729\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02730\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (msg.p2p\_address.empty())\ \{}
\DoxyCodeLine{02731\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_af53787454493a30650fdab0193037465}{peer\_wlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}Handshake\ message\ validation:\ p2p\_address\ is\ null\ string"{}}\ );}
\DoxyCodeLine{02732\ \ \ \ \ \ \ \ \ \ valid\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02733\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\ msg.p2p\_address.length()\ >\ \mbox{\hyperlink{namespacesysio_a221fdeb3635b31daaa70c0ef5dedb044}{max\_handshake\_str\_length}}\ )\ \{}
\DoxyCodeLine{02734\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ see\ max\_handshake\_str\_length\ comment\ in\ protocol.hpp}}
\DoxyCodeLine{02735\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_af53787454493a30650fdab0193037465}{peer\_wlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}Handshake\ message\ validation:\ p2p\_address\ too\ large:\ \$\{p\}"{}},}
\DoxyCodeLine{02736\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}p"{}},\ msg.p2p\_address.substr(0,\ \mbox{\hyperlink{namespacesysio_a221fdeb3635b31daaa70c0ef5dedb044}{max\_handshake\_str\_length}})\ +\ \textcolor{stringliteral}{"{}..."{}})\ );}
\DoxyCodeLine{02737\ \ \ \ \ \ \ \ \ \ valid\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02738\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02739\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (msg.os.empty())\ \{}
\DoxyCodeLine{02740\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_af53787454493a30650fdab0193037465}{peer\_wlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}Handshake\ message\ validation:\ os\ field\ is\ null\ string"{}}\ );}
\DoxyCodeLine{02741\ \ \ \ \ \ \ \ \ \ valid\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02742\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\ msg.os.length()\ >\ \mbox{\hyperlink{namespacesysio_a221fdeb3635b31daaa70c0ef5dedb044}{max\_handshake\_str\_length}}\ )\ \{}
\DoxyCodeLine{02743\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_af53787454493a30650fdab0193037465}{peer\_wlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}Handshake\ message\ validation:\ os\ field\ too\ large:\ \$\{p\}"{}},}
\DoxyCodeLine{02744\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}p"{}},\ msg.os.substr(0,\ \mbox{\hyperlink{namespacesysio_a221fdeb3635b31daaa70c0ef5dedb044}{max\_handshake\_str\_length}})\ +\ \textcolor{stringliteral}{"{}..."{}})\ );}
\DoxyCodeLine{02745\ \ \ \ \ \ \ \ \ \ valid\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02746\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02747\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ msg.agent.length()\ >\ \mbox{\hyperlink{namespacesysio_a221fdeb3635b31daaa70c0ef5dedb044}{max\_handshake\_str\_length}}\ )\ \{}
\DoxyCodeLine{02748\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_af53787454493a30650fdab0193037465}{peer\_wlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}Handshake\ message\ validation:\ agent\ field\ too\ large:\ \$\{p\}"{}},}
\DoxyCodeLine{02749\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}p"{}},\ msg.agent.substr(0,\ \mbox{\hyperlink{namespacesysio_a221fdeb3635b31daaa70c0ef5dedb044}{max\_handshake\_str\_length}})\ +\ \textcolor{stringliteral}{"{}..."{}})\ );}
\DoxyCodeLine{02750\ \ \ \ \ \ \ \ \ \ valid\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02751\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02752\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((msg.sig\ !=\ \mbox{\hyperlink{namespacesysio_1_1chain_af141a69eb789b86fa0eb93c2d263f0df}{chain::signature\_type}}()\ ||\ msg.token\ !=\ \mbox{\hyperlink{classfc_1_1sha256}{sha256}}())\ \&\&\ (msg.token\ !=\ \mbox{\hyperlink{classfc_1_1sha256_a474784de7d6213b855abd7e952df5e36}{fc::sha256::hash}}(msg.time)))\ \{}
\DoxyCodeLine{02753\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_af53787454493a30650fdab0193037465}{peer\_wlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}Handshake\ message\ validation:\ token\ field\ invalid"{}}\ );}
\DoxyCodeLine{02754\ \ \ \ \ \ \ \ \ \ valid\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02755\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02756\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ valid;}
\DoxyCodeLine{02757\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_ac8f79d24686c4aad7bf12f3784970d98_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=313pt]{classsysio_1_1connection_ac8f79d24686c4aad7bf12f3784970d98_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_aca3e3acacf8047c389e0bda758da197d}\index{sysio::connection@{sysio::connection}!peer\_address@{peer\_address}}
\index{peer\_address@{peer\_address}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{peer\_address()}{peer\_address()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_aca3e3acacf8047c389e0bda758da197d} 
const \mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} \& sysio\+::connection\+::peer\+\_\+address (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00591}{591}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00591\ \{\ \textcolor{keywordflow}{return}\ peer\_addr;\ \}\ \textcolor{comment}{//\ thread\ safe,\ const}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=323pt]{classsysio_1_1connection_aca3e3acacf8047c389e0bda758da197d_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_aec8d94a6b6483822c52f08624e8dc9e7}\index{sysio::connection@{sysio::connection}!populate\_handshake@{populate\_handshake}}
\index{populate\_handshake@{populate\_handshake}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{populate\_handshake()}{populate\_handshake()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_aec8d94a6b6483822c52f08624e8dc9e7} 
bool sysio\+::connection\+::populate\+\_\+handshake (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsysio_1_1handshake__message}{handshake\+\_\+message}} \&}]{hello}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l03504}{3504}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{03504\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03505\ \ \ \ \ \ \ \textcolor{keyword}{namespace\ }sc\ =\ std::chrono;}
\DoxyCodeLine{03506\ \ \ \ \ \ \ hello.network\_version\ =\ \mbox{\hyperlink{namespacesysio_ab1d8e7b4e61cb77ed927e0a76decaabb}{net\_version\_base}}\ +\ \mbox{\hyperlink{classsysio_1_1connection_aa7543fc95097fd14c4d8f66173af561a}{net\_version}};}
\DoxyCodeLine{03507\ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ lib,\ head;}
\DoxyCodeLine{03508\ \ \ \ \ \ \ std::tie(\ lib,\ std::ignore,\ head,}
\DoxyCodeLine{03509\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ hello.last\_irreversible\_block\_id,\ std::ignore,\ hello.head\_id\ )\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_ab7de62c1cba9cb5a30060a687ef913e2}{get\_chain\_info}}();}
\DoxyCodeLine{03510\ \ \ \ \ \ \ hello.last\_irreversible\_block\_num\ =\ lib;}
\DoxyCodeLine{03511\ \ \ \ \ \ \ hello.head\_num\ =\ head;}
\DoxyCodeLine{03512\ \ \ \ \ \ \ hello.chain\_id\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a37adff467a5dc9da8cfbcd1d0f2a5080}{chain\_id}};}
\DoxyCodeLine{03513\ \ \ \ \ \ \ hello.node\_id\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a34b87d3870bcb637f7e8c2b5a0f40956}{node\_id}};}
\DoxyCodeLine{03514\ \ \ \ \ \ \ hello.key\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_af27bfe4be27bb557952ce5e1f1b409f4}{get\_authentication\_key}}();}
\DoxyCodeLine{03515\ \ \ \ \ \ \ hello.time\ =\ sc::duration\_cast<sc::nanoseconds>(sc::system\_clock::now().time\_since\_epoch()).count();}
\DoxyCodeLine{03516\ \ \ \ \ \ \ hello.token\ =\ \mbox{\hyperlink{classfc_1_1sha256_a474784de7d6213b855abd7e952df5e36}{fc::sha256::hash}}(hello.time);}
\DoxyCodeLine{03517\ \ \ \ \ \ \ hello.sig\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a2c539f4bc5f466e6cee42568d4e4be6e}{sign\_compact}}(hello.key,\ hello.token);}
\DoxyCodeLine{03518\ \ \ \ \ \ \ \textcolor{comment}{//\ If\ we\ couldn't\ sign,\ don't\ send\ a\ token.}}
\DoxyCodeLine{03519\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(hello.sig\ ==\ \mbox{\hyperlink{namespacesysio_1_1chain_af141a69eb789b86fa0eb93c2d263f0df}{chain::signature\_type}}())}
\DoxyCodeLine{03520\ \ \ \ \ \ \ \ \ \ hello.token\ =\ \mbox{\hyperlink{classfc_1_1sha256}{sha256}}();}
\DoxyCodeLine{03521\ \ \ \ \ \ \ hello.p2p\_address\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_ad0038d5b0dc359bdd3eab428e20efa3c}{p2p\_address}};}
\DoxyCodeLine{03522\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1connection_a9e344302f09cb876c9549cb2aa368f2e}{is\_transactions\_only\_connection}}()\ )\ hello.p2p\_address\ +=\ \textcolor{stringliteral}{"{}:trx"{}};}
\DoxyCodeLine{03523\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1connection_a7a00f9a9487c8604ac53ff47aa7316e8}{is\_blocks\_only\_connection}}()\ )\ hello.p2p\_address\ +=\ \textcolor{stringliteral}{"{}:blk"{}};}
\DoxyCodeLine{03524\ \ \ \ \ \ \ hello.p2p\_address\ +=\ \textcolor{stringliteral}{"{}\ -\/\ "{}}\ +\ hello.node\_id.str().substr(0,7);}
\DoxyCodeLine{03525\ \textcolor{preprocessor}{\#if\ defined(\ \_\_APPLE\_\_\ )}}
\DoxyCodeLine{03526\ \ \ \ \ \ \ hello.os\ =\ \textcolor{stringliteral}{"{}osx"{}};}
\DoxyCodeLine{03527\ \textcolor{preprocessor}{\#elif\ defined(\ \_\_linux\_\_\ )}}
\DoxyCodeLine{03528\ \ \ \ \ \ \ hello.os\ =\ \textcolor{stringliteral}{"{}linux"{}};}
\DoxyCodeLine{03529\ \textcolor{preprocessor}{\#elif\ defined(\ \_WIN32\ )}}
\DoxyCodeLine{03530\ \ \ \ \ \ \ hello.os\ =\ \textcolor{stringliteral}{"{}win32"{}};}
\DoxyCodeLine{03531\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{03532\ \ \ \ \ \ \ hello.os\ =\ \textcolor{stringliteral}{"{}other"{}};}
\DoxyCodeLine{03533\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{03534\ \ \ \ \ \ \ hello.agent\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_afd3b126945539b31ec200e98aa57e8d0}{user\_agent\_name}};}
\DoxyCodeLine{03535\ }
\DoxyCodeLine{03536\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{03537\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_aec8d94a6b6483822c52f08624e8dc9e7_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a27f41e41ebd6b4570bc19a31b4bb1fef}\index{sysio::connection@{sysio::connection}!process\_next\_message@{process\_next\_message}}
\index{process\_next\_message@{process\_next\_message}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{process\_next\_message()}{process\_next\_message()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a27f41e41ebd6b4570bc19a31b4bb1fef} 
bool sysio\+::connection\+::process\+\_\+next\+\_\+message (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}}}]{message\+\_\+length}{}\end{DoxyParamCaption})}

Process the next message from the pending\+\_\+message\+\_\+buffer. message\+\_\+length is the already determined length of the data part of the message that will handle the message. Returns true is successful. Returns false if an error was encountered unpacking or processing the message. 

Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l02560}{2560}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02560\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02561\ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{02562\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a718e2bd1f4e3bcd87979a578e1d49d7a}{latest\_msg\_time}}\ =\ \mbox{\hyperlink{classsysio_1_1connection_aa74b147947e087bc084d72a3d892a06f}{get\_time}}();}
\DoxyCodeLine{02563\ }
\DoxyCodeLine{02564\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ next\ message\ is\ a\ block\ we\ already\ have,\ exit\ early}}
\DoxyCodeLine{02565\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ peek\_ds\ =\ \mbox{\hyperlink{classsysio_1_1connection_af241d498d210d4e238b73f7bcd1c45d1}{pending\_message\_buffer}}.\mbox{\hyperlink{classfc_1_1message__buffer_a7dced4b9540dafc28255169be209967f}{create\_peek\_datastream}}();}
\DoxyCodeLine{02566\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structfc_1_1unsigned__int}{unsigned\_int}}\ which\{\};}
\DoxyCodeLine{02567\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacefc_1_1raw_a0b442d98ceb22dd5a6ae84745e43ffab}{fc::raw::unpack}}(\ peek\_ds,\ which\ );}
\DoxyCodeLine{02568\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ which\ ==\ \mbox{\hyperlink{namespacesysio_a5de954c7c7410bb1d52eaee6c5d7013a}{signed\_block\_which}}\ )\ \{}
\DoxyCodeLine{02569\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a1bf388b9e64d25616cefd8d6b1175fc7}{latest\_blk\_time}}\ =\ \mbox{\hyperlink{classsysio_1_1connection_aa74b147947e087bc084d72a3d892a06f}{get\_time}}();}
\DoxyCodeLine{02570\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ process\_next\_block\_message(\ message\_length\ );}
\DoxyCodeLine{02571\ }
\DoxyCodeLine{02572\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\ which\ ==\ \mbox{\hyperlink{namespacesysio_a922327bb5b4eede65613bb5dc4b1eb60}{packed\_transaction\_which}}\ )\ \{}
\DoxyCodeLine{02573\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ process\_next\_trx\_message(\ message\_length\ );}
\DoxyCodeLine{02574\ }
\DoxyCodeLine{02575\ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02576\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespace_xbyak_1_1util_a4b2aef26182d21706896022467868f7c}{ds}}\ =\ \mbox{\hyperlink{classsysio_1_1connection_af241d498d210d4e238b73f7bcd1c45d1}{pending\_message\_buffer}}.\mbox{\hyperlink{classfc_1_1message__buffer_a0da3494bf6948e935438176447880462}{create\_datastream}}();}
\DoxyCodeLine{02577\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_a783ade47a6f13a71a9b75cd2c68d9965}{net\_message}}\ msg;}
\DoxyCodeLine{02578\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacefc_1_1raw_a0b442d98ceb22dd5a6ae84745e43ffab}{fc::raw::unpack}}(\ ds,\ msg\ );}
\DoxyCodeLine{02579\ \ \ \ \ \ \ \ \ \ \ \ \ msg\_handler\ m(\ shared\_from\_this()\ );}
\DoxyCodeLine{02580\ \ \ \ \ \ \ \ \ \ \ \ \ std::visit(\ m,\ msg\ );}
\DoxyCodeLine{02581\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02582\ }
\DoxyCodeLine{02583\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classfc_1_1exception}{fc::exception}}\&\ e\ )\ \{}
\DoxyCodeLine{02584\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}Exception\ in\ handling\ message:\ \$\{s\}"{}},\ (\textcolor{stringliteral}{"{}s"{}},\ e.\mbox{\hyperlink{classfc_1_1exception_a7611ea8fbe25dde56649b685c2298a37}{to\_detail\_string}}())\ );}
\DoxyCodeLine{02585\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a7fe7bb50b91bd69cdf56c7c09a868e29}{close}}();}
\DoxyCodeLine{02586\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{02587\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02588\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{02589\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_a27f41e41ebd6b4570bc19a31b4bb1fef_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a6f592c3d4516eababd8ecbfac04c4b7e}\index{sysio::connection@{sysio::connection}!process\_signed\_block@{process\_signed\_block}}
\index{process\_signed\_block@{process\_signed\_block}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{process\_signed\_block()}{process\_signed\_block()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a6f592c3d4516eababd8ecbfac04c4b7e} 
void sysio\+::connection\+::process\+\_\+signed\+\_\+block (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacesysio_1_1chain_a4b8e4b7ed9dcd18ee75d0de62e88aa17}{block\+\_\+id\+\_\+type}} \&}]{id}{, }\item[{\mbox{\hyperlink{namespacesysio_1_1chain_aa10ee348c57604b615bc8570f6685102}{signed\+\_\+block\+\_\+ptr}}}]{msg}{, }\item[{\mbox{\hyperlink{namespacesysio_1_1chain_ab9b14f4554cc4a0da2c361e9757b1662}{block\+\_\+state\+\_\+ptr}}}]{bsp}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l03175}{3175}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{03175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03176\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1chain_1_1controller}{controller}}\&\ cc\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a932907eaa912c9420b96ea45103b66b8}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a14a5e77b31ecf267c8062267d03440ae}{chain}}();}
\DoxyCodeLine{03177\ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ blk\_num\ =\ msg-\/>block\_num();}
\DoxyCodeLine{03178\ \ \ \ \ \ \ \textcolor{comment}{//\ use\ c\ in\ this\ method\ instead\ of\ this\ to\ highlight\ that\ all\ methods\ called\ on\ c-\/>\ must\ be\ thread\ safe}}
\DoxyCodeLine{03179\ \ \ \ \ \ \ \mbox{\hyperlink{debug__client_8cpp_ae9c9779aea742ab80689add7e553df0d}{connection\_ptr}}\ c\ =\ shared\_from\_this();}
\DoxyCodeLine{03180\ }
\DoxyCodeLine{03181\ \ \ \ \ \ \ \textcolor{comment}{//\ if\ we\ have\ closed\ connection\ then\ stop\ processing}}
\DoxyCodeLine{03182\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !c-\/>socket\_is\_open()\ )}
\DoxyCodeLine{03183\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{03184\ }
\DoxyCodeLine{03185\ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{03186\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ cc.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_a7d6e058e892e067510650db853794338}{fetch\_block\_by\_id}}(blk\_id)\ )\ \{}
\DoxyCodeLine{03187\ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>strand.post(\ [sync\_master\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a1ec38b54825da7f4f2ba7901d6318fd7}{sync\_master}}.get(),}
\DoxyCodeLine{03188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dispatcher\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a5b302f8ed2594b44aa126082cd07d941}{dispatcher}}.get(),\ c,\ blk\_id,\ blk\_num]()\ \{}
\DoxyCodeLine{03189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dispatcher-\/>add\_peer\_block(\ blk\_id,\ c-\/>connection\_id\ );}
\DoxyCodeLine{03190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sync\_master-\/>sync\_recv\_block(\ c,\ blk\_id,\ blk\_num,\ false\ );}
\DoxyCodeLine{03191\ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{03192\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{03193\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03194\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(...)\ \{}
\DoxyCodeLine{03195\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ should\ this\ even\ be\ caught?}}
\DoxyCodeLine{03196\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_ae75bea0ceb7483fdf0ed20c22556a907}{fc\_elog}}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}Caught\ an\ unknown\ exception\ trying\ to\ recall\ block\ ID"{}}\ );}
\DoxyCodeLine{03197\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03198\ }
\DoxyCodeLine{03199\ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1microseconds}{fc::microseconds}}\ age(\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}()\ -\/\ msg-\/>timestamp);}
\DoxyCodeLine{03200\ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}received\ signed\_block:\ \#\$\{n\}\ block\ age\ in\ secs\ =\ \$\{age\},\ connection\ \$\{cid\}"{}},}
\DoxyCodeLine{03201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}n"{}},\ blk\_num)(\textcolor{stringliteral}{"{}age"{}},\ age.to\_seconds())(\textcolor{stringliteral}{"{}cid"{}},\ c-\/>connection\_id)\ );}
\DoxyCodeLine{03202\ }
\DoxyCodeLine{03203\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673f}{go\_away\_reason}}\ reason\ =\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa834d6ee2ad87c888db23aa35bfe5a7eb}{fatal\_other}};}
\DoxyCodeLine{03204\ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{03205\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacewebsocketpp_1_1http_1_1status__code_ae0d61c309e053ee5673517b54e2886c6a641d5b24273b4f10e32306890043ddb4}{accepted}}\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a932907eaa912c9420b96ea45103b66b8}{chain\_plug}}-\/>\mbox{\hyperlink{classsysio_1_1chain__plugin_a0c40ec7186936d460abe2bd8b071c6a5}{accept\_block}}(msg,\ blk\_id,\ bsp);}
\DoxyCodeLine{03206\ \ \ \ \ \ \ \ \ \ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a00b5cfe0a24a0f3e67aab8a3d5952f7d}{update\_chain\_info}}();}
\DoxyCodeLine{03207\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !accepted\ )\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{03208\ \ \ \ \ \ \ \ \ \ reason\ =\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa35a3ee195246082e99a69c2636252839}{no\_reason}};}
\DoxyCodeLine{03209\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ \textcolor{keyword}{const}\ unlinkable\_block\_exception\ \&ex)\ \{}
\DoxyCodeLine{03210\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_ae75bea0ceb7483fdf0ed20c22556a907}{fc\_elog}}(\mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}unlinkable\_block\_exception\ connection\ \$\{cid\}:\ \#\$\{n\}\ \$\{id\}...:\ \$\{m\}"{}},}
\DoxyCodeLine{03211\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}cid"{}},\ c-\/>connection\_id)(\textcolor{stringliteral}{"{}n"{}},\ blk\_num)(\textcolor{stringliteral}{"{}id"{}},\ blk\_id.str().substr(8,16))(\textcolor{stringliteral}{"{}m"{}},ex.to\_string()));}
\DoxyCodeLine{03212\ \ \ \ \ \ \ \ \ \ reason\ =\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa79e3384c490218a3f7bccf54a0448735}{unlinkable}};}
\DoxyCodeLine{03213\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacesysio_1_1chain_a910243f6a0327fb2d4fc80f7e89f103e}{block\_validate\_exception}}\ \&ex\ )\ \{}
\DoxyCodeLine{03214\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_ae75bea0ceb7483fdf0ed20c22556a907}{fc\_elog}}(\mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}block\_validate\_exception\ connection\ \$\{cid\}:\ \#\$\{n\}\ \$\{id\}...:\ \$\{m\}"{}},}
\DoxyCodeLine{03215\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}cid"{}},\ c-\/>connection\_id)(\textcolor{stringliteral}{"{}n"{}},\ blk\_num)(\textcolor{stringliteral}{"{}id"{}},\ blk\_id.str().substr(8,16))(\textcolor{stringliteral}{"{}m"{}},ex.to\_string()));}
\DoxyCodeLine{03216\ \ \ \ \ \ \ \ \ \ reason\ =\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673faf33f5d368dfd5563446edd1687b908bb}{validation}};}
\DoxyCodeLine{03217\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ \textcolor{keyword}{const}\ assert\_exception\ \&ex\ )\ \{}
\DoxyCodeLine{03218\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_ae75bea0ceb7483fdf0ed20c22556a907}{fc\_elog}}(\mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}block\ assert\_exception\ connection\ \$\{cid\}:\ \#\$\{n\}\ \$\{id\}...:\ \$\{m\}"{}},}
\DoxyCodeLine{03219\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}cid"{}},\ c-\/>connection\_id)(\textcolor{stringliteral}{"{}n"{}},\ blk\_num)(\textcolor{stringliteral}{"{}id"{}},\ blk\_id.str().substr(8,16))(\textcolor{stringliteral}{"{}m"{}},ex.to\_string()));}
\DoxyCodeLine{03220\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classfc_1_1exception}{fc::exception}}\ \&ex\ )\ \{}
\DoxyCodeLine{03221\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_ae75bea0ceb7483fdf0ed20c22556a907}{fc\_elog}}(\mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}bad\ block\ exception\ connection\ \$\{cid\}:\ \#\$\{n\}\ \$\{id\}...:\ \$\{m\}"{}},}
\DoxyCodeLine{03222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}cid"{}},\ c-\/>connection\_id)(\textcolor{stringliteral}{"{}n"{}},\ blk\_num)(\textcolor{stringliteral}{"{}id"{}},\ blk\_id.str().substr(8,16))(\textcolor{stringliteral}{"{}m"{}},ex.\mbox{\hyperlink{classfc_1_1exception_adbc4557b14bc29b74e9cf9f0ed5fb8d8}{to\_string}}()));}
\DoxyCodeLine{03223\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}(\ ...\ )\ \{}
\DoxyCodeLine{03224\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_ae75bea0ceb7483fdf0ed20c22556a907}{fc\_elog}}(\mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}bad\ block\ connection\ \$\{cid\}:\ \#\$\{n\}\ \$\{id\}...:\ unknown\ exception"{}},}
\DoxyCodeLine{03225\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}cid"{}},\ c-\/>connection\_id)(\textcolor{stringliteral}{"{}n"{}},\ blk\_num)(\textcolor{stringliteral}{"{}id"{}},\ blk\_id.str().substr(8,16)));}
\DoxyCodeLine{03226\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03227\ }
\DoxyCodeLine{03228\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ reason\ ==\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa35a3ee195246082e99a69c2636252839}{no\_reason}}\ )\ \{}
\DoxyCodeLine{03229\ \ \ \ \ \ \ \ \ \ boost::asio::post(\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_ad2e4fb9d1d2decf22a234af61f93ab63}{thread\_pool}}-\/>get\_executor(),\ [dispatcher\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a5b302f8ed2594b44aa126082cd07d941}{dispatcher}}.get(),\ cid=c-\/>connection\_id,\ blk\_id,\ msg]()\ \{}
\DoxyCodeLine{03230\ \ \ \ \ \ \ \ \ \ \ \ \ fc\_dlog(\ logger,\ \textcolor{stringliteral}{"{}accepted\ signed\_block\ :\ \#\$\{n\}\ \$\{id\}..."{}},\ (\textcolor{stringliteral}{"{}n"{}},\ msg-\/>block\_num())(\textcolor{stringliteral}{"{}id"{}},\ blk\_id.str().substr(8,16))\ );}
\DoxyCodeLine{03231\ \ \ \ \ \ \ \ \ \ \ \ \ dispatcher-\/>add\_peer\_block(\ blk\_id,\ cid\ );}
\DoxyCodeLine{03232\ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{03233\ \ \ \ \ \ \ \ \ \ c-\/>strand.post(\ [sync\_master\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a1ec38b54825da7f4f2ba7901d6318fd7}{sync\_master}}.get(),\ dispatcher\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a5b302f8ed2594b44aa126082cd07d941}{dispatcher}}.get(),\ c,\ blk\_id,\ blk\_num]()\ \{}
\DoxyCodeLine{03234\ \ \ \ \ \ \ \ \ \ \ \ \ dispatcher-\/>recv\_block(\ c,\ blk\_id,\ blk\_num\ );}
\DoxyCodeLine{03235\ \ \ \ \ \ \ \ \ \ \ \ \ sync\_master-\/>sync\_recv\_block(\ c,\ blk\_id,\ blk\_num,\ true\ );}
\DoxyCodeLine{03236\ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{03237\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03238\ \ \ \ \ \ \ \ \ \ c-\/>strand.post(\ [sync\_master\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a1ec38b54825da7f4f2ba7901d6318fd7}{sync\_master}}.get(),\ dispatcher\ =\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a5b302f8ed2594b44aa126082cd07d941}{dispatcher}}.get(),\ c,\ blk\_id,\ blk\_num]()\ \{}
\DoxyCodeLine{03239\ \ \ \ \ \ \ \ \ \ \ \ \ sync\_master-\/>rejected\_block(\ c,\ blk\_num\ );}
\DoxyCodeLine{03240\ \ \ \ \ \ \ \ \ \ \ \ \ dispatcher-\/>rejected\_block(\ blk\_id\ );}
\DoxyCodeLine{03241\ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{03242\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03243\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_a6f592c3d4516eababd8ecbfac04c4b7e_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_ae85a6909e1a531d6c27c0d22f12e61c9}\index{sysio::connection@{sysio::connection}!queue\_write@{queue\_write}}
\index{queue\_write@{queue\_write}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{queue\_write()}{queue\_write()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_ae85a6909e1a531d6c27c0d22f12e61c9} 
void sysio\+::connection\+::queue\+\_\+write (\begin{DoxyParamCaption}\item[{const std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classfc_1_1vector}{vector}}$<$ char $>$ $>$ \&}]{buff}{, }\item[{std\+::function$<$ void(boost\+::system\+::error\+\_\+code, std\+::size\+\_\+t)$>$}]{callback}{, }\item[{bool}]{to\+\_\+sync\+\_\+queue}{ = {\ttfamily false}}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l01200}{1200}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01202\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01203\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !\mbox{\hyperlink{classsysio_1_1connection_a8386b853edf1cbab18a09b8123cc525c}{buffer\_queue}}.\mbox{\hyperlink{classsysio_1_1queued__buffer_a48f2885d0e38c6e2b7c9037b449a2f3a}{add\_write\_queue}}(\ buff,\ callback,\ to\_sync\_queue\ ))\ \{}
\DoxyCodeLine{01204\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_af53787454493a30650fdab0193037465}{peer\_wlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}write\_queue\ full\ \$\{s\}\ bytes,\ giving\ up\ on\ connection"{}},\ (\textcolor{stringliteral}{"{}s"{}},\ \mbox{\hyperlink{classsysio_1_1connection_a8386b853edf1cbab18a09b8123cc525c}{buffer\_queue}}.\mbox{\hyperlink{classsysio_1_1queued__buffer_a6175551ba72684aede34883da1ca00fe}{write\_queue\_size}}())\ );}
\DoxyCodeLine{01205\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a7fe7bb50b91bd69cdf56c7c09a868e29}{close}}();}
\DoxyCodeLine{01206\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01207\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01208\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a4f6ca81d49c22eef80854175bff8ed42}{do\_queue\_write}}();}
\DoxyCodeLine{01209\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_ae85a6909e1a531d6c27c0d22f12e61c9_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a080e39968a1bee189ac8ae9beca41a62}\index{sysio::connection@{sysio::connection}!request\_sync\_blocks@{request\_sync\_blocks}}
\index{request\_sync\_blocks@{request\_sync\_blocks}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{request\_sync\_blocks()}{request\_sync\_blocks()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a080e39968a1bee189ac8ae9beca41a62} 
void sysio\+::connection\+::request\+\_\+sync\+\_\+blocks (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}}}]{start}{, }\item[{\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}}}]{end}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l01504}{1504}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01504\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01505\ \ \ \ \ \ \ sync\_request\_message\ srm\ =\ \{\mbox{\hyperlink{namespace_w_a_s_m_a9690a14428419003297ae35f505b5103aea2b2676c28c0db26d39331a336c6b92}{start}},end\};}
\DoxyCodeLine{01506\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_ad6a1bcdfc4bd9d2c7ab2278240def6b6}{enqueue}}(\ \mbox{\hyperlink{namespacesysio_a783ade47a6f13a71a9b75cd2c68d9965}{net\_message}}(srm)\ );}
\DoxyCodeLine{01507\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a80478330d64f3618011b52a3d46741bf}{sync\_wait}}();}
\DoxyCodeLine{01508\ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsysio_1_1connection_a11ecb500e5bd8050f97f0c5a585df2ad}\index{sysio::connection@{sysio::connection}!resolve\_and\_connect@{resolve\_and\_connect}}
\index{resolve\_and\_connect@{resolve\_and\_connect}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{resolve\_and\_connect()}{resolve\_and\_connect()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a11ecb500e5bd8050f97f0c5a585df2ad} 
bool sysio\+::connection\+::resolve\+\_\+and\+\_\+connect (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l02287}{2287}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02287\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02288\ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\ \mbox{\hyperlink{classsysio_1_1connection_a6b2649c5a44369243b03ddc3a5ee3695}{no\_retry}}\ )\ \{}
\DoxyCodeLine{02289\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa35a3ee195246082e99a69c2636252839}{no\_reason}}:}
\DoxyCodeLine{02290\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa756f81d28cc81faaeb96abc5172a3e5c}{wrong\_version}}:}
\DoxyCodeLine{02291\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fafd1331a94b3ecffdc5fcfdcd3d03687c}{benign\_other}}:}
\DoxyCodeLine{02292\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa0e69706b2240fb348d4933bc1fe7e883}{duplicate}}:\ \textcolor{comment}{//\ attempt\ reconnect\ in\ case\ connection\ has\ been\ dropped,\ should\ quickly\ disconnect\ if\ duplicate}}
\DoxyCodeLine{02293\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02294\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{02295\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}Skipping\ connect\ due\ to\ go\_away\ reason\ \$\{r\}"{}},(\textcolor{stringliteral}{"{}r"{}},\ \mbox{\hyperlink{namespacesysio_a9d60317a4b83cb3c91674336886005ee}{reason\_str}}(\ \mbox{\hyperlink{classsysio_1_1connection_a6b2649c5a44369243b03ddc3a5ee3695}{no\_retry}}\ )));}
\DoxyCodeLine{02296\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{02297\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02298\ }
\DoxyCodeLine{02299\ \ \ \ \ \ \ string::size\_type\ colon\ =\ \mbox{\hyperlink{classsysio_1_1connection_aca3e3acacf8047c389e0bda758da197d}{peer\_address}}().find(\textcolor{charliteral}{':'});}
\DoxyCodeLine{02300\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (colon\ ==\ std::string::npos\ ||\ colon\ ==\ 0)\ \{}
\DoxyCodeLine{02301\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_ae75bea0ceb7483fdf0ed20c22556a907}{fc\_elog}}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}Invalid\ peer\ address.\ must\ be\ \(\backslash\)"{}host:port[:<blk>|<trx>]\(\backslash\)"{}:\ \$\{p\}"{}},\ (\textcolor{stringliteral}{"{}p"{}},\ \mbox{\hyperlink{classsysio_1_1connection_aca3e3acacf8047c389e0bda758da197d}{peer\_address}}())\ );}
\DoxyCodeLine{02302\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{02303\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02304\ }
\DoxyCodeLine{02305\ \ \ \ \ \ \ \mbox{\hyperlink{debug__client_8cpp_ae9c9779aea742ab80689add7e553df0d}{connection\_ptr}}\ c\ =\ shared\_from\_this();}
\DoxyCodeLine{02306\ }
\DoxyCodeLine{02307\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1connection_a78f01e104b28e119cd1dbc3dff3a9af0}{consecutive\_immediate\_connection\_close}}\ >\ \mbox{\hyperlink{namespacesysio_af0f31e2c265e7bd2813fff241cd5cfcb}{def\_max\_consecutive\_immediate\_connection\_close}}\ ||\ \mbox{\hyperlink{classsysio_1_1connection_a6b2649c5a44369243b03ddc3a5ee3695}{no\_retry}}\ ==\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fafd1331a94b3ecffdc5fcfdcd3d03687c}{benign\_other}}\ )\ \{}
\DoxyCodeLine{02308\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ connector\_period\_us\ =\ std::chrono::duration\_cast<std::chrono::microseconds>(\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a452e65ba1dc3fda4c9bf14def8b59381}{connector\_period}}\ );}
\DoxyCodeLine{02309\ \ \ \ \ \ \ \ \ \ std::lock\_guard<std::mutex>\ g(\ c-\/>conn\_mtx\ );}
\DoxyCodeLine{02310\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ \mbox{\hyperlink{classsysio_1_1connection_a1b3e4fc9f2aba1b00e501e2419a2ca1c}{last\_close}}\ ==\ \mbox{\hyperlink{classfc_1_1time__point}{fc::time\_point}}()\ ||\ \mbox{\hyperlink{classsysio_1_1connection_a1b3e4fc9f2aba1b00e501e2419a2ca1c}{last\_close}}\ >\ \mbox{\hyperlink{classfc_1_1time__point_aa164ff1268a16d4b32afcff181f6100e}{fc::time\_point::now}}()\ -\/\ \mbox{\hyperlink{classfc_1_1microseconds}{fc::microseconds}}(\ connector\_period\_us.count()\ )\ )\ \{}
\DoxyCodeLine{02311\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \textcolor{comment}{//\ true\ so\ doesn't\ remove\ from\ valid\ connections}}
\DoxyCodeLine{02312\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02313\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02314\ }
\DoxyCodeLine{02315\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a950c534737276c9d0a2724d9801d7def}{strand}}.post([c]()\ \{}
\DoxyCodeLine{02316\ \ \ \ \ \ \ \ \ \ string::size\_type\ colon\ =\ c-\/>peer\_address().find(\textcolor{charliteral}{':'});}
\DoxyCodeLine{02317\ \ \ \ \ \ \ \ \ \ string::size\_type\ colon2\ =\ c-\/>peer\_address().find(\textcolor{charliteral}{':'},\ colon\ +\ 1);}
\DoxyCodeLine{02318\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ host\ =\ c-\/>peer\_address().substr(\ 0,\ colon\ );}
\DoxyCodeLine{02319\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ port\ =\ c-\/>peer\_address().substr(\ colon\ +\ 1,\ colon2\ ==\ string::npos\ ?\ string::npos\ :\ colon2\ -\/\ (colon\ +\ 1));}
\DoxyCodeLine{02320\ \ \ \ \ \ \ \ \ \ c-\/>set\_connection\_type(\ c-\/>peer\_address()\ );}
\DoxyCodeLine{02321\ }
\DoxyCodeLine{02322\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ resolver\ =\ std::make\_shared<tcp::resolver>(\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_ad2e4fb9d1d2decf22a234af61f93ab63}{thread\_pool}}-\/>get\_executor()\ );}
\DoxyCodeLine{02323\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_a6a48b685d0bf226f8d96c5cbbd648945}{connection\_wptr}}\ weak\_conn\ =\ c;}
\DoxyCodeLine{02324\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Note:\ need\ to\ add\ support\ for\ IPv6\ too}}
\DoxyCodeLine{02325\ \ \ \ \ \ \ \ \ \ resolver-\/>async\_resolve(\ tcp::v4(),\ host,\ port,\ boost::asio::bind\_executor(\ c-\/>strand,}
\DoxyCodeLine{02326\ \ \ \ \ \ \ \ \ \ \ \ \ [resolver,\ weak\_conn,\ host,\ port](\ \textcolor{keyword}{const}\ boost::system::error\_code\&\ err,\ tcp::resolver::results\_type\ endpoints\ )\ \{}
\DoxyCodeLine{02327\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ auto\ c\ =\ weak\_conn.lock();}
\DoxyCodeLine{02328\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if(\ !c\ )\ return;}
\DoxyCodeLine{02329\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if(\ !err\ )\ \{}
\DoxyCodeLine{02330\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>connect(\ resolver,\ endpoints\ );}
\DoxyCodeLine{02331\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02332\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fc\_elog(\ logger,\ \textcolor{stringliteral}{"{}Unable\ to\ resolve\ \$\{host\}:\$\{port\}\ \$\{error\}"{}},}
\DoxyCodeLine{02333\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}host"{}},\ host)(\textcolor{stringliteral}{"{}port"{}},\ port)(\ \textcolor{stringliteral}{"{}error"{}},\ err.message()\ )\ );}
\DoxyCodeLine{02334\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>connecting\ =\ false;}
\DoxyCodeLine{02335\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++c-\/>consecutive\_immediate\_connection\_close;}
\DoxyCodeLine{02336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02337\ \ \ \ \ \ \ \ \ \ \}\ )\ );}
\DoxyCodeLine{02338\ \ \ \ \ \ \ \}\ );}
\DoxyCodeLine{02339\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{02340\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_a11ecb500e5bd8050f97f0c5a585df2ad_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a55b561baeda5353d7c1a1e2a8a0c88e1}\index{sysio::connection@{sysio::connection}!send\_handshake@{send\_handshake}}
\index{send\_handshake@{send\_handshake}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{send\_handshake()}{send\_handshake()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a55b561baeda5353d7c1a1e2a8a0c88e1} 
void sysio\+::connection\+::send\+\_\+handshake (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l01137}{1137}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01138\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a950c534737276c9d0a2724d9801d7def}{strand}}.post(\ [c\ =\ shared\_from\_this()]()\ \{}
\DoxyCodeLine{01139\ \ \ \ \ \ \ \ \ \ std::unique\_lock<std::mutex>\ g\_conn(\ c-\/>conn\_mtx\ );}
\DoxyCodeLine{01140\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ c-\/>populate\_handshake(\ c-\/>last\_handshake\_sent\ )\ )\ \{}
\DoxyCodeLine{01141\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(\ std::is\_same\_v<\textcolor{keyword}{decltype}(\ c-\/>sent\_handshake\_count\ ),\ \mbox{\hyperlink{stdint_8h_a269259c924dce846340ddbb810db2e3c}{int16\_t}}>,\ \textcolor{stringliteral}{"{}INT16\_MAX\ based\ on\ int16\_t"{}}\ );}
\DoxyCodeLine{01142\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ c-\/>sent\_handshake\_count\ ==\ \mbox{\hyperlink{stdint_8h_ac58f2c111cc9989c86db2a7dc4fd84ca}{INT16\_MAX}}\ )\ c-\/>sent\_handshake\_count\ =\ 1;\ \textcolor{comment}{//\ do\ not\ wrap}}
\DoxyCodeLine{01143\ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>last\_handshake\_sent.generation\ =\ ++c-\/>sent\_handshake\_count;}
\DoxyCodeLine{01144\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classsysio_1_1connection_ab3d0dbb3bb254cbea92508af42dfe75b}{last\_handshake\_sent}}\ =\ c-\/>last\_handshake\_sent;}
\DoxyCodeLine{01145\ \ \ \ \ \ \ \ \ \ \ \ \ g\_conn.unlock();}
\DoxyCodeLine{01146\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_ad909b2ce03eb19202983c88ae2abe9bd}{peer\_ilog}}(\ c,\ \textcolor{stringliteral}{"{}Sending\ handshake\ generation\ \$\{g\},\ lib\ \$\{lib\},\ head\ \$\{head\},\ id\ \$\{id\}"{}},}
\DoxyCodeLine{01147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}g"{}},\ \mbox{\hyperlink{classsysio_1_1connection_ab3d0dbb3bb254cbea92508af42dfe75b}{last\_handshake\_sent}}.\mbox{\hyperlink{structsysio_1_1handshake__message_a62247b1e0a1a552278fc2b156d4d663f}{generation}})}
\DoxyCodeLine{01148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}lib"{}},\ \mbox{\hyperlink{classsysio_1_1connection_ab3d0dbb3bb254cbea92508af42dfe75b}{last\_handshake\_sent}}.\mbox{\hyperlink{structsysio_1_1handshake__message_a6a66b5762131e7f7684c0f5baf3a6705}{last\_irreversible\_block\_num}})}
\DoxyCodeLine{01149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}head"{}},\ \mbox{\hyperlink{classsysio_1_1connection_ab3d0dbb3bb254cbea92508af42dfe75b}{last\_handshake\_sent}}.\mbox{\hyperlink{structsysio_1_1handshake__message_a1b2717cc284cb6f783d1a2c4602f66d3}{head\_num}})(\textcolor{stringliteral}{"{}id"{}},\ \mbox{\hyperlink{classsysio_1_1connection_ab3d0dbb3bb254cbea92508af42dfe75b}{last\_handshake\_sent}}.\mbox{\hyperlink{structsysio_1_1handshake__message_a2ca0bcb5e2387d67ae1d05e7a9718595}{head\_id}}.\mbox{\hyperlink{classfc_1_1sha256_a71ac4efc1d964d24fdf00aeffcf0a9c9}{str}}().substr(8,16))\ );}
\DoxyCodeLine{01150\ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>enqueue(\ \mbox{\hyperlink{classsysio_1_1connection_ab3d0dbb3bb254cbea92508af42dfe75b}{last\_handshake\_sent}}\ );}
\DoxyCodeLine{01151\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01152\ \ \ \ \ \ \ \});}
\DoxyCodeLine{01153\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_a55b561baeda5353d7c1a1e2a8a0c88e1_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=313pt]{classsysio_1_1connection_a55b561baeda5353d7c1a1e2a8a0c88e1_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a1c134c29679142daab81ca9fe4a10996}\index{sysio::connection@{sysio::connection}!send\_time@{send\_time}}
\index{send\_time@{send\_time}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{send\_time()}{send\_time()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a1c134c29679142daab81ca9fe4a10996} 
void sysio\+::connection\+::send\+\_\+time (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l01181}{1181}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01182\ \ \ \ \ \ \ time\_message\ xpkt;}
\DoxyCodeLine{01183\ \ \ \ \ \ \ xpkt.org\ =\ \mbox{\hyperlink{classsysio_1_1connection_a0bc9d553ad16bc63449cdbcf6825c59f}{rec}};}
\DoxyCodeLine{01184\ \ \ \ \ \ \ xpkt.rec\ =\ \mbox{\hyperlink{classsysio_1_1connection_af43cec49a0884310396dad6d01c392e1}{dst}};}
\DoxyCodeLine{01185\ \ \ \ \ \ \ xpkt.xmt\ =\ \mbox{\hyperlink{classsysio_1_1connection_aa74b147947e087bc084d72a3d892a06f}{get\_time}}();}
\DoxyCodeLine{01186\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a6c055550228586b3534a4f2b5e87bc4e}{org}}\ =\ xpkt.xmt;}
\DoxyCodeLine{01187\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_ad6a1bcdfc4bd9d2c7ab2278240def6b6}{enqueue}}(xpkt);}
\DoxyCodeLine{01188\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_a1c134c29679142daab81ca9fe4a10996_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=313pt]{classsysio_1_1connection_a1c134c29679142daab81ca9fe4a10996_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a0a699ed89ab1cf5d95aba5aa7de17e18}\index{sysio::connection@{sysio::connection}!send\_time@{send\_time}}
\index{send\_time@{send\_time}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{send\_time()}{send\_time()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a0a699ed89ab1cf5d95aba5aa7de17e18} 
void sysio\+::connection\+::send\+\_\+time (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structsysio_1_1time__message}{time\+\_\+message}} \&}]{msg}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l01191}{1191}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01192\ \ \ \ \ \ \ time\_message\ xpkt;}
\DoxyCodeLine{01193\ \ \ \ \ \ \ xpkt.org\ =\ msg.xmt;}
\DoxyCodeLine{01194\ \ \ \ \ \ \ xpkt.rec\ =\ msg.dst;}
\DoxyCodeLine{01195\ \ \ \ \ \ \ xpkt.xmt\ =\ \mbox{\hyperlink{classsysio_1_1connection_aa74b147947e087bc084d72a3d892a06f}{get\_time}}();}
\DoxyCodeLine{01196\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_ad6a1bcdfc4bd9d2c7ab2278240def6b6}{enqueue}}(xpkt);}
\DoxyCodeLine{01197\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_a0a699ed89ab1cf5d95aba5aa7de17e18_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a1e59aa67f74b1e5bb0a2d8e7db584cdd}\index{sysio::connection@{sysio::connection}!set\_connection\_type@{set\_connection\_type}}
\index{set\_connection\_type@{set\_connection\_type}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{set\_connection\_type()}{set\_connection\_type()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a1e59aa67f74b1e5bb0a2d8e7db584cdd} 
void sysio\+::connection\+::set\+\_\+connection\+\_\+type (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} \&}]{peer\+\_\+addr}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00918}{918}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00918\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00919\ \ \ \ \ \ \ \textcolor{comment}{//\ host:port:[<trx>|<blk>]}}
\DoxyCodeLine{00920\ \ \ \ \ \ \ string::size\_type\ colon\ =\ peer\_add.find(\textcolor{charliteral}{':'});}
\DoxyCodeLine{00921\ \ \ \ \ \ \ string::size\_type\ colon2\ =\ peer\_add.find(\textcolor{charliteral}{':'},\ colon\ +\ 1);}
\DoxyCodeLine{00922\ \ \ \ \ \ \ string::size\_type\ end\ =\ colon2\ ==\ string::npos}
\DoxyCodeLine{00923\ \ \ \ \ \ \ \ \ \ \ \ \ ?\ string::npos\ :\ peer\_add.find\_first\_of(\ \textcolor{stringliteral}{"{}\ :+=.,<>!\$\%\string^\&(*)|-\/\#@\(\backslash\)t"{}},\ colon2\ +\ 1\ );\ \textcolor{comment}{//\ future\ proof\ by\ including\ most\ symbols\ without\ using\ regex}}
\DoxyCodeLine{00924\ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ host\ =\ peer\_add.substr(\ 0,\ colon\ );}
\DoxyCodeLine{00925\ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ port\ =\ peer\_add.substr(\ colon\ +\ 1,\ colon2\ ==\ string::npos\ ?\ string::npos\ :\ colon2\ -\/\ (colon\ +\ 1));}
\DoxyCodeLine{00926\ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ type\ =\ colon2\ ==\ string::npos\ ?\ \textcolor{stringliteral}{"{}"{}}\ :\ end\ ==\ string::npos\ ?}
\DoxyCodeLine{00927\ \ \ \ \ \ \ \ \ \ \ \ \ peer\_add.substr(\ colon2\ +\ 1\ )\ :\ peer\_add.substr(\ colon2\ +\ 1,\ end\ -\/\ (colon2\ +\ 1)\ );}
\DoxyCodeLine{00928\ }
\DoxyCodeLine{00929\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ type.empty()\ )\ \{}
\DoxyCodeLine{00930\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}Setting\ connection\ \$\{c\}\ type\ for:\ \$\{peer\}\ to\ both\ transactions\ and\ blocks"{}},\ (\textcolor{stringliteral}{"{}c"{}},\ \mbox{\hyperlink{classsysio_1_1connection_a1eb3bd460e47bead479e1b6f7eb58df4}{connection\_id}})(\textcolor{stringliteral}{"{}peer"{}},\ peer\_add)\ );}
\DoxyCodeLine{00931\ \ \ \ \ \ \ \ \ \ connection\_type\ =\ both;}
\DoxyCodeLine{00932\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\ type\ ==\ \textcolor{stringliteral}{"{}trx"{}}\ )\ \{}
\DoxyCodeLine{00933\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}Setting\ connection\ \$\{c\}\ type\ for:\ \$\{peer\}\ to\ transactions\ only"{}},\ (\textcolor{stringliteral}{"{}c"{}},\ \mbox{\hyperlink{classsysio_1_1connection_a1eb3bd460e47bead479e1b6f7eb58df4}{connection\_id}})(\textcolor{stringliteral}{"{}peer"{}},\ peer\_add)\ );}
\DoxyCodeLine{00934\ \ \ \ \ \ \ \ \ \ connection\_type\ =\ transactions\_only;}
\DoxyCodeLine{00935\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\ type\ ==\ \textcolor{stringliteral}{"{}blk"{}}\ )\ \{}
\DoxyCodeLine{00936\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af5adfcda7e0a01306256754a6511915d}{fc\_dlog}}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}Setting\ connection\ \$\{c\}\ type\ for:\ \$\{peer\}\ to\ blocks\ only"{}},\ (\textcolor{stringliteral}{"{}c"{}},\ \mbox{\hyperlink{classsysio_1_1connection_a1eb3bd460e47bead479e1b6f7eb58df4}{connection\_id}})(\textcolor{stringliteral}{"{}peer"{}},\ peer\_add)\ );}
\DoxyCodeLine{00937\ \ \ \ \ \ \ \ \ \ connection\_type\ =\ blocks\_only;}
\DoxyCodeLine{00938\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00939\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_af3086372b1da6bfce45ff871734f2e8d}{fc\_wlog}}(\ \mbox{\hyperlink{classfc_1_1logger}{logger}},\ \textcolor{stringliteral}{"{}Unknown\ connection\ \$\{c\}\ type:\ \$\{t\},\ for\ \$\{peer\}"{}},\ (\textcolor{stringliteral}{"{}c"{}},\ \mbox{\hyperlink{classsysio_1_1connection_a1eb3bd460e47bead479e1b6f7eb58df4}{connection\_id}})(\textcolor{stringliteral}{"{}t"{}},\ type)(\textcolor{stringliteral}{"{}peer"{}},\ peer\_add)\ );}
\DoxyCodeLine{00940\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00941\ \ \ \ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=321pt]{classsysio_1_1connection_a1e59aa67f74b1e5bb0a2d8e7db584cdd_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a028630cf58fe0facfd2d756f6c203180}\index{sysio::connection@{sysio::connection}!set\_heartbeat\_timeout@{set\_heartbeat\_timeout}}
\index{set\_heartbeat\_timeout@{set\_heartbeat\_timeout}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{set\_heartbeat\_timeout()}{set\_heartbeat\_timeout()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a028630cf58fe0facfd2d756f6c203180} 
void sysio\+::connection\+::set\+\_\+heartbeat\+\_\+timeout (\begin{DoxyParamCaption}\item[{std\+::chrono\+::milliseconds}]{msec}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00596}{596}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00596\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \ \ \ std::chrono::system\_clock::duration\ dur\ =\ msec;}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a1f3730a3eedfe33fa59dae7c485c341a}{hb\_timeout}}\ =\ dur.count();}
\DoxyCodeLine{00599\ \ \ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classsysio_1_1connection_adee4be2152a35cc0122e53365e8e1937}\index{sysio::connection@{sysio::connection}!socket\_is\_open@{socket\_is\_open}}
\index{socket\_is\_open@{socket\_is\_open}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{socket\_is\_open()}{socket\_is\_open()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_adee4be2152a35cc0122e53365e8e1937} 
bool sysio\+::connection\+::socket\+\_\+is\+\_\+open (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00590}{590}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00590\ \{\ \textcolor{keywordflow}{return}\ socket\_open.load();\ \}\ \textcolor{comment}{//\ thread\ safe,\ atomic}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_adee4be2152a35cc0122e53365e8e1937_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a5b1658474d4667bfca0ee4e1e2c605a8}\index{sysio::connection@{sysio::connection}!start\_read\_message@{start\_read\_message}}
\index{start\_read\_message@{start\_read\_message}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{start\_read\_message()}{start\_read\_message()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a5b1658474d4667bfca0ee4e1e2c605a8} 
void sysio\+::connection\+::start\+\_\+read\+\_\+message (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l02432}{2432}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02432\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02433\ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{02434\ \ \ \ \ \ \ \ \ \ std::size\_t\ minimum\_read\ =}
\DoxyCodeLine{02435\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::atomic\_exchange<\textcolor{keyword}{decltype}(\mbox{\hyperlink{classsysio_1_1connection_a3de4218791d8273eb83a54409af84cf1}{outstanding\_read\_bytes}}.load())>(\ \&\mbox{\hyperlink{classsysio_1_1connection_a3de4218791d8273eb83a54409af84cf1}{outstanding\_read\_bytes}},\ 0\ );}
\DoxyCodeLine{02436\ \ \ \ \ \ \ \ \ \ minimum\_read\ =\ minimum\_read\ !=\ 0\ ?\ minimum\_read\ :\ \mbox{\hyperlink{namespacesysio_a00c50092ca42151d17c3e24f7649e607}{message\_header\_size}};}
\DoxyCodeLine{02437\ }
\DoxyCodeLine{02438\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a712b3e6b420a962e8a75adcc279bfadf}{use\_socket\_read\_watermark}})\ \{}
\DoxyCodeLine{02439\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ max\_socket\_read\_watermark\ =\ 4096;}
\DoxyCodeLine{02440\ \ \ \ \ \ \ \ \ \ \ \ \ std::size\_t\ socket\_read\_watermark\ =\ std::min<std::size\_t>(minimum\_read,\ max\_socket\_read\_watermark);}
\DoxyCodeLine{02441\ \ \ \ \ \ \ \ \ \ \ \ \ boost::asio::socket\_base::receive\_low\_watermark\ read\_watermark\_opt(socket\_read\_watermark);}
\DoxyCodeLine{02442\ \ \ \ \ \ \ \ \ \ \ \ \ boost::system::error\_code\ ec;}
\DoxyCodeLine{02443\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_adb1c345e310c4bf64faa889c01440404}{socket}}-\/>set\_option(\ read\_watermark\_opt,\ ec\ );}
\DoxyCodeLine{02444\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ ec\ )\ \{}
\DoxyCodeLine{02445\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}unable\ to\ set\ read\ watermark:\ \$\{e1\}"{}},\ (\textcolor{stringliteral}{"{}e1"{}},\ ec.message())\ );}
\DoxyCodeLine{02446\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02447\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02448\ }
\DoxyCodeLine{02449\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ completion\_handler\ =\ [minimum\_read](boost::system::error\_code\ ec,\ std::size\_t\ bytes\_transferred)\ -\/>\ std::size\_t\ \{}
\DoxyCodeLine{02450\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ec\ ||\ bytes\_transferred\ >=\ minimum\_read\ )\ \{}
\DoxyCodeLine{02451\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{02452\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02453\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ minimum\_read\ -\/\ bytes\_transferred;}
\DoxyCodeLine{02454\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02455\ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{02456\ }
\DoxyCodeLine{02457\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ write\_queue\_size\ =\ \mbox{\hyperlink{classsysio_1_1connection_a8386b853edf1cbab18a09b8123cc525c}{buffer\_queue}}.\mbox{\hyperlink{classsysio_1_1queued__buffer_a6175551ba72684aede34883da1ca00fe}{write\_queue\_size}}();}
\DoxyCodeLine{02458\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ write\_queue\_size\ >\ \mbox{\hyperlink{namespacesysio_abb93a5792d3705e475c32a3d63c459ce}{def\_max\_write\_queue\_size}}\ )\ \{}
\DoxyCodeLine{02459\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}write\ queue\ full\ \$\{s\}\ bytes,\ giving\ up\ on\ connection,\ closing"{}},\ (\textcolor{stringliteral}{"{}s"{}},\ write\_queue\_size)\ );}
\DoxyCodeLine{02460\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a7fe7bb50b91bd69cdf56c7c09a868e29}{close}}(\ \textcolor{keyword}{false}\ );}
\DoxyCodeLine{02461\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02462\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02463\ }
\DoxyCodeLine{02464\ \ \ \ \ \ \ \ \ \ boost::asio::async\_read(\ *\mbox{\hyperlink{classsysio_1_1connection_adb1c345e310c4bf64faa889c01440404}{socket}},}
\DoxyCodeLine{02465\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_af241d498d210d4e238b73f7bcd1c45d1}{pending\_message\_buffer}}.\mbox{\hyperlink{classfc_1_1message__buffer_a7d14c84a452f14a0616f90cc3771efa9}{get\_buffer\_sequence\_for\_boost\_async\_read}}(),\ completion\_handler,}
\DoxyCodeLine{02466\ \ \ \ \ \ \ \ \ \ \ \ \ boost::asio::bind\_executor(\ \mbox{\hyperlink{classsysio_1_1connection_a950c534737276c9d0a2724d9801d7def}{strand}},}
\DoxyCodeLine{02467\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [conn\ =\ shared\_from\_this(),\ \mbox{\hyperlink{classsysio_1_1connection_adb1c345e310c4bf64faa889c01440404}{socket}}=\mbox{\hyperlink{classsysio_1_1connection_adb1c345e310c4bf64faa889c01440404}{socket}}](\ boost::system::error\_code\ ec,\ std::size\_t\ bytes\_transferred\ )\ \{}
\DoxyCodeLine{02468\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ may\ have\ closed\ connection\ and\ cleared\ pending\_message\_buffer}}
\DoxyCodeLine{02469\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !conn-\/>socket\_is\_open()\ ||\ \mbox{\hyperlink{classsysio_1_1connection_adb1c345e310c4bf64faa889c01440404}{socket}}\ !=\ conn-\/>socket\ )\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02470\ }
\DoxyCodeLine{02471\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ close\_connection\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02472\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{02473\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !ec\ )\ \{}
\DoxyCodeLine{02474\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bytes\_transferred\ >\ conn-\/>pending\_message\_buffer.bytes\_to\_write())\ \{}
\DoxyCodeLine{02475\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ conn,\ \textcolor{stringliteral}{"{}async\_read\_some\ callback:\ bytes\_transfered\ =\ \$\{bt\},\ buffer.bytes\_to\_write\ =\ \$\{btw\}"{}},}
\DoxyCodeLine{02476\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}bt"{}},bytes\_transferred)(\textcolor{stringliteral}{"{}btw"{}},conn-\/>pending\_message\_buffer.bytes\_to\_write())\ );}
\DoxyCodeLine{02477\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02478\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(bytes\_transferred\ <=\ conn-\/>\mbox{\hyperlink{classsysio_1_1connection_af241d498d210d4e238b73f7bcd1c45d1}{pending\_message\_buffer}}.\mbox{\hyperlink{classfc_1_1message__buffer_af4540535b3ef876e42631178c997e59b}{bytes\_to\_write}}(),\ plugin\_exception,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{02479\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ conn-\/>pending\_message\_buffer.advance\_write\_ptr(bytes\_transferred);}
\DoxyCodeLine{02480\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (conn-\/>pending\_message\_buffer.bytes\_to\_read()\ >\ 0)\ \{}
\DoxyCodeLine{02481\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ bytes\_in\_buffer\ =\ conn-\/>pending\_message\_buffer.bytes\_to\_read();}
\DoxyCodeLine{02482\ }
\DoxyCodeLine{02483\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bytes\_in\_buffer\ <\ \mbox{\hyperlink{namespacesysio_a00c50092ca42151d17c3e24f7649e607}{message\_header\_size}})\ \{}
\DoxyCodeLine{02484\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ conn-\/>outstanding\_read\_bytes\ =\ \mbox{\hyperlink{namespacesysio_a00c50092ca42151d17c3e24f7649e607}{message\_header\_size}}\ -\/\ bytes\_in\_buffer;}
\DoxyCodeLine{02485\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02486\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02487\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ message\_length;}
\DoxyCodeLine{02488\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ index\ =\ conn-\/>pending\_message\_buffer.read\_index();}
\DoxyCodeLine{02489\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ conn-\/>pending\_message\_buffer.peek(\&message\_length,\ \textcolor{keyword}{sizeof}(message\_length),\ index);}
\DoxyCodeLine{02490\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(message\_length\ >\ \mbox{\hyperlink{namespacesysio_a95d09aabadb97a4b0486d6568319c5b1}{def\_send\_buffer\_size}}*2\ ||\ message\_length\ ==\ 0)\ \{}
\DoxyCodeLine{02491\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ conn,\ \textcolor{stringliteral}{"{}incoming\ message\ length\ unexpected\ (\$\{i\})"{}},\ (\textcolor{stringliteral}{"{}i"{}},\ message\_length)\ );}
\DoxyCodeLine{02492\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ close\_connection\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02493\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02494\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02495\ }
\DoxyCodeLine{02496\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ total\_message\_bytes\ =\ message\_length\ +\ \mbox{\hyperlink{namespacesysio_a00c50092ca42151d17c3e24f7649e607}{message\_header\_size}};}
\DoxyCodeLine{02497\ }
\DoxyCodeLine{02498\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bytes\_in\_buffer\ >=\ total\_message\_bytes)\ \{}
\DoxyCodeLine{02499\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ conn-\/>pending\_message\_buffer.advance\_read\_ptr(\mbox{\hyperlink{namespacesysio_a00c50092ca42151d17c3e24f7649e607}{message\_header\_size}});}
\DoxyCodeLine{02500\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ conn-\/>consecutive\_immediate\_connection\_close\ =\ 0;}
\DoxyCodeLine{02501\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!conn-\/>process\_next\_message(message\_length))\ \{}
\DoxyCodeLine{02502\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02503\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02504\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02505\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ outstanding\_message\_bytes\ =\ total\_message\_bytes\ -\/\ bytes\_in\_buffer;}
\DoxyCodeLine{02506\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ available\_buffer\_bytes\ =\ conn-\/>pending\_message\_buffer.bytes\_to\_write();}
\DoxyCodeLine{02507\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (outstanding\_message\_bytes\ >\ available\_buffer\_bytes)\ \{}
\DoxyCodeLine{02508\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ conn-\/>pending\_message\_buffer.add\_space(\ outstanding\_message\_bytes\ -\/\ available\_buffer\_bytes\ );}
\DoxyCodeLine{02509\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02510\ }
\DoxyCodeLine{02511\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ conn-\/>outstanding\_read\_bytes\ =\ outstanding\_message\_bytes;}
\DoxyCodeLine{02512\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02513\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02514\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02515\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02516\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !close\_connection\ )\ conn-\/>start\_read\_message();}
\DoxyCodeLine{02517\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02518\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ec.value()\ !=\ boost::asio::error::eof)\ \{}
\DoxyCodeLine{02519\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ conn,\ \textcolor{stringliteral}{"{}Error\ reading\ message:\ \$\{m\}"{}},\ (\ \textcolor{stringliteral}{"{}m"{}},\ ec.message()\ )\ );}
\DoxyCodeLine{02520\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02521\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_ad909b2ce03eb19202983c88ae2abe9bd}{peer\_ilog}}(\ conn,\ \textcolor{stringliteral}{"{}Peer\ closed\ connection"{}}\ );}
\DoxyCodeLine{02522\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02523\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ close\_connection\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02524\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02525\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ }
\DoxyCodeLine{02526\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (\ \textcolor{keyword}{const}\ std::bad\_alloc\&\ )\ }
\DoxyCodeLine{02527\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02528\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw};}
\DoxyCodeLine{02529\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ }
\DoxyCodeLine{02530\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (\ \textcolor{keyword}{const}\ boost::interprocess::bad\_alloc\&\ )\ }
\DoxyCodeLine{02531\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02532\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw};}
\DoxyCodeLine{02533\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ }
\DoxyCodeLine{02534\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classfc_1_1exception}{fc::exception}}\ \&ex)\ }
\DoxyCodeLine{02535\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02536\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ conn,\ \textcolor{stringliteral}{"{}Exception\ in\ handling\ read\ data\ \$\{s\}"{}},\ (\textcolor{stringliteral}{"{}s"{}},ex.\mbox{\hyperlink{classfc_1_1exception_adbc4557b14bc29b74e9cf9f0ed5fb8d8}{to\_string}}())\ );}
\DoxyCodeLine{02537\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ close\_connection\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02538\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02539\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}(\textcolor{keyword}{const}\ std::exception\ \&ex)\ \{}
\DoxyCodeLine{02540\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ conn,\ \textcolor{stringliteral}{"{}Exception\ in\ handling\ read\ data:\ \$\{s\}"{}},\ (\textcolor{stringliteral}{"{}s"{}},ex.what())\ );}
\DoxyCodeLine{02541\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ close\_connection\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02542\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02543\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (...)\ \{}
\DoxyCodeLine{02544\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ conn,\ \textcolor{stringliteral}{"{}Undefined\ exception\ handling\ read\ data"{}}\ );}
\DoxyCodeLine{02545\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ close\_connection\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02546\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02547\ }
\DoxyCodeLine{02548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ close\_connection\ )\ \{}
\DoxyCodeLine{02549\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ conn,\ \textcolor{stringliteral}{"{}Closing\ connection"{}}\ );}
\DoxyCodeLine{02550\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ conn-\/>close();}
\DoxyCodeLine{02551\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02552\ \ \ \ \ \ \ \ \ \ \}));}
\DoxyCodeLine{02553\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (...)\ \{}
\DoxyCodeLine{02554\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}Undefined\ exception\ in\ start\_read\_message,\ closing\ connection"{}}\ );}
\DoxyCodeLine{02555\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a7fe7bb50b91bd69cdf56c7c09a868e29}{close}}();}
\DoxyCodeLine{02556\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02557\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_a5b1658474d4667bfca0ee4e1e2c605a8_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=319pt]{classsysio_1_1connection_a5b1658474d4667bfca0ee4e1e2c605a8_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a4267b7b591fb8051841cf1d11228e0e1}\index{sysio::connection@{sysio::connection}!start\_session@{start\_session}}
\index{start\_session@{start\_session}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{start\_session()}{start\_session()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a4267b7b591fb8051841cf1d11228e0e1} 
bool sysio\+::connection\+::start\+\_\+session (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00954}{954}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00954\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00955\ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_a19cc0c616331757f980d857722b4e07e}{verify\_strand\_in\_this\_thread}}(\ \mbox{\hyperlink{classsysio_1_1connection_a950c534737276c9d0a2724d9801d7def}{strand}},\ \mbox{\hyperlink{log__message_8hpp_a7d6e1cf1a8d53f38471e9e9db3faf740}{\_\_func\_\_}},\ \_\_LINE\_\_\ );}
\DoxyCodeLine{00956\ }
\DoxyCodeLine{00957\ \ \ \ \ \ \ update\_endpoints();}
\DoxyCodeLine{00958\ \ \ \ \ \ \ boost::asio::ip::tcp::no\_delay\ nodelay(\ \textcolor{keyword}{true}\ );}
\DoxyCodeLine{00959\ \ \ \ \ \ \ boost::system::error\_code\ ec;}
\DoxyCodeLine{00960\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_adb1c345e310c4bf64faa889c01440404}{socket}}-\/>set\_option(\ nodelay,\ ec\ );}
\DoxyCodeLine{00961\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ ec\ )\ \{}
\DoxyCodeLine{00962\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}connection\ failed\ (set\_option):\ \$\{e1\}"{}},\ (\ \textcolor{stringliteral}{"{}e1"{}},\ ec.message()\ )\ );}
\DoxyCodeLine{00963\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a7fe7bb50b91bd69cdf56c7c09a868e29}{close}}();}
\DoxyCodeLine{00964\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00965\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00966\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a051c62a0ec99dcd3e7a38fd03bec1fe0}{peer\_dlog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}connected"{}}\ );}
\DoxyCodeLine{00967\ \ \ \ \ \ \ \ \ \ socket\_open\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00968\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a5b1658474d4667bfca0ee4e1e2c605a8}{start\_read\_message}}();}
\DoxyCodeLine{00969\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00970\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00971\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsysio_1_1connection_a4267b7b591fb8051841cf1d11228e0e1_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_ab07f49d550a613d2ceb2520b331f5ac1}\index{sysio::connection@{sysio::connection}!stop\_send@{stop\_send}}
\index{stop\_send@{stop\_send}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{stop\_send()}{stop\_send()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_ab07f49d550a613d2ceb2520b331f5ac1} 
void sysio\+::connection\+::stop\+\_\+send (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l01133}{1133}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01134\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_ab77357d0ed0b422c2d6a15065d818ff6}{syncing}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01135\ \ \ \ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=313pt]{classsysio_1_1connection_ab07f49d550a613d2ceb2520b331f5ac1_icgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_ad0e0cfdddd3e9310edf72ac725bbe995}\index{sysio::connection@{sysio::connection}!sync\_timeout@{sync\_timeout}}
\index{sync\_timeout@{sync\_timeout}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{sync\_timeout()}{sync\_timeout()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_ad0e0cfdddd3e9310edf72ac725bbe995} 
void sysio\+::connection\+::sync\+\_\+timeout (\begin{DoxyParamCaption}\item[{boost\+::system\+::error\+\_\+code}]{ec}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l01485}{1485}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01485\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01486\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !ec\ )\ \{}
\DoxyCodeLine{01487\ \ \ \ \ \ \ \ \ \ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a1ec38b54825da7f4f2ba7901d6318fd7}{sync\_master}}-\/>sync\_reassign\_fetch(\ shared\_from\_this(),\ \mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fafd1331a94b3ecffdc5fcfdcd3d03687c}{benign\_other}}\ );}
\DoxyCodeLine{01488\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a7fe7bb50b91bd69cdf56c7c09a868e29}{close}}(\textcolor{keyword}{true});}
\DoxyCodeLine{01489\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(\ ec\ !=\ boost::asio::error::operation\_aborted\ )\ \{\ \textcolor{comment}{//\ don't\ log\ on\ operation\_aborted,\ called\ on\ destroy}}
\DoxyCodeLine{01490\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{net__plugin_8cpp_a0237ff767d828f6a423a4728c65b11b8}{peer\_elog}}(\ \textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}setting\ timer\ for\ sync\ request\ got\ error\ \$\{ec\}"{}},\ (\textcolor{stringliteral}{"{}ec"{}},\ ec.message())\ );}
\DoxyCodeLine{01491\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01492\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=254pt]{classsysio_1_1connection_ad0e0cfdddd3e9310edf72ac725bbe995_cgraph}
\end{center}
\end{figure}
\Hypertarget{classsysio_1_1connection_a80478330d64f3618011b52a3d46741bf}\index{sysio::connection@{sysio::connection}!sync\_wait@{sync\_wait}}
\index{sync\_wait@{sync\_wait}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{sync\_wait()}{sync\_wait()}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a80478330d64f3618011b52a3d46741bf} 
void sysio\+::connection\+::sync\+\_\+wait (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l01463}{1463}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01463\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01464\ \ \ \ \ \ \ \mbox{\hyperlink{debug__client_8cpp_ae9c9779aea742ab80689add7e553df0d}{connection\_ptr}}\ c(shared\_from\_this());}
\DoxyCodeLine{01465\ \ \ \ \ \ \ std::lock\_guard<std::mutex>\ g(\ \mbox{\hyperlink{classsysio_1_1connection_a70c7d2d3ab6b30deeaf88b98925623c2}{response\_expected\_timer\_mtx}}\ );}
\DoxyCodeLine{01466\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a237374fa72d9b4b4e56f6f9a685bed1a}{response\_expected\_timer}}.expires\_from\_now(\ my\_impl-\/>\mbox{\hyperlink{classsysio_1_1net__plugin__impl_a889da348e86c742b7551deac74b592aa}{resp\_expected\_period}}\ );}
\DoxyCodeLine{01467\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1connection_a237374fa72d9b4b4e56f6f9a685bed1a}{response\_expected\_timer}}.async\_wait(}
\DoxyCodeLine{01468\ \ \ \ \ \ \ \ \ \ \ \ \ boost::asio::bind\_executor(\ c-\/>strand,\ [c](\ boost::system::error\_code\ ec\ )\ \{}
\DoxyCodeLine{01469\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>sync\_timeout(\ ec\ );}
\DoxyCodeLine{01470\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ )\ );}
\DoxyCodeLine{01471\ \ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\Hypertarget{classsysio_1_1connection_a92ba884c29f380a737f997a9ff3264f5}\index{sysio::connection@{sysio::connection}!block\_status\_monitor\_@{block\_status\_monitor\_}}
\index{block\_status\_monitor\_@{block\_status\_monitor\_}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{block\_status\_monitor\_}{block\_status\_monitor\_}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a92ba884c29f380a737f997a9ff3264f5} 
\mbox{\hyperlink{classsysio_1_1block__status__monitor}{block\+\_\+status\+\_\+monitor}} sysio\+::connection\+::block\+\_\+status\+\_\+monitor\+\_\+}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00645}{645}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_a8386b853edf1cbab18a09b8123cc525c}\index{sysio::connection@{sysio::connection}!buffer\_queue@{buffer\_queue}}
\index{buffer\_queue@{buffer\_queue}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{buffer\_queue}{buffer\_queue}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a8386b853edf1cbab18a09b8123cc525c} 
\mbox{\hyperlink{classsysio_1_1queued__buffer}{queued\+\_\+buffer}} sysio\+::connection\+::buffer\+\_\+queue}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00626}{626}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_a675e5b04f968aa689c49d511c601fffa}\index{sysio::connection@{sysio::connection}!conn\_mtx@{conn\_mtx}}
\index{conn\_mtx@{conn\_mtx}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{conn\_mtx}{conn\_mtx}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a675e5b04f968aa689c49d511c601fffa} 
std\+::mutex sysio\+::connection\+::conn\+\_\+mtx\hspace{0.3cm}{\ttfamily [mutable]}}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00653}{653}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_a5876262162c34ec954ada46f15fe9992}\index{sysio::connection@{sysio::connection}!conn\_node\_id@{conn\_node\_id}}
\index{conn\_node\_id@{conn\_node\_id}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{conn\_node\_id}{conn\_node\_id}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a5876262162c34ec954ada46f15fe9992} 
\mbox{\hyperlink{classfc_1_1sha256}{fc\+::sha256}} sysio\+::connection\+::conn\+\_\+node\+\_\+id}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00628}{628}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_a2cb1b55074b31325f9845700fd7ede82}\index{sysio::connection@{sysio::connection}!connecting@{connecting}}
\index{connecting@{connecting}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{connecting}{connecting}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a2cb1b55074b31325f9845700fd7ede82} 
std\+::atomic$<$bool$>$ sysio\+::connection\+::connecting \{true\}}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00640}{640}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00640\ \{\textcolor{keyword}{true}\};}

\end{DoxyCode}
\Hypertarget{classsysio_1_1connection_a1eb3bd460e47bead479e1b6f7eb58df4}\index{sysio::connection@{sysio::connection}!connection\_id@{connection\_id}}
\index{connection\_id@{connection\_id}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{connection\_id}{connection\_id}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a1eb3bd460e47bead479e1b6f7eb58df4} 
const \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} sysio\+::connection\+::connection\+\_\+id}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00638}{638}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_a78f01e104b28e119cd1dbc3dff3a9af0}\index{sysio::connection@{sysio::connection}!consecutive\_immediate\_connection\_close@{consecutive\_immediate\_connection\_close}}
\index{consecutive\_immediate\_connection\_close@{consecutive\_immediate\_connection\_close}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{consecutive\_immediate\_connection\_close}{consecutive\_immediate\_connection\_close}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a78f01e104b28e119cd1dbc3dff3a9af0} 
std\+::atomic$<$\mbox{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}$>$ sysio\+::connection\+::consecutive\+\_\+immediate\+\_\+connection\+\_\+close = 0}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00646}{646}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_af43cec49a0884310396dad6d01c392e1}\index{sysio::connection@{sysio::connection}!dst@{dst}}
\index{dst@{dst}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{dst}{dst}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_af43cec49a0884310396dad6d01c392e1} 
\mbox{\hyperlink{namespacesysio_a42c15380188aaacda97b061d7c538d13}{tstamp}} sysio\+::connection\+::dst \{0\}}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00671}{671}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00671\ \{0\};\ \ \ \ \ \ \ \ \ \ }

\end{DoxyCode}
\Hypertarget{classsysio_1_1connection_a8ab199b4d05aa4d83530e3342ecbfa1e}\index{sysio::connection@{sysio::connection}!fork\_head@{fork\_head}}
\index{fork\_head@{fork\_head}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{fork\_head}{fork\_head}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a8ab199b4d05aa4d83530e3342ecbfa1e} 
\mbox{\hyperlink{namespacesysio_1_1chain_a4b8e4b7ed9dcd18ee75d0de62e88aa17}{block\+\_\+id\+\_\+type}} sysio\+::connection\+::fork\+\_\+head}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00657}{657}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_aa85ae38be5738029a500379b8d893091}\index{sysio::connection@{sysio::connection}!fork\_head\_num@{fork\_head\_num}}
\index{fork\_head\_num@{fork\_head\_num}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{fork\_head\_num}{fork\_head\_num}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_aa85ae38be5738029a500379b8d893091} 
\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} sysio\+::connection\+::fork\+\_\+head\+\_\+num \{0\}}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00658}{658}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00658\ \{0\};}

\end{DoxyCode}
\Hypertarget{classsysio_1_1connection_a1f3730a3eedfe33fa59dae7c485c341a}\index{sysio::connection@{sysio::connection}!hb\_timeout@{hb\_timeout}}
\index{hb\_timeout@{hb\_timeout}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{hb\_timeout}{hb\_timeout}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a1f3730a3eedfe33fa59dae7c485c341a} 
\mbox{\hyperlink{namespacesysio_a42c15380188aaacda97b061d7c538d13}{tstamp}} sysio\+::connection\+::hb\+\_\+timeout \{std\+::chrono\+::milliseconds\{\mbox{\hyperlink{namespacesysio_abc26639460234641b6403139e74422ed}{def\+\_\+keepalive\+\_\+interval}}\}.\mbox{\hyperlink{gmock__stress__test_8cc_afd9db40e3361ae09188795e8cbe19752}{count}}()\}}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00676}{676}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00676\ \{std::chrono::milliseconds\{\mbox{\hyperlink{namespacesysio_abc26639460234641b6403139e74422ed}{def\_keepalive\_interval}}\}.count()\};}

\end{DoxyCode}
\Hypertarget{classsysio_1_1connection_a1b3e4fc9f2aba1b00e501e2419a2ca1c}\index{sysio::connection@{sysio::connection}!last\_close@{last\_close}}
\index{last\_close@{last\_close}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{last\_close}{last\_close}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a1b3e4fc9f2aba1b00e501e2419a2ca1c} 
\mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} sysio\+::connection\+::last\+\_\+close}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00659}{659}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_a5568620d90b51490488682e99abe1802}\index{sysio::connection@{sysio::connection}!last\_dropped\_trx\_msg\_time@{last\_dropped\_trx\_msg\_time}}
\index{last\_dropped\_trx\_msg\_time@{last\_dropped\_trx\_msg\_time}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{last\_dropped\_trx\_msg\_time}{last\_dropped\_trx\_msg\_time}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a5568620d90b51490488682e99abe1802} 
\mbox{\hyperlink{classfc_1_1time__point}{fc\+::time\+\_\+point}} sysio\+::connection\+::last\+\_\+dropped\+\_\+trx\+\_\+msg\+\_\+time}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00637}{637}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_a158c59b44186c7757311f14f71818ec8}\index{sysio::connection@{sysio::connection}!last\_handshake\_recv@{last\_handshake\_recv}}
\index{last\_handshake\_recv@{last\_handshake\_recv}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{last\_handshake\_recv}{last\_handshake\_recv}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a158c59b44186c7757311f14f71818ec8} 
\mbox{\hyperlink{structsysio_1_1handshake__message}{handshake\+\_\+message}} sysio\+::connection\+::last\+\_\+handshake\+\_\+recv}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00655}{655}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_ab3d0dbb3bb254cbea92508af42dfe75b}\index{sysio::connection@{sysio::connection}!last\_handshake\_sent@{last\_handshake\_sent}}
\index{last\_handshake\_sent@{last\_handshake\_sent}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{last\_handshake\_sent}{last\_handshake\_sent}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_ab3d0dbb3bb254cbea92508af42dfe75b} 
\mbox{\hyperlink{structsysio_1_1handshake__message}{handshake\+\_\+message}} sysio\+::connection\+::last\+\_\+handshake\+\_\+sent}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00656}{656}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_aba96e14eb1339b623e37c8e097560e8f}\index{sysio::connection@{sysio::connection}!last\_req@{last\_req}}
\index{last\_req@{last\_req}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{last\_req}{last\_req}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_aba96e14eb1339b623e37c8e097560e8f} 
std\+::optional$<$\mbox{\hyperlink{structsysio_1_1request__message}{request\+\_\+message}}$>$ sysio\+::connection\+::last\+\_\+req}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00654}{654}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_a1bf388b9e64d25616cefd8d6b1175fc7}\index{sysio::connection@{sysio::connection}!latest\_blk\_time@{latest\_blk\_time}}
\index{latest\_blk\_time@{latest\_blk\_time}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{latest\_blk\_time}{latest\_blk\_time}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a1bf388b9e64d25616cefd8d6b1175fc7} 
\mbox{\hyperlink{namespacesysio_a42c15380188aaacda97b061d7c538d13}{tstamp}} sysio\+::connection\+::latest\+\_\+blk\+\_\+time \{0\}}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00677}{677}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00677\ \{0\};}

\end{DoxyCode}
\Hypertarget{classsysio_1_1connection_a718e2bd1f4e3bcd87979a578e1d49d7a}\index{sysio::connection@{sysio::connection}!latest\_msg\_time@{latest\_msg\_time}}
\index{latest\_msg\_time@{latest\_msg\_time}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{latest\_msg\_time}{latest\_msg\_time}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a718e2bd1f4e3bcd87979a578e1d49d7a} 
\mbox{\hyperlink{namespacesysio_a42c15380188aaacda97b061d7c538d13}{tstamp}} sysio\+::connection\+::latest\+\_\+msg\+\_\+time \{0\}}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00675}{675}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00675\ \{0\};}

\end{DoxyCode}
\Hypertarget{classsysio_1_1connection_abaffefd3dd270392c59a876c12f86bf2}\index{sysio::connection@{sysio::connection}!local\_endpoint\_ip@{local\_endpoint\_ip}}
\index{local\_endpoint\_ip@{local\_endpoint\_ip}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{local\_endpoint\_ip}{local\_endpoint\_ip}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_abaffefd3dd270392c59a876c12f86bf2} 
\mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} sysio\+::connection\+::local\+\_\+endpoint\+\_\+ip}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00633}{633}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_af46386111a6f93fe2ce3a9029677dca4}\index{sysio::connection@{sysio::connection}!local\_endpoint\_port@{local\_endpoint\_port}}
\index{local\_endpoint\_port@{local\_endpoint\_port}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{local\_endpoint\_port}{local\_endpoint\_port}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_af46386111a6f93fe2ce3a9029677dca4} 
\mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} sysio\+::connection\+::local\+\_\+endpoint\+\_\+port}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00634}{634}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_aaeb74503530f57f9cc88f8a33bdb2980}\index{sysio::connection@{sysio::connection}!log\_p2p\_address@{log\_p2p\_address}}
\index{log\_p2p\_address@{log\_p2p\_address}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{log\_p2p\_address}{log\_p2p\_address}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_aaeb74503530f57f9cc88f8a33bdb2980} 
\mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} sysio\+::connection\+::log\+\_\+p2p\+\_\+address}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00630}{630}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_ac0e50a9bca0cca0c77ce7d1763832714}\index{sysio::connection@{sysio::connection}!log\_remote\_endpoint\_ip@{log\_remote\_endpoint\_ip}}
\index{log\_remote\_endpoint\_ip@{log\_remote\_endpoint\_ip}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{log\_remote\_endpoint\_ip}{log\_remote\_endpoint\_ip}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_ac0e50a9bca0cca0c77ce7d1763832714} 
\mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} sysio\+::connection\+::log\+\_\+remote\+\_\+endpoint\+\_\+ip}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00631}{631}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_a9d6df697090f0105fbcd82ee97f65712}\index{sysio::connection@{sysio::connection}!log\_remote\_endpoint\_port@{log\_remote\_endpoint\_port}}
\index{log\_remote\_endpoint\_port@{log\_remote\_endpoint\_port}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{log\_remote\_endpoint\_port}{log\_remote\_endpoint\_port}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a9d6df697090f0105fbcd82ee97f65712} 
\mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} sysio\+::connection\+::log\+\_\+remote\+\_\+endpoint\+\_\+port}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00632}{632}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_aa7543fc95097fd14c4d8f66173af561a}\index{sysio::connection@{sysio::connection}!net\_version@{net\_version}}
\index{net\_version@{net\_version}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{net\_version}{net\_version}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_aa7543fc95097fd14c4d8f66173af561a} 
\mbox{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}} sysio\+::connection\+::net\+\_\+version = \mbox{\hyperlink{namespacesysio_a0d4d33daf7d396995fc2eb0d016bd1d2}{net\+\_\+version\+\_\+max}}}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00644}{644}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_a6b2649c5a44369243b03ddc3a5ee3695}\index{sysio::connection@{sysio::connection}!no\_retry@{no\_retry}}
\index{no\_retry@{no\_retry}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{no\_retry}{no\_retry}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a6b2649c5a44369243b03ddc3a5ee3695} 
std\+::atomic$<$\mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673f}{go\+\_\+away\+\_\+reason}}$>$ sysio\+::connection\+::no\+\_\+retry \{\mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa35a3ee195246082e99a69c2636252839}{no\+\_\+reason}}\}}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00651}{651}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00651\ \{\mbox{\hyperlink{namespacesysio_a5c18cd9d34b8c5d3af8e2de75577673fa35a3ee195246082e99a69c2636252839}{no\_reason}}\};}

\end{DoxyCode}
\Hypertarget{classsysio_1_1connection_a6c055550228586b3534a4f2b5e87bc4e}\index{sysio::connection@{sysio::connection}!org@{org}}
\index{org@{org}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{org}{org}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a6c055550228586b3534a4f2b5e87bc4e} 
\mbox{\hyperlink{namespacesysio_a42c15380188aaacda97b061d7c538d13}{tstamp}} sysio\+::connection\+::org \{0\}}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00669}{669}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00669\ \{0\};\ \ \ \ \ \ \ \ \ \ }

\end{DoxyCode}
\Hypertarget{classsysio_1_1connection_a3de4218791d8273eb83a54409af84cf1}\index{sysio::connection@{sysio::connection}!outstanding\_read\_bytes@{outstanding\_read\_bytes}}
\index{outstanding\_read\_bytes@{outstanding\_read\_bytes}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{outstanding\_read\_bytes}{outstanding\_read\_bytes}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a3de4218791d8273eb83a54409af84cf1} 
std\+::atomic$<$std\+::size\+\_\+t$>$ sysio\+::connection\+::outstanding\+\_\+read\+\_\+bytes \{0\}}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00624}{624}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00624\ \{0\};\ \textcolor{comment}{//\ accessed\ only\ from\ strand\ threads}}

\end{DoxyCode}
\Hypertarget{classsysio_1_1connection_af241d498d210d4e238b73f7bcd1c45d1}\index{sysio::connection@{sysio::connection}!pending\_message\_buffer@{pending\_message\_buffer}}
\index{pending\_message\_buffer@{pending\_message\_buffer}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{pending\_message\_buffer}{pending\_message\_buffer}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_af241d498d210d4e238b73f7bcd1c45d1} 
\mbox{\hyperlink{classfc_1_1message__buffer}{fc\+::message\+\_\+buffer}}$<$1024\texorpdfstring{$\ast$}{*}1024$>$ sysio\+::connection\+::pending\+\_\+message\+\_\+buffer}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00623}{623}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_ad20dc31a68afa8406a64e6e69ecebb02}\index{sysio::connection@{sysio::connection}!protocol\_version@{protocol\_version}}
\index{protocol\_version@{protocol\_version}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{protocol\_version}{protocol\_version}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_ad20dc31a68afa8406a64e6e69ecebb02} 
std\+::atomic$<$\mbox{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}$>$ sysio\+::connection\+::protocol\+\_\+version = 0}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00643}{643}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_a0bc9d553ad16bc63449cdbcf6825c59f}\index{sysio::connection@{sysio::connection}!rec@{rec}}
\index{rec@{rec}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{rec}{rec}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a0bc9d553ad16bc63449cdbcf6825c59f} 
\mbox{\hyperlink{namespacesysio_a42c15380188aaacda97b061d7c538d13}{tstamp}} sysio\+::connection\+::rec \{0\}}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00670}{670}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00670\ \{0\};\ \ \ \ \ \ \ \ \ \ }

\end{DoxyCode}
\Hypertarget{classsysio_1_1connection_a653ababe3f1f98f1bc7af29fff045b4f}\index{sysio::connection@{sysio::connection}!remote\_endpoint\_ip@{remote\_endpoint\_ip}}
\index{remote\_endpoint\_ip@{remote\_endpoint\_ip}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{remote\_endpoint\_ip}{remote\_endpoint\_ip}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a653ababe3f1f98f1bc7af29fff045b4f} 
\mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} sysio\+::connection\+::remote\+\_\+endpoint\+\_\+ip}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00660}{660}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_a237374fa72d9b4b4e56f6f9a685bed1a}\index{sysio::connection@{sysio::connection}!response\_expected\_timer@{response\_expected\_timer}}
\index{response\_expected\_timer@{response\_expected\_timer}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{response\_expected\_timer}{response\_expected\_timer}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a237374fa72d9b4b4e56f6f9a685bed1a} 
boost\+::asio\+::steady\+\_\+timer sysio\+::connection\+::response\+\_\+expected\+\_\+timer}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00649}{649}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_a70c7d2d3ab6b30deeaf88b98925623c2}\index{sysio::connection@{sysio::connection}!response\_expected\_timer\_mtx@{response\_expected\_timer\_mtx}}
\index{response\_expected\_timer\_mtx@{response\_expected\_timer\_mtx}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{response\_expected\_timer\_mtx}{response\_expected\_timer\_mtx}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a70c7d2d3ab6b30deeaf88b98925623c2} 
std\+::mutex sysio\+::connection\+::response\+\_\+expected\+\_\+timer\+\_\+mtx}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00648}{648}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_a3b487d20a19e5f81f3024d276078d397}\index{sysio::connection@{sysio::connection}!sent\_handshake\_count@{sent\_handshake\_count}}
\index{sent\_handshake\_count@{sent\_handshake\_count}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{sent\_handshake\_count}{sent\_handshake\_count}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a3b487d20a19e5f81f3024d276078d397} 
\mbox{\hyperlink{stdint_8h_a269259c924dce846340ddbb810db2e3c}{int16\+\_\+t}} sysio\+::connection\+::sent\+\_\+handshake\+\_\+count = 0}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00639}{639}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_a855625cd0312ce982b74ddc4e5a753ff}\index{sysio::connection@{sysio::connection}!short\_conn\_node\_id@{short\_conn\_node\_id}}
\index{short\_conn\_node\_id@{short\_conn\_node\_id}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{short\_conn\_node\_id}{short\_conn\_node\_id}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a855625cd0312ce982b74ddc4e5a753ff} 
\mbox{\hyperlink{namespacefc_a0f3d84fe9e7adcd2d1e0bb7b60b49aa0}{string}} sysio\+::connection\+::short\+\_\+conn\+\_\+node\+\_\+id}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00629}{629}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_adb1c345e310c4bf64faa889c01440404}\index{sysio::connection@{sysio::connection}!socket@{socket}}
\index{socket@{socket}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{socket}{socket}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_adb1c345e310c4bf64faa889c01440404} 
std\+::shared\+\_\+ptr$<$tcp\+::socket$>$ sysio\+::connection\+::socket}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00621}{621}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_a950c534737276c9d0a2724d9801d7def}\index{sysio::connection@{sysio::connection}!strand@{strand}}
\index{strand@{strand}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{strand}{strand}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a950c534737276c9d0a2724d9801d7def} 
boost\+::asio\+::io\+\_\+context\+::strand sysio\+::connection\+::strand}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00620}{620}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.

\Hypertarget{classsysio_1_1connection_ab77357d0ed0b422c2d6a15065d818ff6}\index{sysio::connection@{sysio::connection}!syncing@{syncing}}
\index{syncing@{syncing}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{syncing}{syncing}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_ab77357d0ed0b422c2d6a15065d818ff6} 
std\+::atomic$<$bool$>$ sysio\+::connection\+::syncing \{false\}}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00641}{641}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00641\ \{\textcolor{keyword}{false}\};}

\end{DoxyCode}
\Hypertarget{classsysio_1_1connection_ad60ce32fad045e086d4681636391851b}\index{sysio::connection@{sysio::connection}!trx\_in\_progress\_size@{trx\_in\_progress\_size}}
\index{trx\_in\_progress\_size@{trx\_in\_progress\_size}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{trx\_in\_progress\_size}{trx\_in\_progress\_size}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_ad60ce32fad045e086d4681636391851b} 
std\+::atomic$<$\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}}$>$ sysio\+::connection\+::trx\+\_\+in\+\_\+progress\+\_\+size \{0\}}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00636}{636}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00636\ \{0\};}

\end{DoxyCode}
\Hypertarget{classsysio_1_1connection_a1ddd29a8f7e1d9a3d21a79c8fdf21521}\index{sysio::connection@{sysio::connection}!xmt@{xmt}}
\index{xmt@{xmt}!sysio::connection@{sysio::connection}}
\doxysubsubsection{\texorpdfstring{xmt}{xmt}}
{\footnotesize\ttfamily \label{classsysio_1_1connection_a1ddd29a8f7e1d9a3d21a79c8fdf21521} 
\mbox{\hyperlink{namespacesysio_a42c15380188aaacda97b061d7c538d13}{tstamp}} sysio\+::connection\+::xmt \{0\}}



Definition at line \mbox{\hyperlink{net__plugin_8cpp_source_l00672}{672}} of file \mbox{\hyperlink{net__plugin_8cpp_source}{net\+\_\+plugin.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00672\ \{0\};\ \ \ \ \ \ \ \ \ \ }

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
plugins/net\+\_\+plugin/\mbox{\hyperlink{net__plugin_8cpp}{net\+\_\+plugin.\+cpp}}\end{DoxyCompactItemize}
