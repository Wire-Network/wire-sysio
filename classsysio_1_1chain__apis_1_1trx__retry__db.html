<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wire Sysio: sysio::chain_apis::trx_retry_db Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Wire Sysio<span id="projectnumber">&#160;Wire Sysion 1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classsysio_1_1chain__apis_1_1trx__retry__db.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classsysio_1_1chain__apis_1_1trx__retry__db-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">sysio::chain_apis::trx_retry_db Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="trx__retry__db_8hpp_source.html">trx_retry_db.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2cad85030655b7382ab4041a1a19706a" id="r_a2cad85030655b7382ab4041a1a19706a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2cad85030655b7382ab4041a1a19706a">trx_retry_db</a> (const <a class="el" href="classsysio_1_1chain_1_1controller.html">chain::controller</a> &amp;<a class="el" href="classsysio_1_1chain_1_1controller.html">controller</a>, size_t max_mem_usage_size, <a class="el" href="classfc_1_1microseconds.html">fc::microseconds</a> retry_interval, <a class="el" href="classfc_1_1microseconds.html">fc::microseconds</a> max_expiration_time, <a class="el" href="classfc_1_1microseconds.html">fc::microseconds</a> <a class="el" href="programs_2clio_2main_8cpp.html#a074511b7997537efa9b642dcddcced71">abi_serializer_max_time</a>)</td></tr>
<tr class="separator:a2cad85030655b7382ab4041a1a19706a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a007266e0ec37f01641654aa7950ea916" id="r_a007266e0ec37f01641654aa7950ea916"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a007266e0ec37f01641654aa7950ea916">~trx_retry_db</a> ()</td></tr>
<tr class="separator:a007266e0ec37f01641654aa7950ea916"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a185ed23331e1d5f938fb249edd604887" id="r_a185ed23331e1d5f938fb249edd604887"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a185ed23331e1d5f938fb249edd604887">trx_retry_db</a> (<a class="el" href="classsysio_1_1chain__apis_1_1trx__retry__db.html">trx_retry_db</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a185ed23331e1d5f938fb249edd604887"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f4b0b334749a53fb40f568155e7f418" id="r_a3f4b0b334749a53fb40f568155e7f418"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsysio_1_1chain__apis_1_1trx__retry__db.html">trx_retry_db</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3f4b0b334749a53fb40f568155e7f418">operator=</a> (<a class="el" href="classsysio_1_1chain__apis_1_1trx__retry__db.html">trx_retry_db</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a3f4b0b334749a53fb40f568155e7f418"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a660b3e800a99fdd86094eab55469dc8b" id="r_a660b3e800a99fdd86094eab55469dc8b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfc_1_1time__point__sec.html">fc::time_point_sec</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a660b3e800a99fdd86094eab55469dc8b">get_max_expiration_time</a> () const</td></tr>
<tr class="separator:a660b3e800a99fdd86094eab55469dc8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af46a9168d0df4be1252ba36df2a27ef2" id="r_af46a9168d0df4be1252ba36df2a27ef2"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af46a9168d0df4be1252ba36df2a27ef2">size</a> () const</td></tr>
<tr class="separator:af46a9168d0df4be1252ba36df2a27ef2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a963c0f454e3d7bf60e6afe32274c0f53" id="r_a963c0f454e3d7bf60e6afe32274c0f53"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a963c0f454e3d7bf60e6afe32274c0f53">track_transaction</a> (<a class="el" href="namespacesysio_1_1chain.html#a7041c0316bd294d0866609ab3e0cc7a7">chain::packed_transaction_ptr</a> ptrx, std::optional&lt; <a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> &gt; num_blocks, <a class="el" href="namespacesysio_1_1chain__apis.html#a7c0a9b3be43e3ab139d31d0d3bb98f5b">next_function</a>&lt; std::unique_ptr&lt; <a class="el" href="classfc_1_1variant.html">fc::variant</a> &gt; &gt; next)</td></tr>
<tr class="separator:a963c0f454e3d7bf60e6afe32274c0f53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e2be9e478ae0ec15310265367781ed6" id="r_a0e2be9e478ae0ec15310265367781ed6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0e2be9e478ae0ec15310265367781ed6">on_applied_transaction</a> (const <a class="el" href="namespacesysio_1_1chain.html#a4ee2867a6bec961c7a78b203cfd76be9">chain::transaction_trace_ptr</a> &amp;trace, const <a class="el" href="namespacesysio_1_1chain.html#a7041c0316bd294d0866609ab3e0cc7a7">chain::packed_transaction_ptr</a> &amp;ptrx)</td></tr>
<tr class="separator:a0e2be9e478ae0ec15310265367781ed6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3d9bd5ac2085676e9f3ecf67d3ab8fc" id="r_ac3d9bd5ac2085676e9f3ecf67d3ab8fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac3d9bd5ac2085676e9f3ecf67d3ab8fc">on_block_start</a> (<a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> block_num)</td></tr>
<tr class="separator:ac3d9bd5ac2085676e9f3ecf67d3ab8fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7baf34c40190b65c61c87ae42c9f72e" id="r_aa7baf34c40190b65c61c87ae42c9f72e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa7baf34c40190b65c61c87ae42c9f72e">on_accepted_block</a> (const <a class="el" href="namespacesysio_1_1chain.html#ab9b14f4554cc4a0da2c361e9757b1662">chain::block_state_ptr</a> &amp;block)</td></tr>
<tr class="separator:aa7baf34c40190b65c61c87ae42c9f72e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84150dab60a7a856372d038e43338c65" id="r_a84150dab60a7a856372d038e43338c65"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a84150dab60a7a856372d038e43338c65">on_irreversible_block</a> (const <a class="el" href="namespacesysio_1_1chain.html#ab9b14f4554cc4a0da2c361e9757b1662">chain::block_state_ptr</a> &amp;block)</td></tr>
<tr class="separator:a84150dab60a7a856372d038e43338c65"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class manages the ephemeral indices and data that provide the transaction retry feature. It is designed to be run on an API node, as it only tracks incoming API transactions. It will not work correctly on a BP node because on_applied_transaction looks for transactions registered in track_transaction which is registered after speculatively executed. If the transaction is only executed only in a final signed block, then it will not be seen as executed and will expire. </p>

<p class="definition">Definition at line <a class="el" href="trx__retry__db_8hpp_source.html#l00019">19</a> of file <a class="el" href="trx__retry__db_8hpp_source.html">trx_retry_db.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a2cad85030655b7382ab4041a1a19706a" name="a2cad85030655b7382ab4041a1a19706a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cad85030655b7382ab4041a1a19706a">&#9670;&#160;</a></span>trx_retry_db() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sysio::chain_apis::trx_retry_db::trx_retry_db </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classsysio_1_1chain_1_1controller.html">chain::controller</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>controller</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>max_mem_usage_size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfc_1_1microseconds.html">fc::microseconds</a></td>          <td class="paramname"><span class="paramname"><em>retry_interval</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfc_1_1microseconds.html">fc::microseconds</a></td>          <td class="paramname"><span class="paramname"><em>max_expiration_time</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfc_1_1microseconds.html">fc::microseconds</a></td>          <td class="paramname"><span class="paramname"><em>abi_serializer_max_time</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chain</td><td>- controller to read data from, caller is expected to manage lifetimes such that this controller reference does not go stale for the life of this class. </td></tr>
    <tr><td class="paramname">max_mem_usage_size</td><td>- maximum allowed memory for this feature, see track_transaction. </td></tr>
    <tr><td class="paramname">retry_interval</td><td>- how often to retry transaction if not see in a block. </td></tr>
    <tr><td class="paramname">max_expiration_time</td><td>- the maximum allowed expiration on a retry transaction </td></tr>
    <tr><td class="paramname">abi_serializer_max_time</td><td>- the configurable abi-serializer-max-time-ms option used for creating trace variants </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trx__retry__db_8cpp_source.html#l00292">292</a> of file <a class="el" href="trx__retry__db_8cpp_source.html">trx_retry_db.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  295</span>:_impl(std::make_unique&lt;trx_retry_db_impl&gt;(<a class="code hl_class" href="classsysio_1_1chain_1_1controller.html">controller</a>, max_mem_usage_size, retry_interval, max_expiration_time, <a class="code hl_variable" href="programs_2clio_2main_8cpp.html#a074511b7997537efa9b642dcddcced71">abi_serializer_max_time</a>))</div>
<div class="line"><span class="lineno">  296</span>{</div>
<div class="line"><span class="lineno">  297</span>}</div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html">sysio::chain::controller</a></div><div class="ttdef"><b>Definition</b> <a href="controller_8hpp_source.html#l00063">controller.hpp:63</a></div></div>
<div class="ttc" id="aprograms_2clio_2main_8cpp_html_a074511b7997537efa9b642dcddcced71"><div class="ttname"><a href="programs_2clio_2main_8cpp.html#a074511b7997537efa9b642dcddcced71">abi_serializer_max_time</a></div><div class="ttdeci">const fc::microseconds abi_serializer_max_time</div><div class="ttdef"><b>Definition</b> <a href="programs_2clio_2main_8cpp_source.html#l00173">main.cpp:173</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a007266e0ec37f01641654aa7950ea916" name="a007266e0ec37f01641654aa7950ea916"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a007266e0ec37f01641654aa7950ea916">&#9670;&#160;</a></span>~trx_retry_db()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sysio::chain_apis::trx_retry_db::~trx_retry_db </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a185ed23331e1d5f938fb249edd604887" name="a185ed23331e1d5f938fb249edd604887"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a185ed23331e1d5f938fb249edd604887">&#9670;&#160;</a></span>trx_retry_db() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sysio::chain_apis::trx_retry_db::trx_retry_db </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsysio_1_1chain__apis_1_1trx__retry__db.html">trx_retry_db</a> &amp;&amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a660b3e800a99fdd86094eab55469dc8b" name="a660b3e800a99fdd86094eab55469dc8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a660b3e800a99fdd86094eab55469dc8b">&#9670;&#160;</a></span>get_max_expiration_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfc_1_1time__point__sec.html">fc::time_point_sec</a> sysio::chain_apis::trx_retry_db::get_max_expiration_time </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>current max expiration allowed on a retry transaction </dd></dl>

<p class="definition">Definition at line <a class="el" href="trx__retry__db_8cpp_source.html#l00305">305</a> of file <a class="el" href="trx__retry__db_8cpp_source.html">trx_retry_db.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  305</span>                                                            {</div>
<div class="line"><span class="lineno">  306</span>   <span class="comment">// conversion from time_point to time_point_sec rounds down, round up to nearest second to avoid appearing expired</span></div>
<div class="line"><span class="lineno">  307</span>   <span class="keywordflow">return</span> <a class="code hl_function" href="classfc_1_1time__point.html#aa164ff1268a16d4b32afcff181f6100e">fc::time_point::now</a>() + _impl-&gt;get_max_expiration() + <a class="code hl_class" href="classfc_1_1microseconds.html">fc::microseconds</a>(999&#39;999);</div>
<div class="line"><span class="lineno">  308</span>}</div>
<div class="ttc" id="aclassfc_1_1microseconds_html"><div class="ttname"><a href="classfc_1_1microseconds.html">fc::microseconds</a></div><div class="ttdef"><b>Definition</b> <a href="include_2fc_2time_8hpp_source.html#l00011">time.hpp:11</a></div></div>
<div class="ttc" id="aclassfc_1_1time__point_html_aa164ff1268a16d4b32afcff181f6100e"><div class="ttname"><a href="classfc_1_1time__point.html#aa164ff1268a16d4b32afcff181f6100e">fc::time_point::now</a></div><div class="ttdeci">static time_point now()</div><div class="ttdef"><b>Definition</b> <a href="time_8cpp_source.html#l00014">time.cpp:14</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain__apis_1_1trx__retry__db_a660b3e800a99fdd86094eab55469dc8b_cgraph.png" border="0" usemap="#aclasssysio_1_1chain__apis_1_1trx__retry__db_a660b3e800a99fdd86094eab55469dc8b_cgraph" alt=""/></div>
<map name="aclasssysio_1_1chain__apis_1_1trx__retry__db_a660b3e800a99fdd86094eab55469dc8b_cgraph" id="aclasssysio_1_1chain__apis_1_1trx__retry__db_a660b3e800a99fdd86094eab55469dc8b_cgraph">
<area shape="rect" title=" " alt="" coords="5,96,154,152"/>
<area shape="rect" href="classfc_1_1time__point.html#aa164ff1268a16d4b32afcff181f6100e" title=" " alt="" coords="202,112,334,137"/>
<area shape="poly" title=" " alt="" coords="154,122,186,122,186,127,154,127"/>
<area shape="rect" href="classfc_1_1mock__time__traits.html#a0bed781012a73b8c15882648397b56be" title=" " alt="" coords="382,5,522,46"/>
<area shape="poly" title=" " alt="" coords="290,109,381,57,392,51,394,56,383,61,292,113"/>
<area shape="rect" href="classfc_1_1mock__time__traits.html#adddeebdf472c33f927827c111ddbf0b1" title=" " alt="" coords="382,71,522,111"/>
<area shape="poly" title=" " alt="" coords="334,110,367,104,368,109,335,115"/>
<area shape="rect" href="classfc_1_1time__point.html#ab46781dcaab4880902bc136f36e39e5e" title=" " alt="" coords="386,136,519,177"/>
<area shape="poly" title=" " alt="" coords="335,133,370,139,370,145,334,138"/>
<area shape="rect" href="classfc_1_1time__point.html#abfea5efbe9ef58024cda814395ee9945" title=" " alt="" coords="386,201,519,242"/>
<area shape="poly" title=" " alt="" coords="293,135,383,186,394,192,392,196,381,191,291,140"/>
<area shape="rect" href="classfc_1_1mock__time__traits.html#a0d7245b32fd62b3bc712f658250cc4db" title=" " alt="" coords="570,13,743,38"/>
<area shape="poly" title=" " alt="" coords="523,23,555,23,555,28,523,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain__apis_1_1trx__retry__db_a660b3e800a99fdd86094eab55469dc8b_icgraph.png" border="0" usemap="#aclasssysio_1_1chain__apis_1_1trx__retry__db_a660b3e800a99fdd86094eab55469dc8b_icgraph" alt=""/></div>
<map name="aclasssysio_1_1chain__apis_1_1trx__retry__db_a660b3e800a99fdd86094eab55469dc8b_icgraph" id="aclasssysio_1_1chain__apis_1_1trx__retry__db_a660b3e800a99fdd86094eab55469dc8b_icgraph">
<area shape="rect" title=" " alt="" coords="250,5,398,61"/>
<area shape="rect" href="test__trx__retry__db_8cpp.html#a253cc0c74fd06c934d9c7d4ee67ccf87" title=" " alt="" coords="5,20,202,46"/>
<area shape="poly" title=" " alt="" coords="234,36,202,36,202,30,234,30"/>
</map>
</div>

</div>
</div>
<a id="aa7baf34c40190b65c61c87ae42c9f72e" name="aa7baf34c40190b65c61c87ae42c9f72e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7baf34c40190b65c61c87ae42c9f72e">&#9670;&#160;</a></span>on_accepted_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain_apis::trx_retry_db::on_accepted_block </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#ab9b14f4554cc4a0da2c361e9757b1662">chain::block_state_ptr</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>block</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attach to chain accepted_block signal </p>

<p class="definition">Definition at line <a class="el" href="trx__retry__db_8cpp_source.html#l00326">326</a> of file <a class="el" href="trx__retry__db_8cpp_source.html">trx_retry_db.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  326</span>                                                                       {</div>
<div class="line"><span class="lineno">  327</span>   <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  328</span>      _impl-&gt;on_accepted_block(block);</div>
<div class="line"><span class="lineno">  329</span>   } <a class="code hl_define" href="exception_8hpp.html#aed56aa2593b6f6fc6a839b7cb5c6e8e3">FC_LOG_AND_DROP</a>((<span class="stringliteral">&quot;trx retry accepted_block ERROR&quot;</span>));</div>
<div class="line"><span class="lineno">  330</span>}</div>
<div class="ttc" id="aexception_8hpp_html_aed56aa2593b6f6fc6a839b7cb5c6e8e3"><div class="ttname"><a href="exception_8hpp.html#aed56aa2593b6f6fc6a839b7cb5c6e8e3">FC_LOG_AND_DROP</a></div><div class="ttdeci">#define FC_LOG_AND_DROP(...)</div><div class="ttdef"><b>Definition</b> <a href="exception_8hpp_source.html#l00480">exception.hpp:480</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain__apis_1_1trx__retry__db_aa7baf34c40190b65c61c87ae42c9f72e_icgraph.png" border="0" usemap="#aclasssysio_1_1chain__apis_1_1trx__retry__db_aa7baf34c40190b65c61c87ae42c9f72e_icgraph" alt=""/></div>
<map name="aclasssysio_1_1chain__apis_1_1trx__retry__db_aa7baf34c40190b65c61c87ae42c9f72e_icgraph" id="aclasssysio_1_1chain__apis_1_1trx__retry__db_aa7baf34c40190b65c61c87ae42c9f72e_icgraph">
<area shape="rect" title=" " alt="" coords="250,5,460,46"/>
<area shape="rect" href="test__trx__retry__db_8cpp.html#a253cc0c74fd06c934d9c7d4ee67ccf87" title=" " alt="" coords="5,13,202,38"/>
<area shape="poly" title=" " alt="" coords="234,28,202,28,202,23,234,23"/>
</map>
</div>

</div>
</div>
<a id="a0e2be9e478ae0ec15310265367781ed6" name="a0e2be9e478ae0ec15310265367781ed6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e2be9e478ae0ec15310265367781ed6">&#9670;&#160;</a></span>on_applied_transaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain_apis::trx_retry_db::on_applied_transaction </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#a4ee2867a6bec961c7a78b203cfd76be9">chain::transaction_trace_ptr</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>trace</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#a7041c0316bd294d0866609ab3e0cc7a7">chain::packed_transaction_ptr</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ptrx</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attach to chain applied_transaction signal Add a transaction trace to the DB that has been applied to the controller </p>

<p class="definition">Definition at line <a class="el" href="trx__retry__db_8cpp_source.html#l00314">314</a> of file <a class="el" href="trx__retry__db_8cpp_source.html">trx_retry_db.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  314</span>                                                                                                                            {</div>
<div class="line"><span class="lineno">  315</span>   <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  316</span>      _impl-&gt;on_applied_transaction(trace, ptrx);</div>
<div class="line"><span class="lineno">  317</span>   } <a class="code hl_define" href="exception_8hpp.html#aed56aa2593b6f6fc6a839b7cb5c6e8e3">FC_LOG_AND_DROP</a>((<span class="stringliteral">&quot;trx retry on_applied_transaction ERROR&quot;</span>));</div>
<div class="line"><span class="lineno">  318</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain__apis_1_1trx__retry__db_a0e2be9e478ae0ec15310265367781ed6_icgraph.png" border="0" usemap="#aclasssysio_1_1chain__apis_1_1trx__retry__db_a0e2be9e478ae0ec15310265367781ed6_icgraph" alt=""/></div>
<map name="aclasssysio_1_1chain__apis_1_1trx__retry__db_a0e2be9e478ae0ec15310265367781ed6_icgraph" id="aclasssysio_1_1chain__apis_1_1trx__retry__db_a0e2be9e478ae0ec15310265367781ed6_icgraph">
<area shape="rect" title=" " alt="" coords="250,5,410,61"/>
<area shape="rect" href="test__trx__retry__db_8cpp.html#a253cc0c74fd06c934d9c7d4ee67ccf87" title=" " alt="" coords="5,20,202,46"/>
<area shape="poly" title=" " alt="" coords="234,36,202,36,202,30,234,30"/>
</map>
</div>

</div>
</div>
<a id="ac3d9bd5ac2085676e9f3ecf67d3ab8fc" name="ac3d9bd5ac2085676e9f3ecf67d3ab8fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3d9bd5ac2085676e9f3ecf67d3ab8fc">&#9670;&#160;</a></span>on_block_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain_apis::trx_retry_db::on_block_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></td>          <td class="paramname"><span class="paramname"><em>block_num</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attach to chain block_start signal </p>

<p class="definition">Definition at line <a class="el" href="trx__retry__db_8cpp_source.html#l00320">320</a> of file <a class="el" href="trx__retry__db_8cpp_source.html">trx_retry_db.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  320</span>                                                      {</div>
<div class="line"><span class="lineno">  321</span>   <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  322</span>      _impl-&gt;on_block_start(block_num);</div>
<div class="line"><span class="lineno">  323</span>   } <a class="code hl_define" href="exception_8hpp.html#aed56aa2593b6f6fc6a839b7cb5c6e8e3">FC_LOG_AND_DROP</a>((<span class="stringliteral">&quot;trx retry block_start ERROR&quot;</span>));</div>
<div class="line"><span class="lineno">  324</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain__apis_1_1trx__retry__db_ac3d9bd5ac2085676e9f3ecf67d3ab8fc_icgraph.png" border="0" usemap="#aclasssysio_1_1chain__apis_1_1trx__retry__db_ac3d9bd5ac2085676e9f3ecf67d3ab8fc_icgraph" alt=""/></div>
<map name="aclasssysio_1_1chain__apis_1_1trx__retry__db_ac3d9bd5ac2085676e9f3ecf67d3ab8fc_icgraph" id="aclasssysio_1_1chain__apis_1_1trx__retry__db_ac3d9bd5ac2085676e9f3ecf67d3ab8fc_icgraph">
<area shape="rect" title=" " alt="" coords="250,5,433,46"/>
<area shape="rect" href="test__trx__retry__db_8cpp.html#a253cc0c74fd06c934d9c7d4ee67ccf87" title=" " alt="" coords="5,13,202,38"/>
<area shape="poly" title=" " alt="" coords="234,28,202,28,202,23,234,23"/>
</map>
</div>

</div>
</div>
<a id="a84150dab60a7a856372d038e43338c65" name="a84150dab60a7a856372d038e43338c65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84150dab60a7a856372d038e43338c65">&#9670;&#160;</a></span>on_irreversible_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain_apis::trx_retry_db::on_irreversible_block </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#ab9b14f4554cc4a0da2c361e9757b1662">chain::block_state_ptr</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>block</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attach to chain irreversible_block signal </p>

<p class="definition">Definition at line <a class="el" href="trx__retry__db_8cpp_source.html#l00332">332</a> of file <a class="el" href="trx__retry__db_8cpp_source.html">trx_retry_db.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  332</span>                                                                           {</div>
<div class="line"><span class="lineno">  333</span>   <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  334</span>      _impl-&gt;on_irreversible_block(block);</div>
<div class="line"><span class="lineno">  335</span>   } <a class="code hl_define" href="exception_8hpp.html#aed56aa2593b6f6fc6a839b7cb5c6e8e3">FC_LOG_AND_DROP</a>((<span class="stringliteral">&quot;trx retry irreversible_block ERROR&quot;</span>));</div>
<div class="line"><span class="lineno">  336</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain__apis_1_1trx__retry__db_a84150dab60a7a856372d038e43338c65_icgraph.png" border="0" usemap="#aclasssysio_1_1chain__apis_1_1trx__retry__db_a84150dab60a7a856372d038e43338c65_icgraph" alt=""/></div>
<map name="aclasssysio_1_1chain__apis_1_1trx__retry__db_a84150dab60a7a856372d038e43338c65_icgraph" id="aclasssysio_1_1chain__apis_1_1trx__retry__db_a84150dab60a7a856372d038e43338c65_icgraph">
<area shape="rect" title=" " alt="" coords="250,5,470,46"/>
<area shape="rect" href="test__trx__retry__db_8cpp.html#a253cc0c74fd06c934d9c7d4ee67ccf87" title=" " alt="" coords="5,13,202,38"/>
<area shape="poly" title=" " alt="" coords="234,28,202,28,202,23,234,23"/>
</map>
</div>

</div>
</div>
<a id="a3f4b0b334749a53fb40f568155e7f418" name="a3f4b0b334749a53fb40f568155e7f418"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f4b0b334749a53fb40f568155e7f418">&#9670;&#160;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsysio_1_1chain__apis_1_1trx__retry__db.html">trx_retry_db</a> &amp; sysio::chain_apis::trx_retry_db::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsysio_1_1chain__apis_1_1trx__retry__db.html">trx_retry_db</a> &amp;&amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af46a9168d0df4be1252ba36df2a27ef2" name="af46a9168d0df4be1252ba36df2a27ef2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af46a9168d0df4be1252ba36df2a27ef2">&#9670;&#160;</a></span>size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t sysio::chain_apis::trx_retry_db::size </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>number of trxs being tracked </dd></dl>

<p class="definition">Definition at line <a class="el" href="trx__retry__db_8cpp_source.html#l00310">310</a> of file <a class="el" href="trx__retry__db_8cpp_source.html">trx_retry_db.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  310</span>                               {</div>
<div class="line"><span class="lineno">  311</span>   <span class="keywordflow">return</span> _impl-&gt;size();</div>
<div class="line"><span class="lineno">  312</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain__apis_1_1trx__retry__db_af46a9168d0df4be1252ba36df2a27ef2_icgraph.png" border="0" usemap="#aclasssysio_1_1chain__apis_1_1trx__retry__db_af46a9168d0df4be1252ba36df2a27ef2_icgraph" alt=""/></div>
<map name="aclasssysio_1_1chain__apis_1_1trx__retry__db_af46a9168d0df4be1252ba36df2a27ef2_icgraph" id="aclasssysio_1_1chain__apis_1_1trx__retry__db_af46a9168d0df4be1252ba36df2a27ef2_icgraph">
<area shape="rect" title=" " alt="" coords="250,5,380,46"/>
<area shape="rect" href="test__trx__retry__db_8cpp.html#a253cc0c74fd06c934d9c7d4ee67ccf87" title=" " alt="" coords="5,13,202,38"/>
<area shape="poly" title=" " alt="" coords="234,28,202,28,202,23,234,23"/>
</map>
</div>

</div>
</div>
<a id="a963c0f454e3d7bf60e6afe32274c0f53" name="a963c0f454e3d7bf60e6afe32274c0f53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a963c0f454e3d7bf60e6afe32274c0f53">&#9670;&#160;</a></span>track_transaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain_apis::trx_retry_db::track_transaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacesysio_1_1chain.html#a7041c0316bd294d0866609ab3e0cc7a7">chain::packed_transaction_ptr</a></td>          <td class="paramname"><span class="paramname"><em>ptrx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::optional&lt; <a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>num_blocks</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacesysio_1_1chain__apis.html#a7c0a9b3be43e3ab139d31d0d3bb98f5b">next_function</a>&lt; std::unique_ptr&lt; <a class="el" href="classfc_1_1variant.html">fc::variant</a> &gt; &gt;</td>          <td class="paramname"><span class="paramname"><em>next</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptrx</td><td>trx to retry if not see in a block for retry_interval </td></tr>
    <tr><td class="paramname">num_blocks</td><td>ack seen in a block after num_blocks have been accepted, LIB if optional !has_value() </td></tr>
    <tr><td class="paramname">next</td><td>report result to user by calling next </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">throw</td><td>tx_resource_exhaustion if trx would exceeds max_mem_usage_size </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trx__retry__db_8cpp_source.html#l00301">301</a> of file <a class="el" href="trx__retry__db_8cpp_source.html">trx_retry_db.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  301</span>                                                                                                                                                       {</div>
<div class="line"><span class="lineno">  302</span>   _impl-&gt;track_transaction( std::move( ptrx ), num_blocks, next );</div>
<div class="line"><span class="lineno">  303</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain__apis_1_1trx__retry__db_a963c0f454e3d7bf60e6afe32274c0f53_icgraph.png" border="0" usemap="#aclasssysio_1_1chain__apis_1_1trx__retry__db_a963c0f454e3d7bf60e6afe32274c0f53_icgraph" alt=""/></div>
<map name="aclasssysio_1_1chain__apis_1_1trx__retry__db_a963c0f454e3d7bf60e6afe32274c0f53_icgraph" id="aclasssysio_1_1chain__apis_1_1trx__retry__db_a963c0f454e3d7bf60e6afe32274c0f53_icgraph">
<area shape="rect" title=" " alt="" coords="250,5,380,61"/>
<area shape="rect" href="test__trx__retry__db_8cpp.html#a253cc0c74fd06c934d9c7d4ee67ccf87" title=" " alt="" coords="5,20,202,46"/>
<area shape="poly" title=" " alt="" coords="234,36,202,36,202,30,234,30"/>
</map>
</div>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>plugins/chain_plugin/include/sysio/chain_plugin/<a class="el" href="trx__retry__db_8hpp_source.html">trx_retry_db.hpp</a></li>
<li>plugins/chain_plugin/<a class="el" href="trx__retry__db_8cpp_source.html">trx_retry_db.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacesysio.html">sysio</a></li><li class="navelem"><a class="el" href="namespacesysio_1_1chain__apis.html">chain_apis</a></li><li class="navelem"><a class="el" href="classsysio_1_1chain__apis_1_1trx__retry__db.html">trx_retry_db</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
