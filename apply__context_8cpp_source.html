<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wire Sysio: libraries/chain/apply_context.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Wire Sysio<span id="projectnumber">&#160;Wire Sysion 1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('apply__context_8cpp_source.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">apply_context.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="apply__context_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="preprocessor">#include &lt;<a class="code" href="apply__context_8hpp.html">sysio/chain/apply_context.hpp</a>&gt;</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="preprocessor">#include &lt;<a class="code" href="controller_8hpp.html">sysio/chain/controller.hpp</a>&gt;</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="preprocessor">#include &lt;<a class="code" href="transaction__context_8hpp.html">sysio/chain/transaction_context.hpp</a>&gt;</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &lt;<a class="code" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html">sysio/chain/exceptions.hpp</a>&gt;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#include &lt;<a class="code" href="wasm__interface_8hpp.html">sysio/chain/wasm_interface.hpp</a>&gt;</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &lt;<a class="code" href="generated__transaction__object_8hpp.html">sysio/chain/generated_transaction_object.hpp</a>&gt;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &lt;<a class="code" href="authorization__manager_8hpp.html">sysio/chain/authorization_manager.hpp</a>&gt;</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &lt;<a class="code" href="resource__limits_8hpp.html">sysio/chain/resource_limits.hpp</a>&gt;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &lt;<a class="code" href="account__object_8hpp.html">sysio/chain/account_object.hpp</a>&gt;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &lt;<a class="code" href="code__object_8hpp.html">sysio/chain/code_object.hpp</a>&gt;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &lt;<a class="code" href="global__property__object_8hpp.html">sysio/chain/global_property_object.hpp</a>&gt;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &lt;<a class="code" href="deep__mind_8hpp.html">sysio/chain/deep_mind.hpp</a>&gt;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &lt;boost/container/flat_set.hpp&gt;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span> </div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="keyword">using </span>boost::container::flat_set;</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span> </div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacesysio.html">sysio</a> { <span class="keyword">namespace </span>chain {</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span> </div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> print_debug(<a class="code hl_typedef" href="namespacesysio_1_1chain.html#ac32ce8e75243f2b3f76aff0c1984f11b">account_name</a> receiver, <span class="keyword">const</span> action_trace&amp; ar) {</div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>   <span class="keywordflow">if</span> (!ar.console.empty()) {</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>      <span class="keyword">auto</span> prefix = <a class="code hl_function" href="namespacefc.html#acd5129981ae93fce3154d3fed6f6acbc">fc::format_string</a>(</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>                                      <span class="stringliteral">&quot;\n[(${a},${n})-&gt;${r}]&quot;</span>,</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>                                      <a class="code hl_class" href="classfc_1_1mutable__variant__object.html">fc::mutable_variant_object</a>()</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>                                      (<span class="stringliteral">&quot;a&quot;</span>, ar.act.account)</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>                                      (<span class="stringliteral">&quot;n&quot;</span>, ar.act.name)</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>                                      (<span class="stringliteral">&quot;r&quot;</span>, receiver));</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>      <a class="code hl_define" href="logger_8hpp.html#a3da1571bad6ca6c94df9a3660b2115ee">dlog</a>(prefix + <span class="stringliteral">&quot;: CONSOLE OUTPUT BEGIN =====================\n&quot;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>           + ar.console</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>           + prefix + <span class="stringliteral">&quot;: CONSOLE OUTPUT END   =====================&quot;</span> );</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>   }</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>}</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span> </div>
<div class="foldopen" id="foldopen00034" data-start="{" data-end="}">
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#a87005d2140a4c7884277d2c775a86000">   34</a></span><a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a87005d2140a4c7884277d2c775a86000">apply_context::apply_context</a>(<a class="code hl_class" href="classsysio_1_1chain_1_1controller.html">controller</a>&amp; con, <a class="code hl_class" href="classsysio_1_1chain_1_1transaction__context.html">transaction_context</a>&amp; trx_ctx, <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> action_ordinal, <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> depth)</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>:control(con)</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>,db(con.mutable_db())</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>,trx_context(trx_ctx)</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>,recurse_depth(depth)</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>,first_receiver_action_ordinal(action_ordinal)</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>,action_ordinal(action_ordinal)</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>,idx64(*this)</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>,idx128(*this)</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>,idx256(*this)</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>,idx_double(*this)</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>,idx_long_double(*this)</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>{</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>   <a class="code hl_struct" href="structsysio_1_1chain_1_1action__trace.html">action_trace</a>&amp; trace = trx_ctx.get_action_trace(action_ordinal);</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>   act = &amp;trace.<a class="code hl_variable" href="structsysio_1_1chain_1_1action__trace.html#a2aa19858e0762797685b9ec46e820656">act</a>;</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>   receiver = trace.<a class="code hl_variable" href="structsysio_1_1chain_1_1action__trace.html#ae9f2c9fa62609083457c1852c1c021b2">receiver</a>;</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>   context_free = trace.<a class="code hl_variable" href="structsysio_1_1chain_1_1action__trace.html#a620c926ac80083458d66406e8c7cc986">context_free</a>;</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>}</div>
</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span> </div>
<div class="foldopen" id="foldopen00053" data-start="{" data-end="}">
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#a3d55f08ae8c014eb7cca9d36b43e8220">   53</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a3d55f08ae8c014eb7cca9d36b43e8220">apply_context::exec_one</a>()</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>{</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>   <span class="keyword">auto</span> start = <a class="code hl_function" href="classfc_1_1time__point.html#aa164ff1268a16d4b32afcff181f6100e">fc::time_point::now</a>();</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span> </div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>   <a class="code hl_class" href="classfc_1_1sha256.html">digest_type</a> act_digest;</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span> </div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>   <span class="keyword">const</span> <a class="code hl_class" href="classsysio_1_1chain_1_1account__metadata__object.html">account_metadata_object</a>* receiver_account = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span> </div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>   <span class="keyword">auto</span> handle_exception = [&amp;](<span class="keyword">const</span> <span class="keyword">auto</span>&amp; e)</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>   {</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>      <a class="code hl_struct" href="structsysio_1_1chain_1_1action__trace.html">action_trace</a>&amp; trace = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.get_action_trace( action_ordinal );</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>      trace.<a class="code hl_variable" href="structsysio_1_1chain_1_1action__trace.html#af4a5ea567853fa5bb1f9a1cc2fdabff0">error_code</a> = <a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#ae60743ce36f1fa0912ff26b1da40afe6">controller::convert_exception_to_error_code</a>( e );</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>      trace.<a class="code hl_variable" href="structsysio_1_1chain_1_1action__trace.html#a7003f48bddcf8307f12d11b4b25cce2f">except</a> = e;</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>      <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a89069192fcd50a9ebbe656f8868e7b90">finalize_trace</a>( trace, start );</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>      <span class="keywordflow">throw</span>;</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>   };</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span> </div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>   <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>         <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a1c52613df7c14b4120213492f01a6dac">action_return_value</a>.clear();</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>         receiver_account = &amp;<a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#afcfe00f81a526c1376d4f51197dd3a9a">get</a>&lt;<a class="code hl_class" href="classsysio_1_1chain_1_1account__metadata__object.html">account_metadata_object</a>,by_name&gt;( receiver );</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>         privileged = receiver_account-&gt;is_privileged();</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>         <span class="keyword">auto</span> native = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a4a2e2a5327580a667b803e3bf3ce5f82">find_apply_handler</a>( receiver, act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a3598da3f8df67037e69dab758ce168be">account</a>, act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a013fae07403bd6deffcade4fd5be095c">name</a> );</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>         <span class="keywordflow">if</span>( native ) {</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.<a class="code hl_variable" href="classsysio_1_1chain_1_1transaction__context.html#a799e9208ec6d2ea3d1dfccfd4eb97cec">enforce_whiteblacklist</a> &amp;&amp; <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0fcc85a590581560765686050fe105a8">is_producing_block</a>() ) {</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>               <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#affb3f9edd37be65bd34a4d6a783051c0">check_contract_list</a>( receiver );</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>               <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0884a15f8a10b5a0037601289908a0d9">check_action_list</a>( act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a3598da3f8df67037e69dab758ce168be">account</a>, act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a013fae07403bd6deffcade4fd5be095c">name</a> );</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>            }</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>            (*native)( *this );</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>         }</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span> </div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>         <span class="keywordflow">if</span>( ( receiver_account-&gt;code_hash != <a class="code hl_class" href="classfc_1_1sha256.html">digest_type</a>() ) &amp;&amp;</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>               (  !( act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a3598da3f8df67037e69dab758ce168be">account</a> == config::system_account_name</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>                     &amp;&amp; act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a013fae07403bd6deffcade4fd5be095c">name</a> == <span class="stringliteral">&quot;setcode&quot;</span>_n</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>                     &amp;&amp; receiver == config::system_account_name )</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>                  || <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#aa808acf858e93c567ff983ccbf8fb6d3">is_builtin_activated</a>( <a class="code hl_enumvalue" href="namespacesysio_1_1chain.html#a406d45a184cdba0af316b5bf34bf56cfa9be6e49b9731de43d53e394e3ed5e25b">builtin_protocol_feature_t::forward_setcode</a> )</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>               )</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>         ) {</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.<a class="code hl_variable" href="classsysio_1_1chain_1_1transaction__context.html#a799e9208ec6d2ea3d1dfccfd4eb97cec">enforce_whiteblacklist</a> &amp;&amp; <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0fcc85a590581560765686050fe105a8">is_producing_block</a>() ) {</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>               <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#affb3f9edd37be65bd34a4d6a783051c0">check_contract_list</a>( receiver );</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>               <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0884a15f8a10b5a0037601289908a0d9">check_action_list</a>( act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a3598da3f8df67037e69dab758ce168be">account</a>, act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a013fae07403bd6deffcade4fd5be095c">name</a> );</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>            }</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>            <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>               <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a888b36bb7d737244a2b200375b199247">get_wasm_interface</a>().<a class="code hl_function" href="classsysio_1_1chain_1_1wasm__interface.html#add575021d7a77e579238267f4c9331c9">apply</a>( receiver_account-&gt;code_hash, receiver_account-&gt;vm_type, receiver_account-&gt;vm_version, *<span class="keyword">this</span> );</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>            } <span class="keywordflow">catch</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1wasm__exit.html">wasm_exit</a>&amp; ) {}</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>         }</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span> </div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>         <span class="keywordflow">if</span>( !privileged &amp;&amp; <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#aa808acf858e93c567ff983ccbf8fb6d3">is_builtin_activated</a>( <a class="code hl_enumvalue" href="namespacesysio_1_1chain.html#a406d45a184cdba0af316b5bf34bf56cfa5b1659352f17eb75b45e13054aaf1521">builtin_protocol_feature_t::ram_restrictions</a> ) ) {</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>            <span class="keyword">const</span> <span class="keywordtype">size_t</span> checktime_interval = 10;</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>            <span class="keywordtype">size_t</span> counter = 0;</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>            <span class="keywordtype">bool</span>   not_in_notify_context = (receiver == act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a3598da3f8df67037e69dab758ce168be">account</a>);</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>            <span class="keyword">const</span> <span class="keyword">auto</span> end = _account_ram_deltas.end();</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>            <span class="keywordflow">for</span>( <span class="keyword">auto</span> itr = _account_ram_deltas.begin(); itr != end; ++itr, ++counter ) {</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>               <span class="keywordflow">if</span>( counter == checktime_interval ) {</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>                  <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1transaction__context.html#ac47cac1e2ac5625a8589686503dd1261">checktime</a>();</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>                  counter = 0;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>               }</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>               <span class="keywordflow">if</span>( itr-&gt;delta &gt; 0 &amp;&amp; itr-&gt;account != receiver ) {</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>                  <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( not_in_notify_context, unauthorized_ram_usage_increase,</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>                              <span class="stringliteral">&quot;unprivileged contract cannot increase RAM usage of another account within a notify context: ${account}&quot;</span>,</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>                              (<span class="stringliteral">&quot;account&quot;</span>, itr-&gt;account)</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>                  );</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>                  <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a87b5bd0a6ac8461dd9c1486561a0c314">has_authorization</a>( itr-&gt;account ), unauthorized_ram_usage_increase,</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>                              <span class="stringliteral">&quot;unprivileged contract cannot increase RAM usage of another account that has not authorized the action: ${account}&quot;</span>,</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>                              (<span class="stringliteral">&quot;account&quot;</span>, itr-&gt;account)</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>                  );</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>               }</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>            }</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>         }</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>      } <a class="code hl_define" href="exception_8hpp.html#af3731d6e3beb140d9e652adf7a18113b">FC_RETHROW_EXCEPTIONS</a>( warn, <span class="stringliteral">&quot;pending console output: ${console}&quot;</span>, (<span class="stringliteral">&quot;console&quot;</span>, _pending_console_output) )</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span> </div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>      <span class="keywordflow">if</span>( <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#aa808acf858e93c567ff983ccbf8fb6d3">is_builtin_activated</a>( <a class="code hl_enumvalue" href="namespacesysio_1_1chain.html#a406d45a184cdba0af316b5bf34bf56cfa7d76bd2f931e7c1f1c2b7413c93a25b0">builtin_protocol_feature_t::action_return_value</a> ) ) {</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>         act_digest =   <a class="code hl_function" href="namespacesysio_1_1chain.html#a74ad7956eae3ff7ff8670caaff413e12">generate_action_digest</a>(</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>                           [<span class="keyword">this</span>](<span class="keyword">const</span> <span class="keywordtype">char</span>* data, <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a133461752aa04472950ae3cccb8b86de">datalen</a>) {</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>                              <span class="keywordflow">return</span> <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1transaction__context.html#ab851893d7707bae5ac294b19ecfd667b">hash_with_checktime</a>&lt;<a class="code hl_class" href="classfc_1_1sha256.html">digest_type</a>&gt;(data, <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a133461752aa04472950ae3cccb8b86de">datalen</a>);</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>                           },</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>                           *act,</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>                           <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a1c52613df7c14b4120213492f01a6dac">action_return_value</a></div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>                        );</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>         act_digest = <a class="code hl_function" href="classfc_1_1sha256.html#a474784de7d6213b855abd7e952df5e36">digest_type::hash</a>(*act);</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>      }</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>   } <span class="keywordflow">catch</span> ( <span class="keyword">const</span> std::bad_alloc&amp; ) {</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>      <span class="keywordflow">throw</span>;</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>   } <span class="keywordflow">catch</span> ( <span class="keyword">const</span> boost::interprocess::bad_alloc&amp; ) {</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>      <span class="keywordflow">throw</span>;</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>   } <span class="keywordflow">catch</span>( <span class="keyword">const</span> <a class="code hl_class" href="classfc_1_1exception.html">fc::exception</a>&amp; e ) {</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>      handle_exception(e);</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>   } <span class="keywordflow">catch</span> ( <span class="keyword">const</span> std::exception&amp; e ) {</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>      <span class="keyword">auto</span> wrapper = <a class="code hl_function" href="classfc_1_1std__exception__wrapper.html#ae5ad64f84b1d373f5b92031566284c7c">fc::std_exception_wrapper::from_current_exception</a>(e);</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>      handle_exception(wrapper);</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>   }</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span> </div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>   <span class="comment">// Note: It should not be possible for receiver_account to be invalidated because:</span></div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>   <span class="comment">//    * a pointer to an object in a chainbase index is not invalidated if other objects in that index are modified, removed, or added;</span></div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>   <span class="comment">//    * a pointer to an object in a chainbase index is not invalidated if the fields of that object are modified;</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>   <span class="comment">//    * and, the *receiver_account object itself cannot be removed because accounts cannot be deleted in SYSIO.</span></div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span> </div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>   <a class="code hl_struct" href="structsysio_1_1chain_1_1action__trace.html">action_trace</a>&amp; trace = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.get_action_trace( action_ordinal );</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>   trace.<a class="code hl_variable" href="structsysio_1_1chain_1_1action__trace.html#ae591c5eb3a224491d0d811267dd3cdc1">return_value</a>  = std::move(<a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a1c52613df7c14b4120213492f01a6dac">action_return_value</a>);</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>   trace.<a class="code hl_variable" href="structsysio_1_1chain_1_1action__trace.html#af3800bd1b2e1a3f1d5357fa44ee12bb3">receipt</a>.emplace();</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span> </div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>   <a class="code hl_struct" href="structsysio_1_1chain_1_1action__receipt.html">action_receipt</a>&amp; <a class="code hl_variable" href="bn_8cpp.html#af0a5201ca8846f05f25435b41d7f39f7">r</a>  = *trace.<a class="code hl_variable" href="structsysio_1_1chain_1_1action__trace.html#af3800bd1b2e1a3f1d5357fa44ee12bb3">receipt</a>;</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>   <a class="code hl_variable" href="bn_8cpp.html#af0a5201ca8846f05f25435b41d7f39f7">r</a>.receiver         = receiver;</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>   <a class="code hl_variable" href="bn_8cpp.html#af0a5201ca8846f05f25435b41d7f39f7">r</a>.act_digest       = act_digest;</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>   <a class="code hl_variable" href="bn_8cpp.html#af0a5201ca8846f05f25435b41d7f39f7">r</a>.global_sequence  = <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a2ef781fcd0596791a3edb004b4f5c8c5">next_global_sequence</a>();</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>   <a class="code hl_variable" href="bn_8cpp.html#af0a5201ca8846f05f25435b41d7f39f7">r</a>.recv_sequence    = <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#acb20a8d75fff438efadb4976a6fdce31">next_recv_sequence</a>( *receiver_account );</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span> </div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>   <span class="keyword">const</span> <a class="code hl_class" href="classsysio_1_1chain_1_1account__metadata__object.html">account_metadata_object</a>* first_receiver_account = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>   <span class="keywordflow">if</span>( act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a3598da3f8df67037e69dab758ce168be">account</a> == receiver ) {</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>      first_receiver_account = receiver_account;</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>   } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>      first_receiver_account = &amp;<a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#afcfe00f81a526c1376d4f51197dd3a9a">get</a>&lt;<a class="code hl_class" href="classsysio_1_1chain_1_1account__metadata__object.html">account_metadata_object</a>, by_name&gt;(act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a3598da3f8df67037e69dab758ce168be">account</a>);</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>   }</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span> </div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>   <a class="code hl_variable" href="bn_8cpp.html#af0a5201ca8846f05f25435b41d7f39f7">r</a>.code_sequence    = first_receiver_account-&gt;code_sequence; <span class="comment">// could be modified by action execution above</span></div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>   <a class="code hl_variable" href="bn_8cpp.html#af0a5201ca8846f05f25435b41d7f39f7">r</a>.abi_sequence     = first_receiver_account-&gt;abi_sequence;  <span class="comment">// could be modified by action execution above</span></div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span> </div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>   <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp; auth : act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a40939533bca9e44d169ee7e25ebb1945">authorization</a> ) {</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>      <a class="code hl_variable" href="bn_8cpp.html#af0a5201ca8846f05f25435b41d7f39f7">r</a>.auth_sequence[auth.actor] = <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#aa5a5520ad95838d777834dd408a2c71d">next_auth_sequence</a>( auth.actor );</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>   }</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span> </div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.<a class="code hl_variable" href="classsysio_1_1chain_1_1transaction__context.html#aa16627a2b31f924e998137ba14f22123">executed_action_receipt_digests</a>.emplace_back( <a class="code hl_variable" href="bn_8cpp.html#af0a5201ca8846f05f25435b41d7f39f7">r</a>.digest() );</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span> </div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>   <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a89069192fcd50a9ebbe656f8868e7b90">finalize_trace</a>( trace, start );</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span> </div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>   <span class="keywordflow">if</span> ( <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#afb3840481287ef2685e61375a44b0305">contracts_console</a>() ) {</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>      print_debug(receiver, trace);</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>   }</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span> </div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>   <span class="keywordflow">if</span> (<span class="keyword">auto</span> dm_logger = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a4f6404b355a3a4bf7fb60c92e85443d1">get_deep_mind_logger</a>())</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>   {</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>      dm_logger-&gt;on_end_action();</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>   }</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>}</div>
</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span> </div>
<div class="foldopen" id="foldopen00189" data-start="{" data-end="}">
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#a89069192fcd50a9ebbe656f8868e7b90">  189</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a89069192fcd50a9ebbe656f8868e7b90">apply_context::finalize_trace</a>( <a class="code hl_struct" href="structsysio_1_1chain_1_1action__trace.html">action_trace</a>&amp; trace, <span class="keyword">const</span> <a class="code hl_class" href="classfc_1_1time__point.html">fc::time_point</a>&amp; start )</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>{</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>   trace.<a class="code hl_variable" href="structsysio_1_1chain_1_1action__trace.html#ac590168044f7b45e3621150135487776">account_ram_deltas</a> = std::move( _account_ram_deltas );</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>   _account_ram_deltas.clear();</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span> </div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>   trace.<a class="code hl_variable" href="structsysio_1_1chain_1_1action__trace.html#a5deb1ef19ee3280311c5341887e9e7e7">console</a> = std::move( _pending_console_output );</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>   _pending_console_output.clear();</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span> </div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>   trace.<a class="code hl_variable" href="structsysio_1_1chain_1_1action__trace.html#a2768873af7e824ea890790b416418a63">elapsed</a> = <a class="code hl_function" href="classfc_1_1time__point.html#aa164ff1268a16d4b32afcff181f6100e">fc::time_point::now</a>() - start;</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>}</div>
</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span> </div>
<div class="foldopen" id="foldopen00200" data-start="{" data-end="}">
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#aac87c3bc66a6e05318bfd25c3373fee5">  200</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#aac87c3bc66a6e05318bfd25c3373fee5">apply_context::exec</a>()</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>{</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>   _notified.emplace_back( receiver, action_ordinal );</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>   <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a3d55f08ae8c014eb7cca9d36b43e8220">exec_one</a>();</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>   <span class="keywordflow">for</span>( <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> i = 1; i &lt; _notified.size(); ++i ) {</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>      std::tie( receiver, action_ordinal ) = _notified[i];</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>      <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a3d55f08ae8c014eb7cca9d36b43e8220">exec_one</a>();</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>   }</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span> </div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>   <span class="keywordflow">if</span>( _cfa_inline_actions.size() &gt; 0 || _inline_actions.size() &gt; 0 ) {</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( recurse_depth &lt; <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0bb11e832a05b6437c79bf81758b1b7d">get_global_properties</a>().<a class="code hl_variable" href="classsysio_1_1chain_1_1global__property__object.html#a7f149fcf87034217c899838eb4430496">configuration</a>.<a class="code hl_variable" href="structsysio_1_1chain_1_1chain__config__v0.html#a007444fa5297c0950b749d4ca2b64e2c">max_inline_action_depth</a>,</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>                  <a class="code hl_variable" href="namespacesysio_1_1chain.html#a5dfe17906469eaf079c180c1afb4ad94">transaction_exception</a>, <span class="stringliteral">&quot;max inline action depth per transaction reached&quot;</span> );</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>   }</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span> </div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>   <span class="keywordflow">for</span>( <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> ordinal : _cfa_inline_actions ) {</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>      <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.execute_action( ordinal, recurse_depth + 1 );</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>   }</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span> </div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>   <span class="keywordflow">for</span>( <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> ordinal : _inline_actions ) {</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>      <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.execute_action( ordinal, recurse_depth + 1 );</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>   }</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span> </div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>} </div>
</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span> </div>
<div class="foldopen" id="foldopen00224" data-start="{" data-end="}">
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#aa3b1a676573b8e03823646f92da39365">  224</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#aa3b1a676573b8e03823646f92da39365">apply_context::is_account</a>( <span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">account_name</a>&amp; account )<span class="keyword">const </span>{</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>   <span class="keywordflow">return</span> <span class="keyword">nullptr</span> != <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#aa5a2ca0da0092693ac49b36b7ec6817a">find</a>&lt;<a class="code hl_class" href="classsysio_1_1chain_1_1account__object.html">account_object</a>,by_name&gt;( account );</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>}</div>
</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span> </div>
<div class="foldopen" id="foldopen00228" data-start="{" data-end="}">
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#ae13927eb37e92ff57b4a4bfa78e91616">  228</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#ae13927eb37e92ff57b4a4bfa78e91616">apply_context::get_code_hash</a>(</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>   <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">account_name</a> account, <a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>&amp; code_sequence, <a class="code hl_class" href="classfc_1_1sha256.html">fc::sha256</a>&amp; code_hash, <a class="code hl_typedef" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&amp; <a class="code hl_enumeration" href="classsysio_1_1chain_1_1wasm__interface.html#a9053d9e65167e5f241f1f3f27b175f9c">vm_type</a>, <a class="code hl_typedef" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&amp; vm_version)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span> </div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>   <span class="keyword">auto</span> obj = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#aa5a2ca0da0092693ac49b36b7ec6817a">find</a>&lt;<a class="code hl_class" href="classsysio_1_1chain_1_1account__metadata__object.html">account_metadata_object</a>,by_name&gt;(account);</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>   <span class="keywordflow">if</span>(!obj || obj-&gt;code_hash == <a class="code hl_class" href="classfc_1_1sha256.html">fc::sha256</a>{}) {</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>      <span class="keywordflow">if</span>(obj)</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>         code_sequence = obj-&gt;code_sequence;</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>      <span class="keywordflow">else</span></div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>         code_sequence = 0;</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>      code_hash = {};</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>      <a class="code hl_enumeration" href="classsysio_1_1chain_1_1wasm__interface.html#a9053d9e65167e5f241f1f3f27b175f9c">vm_type</a> = 0;</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>      vm_version = 0;</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>   } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>      code_sequence = obj-&gt;code_sequence;</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>      code_hash = obj-&gt;code_hash;</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>      <a class="code hl_enumeration" href="classsysio_1_1chain_1_1wasm__interface.html#a9053d9e65167e5f241f1f3f27b175f9c">vm_type</a> = obj-&gt;vm_type;</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>      vm_version = obj-&gt;vm_version;</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>   }</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>}</div>
</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span> </div>
<div class="foldopen" id="foldopen00248" data-start="{" data-end="}">
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#a7dbd347239af8b3540db7830b6e2f11e">  248</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a7dbd347239af8b3540db7830b6e2f11e">apply_context::require_authorization</a>( <span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">account_name</a>&amp; account ) {</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>   <span class="keywordflow">for</span>( <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> i=0; i &lt; act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a40939533bca9e44d169ee7e25ebb1945">authorization</a>.size(); i++ ) {</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>     <span class="keywordflow">if</span>( act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a40939533bca9e44d169ee7e25ebb1945">authorization</a>[i].actor == account ) {</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>     }</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>   }</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( <span class="keyword">false</span>, missing_auth_exception, <span class="stringliteral">&quot;missing authority of ${account}&quot;</span>, (<span class="stringliteral">&quot;account&quot;</span>,account));</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>}</div>
</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span> </div>
<div class="foldopen" id="foldopen00257" data-start="{" data-end="}">
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#a87b5bd0a6ac8461dd9c1486561a0c314">  257</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a87b5bd0a6ac8461dd9c1486561a0c314">apply_context::has_authorization</a>( <span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">account_name</a>&amp; account )<span class="keyword">const </span>{</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>   <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp; auth : act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a40939533bca9e44d169ee7e25ebb1945">authorization</a> )</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>     <span class="keywordflow">if</span>( auth.actor == account )</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>}</div>
</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span> </div>
<div class="foldopen" id="foldopen00264" data-start="{" data-end="}">
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#a3ddf99ea046e7ab8192cf8d4309090ed">  264</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a7dbd347239af8b3540db7830b6e2f11e">apply_context::require_authorization</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">account_name</a>&amp; account,</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>                                          <span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">permission_name</a>&amp; permission) {</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>  <span class="keywordflow">for</span>( <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> i=0; i &lt; act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a40939533bca9e44d169ee7e25ebb1945">authorization</a>.size(); i++ )</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>     <span class="keywordflow">if</span>( act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a40939533bca9e44d169ee7e25ebb1945">authorization</a>[i].actor == account ) {</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>        <span class="keywordflow">if</span>( act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a40939533bca9e44d169ee7e25ebb1945">authorization</a>[i].permission == permission ) {</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>           <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>        }</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>     }</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>  <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( <span class="keyword">false</span>, missing_auth_exception, <span class="stringliteral">&quot;missing authority of ${account}/${permission}&quot;</span>,</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>              (<span class="stringliteral">&quot;account&quot;</span>,account)(<span class="stringliteral">&quot;permission&quot;</span>,permission) );</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>}</div>
</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span> </div>
<div class="foldopen" id="foldopen00276" data-start="{" data-end="}">
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#adecf61df18e643021f05df3cdfb97127">  276</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#adecf61df18e643021f05df3cdfb97127">apply_context::has_recipient</a>( <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">account_name</a> code )<span class="keyword">const </span>{</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>   <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a> : _notified )</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>      <span class="keywordflow">if</span>( <a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a>.first == code )</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>         <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>}</div>
</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span> </div>
<div class="foldopen" id="foldopen00283" data-start="{" data-end="}">
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#a00a749f7d122e141a87aab3767d3349c">  283</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a00a749f7d122e141a87aab3767d3349c">apply_context::require_recipient</a>( <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">account_name</a> recipient ) {</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>   <span class="keywordflow">if</span>( !<a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#adecf61df18e643021f05df3cdfb97127">has_recipient</a>(recipient) ) {</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>      _notified.emplace_back(</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>         recipient,</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>         <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a15f2962cf55ed75da1cae67309e844d5">schedule_action</a>( action_ordinal, recipient, <span class="keyword">false</span> )</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>      );</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span> </div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>      <span class="keywordflow">if</span> (<span class="keyword">auto</span> dm_logger = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a4f6404b355a3a4bf7fb60c92e85443d1">get_deep_mind_logger</a>()) {</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>         dm_logger-&gt;on_require_recipient();</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>      }</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>   }</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>}</div>
</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span> </div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span> </div>
<div class="foldopen" id="foldopen00312" data-start="{" data-end="}">
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#a95ccf1ed89aab0118938c309fbf91d1f">  312</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a95ccf1ed89aab0118938c309fbf91d1f">apply_context::execute_inline</a>( <a class="code hl_struct" href="structsysio_1_1chain_1_1action.html">action</a>&amp;&amp; <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a> ) {</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>   <span class="keyword">auto</span>* code = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0c79d00dae8c0d90efc18f4d091b2391">db</a>().<a class="code hl_function" href="classchainbase_1_1database.html#aa5a2ca0da0092693ac49b36b7ec6817a">find</a>&lt;<a class="code hl_class" href="classsysio_1_1chain_1_1account__object.html">account_object</a>, by_name&gt;(<a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.account);</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( code != <span class="keyword">nullptr</span>, <a class="code hl_variable" href="namespacesysio_1_1chain.html#a764b50974b9b72a0e233e72176913d6b">action_validate_exception</a>,</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>               <span class="stringliteral">&quot;inline action&#39;s code account ${account} does not exist&quot;</span>, (<span class="stringliteral">&quot;account&quot;</span>, <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.account) );</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span> </div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>   <span class="keywordtype">bool</span> enforce_actor_whitelist_blacklist = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.<a class="code hl_variable" href="classsysio_1_1chain_1_1transaction__context.html#a799e9208ec6d2ea3d1dfccfd4eb97cec">enforce_whiteblacklist</a> &amp;&amp; <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0fcc85a590581560765686050fe105a8">is_producing_block</a>();</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>   flat_set&lt;account_name&gt; actors;</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span> </div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>   <span class="keywordtype">bool</span> disallow_send_to_self_bypass = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#aa808acf858e93c567ff983ccbf8fb6d3">is_builtin_activated</a>( <a class="code hl_enumvalue" href="namespacesysio_1_1chain.html#a406d45a184cdba0af316b5bf34bf56cfaf0765905ee88dc2bfbdd738872b1b6f8">builtin_protocol_feature_t::restrict_action_to_self</a> );</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>   <span class="keywordtype">bool</span> send_to_self = (<a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.account == receiver);</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>   <span class="keywordtype">bool</span> inherit_parent_authorizations = (!disallow_send_to_self_bypass &amp;&amp; send_to_self &amp;&amp; (receiver == act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a3598da3f8df67037e69dab758ce168be">account</a>) &amp;&amp; <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0fcc85a590581560765686050fe105a8">is_producing_block</a>());</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span> </div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>   flat_set&lt;permission_level&gt; inherited_authorizations;</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>   <span class="keywordflow">if</span>( inherit_parent_authorizations ) {</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>      inherited_authorizations.reserve( <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.authorization.size() );</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>   }</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span> </div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>   <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp; auth : <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.authorization ) {</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>      <span class="keyword">auto</span>* <a class="code hl_class" href="classfc_1_1actor.html">actor</a> = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0c79d00dae8c0d90efc18f4d091b2391">db</a>().<a class="code hl_function" href="classchainbase_1_1database.html#aa5a2ca0da0092693ac49b36b7ec6817a">find</a>&lt;<a class="code hl_class" href="classsysio_1_1chain_1_1account__object.html">account_object</a>, by_name&gt;(auth.actor);</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( <a class="code hl_class" href="classfc_1_1actor.html">actor</a> != <span class="keyword">nullptr</span>, <a class="code hl_variable" href="namespacesysio_1_1chain.html#a764b50974b9b72a0e233e72176913d6b">action_validate_exception</a>,</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>                  <span class="stringliteral">&quot;inline action&#39;s authorizing actor ${account} does not exist&quot;</span>, (<span class="stringliteral">&quot;account&quot;</span>, auth.actor) );</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a8f7456b81f2657ccf6c39b35afb16af4">get_authorization_manager</a>().<a class="code hl_function" href="classsysio_1_1chain_1_1authorization__manager.html#ab0acfec50b75044030d082d1aa3fbf5c">find_permission</a>(auth) != <span class="keyword">nullptr</span>, <a class="code hl_variable" href="namespacesysio_1_1chain.html#a764b50974b9b72a0e233e72176913d6b">action_validate_exception</a>,</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>                  <span class="stringliteral">&quot;inline action&#39;s authorizations include a non-existent permission: ${permission}&quot;</span>,</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>                  (<span class="stringliteral">&quot;permission&quot;</span>, auth) );</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>      <span class="keywordflow">if</span>( enforce_actor_whitelist_blacklist )</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>         actors.insert( auth.actor );</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span> </div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>      <span class="keywordflow">if</span>( inherit_parent_authorizations &amp;&amp; std::find(act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a40939533bca9e44d169ee7e25ebb1945">authorization</a>.begin(), act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a40939533bca9e44d169ee7e25ebb1945">authorization</a>.end(), auth) != act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a40939533bca9e44d169ee7e25ebb1945">authorization</a>.end() ) {</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>         inherited_authorizations.insert( auth );</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>      }</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>   }</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span> </div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>   <span class="keywordflow">if</span>( enforce_actor_whitelist_blacklist ) {</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>      <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#aa378f4265708c1bc41e4ee058ed71e6a">check_actor_list</a>( actors );</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>   }</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span> </div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>   <span class="keywordflow">if</span>( !privileged &amp;&amp; <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0fcc85a590581560765686050fe105a8">is_producing_block</a>() ) {</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_struct" href="structsysio_1_1chain_1_1chain__config__v1.html">chain_config</a> = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0bb11e832a05b6437c79bf81758b1b7d">get_global_properties</a>().<a class="code hl_variable" href="classsysio_1_1chain_1_1global__property__object.html#a7f149fcf87034217c899838eb4430496">configuration</a>;</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.data.size() &lt; std::min(<a class="code hl_struct" href="structsysio_1_1chain_1_1chain__config__v1.html">chain_config</a>.<a class="code hl_variable" href="structsysio_1_1chain_1_1chain__config__v0.html#afb8514589814c9672abd5d0f9c7297cb">max_inline_action_size</a>, <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a5e15777ff13440123a46783623744202">get_max_nonprivileged_inline_action_size</a>()),</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>                  inline_action_too_big_nonprivileged,</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>                  <span class="stringliteral">&quot;inline action too big for nonprivileged account ${account}&quot;</span>, (<span class="stringliteral">&quot;account&quot;</span>, <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.account));</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>   }</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>   <span class="comment">// No need to check authorization if replaying irreversible blocks or contract is privileged</span></div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>   <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a42a29a059b847799ae3a75953b6bff1e">skip_auth_check</a>() &amp;&amp; !privileged ) {</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>         <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a8f7456b81f2657ccf6c39b35afb16af4">get_authorization_manager</a>()</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>                .<a class="code hl_function" href="classsysio_1_1chain_1_1authorization__manager.html#a8566f4407e33eb1e4029455e4feae2f1">check_authorization</a>( {<a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>},</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>                                      {},</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>                                      {{receiver, config::sysio_code_name}},</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>                                      <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#abb1d81f96986df3bce46bd37caaf6a69">pending_block_time</a>() - <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.<a class="code hl_variable" href="classsysio_1_1chain_1_1transaction__context.html#ab8e1aaec319ed2ae90b6a6f499919c89">published</a>,</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>                                      std::bind(&amp;<a class="code hl_function" href="classsysio_1_1chain_1_1transaction__context.html#ac47cac1e2ac5625a8589686503dd1261">transaction_context::checktime</a>, &amp;this-&gt;trx_context),</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>                                      <span class="keyword">false</span>,</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>                                      <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.<a class="code hl_variable" href="classsysio_1_1chain_1_1transaction__context.html#acd4137f1354209bb1237e5a1f26fdbcd">is_read_only</a>,</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>                                      inherited_authorizations</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>                                    );</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span> </div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>         <span class="comment">//QUESTION: Is it smart to allow a deferred transaction that has been delayed for some time to get away</span></div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>         <span class="comment">//          with sending an inline action that requires a delay even though the decision to send that inline</span></div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>         <span class="comment">//          action was made at the moment the deferred transaction was executed with potentially no forewarning?</span></div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>      } <span class="keywordflow">catch</span>( <span class="keyword">const</span> <a class="code hl_class" href="classfc_1_1exception.html">fc::exception</a>&amp; e ) {</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>         <span class="keywordflow">if</span>( disallow_send_to_self_bypass || !send_to_self ) {</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>            <span class="keywordflow">throw</span>;</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>         } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0fcc85a590581560765686050fe105a8">is_producing_block</a>() ) {</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>            subjective_block_production_exception new_exception(<a class="code hl_define" href="log__message_8hpp.html#a4a4df4bb5cffbe07aadf7d29fd44c75e">FC_LOG_MESSAGE</a>( error, <span class="stringliteral">&quot;Authorization failure with inline action sent to self&quot;</span>));</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; log: e.<a class="code hl_function" href="classfc_1_1exception.html#a70b72c1e4fe0d17485a8b7a0a6f397de">get_log</a>()) {</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>               new_exception.append_log(log);</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>            }</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>            <span class="keywordflow">throw</span> new_exception;</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>         }</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>      } <span class="keywordflow">catch</span>( ... ) {</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>         <span class="keywordflow">if</span>( disallow_send_to_self_bypass || !send_to_self ) {</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>            <span class="keywordflow">throw</span>;</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>         } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0fcc85a590581560765686050fe105a8">is_producing_block</a>() ) {</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>            <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a1bfa656552ea0534b2c91ee0fe33f850">SYS_THROW</a>(subjective_block_production_exception, <span class="stringliteral">&quot;Unexpected exception occurred validating inline action sent to self&quot;</span>);</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>         }</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>      }</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>   }</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span> </div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>   <span class="keyword">auto</span> inline_receiver = <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.account;</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>   _inline_actions.emplace_back(</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>      <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a15f2962cf55ed75da1cae67309e844d5">schedule_action</a>( std::move(<a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>), inline_receiver, <span class="keyword">false</span> )</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>   );</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span> </div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>   <span class="keywordflow">if</span> (<span class="keyword">auto</span> dm_logger = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a4f6404b355a3a4bf7fb60c92e85443d1">get_deep_mind_logger</a>()) {</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>      dm_logger-&gt;on_send_inline();</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>   }</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>}</div>
</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span> </div>
<div class="foldopen" id="foldopen00400" data-start="{" data-end="}">
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#aeacd5c6ae20ee332af568149057df884">  400</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#aeacd5c6ae20ee332af568149057df884">apply_context::execute_context_free_inline</a>( <a class="code hl_struct" href="structsysio_1_1chain_1_1action.html">action</a>&amp;&amp; <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a> ) {</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>   <span class="keyword">auto</span>* code = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0c79d00dae8c0d90efc18f4d091b2391">db</a>().<a class="code hl_function" href="classchainbase_1_1database.html#aa5a2ca0da0092693ac49b36b7ec6817a">find</a>&lt;<a class="code hl_class" href="classsysio_1_1chain_1_1account__object.html">account_object</a>, by_name&gt;(<a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.account);</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( code != <span class="keyword">nullptr</span>, <a class="code hl_variable" href="namespacesysio_1_1chain.html#a764b50974b9b72a0e233e72176913d6b">action_validate_exception</a>,</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>               <span class="stringliteral">&quot;inline action&#39;s code account ${account} does not exist&quot;</span>, (<span class="stringliteral">&quot;account&quot;</span>, <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.account) );</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span> </div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.authorization.size() == 0, <a class="code hl_variable" href="namespacesysio_1_1chain.html#a764b50974b9b72a0e233e72176913d6b">action_validate_exception</a>,</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>               <span class="stringliteral">&quot;context-free actions cannot have authorizations&quot;</span> );</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span> </div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>   <span class="keywordflow">if</span>( !privileged &amp;&amp; <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0fcc85a590581560765686050fe105a8">is_producing_block</a>() ) {</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_struct" href="structsysio_1_1chain_1_1chain__config__v1.html">chain_config</a> = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0bb11e832a05b6437c79bf81758b1b7d">get_global_properties</a>().<a class="code hl_variable" href="classsysio_1_1chain_1_1global__property__object.html#a7f149fcf87034217c899838eb4430496">configuration</a>;</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.data.size() &lt; std::min(<a class="code hl_struct" href="structsysio_1_1chain_1_1chain__config__v1.html">chain_config</a>.<a class="code hl_variable" href="structsysio_1_1chain_1_1chain__config__v0.html#afb8514589814c9672abd5d0f9c7297cb">max_inline_action_size</a>, <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a5e15777ff13440123a46783623744202">get_max_nonprivileged_inline_action_size</a>()),</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>                  inline_action_too_big_nonprivileged,</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>                  <span class="stringliteral">&quot;inline action too big for nonprivileged account ${account}&quot;</span>, (<span class="stringliteral">&quot;account&quot;</span>, <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.account));</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>   }</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span> </div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>   <span class="keyword">auto</span> inline_receiver = <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.account;</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>   _cfa_inline_actions.emplace_back(</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>      <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a15f2962cf55ed75da1cae67309e844d5">schedule_action</a>( std::move(<a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>), inline_receiver, <span class="keyword">true</span> )</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>   );</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span> </div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>   <span class="keywordflow">if</span> (<span class="keyword">auto</span> dm_logger = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a4f6404b355a3a4bf7fb60c92e85443d1">get_deep_mind_logger</a>()) {</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>      dm_logger-&gt;on_send_context_free_inline();</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>   }</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>}</div>
</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span> </div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span> </div>
<div class="foldopen" id="foldopen00426" data-start="{" data-end="}">
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#ac09c8f3118154bb22b0bd50526e138fa">  426</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#ac09c8f3118154bb22b0bd50526e138fa">apply_context::schedule_deferred_transaction</a>( <span class="keyword">const</span> <a class="code hl_typedef" href="namespacesysio_1_1chain.html#a896515137d9a7844105786ee3a6b1d47">uint128_t</a>&amp; sender_id, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">account_name</a> payer, <a class="code hl_struct" href="structsysio_1_1chain_1_1transaction.html">transaction</a>&amp;&amp; trx, <span class="keywordtype">bool</span> replace_existing ) {</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( trx.context_free_actions.size() == 0, cfa_inside_generated_tx, <span class="stringliteral">&quot;context free actions are not currently allowed in generated transactions&quot;</span> );</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span> </div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>   <span class="keywordtype">bool</span> enforce_actor_whitelist_blacklist = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.<a class="code hl_variable" href="classsysio_1_1chain_1_1transaction__context.html#a799e9208ec6d2ea3d1dfccfd4eb97cec">enforce_whiteblacklist</a> &amp;&amp; <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0fcc85a590581560765686050fe105a8">is_producing_block</a>()</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>                                             &amp;&amp; !<a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#aa82f197374a4e96fd3e952e18106eae9">sender_avoids_whitelist_blacklist_enforcement</a>( receiver );</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1transaction__context.html#a7ecbfbb3d05a6a0b128feeb0a469878c">validate_referenced_accounts</a>( trx, enforce_actor_whitelist_blacklist );</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span> </div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>   <span class="keywordflow">if</span>( <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#aa808acf858e93c567ff983ccbf8fb6d3">is_builtin_activated</a>( <a class="code hl_enumvalue" href="namespacesysio_1_1chain.html#a406d45a184cdba0af316b5bf34bf56cfa1e0a5b7203c3f4124dc8c1880b04e36b">builtin_protocol_feature_t::no_duplicate_deferred_id</a> ) ) {</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>      <span class="keyword">auto</span> exts = trx.validate_and_extract_extensions();</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>      <span class="keywordflow">if</span>( exts.size() &gt; 0 ) {</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>         <span class="keyword">auto</span> itr = exts.lower_bound( <a class="code hl_function" href="structsysio_1_1chain_1_1deferred__transaction__generation__context.html#a13c8439c1c9d63ef864fe850c666b96f">deferred_transaction_generation_context::extension_id</a>() );</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span> </div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>         <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( exts.size() == 1 &amp;&amp; itr != exts.end(), invalid_transaction_extension,</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>                     <span class="stringliteral">&quot;only the deferred_transaction_generation_context extension is currently supported for deferred transactions&quot;</span></div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>         );</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span> </div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>         <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_struct" href="structcontext.html">context</a> = std::get&lt;deferred_transaction_generation_context&gt;(itr-&gt;second);</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span> </div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>         <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( <a class="code hl_struct" href="structcontext.html">context</a>.sender == receiver, ill_formed_deferred_transaction_generation_context,</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>                     <span class="stringliteral">&quot;deferred transaction generaction context contains mismatching sender&quot;</span>,</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>                     (<span class="stringliteral">&quot;expected&quot;</span>, receiver)(<span class="stringliteral">&quot;actual&quot;</span>, <a class="code hl_struct" href="structcontext.html">context</a>.sender)</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>         );</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>         <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( <a class="code hl_struct" href="structcontext.html">context</a>.sender_id == sender_id, ill_formed_deferred_transaction_generation_context,</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>                     <span class="stringliteral">&quot;deferred transaction generaction context contains mismatching sender_id&quot;</span>,</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>                     (<span class="stringliteral">&quot;expected&quot;</span>, sender_id)(<span class="stringliteral">&quot;actual&quot;</span>, <a class="code hl_struct" href="structcontext.html">context</a>.sender_id)</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>         );</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>         <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( <a class="code hl_struct" href="structcontext.html">context</a>.sender_trx_id == <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.<a class="code hl_variable" href="classsysio_1_1chain_1_1transaction__context.html#a08e9cf6a4b8ce2f6211ce9d8de1b4da3">packed_trx</a>.<a class="code hl_function" href="structsysio_1_1chain_1_1packed__transaction.html#acc706e72aa422ee3e3c02f73871609cb">id</a>(), ill_formed_deferred_transaction_generation_context,</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>                     <span class="stringliteral">&quot;deferred transaction generaction context contains mismatching sender_trx_id&quot;</span>,</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>                     (<span class="stringliteral">&quot;expected&quot;</span>, <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.<a class="code hl_variable" href="classsysio_1_1chain_1_1transaction__context.html#a08e9cf6a4b8ce2f6211ce9d8de1b4da3">packed_trx</a>.<a class="code hl_function" href="structsysio_1_1chain_1_1packed__transaction.html#acc706e72aa422ee3e3c02f73871609cb">id</a>())(<span class="stringliteral">&quot;actual&quot;</span>, <a class="code hl_struct" href="structcontext.html">context</a>.sender_trx_id)</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>         );</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>         <a class="code hl_function" href="namespacesysio_1_1chain.html#a4e167bafac72001dee047e0f198bb689">emplace_extension</a>(</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>            trx.transaction_extensions,</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>            <a class="code hl_function" href="structsysio_1_1chain_1_1deferred__transaction__generation__context.html#a13c8439c1c9d63ef864fe850c666b96f">deferred_transaction_generation_context::extension_id</a>(),</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>            <a class="code hl_function" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a>( <a class="code hl_struct" href="structsysio_1_1chain_1_1deferred__transaction__generation__context.html">deferred_transaction_generation_context</a>( <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.<a class="code hl_variable" href="classsysio_1_1chain_1_1transaction__context.html#a08e9cf6a4b8ce2f6211ce9d8de1b4da3">packed_trx</a>.<a class="code hl_function" href="structsysio_1_1chain_1_1packed__transaction.html#acc706e72aa422ee3e3c02f73871609cb">id</a>(), sender_id, receiver ) )</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>         );</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>      }</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>      trx.expiration = <a class="code hl_class" href="classfc_1_1time__point__sec.html">time_point_sec</a>();</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>      trx.ref_block_num = 0;</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>      trx.ref_block_prefix = 0;</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>   } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>      trx.expiration = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#abb1d81f96986df3bce46bd37caaf6a69">pending_block_time</a>() + <a class="code hl_class" href="classfc_1_1microseconds.html">fc::microseconds</a>(999&#39;999); <span class="comment">// Rounds up to nearest second (makes expiration check unnecessary)</span></div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>      trx.set_reference_block(<a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a37d0a44faef74cf0f96127982c1ce124">head_block_id</a>()); <span class="comment">// No TaPoS check necessary</span></div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>   }</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span> </div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>   <span class="comment">// Charge ahead of time for the additional net usage needed to retire the deferred transaction</span></div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>   <span class="comment">// whether that be by successfully executing, soft failure, hard failure, or expiration.</span></div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; cfg = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0bb11e832a05b6437c79bf81758b1b7d">get_global_properties</a>().<a class="code hl_variable" href="classsysio_1_1chain_1_1global__property__object.html#a7f149fcf87034217c899838eb4430496">configuration</a>;</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1transaction__context.html#a62b3defb107a356551a01d2c78e80b4b">add_net_usage</a>( <span class="keyword">static_cast&lt;</span><a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a><span class="keyword">&gt;</span>(cfg.base_per_transaction_net_usage)</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>                               + <span class="keyword">static_cast&lt;</span><a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a><span class="keyword">&gt;</span>(config::transaction_id_net_usage) ); <span class="comment">// Will exit early if net usage cannot be payed.</span></div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span> </div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>   <span class="keyword">auto</span> delay = <a class="code hl_function" href="namespacefc.html#a9623b8cae3f48bbed6aa1fc2afe9b174">fc::seconds</a>(trx.delay_sec);</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span> </div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>   <span class="keywordtype">bool</span> ram_restrictions_activated = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#aa808acf858e93c567ff983ccbf8fb6d3">is_builtin_activated</a>( <a class="code hl_enumvalue" href="namespacesysio_1_1chain.html#a406d45a184cdba0af316b5bf34bf56cfa5b1659352f17eb75b45e13054aaf1521">builtin_protocol_feature_t::ram_restrictions</a> );</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span> </div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>   <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a42a29a059b847799ae3a75953b6bff1e">skip_auth_check</a>() &amp;&amp; !privileged ) { <span class="comment">// Do not need to check authorization if replayng irreversible block or if contract is privileged</span></div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>      <span class="keywordflow">if</span>( payer != receiver ) {</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>         <span class="keywordflow">if</span>( ram_restrictions_activated ) {</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>            <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( receiver == act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a3598da3f8df67037e69dab758ce168be">account</a>, <a class="code hl_variable" href="namespacesysio_1_1chain.html#a764b50974b9b72a0e233e72176913d6b">action_validate_exception</a>,</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>                        <span class="stringliteral">&quot;cannot bill RAM usage of deferred transactions to another account within notify context&quot;</span></div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>            );</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>            <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a87b5bd0a6ac8461dd9c1486561a0c314">has_authorization</a>( payer ), <a class="code hl_variable" href="namespacesysio_1_1chain.html#a764b50974b9b72a0e233e72176913d6b">action_validate_exception</a>,</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>                        <span class="stringliteral">&quot;cannot bill RAM usage of deferred transaction to another account that has not authorized the action: ${payer}&quot;</span>,</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>                        (<span class="stringliteral">&quot;payer&quot;</span>, payer)</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>            );</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>         } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>            <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a7dbd347239af8b3540db7830b6e2f11e">require_authorization</a>(payer); </div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>         }</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>      }</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span> </div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>      <span class="comment">// Originally this code bypassed authorization checks if a contract was deferring only actions to itself.</span></div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>      <span class="comment">// The idea was that the code could already do whatever the deferred transaction could do, so there was no point in checking authorizations.</span></div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>      <span class="comment">// But this is not true. The original implementation didn&#39;t validate the authorizations on the actions which allowed for privilege escalation.</span></div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>      <span class="comment">// It would make it possible to bill RAM to some unrelated account.</span></div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>      <span class="comment">// Furthermore, even if the authorizations were forced to be a subset of the current action&#39;s authorizations, it would still violate the expectations</span></div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>      <span class="comment">// of the signers of the original transaction, because the deferred transaction would allow billing more CPU and network bandwidth than the maximum limit</span></div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>      <span class="comment">// specified on the original transaction.</span></div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>      <span class="comment">// So, the deferred transaction must always go through the authorization checking if it is not sent by a privileged contract.</span></div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>      <span class="comment">// However, the old logic must still be considered because it cannot objectively change until a consensus protocol upgrade.</span></div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span> </div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>      <span class="keywordtype">bool</span> disallow_send_to_self_bypass = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#aa808acf858e93c567ff983ccbf8fb6d3">is_builtin_activated</a>( <a class="code hl_enumvalue" href="namespacesysio_1_1chain.html#a406d45a184cdba0af316b5bf34bf56cfaf0765905ee88dc2bfbdd738872b1b6f8">builtin_protocol_feature_t::restrict_action_to_self</a> );</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span> </div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>      <span class="keyword">auto</span> is_sending_only_to_self = [&amp;trx]( <span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">account_name</a>&amp; <a class="code hl_enumvalue" href="namespacesysio.html#a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a">self</a> ) {</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>         <span class="keywordtype">bool</span> send_to_self = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>         <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp; act : trx.actions ) {</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>            <span class="keywordflow">if</span>( act.<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a3598da3f8df67037e69dab758ce168be">account</a> != <a class="code hl_enumvalue" href="namespacesysio.html#a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a">self</a> ) {</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>               send_to_self = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>               <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>            }</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>         }</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>         <span class="keywordflow">return</span> send_to_self;</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>      };</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span> </div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>         <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a8f7456b81f2657ccf6c39b35afb16af4">get_authorization_manager</a>()</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>                .<a class="code hl_function" href="classsysio_1_1chain_1_1authorization__manager.html#a8566f4407e33eb1e4029455e4feae2f1">check_authorization</a>( trx.actions,</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>                                      {},</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>                                      {{receiver, config::sysio_code_name}},</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>                                      <a class="code hl_function" href="integration_8cpp.html#a6e9635897de7740b7389a391f613626b">delay</a>,</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>                                      std::bind(&amp;<a class="code hl_function" href="classsysio_1_1chain_1_1transaction__context.html#ac47cac1e2ac5625a8589686503dd1261">transaction_context::checktime</a>, &amp;this-&gt;<a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>),</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>                                      false</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>                                    );</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>      } <span class="keywordflow">catch</span>( <span class="keyword">const</span> <a class="code hl_class" href="classfc_1_1exception.html">fc::exception</a>&amp; e ) {</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>         <span class="keywordflow">if</span>( disallow_send_to_self_bypass || !is_sending_only_to_self(receiver) ) {</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>            <span class="keywordflow">throw</span>;</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>         } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0fcc85a590581560765686050fe105a8">is_producing_block</a>() ) {</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>            subjective_block_production_exception new_exception(<a class="code hl_define" href="log__message_8hpp.html#a4a4df4bb5cffbe07aadf7d29fd44c75e">FC_LOG_MESSAGE</a>( error, <span class="stringliteral">&quot;Authorization failure with sent deferred transaction consisting only of actions to self&quot;</span>));</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; log: e.<a class="code hl_function" href="classfc_1_1exception.html#a70b72c1e4fe0d17485a8b7a0a6f397de">get_log</a>()) {</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>               new_exception.append_log(log);</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>            }</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>            <span class="keywordflow">throw</span> new_exception;</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>         }</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>      } <span class="keywordflow">catch</span>( ... ) {</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>         <span class="keywordflow">if</span>( disallow_send_to_self_bypass || !is_sending_only_to_self(receiver) ) {</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>            <span class="keywordflow">throw</span>;</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>         } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0fcc85a590581560765686050fe105a8">is_producing_block</a>() ) {</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>            <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a1bfa656552ea0534b2c91ee0fe33f850">SYS_THROW</a>(subjective_block_production_exception, <span class="stringliteral">&quot;Unexpected exception occurred validating sent deferred transaction consisting only of actions to self&quot;</span>);</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>         }</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>      }</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>   }</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span> </div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>   <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> trx_size = 0;</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>   <span class="keywordflow">if</span> ( <span class="keyword">auto</span> ptr = db.find&lt;<a class="code hl_class" href="classsysio_1_1chain_1_1generated__transaction__object.html">generated_transaction_object</a>,by_sender_id&gt;(boost::make_tuple(receiver, sender_id)) ) {</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( replace_existing, deferred_tx_duplicate, <span class="stringliteral">&quot;deferred transaction with the same sender_id and payer already exists&quot;</span> );</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span> </div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>      <span class="keywordtype">bool</span> replace_deferred_activated = control.is_builtin_activated(<a class="code hl_enumvalue" href="namespacesysio_1_1chain.html#a406d45a184cdba0af316b5bf34bf56cfa6c9cdecb5279149c0f09980e3161e501">builtin_protocol_feature_t::replace_deferred</a>);</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span> </div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( replace_deferred_activated || !control.is_producing_block()</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>                     || control.all_subjective_mitigations_disabled(),</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>                  subjective_block_production_exception,</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>                  <span class="stringliteral">&quot;Replacing a deferred transaction is temporarily disabled.&quot;</span> );</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span> </div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>      <span class="keywordflow">if</span> (<span class="keyword">auto</span> dm_logger = control.get_deep_mind_logger()) {</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>         dm_logger-&gt;on_ram_trace(<a class="code hl_define" href="deep__mind_8hpp.html#aaaa2f1dbd522de03ccbaa73f01db5f50">RAM_EVENT_ID</a>(<span class="stringliteral">&quot;${id}&quot;</span>, (<span class="stringliteral">&quot;id&quot;</span>, ptr-&gt;id)), <span class="stringliteral">&quot;deferred_trx&quot;</span>, <span class="stringliteral">&quot;cancel&quot;</span>, <span class="stringliteral">&quot;deferred_trx_cancel&quot;</span>);</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>      }</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span> </div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>      <a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> orig_trx_ram_bytes = <a class="code hl_variable" href="namespacesysio_1_1chain_1_1config.html#a2772c77657b1f6fda680bbe8f7282d13">config::billable_size_v&lt;generated_transaction_object&gt;</a> + ptr-&gt;packed_trx.size();</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>      <span class="keywordflow">if</span>( replace_deferred_activated ) {</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>         add_ram_usage( ptr-&gt;payer, -<span class="keyword">static_cast&lt;</span><a class="code hl_typedef" href="stdint_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a><span class="keyword">&gt;</span>( orig_trx_ram_bytes ) );</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>         control.add_to_ram_correction( ptr-&gt;payer, orig_trx_ram_bytes );</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>      }</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span> </div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>      <a class="code hl_typedef" href="namespacesysio_1_1chain.html#aa85a3b49b3b219d1e3840567579e7e63">transaction_id_type</a> trx_id_for_new_obj;</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>      <span class="keywordflow">if</span>( replace_deferred_activated ) {</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>         trx_id_for_new_obj = trx.id();</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>         trx_id_for_new_obj = ptr-&gt;trx_id;</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>      }</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span> </div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>      <span class="keywordflow">if</span> (<span class="keyword">auto</span> dm_logger = control.get_deep_mind_logger()) {</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>         dm_logger-&gt;on_cancel_deferred(<a class="code hl_enumvalue" href="classsysio_1_1chain_1_1deep__mind__handler.html#a78bf0c79493a90c71cb28aa761f44fd2a8f45a2644508b5282f57fe129f62d19a">deep_mind_handler::operation_qualifier::modify</a>, *ptr);</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>      }</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span> </div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>      <span class="comment">// Use remove and create rather than modify because mutating the trx_id field in a modifier is unsafe.</span></div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>      db.remove( *ptr );</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>      db.create&lt;generated_transaction_object&gt;( [&amp;]( <span class="keyword">auto</span>&amp; gtx ) {</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>         gtx.trx_id      = trx_id_for_new_obj;</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>         gtx.sender      = receiver;</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>         gtx.sender_id   = sender_id;</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>         gtx.payer       = payer;</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>         gtx.published   = control.pending_block_time();</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>         gtx.delay_until = gtx.published + <a class="code hl_function" href="integration_8cpp.html#a6e9635897de7740b7389a391f613626b">delay</a>;</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>         gtx.expiration  = gtx.delay_until + <a class="code hl_function" href="namespacefc.html#a9623b8cae3f48bbed6aa1fc2afe9b174">fc::seconds</a>(control.get_global_properties().configuration.deferred_trx_expiration_window);</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span> </div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>         trx_size = gtx.set( trx );</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span> </div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>         <span class="keywordflow">if</span> (<span class="keyword">auto</span> dm_logger = control.get_deep_mind_logger()) {</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>            dm_logger-&gt;on_send_deferred(<a class="code hl_enumvalue" href="classsysio_1_1chain_1_1deep__mind__handler.html#a78bf0c79493a90c71cb28aa761f44fd2a8f45a2644508b5282f57fe129f62d19a">deep_mind_handler::operation_qualifier::modify</a>, gtx);</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>            dm_logger-&gt;on_ram_trace(<a class="code hl_define" href="deep__mind_8hpp.html#aaaa2f1dbd522de03ccbaa73f01db5f50">RAM_EVENT_ID</a>(<span class="stringliteral">&quot;${id}&quot;</span>, (<span class="stringliteral">&quot;id&quot;</span>, gtx.id)), <span class="stringliteral">&quot;deferred_trx&quot;</span>, <span class="stringliteral">&quot;update&quot;</span>, <span class="stringliteral">&quot;deferred_trx_add&quot;</span>);</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>         }</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>      } );</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>   } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>      db.create&lt;generated_transaction_object&gt;( [&amp;]( <span class="keyword">auto</span>&amp; gtx ) {</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>         gtx.trx_id      = trx.id();</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>         gtx.sender      = receiver;</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>         gtx.sender_id   = sender_id;</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>         gtx.payer       = payer;</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>         gtx.published   = control.pending_block_time();</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>         gtx.delay_until = gtx.published + <a class="code hl_function" href="integration_8cpp.html#a6e9635897de7740b7389a391f613626b">delay</a>;</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>         gtx.expiration  = gtx.delay_until + <a class="code hl_function" href="namespacefc.html#a9623b8cae3f48bbed6aa1fc2afe9b174">fc::seconds</a>(control.get_global_properties().configuration.deferred_trx_expiration_window);</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span> </div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>         trx_size = gtx.set( trx );</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span> </div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>         <span class="keywordflow">if</span> (<span class="keyword">auto</span> dm_logger = control.get_deep_mind_logger()) {</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>            dm_logger-&gt;on_send_deferred(<a class="code hl_enumvalue" href="classsysio_1_1chain_1_1deep__mind__handler.html#a78bf0c79493a90c71cb28aa761f44fd2a334c4a4c42fdb79d7ebc3e73b517e6f8">deep_mind_handler::operation_qualifier::none</a>, gtx);</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>            dm_logger-&gt;on_ram_trace(<a class="code hl_define" href="deep__mind_8hpp.html#aaaa2f1dbd522de03ccbaa73f01db5f50">RAM_EVENT_ID</a>(<span class="stringliteral">&quot;${id}&quot;</span>, (<span class="stringliteral">&quot;id&quot;</span>, gtx.id)), <span class="stringliteral">&quot;deferred_trx&quot;</span>, <span class="stringliteral">&quot;add&quot;</span>, <span class="stringliteral">&quot;deferred_trx_add&quot;</span>);</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>         }</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>      } );</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>   }</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span> </div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( ram_restrictions_activated</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>               || control.is_ram_billing_in_notify_allowed()</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>               || (receiver == act-&gt;account) || (receiver == payer) || privileged,</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>               subjective_block_production_exception,</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>               <span class="stringliteral">&quot;Cannot charge RAM to other accounts during notify.&quot;</span></div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>   );</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>   add_ram_usage( payer, (<a class="code hl_variable" href="namespacesysio_1_1chain_1_1config.html#a2772c77657b1f6fda680bbe8f7282d13">config::billable_size_v&lt;generated_transaction_object&gt;</a> + trx_size) );</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>}</div>
</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span> </div>
<div class="foldopen" id="foldopen00626" data-start="{" data-end="}">
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#a2310a1978f97847e770f7525391d0abc">  626</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a2310a1978f97847e770f7525391d0abc">apply_context::cancel_deferred_transaction</a>( <span class="keyword">const</span> <a class="code hl_typedef" href="namespacesysio_1_1chain.html#a896515137d9a7844105786ee3a6b1d47">uint128_t</a>&amp; sender_id, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">account_name</a> sender ) {</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>   <span class="keyword">auto</span>&amp; generated_transaction_idx = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#afaea057692a8bbbf3f506b64c60308b6">get_mutable_index</a>&lt;<a class="code hl_typedef" href="namespacesysio_1_1chain.html#a9e9842ee49526c2423e014a696edc602">generated_transaction_multi_index</a>&gt;();</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>   <span class="keyword">const</span> <span class="keyword">auto</span>* gto = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#aa5a2ca0da0092693ac49b36b7ec6817a">find</a>&lt;<a class="code hl_class" href="classsysio_1_1chain_1_1generated__transaction__object.html">generated_transaction_object</a>,by_sender_id&gt;(boost::make_tuple(sender, sender_id));</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>   <span class="keywordflow">if</span> ( gto ) {</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>      <span class="keywordflow">if</span> (<span class="keyword">auto</span> dm_logger = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a4f6404b355a3a4bf7fb60c92e85443d1">get_deep_mind_logger</a>()) {</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>         dm_logger-&gt;on_cancel_deferred(<a class="code hl_enumvalue" href="classsysio_1_1chain_1_1deep__mind__handler.html#a78bf0c79493a90c71cb28aa761f44fd2a334c4a4c42fdb79d7ebc3e73b517e6f8">deep_mind_handler::operation_qualifier::none</a>, *gto);</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>         dm_logger-&gt;on_ram_trace(<a class="code hl_define" href="deep__mind_8hpp.html#aaaa2f1dbd522de03ccbaa73f01db5f50">RAM_EVENT_ID</a>(<span class="stringliteral">&quot;${id}&quot;</span>, (<span class="stringliteral">&quot;id&quot;</span>, gto-&gt;id)), <span class="stringliteral">&quot;deferred_trx&quot;</span>, <span class="stringliteral">&quot;cancel&quot;</span>, <span class="stringliteral">&quot;deferred_trx_cancel&quot;</span>);</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>      }</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span> </div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>      <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a18d1df4bf3df1229cbfd0bcdce63c06c">add_ram_usage</a>( gto-&gt;payer, -(<a class="code hl_variable" href="namespacesysio_1_1chain_1_1config.html#a2772c77657b1f6fda680bbe8f7282d13">config::billable_size_v&lt;generated_transaction_object&gt;</a> + gto-&gt;packed_trx.size()) );</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>      generated_transaction_idx.remove(*gto);</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>   }</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>   <span class="keywordflow">return</span> gto;</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>}</div>
</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span> </div>
<div class="foldopen" id="foldopen00641" data-start="{" data-end="}">
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#a15f2962cf55ed75da1cae67309e844d5">  641</a></span><a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a15f2962cf55ed75da1cae67309e844d5">apply_context::schedule_action</a>( <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> ordinal_of_action_to_schedule, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">account_name</a> receiver, <span class="keywordtype">bool</span> context_free )</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>{</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>   <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> scheduled_action_ordinal = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.schedule_action( ordinal_of_action_to_schedule,</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>                                                                    receiver, context_free,</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>                                                                    action_ordinal, first_receiver_action_ordinal );</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span> </div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>   act = &amp;<a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.get_action_trace( action_ordinal ).<a class="code hl_variable" href="structsysio_1_1chain_1_1action__trace.html#a2aa19858e0762797685b9ec46e820656">act</a>;</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>   <span class="keywordflow">return</span> scheduled_action_ordinal;</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>}</div>
</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span> </div>
<div class="foldopen" id="foldopen00651" data-start="{" data-end="}">
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#a31ef2b2f7484563f029fe31f2ffcabd9">  651</a></span><a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a15f2962cf55ed75da1cae67309e844d5">apply_context::schedule_action</a>( <a class="code hl_struct" href="structsysio_1_1chain_1_1action.html">action</a>&amp;&amp; act_to_schedule, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">account_name</a> receiver, <span class="keywordtype">bool</span> context_free )</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>{</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>   <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> scheduled_action_ordinal = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.schedule_action( std::move(act_to_schedule),</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>                                                                    receiver, context_free,</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>                                                                    action_ordinal, first_receiver_action_ordinal );</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span> </div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>   act = &amp;<a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.get_action_trace( action_ordinal ).<a class="code hl_variable" href="structsysio_1_1chain_1_1action__trace.html#a2aa19858e0762797685b9ec46e820656">act</a>;</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>   <span class="keywordflow">return</span> scheduled_action_ordinal;</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>}</div>
</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span> </div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span><span class="keyword">const</span> <a class="code hl_class" href="classsysio_1_1chain_1_1table__id__object.html">table_id_object</a>* apply_context::find_table( <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> code, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> scope, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> table ) {</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>   <span class="keywordflow">return</span> <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#aa5a2ca0da0092693ac49b36b7ec6817a">find</a>&lt;<a class="code hl_class" href="classsysio_1_1chain_1_1table__id__object.html">table_id_object</a>, by_code_scope_table&gt;(boost::make_tuple(code, scope, table));</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>}</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span> </div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span><span class="keyword">const</span> <a class="code hl_class" href="classsysio_1_1chain_1_1table__id__object.html">table_id_object</a>&amp; apply_context::find_or_create_table( <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> code, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> scope, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> table, <span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">account_name</a> &amp;payer ) {</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>   <span class="keyword">const</span> <span class="keyword">auto</span>* existing_tid =  <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#aa5a2ca0da0092693ac49b36b7ec6817a">find</a>&lt;<a class="code hl_class" href="classsysio_1_1chain_1_1table__id__object.html">table_id_object</a>, by_code_scope_table&gt;(boost::make_tuple(code, scope, table));</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>   <span class="keywordflow">if</span> (existing_tid != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>      <span class="keywordflow">return</span> *existing_tid;</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>   }</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span> </div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>   <span class="keywordflow">if</span> (<span class="keyword">auto</span> dm_logger = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a4f6404b355a3a4bf7fb60c92e85443d1">get_deep_mind_logger</a>()) {</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>      std::string event_id = <a class="code hl_define" href="deep__mind_8hpp.html#aaaa2f1dbd522de03ccbaa73f01db5f50">RAM_EVENT_ID</a>(<span class="stringliteral">&quot;${code}:${scope}:${table}&quot;</span>,</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>         (<span class="stringliteral">&quot;code&quot;</span>, code)</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>         (<span class="stringliteral">&quot;scope&quot;</span>, scope)</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>         (<span class="stringliteral">&quot;table&quot;</span>, table)</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>      );</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>      dm_logger-&gt;on_ram_trace(std::move(event_id), <span class="stringliteral">&quot;table&quot;</span>, <span class="stringliteral">&quot;add&quot;</span>, <span class="stringliteral">&quot;create_table&quot;</span>);</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>   }</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span> </div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>   <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a49f2feb0d0ce2cb21c74f871432392e9">update_db_usage</a>(payer, <a class="code hl_variable" href="namespacesysio_1_1chain_1_1config.html#a2772c77657b1f6fda680bbe8f7282d13">config::billable_size_v&lt;table_id_object&gt;</a>);</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span> </div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>   <span class="keywordflow">return</span> <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#adc8f336b33d7013d1b0400399b16c5a7">create</a>&lt;table_id_object&gt;([&amp;](table_id_object &amp;t_id){</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>      t_id.code = code;</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>      t_id.scope = scope;</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>      t_id.table = table;</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>      t_id.payer = payer;</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span> </div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>      <span class="keywordflow">if</span> (<span class="keyword">auto</span> dm_logger = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a4f6404b355a3a4bf7fb60c92e85443d1">get_deep_mind_logger</a>()) {</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>         dm_logger-&gt;on_create_table(t_id);</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>      }</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>   });</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>}</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span> </div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span><span class="keywordtype">void</span> apply_context::remove_table( <span class="keyword">const</span> table_id_object&amp; tid ) {</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>   <span class="keywordflow">if</span> (<span class="keyword">auto</span> dm_logger = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a4f6404b355a3a4bf7fb60c92e85443d1">get_deep_mind_logger</a>()) {</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>      std::string event_id = <a class="code hl_define" href="deep__mind_8hpp.html#aaaa2f1dbd522de03ccbaa73f01db5f50">RAM_EVENT_ID</a>(<span class="stringliteral">&quot;${code}:${scope}:${table}&quot;</span>,</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>         (<span class="stringliteral">&quot;code&quot;</span>, tid.code)</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>         (<span class="stringliteral">&quot;scope&quot;</span>, tid.scope)</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>         (<span class="stringliteral">&quot;table&quot;</span>, tid.table)</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>      );</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>      dm_logger-&gt;on_ram_trace(std::move(event_id), <span class="stringliteral">&quot;table&quot;</span>, <span class="stringliteral">&quot;remove&quot;</span>, <span class="stringliteral">&quot;remove_table&quot;</span>);</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>   }</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span> </div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>   <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a49f2feb0d0ce2cb21c74f871432392e9">update_db_usage</a>(tid.payer, - <a class="code hl_variable" href="namespacesysio_1_1chain_1_1config.html#a2772c77657b1f6fda680bbe8f7282d13">config::billable_size_v&lt;table_id_object&gt;</a>);</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span> </div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>   <span class="keywordflow">if</span> (<span class="keyword">auto</span> dm_logger = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a4f6404b355a3a4bf7fb60c92e85443d1">get_deep_mind_logger</a>()) {</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>      dm_logger-&gt;on_remove_table(tid);</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>   }</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span> </div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#ac6bb29708e4fdfb6899028e3c351fe0b">remove</a>(tid);</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>}</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span> </div>
<div class="foldopen" id="foldopen00713" data-start="{" data-end="}">
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#a2252a9a9740608f9dea5071a929cfe8f">  713</a></span><a class="code hl_class" href="classfc_1_1vector.html">vector&lt;account_name&gt;</a> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a2252a9a9740608f9dea5071a929cfe8f">apply_context::get_active_producers</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; ap = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#ae0a1946cc6f7b87bd0cfa94bc9aa20b7">active_producers</a>();</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>   <a class="code hl_class" href="classfc_1_1vector.html">vector&lt;account_name&gt;</a> accounts; accounts.reserve( ap.producers.size() );</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span> </div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>   <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; producer : ap.producers )</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>      accounts.push_back(producer.producer_name);</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span> </div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>   <span class="keywordflow">return</span> accounts;</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>}</div>
</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span> </div>
<div class="foldopen" id="foldopen00723" data-start="{" data-end="}">
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#a49f2feb0d0ce2cb21c74f871432392e9">  723</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a49f2feb0d0ce2cb21c74f871432392e9">apply_context::update_db_usage</a>( <span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">account_name</a>&amp; payer, <a class="code hl_typedef" href="stdint_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> delta ) {</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>   <span class="keywordflow">if</span>( delta &gt; 0 ) {</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>      <span class="keywordflow">if</span>( !(privileged || payer == <a class="code hl_typedef" href="namespacesysio_1_1chain.html#ac32ce8e75243f2b3f76aff0c1984f11b">account_name</a>(receiver)</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>               || <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#aa808acf858e93c567ff983ccbf8fb6d3">is_builtin_activated</a>( <a class="code hl_enumvalue" href="namespacesysio_1_1chain.html#a406d45a184cdba0af316b5bf34bf56cfa5b1659352f17eb75b45e13054aaf1521">builtin_protocol_feature_t::ram_restrictions</a> ) ) )</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>      {</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>         <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a4afbf4e4448a73468eb6947b68a0c348">is_ram_billing_in_notify_allowed</a>() || (receiver == act-&gt;<a class="code hl_variable" href="structsysio_1_1chain_1_1action__base.html#a3598da3f8df67037e69dab758ce168be">account</a>),</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>                     subjective_block_production_exception, <span class="stringliteral">&quot;Cannot charge RAM to other accounts during notify.&quot;</span> );</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>         <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a7dbd347239af8b3540db7830b6e2f11e">require_authorization</a>( payer );</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>      }</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>   }</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>   <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a18d1df4bf3df1229cbfd0bcdce63c06c">add_ram_usage</a>(payer, delta);</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>}</div>
</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span> </div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span> </div>
<div class="foldopen" id="foldopen00737" data-start="{" data-end="}">
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#ad5802c20d949ac1ef66c269abd9f4c09">  737</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a2d651027c7e796f25382b24e58def3ef">apply_context::get_action</a>( <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> type, <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> index, <span class="keywordtype">char</span>* buffer, <span class="keywordtype">size_t</span> buffer_size )<span class="keyword">const</span></div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; trx = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.<a class="code hl_variable" href="classsysio_1_1chain_1_1transaction__context.html#a08e9cf6a4b8ce2f6211ce9d8de1b4da3">packed_trx</a>.<a class="code hl_function" href="structsysio_1_1chain_1_1packed__transaction.html#ad193d26eb97cfd5b3f7d8b957eaa35a2">get_transaction</a>();</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>   <span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1action.html">action</a>* act_ptr = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span> </div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>   <span class="keywordflow">if</span>( type == 0 ) {</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>      <span class="keywordflow">if</span>( index &gt;= trx.context_free_actions.size() )</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>         <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>      act_ptr = &amp;trx.context_free_actions[index];</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>   }</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( type == 1 ) {</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>      <span class="keywordflow">if</span>( index &gt;= trx.actions.size() )</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>         <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>      act_ptr = &amp;trx.actions[index];</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>   }</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span> </div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(act_ptr, action_not_found_exception, <span class="stringliteral">&quot;action is not found&quot;</span> );</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span> </div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>   <span class="keyword">auto</span> ps = <a class="code hl_function" href="namespacefc_1_1raw.html#a64937a5adc8041247f7007882224e225">fc::raw::pack_size</a>( *act_ptr );</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>   <span class="keywordflow">if</span>( ps &lt;= buffer_size ) {</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>      <a class="code hl_class" href="classfc_1_1datastream.html">fc::datastream&lt;char*&gt;</a> ds(buffer, buffer_size);</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>      <a class="code hl_function" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a>( ds, *act_ptr );</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>   }</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>   <span class="keywordflow">return</span> ps;</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>}</div>
</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span> </div>
<div class="foldopen" id="foldopen00763" data-start="{" data-end="}">
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#a4e7c7a187705892ae97250316ca9b38f">  763</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a4e7c7a187705892ae97250316ca9b38f">apply_context::get_context_free_data</a>( <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> index, <span class="keywordtype">char</span>* buffer, <span class="keywordtype">size_t</span> buffer_size )<span class="keyword">const</span></div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; trx = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.<a class="code hl_variable" href="classsysio_1_1chain_1_1transaction__context.html#a08e9cf6a4b8ce2f6211ce9d8de1b4da3">packed_trx</a>.<a class="code hl_function" href="structsysio_1_1chain_1_1packed__transaction.html#ac07b8dd1294ac4848244cb154256512b">get_signed_transaction</a>();</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span> </div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>   <span class="keywordflow">if</span>( index &gt;= trx.context_free_data.size() ) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span> </div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>   <span class="keyword">auto</span> <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a506da415c9307c897ca9be93acfe1d0f">s</a> = trx.<a class="code hl_variable" href="structsysio_1_1chain_1_1signed__transaction.html#a24386634e143dd2cc069c2e662d16cd4">context_free_data</a>[index].size();</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>   <span class="keywordflow">if</span>( buffer_size == 0 ) <span class="keywordflow">return</span> <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a506da415c9307c897ca9be93acfe1d0f">s</a>;</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span> </div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>   <span class="keyword">auto</span> copy_size = std::min( buffer_size, <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a506da415c9307c897ca9be93acfe1d0f">s</a> );</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>   <a class="code hl_function" href="yubihsm__pkcs11_8c.html#ae785d5badbf1f08b491af31f32a135a1">memcpy</a>( buffer, trx.context_free_data[index].data(), copy_size );</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span> </div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>   <span class="keywordflow">return</span> copy_size;</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>}</div>
</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span> </div>
<div class="foldopen" id="foldopen00778" data-start="{" data-end="}">
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#a525b0d91b1afb457e7371ff689fcefda">  778</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a525b0d91b1afb457e7371ff689fcefda">apply_context::db_store_i64</a>( <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> scope, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> table, <span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">account_name</a>&amp; payer, <a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> <span class="keywordtype">id</span>, <span class="keyword">const</span> <span class="keywordtype">char</span>* buffer, <span class="keywordtype">size_t</span> buffer_size ) {</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>   <span class="keywordflow">return</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a525b0d91b1afb457e7371ff689fcefda">db_store_i64</a>( receiver, scope, table, payer, <span class="keywordtype">id</span>, buffer, buffer_size);</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>}</div>
</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span> </div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span><span class="keywordtype">int</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a525b0d91b1afb457e7371ff689fcefda">apply_context::db_store_i64</a>( <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> code, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> scope, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> table, <span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">account_name</a>&amp; payer, <a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> <span class="keywordtype">id</span>, <span class="keyword">const</span> <span class="keywordtype">char</span>* buffer, <span class="keywordtype">size_t</span> buffer_size ) {</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span><span class="comment">//   require_write_lock( scope );</span></div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; tab = find_or_create_table( code, scope, table, payer );</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>   <span class="keyword">auto</span> tableid = tab.id;</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span> </div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( payer != <a class="code hl_typedef" href="namespacesysio_1_1chain.html#ac32ce8e75243f2b3f76aff0c1984f11b">account_name</a>(), invalid_table_payer, <span class="stringliteral">&quot;must specify a valid account to pay for new record&quot;</span> );</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span> </div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; obj = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#adc8f336b33d7013d1b0400399b16c5a7">create</a>&lt;<a class="code hl_struct" href="structsysio_1_1chain_1_1key__value__object.html">key_value_object</a>&gt;( [&amp;]( <span class="keyword">auto</span>&amp; o ) {</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>      o.t_id        = tableid;</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>      o.primary_key = <a class="code hl_variable" href="code__cache_8cpp.html#aa0efefe21f4700d78692edc823e763be">id</a>;</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>      o.value.assign( buffer, buffer_size );</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>      o.payer       = payer;</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>   });</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span> </div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#a9ebc006075e8fc2e84357a0e068b58d4">modify</a>( tab, [&amp;]( <span class="keyword">auto</span>&amp; t ) {</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>     ++t.count;</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>   });</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span> </div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>   <a class="code hl_typedef" href="stdint_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> billable_size = (<a class="code hl_typedef" href="stdint_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a>)(buffer_size + <a class="code hl_variable" href="namespacesysio_1_1chain_1_1config.html#a2772c77657b1f6fda680bbe8f7282d13">config::billable_size_v&lt;key_value_object&gt;</a>);</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span> </div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>   <span class="keywordflow">if</span> (<span class="keyword">auto</span> dm_logger = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a4f6404b355a3a4bf7fb60c92e85443d1">get_deep_mind_logger</a>()) {</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>      std::string event_id = <a class="code hl_define" href="deep__mind_8hpp.html#aaaa2f1dbd522de03ccbaa73f01db5f50">RAM_EVENT_ID</a>(<span class="stringliteral">&quot;${table_code}:${scope}:${table_name}:${primkey}&quot;</span>,</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>         (<span class="stringliteral">&quot;table_code&quot;</span>, tab.code)</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>         (<span class="stringliteral">&quot;scope&quot;</span>, tab.scope)</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>         (<span class="stringliteral">&quot;table_name&quot;</span>, tab.table)</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>         (<span class="stringliteral">&quot;primkey&quot;</span>, <a class="code hl_variable" href="catch__reporter__console_8cpp.html#a9b45b3e13bd9167aab02e17e08916231">name</a>(obj.primary_key))</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>      );</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>      dm_logger-&gt;on_ram_trace(std::move(event_id), <span class="stringliteral">&quot;table_row&quot;</span>, <span class="stringliteral">&quot;add&quot;</span>, <span class="stringliteral">&quot;primary_index_add&quot;</span>);</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>   }</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span> </div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>   <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a49f2feb0d0ce2cb21c74f871432392e9">update_db_usage</a>( payer, billable_size);</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span> </div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>   <span class="keywordflow">if</span> (<span class="keyword">auto</span> dm_logger = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a4f6404b355a3a4bf7fb60c92e85443d1">get_deep_mind_logger</a>()) {</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>      dm_logger-&gt;on_db_store_i64(tab, obj);</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>   }</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span> </div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>   keyval_cache.cache_table( tab );</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>   <span class="keywordflow">return</span> keyval_cache.add( obj );</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>}</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span> </div>
<div class="foldopen" id="foldopen00822" data-start="{" data-end="}">
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#ab42c195679823907132298609509f36c">  822</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#ab42c195679823907132298609509f36c">apply_context::db_update_i64</a>( <span class="keywordtype">int</span> iterator, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">account_name</a> payer, <span class="keyword">const</span> <span class="keywordtype">char</span>* buffer, <span class="keywordtype">size_t</span> buffer_size ) {</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>   <span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1key__value__object.html">key_value_object</a>&amp; obj = keyval_cache.get( iterator );</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span> </div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; table_obj = keyval_cache.get_table( obj.<a class="code hl_variable" href="structsysio_1_1chain_1_1key__value__object.html#a123504a5727142826d963d96bc322300">t_id</a> );</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( table_obj.code == receiver, table_access_violation, <span class="stringliteral">&quot;db access violation&quot;</span> );</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span> </div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span><span class="comment">//   require_write_lock( table_obj.scope );</span></div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span> </div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>   <span class="keyword">const</span> <a class="code hl_typedef" href="stdint_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> overhead = <a class="code hl_variable" href="namespacesysio_1_1chain_1_1config.html#a2772c77657b1f6fda680bbe8f7282d13">config::billable_size_v&lt;key_value_object&gt;</a>;</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>   <a class="code hl_typedef" href="stdint_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> old_size = (<a class="code hl_typedef" href="stdint_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a>)(obj.<a class="code hl_variable" href="structsysio_1_1chain_1_1key__value__object.html#ab78a91101969265c3e5345d6db5941e3">value</a>.<a class="code hl_function" href="classchainbase_1_1shared__cow__string.html#a3b3c57c0d2ee027bb70beb283be2a0f2">size</a>() + overhead);</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>   <a class="code hl_typedef" href="stdint_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> new_size = (<a class="code hl_typedef" href="stdint_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a>)(buffer_size + overhead);</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span> </div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>   <span class="keywordflow">if</span>( payer == <a class="code hl_typedef" href="namespacesysio_1_1chain.html#ac32ce8e75243f2b3f76aff0c1984f11b">account_name</a>() ) payer = obj.<a class="code hl_variable" href="structsysio_1_1chain_1_1key__value__object.html#a2baa983a9564c7cfde54872252502d4a">payer</a>;</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span> </div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>   std::string event_id;</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>   <span class="keywordflow">if</span> (<a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a4f6404b355a3a4bf7fb60c92e85443d1">get_deep_mind_logger</a>() != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>      event_id = <a class="code hl_define" href="deep__mind_8hpp.html#aaaa2f1dbd522de03ccbaa73f01db5f50">RAM_EVENT_ID</a>(<span class="stringliteral">&quot;${table_code}:${scope}:${table_name}:${primkey}&quot;</span>,</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>         (<span class="stringliteral">&quot;table_code&quot;</span>, table_obj.code)</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>         (<span class="stringliteral">&quot;scope&quot;</span>, table_obj.scope)</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>         (<span class="stringliteral">&quot;table_name&quot;</span>, table_obj.table)</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>         (<span class="stringliteral">&quot;primkey&quot;</span>, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>(obj.<a class="code hl_variable" href="structsysio_1_1chain_1_1key__value__object.html#ab7f76ae298fa584f39b99d491573fb08">primary_key</a>))</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>      );</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>   }</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span> </div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>   <span class="keywordflow">if</span>( <a class="code hl_typedef" href="namespacesysio_1_1chain.html#ac32ce8e75243f2b3f76aff0c1984f11b">account_name</a>(obj.<a class="code hl_variable" href="structsysio_1_1chain_1_1key__value__object.html#a2baa983a9564c7cfde54872252502d4a">payer</a>) != payer ) {</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>      <span class="comment">// refund the existing payer</span></div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>      <span class="keywordflow">if</span> (<span class="keyword">auto</span> dm_logger = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a4f6404b355a3a4bf7fb60c92e85443d1">get_deep_mind_logger</a>())</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>      {</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>         dm_logger-&gt;on_ram_trace(std::string(event_id), <span class="stringliteral">&quot;table_row&quot;</span>, <span class="stringliteral">&quot;remove&quot;</span>, <span class="stringliteral">&quot;primary_index_update_remove_old_payer&quot;</span>);</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>      }</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>      <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a49f2feb0d0ce2cb21c74f871432392e9">update_db_usage</a>( obj.<a class="code hl_variable" href="structsysio_1_1chain_1_1key__value__object.html#a2baa983a9564c7cfde54872252502d4a">payer</a>,  -(old_size) );</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>      <span class="comment">// charge the new payer</span></div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>      <span class="keywordflow">if</span> (<span class="keyword">auto</span> dm_logger = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a4f6404b355a3a4bf7fb60c92e85443d1">get_deep_mind_logger</a>())</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>      {</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>         dm_logger-&gt;on_ram_trace(std::move(event_id), <span class="stringliteral">&quot;table_row&quot;</span>, <span class="stringliteral">&quot;add&quot;</span>, <span class="stringliteral">&quot;primary_index_update_add_new_payer&quot;</span>);</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>      }</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>      <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a49f2feb0d0ce2cb21c74f871432392e9">update_db_usage</a>( payer,  (new_size));</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>   } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(old_size != new_size) {</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>      <span class="comment">// charge/refund the existing payer the difference</span></div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>      <span class="keywordflow">if</span> (<span class="keyword">auto</span> dm_logger = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a4f6404b355a3a4bf7fb60c92e85443d1">get_deep_mind_logger</a>())</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>      {</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>         dm_logger-&gt;on_ram_trace(std::move(event_id) , <span class="stringliteral">&quot;table_row&quot;</span>, <span class="stringliteral">&quot;update&quot;</span>, <span class="stringliteral">&quot;primary_index_update&quot;</span>);</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>      }</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>      <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a49f2feb0d0ce2cb21c74f871432392e9">update_db_usage</a>( obj.<a class="code hl_variable" href="structsysio_1_1chain_1_1key__value__object.html#a2baa983a9564c7cfde54872252502d4a">payer</a>, new_size - old_size);</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>   }</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span> </div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>   <span class="keywordflow">if</span> (<span class="keyword">auto</span> dm_logger = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a4f6404b355a3a4bf7fb60c92e85443d1">get_deep_mind_logger</a>()) {</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>      dm_logger-&gt;on_db_update_i64(table_obj, obj, payer, buffer, buffer_size);</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>   }</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span> </div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#a9ebc006075e8fc2e84357a0e068b58d4">modify</a>( obj, [&amp;]( <span class="keyword">auto</span>&amp; o ) {</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>     o.value.assign( buffer, buffer_size );</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>     o.payer = payer;</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>   });</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>}</div>
</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span> </div>
<div class="foldopen" id="foldopen00878" data-start="{" data-end="}">
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#abd131f26bc83416fb97a05392ae68429">  878</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#abd131f26bc83416fb97a05392ae68429">apply_context::db_remove_i64</a>( <span class="keywordtype">int</span> iterator ) {</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>   <span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1key__value__object.html">key_value_object</a>&amp; obj = keyval_cache.get( iterator );</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span> </div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; table_obj = keyval_cache.get_table( obj.<a class="code hl_variable" href="structsysio_1_1chain_1_1key__value__object.html#a123504a5727142826d963d96bc322300">t_id</a> );</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( table_obj.code == receiver, table_access_violation, <span class="stringliteral">&quot;db access violation&quot;</span> );</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span> </div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span><span class="comment">//   require_write_lock( table_obj.scope );</span></div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span> </div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>   <span class="keywordflow">if</span> (<span class="keyword">auto</span> dm_logger = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a4f6404b355a3a4bf7fb60c92e85443d1">get_deep_mind_logger</a>()) {</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>      std::string event_id = <a class="code hl_define" href="deep__mind_8hpp.html#aaaa2f1dbd522de03ccbaa73f01db5f50">RAM_EVENT_ID</a>(<span class="stringliteral">&quot;${table_code}:${scope}:${table_name}:${primkey}&quot;</span>,</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>         (<span class="stringliteral">&quot;table_code&quot;</span>, table_obj.code)</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>         (<span class="stringliteral">&quot;scope&quot;</span>, table_obj.scope)</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>         (<span class="stringliteral">&quot;table_name&quot;</span>, table_obj.table)</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>         (<span class="stringliteral">&quot;primkey&quot;</span>, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>(obj.<a class="code hl_variable" href="structsysio_1_1chain_1_1key__value__object.html#ab7f76ae298fa584f39b99d491573fb08">primary_key</a>))</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>      );</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>      dm_logger-&gt;on_ram_trace(std::move(event_id), <span class="stringliteral">&quot;table_row&quot;</span>, <span class="stringliteral">&quot;remove&quot;</span>, <span class="stringliteral">&quot;primary_index_remove&quot;</span>);</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>   }</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span> </div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>   <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a49f2feb0d0ce2cb21c74f871432392e9">update_db_usage</a>( obj.<a class="code hl_variable" href="structsysio_1_1chain_1_1key__value__object.html#a2baa983a9564c7cfde54872252502d4a">payer</a>,  -(obj.<a class="code hl_variable" href="structsysio_1_1chain_1_1key__value__object.html#ab78a91101969265c3e5345d6db5941e3">value</a>.<a class="code hl_function" href="classchainbase_1_1shared__cow__string.html#a3b3c57c0d2ee027bb70beb283be2a0f2">size</a>() + <a class="code hl_variable" href="namespacesysio_1_1chain_1_1config.html#a2772c77657b1f6fda680bbe8f7282d13">config::billable_size_v&lt;key_value_object&gt;</a>) );</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span> </div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>   <span class="keywordflow">if</span> (<span class="keyword">auto</span> dm_logger = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a4f6404b355a3a4bf7fb60c92e85443d1">get_deep_mind_logger</a>()) {</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>      dm_logger-&gt;on_db_remove_i64(table_obj, obj);</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>   }</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span> </div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#a9ebc006075e8fc2e84357a0e068b58d4">modify</a>( table_obj, [&amp;]( <span class="keyword">auto</span>&amp; t ) {</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>      --t.count;</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>   });</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#ac6bb29708e4fdfb6899028e3c351fe0b">remove</a>( obj );</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span> </div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>   <span class="keywordflow">if</span> (table_obj.count == 0) {</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>      remove_table(table_obj);</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>   }</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span> </div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>   keyval_cache.remove( iterator );</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>}</div>
</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span> </div>
<div class="foldopen" id="foldopen00914" data-start="{" data-end="}">
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#a5fb0e439b9a43df576ddea6c944759c1">  914</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a5fb0e439b9a43df576ddea6c944759c1">apply_context::db_get_i64</a>( <span class="keywordtype">int</span> iterator, <span class="keywordtype">char</span>* buffer, <span class="keywordtype">size_t</span> buffer_size ) {</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>   <span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1key__value__object.html">key_value_object</a>&amp; obj = keyval_cache.get( iterator );</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span> </div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>   <span class="keyword">auto</span> <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a506da415c9307c897ca9be93acfe1d0f">s</a> = obj.<a class="code hl_variable" href="structsysio_1_1chain_1_1key__value__object.html#ab78a91101969265c3e5345d6db5941e3">value</a>.<a class="code hl_function" href="classchainbase_1_1shared__cow__string.html#a3b3c57c0d2ee027bb70beb283be2a0f2">size</a>();</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>   <span class="keywordflow">if</span>( buffer_size == 0 ) <span class="keywordflow">return</span> <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a506da415c9307c897ca9be93acfe1d0f">s</a>;</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span> </div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>   <span class="keyword">auto</span> copy_size = std::min( buffer_size, <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a506da415c9307c897ca9be93acfe1d0f">s</a> );</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>   <a class="code hl_function" href="yubihsm__pkcs11_8c.html#ae785d5badbf1f08b491af31f32a135a1">memcpy</a>( buffer, obj.<a class="code hl_variable" href="structsysio_1_1chain_1_1key__value__object.html#ab78a91101969265c3e5345d6db5941e3">value</a>.<a class="code hl_function" href="classchainbase_1_1shared__cow__string.html#aa7b1bac206e0abc7e9ea9d642eb0b5b3">data</a>(), copy_size );</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span> </div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>   <span class="keywordflow">return</span> copy_size;</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>}</div>
</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span> </div>
<div class="foldopen" id="foldopen00926" data-start="{" data-end="}">
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#a78451562bdb87ec31112731f61acde2e">  926</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a78451562bdb87ec31112731f61acde2e">apply_context::db_next_i64</a>( <span class="keywordtype">int</span> iterator, <a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>&amp; primary ) {</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>   <span class="keywordflow">if</span>( iterator &lt; -1 ) <span class="keywordflow">return</span> -1; <span class="comment">// cannot increment past end iterator of table</span></div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span> </div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; obj = keyval_cache.get( iterator ); <span class="comment">// Check for iterator != -1 happens in this call</span></div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; idx = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#a4d5297635dcf70be481d9b600da9bc13">get_index</a>&lt;<a class="code hl_typedef" href="namespacesysio_1_1chain.html#aac1a2c1330fcb6c8002d59d4d1de5858">key_value_index</a>, by_scope_primary&gt;();</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span> </div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>   <span class="keyword">auto</span> itr = idx.iterator_to( obj );</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>   ++itr;</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span> </div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>   <span class="keywordflow">if</span>( itr == idx.end() || itr-&gt;t_id != obj.t_id ) <span class="keywordflow">return</span> keyval_cache.get_end_iterator_by_table_id(obj.t_id);</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span> </div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>   primary = itr-&gt;primary_key;</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>   <span class="keywordflow">return</span> keyval_cache.add( *itr );</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>}</div>
</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span> </div>
<div class="foldopen" id="foldopen00941" data-start="{" data-end="}">
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#ab6bf0461d3d359d5da63bf8d0338ccab">  941</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#ab6bf0461d3d359d5da63bf8d0338ccab">apply_context::db_previous_i64</a>( <span class="keywordtype">int</span> iterator, <a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>&amp; primary ) {</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; idx = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#a4d5297635dcf70be481d9b600da9bc13">get_index</a>&lt;<a class="code hl_typedef" href="namespacesysio_1_1chain.html#aac1a2c1330fcb6c8002d59d4d1de5858">key_value_index</a>, by_scope_primary&gt;();</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span> </div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>   <span class="keywordflow">if</span>( iterator &lt; -1 ) <span class="comment">// is end iterator</span></div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>   {</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>      <span class="keyword">auto</span> tab = keyval_cache.find_table_by_end_iterator(iterator);</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>( tab, invalid_table_iterator, <span class="stringliteral">&quot;not a valid end iterator&quot;</span> );</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span> </div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>      <span class="keyword">auto</span> itr = idx.upper_bound(tab-&gt;id);</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>      <span class="keywordflow">if</span>( idx.begin() == idx.end() || itr == idx.begin() ) <span class="keywordflow">return</span> -1; <span class="comment">// Empty table</span></div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span> </div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>      --itr;</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span> </div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>      <span class="keywordflow">if</span>( itr-&gt;t_id != tab-&gt;id ) <span class="keywordflow">return</span> -1; <span class="comment">// Empty table</span></div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span> </div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>      primary = itr-&gt;primary_key;</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>      <span class="keywordflow">return</span> keyval_cache.add(*itr);</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>   }</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span> </div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; obj = keyval_cache.get(iterator); <span class="comment">// Check for iterator != -1 happens in this call</span></div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span> </div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>   <span class="keyword">auto</span> itr = idx.iterator_to(obj);</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>   <span class="keywordflow">if</span>( itr == idx.begin() ) <span class="keywordflow">return</span> -1; <span class="comment">// cannot decrement past beginning iterator of table</span></div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span> </div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>   --itr;</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span> </div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>   <span class="keywordflow">if</span>( itr-&gt;t_id != obj.t_id ) <span class="keywordflow">return</span> -1; <span class="comment">// cannot decrement past beginning iterator of table</span></div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span> </div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>   primary = itr-&gt;primary_key;</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>   <span class="keywordflow">return</span> keyval_cache.add(*itr);</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>}</div>
</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span> </div>
<div class="foldopen" id="foldopen00973" data-start="{" data-end="}">
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#a4a6ba829713d78125e8f5b5cc7296137">  973</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a4a6ba829713d78125e8f5b5cc7296137">apply_context::db_find_i64</a>( <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> code, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> scope, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> table, <a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> <span class="keywordtype">id</span> ) {</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>   <span class="comment">//require_read_lock( code, scope ); // redundant?</span></div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span> </div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>   <span class="keyword">const</span> <span class="keyword">auto</span>* tab = find_table( code, scope, table );</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>   <span class="keywordflow">if</span>( !tab ) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span> </div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>   <span class="keyword">auto</span> table_end_itr = keyval_cache.cache_table( *tab );</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span> </div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>   <span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1key__value__object.html">key_value_object</a>* obj = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#aa5a2ca0da0092693ac49b36b7ec6817a">find</a>&lt;<a class="code hl_struct" href="structsysio_1_1chain_1_1key__value__object.html">key_value_object</a>, by_scope_primary&gt;( boost::make_tuple( tab-&gt;id, <span class="keywordtype">id</span> ) );</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>   <span class="keywordflow">if</span>( !obj ) <span class="keywordflow">return</span> table_end_itr;</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span> </div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>   <span class="keywordflow">return</span> keyval_cache.add( *obj );</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>}</div>
</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span> </div>
<div class="foldopen" id="foldopen00987" data-start="{" data-end="}">
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#a253f4304ce47515f5a74bd4fa3f95368">  987</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a253f4304ce47515f5a74bd4fa3f95368">apply_context::db_lowerbound_i64</a>( <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> code, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> scope, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> table, <a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> <span class="keywordtype">id</span> ) {</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>   <span class="comment">//require_read_lock( code, scope ); // redundant?</span></div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span> </div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>   <span class="keyword">const</span> <span class="keyword">auto</span>* tab = find_table( code, scope, table );</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>   <span class="keywordflow">if</span>( !tab ) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span> </div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>   <span class="keyword">auto</span> table_end_itr = keyval_cache.cache_table( *tab );</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span> </div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; idx = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#a4d5297635dcf70be481d9b600da9bc13">get_index</a>&lt;<a class="code hl_typedef" href="namespacesysio_1_1chain.html#aac1a2c1330fcb6c8002d59d4d1de5858">key_value_index</a>, by_scope_primary&gt;();</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>   <span class="keyword">auto</span> itr = idx.lower_bound( boost::make_tuple( tab-&gt;id, <span class="keywordtype">id</span> ) );</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>   <span class="keywordflow">if</span>( itr == idx.end() ) <span class="keywordflow">return</span> table_end_itr;</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>   <span class="keywordflow">if</span>( itr-&gt;t_id != tab-&gt;id ) <span class="keywordflow">return</span> table_end_itr;</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span> </div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>   <span class="keywordflow">return</span> keyval_cache.add( *itr );</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>}</div>
</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span> </div>
<div class="foldopen" id="foldopen01003" data-start="{" data-end="}">
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#a6b0aadc926e14c0a8a5f6cc3441ad00c"> 1003</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a6b0aadc926e14c0a8a5f6cc3441ad00c">apply_context::db_upperbound_i64</a>( <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> code, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> scope, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> table, <a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> <span class="keywordtype">id</span> ) {</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>   <span class="comment">//require_read_lock( code, scope ); // redundant?</span></div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span> </div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>   <span class="keyword">const</span> <span class="keyword">auto</span>* tab = find_table( code, scope, table );</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>   <span class="keywordflow">if</span>( !tab ) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span> </div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>   <span class="keyword">auto</span> table_end_itr = keyval_cache.cache_table( *tab );</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span> </div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; idx = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#a4d5297635dcf70be481d9b600da9bc13">get_index</a>&lt;<a class="code hl_typedef" href="namespacesysio_1_1chain.html#aac1a2c1330fcb6c8002d59d4d1de5858">key_value_index</a>, by_scope_primary&gt;();</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>   <span class="keyword">auto</span> itr = idx.upper_bound( boost::make_tuple( tab-&gt;id, <span class="keywordtype">id</span> ) );</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>   <span class="keywordflow">if</span>( itr == idx.end() ) <span class="keywordflow">return</span> table_end_itr;</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>   <span class="keywordflow">if</span>( itr-&gt;t_id != tab-&gt;id ) <span class="keywordflow">return</span> table_end_itr;</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span> </div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>   <span class="keywordflow">return</span> keyval_cache.add( *itr );</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>}</div>
</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span> </div>
<div class="foldopen" id="foldopen01019" data-start="{" data-end="}">
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#ad9d6d21fd254111b1845499ad82982d2"> 1019</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#ad9d6d21fd254111b1845499ad82982d2">apply_context::db_end_i64</a>( <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> code, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> scope, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> table ) {</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>   <span class="comment">//require_read_lock( code, scope ); // redundant?</span></div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span> </div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>   <span class="keyword">const</span> <span class="keyword">auto</span>* tab = find_table( code, scope, table );</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>   <span class="keywordflow">if</span>( !tab ) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span> </div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>   <span class="keywordflow">return</span> keyval_cache.cache_table( *tab );</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>}</div>
</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span> </div>
<div class="foldopen" id="foldopen01028" data-start="{" data-end="}">
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#a2ef781fcd0596791a3edb004b4f5c8c5"> 1028</a></span><a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a2ef781fcd0596791a3edb004b4f5c8c5">apply_context::next_global_sequence</a>() {</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a> = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">control</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a148eb08aa44ff6a177015a66004d0e49">get_dynamic_global_properties</a>();</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#a9ebc006075e8fc2e84357a0e068b58d4">modify</a>( <a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a>, [&amp;]( <span class="keyword">auto</span>&amp; dgp ) {</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>      ++dgp.global_action_sequence;</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>   });</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>   <span class="keywordflow">return</span> <a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a>.global_action_sequence;</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>}</div>
</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span> </div>
<div class="foldopen" id="foldopen01036" data-start="{" data-end="}">
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#acb20a8d75fff438efadb4976a6fdce31"> 1036</a></span><a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#acb20a8d75fff438efadb4976a6fdce31">apply_context::next_recv_sequence</a>( <span class="keyword">const</span> <a class="code hl_class" href="classsysio_1_1chain_1_1account__metadata__object.html">account_metadata_object</a>&amp; receiver_account ) {</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#a9ebc006075e8fc2e84357a0e068b58d4">modify</a>( receiver_account, [&amp;]( <span class="keyword">auto</span>&amp; ra ) {</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>      ++ra.recv_sequence;</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>   });</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>   <span class="keywordflow">return</span> receiver_account.recv_sequence;</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>}</div>
</div>
<div class="foldopen" id="foldopen01042" data-start="{" data-end="}">
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#aa5a5520ad95838d777834dd408a2c71d"> 1042</a></span><a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#aa5a5520ad95838d777834dd408a2c71d">apply_context::next_auth_sequence</a>( <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">account_name</a> <a class="code hl_class" href="classfc_1_1actor.html">actor</a> ) {</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; amo = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#afcfe00f81a526c1376d4f51197dd3a9a">get</a>&lt;<a class="code hl_class" href="classsysio_1_1chain_1_1account__metadata__object.html">account_metadata_object</a>,by_name&gt;( <a class="code hl_class" href="classfc_1_1actor.html">actor</a> );</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#a9ebc006075e8fc2e84357a0e068b58d4">modify</a>( amo, [&amp;](<span class="keyword">auto</span>&amp; am ){</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>      ++am.auth_sequence;</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>   });</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>   <span class="keywordflow">return</span> amo.auth_sequence;</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>}</div>
</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span> </div>
<div class="foldopen" id="foldopen01050" data-start="{" data-end="}">
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#a18d1df4bf3df1229cbfd0bcdce63c06c"> 1050</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#a18d1df4bf3df1229cbfd0bcdce63c06c">apply_context::add_ram_usage</a>( <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">account_name</a> account, <a class="code hl_typedef" href="stdint_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> ram_delta ) {</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.add_ram_usage( account, ram_delta );</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span> </div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>   <span class="keyword">auto</span> <a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a> = _account_ram_deltas.emplace( account, ram_delta );</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>   <span class="keywordflow">if</span>( !<a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a>.second ) {</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>      <a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a>.first-&gt;delta += ram_delta;</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>   }</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>}</div>
</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span> </div>
<div class="foldopen" id="foldopen01059" data-start="{" data-end="}">
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"><a class="line" href="classsysio_1_1chain_1_1apply__context.html#ab4925e2f0208b9a6bd084c1d25ee218d"> 1059</a></span><a class="code hl_typedef" href="namespacesysio_1_1chain.html#a7a1685bcc352cda9e45f055932069428">action_name</a> <a class="code hl_function" href="classsysio_1_1chain_1_1apply__context.html#ab4925e2f0208b9a6bd084c1d25ee218d">apply_context::get_sender</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>   <span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1action__trace.html">action_trace</a>&amp; trace = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.get_action_trace( action_ordinal );</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>   <span class="keywordflow">if</span> (trace.<a class="code hl_variable" href="structsysio_1_1chain_1_1action__trace.html#a57409cb534668343eea05422f1f35ba2">creator_action_ordinal</a> &gt; 0) {</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>      <span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1action__trace.html">action_trace</a>&amp; creator_trace = <a class="code hl_variable" href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">trx_context</a>.get_action_trace( trace.<a class="code hl_variable" href="structsysio_1_1chain_1_1action__trace.html#a57409cb534668343eea05422f1f35ba2">creator_action_ordinal</a> );</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>      <span class="keywordflow">return</span> creator_trace.<a class="code hl_variable" href="structsysio_1_1chain_1_1action__trace.html#ae9f2c9fa62609083457c1852c1c021b2">receiver</a>;</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>   }</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>   <span class="keywordflow">return</span> <a class="code hl_typedef" href="namespacesysio_1_1chain.html#a7a1685bcc352cda9e45f055932069428">action_name</a>();</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>}</div>
</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span> </div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>} } </div>
<div class="ttc" id="aaccount__object_8hpp_html"><div class="ttname"><a href="account__object_8hpp.html">account_object.hpp</a></div></div>
<div class="ttc" id="aapply__context_8hpp_html"><div class="ttname"><a href="apply__context_8hpp.html">apply_context.hpp</a></div></div>
<div class="ttc" id="aauthorization__manager_8hpp_html"><div class="ttname"><a href="authorization__manager_8hpp.html">authorization_manager.hpp</a></div></div>
<div class="ttc" id="abn_8cpp_html_a8b0eadcc506862e9d751ab45185053aa"><div class="ttname"><a href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a></div><div class="ttdeci">const mie::Vuint &amp; p</div><div class="ttdef"><b>Definition</b> <a href="bn_8cpp_source.html#l00027">bn.cpp:27</a></div></div>
<div class="ttc" id="abn_8cpp_html_af0a5201ca8846f05f25435b41d7f39f7"><div class="ttname"><a href="bn_8cpp.html#af0a5201ca8846f05f25435b41d7f39f7">r</a></div><div class="ttdeci">const mie::Vuint &amp; r</div><div class="ttdef"><b>Definition</b> <a href="bn_8cpp_source.html#l00028">bn.cpp:28</a></div></div>
<div class="ttc" id="acatch__reporter__console_8cpp_html_a9b45b3e13bd9167aab02e17e08916231"><div class="ttname"><a href="catch__reporter__console_8cpp.html#a9b45b3e13bd9167aab02e17e08916231">name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition</b> <a href="catch__reporter__console_8cpp_source.html#l00186">catch_reporter_console.cpp:186</a></div></div>
<div class="ttc" id="achain_2include_2sysio_2chain_2exceptions_8hpp_html"><div class="ttname"><a href="chain_2include_2sysio_2chain_2exceptions_8hpp.html">exceptions.hpp</a></div></div>
<div class="ttc" id="achain_2include_2sysio_2chain_2exceptions_8hpp_html_a1bfa656552ea0534b2c91ee0fe33f850"><div class="ttname"><a href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a1bfa656552ea0534b2c91ee0fe33f850">SYS_THROW</a></div><div class="ttdeci">#define SYS_THROW(exc_type, FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2exceptions_8hpp_source.html#l00013">exceptions.hpp:13</a></div></div>
<div class="ttc" id="achain_2include_2sysio_2chain_2exceptions_8hpp_html_a40c2826a6fba35c1ffbf912bdf559792"><div class="ttname"><a href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a></div><div class="ttdeci">#define SYS_ASSERT(expr, exc_type, FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2exceptions_8hpp_source.html#l00007">exceptions.hpp:7</a></div></div>
<div class="ttc" id="aclasschainbase_1_1database_html_a4d5297635dcf70be481d9b600da9bc13"><div class="ttname"><a href="classchainbase_1_1database.html#a4d5297635dcf70be481d9b600da9bc13">chainbase::database::get_index</a></div><div class="ttdeci">const generic_index&lt; MultiIndexType &gt; &amp; get_index() const</div><div class="ttdef"><b>Definition</b> <a href="chainbase_8hpp_source.html#l00425">chainbase.hpp:425</a></div></div>
<div class="ttc" id="aclasschainbase_1_1database_html_a9ebc006075e8fc2e84357a0e068b58d4"><div class="ttname"><a href="classchainbase_1_1database.html#a9ebc006075e8fc2e84357a0e068b58d4">chainbase::database::modify</a></div><div class="ttdeci">void modify(const ObjectType &amp;obj, Modifier &amp;&amp;m)</div><div class="ttdef"><b>Definition</b> <a href="chainbase_8hpp_source.html#l00503">chainbase.hpp:503</a></div></div>
<div class="ttc" id="aclasschainbase_1_1database_html_aa5a2ca0da0092693ac49b36b7ec6817a"><div class="ttname"><a href="classchainbase_1_1database.html#aa5a2ca0da0092693ac49b36b7ec6817a">chainbase::database::find</a></div><div class="ttdeci">const ObjectType * find(CompatibleKey &amp;&amp;key) const</div><div class="ttdef"><b>Definition</b> <a href="chainbase_8hpp_source.html#l00458">chainbase.hpp:458</a></div></div>
<div class="ttc" id="aclasschainbase_1_1database_html_ac6bb29708e4fdfb6899028e3c351fe0b"><div class="ttname"><a href="classchainbase_1_1database.html#ac6bb29708e4fdfb6899028e3c351fe0b">chainbase::database::remove</a></div><div class="ttdeci">void remove(const ObjectType &amp;obj)</div><div class="ttdef"><b>Definition</b> <a href="chainbase_8hpp_source.html#l00511">chainbase.hpp:511</a></div></div>
<div class="ttc" id="aclasschainbase_1_1database_html_adc8f336b33d7013d1b0400399b16c5a7"><div class="ttname"><a href="classchainbase_1_1database.html#adc8f336b33d7013d1b0400399b16c5a7">chainbase::database::create</a></div><div class="ttdeci">const ObjectType &amp; create(Constructor &amp;&amp;con)</div><div class="ttdef"><b>Definition</b> <a href="chainbase_8hpp_source.html#l00519">chainbase.hpp:519</a></div></div>
<div class="ttc" id="aclasschainbase_1_1database_html_afaea057692a8bbbf3f506b64c60308b6"><div class="ttname"><a href="classchainbase_1_1database.html#afaea057692a8bbbf3f506b64c60308b6">chainbase::database::get_mutable_index</a></div><div class="ttdeci">generic_index&lt; MultiIndexType &gt; &amp; get_mutable_index()</div><div class="ttdef"><b>Definition</b> <a href="chainbase_8hpp_source.html#l00447">chainbase.hpp:447</a></div></div>
<div class="ttc" id="aclasschainbase_1_1database_html_afcfe00f81a526c1376d4f51197dd3a9a"><div class="ttname"><a href="classchainbase_1_1database.html#afcfe00f81a526c1376d4f51197dd3a9a">chainbase::database::get</a></div><div class="ttdeci">const ObjectType &amp; get(CompatibleKey &amp;&amp;key) const</div><div class="ttdef"><b>Definition</b> <a href="chainbase_8hpp_source.html#l00477">chainbase.hpp:477</a></div></div>
<div class="ttc" id="aclasschainbase_1_1shared__cow__string_html_a3b3c57c0d2ee027bb70beb283be2a0f2"><div class="ttname"><a href="classchainbase_1_1shared__cow__string.html#a3b3c57c0d2ee027bb70beb283be2a0f2">chainbase::shared_cow_string::size</a></div><div class="ttdeci">std::size_t size() const</div><div class="ttdef"><b>Definition</b> <a href="shared__cow__string_8hpp_source.html#l00107">shared_cow_string.hpp:107</a></div></div>
<div class="ttc" id="aclasschainbase_1_1shared__cow__string_html_aa7b1bac206e0abc7e9ea9d642eb0b5b3"><div class="ttname"><a href="classchainbase_1_1shared__cow__string.html#aa7b1bac206e0abc7e9ea9d642eb0b5b3">chainbase::shared_cow_string::data</a></div><div class="ttdeci">const char * data() const</div><div class="ttdef"><b>Definition</b> <a href="shared__cow__string_8hpp_source.html#l00103">shared_cow_string.hpp:103</a></div></div>
<div class="ttc" id="aclassfc_1_1actor_html"><div class="ttname"><a href="classfc_1_1actor.html">fc::actor</a></div><div class="ttdef"><b>Definition</b> <a href="actor_8hpp_source.html#l00053">actor.hpp:53</a></div></div>
<div class="ttc" id="aclassfc_1_1datastream_html"><div class="ttname"><a href="classfc_1_1datastream.html">fc::datastream</a></div><div class="ttdef"><b>Definition</b> <a href="datastream_8hpp_source.html#l00018">datastream.hpp:18</a></div></div>
<div class="ttc" id="aclassfc_1_1exception_html"><div class="ttname"><a href="classfc_1_1exception.html">fc::exception</a></div><div class="ttdoc">Used to generate a useful error report when an exception is thrown.</div><div class="ttdef"><b>Definition</b> <a href="exception_8hpp_source.html#l00057">exception.hpp:58</a></div></div>
<div class="ttc" id="aclassfc_1_1exception_html_a70b72c1e4fe0d17485a8b7a0a6f397de"><div class="ttname"><a href="classfc_1_1exception.html#a70b72c1e4fe0d17485a8b7a0a6f397de">fc::exception::get_log</a></div><div class="ttdeci">const log_messages &amp; get_log() const</div><div class="ttdef"><b>Definition</b> <a href="exception_8cpp_source.html#l00147">exception.cpp:147</a></div></div>
<div class="ttc" id="aclassfc_1_1microseconds_html"><div class="ttname"><a href="classfc_1_1microseconds.html">fc::microseconds</a></div><div class="ttdef"><b>Definition</b> <a href="include_2fc_2time_8hpp_source.html#l00011">time.hpp:11</a></div></div>
<div class="ttc" id="aclassfc_1_1mutable__variant__object_html"><div class="ttname"><a href="classfc_1_1mutable__variant__object.html">fc::mutable_variant_object</a></div><div class="ttdoc">An order-preserving dictionary of variants.</div><div class="ttdef"><b>Definition</b> <a href="variant__object_8hpp_source.html#l00117">variant_object.hpp:118</a></div></div>
<div class="ttc" id="aclassfc_1_1sha256_html"><div class="ttname"><a href="classfc_1_1sha256.html">fc::sha256</a></div><div class="ttdef"><b>Definition</b> <a href="sha256_8hpp_source.html#l00011">sha256.hpp:12</a></div></div>
<div class="ttc" id="aclassfc_1_1sha256_html_a474784de7d6213b855abd7e952df5e36"><div class="ttname"><a href="classfc_1_1sha256.html#a474784de7d6213b855abd7e952df5e36">fc::sha256::hash</a></div><div class="ttdeci">static sha256 hash(const char *d, uint32_t dlen)</div><div class="ttdef"><b>Definition</b> <a href="sha256_8cpp_source.html#l00044">sha256.cpp:44</a></div></div>
<div class="ttc" id="aclassfc_1_1std__exception__wrapper_html_ae5ad64f84b1d373f5b92031566284c7c"><div class="ttname"><a href="classfc_1_1std__exception__wrapper.html#ae5ad64f84b1d373f5b92031566284c7c">fc::std_exception_wrapper::from_current_exception</a></div><div class="ttdeci">static std_exception_wrapper from_current_exception(const std::exception &amp;e)</div><div class="ttdef"><b>Definition</b> <a href="exception_8cpp_source.html#l00335">exception.cpp:335</a></div></div>
<div class="ttc" id="aclassfc_1_1time__point__sec_html"><div class="ttname"><a href="classfc_1_1time__point__sec.html">fc::time_point_sec</a></div><div class="ttdef"><b>Definition</b> <a href="include_2fc_2time_8hpp_source.html#l00072">time.hpp:73</a></div></div>
<div class="ttc" id="aclassfc_1_1time__point_html"><div class="ttname"><a href="classfc_1_1time__point.html">fc::time_point</a></div><div class="ttdef"><b>Definition</b> <a href="include_2fc_2time_8hpp_source.html#l00042">time.hpp:42</a></div></div>
<div class="ttc" id="aclassfc_1_1time__point_html_aa164ff1268a16d4b32afcff181f6100e"><div class="ttname"><a href="classfc_1_1time__point.html#aa164ff1268a16d4b32afcff181f6100e">fc::time_point::now</a></div><div class="ttdeci">static time_point now()</div><div class="ttdef"><b>Definition</b> <a href="time_8cpp_source.html#l00014">time.cpp:14</a></div></div>
<div class="ttc" id="aclassfc_1_1vector_html"><div class="ttname"><a href="classfc_1_1vector.html">fc::vector</a></div><div class="ttdef"><b>Definition</b> <a href="vector__fwd_8hpp_source.html#l00007">vector_fwd.hpp:7</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1account__metadata__object_html"><div class="ttname"><a href="classsysio_1_1chain_1_1account__metadata__object.html">sysio::chain::account_metadata_object</a></div><div class="ttdef"><b>Definition</b> <a href="account__object_8hpp_source.html#l00047">account_object.hpp:48</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1account__object_html"><div class="ttname"><a href="classsysio_1_1chain_1_1account__object.html">sysio::chain::account_object</a></div><div class="ttdef"><b>Definition</b> <a href="account__object_8hpp_source.html#l00012">account_object.hpp:12</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a00a749f7d122e141a87aab3767d3349c"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a00a749f7d122e141a87aab3767d3349c">sysio::chain::apply_context::require_recipient</a></div><div class="ttdeci">void require_recipient(account_name account)</div><div class="ttdef"><b>Definition</b> <a href="#l00283">apply_context.cpp:283</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a15f2962cf55ed75da1cae67309e844d5"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a15f2962cf55ed75da1cae67309e844d5">sysio::chain::apply_context::schedule_action</a></div><div class="ttdeci">uint32_t schedule_action(uint32_t ordinal_of_action_to_schedule, account_name receiver, bool context_free)</div><div class="ttdef"><b>Definition</b> <a href="#l00641">apply_context.cpp:641</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a18d1df4bf3df1229cbfd0bcdce63c06c"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a18d1df4bf3df1229cbfd0bcdce63c06c">sysio::chain::apply_context::add_ram_usage</a></div><div class="ttdeci">void add_ram_usage(account_name account, int64_t ram_delta)</div><div class="ttdef"><b>Definition</b> <a href="#l01050">apply_context.cpp:1050</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a1c52613df7c14b4120213492f01a6dac"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a1c52613df7c14b4120213492f01a6dac">sysio::chain::apply_context::action_return_value</a></div><div class="ttdeci">std::vector&lt; char &gt; action_return_value</div><div class="ttdef"><b>Definition</b> <a href="apply__context_8hpp_source.html#l00616">apply_context.hpp:616</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a2252a9a9740608f9dea5071a929cfe8f"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a2252a9a9740608f9dea5071a929cfe8f">sysio::chain::apply_context::get_active_producers</a></div><div class="ttdeci">vector&lt; account_name &gt; get_active_producers() const</div><div class="ttdef"><b>Definition</b> <a href="#l00713">apply_context.cpp:713</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a2310a1978f97847e770f7525391d0abc"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a2310a1978f97847e770f7525391d0abc">sysio::chain::apply_context::cancel_deferred_transaction</a></div><div class="ttdeci">bool cancel_deferred_transaction(const uint128_t &amp;sender_id, account_name sender)</div><div class="ttdef"><b>Definition</b> <a href="#l00626">apply_context.cpp:626</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a253f4304ce47515f5a74bd4fa3f95368"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a253f4304ce47515f5a74bd4fa3f95368">sysio::chain::apply_context::db_lowerbound_i64</a></div><div class="ttdeci">int db_lowerbound_i64(name code, name scope, name table, uint64_t id)</div><div class="ttdef"><b>Definition</b> <a href="#l00987">apply_context.cpp:987</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a2d651027c7e796f25382b24e58def3ef"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a2d651027c7e796f25382b24e58def3ef">sysio::chain::apply_context::get_action</a></div><div class="ttdeci">const action &amp; get_action() const</div><div class="ttdef"><b>Definition</b> <a href="apply__context_8hpp_source.html#l00594">apply_context.hpp:594</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a2ef781fcd0596791a3edb004b4f5c8c5"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a2ef781fcd0596791a3edb004b4f5c8c5">sysio::chain::apply_context::next_global_sequence</a></div><div class="ttdeci">uint64_t next_global_sequence()</div><div class="ttdef"><b>Definition</b> <a href="#l01028">apply_context.cpp:1028</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a3d55f08ae8c014eb7cca9d36b43e8220"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a3d55f08ae8c014eb7cca9d36b43e8220">sysio::chain::apply_context::exec_one</a></div><div class="ttdeci">void exec_one()</div><div class="ttdoc">Execution methods:</div><div class="ttdef"><b>Definition</b> <a href="#l00053">apply_context.cpp:53</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a49f2feb0d0ce2cb21c74f871432392e9"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a49f2feb0d0ce2cb21c74f871432392e9">sysio::chain::apply_context::update_db_usage</a></div><div class="ttdeci">void update_db_usage(const account_name &amp;payer, int64_t delta)</div><div class="ttdoc">Database methods:</div><div class="ttdef"><b>Definition</b> <a href="#l00723">apply_context.cpp:723</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a4a6ba829713d78125e8f5b5cc7296137"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a4a6ba829713d78125e8f5b5cc7296137">sysio::chain::apply_context::db_find_i64</a></div><div class="ttdeci">int db_find_i64(name code, name scope, name table, uint64_t id)</div><div class="ttdef"><b>Definition</b> <a href="#l00973">apply_context.cpp:973</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a4e7c7a187705892ae97250316ca9b38f"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a4e7c7a187705892ae97250316ca9b38f">sysio::chain::apply_context::get_context_free_data</a></div><div class="ttdeci">int get_context_free_data(uint32_t index, char *buffer, size_t buffer_size) const</div><div class="ttdef"><b>Definition</b> <a href="#l00763">apply_context.cpp:763</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a525b0d91b1afb457e7371ff689fcefda"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a525b0d91b1afb457e7371ff689fcefda">sysio::chain::apply_context::db_store_i64</a></div><div class="ttdeci">int db_store_i64(name scope, name table, const account_name &amp;payer, uint64_t id, const char *buffer, size_t buffer_size)</div><div class="ttdef"><b>Definition</b> <a href="#l00778">apply_context.cpp:778</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a5fb0e439b9a43df576ddea6c944759c1"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a5fb0e439b9a43df576ddea6c944759c1">sysio::chain::apply_context::db_get_i64</a></div><div class="ttdeci">int db_get_i64(int iterator, char *buffer, size_t buffer_size)</div><div class="ttdef"><b>Definition</b> <a href="#l00914">apply_context.cpp:914</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a6596cb3266655d307e7bc7d2a663aa4f"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a6596cb3266655d307e7bc7d2a663aa4f">sysio::chain::apply_context::control</a></div><div class="ttdeci">controller &amp; control</div><div class="ttdoc">Fields:</div><div class="ttdef"><b>Definition</b> <a href="apply__context_8hpp_source.html#l00601">apply_context.hpp:601</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a6b0aadc926e14c0a8a5f6cc3441ad00c"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a6b0aadc926e14c0a8a5f6cc3441ad00c">sysio::chain::apply_context::db_upperbound_i64</a></div><div class="ttdeci">int db_upperbound_i64(name code, name scope, name table, uint64_t id)</div><div class="ttdef"><b>Definition</b> <a href="#l01003">apply_context.cpp:1003</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a78451562bdb87ec31112731f61acde2e"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a78451562bdb87ec31112731f61acde2e">sysio::chain::apply_context::db_next_i64</a></div><div class="ttdeci">int db_next_i64(int iterator, uint64_t &amp;primary)</div><div class="ttdef"><b>Definition</b> <a href="#l00926">apply_context.cpp:926</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a7dbd347239af8b3540db7830b6e2f11e"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a7dbd347239af8b3540db7830b6e2f11e">sysio::chain::apply_context::require_authorization</a></div><div class="ttdeci">void require_authorization(const account_name &amp;account)</div><div class="ttdoc">Authorization methods:</div><div class="ttdef"><b>Definition</b> <a href="#l00248">apply_context.cpp:248</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a87005d2140a4c7884277d2c775a86000"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a87005d2140a4c7884277d2c775a86000">sysio::chain::apply_context::apply_context</a></div><div class="ttdeci">apply_context(controller &amp;con, transaction_context &amp;trx_ctx, uint32_t action_ordinal, uint32_t depth=0)</div><div class="ttdoc">class generic_index</div><div class="ttdef"><b>Definition</b> <a href="#l00034">apply_context.cpp:34</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a87b5bd0a6ac8461dd9c1486561a0c314"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a87b5bd0a6ac8461dd9c1486561a0c314">sysio::chain::apply_context::has_authorization</a></div><div class="ttdeci">bool has_authorization(const account_name &amp;account) const</div><div class="ttdef"><b>Definition</b> <a href="#l00257">apply_context.cpp:257</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a89069192fcd50a9ebbe656f8868e7b90"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a89069192fcd50a9ebbe656f8868e7b90">sysio::chain::apply_context::finalize_trace</a></div><div class="ttdeci">void finalize_trace(action_trace &amp;trace, const fc::time_point &amp;start)</div><div class="ttdef"><b>Definition</b> <a href="#l00189">apply_context.cpp:189</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_a95ccf1ed89aab0118938c309fbf91d1f"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#a95ccf1ed89aab0118938c309fbf91d1f">sysio::chain::apply_context::execute_inline</a></div><div class="ttdeci">void execute_inline(action &amp;&amp;a)</div><div class="ttdef"><b>Definition</b> <a href="#l00312">apply_context.cpp:312</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_aa3b1a676573b8e03823646f92da39365"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#aa3b1a676573b8e03823646f92da39365">sysio::chain::apply_context::is_account</a></div><div class="ttdeci">bool is_account(const account_name &amp;account) const</div><div class="ttdoc">exec()</div><div class="ttdef"><b>Definition</b> <a href="#l00224">apply_context.cpp:224</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_aa4a6bbc72218ef25b15cfc91176d9765"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#aa4a6bbc72218ef25b15cfc91176d9765">sysio::chain::apply_context::trx_context</a></div><div class="ttdeci">transaction_context &amp; trx_context</div><div class="ttdoc">transaction context in which the action is running</div><div class="ttdef"><b>Definition</b> <a href="apply__context_8hpp_source.html#l00603">apply_context.hpp:603</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_aa5a5520ad95838d777834dd408a2c71d"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#aa5a5520ad95838d777834dd408a2c71d">sysio::chain::apply_context::next_auth_sequence</a></div><div class="ttdeci">uint64_t next_auth_sequence(account_name actor)</div><div class="ttdef"><b>Definition</b> <a href="#l01042">apply_context.cpp:1042</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_aac87c3bc66a6e05318bfd25c3373fee5"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#aac87c3bc66a6e05318bfd25c3373fee5">sysio::chain::apply_context::exec</a></div><div class="ttdeci">void exec()</div><div class="ttdef"><b>Definition</b> <a href="#l00200">apply_context.cpp:200</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_ab42c195679823907132298609509f36c"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#ab42c195679823907132298609509f36c">sysio::chain::apply_context::db_update_i64</a></div><div class="ttdeci">void db_update_i64(int iterator, account_name payer, const char *buffer, size_t buffer_size)</div><div class="ttdef"><b>Definition</b> <a href="#l00822">apply_context.cpp:822</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_ab4925e2f0208b9a6bd084c1d25ee218d"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#ab4925e2f0208b9a6bd084c1d25ee218d">sysio::chain::apply_context::get_sender</a></div><div class="ttdeci">action_name get_sender() const</div><div class="ttdef"><b>Definition</b> <a href="#l01059">apply_context.cpp:1059</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_ab6bf0461d3d359d5da63bf8d0338ccab"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#ab6bf0461d3d359d5da63bf8d0338ccab">sysio::chain::apply_context::db_previous_i64</a></div><div class="ttdeci">int db_previous_i64(int iterator, uint64_t &amp;primary)</div><div class="ttdef"><b>Definition</b> <a href="#l00941">apply_context.cpp:941</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_abd131f26bc83416fb97a05392ae68429"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#abd131f26bc83416fb97a05392ae68429">sysio::chain::apply_context::db_remove_i64</a></div><div class="ttdeci">void db_remove_i64(int iterator)</div><div class="ttdef"><b>Definition</b> <a href="#l00878">apply_context.cpp:878</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_ac09c8f3118154bb22b0bd50526e138fa"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#ac09c8f3118154bb22b0bd50526e138fa">sysio::chain::apply_context::schedule_deferred_transaction</a></div><div class="ttdeci">void schedule_deferred_transaction(const uint128_t &amp;sender_id, account_name payer, transaction &amp;&amp;trx, bool replace_existing)</div><div class="ttdef"><b>Definition</b> <a href="#l00426">apply_context.cpp:426</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_ac3b6e6353b5ecebcb305e1d3dcfac4eb"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#ac3b6e6353b5ecebcb305e1d3dcfac4eb">sysio::chain::apply_context::db</a></div><div class="ttdeci">chainbase::database &amp; db</div><div class="ttdoc">database where state is stored</div><div class="ttdef"><b>Definition</b> <a href="apply__context_8hpp_source.html#l00602">apply_context.hpp:602</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_acb20a8d75fff438efadb4976a6fdce31"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#acb20a8d75fff438efadb4976a6fdce31">sysio::chain::apply_context::next_recv_sequence</a></div><div class="ttdeci">uint64_t next_recv_sequence(const account_metadata_object &amp;receiver_account)</div><div class="ttdef"><b>Definition</b> <a href="#l01036">apply_context.cpp:1036</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_ad9d6d21fd254111b1845499ad82982d2"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#ad9d6d21fd254111b1845499ad82982d2">sysio::chain::apply_context::db_end_i64</a></div><div class="ttdeci">int db_end_i64(name code, name scope, name table)</div><div class="ttdef"><b>Definition</b> <a href="#l01019">apply_context.cpp:1019</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_adecf61df18e643021f05df3cdfb97127"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#adecf61df18e643021f05df3cdfb97127">sysio::chain::apply_context::has_recipient</a></div><div class="ttdeci">bool has_recipient(account_name account) const</div><div class="ttdef"><b>Definition</b> <a href="#l00276">apply_context.cpp:276</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_ae13927eb37e92ff57b4a4bfa78e91616"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#ae13927eb37e92ff57b4a4bfa78e91616">sysio::chain::apply_context::get_code_hash</a></div><div class="ttdeci">void get_code_hash(account_name account, uint64_t &amp;code_sequence, fc::sha256 &amp;code_hash, uint8_t &amp;vm_type, uint8_t &amp;vm_version) const</div><div class="ttdef"><b>Definition</b> <a href="#l00228">apply_context.cpp:228</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1apply__context_html_aeacd5c6ae20ee332af568149057df884"><div class="ttname"><a href="classsysio_1_1chain_1_1apply__context.html#aeacd5c6ae20ee332af568149057df884">sysio::chain::apply_context::execute_context_free_inline</a></div><div class="ttdeci">void execute_context_free_inline(action &amp;&amp;a)</div><div class="ttdef"><b>Definition</b> <a href="#l00400">apply_context.cpp:400</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1authorization__manager_html_a8566f4407e33eb1e4029455e4feae2f1"><div class="ttname"><a href="classsysio_1_1chain_1_1authorization__manager.html#a8566f4407e33eb1e4029455e4feae2f1">sysio::chain::authorization_manager::check_authorization</a></div><div class="ttdeci">void check_authorization(const vector&lt; action &gt; &amp;actions, const flat_set&lt; public_key_type &gt; &amp;provided_keys, const flat_set&lt; permission_level &gt; &amp;provided_permissions=flat_set&lt; permission_level &gt;(), fc::microseconds provided_delay=fc::microseconds(0), const std::function&lt; void()&gt; &amp;checktime=std::function&lt; void()&gt;(), bool allow_unused_keys=false, bool check_but_dont_fail=false, const flat_set&lt; permission_level &gt; &amp;satisfied_authorizations=flat_set&lt; permission_level &gt;()) const</div><div class="ttdoc">Check authorizations of a vector of actions with provided keys, permission levels,...</div><div class="ttdef"><b>Definition</b> <a href="authorization__manager_8cpp_source.html#l00471">authorization_manager.cpp:471</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1authorization__manager_html_ab0acfec50b75044030d082d1aa3fbf5c"><div class="ttname"><a href="classsysio_1_1chain_1_1authorization__manager.html#ab0acfec50b75044030d082d1aa3fbf5c">sysio::chain::authorization_manager::find_permission</a></div><div class="ttdeci">const permission_object * find_permission(const permission_level &amp;level) const</div><div class="ttdef"><b>Definition</b> <a href="authorization__manager_8cpp_source.html#l00251">authorization_manager.cpp:251</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html">sysio::chain::controller</a></div><div class="ttdef"><b>Definition</b> <a href="controller_8hpp_source.html#l00063">controller.hpp:63</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_a0884a15f8a10b5a0037601289908a0d9"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#a0884a15f8a10b5a0037601289908a0d9">sysio::chain::controller::check_action_list</a></div><div class="ttdeci">void check_action_list(account_name code, action_name action) const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l03320">controller.cpp:3320</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_a0bb11e832a05b6437c79bf81758b1b7d"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#a0bb11e832a05b6437c79bf81758b1b7d">sysio::chain::controller::get_global_properties</a></div><div class="ttdeci">const global_property_object &amp; get_global_properties() const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l03062">controller.cpp:3062</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_a0c79d00dae8c0d90efc18f4d091b2391"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#a0c79d00dae8c0d90efc18f4d091b2391">sysio::chain::controller::db</a></div><div class="ttdeci">const chainbase::database &amp; db() const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l02646">controller.cpp:2646</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_a0fcc85a590581560765686050fe105a8"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#a0fcc85a590581560765686050fe105a8">sysio::chain::controller::is_producing_block</a></div><div class="ttdeci">bool is_producing_block() const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l03332">controller.cpp:3332</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_a148eb08aa44ff6a177015a66004d0e49"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#a148eb08aa44ff6a177015a66004d0e49">sysio::chain::controller::get_dynamic_global_properties</a></div><div class="ttdeci">const dynamic_global_property_object &amp; get_dynamic_global_properties() const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l03059">controller.cpp:3059</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_a37d0a44faef74cf0f96127982c1ce124"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#a37d0a44faef74cf0f96127982c1ce124">sysio::chain::controller::head_block_id</a></div><div class="ttdeci">block_id_type head_block_id() const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l02955">controller.cpp:2955</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_a42a29a059b847799ae3a75953b6bff1e"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#a42a29a059b847799ae3a75953b6bff1e">sysio::chain::controller::skip_auth_check</a></div><div class="ttdeci">bool skip_auth_check() const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l03238">controller.cpp:3238</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_a4a2e2a5327580a667b803e3bf3ce5f82"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#a4a2e2a5327580a667b803e3bf3ce5f82">sysio::chain::controller::find_apply_handler</a></div><div class="ttdeci">const apply_handler * find_apply_handler(account_name contract, scope_name scope, action_name act) const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l03289">controller.cpp:3289</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_a4afbf4e4448a73468eb6947b68a0c348"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#a4afbf4e4448a73468eb6947b68a0c348">sysio::chain::controller::is_ram_billing_in_notify_allowed</a></div><div class="ttdeci">bool is_ram_billing_in_notify_allowed() const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l03338">controller.cpp:3338</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_a4f6404b355a3a4bf7fb60c92e85443d1"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#a4f6404b355a3a4bf7fb60c92e85443d1">sysio::chain::controller::get_deep_mind_logger</a></div><div class="ttdeci">deep_mind_handler * get_deep_mind_logger() const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l03460">controller.cpp:3460</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_a5e15777ff13440123a46783623744202"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#a5e15777ff13440123a46783623744202">sysio::chain::controller::get_max_nonprivileged_inline_action_size</a></div><div class="ttdeci">uint32_t get_max_nonprivileged_inline_action_size() const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l02605">controller.cpp:2605</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_a888b36bb7d737244a2b200375b199247"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#a888b36bb7d737244a2b200375b199247">sysio::chain::controller::get_wasm_interface</a></div><div class="ttdeci">wasm_interface &amp; get_wasm_interface()</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l03299">controller.cpp:3299</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_a8f7456b81f2657ccf6c39b35afb16af4"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#a8f7456b81f2657ccf6c39b35afb16af4">sysio::chain::controller::get_authorization_manager</a></div><div class="ttdeci">const authorization_manager &amp; get_authorization_manager() const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l02591">controller.cpp:2591</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_aa378f4265708c1bc41e4ee058ed71e6a"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#aa378f4265708c1bc41e4ee058ed71e6a">sysio::chain::controller::check_actor_list</a></div><div class="ttdeci">void check_actor_list(const flat_set&lt; account_name &gt; &amp;actors) const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l03312">controller.cpp:3312</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_aa808acf858e93c567ff983ccbf8fb6d3"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#aa808acf858e93c567ff983ccbf8fb6d3">sysio::chain::controller::is_builtin_activated</a></div><div class="ttdeci">bool is_builtin_activated(builtin_protocol_feature_t f) const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l03385">controller.cpp:3385</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_aa82f197374a4e96fd3e952e18106eae9"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#aa82f197374a4e96fd3e952e18106eae9">sysio::chain::controller::sender_avoids_whitelist_blacklist_enforcement</a></div><div class="ttdeci">bool sender_avoids_whitelist_blacklist_enforcement(account_name sender) const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l03308">controller.cpp:3308</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_abb1d81f96986df3bce46bd37caaf6a69"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#abb1d81f96986df3bce46bd37caaf6a69">sysio::chain::controller::pending_block_time</a></div><div class="ttdeci">time_point pending_block_time() const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l03000">controller.cpp:3000</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_ae0a1946cc6f7b87bd0cfa94bc9aa20b7"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#ae0a1946cc6f7b87bd0cfa94bc9aa20b7">sysio::chain::controller::active_producers</a></div><div class="ttdeci">const producer_authority_schedule &amp; active_producers() const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l03179">controller.cpp:3179</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_ae60743ce36f1fa0912ff26b1da40afe6"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#ae60743ce36f1fa0912ff26b1da40afe6">sysio::chain::controller::convert_exception_to_error_code</a></div><div class="ttdeci">static std::optional&lt; uint64_t &gt; convert_exception_to_error_code(const fc::exception &amp;e)</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l03478">controller.cpp:3478</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_afb3840481287ef2685e61375a44b0305"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#afb3840481287ef2685e61375a44b0305">sysio::chain::controller::contracts_console</a></div><div class="ttdeci">bool contracts_console() const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l03265">controller.cpp:3265</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_affb3f9edd37be65bd34a4d6a783051c0"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#affb3f9edd37be65bd34a4d6a783051c0">sysio::chain::controller::check_contract_list</a></div><div class="ttdeci">void check_contract_list(account_name code) const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l03316">controller.cpp:3316</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1deep__mind__handler_html_a78bf0c79493a90c71cb28aa761f44fd2a334c4a4c42fdb79d7ebc3e73b517e6f8"><div class="ttname"><a href="classsysio_1_1chain_1_1deep__mind__handler.html#a78bf0c79493a90c71cb28aa761f44fd2a334c4a4c42fdb79d7ebc3e73b517e6f8">sysio::chain::deep_mind_handler::operation_qualifier::none</a></div><div class="ttdeci">@ none</div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1deep__mind__handler_html_a78bf0c79493a90c71cb28aa761f44fd2a8f45a2644508b5282f57fe129f62d19a"><div class="ttname"><a href="classsysio_1_1chain_1_1deep__mind__handler.html#a78bf0c79493a90c71cb28aa761f44fd2a8f45a2644508b5282f57fe129f62d19a">sysio::chain::deep_mind_handler::operation_qualifier::modify</a></div><div class="ttdeci">@ modify</div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1generated__transaction__object_html"><div class="ttname"><a href="classsysio_1_1chain_1_1generated__transaction__object.html">sysio::chain::generated_transaction_object</a></div><div class="ttdef"><b>Definition</b> <a href="generated__transaction__object_8hpp_source.html#l00022">generated_transaction_object.hpp:23</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1global__property__object_html_a7f149fcf87034217c899838eb4430496"><div class="ttname"><a href="classsysio_1_1chain_1_1global__property__object.html#a7f149fcf87034217c899838eb4430496">sysio::chain::global_property_object::configuration</a></div><div class="ttdeci">chain_config configuration</div><div class="ttdef"><b>Definition</b> <a href="global__property__object_8hpp_source.html#l00071">global_property_object.hpp:71</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1table__id__object_html"><div class="ttname"><a href="classsysio_1_1chain_1_1table__id__object.html">sysio::chain::table_id_object</a></div><div class="ttdoc">The table_id_object class tracks the mapping of (scope, code, table) to an opaque identifier.</div><div class="ttdef"><b>Definition</b> <a href="contract__table__objects_8hpp_source.html#l00015">contract_table_objects.hpp:15</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1transaction__context_html"><div class="ttname"><a href="classsysio_1_1chain_1_1transaction__context.html">sysio::chain::transaction_context</a></div><div class="ttdef"><b>Definition</b> <a href="transaction__context_8hpp_source.html#l00032">transaction_context.hpp:32</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1transaction__context_html_a08e9cf6a4b8ce2f6211ce9d8de1b4da3"><div class="ttname"><a href="classsysio_1_1chain_1_1transaction__context.html#a08e9cf6a4b8ce2f6211ce9d8de1b4da3">sysio::chain::transaction_context::packed_trx</a></div><div class="ttdeci">const packed_transaction &amp; packed_trx</div><div class="ttdef"><b>Definition</b> <a href="transaction__context_8hpp_source.html#l00123">transaction_context.hpp:123</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1transaction__context_html_a62b3defb107a356551a01d2c78e80b4b"><div class="ttname"><a href="classsysio_1_1chain_1_1transaction__context.html#a62b3defb107a356551a01d2c78e80b4b">sysio::chain::transaction_context::add_net_usage</a></div><div class="ttdeci">void add_net_usage(uint64_t u)</div><div class="ttdef"><b>Definition</b> <a href="transaction__context_8hpp_source.html#l00057">transaction_context.hpp:57</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1transaction__context_html_a799e9208ec6d2ea3d1dfccfd4eb97cec"><div class="ttname"><a href="classsysio_1_1chain_1_1transaction__context.html#a799e9208ec6d2ea3d1dfccfd4eb97cec">sysio::chain::transaction_context::enforce_whiteblacklist</a></div><div class="ttdeci">bool enforce_whiteblacklist</div><div class="ttdef"><b>Definition</b> <a href="transaction__context_8hpp_source.html#l00141">transaction_context.hpp:141</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1transaction__context_html_a7ecbfbb3d05a6a0b128feeb0a469878c"><div class="ttname"><a href="classsysio_1_1chain_1_1transaction__context.html#a7ecbfbb3d05a6a0b128feeb0a469878c">sysio::chain::transaction_context::validate_referenced_accounts</a></div><div class="ttdeci">void validate_referenced_accounts(const transaction &amp;trx, bool enforce_actor_whitelist_blacklist) const</div><div class="ttdoc">record_transaction</div><div class="ttdef"><b>Definition</b> <a href="transaction__context_8cpp_source.html#l00739">transaction_context.cpp:739</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1transaction__context_html_aa16627a2b31f924e998137ba14f22123"><div class="ttname"><a href="classsysio_1_1chain_1_1transaction__context.html#aa16627a2b31f924e998137ba14f22123">sysio::chain::transaction_context::executed_action_receipt_digests</a></div><div class="ttdeci">vector&lt; digest_type &gt; executed_action_receipt_digests</div><div class="ttdef"><b>Definition</b> <a href="transaction__context_8hpp_source.html#l00131">transaction_context.hpp:131</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1transaction__context_html_ab851893d7707bae5ac294b19ecfd667b"><div class="ttname"><a href="classsysio_1_1chain_1_1transaction__context.html#ab851893d7707bae5ac294b19ecfd667b">sysio::chain::transaction_context::hash_with_checktime</a></div><div class="ttdeci">DigestType hash_with_checktime(const char *data, uint32_t datalen) const</div><div class="ttdef"><b>Definition</b> <a href="transaction__context_8hpp_source.html#l00064">transaction_context.hpp:64</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1transaction__context_html_ab8e1aaec319ed2ae90b6a6f499919c89"><div class="ttname"><a href="classsysio_1_1chain_1_1transaction__context.html#ab8e1aaec319ed2ae90b6a6f499919c89">sysio::chain::transaction_context::published</a></div><div class="ttdeci">fc::time_point published</div><div class="ttdef"><b>Definition</b> <a href="transaction__context_8hpp_source.html#l00128">transaction_context.hpp:128</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1transaction__context_html_ac47cac1e2ac5625a8589686503dd1261"><div class="ttname"><a href="classsysio_1_1chain_1_1transaction__context.html#ac47cac1e2ac5625a8589686503dd1261">sysio::chain::transaction_context::checktime</a></div><div class="ttdeci">void checktime() const</div><div class="ttdef"><b>Definition</b> <a href="transaction__context_8cpp_source.html#l00424">transaction_context.cpp:424</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1transaction__context_html_acd4137f1354209bb1237e5a1f26fdbcd"><div class="ttname"><a href="classsysio_1_1chain_1_1transaction__context.html#acd4137f1354209bb1237e5a1f26fdbcd">sysio::chain::transaction_context::is_read_only</a></div><div class="ttdeci">const bool is_read_only</div><div class="ttdef"><b>Definition</b> <a href="transaction__context_8hpp_source.html#l00151">transaction_context.hpp:151</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1wasm__interface_html_a9053d9e65167e5f241f1f3f27b175f9c"><div class="ttname"><a href="classsysio_1_1chain_1_1wasm__interface.html#a9053d9e65167e5f241f1f3f27b175f9c">sysio::chain::wasm_interface::vm_type</a></div><div class="ttdeci">vm_type</div><div class="ttdef"><b>Definition</b> <a href="wasm__interface_8hpp_source.html#l00027">wasm_interface.hpp:27</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1wasm__interface_html_add575021d7a77e579238267f4c9331c9"><div class="ttname"><a href="classsysio_1_1chain_1_1wasm__interface.html#add575021d7a77e579238267f4c9331c9">sysio::chain::wasm_interface::apply</a></div><div class="ttdeci">void apply(const digest_type &amp;code_hash, const uint8_t &amp;vm_type, const uint8_t &amp;vm_version, apply_context &amp;context)</div><div class="ttdef"><b>Definition</b> <a href="wasm__interface_8cpp_source.html#l00081">wasm_interface.cpp:81</a></div></div>
<div class="ttc" id="acode__cache_8cpp_html_aa0efefe21f4700d78692edc823e763be"><div class="ttname"><a href="code__cache_8cpp.html#aa0efefe21f4700d78692edc823e763be">id</a></div><div class="ttdeci">uint64_t id</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8cpp_source.html#l00000">code_cache.cpp:0</a></div></div>
<div class="ttc" id="acode__object_8hpp_html"><div class="ttname"><a href="code__object_8hpp.html">code_object.hpp</a></div></div>
<div class="ttc" id="acontroller_8hpp_html"><div class="ttname"><a href="controller_8hpp.html">controller.hpp</a></div></div>
<div class="ttc" id="adeep__mind_8hpp_html"><div class="ttname"><a href="deep__mind_8hpp.html">deep_mind.hpp</a></div></div>
<div class="ttc" id="adeep__mind_8hpp_html_aaaa2f1dbd522de03ccbaa73f01db5f50"><div class="ttname"><a href="deep__mind_8hpp.html#aaaa2f1dbd522de03ccbaa73f01db5f50">RAM_EVENT_ID</a></div><div class="ttdeci">#define RAM_EVENT_ID(FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="deep__mind_8hpp_source.html#l00027">deep_mind.hpp:27</a></div></div>
<div class="ttc" id="aexception_8hpp_html_af3731d6e3beb140d9e652adf7a18113b"><div class="ttname"><a href="exception_8hpp.html#af3731d6e3beb140d9e652adf7a18113b">FC_RETHROW_EXCEPTIONS</a></div><div class="ttdeci">#define FC_RETHROW_EXCEPTIONS(LOG_LEVEL, FORMAT,...)</div><div class="ttdoc">Catchs all exception's, std::exceptions, and ... and rethrows them after appending the provided log m...</div><div class="ttdef"><b>Definition</b> <a href="exception_8hpp_source.html#l00505">exception.hpp:505</a></div></div>
<div class="ttc" id="agenerated__transaction__object_8hpp_html"><div class="ttname"><a href="generated__transaction__object_8hpp.html">generated_transaction_object.hpp</a></div></div>
<div class="ttc" id="aglobal__property__object_8hpp_html"><div class="ttname"><a href="global__property__object_8hpp.html">global_property_object.hpp</a></div></div>
<div class="ttc" id="aintegration_8cpp_html_a6e9635897de7740b7389a391f613626b"><div class="ttname"><a href="integration_8cpp.html#a6e9635897de7740b7389a391f613626b">delay</a></div><div class="ttdeci">void delay(websocketpp::connection_hdl, long duration)</div><div class="ttdef"><b>Definition</b> <a href="integration_8cpp_source.html#l00318">integration.cpp:318</a></div></div>
<div class="ttc" id="alog__message_8hpp_html_a4a4df4bb5cffbe07aadf7d29fd44c75e"><div class="ttname"><a href="log__message_8hpp.html#a4a4df4bb5cffbe07aadf7d29fd44c75e">FC_LOG_MESSAGE</a></div><div class="ttdeci">#define FC_LOG_MESSAGE(LOG_LEVEL, FORMAT,...)</div><div class="ttdoc">A helper method for generating log messages.</div><div class="ttdef"><b>Definition</b> <a href="log__message_8hpp_source.html#l00165">log_message.hpp:165</a></div></div>
<div class="ttc" id="alogger_8hpp_html_a3da1571bad6ca6c94df9a3660b2115ee"><div class="ttname"><a href="logger_8hpp.html#a3da1571bad6ca6c94df9a3660b2115ee">dlog</a></div><div class="ttdeci">#define dlog(FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="logger_8hpp_source.html#l00101">logger.hpp:101</a></div></div>
<div class="ttc" id="anamespacefc_1_1raw_html_a3a18d8161aa5b4f4f02b6fcfdff5e5d1"><div class="ttname"><a href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1">fc::raw::pack</a></div><div class="ttdeci">void pack(Stream &amp;s, const std::deque&lt; T &gt; &amp;value)</div><div class="ttdef"><b>Definition</b> <a href="raw_8hpp_source.html#l00531">raw.hpp:531</a></div></div>
<div class="ttc" id="anamespacefc_1_1raw_html_a64937a5adc8041247f7007882224e225"><div class="ttname"><a href="namespacefc_1_1raw.html#a64937a5adc8041247f7007882224e225">fc::raw::pack_size</a></div><div class="ttdeci">size_t pack_size(const T &amp;v)</div><div class="ttdef"><b>Definition</b> <a href="raw_8hpp_source.html#l00671">raw.hpp:671</a></div></div>
<div class="ttc" id="anamespacefc_html_a9623b8cae3f48bbed6aa1fc2afe9b174"><div class="ttname"><a href="namespacefc.html#a9623b8cae3f48bbed6aa1fc2afe9b174">fc::seconds</a></div><div class="ttdeci">constexpr microseconds seconds(int64_t s)</div><div class="ttdef"><b>Definition</b> <a href="include_2fc_2time_8hpp_source.html#l00032">time.hpp:32</a></div></div>
<div class="ttc" id="anamespacefc_html_acd5129981ae93fce3154d3fed6f6acbc"><div class="ttname"><a href="namespacefc.html#acd5129981ae93fce3154d3fed6f6acbc">fc::format_string</a></div><div class="ttdeci">fc::string format_string(const fc::string &amp;, const variant_object &amp;, bool minimize=false)</div><div class="ttdef"><b>Definition</b> <a href="variant_8cpp_source.html#l00773">variant.cpp:773</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1config_html_a2772c77657b1f6fda680bbe8f7282d13"><div class="ttname"><a href="namespacesysio_1_1chain_1_1config.html#a2772c77657b1f6fda680bbe8f7282d13">sysio::chain::config::billable_size_v</a></div><div class="ttdeci">constexpr uint64_t billable_size_v</div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2config_8hpp_source.html#l00147">config.hpp:147</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_a406d45a184cdba0af316b5bf34bf56cfa1e0a5b7203c3f4124dc8c1880b04e36b"><div class="ttname"><a href="namespacesysio_1_1chain.html#a406d45a184cdba0af316b5bf34bf56cfa1e0a5b7203c3f4124dc8c1880b04e36b">sysio::chain::builtin_protocol_feature_t::no_duplicate_deferred_id</a></div><div class="ttdeci">@ no_duplicate_deferred_id</div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_a406d45a184cdba0af316b5bf34bf56cfa5b1659352f17eb75b45e13054aaf1521"><div class="ttname"><a href="namespacesysio_1_1chain.html#a406d45a184cdba0af316b5bf34bf56cfa5b1659352f17eb75b45e13054aaf1521">sysio::chain::builtin_protocol_feature_t::ram_restrictions</a></div><div class="ttdeci">@ ram_restrictions</div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_a406d45a184cdba0af316b5bf34bf56cfa6c9cdecb5279149c0f09980e3161e501"><div class="ttname"><a href="namespacesysio_1_1chain.html#a406d45a184cdba0af316b5bf34bf56cfa6c9cdecb5279149c0f09980e3161e501">sysio::chain::builtin_protocol_feature_t::replace_deferred</a></div><div class="ttdeci">@ replace_deferred</div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_a406d45a184cdba0af316b5bf34bf56cfa7d76bd2f931e7c1f1c2b7413c93a25b0"><div class="ttname"><a href="namespacesysio_1_1chain.html#a406d45a184cdba0af316b5bf34bf56cfa7d76bd2f931e7c1f1c2b7413c93a25b0">sysio::chain::builtin_protocol_feature_t::action_return_value</a></div><div class="ttdeci">@ action_return_value</div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_a406d45a184cdba0af316b5bf34bf56cfa9be6e49b9731de43d53e394e3ed5e25b"><div class="ttname"><a href="namespacesysio_1_1chain.html#a406d45a184cdba0af316b5bf34bf56cfa9be6e49b9731de43d53e394e3ed5e25b">sysio::chain::builtin_protocol_feature_t::forward_setcode</a></div><div class="ttdeci">@ forward_setcode</div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_a406d45a184cdba0af316b5bf34bf56cfaf0765905ee88dc2bfbdd738872b1b6f8"><div class="ttname"><a href="namespacesysio_1_1chain.html#a406d45a184cdba0af316b5bf34bf56cfaf0765905ee88dc2bfbdd738872b1b6f8">sysio::chain::builtin_protocol_feature_t::restrict_action_to_self</a></div><div class="ttdeci">@ restrict_action_to_self</div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_a4e167bafac72001dee047e0f198bb689"><div class="ttname"><a href="namespacesysio_1_1chain.html#a4e167bafac72001dee047e0f198bb689">sysio::chain::emplace_extension</a></div><div class="ttdeci">auto emplace_extension(extensions_type &amp;exts, uint16_t eid, vector&lt; char &gt; &amp;&amp;data)</div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2types_8hpp_source.html#l00264">types.hpp:264</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_a5dfe17906469eaf079c180c1afb4ad94"><div class="ttname"><a href="namespacesysio_1_1chain.html#a5dfe17906469eaf079c180c1afb4ad94">sysio::chain::transaction_exception</a></div><div class="ttdeci">key Invalid authority Invalid transaction Invalid block ID Invalid packed transaction Invalid chain ID Invalid symbol Signature type is not a currently activated type Block can not be found Unlinkable block Block does not guarantee concurrent execution without conflicts Block exhausted allowed resources Block is from the future Block is not signed by expected producer Block includes an ill formed protocol feature activation extension Block includes an ill formed additional block signature extension transaction_exception</div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2exceptions_8hpp_source.html#l00243">exceptions.hpp:243</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_a74ad7956eae3ff7ff8670caaff413e12"><div class="ttname"><a href="namespacesysio_1_1chain.html#a74ad7956eae3ff7ff8670caaff413e12">sysio::chain::generate_action_digest</a></div><div class="ttdeci">auto generate_action_digest(Hasher &amp;&amp;hash, const action &amp;act, const vector&lt; char &gt; &amp;action_output)</div><div class="ttdef"><b>Definition</b> <a href="action_8hpp_source.html#l00099">action.hpp:99</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_a764b50974b9b72a0e233e72176913d6b"><div class="ttname"><a href="namespacesysio_1_1chain.html#a764b50974b9b72a0e233e72176913d6b">sysio::chain::action_validate_exception</a></div><div class="ttdeci">key Invalid authority Invalid transaction Invalid block ID Invalid packed transaction Invalid chain ID Invalid symbol Signature type is not a currently activated type Block can not be found Unlinkable block Block does not guarantee concurrent execution without conflicts Block exhausted allowed resources Block is from the future Block is not signed by expected producer Block includes an ill formed protocol feature activation extension Block includes an ill formed additional block signature extension Error decompressing transaction Transaction should have at least one required authority Expired Transaction Invalid Reference Block Duplicate deferred transaction The transaction can not be found Transaction is too big Invalid transaction extension Transaction includes disallowed Transaction exceeded transient resource limit action_validate_exception</div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2exceptions_8hpp_source.html#l00284">exceptions.hpp:284</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_a7a1685bcc352cda9e45f055932069428"><div class="ttname"><a href="namespacesysio_1_1chain.html#a7a1685bcc352cda9e45f055932069428">sysio::chain::action_name</a></div><div class="ttdeci">sysio::chain::action_name action_name</div><div class="ttdef"><b>Definition</b> <a href="contract__types_8hpp_source.html#l00008">contract_types.hpp:8</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_a896515137d9a7844105786ee3a6b1d47"><div class="ttname"><a href="namespacesysio_1_1chain.html#a896515137d9a7844105786ee3a6b1d47">sysio::chain::uint128_t</a></div><div class="ttdeci">unsigned __int128 uint128_t</div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2types_8hpp_source.html#l00242">types.hpp:242</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_a9e9842ee49526c2423e014a696edc602"><div class="ttname"><a href="namespacesysio_1_1chain.html#a9e9842ee49526c2423e014a696edc602">sysio::chain::generated_transaction_multi_index</a></div><div class="ttdeci">chainbase::shared_multi_index_container&lt; generated_transaction_object, indexed_by&lt; ordered_unique&lt; tag&lt; by_id &gt;, BOOST_MULTI_INDEX_MEMBER(generated_transaction_object, generated_transaction_object::id_type, id)&gt;, ordered_unique&lt; tag&lt; by_trx_id &gt;, BOOST_MULTI_INDEX_MEMBER(generated_transaction_object, transaction_id_type, trx_id)&gt;, ordered_unique&lt; tag&lt; by_expiration &gt;, composite_key&lt; generated_transaction_object, BOOST_MULTI_INDEX_MEMBER(generated_transaction_object, time_point, expiration), &gt; &gt;, ordered_unique&lt; tag&lt; by_delay &gt;, composite_key&lt; generated_transaction_object, BOOST_MULTI_INDEX_MEMBER(generated_transaction_object, time_point, delay_until), &gt; &gt;, ordered_unique&lt; tag&lt; by_sender_id &gt;, composite_key&lt; generated_transaction_object, BOOST_MULTI_INDEX_MEMBER(generated_transaction_object, account_name, sender), &gt; &gt; &gt; &gt; generated_transaction_multi_index</div><div class="ttdef"><b>Definition</b> <a href="generated__transaction__object_8hpp_source.html#l00052">generated_transaction_object.hpp:52</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_aa85a3b49b3b219d1e3840567579e7e63"><div class="ttname"><a href="namespacesysio_1_1chain.html#aa85a3b49b3b219d1e3840567579e7e63">sysio::chain::transaction_id_type</a></div><div class="ttdeci">checksum_type transaction_id_type</div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2types_8hpp_source.html#l00236">types.hpp:236</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_aac1a2c1330fcb6c8002d59d4d1de5858"><div class="ttname"><a href="namespacesysio_1_1chain.html#aac1a2c1330fcb6c8002d59d4d1de5858">sysio::chain::key_value_index</a></div><div class="ttdeci">chainbase::shared_multi_index_container&lt; key_value_object, indexed_by&lt; ordered_unique&lt; tag&lt; by_id &gt;, member&lt; key_value_object, key_value_object::id_type, &amp;key_value_object::id &gt; &gt;, ordered_unique&lt; tag&lt; by_scope_primary &gt;, composite_key&lt; key_value_object, member&lt; key_value_object, table_id, &amp;key_value_object::t_id &gt;, member&lt; key_value_object, uint64_t, &amp;key_value_object::primary_key &gt; &gt;, composite_key_compare&lt; std::less&lt; table_id &gt;, std::less&lt; uint64_t &gt; &gt; &gt; &gt; &gt; key_value_index</div><div class="ttdef"><b>Definition</b> <a href="contract__table__objects_8hpp_source.html#l00064">contract_table_objects.hpp:64</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_ac32ce8e75243f2b3f76aff0c1984f11b"><div class="ttname"><a href="namespacesysio_1_1chain.html#ac32ce8e75243f2b3f76aff0c1984f11b">sysio::chain::account_name</a></div><div class="ttdeci">name account_name</div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2types_8hpp_source.html#l00120">types.hpp:120</a></div></div>
<div class="ttc" id="anamespacesysio_html"><div class="ttname"><a href="namespacesysio.html">sysio</a></div><div class="ttdef"><b>Definition</b> <a href="abi__serializer_8cpp_source.html#l00008">abi_serializer.cpp:8</a></div></div>
<div class="ttc" id="anamespacesysio_html_a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a"><div class="ttname"><a href="namespacesysio.html#a5c18cd9d34b8c5d3af8e2de75577673fa1f42b089b0bc1105b38f19140a65cc2a">sysio::self</a></div><div class="ttdeci">@ self</div><div class="ttdoc">the connection is to itself</div><div class="ttdef"><b>Definition</b> <a href="plugins_2net__plugin_2include_2sysio_2net__plugin_2protocol_8hpp_source.html#l00048">protocol.hpp:48</a></div></div>
<div class="ttc" id="apointer_8h_html_aeeddce917cf130d62c370b8f216026dd"><div class="ttname"><a href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a></div><div class="ttdeci">const GenericPointer&lt; typename T::ValueType &gt; T2 T::AllocatorType &amp; a</div><div class="ttdef"><b>Definition</b> <a href="pointer_8h_source.html#l01181">pointer.h:1181</a></div></div>
<div class="ttc" id="aresource__limits_8hpp_html"><div class="ttname"><a href="resource__limits_8hpp.html">resource_limits.hpp</a></div></div>
<div class="ttc" id="astdint_8h_html_a414156feea104f8f75b4ed9e3121b2f6"><div class="ttname"><a href="stdint_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a></div><div class="ttdeci">signed __int64 int64_t</div><div class="ttdef"><b>Definition</b> <a href="stdint_8h_source.html#l00135">stdint.h:135</a></div></div>
<div class="ttc" id="astdint_8h_html_a435d1572bf3f880d55459d9805097f62"><div class="ttname"><a href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></div><div class="ttdeci">unsigned int uint32_t</div><div class="ttdef"><b>Definition</b> <a href="stdint_8h_source.html#l00126">stdint.h:126</a></div></div>
<div class="ttc" id="astdint_8h_html_aba7bc1797add20fe3efdf37ced1182c5"><div class="ttname"><a href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></div><div class="ttdeci">unsigned char uint8_t</div><div class="ttdef"><b>Definition</b> <a href="stdint_8h_source.html#l00124">stdint.h:124</a></div></div>
<div class="ttc" id="astdint_8h_html_aec6fcb673ff035718c238c8c9d544c47"><div class="ttname"><a href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a></div><div class="ttdeci">unsigned __int64 uint64_t</div><div class="ttdef"><b>Definition</b> <a href="stdint_8h_source.html#l00136">stdint.h:136</a></div></div>
<div class="ttc" id="astructcontext_html"><div class="ttname"><a href="structcontext.html">context</a></div><div class="ttdef"><b>Definition</b> <a href="yubihsm__winhttp_8c_source.html#l00052">yubihsm_winhttp.c:52</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1action__base_html_a013fae07403bd6deffcade4fd5be095c"><div class="ttname"><a href="structsysio_1_1chain_1_1action__base.html#a013fae07403bd6deffcade4fd5be095c">sysio::chain::action_base::name</a></div><div class="ttdeci">action_name name</div><div class="ttdef"><b>Definition</b> <a href="action_8hpp_source.html#l00058">action.hpp:58</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1action__base_html_a3598da3f8df67037e69dab758ce168be"><div class="ttname"><a href="structsysio_1_1chain_1_1action__base.html#a3598da3f8df67037e69dab758ce168be">sysio::chain::action_base::account</a></div><div class="ttdeci">account_name account</div><div class="ttdef"><b>Definition</b> <a href="action_8hpp_source.html#l00057">action.hpp:57</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1action__base_html_a40939533bca9e44d169ee7e25ebb1945"><div class="ttname"><a href="structsysio_1_1chain_1_1action__base.html#a40939533bca9e44d169ee7e25ebb1945">sysio::chain::action_base::authorization</a></div><div class="ttdeci">vector&lt; permission_level &gt; authorization</div><div class="ttdef"><b>Definition</b> <a href="action_8hpp_source.html#l00059">action.hpp:59</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1action__receipt_html"><div class="ttname"><a href="structsysio_1_1chain_1_1action__receipt.html">sysio::chain::action_receipt</a></div><div class="ttdef"><b>Definition</b> <a href="action__receipt_8hpp_source.html#l00010">action_receipt.hpp:10</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1action__trace_html"><div class="ttname"><a href="structsysio_1_1chain_1_1action__trace.html">sysio::chain::action_trace</a></div><div class="ttdef"><b>Definition</b> <a href="libraries_2chain_2include_2sysio_2chain_2trace_8hpp_source.html#l00022">trace.hpp:22</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1action__trace_html_a2768873af7e824ea890790b416418a63"><div class="ttname"><a href="structsysio_1_1chain_1_1action__trace.html#a2768873af7e824ea890790b416418a63">sysio::chain::action_trace::elapsed</a></div><div class="ttdeci">fc::microseconds elapsed</div><div class="ttdef"><b>Definition</b> <a href="libraries_2chain_2include_2sysio_2chain_2trace_8hpp_source.html#l00038">trace.hpp:38</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1action__trace_html_a2aa19858e0762797685b9ec46e820656"><div class="ttname"><a href="structsysio_1_1chain_1_1action__trace.html#a2aa19858e0762797685b9ec46e820656">sysio::chain::action_trace::act</a></div><div class="ttdeci">action act</div><div class="ttdef"><b>Definition</b> <a href="libraries_2chain_2include_2sysio_2chain_2trace_8hpp_source.html#l00036">trace.hpp:36</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1action__trace_html_a57409cb534668343eea05422f1f35ba2"><div class="ttname"><a href="structsysio_1_1chain_1_1action__trace.html#a57409cb534668343eea05422f1f35ba2">sysio::chain::action_trace::creator_action_ordinal</a></div><div class="ttdeci">fc::unsigned_int creator_action_ordinal</div><div class="ttdef"><b>Definition</b> <a href="libraries_2chain_2include_2sysio_2chain_2trace_8hpp_source.html#l00032">trace.hpp:32</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1action__trace_html_a5deb1ef19ee3280311c5341887e9e7e7"><div class="ttname"><a href="structsysio_1_1chain_1_1action__trace.html#a5deb1ef19ee3280311c5341887e9e7e7">sysio::chain::action_trace::console</a></div><div class="ttdeci">string console</div><div class="ttdef"><b>Definition</b> <a href="libraries_2chain_2include_2sysio_2chain_2trace_8hpp_source.html#l00039">trace.hpp:39</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1action__trace_html_a620c926ac80083458d66406e8c7cc986"><div class="ttname"><a href="structsysio_1_1chain_1_1action__trace.html#a620c926ac80083458d66406e8c7cc986">sysio::chain::action_trace::context_free</a></div><div class="ttdeci">bool context_free</div><div class="ttdef"><b>Definition</b> <a href="libraries_2chain_2include_2sysio_2chain_2trace_8hpp_source.html#l00037">trace.hpp:37</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1action__trace_html_a7003f48bddcf8307f12d11b4b25cce2f"><div class="ttname"><a href="structsysio_1_1chain_1_1action__trace.html#a7003f48bddcf8307f12d11b4b25cce2f">sysio::chain::action_trace::except</a></div><div class="ttdeci">std::optional&lt; fc::exception &gt; except</div><div class="ttdef"><b>Definition</b> <a href="libraries_2chain_2include_2sysio_2chain_2trace_8hpp_source.html#l00045">trace.hpp:45</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1action__trace_html_ac590168044f7b45e3621150135487776"><div class="ttname"><a href="structsysio_1_1chain_1_1action__trace.html#ac590168044f7b45e3621150135487776">sysio::chain::action_trace::account_ram_deltas</a></div><div class="ttdeci">flat_set&lt; account_delta &gt; account_ram_deltas</div><div class="ttdef"><b>Definition</b> <a href="libraries_2chain_2include_2sysio_2chain_2trace_8hpp_source.html#l00044">trace.hpp:44</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1action__trace_html_ae591c5eb3a224491d0d811267dd3cdc1"><div class="ttname"><a href="structsysio_1_1chain_1_1action__trace.html#ae591c5eb3a224491d0d811267dd3cdc1">sysio::chain::action_trace::return_value</a></div><div class="ttdeci">std::vector&lt; char &gt; return_value</div><div class="ttdef"><b>Definition</b> <a href="libraries_2chain_2include_2sysio_2chain_2trace_8hpp_source.html#l00047">trace.hpp:47</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1action__trace_html_ae9f2c9fa62609083457c1852c1c021b2"><div class="ttname"><a href="structsysio_1_1chain_1_1action__trace.html#ae9f2c9fa62609083457c1852c1c021b2">sysio::chain::action_trace::receiver</a></div><div class="ttdeci">action_name receiver</div><div class="ttdef"><b>Definition</b> <a href="libraries_2chain_2include_2sysio_2chain_2trace_8hpp_source.html#l00035">trace.hpp:35</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1action__trace_html_af3800bd1b2e1a3f1d5357fa44ee12bb3"><div class="ttname"><a href="structsysio_1_1chain_1_1action__trace.html#af3800bd1b2e1a3f1d5357fa44ee12bb3">sysio::chain::action_trace::receipt</a></div><div class="ttdeci">std::optional&lt; action_receipt &gt; receipt</div><div class="ttdef"><b>Definition</b> <a href="libraries_2chain_2include_2sysio_2chain_2trace_8hpp_source.html#l00034">trace.hpp:34</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1action__trace_html_af4a5ea567853fa5bb1f9a1cc2fdabff0"><div class="ttname"><a href="structsysio_1_1chain_1_1action__trace.html#af4a5ea567853fa5bb1f9a1cc2fdabff0">sysio::chain::action_trace::error_code</a></div><div class="ttdeci">std::optional&lt; uint64_t &gt; error_code</div><div class="ttdef"><b>Definition</b> <a href="libraries_2chain_2include_2sysio_2chain_2trace_8hpp_source.html#l00046">trace.hpp:46</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1action_html"><div class="ttname"><a href="structsysio_1_1chain_1_1action.html">sysio::chain::action</a></div><div class="ttdef"><b>Definition</b> <a href="action_8hpp_source.html#l00069">action.hpp:69</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1chain__config__v0_html_a007444fa5297c0950b749d4ca2b64e2c"><div class="ttname"><a href="structsysio_1_1chain_1_1chain__config__v0.html#a007444fa5297c0950b749d4ca2b64e2c">sysio::chain::chain_config_v0::max_inline_action_depth</a></div><div class="ttdeci">uint16_t max_inline_action_depth</div><div class="ttdoc">recursion depth limit on sending inline actions</div><div class="ttdef"><b>Definition</b> <a href="chain__config_8hpp_source.html#l00057">chain_config.hpp:57</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1chain__config__v0_html_afb8514589814c9672abd5d0f9c7297cb"><div class="ttname"><a href="structsysio_1_1chain_1_1chain__config__v0.html#afb8514589814c9672abd5d0f9c7297cb">sysio::chain::chain_config_v0::max_inline_action_size</a></div><div class="ttdeci">uint32_t max_inline_action_size</div><div class="ttdoc">maximum allowed size (in bytes) of an inline action</div><div class="ttdef"><b>Definition</b> <a href="chain__config_8hpp_source.html#l00056">chain_config.hpp:56</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1chain__config__v1_html"><div class="ttname"><a href="structsysio_1_1chain_1_1chain__config__v1.html">sysio::chain::chain_config_v1</a></div><div class="ttdoc">v1 Producer-voted blockchain configuration parameters</div><div class="ttdef"><b>Definition</b> <a href="chain__config_8hpp_source.html#l00143">chain_config.hpp:143</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1deferred__transaction__generation__context_html"><div class="ttname"><a href="structsysio_1_1chain_1_1deferred__transaction__generation__context.html">sysio::chain::deferred_transaction_generation_context</a></div><div class="ttdef"><b>Definition</b> <a href="transaction_8hpp_source.html#l00008">transaction.hpp:8</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1deferred__transaction__generation__context_html_a13c8439c1c9d63ef864fe850c666b96f"><div class="ttname"><a href="structsysio_1_1chain_1_1deferred__transaction__generation__context.html#a13c8439c1c9d63ef864fe850c666b96f">sysio::chain::deferred_transaction_generation_context::extension_id</a></div><div class="ttdeci">static constexpr uint16_t extension_id()</div><div class="ttdef"><b>Definition</b> <a href="transaction_8hpp_source.html#l00009">transaction.hpp:9</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1key__value__object_html"><div class="ttname"><a href="structsysio_1_1chain_1_1key__value__object.html">sysio::chain::key_value_object</a></div><div class="ttdef"><b>Definition</b> <a href="contract__table__objects_8hpp_source.html#l00051">contract_table_objects.hpp:51</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1key__value__object_html_a123504a5727142826d963d96bc322300"><div class="ttname"><a href="structsysio_1_1chain_1_1key__value__object.html#a123504a5727142826d963d96bc322300">sysio::chain::key_value_object::t_id</a></div><div class="ttdeci">table_id t_id</div><div class="ttdef"><b>Definition</b> <a href="contract__table__objects_8hpp_source.html#l00058">contract_table_objects.hpp:58</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1key__value__object_html_a2baa983a9564c7cfde54872252502d4a"><div class="ttname"><a href="structsysio_1_1chain_1_1key__value__object.html#a2baa983a9564c7cfde54872252502d4a">sysio::chain::key_value_object::payer</a></div><div class="ttdeci">account_name payer</div><div class="ttdef"><b>Definition</b> <a href="contract__table__objects_8hpp_source.html#l00060">contract_table_objects.hpp:60</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1key__value__object_html_ab78a91101969265c3e5345d6db5941e3"><div class="ttname"><a href="structsysio_1_1chain_1_1key__value__object.html#ab78a91101969265c3e5345d6db5941e3">sysio::chain::key_value_object::value</a></div><div class="ttdeci">shared_blob value</div><div class="ttdef"><b>Definition</b> <a href="contract__table__objects_8hpp_source.html#l00061">contract_table_objects.hpp:61</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1key__value__object_html_ab7f76ae298fa584f39b99d491573fb08"><div class="ttname"><a href="structsysio_1_1chain_1_1key__value__object.html#ab7f76ae298fa584f39b99d491573fb08">sysio::chain::key_value_object::primary_key</a></div><div class="ttdeci">uint64_t primary_key</div><div class="ttdef"><b>Definition</b> <a href="contract__table__objects_8hpp_source.html#l00059">contract_table_objects.hpp:59</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1name_html"><div class="ttname"><a href="structsysio_1_1chain_1_1name.html">sysio::chain::name</a></div><div class="ttdoc">Immutable except for fc::from_variant.</div><div class="ttdef"><b>Definition</b> <a href="name_8hpp_source.html#l00043">name.hpp:43</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1packed__transaction_html_ac07b8dd1294ac4848244cb154256512b"><div class="ttname"><a href="structsysio_1_1chain_1_1packed__transaction.html#ac07b8dd1294ac4848244cb154256512b">sysio::chain::packed_transaction::get_signed_transaction</a></div><div class="ttdeci">const signed_transaction &amp; get_signed_transaction() const</div><div class="ttdef"><b>Definition</b> <a href="transaction_8hpp_source.html#l00185">transaction.hpp:185</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1packed__transaction_html_acc706e72aa422ee3e3c02f73871609cb"><div class="ttname"><a href="structsysio_1_1chain_1_1packed__transaction.html#acc706e72aa422ee3e3c02f73871609cb">sysio::chain::packed_transaction::id</a></div><div class="ttdeci">const transaction_id_type &amp; id() const</div><div class="ttdef"><b>Definition</b> <a href="transaction_8hpp_source.html#l00179">transaction.hpp:179</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1packed__transaction_html_ad193d26eb97cfd5b3f7d8b957eaa35a2"><div class="ttname"><a href="structsysio_1_1chain_1_1packed__transaction.html#ad193d26eb97cfd5b3f7d8b957eaa35a2">sysio::chain::packed_transaction::get_transaction</a></div><div class="ttdeci">const transaction &amp; get_transaction() const</div><div class="ttdef"><b>Definition</b> <a href="transaction_8hpp_source.html#l00184">transaction.hpp:184</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1signed__transaction_html_a24386634e143dd2cc069c2e662d16cd4"><div class="ttname"><a href="structsysio_1_1chain_1_1signed__transaction.html#a24386634e143dd2cc069c2e662d16cd4">sysio::chain::signed_transaction::context_free_data</a></div><div class="ttdeci">vector&lt; bytes &gt; context_free_data</div><div class="ttdoc">for each context-free action, there is an entry here</div><div class="ttdef"><b>Definition</b> <a href="transaction_8hpp_source.html#l00127">transaction.hpp:127</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1transaction_html"><div class="ttname"><a href="structsysio_1_1chain_1_1transaction.html">sysio::chain::transaction</a></div><div class="ttdef"><b>Definition</b> <a href="transaction_8hpp_source.html#l00083">transaction.hpp:83</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1wasm__exit_html"><div class="ttname"><a href="structsysio_1_1chain_1_1wasm__exit.html">sysio::chain::wasm_exit</a></div><div class="ttdef"><b>Definition</b> <a href="wasm__interface_8hpp_source.html#l00017">wasm_interface.hpp:17</a></div></div>
<div class="ttc" id="atransaction__context_8hpp_html"><div class="ttname"><a href="transaction__context_8hpp.html">transaction_context.hpp</a></div></div>
<div class="ttc" id="awasm__interface_8hpp_html"><div class="ttname"><a href="wasm__interface_8hpp.html">wasm_interface.hpp</a></div></div>
<div class="ttc" id="ayubihsm__pkcs11_8c_html_a133461752aa04472950ae3cccb8b86de"><div class="ttname"><a href="yubihsm__pkcs11_8c.html#a133461752aa04472950ae3cccb8b86de">datalen</a></div><div class="ttdeci">CK_ULONG datalen</div><div class="ttdef"><b>Definition</b> <a href="yubihsm__pkcs11_8c_source.html#l02428">yubihsm_pkcs11.c:2428</a></div></div>
<div class="ttc" id="ayubihsm__pkcs11_8c_html_a506da415c9307c897ca9be93acfe1d0f"><div class="ttname"><a href="yubihsm__pkcs11_8c.html#a506da415c9307c897ca9be93acfe1d0f">s</a></div><div class="ttdeci">char * s</div><div class="ttdef"><b>Definition</b> <a href="yubihsm__pkcs11_8c_source.html#l00524">yubihsm_pkcs11.c:524</a></div></div>
<div class="ttc" id="ayubihsm__pkcs11_8c_html_ae785d5badbf1f08b491af31f32a135a1"><div class="ttname"><a href="yubihsm__pkcs11_8c.html#ae785d5badbf1f08b491af31f32a135a1">memcpy</a></div><div class="ttdeci">memcpy((char *) pInfo-&gt;slotDescription, s, l)</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_428556e0652617aa37d2f7d8bcaf7fdf.html">libraries</a></li><li class="navelem"><a class="el" href="dir_0d4aba5c25a4be0a24c819a636048cb8.html">chain</a></li><li class="navelem"><a class="el" href="apply__context_8cpp.html">apply_context.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
