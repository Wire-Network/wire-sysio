<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wire Sysio: matchers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Wire Sysio<span id="projectnumber">&#160;Wire Sysion 1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_libraries_2sys-vm_2external_2_catch2_2docs_2matchers.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">matchers</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="top"></a> </p><h1>Matchers</h1>
<p>Matchers are an alternative way to do assertions which are easily extensible and composable. This makes them well suited to use with more complex types (such as collections) or your own custom types. Matchers were first popularised by the <a href="https://en.wikipedia.org/wiki/Hamcrest">Hamcrest</a> family of frameworks.</p>
<h2>In use</h2>
<p>Matchers are introduced with the <code>REQUIRE_THAT</code> or <code>CHECK_THAT</code> macros, which take two arguments. The first argument is the thing (object or value) under test. The second part is a match <em>expression</em>, which consists of either a single matcher or one or more matchers combined using <code>&amp;&amp;</code>, <code>||</code> or <code>!</code> operators.</p>
<p>For example, to assert that a string ends with a certain substring:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="keyword">using </span><a class="code hl_function" href="namespace_catch_1_1_matchers.html#a816ee41f265edf5fd94f55d2860c58bd">Catch::Matchers::EndsWith</a>; <span class="comment">// or Catch::EndsWith</span></div>
<div class="line">std::string str = getStringFromSomewhere();</div>
<div class="line"><a class="code hl_define" href="include_2catch_8hpp.html#ac1354db6f3e9c1e0a8eda0eea7ff1f0a">REQUIRE_THAT</a>( str, EndsWith( <span class="stringliteral">&quot;as a service&quot;</span> ) ); </div>
<div class="ttc" id="ainclude_2catch_8hpp_html_ac1354db6f3e9c1e0a8eda0eea7ff1f0a"><div class="ttname"><a href="include_2catch_8hpp.html#ac1354db6f3e9c1e0a8eda0eea7ff1f0a">REQUIRE_THAT</a></div><div class="ttdeci">#define REQUIRE_THAT(arg, matcher)</div><div class="ttdef"><b>Definition</b> <a href="include_2catch_8hpp_source.html#l00214">catch.hpp:214</a></div></div>
<div class="ttc" id="anamespace_catch_1_1_matchers_html_a816ee41f265edf5fd94f55d2860c58bd"><div class="ttname"><a href="namespace_catch_1_1_matchers.html#a816ee41f265edf5fd94f55d2860c58bd">Catch::Matchers::EndsWith</a></div><div class="ttdeci">StdString::EndsWithMatcher EndsWith(std::string const &amp;str, CaseSensitive::Choice caseSensitivity)</div><div class="ttdef"><b>Definition</b> <a href="catch__matchers__string_8cpp_source.html#l00106">catch_matchers_string.cpp:106</a></div></div>
</div><!-- fragment --><p>The matcher objects can take multiple arguments, allowing more fine tuning. The built-in string matchers, for example, take a second argument specifying whether the comparison is case sensitive or not:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><a class="code hl_define" href="include_2catch_8hpp.html#ac1354db6f3e9c1e0a8eda0eea7ff1f0a">REQUIRE_THAT</a>( str, EndsWith( <span class="stringliteral">&quot;as a service&quot;</span>, <a class="code hl_enumvalue" href="struct_catch_1_1_case_sensitive.html#aad49d3aee2d97066642fffa919685c6aaeabe15dea2b2d0ea0847e88a9b2a99eb">Catch::CaseSensitive::No</a> ) ); </div>
<div class="ttc" id="astruct_catch_1_1_case_sensitive_html_aad49d3aee2d97066642fffa919685c6aaeabe15dea2b2d0ea0847e88a9b2a99eb"><div class="ttname"><a href="struct_catch_1_1_case_sensitive.html#aad49d3aee2d97066642fffa919685c6aaeabe15dea2b2d0ea0847e88a9b2a99eb">Catch::CaseSensitive::No</a></div><div class="ttdeci">@ No</div><div class="ttdef"><b>Definition</b> <a href="catch__common_8h_source.html#l00034">catch_common.h:33</a></div></div>
</div><!-- fragment --><p>And matchers can be combined:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><a class="code hl_define" href="include_2catch_8hpp.html#ac1354db6f3e9c1e0a8eda0eea7ff1f0a">REQUIRE_THAT</a>( str, </div>
<div class="line">    EndsWith( <span class="stringliteral">&quot;as a service&quot;</span> ) || </div>
<div class="line">    (StartsWith( <span class="stringliteral">&quot;Big data&quot;</span> ) &amp;&amp; !Contains( <span class="stringliteral">&quot;web scale&quot;</span> ) ) ); </div>
</div><!-- fragment --><h2>Built in matchers</h2>
<p><a class="el" href="namespace_catch.html">Catch</a> currently provides some matchers, they are in the <code><a class="el" href="namespace_catch_1_1_matchers.html">Catch::Matchers</a></code> and <code><a class="el" href="namespace_catch.html">Catch</a></code> namespaces.</p>
<h3>String matchers</h3>
<p>The string matchers are <code>StartsWith</code>, <code>EndsWith</code>, <code>Contains</code>, <code>Equals</code> and <code>Matches</code>. The first four match a literal (sub)string against a result, while <code>Matches</code> takes and matches an ECMAScript regex. Do note that <code>Matches</code> matches the string as a whole, meaning that "abc" will not match against "abcd", but "abc.*" will.</p>
<p>Each of the provided <code>std::string</code> matchers also takes an optional second argument, that decides case sensitivity (by-default, they are case sensitive).</p>
<h3>Vector matchers</h3>
<p>The vector matchers are <code>Contains</code>, <code>VectorContains</code> and <code>Equals</code>. <code>VectorContains</code> looks for a single element in the matched vector, <code>Contains</code> looks for a set (vector) of elements inside the matched vector.</p>
<h3>Floating point matchers</h3>
<p>The floating point matchers are <code>WithinULP</code> and <code>WithinAbs</code>. <code>WithinAbs</code> accepts floating point numbers that are within a certain margin of target. <code>WithinULP</code> performs an <a href="https://en.wikipedia.org/wiki/Unit_in_the_last_place">ULP</a>-based comparison of two floating point numbers and accepts them if they are less than certain number of ULPs apart.</p>
<p>Do note that ULP-based checks only make sense when both compared numbers are of the same type and <code>WithinULP</code> will use type of its argument as the target type. This means that <code>WithinULP(1.f, 1)</code> will expect to compare <code>float</code>s, but <code>WithinULP(1., 1)</code> will expect to compare <code>double</code>s.</p>
<h3>Generic matchers</h3>
<p><a class="el" href="namespace_catch.html">Catch</a> also aims to provide a set of generic matchers. Currently this set contains only a matcher that takes arbitrary callable predicate and applies it onto the provided object.</p>
<p>Because of type inference limitations, the argument type of the predicate has to be provided explicitly. Example: </p><div class="fragment"><div class="line"><a class="code hl_define" href="include_2catch_8hpp.html#ac1354db6f3e9c1e0a8eda0eea7ff1f0a">REQUIRE_THAT</a>(<span class="stringliteral">&quot;Hello olleH&quot;</span>,</div>
<div class="line">             Predicate&lt;std::string&gt;(</div>
<div class="line">                 [] (std::string <span class="keyword">const</span>&amp; str) -&gt; <span class="keywordtype">bool</span> { <span class="keywordflow">return</span> str.front() == str.back(); },</div>
<div class="line">                 <span class="stringliteral">&quot;First and last character should be equal&quot;</span>)</div>
<div class="line">);</div>
</div><!-- fragment --><p>The second argument is an optional description of the predicate, and is used only during reporting of the result.</p>
<h2>Custom matchers</h2>
<p>It's easy to provide your own matchers to extend <a class="el" href="namespace_catch.html">Catch</a> or just to work with your own types.</p>
<p>You need to provide two things:</p><ol type="1">
<li><a class="el" href="struct_a.html">A</a> matcher class, derived from <code>Catch::MatcherBase&lt;T&gt;</code> - where <code>T</code> is the type being tested. The constructor takes and stores any arguments needed (e.g. something to compare against) and you must override two methods: <code>match()</code> and <code>describe()</code>.</li>
<li><a class="el" href="struct_a.html">A</a> simple builder function. This is what is actually called from the test code and allows overloading.</li>
</ol>
<p>Here's an example for asserting that an integer falls within a given range (note that it is all inline for the sake of keeping the example short):</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="comment">// The matcher class</span></div>
<div class="line"><span class="keyword">class </span>IntRange : <span class="keyword">public</span> <a class="code hl_struct" href="struct_catch_1_1_matchers_1_1_impl_1_1_matcher_base.html">Catch::MatcherBase</a>&lt;int&gt; {</div>
<div class="line">    <span class="keywordtype">int</span> m_begin, m_end;</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    IntRange( <span class="keywordtype">int</span> begin, <span class="keywordtype">int</span> end ) : m_begin( begin ), m_end( end ) {}</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Performs the test for this matcher</span></div>
<div class="line">    <span class="keywordtype">bool</span> <a class="code hl_function" href="struct_catch_1_1_matchers_1_1_impl_1_1_matcher_method.html#ae0920ff9e817acf08e1bb0cbcb044e30">match</a>( <span class="keywordtype">int</span> <span class="keyword">const</span>&amp; i )<span class="keyword"> const override </span>{</div>
<div class="line">        <span class="keywordflow">return</span> i &gt;= m_begin &amp;&amp; i &lt;= m_end;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Produces a string describing what this matcher does. It should</span></div>
<div class="line">    <span class="comment">// include any provided data (the begin/ end in this case) and</span></div>
<div class="line">    <span class="comment">// be written as if it were stating a fact (in the output it will be</span></div>
<div class="line">    <span class="comment">// preceded by the value under test).</span></div>
<div class="line">    <span class="keyword">virtual</span> std::string <a class="code hl_function" href="class_catch_1_1_matchers_1_1_impl_1_1_matcher_untyped_base.html#a91d3a907dbfcbb596077df24f6e11fe2">describe</a>()<span class="keyword"> const override </span>{</div>
<div class="line">        std::ostringstream <a class="code hl_function" href="namespace_xbyak_1_1util.html#a67cd5471fb751b186b53fdab6da7d3f7">ss</a>;</div>
<div class="line">        <a class="code hl_function" href="namespace_xbyak_1_1util.html#a67cd5471fb751b186b53fdab6da7d3f7">ss</a> &lt;&lt; <span class="stringliteral">&quot;is between &quot;</span> &lt;&lt; m_begin &lt;&lt; <span class="stringliteral">&quot; and &quot;</span> &lt;&lt; m_end;</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code hl_function" href="namespace_xbyak_1_1util.html#a67cd5471fb751b186b53fdab6da7d3f7">ss</a>.str();</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// The builder function</span></div>
<div class="line"><span class="keyword">inline</span> IntRange IsBetween( <span class="keywordtype">int</span> begin, <span class="keywordtype">int</span> end ) {</div>
<div class="line">    <span class="keywordflow">return</span> IntRange( begin, end );</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Usage</span></div>
<div class="line"><a class="code hl_define" href="include_2catch_8hpp.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(<span class="stringliteral">&quot;Integers are within a range&quot;</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_define" href="include_2catch_8hpp.html#a5b8c33c63e0804d4458e2c761370b75d">CHECK_THAT</a>( 3, IsBetween( 1, 10 ) );</div>
<div class="line">    <a class="code hl_define" href="include_2catch_8hpp.html#a5b8c33c63e0804d4458e2c761370b75d">CHECK_THAT</a>( 100, IsBetween( 1, 10 ) );</div>
<div class="line">}</div>
<div class="ttc" id="aclass_catch_1_1_matchers_1_1_impl_1_1_matcher_untyped_base_html_a91d3a907dbfcbb596077df24f6e11fe2"><div class="ttname"><a href="class_catch_1_1_matchers_1_1_impl_1_1_matcher_untyped_base.html#a91d3a907dbfcbb596077df24f6e11fe2">Catch::Matchers::Impl::MatcherUntypedBase::describe</a></div><div class="ttdeci">virtual std::string describe() const =0</div></div>
<div class="ttc" id="ainclude_2catch_8hpp_html_a5b8c33c63e0804d4458e2c761370b75d"><div class="ttname"><a href="include_2catch_8hpp.html#a5b8c33c63e0804d4458e2c761370b75d">CHECK_THAT</a></div><div class="ttdeci">#define CHECK_THAT(arg, matcher)</div><div class="ttdef"><b>Definition</b> <a href="include_2catch_8hpp_source.html#l00212">catch.hpp:212</a></div></div>
<div class="ttc" id="ainclude_2catch_8hpp_html_abd6e2aec703006b3da62cf7860c9808f"><div class="ttname"><a href="include_2catch_8hpp.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a></div><div class="ttdeci">#define TEST_CASE(...)</div><div class="ttdef"><b>Definition</b> <a href="include_2catch_8hpp_source.html#l00222">catch.hpp:222</a></div></div>
<div class="ttc" id="anamespace_xbyak_1_1util_html_a67cd5471fb751b186b53fdab6da7d3f7"><div class="ttname"><a href="namespace_xbyak_1_1util.html#a67cd5471fb751b186b53fdab6da7d3f7">Xbyak::util::ss</a></div><div class="ttdeci">static const Segment ss(Segment::ss)</div></div>
<div class="ttc" id="astruct_catch_1_1_matchers_1_1_impl_1_1_matcher_base_html"><div class="ttname"><a href="struct_catch_1_1_matchers_1_1_impl_1_1_matcher_base.html">Catch::Matchers::Impl::MatcherBase</a></div><div class="ttdef"><b>Definition</b> <a href="single__include_2catch2_2catch_8hpp_source.html#l02925">catch.hpp:2925</a></div></div>
<div class="ttc" id="astruct_catch_1_1_matchers_1_1_impl_1_1_matcher_method_html_ae0920ff9e817acf08e1bb0cbcb044e30"><div class="ttname"><a href="struct_catch_1_1_matchers_1_1_impl_1_1_matcher_method.html#ae0920ff9e817acf08e1bb0cbcb044e30">Catch::Matchers::Impl::MatcherMethod&lt; T &gt;::match</a></div><div class="ttdeci">virtual bool match(T const &amp;arg) const=0</div></div>
</div><!-- fragment --><p>Running this test gives the following in the console:</p>
<div class="fragment"><div class="line">/**/TestFile.cpp:123: FAILED:</div>
<div class="line">  CHECK_THAT( 100, IsBetween( 1, 10 ) )</div>
<div class="line">with expansion:</div>
<div class="line">  100 is between 1 and 10</div>
</div><!-- fragment --><hr  />
<p><a href="Readme.md#top">Home</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
