\doxysection{fc\+::crypto\+::r1\+::public\+\_\+key Class Reference}
\hypertarget{classfc_1_1crypto_1_1r1_1_1public__key}{}\label{classfc_1_1crypto_1_1r1_1_1public__key}\index{fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}}


contains only the public point of an elliptic curve key.  




{\ttfamily \#include $<$elliptic\+\_\+r1.\+hpp$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_a3c7a3d500fb1c8b1bae8737de9e91508}{public\+\_\+key}} ()
\item 
\mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_ad465eb997259c0040cc2912a6aea9258}{public\+\_\+key}} (const \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \&k)
\item 
\mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_a5d4c433f90ed504c7e22b5527fbaeb4d}{\texorpdfstring{$\sim$}{\string~}public\+\_\+key}} ()
\item 
bool \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_a0f96c3c73379b93dfad1bc60f63a5284}{verify}} (const \mbox{\hyperlink{classfc_1_1sha256}{fc\+::sha256}} \&\mbox{\hyperlink{namespacefc_a150ca4cd9c0318ca45dc0dc7df5d58b9}{digest}}, const \mbox{\hyperlink{namespacefc_1_1crypto_1_1r1_ad4867763f35fa04cfb558ce4a2445c15}{signature}} \&sig)
\item 
\mbox{\hyperlink{namespacefc_1_1crypto_1_1r1_a2bfc308262de40acfc2a5e7c725bbe3f}{public\+\_\+key\+\_\+data}} \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_a4d2870dcdd92e224a376e0284e2bacc6}{serialize}} () const
\item 
\mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_a18ba35da2c30240b690d704389f3287c}{operator public\+\_\+key\+\_\+data}} () const
\item 
\mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_aede3c7e373e9f477191639f616c403f4}{public\+\_\+key}} (const \mbox{\hyperlink{namespacefc_1_1crypto_1_1r1_a2bfc308262de40acfc2a5e7c725bbe3f}{public\+\_\+key\+\_\+data}} \&v)
\item 
\mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_acfd8d5240763fa3a93305af0ebbdc8e9}{public\+\_\+key}} (const \mbox{\hyperlink{namespacefc_1_1crypto_1_1r1_a7540ac6e81e7f7fab48c24636f0fb68d}{public\+\_\+key\+\_\+point\+\_\+data}} \&v)
\item 
\mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_a0bf76a0d48a64d28e4d7665fcaffdb59}{public\+\_\+key}} (const \mbox{\hyperlink{namespacefc_1_1crypto_1_1r1_ae05a9b8a3e71b719d56c0a87c491a8f6}{compact\+\_\+signature}} \&c, const \mbox{\hyperlink{classfc_1_1sha256}{fc\+::sha256}} \&\mbox{\hyperlink{namespacefc_a150ca4cd9c0318ca45dc0dc7df5d58b9}{digest}}, bool check\+\_\+canonical=true)
\item 
bool \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_ac0f1ebef9f38fb0a4527d0eafc51f178}{valid}} () const
\item 
\mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_a94cd99ba3a07ce08c9fbafd5ff173bd2}{mult}} (const \mbox{\hyperlink{classfc_1_1sha256}{fc\+::sha256}} \&offset)
\item 
\mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_a1264ad237e19a9987f2f5ee05d2d764e}{add}} (const \mbox{\hyperlink{classfc_1_1sha256}{fc\+::sha256}} \&offset) const
\item 
\mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_ade9e4fd26cc7065c7a56a5f0e76280f4}{public\+\_\+key}} (\mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \&\&pk)
\item 
\mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \& \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_a0e68e7bcb8df275d9e359ef601e36d98}{operator=}} (\mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \&\&pk)
\item 
\mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \& \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_a89646b7c6d9bdd654377c29d3e396398}{operator=}} (const \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \&pk)
\item 
std\+::string \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_a551039afa115c4e78d812945454dd1a8}{to\+\_\+base58}} () const
\begin{DoxyCompactList}\small\item\em Allows to convert current public key object into base58 number. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_a372d08fbcc8393eae7d41a831e2a8650}{from\+\_\+base58}} (const std\+::string \&b58)
\end{DoxyCompactItemize}
\doxysubsubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{yubihsm__pkcs11_8c_a5c230edcb923568000cb7982cf84dfce}{class}} \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_ae1389c6c19ec8630ce31970de2294915}{private\+\_\+key}}
\item 
bool \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_a4f2610bdec460bf2b0203684a9599da5}{operator==}} (const \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \&\mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}, const \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \&b)
\item 
bool \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_a5faa639eb95ed12c1be5d8ae65c7cb54}{operator!=}} (const \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \&\mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}, const \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \&b)
\item 
\mbox{\hyperlink{namespacefc_1_1crypto_1_1r1_ae05a9b8a3e71b719d56c0a87c491a8f6}{compact\+\_\+signature}} \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_a47467b9b02beb582f2f56a73576c75fd}{signature\+\_\+from\+\_\+ecdsa}} (const EC\+\_\+\+KEY \texorpdfstring{$\ast$}{*}key, const \mbox{\hyperlink{namespacefc_1_1crypto_1_1r1_a2bfc308262de40acfc2a5e7c725bbe3f}{public\+\_\+key\+\_\+data}} \&pub\+\_\+data, fc\+::ecdsa\+\_\+sig \&sig, const \mbox{\hyperlink{classfc_1_1sha256}{fc\+::sha256}} \&d)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{elliptic__r1_8hpp_source_l00032}{32}} of file \mbox{\hyperlink{elliptic__r1_8hpp_source}{elliptic\+\_\+r1.\+hpp}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classfc_1_1crypto_1_1r1_1_1public__key_a3c7a3d500fb1c8b1bae8737de9e91508}\index{fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}!public\_key@{public\_key}}
\index{public\_key@{public\_key}!fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}}
\doxysubsubsection{\texorpdfstring{public\_key()}{public\_key()}\hspace{0.1cm}{\footnotesize\ttfamily [1/6]}}
{\footnotesize\ttfamily \label{classfc_1_1crypto_1_1r1_1_1public__key_a3c7a3d500fb1c8b1bae8737de9e91508} 
fc\+::crypto\+::r1\+::public\+\_\+key\+::public\+\_\+key (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{elliptic__r1_8cpp_source_l00455}{455}} of file \mbox{\hyperlink{elliptic__r1_8cpp_source}{elliptic\+\_\+r1.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00456\ \ \ \ \ \{}
\DoxyCodeLine{00457\ \ \ \ \ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=322pt]{classfc_1_1crypto_1_1r1_1_1public__key_a3c7a3d500fb1c8b1bae8737de9e91508_icgraph}
\end{center}
\end{figure}
\Hypertarget{classfc_1_1crypto_1_1r1_1_1public__key_ad465eb997259c0040cc2912a6aea9258}\index{fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}!public\_key@{public\_key}}
\index{public\_key@{public\_key}!fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}}
\doxysubsubsection{\texorpdfstring{public\_key()}{public\_key()}\hspace{0.1cm}{\footnotesize\ttfamily [2/6]}}
{\footnotesize\ttfamily \label{classfc_1_1crypto_1_1r1_1_1public__key_ad465eb997259c0040cc2912a6aea9258} 
fc\+::crypto\+::r1\+::public\+\_\+key\+::public\+\_\+key (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \&}]{k}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{elliptic__r1_8cpp_source_l00573}{573}} of file \mbox{\hyperlink{elliptic__r1_8cpp_source}{elliptic\+\_\+r1.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00574\ \ \ \ :my(pk.my)}
\DoxyCodeLine{00575\ \ \ \ \{}
\DoxyCodeLine{00576\ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classfc_1_1crypto_1_1r1_1_1public__key_a5d4c433f90ed504c7e22b5527fbaeb4d}\index{fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}!````~public\_key@{\texorpdfstring{$\sim$}{\string~}public\_key}}
\index{````~public\_key@{\texorpdfstring{$\sim$}{\string~}public\_key}!fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}public\_key()}{\string~public\_key()}}
{\footnotesize\ttfamily \label{classfc_1_1crypto_1_1r1_1_1public__key_a5d4c433f90ed504c7e22b5527fbaeb4d} 
fc\+::crypto\+::r1\+::public\+\_\+key\+::\texorpdfstring{$\sim$}{\string~}public\+\_\+key (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{elliptic__r1_8cpp_source_l00458}{458}} of file \mbox{\hyperlink{elliptic__r1_8cpp_source}{elliptic\+\_\+r1.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00459\ \ \ \ \ \{}
\DoxyCodeLine{00460\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classfc_1_1crypto_1_1r1_1_1public__key_aede3c7e373e9f477191639f616c403f4}\index{fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}!public\_key@{public\_key}}
\index{public\_key@{public\_key}!fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}}
\doxysubsubsection{\texorpdfstring{public\_key()}{public\_key()}\hspace{0.1cm}{\footnotesize\ttfamily [3/6]}}
{\footnotesize\ttfamily \label{classfc_1_1crypto_1_1r1_1_1public__key_aede3c7e373e9f477191639f616c403f4} 
fc\+::crypto\+::r1\+::public\+\_\+key\+::public\+\_\+key (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacefc_1_1crypto_1_1r1_a2bfc308262de40acfc2a5e7c725bbe3f}{public\+\_\+key\+\_\+data}} \&}]{v}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{elliptic__r1_8cpp_source_l00474}{474}} of file \mbox{\hyperlink{elliptic__r1_8cpp_source}{elliptic\+\_\+r1.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00475\ \ \ \ \ \{}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ front\ =\ \&dat.data[0];}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ *front\ ==\ 0\ )\{\}}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \ my-\/>\_key\ =\ EC\_KEY\_new\_by\_curve\_name(\ NID\_X9\_62\_prime256v1\ );}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \ my-\/>\_key\ =\ o2i\_ECPublicKey(\ \&my-\/>\_key,\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}**)\&front,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{namespacefc_1_1crypto_1_1r1_a2bfc308262de40acfc2a5e7c725bbe3f}{public\_key\_data}})\ );}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !my-\/>\_key\ )}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exception_8hpp_a7590ddac4f181b661c3eeaf5feccc6ac}{FC\_THROW\_EXCEPTION}}(\ exception,\ \textcolor{stringliteral}{"{}error\ decoding\ public\ key"{}},\ (\textcolor{stringliteral}{"{}s"{}},\ ERR\_error\_string(\ ERR\_get\_error(),\ \textcolor{keyword}{nullptr})\ )\ );}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00487\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classfc_1_1crypto_1_1r1_1_1public__key_acfd8d5240763fa3a93305af0ebbdc8e9}\index{fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}!public\_key@{public\_key}}
\index{public\_key@{public\_key}!fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}}
\doxysubsubsection{\texorpdfstring{public\_key()}{public\_key()}\hspace{0.1cm}{\footnotesize\ttfamily [4/6]}}
{\footnotesize\ttfamily \label{classfc_1_1crypto_1_1r1_1_1public__key_acfd8d5240763fa3a93305af0ebbdc8e9} 
fc\+::crypto\+::r1\+::public\+\_\+key\+::public\+\_\+key (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacefc_1_1crypto_1_1r1_a7540ac6e81e7f7fab48c24636f0fb68d}{public\+\_\+key\+\_\+point\+\_\+data}} \&}]{v}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{elliptic__r1_8cpp_source_l00461}{461}} of file \mbox{\hyperlink{elliptic__r1_8cpp_source}{elliptic\+\_\+r1.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00462\ \ \ \ \ \{}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ front\ =\ \&dat.data[0];}
\DoxyCodeLine{00464\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ *front\ ==\ 0\ )\{\}}
\DoxyCodeLine{00465\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ \ my-\/>\_key\ =\ o2i\_ECPublicKey(\ \&my-\/>\_key,\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}**)\&front,\ \textcolor{keyword}{sizeof}(dat)\ \ );}
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !my-\/>\_key\ )}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exception_8hpp_a7590ddac4f181b661c3eeaf5feccc6ac}{FC\_THROW\_EXCEPTION}}(\ exception,\ \textcolor{stringliteral}{"{}error\ decoding\ public\ key"{}},\ (\textcolor{stringliteral}{"{}s"{}},\ ERR\_error\_string(\ ERR\_get\_error(),\ \textcolor{keyword}{nullptr})\ )\ );}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00473\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classfc_1_1crypto_1_1r1_1_1public__key_a0bf76a0d48a64d28e4d7665fcaffdb59}\index{fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}!public\_key@{public\_key}}
\index{public\_key@{public\_key}!fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}}
\doxysubsubsection{\texorpdfstring{public\_key()}{public\_key()}\hspace{0.1cm}{\footnotesize\ttfamily [5/6]}}
{\footnotesize\ttfamily \label{classfc_1_1crypto_1_1r1_1_1public__key_a0bf76a0d48a64d28e4d7665fcaffdb59} 
fc\+::crypto\+::r1\+::public\+\_\+key\+::public\+\_\+key (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacefc_1_1crypto_1_1r1_ae05a9b8a3e71b719d56c0a87c491a8f6}{compact\+\_\+signature}} \&}]{c}{, }\item[{const \mbox{\hyperlink{classfc_1_1sha256}{fc\+::sha256}} \&}]{digest}{, }\item[{bool}]{check\+\_\+canonical}{ = {\ttfamily true}}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{elliptic__r1_8cpp_source_l00516}{516}} of file \mbox{\hyperlink{elliptic__r1_8cpp_source}{elliptic\+\_\+r1.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00517\ \ \ \ \ \{}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ nV\ =\ c.data[0];}
\DoxyCodeLine{00519\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nV<27\ ||\ nV>=35)}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exception_8hpp_a7590ddac4f181b661c3eeaf5feccc6ac}{FC\_THROW\_EXCEPTION}}(\ exception,\ \textcolor{stringliteral}{"{}unable\ to\ reconstruct\ public\ key\ from\ signature"{}}\ );}
\DoxyCodeLine{00521\ }
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ ecdsa\_sig\ sig\ =\ ECDSA\_SIG\_new();}
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2fc_2crypto_2bigint_8hpp_a62125ea4e1d748a4a9c1aed9766f451a}{BIGNUM}}\ *\mbox{\hyperlink{bn_8cpp_af0a5201ca8846f05f25435b41d7f39f7}{r}}\ =\ BN\_new(),\ *\mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}\ =\ BN\_new();}
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ BN\_bin2bn(\&c.data[1],32,\mbox{\hyperlink{bn_8cpp_af0a5201ca8846f05f25435b41d7f39f7}{r}});}
\DoxyCodeLine{00525\ \ \ \ \ \ \ \ \ BN\_bin2bn(\&c.data[33],32,\mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}});}
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{openssl-compat_8c_ae2f28de42b8345422b7ac3b28f330b9b}{ECDSA\_SIG\_set0}}(sig,\ \mbox{\hyperlink{bn_8cpp_af0a5201ca8846f05f25435b41d7f39f7}{r}},\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}});}
\DoxyCodeLine{00527\ }
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ my-\/>\_key\ =\ EC\_KEY\_new\_by\_curve\_name(NID\_X9\_62\_prime256v1);}
\DoxyCodeLine{00529\ }
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ EC\_GROUP*\ \mbox{\hyperlink{namespaceupload_a9d33d66de17175dced88ffe95f079226}{group}}\ =\ EC\_KEY\_get0\_group(my-\/>\_key);}
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \ ssl\_bignum\ order,\ halforder;}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \ \ EC\_GROUP\_get\_order(group,\ order,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ BN\_rshift1(halforder,\ order);}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(BN\_cmp(\mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}},\ halforder)\ >\ 0)}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exception_8hpp_a7590ddac4f181b661c3eeaf5feccc6ac}{FC\_THROW\_EXCEPTION}}(\ exception,\ \textcolor{stringliteral}{"{}invalid\ high\ s-\/value\ encountered\ in\ r1\ signature"{}}\ );}
\DoxyCodeLine{00536\ }
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nV\ >=\ 31)}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \ \ \ \ EC\_KEY\_set\_conv\_form(\ my-\/>\_key,\ POINT\_CONVERSION\_COMPRESSED\ );}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \ \ \ \ nV\ -\/=\ 4;}
\DoxyCodeLine{00541\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ fprintf(\ stderr,\ "{}compressed\(\backslash\)n"{}\ );}}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00543\ }
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacefc_1_1crypto_1_1r1_a2f84ba4f539e39bff64fd02cc1ca326e}{ECDSA\_SIG\_recover\_key\_GFp}}(my-\/>\_key,\ sig,\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)\&\mbox{\hyperlink{namespacefc_a150ca4cd9c0318ca45dc0dc7df5d58b9}{digest}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{namespacefc_a150ca4cd9c0318ca45dc0dc7df5d58b9}{digest}}),\ nV\ -\/\ 27,\ 0)\ ==\ 1)}
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exception_8hpp_a7590ddac4f181b661c3eeaf5feccc6ac}{FC\_THROW\_EXCEPTION}}(\ exception,\ \textcolor{stringliteral}{"{}unable\ to\ reconstruct\ public\ key\ from\ signature"{}}\ );}
\DoxyCodeLine{00547\ \ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfc_1_1crypto_1_1r1_1_1public__key_a0bf76a0d48a64d28e4d7665fcaffdb59_cgraph}
\end{center}
\end{figure}
\Hypertarget{classfc_1_1crypto_1_1r1_1_1public__key_ade9e4fd26cc7065c7a56a5f0e76280f4}\index{fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}!public\_key@{public\_key}}
\index{public\_key@{public\_key}!fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}}
\doxysubsubsection{\texorpdfstring{public\_key()}{public\_key()}\hspace{0.1cm}{\footnotesize\ttfamily [6/6]}}
{\footnotesize\ttfamily \label{classfc_1_1crypto_1_1r1_1_1public__key_ade9e4fd26cc7065c7a56a5f0e76280f4} 
fc\+::crypto\+::r1\+::public\+\_\+key\+::public\+\_\+key (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \&\&}]{pk}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{elliptic__r1_8cpp_source_l00577}{577}} of file \mbox{\hyperlink{elliptic__r1_8cpp_source}{elliptic\+\_\+r1.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00578\ \ \ \ :my(\ fc::move(\ pk.my)\ )}
\DoxyCodeLine{00579\ \ \ \ \{}
\DoxyCodeLine{00580\ \ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classfc_1_1crypto_1_1r1_1_1public__key_a1264ad237e19a9987f2f5ee05d2d764e}\index{fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}!add@{add}}
\index{add@{add}!fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}}
\doxysubsubsection{\texorpdfstring{add()}{add()}}
{\footnotesize\ttfamily \label{classfc_1_1crypto_1_1r1_1_1public__key_a1264ad237e19a9987f2f5ee05d2d764e} 
\mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} fc\+::crypto\+::r1\+::public\+\_\+key\+::add (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classfc_1_1sha256}{fc\+::sha256}} \&}]{offset}{}\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{elliptic__em__impl__pub_8cpp_source_l00193}{193}} of file \mbox{\hyperlink{elliptic__em__impl__pub_8cpp_source}{elliptic\+\_\+em\+\_\+impl\+\_\+pub.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00194\ \ \ \ \ \{}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ ec\_group\ \mbox{\hyperlink{namespaceupload_a9d33d66de17175dced88ffe95f079226}{group}}(EC\_GROUP\_new\_by\_curve\_name(NID\_secp256k1));}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ bn\_ctx\ ctx(BN\_CTX\_new());}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1bigint}{fc::bigint}}\ digest\_bi(\ (\textcolor{keywordtype}{char}*)\&\mbox{\hyperlink{namespacefc_a150ca4cd9c0318ca45dc0dc7df5d58b9}{digest}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{namespacefc_a150ca4cd9c0318ca45dc0dc7df5d58b9}{digest}})\ );}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ ssl\_bignum\ order;}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ EC\_GROUP\_get\_order(group,\ order,\ ctx);}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ digest\_bi\ >\ \mbox{\hyperlink{classfc_1_1bigint}{fc::bigint}}(order)\ )}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exception_8hpp_a7590ddac4f181b661c3eeaf5feccc6ac}{FC\_THROW\_EXCEPTION}}(\ exception,\ \textcolor{stringliteral}{"{}digest\ >\ group\ order"{}}\ );}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_a3c7a3d500fb1c8b1bae8737de9e91508}{public\_key}}\ digest\_key\ =\ \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1private__key_abed020ddf6cc239edccce96dbbdb4238}{private\_key::regenerate}}(\mbox{\hyperlink{namespacefc_a150ca4cd9c0318ca45dc0dc7df5d58b9}{digest}}).\mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1private__key_a99a8502bdd1abc670c779247d606b671}{get\_public\_key}}();}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ EC\_POINT*\ digest\_point\ \ \ =\ EC\_KEY\_get0\_public\_key(\ digest\_key.my-\/>\_key\ );}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ get\ point\ from\ this\ public\ key}}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ EC\_POINT*\ master\_pub\ \ \ =\ EC\_KEY\_get0\_public\_key(\ my-\/>\_key\ );}
\DoxyCodeLine{00214\ }
\DoxyCodeLine{00215\ \textcolor{comment}{//\ \ \ \ \ \ \ \ ssl\_bignum\ z;}}
\DoxyCodeLine{00216\ \textcolor{comment}{//\ \ \ \ \ \ \ \ BN\_bin2bn((unsigned\ char*)\&digest,\ sizeof(digest),\ z);}}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ multiply\ by\ digest}}
\DoxyCodeLine{00219\ \textcolor{comment}{//\ \ \ \ \ \ \ \ ssl\_bignum\ one;}}
\DoxyCodeLine{00220\ \textcolor{comment}{//\ \ \ \ \ \ \ \ BN\_one(one);}}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ ec\_point\ result(EC\_POINT\_new(group));}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ EC\_POINT\_add(group,\ result,\ digest\_point,\ master\_pub,\ ctx);}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (EC\_POINT\_is\_at\_infinity(group,\ result))}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exception_8hpp_a7590ddac4f181b661c3eeaf5feccc6ac}{FC\_THROW\_EXCEPTION}}(\ exception,\ \textcolor{stringliteral}{"{}point\ at\ \ infinity"{}}\ );}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_a3c7a3d500fb1c8b1bae8737de9e91508}{public\_key}}\ rtn;}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ rtn.my-\/>\_key\ =\ EC\_KEY\_new\_by\_curve\_name(\ NID\_secp256k1\ );}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ EC\_KEY\_set\_public\_key(rtn.my-\/>\_key,result);}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rtn;}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \}\ \mbox{\hyperlink{exception_8hpp_af3731d6e3beb140d9e652adf7a18113b}{FC\_RETHROW\_EXCEPTIONS}}(\ \mbox{\hyperlink{environment_8hpp_a398527b3e9e358c345c5047b16871957}{debug}},\ \textcolor{stringliteral}{"{}digest:\ \$\{digest\}"{}},\ (\textcolor{stringliteral}{"{}digest"{}},\mbox{\hyperlink{namespacefc_a150ca4cd9c0318ca45dc0dc7df5d58b9}{digest}})\ );}
\DoxyCodeLine{00236\ \ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfc_1_1crypto_1_1r1_1_1public__key_a1264ad237e19a9987f2f5ee05d2d764e_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=345pt]{classfc_1_1crypto_1_1r1_1_1public__key_a1264ad237e19a9987f2f5ee05d2d764e_icgraph}
\end{center}
\end{figure}
\Hypertarget{classfc_1_1crypto_1_1r1_1_1public__key_a372d08fbcc8393eae7d41a831e2a8650}\index{fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}!from\_base58@{from\_base58}}
\index{from\_base58@{from\_base58}!fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}}
\doxysubsubsection{\texorpdfstring{from\_base58()}{from\_base58()}}
{\footnotesize\ttfamily \label{classfc_1_1crypto_1_1r1_1_1public__key_a372d08fbcc8393eae7d41a831e2a8650} 
\mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} fc\+::crypto\+::r1\+::public\+\_\+key\+::from\+\_\+base58 (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{b58}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line \mbox{\hyperlink{elliptic__r1_8cpp_source_l00318}{318}} of file \mbox{\hyperlink{elliptic__r1_8cpp_source}{elliptic\+\_\+r1.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00319\ \ \ \ \ \{}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ array<char,\ 37>\ data;}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}\ =\ \mbox{\hyperlink{namespacefc_ab9aa48ceb035b5fc4b0ff9e48b40bc1d}{fc::from\_base58}}(b58,\ (\textcolor{keywordtype}{char}*)\&data,\ \textcolor{keyword}{sizeof}(data)\ );}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exception_8hpp_abed525eeff3ae581be7e4e2fcd3b7bf4}{FC\_ASSERT}}(\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}\ ==\ \textcolor{keyword}{sizeof}(data)\ );}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacefc_1_1crypto_1_1r1_a2bfc308262de40acfc2a5e7c725bbe3f}{public\_key\_data}}\ \mbox{\hyperlink{yubico__otp_8c_a9246c20bb98ad2b4c60313c053c70f08}{key}};}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ check\ =\ (\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}})\mbox{\hyperlink{classfc_1_1sha256_a474784de7d6213b855abd7e952df5e36}{sha256::hash}}(data.data,\ \textcolor{keyword}{sizeof}(key)).\mbox{\hyperlink{classfc_1_1sha256_ac933820516182c134a6473227db0e7da}{\_hash}}[0];}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exception_8hpp_abed525eeff3ae581be7e4e2fcd3b7bf4}{FC\_ASSERT}}(\ memcmp(\ (\textcolor{keywordtype}{char}*)\&check,\ data.data\ +\ \textcolor{keyword}{sizeof}(key),\ \textcolor{keyword}{sizeof}(check)\ )\ ==\ 0\ );}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_ae785d5badbf1f08b491af31f32a135a1}{memcpy}}(\ (\textcolor{keywordtype}{char}*)key.data,\ data.data,\ \textcolor{keyword}{sizeof}(key)\ );}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_a3c7a3d500fb1c8b1bae8737de9e91508}{public\_key}}(key);}
\DoxyCodeLine{00329\ \ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfc_1_1crypto_1_1r1_1_1public__key_a372d08fbcc8393eae7d41a831e2a8650_cgraph}
\end{center}
\end{figure}
\Hypertarget{classfc_1_1crypto_1_1r1_1_1public__key_a94cd99ba3a07ce08c9fbafd5ff173bd2}\index{fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}!mult@{mult}}
\index{mult@{mult}!fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}}
\doxysubsubsection{\texorpdfstring{mult()}{mult()}}
{\footnotesize\ttfamily \label{classfc_1_1crypto_1_1r1_1_1public__key_a94cd99ba3a07ce08c9fbafd5ff173bd2} 
\mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} fc\+::crypto\+::r1\+::public\+\_\+key\+::mult (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classfc_1_1sha256}{fc\+::sha256}} \&}]{offset}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{elliptic__r1_8cpp_source_l00235}{235}} of file \mbox{\hyperlink{elliptic__r1_8cpp_source}{elliptic\+\_\+r1.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00236\ \ \ \ \ \{}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ get\ point\ from\ this\ public\ key}}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ EC\_POINT*\ master\_pub\ \ \ =\ EC\_KEY\_get0\_public\_key(\ my-\/>\_key\ );}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ ec\_group\ \mbox{\hyperlink{namespaceupload_a9d33d66de17175dced88ffe95f079226}{group}}(EC\_GROUP\_new\_by\_curve\_name(NID\_X9\_62\_prime256v1));}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ ssl\_bignum\ z;}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ BN\_bin2bn((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)\&\mbox{\hyperlink{namespacefc_a150ca4cd9c0318ca45dc0dc7df5d58b9}{digest}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{namespacefc_a150ca4cd9c0318ca45dc0dc7df5d58b9}{digest}}),\ z);}
\DoxyCodeLine{00243\ }
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ multiply\ by\ digest}}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ ssl\_bignum\ \mbox{\hyperlink{030-_asn-_require-_check_8cpp_a94c3399fbf75a3c798e148d5238ad242}{one}};}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ BN\_one(\mbox{\hyperlink{030-_asn-_require-_check_8cpp_a94c3399fbf75a3c798e148d5238ad242}{one}});}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ bn\_ctx\ ctx(BN\_CTX\_new());}
\DoxyCodeLine{00248\ }
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ ec\_point\ result(EC\_POINT\_new(group));}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ EC\_POINT\_mul(group,\ result,\ z,\ master\_pub,\ \mbox{\hyperlink{030-_asn-_require-_check_8cpp_a94c3399fbf75a3c798e148d5238ad242}{one}},\ ctx);}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_a3c7a3d500fb1c8b1bae8737de9e91508}{public\_key}}\ rtn;}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ rtn.my-\/>\_key\ =\ EC\_KEY\_new\_by\_curve\_name(\ NID\_X9\_62\_prime256v1\ );}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ EC\_KEY\_set\_public\_key(rtn.my-\/>\_key,result);}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rtn;}
\DoxyCodeLine{00257\ \ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfc_1_1crypto_1_1r1_1_1public__key_a94cd99ba3a07ce08c9fbafd5ff173bd2_cgraph}
\end{center}
\end{figure}
\Hypertarget{classfc_1_1crypto_1_1r1_1_1public__key_a18ba35da2c30240b690d704389f3287c}\index{fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}!operator public\_key\_data@{operator public\_key\_data}}
\index{operator public\_key\_data@{operator public\_key\_data}!fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}}
\doxysubsubsection{\texorpdfstring{operator public\_key\_data()}{operator public\_key\_data()}}
{\footnotesize\ttfamily \label{classfc_1_1crypto_1_1r1_1_1public__key_a18ba35da2c30240b690d704389f3287c} 
fc\+::crypto\+::r1\+::public\+\_\+key\+::operator \mbox{\hyperlink{namespacefc_1_1crypto_1_1r1_a2bfc308262de40acfc2a5e7c725bbe3f}{public\+\_\+key\+\_\+data}} (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{elliptic__r1_8hpp_source_l00041}{41}} of file \mbox{\hyperlink{elliptic__r1_8hpp_source}{elliptic\+\_\+r1.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00041\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_a4d2870dcdd92e224a376e0284e2bacc6}{serialize}}();\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=326pt]{classfc_1_1crypto_1_1r1_1_1public__key_a18ba35da2c30240b690d704389f3287c_cgraph}
\end{center}
\end{figure}
\Hypertarget{classfc_1_1crypto_1_1r1_1_1public__key_a89646b7c6d9bdd654377c29d3e396398}\index{fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}!operator=@{operator=}}
\index{operator=@{operator=}!fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classfc_1_1crypto_1_1r1_1_1public__key_a89646b7c6d9bdd654377c29d3e396398} 
\mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \& fc\+::crypto\+::r1\+::public\+\_\+key\+::operator= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \&}]{pk}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{elliptic__r1_8cpp_source_l00600}{600}} of file \mbox{\hyperlink{elliptic__r1_8cpp_source}{elliptic\+\_\+r1.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00601\ \ \ \ \{}
\DoxyCodeLine{00602\ \ \ \ \ \ \textcolor{keywordflow}{if}(\ my-\/>\_key\ )}
\DoxyCodeLine{00603\ \ \ \ \ \ \{}
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ EC\_KEY\_free(my-\/>\_key);}
\DoxyCodeLine{00605\ \ \ \ \ \ \}}
\DoxyCodeLine{00606\ \ \ \ \ \ my-\/>\_key\ =\ EC\_KEY\_dup(pk.my-\/>\_key);}
\DoxyCodeLine{00607\ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00608\ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classfc_1_1crypto_1_1r1_1_1public__key_a0e68e7bcb8df275d9e359ef601e36d98}\index{fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}!operator=@{operator=}}
\index{operator=@{operator=}!fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classfc_1_1crypto_1_1r1_1_1public__key_a0e68e7bcb8df275d9e359ef601e36d98} 
\mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \& fc\+::crypto\+::r1\+::public\+\_\+key\+::operator= (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \&\&}]{pk}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{elliptic__r1_8cpp_source_l00590}{590}} of file \mbox{\hyperlink{elliptic__r1_8cpp_source}{elliptic\+\_\+r1.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00591\ \ \ \ \{}
\DoxyCodeLine{00592\ \ \ \ \ \ \textcolor{keywordflow}{if}(\ my-\/>\_key\ )}
\DoxyCodeLine{00593\ \ \ \ \ \ \{}
\DoxyCodeLine{00594\ \ \ \ \ \ \ \ EC\_KEY\_free(my-\/>\_key);}
\DoxyCodeLine{00595\ \ \ \ \ \ \}}
\DoxyCodeLine{00596\ \ \ \ \ \ my-\/>\_key\ =\ pk.my-\/>\_key;}
\DoxyCodeLine{00597\ \ \ \ \ \ pk.my-\/>\_key\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00598\ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00599\ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classfc_1_1crypto_1_1r1_1_1public__key_a4d2870dcdd92e224a376e0284e2bacc6}\index{fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}!serialize@{serialize}}
\index{serialize@{serialize}!fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}}
\doxysubsubsection{\texorpdfstring{serialize()}{serialize()}}
{\footnotesize\ttfamily \label{classfc_1_1crypto_1_1r1_1_1public__key_a4d2870dcdd92e224a376e0284e2bacc6} 
\mbox{\hyperlink{namespacefc_1_1crypto_1_1r1_a2bfc308262de40acfc2a5e7c725bbe3f}{public\+\_\+key\+\_\+data}} fc\+::crypto\+::r1\+::public\+\_\+key\+::serialize (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{elliptic__r1_8cpp_source_l00438}{438}} of file \mbox{\hyperlink{elliptic__r1_8cpp_source}{elliptic\+\_\+r1.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00439\ \ \ \ \ \{}
\DoxyCodeLine{00440\ \ \ \ \ \ \ \mbox{\hyperlink{namespacefc_1_1crypto_1_1r1_a2bfc308262de40acfc2a5e7c725bbe3f}{public\_key\_data}}\ dat;}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !my-\/>\_key\ )\ \textcolor{keywordflow}{return}\ dat;}
\DoxyCodeLine{00442\ \ \ \ \ \ \ EC\_KEY\_set\_conv\_form(\ my-\/>\_key,\ POINT\_CONVERSION\_COMPRESSED\ );}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \textcolor{comment}{/*size\_t\ nbytes\ =\ i2o\_ECPublicKey(\ my-\/>\_key,\ nullptr\ );\ */}}
\DoxyCodeLine{00444\ \ \ \ \ \ \ \textcolor{comment}{/*FC\_ASSERT(\ nbytes\ ==\ 33\ )*/}}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \textcolor{keywordtype}{char}*\ front\ =\ \&dat.data[0];}
\DoxyCodeLine{00446\ \ \ \ \ \ \ i2o\_ECPublicKey(\ my-\/>\_key,\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}**)\&front\ \ );}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ dat;}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00449\ \textcolor{comment}{\ \ \ \ \ \ \ EC\_POINT*\ pub\ \ \ =\ EC\_KEY\_get0\_public\_key(\ my-\/>\_key\ );}}
\DoxyCodeLine{00450\ \textcolor{comment}{\ \ \ \ \ \ \ EC\_GROUP*\ group\ =\ EC\_KEY\_get0\_group(\ my-\/>\_key\ );}}
\DoxyCodeLine{00451\ \textcolor{comment}{\ \ \ \ \ \ \ EC\_POINT\_get\_affine\_coordinates\_GFp(\ group,\ pub,\ self.my-\/>\_pub\_x.get(),\ self.my-\/>\_pub\_y.get(),\ nullptr\ );}}
\DoxyCodeLine{00452\ \textcolor{comment}{\ \ \ \ \ \ \ */}}
\DoxyCodeLine{00453\ \ \ \ \ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=339pt]{classfc_1_1crypto_1_1r1_1_1public__key_a4d2870dcdd92e224a376e0284e2bacc6_icgraph}
\end{center}
\end{figure}
\Hypertarget{classfc_1_1crypto_1_1r1_1_1public__key_a551039afa115c4e78d812945454dd1a8}\index{fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}!to\_base58@{to\_base58}}
\index{to\_base58@{to\_base58}!fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}}
\doxysubsubsection{\texorpdfstring{to\_base58()}{to\_base58()}}
{\footnotesize\ttfamily \label{classfc_1_1crypto_1_1r1_1_1public__key_a551039afa115c4e78d812945454dd1a8} 
std\+::string fc\+::crypto\+::r1\+::public\+\_\+key\+::to\+\_\+base58 (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{elliptic__r1_8cpp_source_l00307}{307}} of file \mbox{\hyperlink{elliptic__r1_8cpp_source}{elliptic\+\_\+r1.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00308\ \ \ \ \ \{}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \mbox{\hyperlink{namespacefc_1_1crypto_1_1r1_a2bfc308262de40acfc2a5e7c725bbe3f}{public\_key\_data}}\ key\ =\ \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_a4d2870dcdd92e224a376e0284e2bacc6}{serialize}}();}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ check\ =\ (\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}})\mbox{\hyperlink{classfc_1_1sha256_a474784de7d6213b855abd7e952df5e36}{sha256::hash}}(key.data,\ \textcolor{keyword}{sizeof}(key)).\mbox{\hyperlink{classfc_1_1sha256_ac933820516182c134a6473227db0e7da}{\_hash}}[0];}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{yubico__otp_8c_a9246c20bb98ad2b4c60313c053c70f08}{key}})\ +\ \textcolor{keyword}{sizeof}(check)\ ==\ 37,\ \textcolor{stringliteral}{"{}"{}});\ \textcolor{comment}{//\ hack\ around\ gcc\ bug:\ key.size()\ should\ be\ constexpr,\ but\ isn't}}
\DoxyCodeLine{00312\ \ \ \ \ \ \ array<char,\ 37>\ data;}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_ae785d5badbf1f08b491af31f32a135a1}{memcpy}}(data.data,\ key.begin(),\ key.size());}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_ae785d5badbf1f08b491af31f32a135a1}{memcpy}}(data.begin()\ +\ key.size(),\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)\&check,\ \textcolor{keyword}{sizeof}(check));}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacefc_a0dd6c1e5792e0823aa1987e06513a4ce}{fc::to\_base58}}(data.begin(),\ data.size(),\ \mbox{\hyperlink{classfc_1_1optional__delegate}{fc::yield\_function\_t}}());}
\DoxyCodeLine{00316\ \ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfc_1_1crypto_1_1r1_1_1public__key_a551039afa115c4e78d812945454dd1a8_cgraph}
\end{center}
\end{figure}
\Hypertarget{classfc_1_1crypto_1_1r1_1_1public__key_ac0f1ebef9f38fb0a4527d0eafc51f178}\index{fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}!valid@{valid}}
\index{valid@{valid}!fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}}
\doxysubsubsection{\texorpdfstring{valid()}{valid()}}
{\footnotesize\ttfamily \label{classfc_1_1crypto_1_1r1_1_1public__key_ac0f1ebef9f38fb0a4527d0eafc51f178} 
bool fc\+::crypto\+::r1\+::public\+\_\+key\+::valid (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{elliptic__r1_8cpp_source_l00258}{258}} of file \mbox{\hyperlink{elliptic__r1_8cpp_source}{elliptic\+\_\+r1.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00259\ \ \ \ \ \{}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ my-\/>\_key\ !=\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00261\ \ \ \ \ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=322pt]{classfc_1_1crypto_1_1r1_1_1public__key_ac0f1ebef9f38fb0a4527d0eafc51f178_icgraph}
\end{center}
\end{figure}
\Hypertarget{classfc_1_1crypto_1_1r1_1_1public__key_a0f96c3c73379b93dfad1bc60f63a5284}\index{fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}!verify@{verify}}
\index{verify@{verify}!fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}}
\doxysubsubsection{\texorpdfstring{verify()}{verify()}}
{\footnotesize\ttfamily \label{classfc_1_1crypto_1_1r1_1_1public__key_a0f96c3c73379b93dfad1bc60f63a5284} 
bool fc\+::crypto\+::r1\+::public\+\_\+key\+::verify (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classfc_1_1sha256}{fc\+::sha256}} \&}]{digest}{, }\item[{const \mbox{\hyperlink{namespacefc_1_1crypto_1_1r1_ad4867763f35fa04cfb558ce4a2445c15}{signature}} \&}]{sig}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{elliptic__r1_8cpp_source_l00433}{433}} of file \mbox{\hyperlink{elliptic__r1_8cpp_source}{elliptic\+\_\+r1.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00434\ \ \ \ \ \{}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1\ ==\ ECDSA\_verify(\ 0,\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)\&\mbox{\hyperlink{namespacefc_a150ca4cd9c0318ca45dc0dc7df5d58b9}{digest}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{namespacefc_a150ca4cd9c0318ca45dc0dc7df5d58b9}{digest}}),\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)\&sig,\ \textcolor{keyword}{sizeof}(sig),\ my-\/>\_key\ );}
\DoxyCodeLine{00436\ \ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfc_1_1crypto_1_1r1_1_1public__key_a0f96c3c73379b93dfad1bc60f63a5284_cgraph}
\end{center}
\end{figure}


\doxysubsection{Friends And Related Symbol Documentation}
\Hypertarget{classfc_1_1crypto_1_1r1_1_1public__key_a5faa639eb95ed12c1be5d8ae65c7cb54}\index{fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}!operator"!=@{operator"!=}}
\index{operator"!=@{operator"!=}!fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}}
\doxysubsubsection{\texorpdfstring{operator"!=}{operator!=}}
{\footnotesize\ttfamily \label{classfc_1_1crypto_1_1r1_1_1public__key_a5faa639eb95ed12c1be5d8ae65c7cb54} 
bool \mbox{\hyperlink{namespacefc_a40c368ac88294ae47b064cad937fdbf6}{operator!}}= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \&}]{a}{, }\item[{const \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \&}]{b}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [friend]}}



Definition at line \mbox{\hyperlink{elliptic__r1_8hpp_source_l00060}{60}} of file \mbox{\hyperlink{elliptic__r1_8hpp_source}{elliptic\+\_\+r1.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.serialize()\ !=\ b.serialize();}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classfc_1_1crypto_1_1r1_1_1public__key_a4f2610bdec460bf2b0203684a9599da5}\index{fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}!operator==@{operator==}}
\index{operator==@{operator==}!fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}}
\doxysubsubsection{\texorpdfstring{operator==}{operator==}}
{\footnotesize\ttfamily \label{classfc_1_1crypto_1_1r1_1_1public__key_a4f2610bdec460bf2b0203684a9599da5} 
bool operator== (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \&}]{a}{, }\item[{const \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key}{public\+\_\+key}} \&}]{b}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [friend]}}



Definition at line \mbox{\hyperlink{elliptic__r1_8hpp_source_l00056}{56}} of file \mbox{\hyperlink{elliptic__r1_8hpp_source}{elliptic\+\_\+r1.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}.serialize()\ ==\ b.serialize();}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classfc_1_1crypto_1_1r1_1_1public__key_ae1389c6c19ec8630ce31970de2294915}\index{fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}!private\_key@{private\_key}}
\index{private\_key@{private\_key}!fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}}
\doxysubsubsection{\texorpdfstring{private\_key}{private\_key}}
{\footnotesize\ttfamily \label{classfc_1_1crypto_1_1r1_1_1public__key_ae1389c6c19ec8630ce31970de2294915} 
friend \mbox{\hyperlink{yubihsm__pkcs11_8c_a5c230edcb923568000cb7982cf84dfce}{class}} \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1private__key}{private\+\_\+key}}\hspace{0.3cm}{\ttfamily [friend]}}



Definition at line \mbox{\hyperlink{elliptic__r1_8hpp_source_l00070}{70}} of file \mbox{\hyperlink{elliptic__r1_8hpp_source}{elliptic\+\_\+r1.\+hpp}}.

\Hypertarget{classfc_1_1crypto_1_1r1_1_1public__key_a47467b9b02beb582f2f56a73576c75fd}\index{fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}!signature\_from\_ecdsa@{signature\_from\_ecdsa}}
\index{signature\_from\_ecdsa@{signature\_from\_ecdsa}!fc::crypto::r1::public\_key@{fc::crypto::r1::public\_key}}
\doxysubsubsection{\texorpdfstring{signature\_from\_ecdsa}{signature\_from\_ecdsa}}
{\footnotesize\ttfamily \label{classfc_1_1crypto_1_1r1_1_1public__key_a47467b9b02beb582f2f56a73576c75fd} 
\mbox{\hyperlink{namespacefc_1_1crypto_1_1r1_ae05a9b8a3e71b719d56c0a87c491a8f6}{compact\+\_\+signature}} signature\+\_\+from\+\_\+ecdsa (\begin{DoxyParamCaption}\item[{const EC\+\_\+\+KEY \texorpdfstring{$\ast$}{*}}]{key}{, }\item[{const \mbox{\hyperlink{namespacefc_1_1crypto_1_1r1_a2bfc308262de40acfc2a5e7c725bbe3f}{public\+\_\+key\+\_\+data}} \&}]{pub\+\_\+data}{, }\item[{fc\+::ecdsa\+\_\+sig \&}]{sig}{, }\item[{const \mbox{\hyperlink{classfc_1_1sha256}{fc\+::sha256}} \&}]{d}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [friend]}}



Definition at line \mbox{\hyperlink{elliptic__r1_8cpp_source_l00136}{136}} of file \mbox{\hyperlink{elliptic__r1_8cpp_source}{elliptic\+\_\+r1.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \textcolor{comment}{//We\ can't\ use\ ssl\_bignum\ here;\ \_get0()\ does\ not\ transfer\ ownership\ to\ us;\ \_set0()\ does\ transfer\ ownership\ to\ fc::ecdsa\_sig}}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{include_2fc_2crypto_2bigint_8hpp_a62125ea4e1d748a4a9c1aed9766f451a}{BIGNUM}}\ *sig\_r,\ *sig\_s;}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2fc_2crypto_2bigint_8hpp_a62125ea4e1d748a4a9c1aed9766f451a}{BIGNUM}}\ *\mbox{\hyperlink{bn_8cpp_af0a5201ca8846f05f25435b41d7f39f7}{r}}\ =\ BN\_new(),\ *\mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}\ =\ BN\_new();}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{openssl-compat_8c_aa0ad424eeb5c9c34c12d77cd3dc9dbf1}{ECDSA\_SIG\_get0}}(sig,\ \&sig\_r,\ \&sig\_s);}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ BN\_copy(\mbox{\hyperlink{bn_8cpp_af0a5201ca8846f05f25435b41d7f39f7}{r}},\ sig\_r);}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ BN\_copy(\mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}},\ sig\_s);}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \textcolor{comment}{//want\ to\ always\ use\ the\ low\ S\ value}}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ EC\_GROUP*\ \mbox{\hyperlink{namespaceupload_a9d33d66de17175dced88ffe95f079226}{group}}\ =\ EC\_KEY\_get0\_group(key);}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ ssl\_bignum\ order,\ halforder;}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ EC\_GROUP\_get\_order(group,\ order,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ BN\_rshift1(halforder,\ order);}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(BN\_cmp(\mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}},\ halforder)\ >\ 0)}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ BN\_sub(\mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}},\ order,\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}});}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacefc_1_1crypto_1_1r1_ae05a9b8a3e71b719d56c0a87c491a8f6}{compact\_signature}}\ csig;}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ nBitsR\ =\ BN\_num\_bits(\mbox{\hyperlink{bn_8cpp_af0a5201ca8846f05f25435b41d7f39f7}{r}});}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ nBitsS\ =\ BN\_num\_bits(\mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}});}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(nBitsR\ >\ 256\ ||\ nBitsS\ >\ 256)}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exception_8hpp_a7590ddac4f181b661c3eeaf5feccc6ac}{FC\_THROW\_EXCEPTION}}(\ exception,\ \textcolor{stringliteral}{"{}Unable\ to\ sign"{}}\ );}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{openssl-compat_8c_ae2f28de42b8345422b7ac3b28f330b9b}{ECDSA\_SIG\_set0}}(sig,\ \mbox{\hyperlink{bn_8cpp_af0a5201ca8846f05f25435b41d7f39f7}{r}},\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}});}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ nRecId\ =\ -\/1;}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i=0;\ i<4;\ i++)}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1crypto_1_1r1_1_1public__key_a3c7a3d500fb1c8b1bae8737de9e91508}{public\_key}}\ keyRec;}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ keyRec.my-\/>\_key\ =\ EC\_KEY\_new\_by\_curve\_name(\ NID\_X9\_62\_prime256v1\ );}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacefc_1_1crypto_1_1r1_a2f84ba4f539e39bff64fd02cc1ca326e}{ECDSA\_SIG\_recover\_key\_GFp}}(keyRec.my-\/>\_key,\ sig,\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)\&d,\ \textcolor{keyword}{sizeof}(d),\ i,\ 1)\ ==\ 1)}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (keyRec.serialize()\ ==\ pub\_data\ )}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nRecId\ =\ i;}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nRecId\ ==\ -\/1)}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exception_8hpp_a7590ddac4f181b661c3eeaf5feccc6ac}{FC\_THROW\_EXCEPTION}}(\ exception,\ \textcolor{stringliteral}{"{}unable\ to\ construct\ recoverable\ key"{}});}
\DoxyCodeLine{00177\ }
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ csig.data[0]\ =\ nRecId+27+4;}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ BN\_bn2bin(\mbox{\hyperlink{bn_8cpp_af0a5201ca8846f05f25435b41d7f39f7}{r}},\&csig.data[33-\/(nBitsR+7)/8]);}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ BN\_bn2bin(\mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}},\&csig.data[65-\/(nBitsS+7)/8]);}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ csig;}
\DoxyCodeLine{00183\ \ \ \ \ \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
libraries/fc/include/fc/crypto/\mbox{\hyperlink{elliptic__r1_8hpp}{elliptic\+\_\+r1.\+hpp}}\item 
libraries/fc/src/crypto/\mbox{\hyperlink{elliptic__em__impl__pub_8cpp}{elliptic\+\_\+em\+\_\+impl\+\_\+pub.\+cpp}}\item 
libraries/fc/src/crypto/\mbox{\hyperlink{elliptic__impl__pub_8cpp}{elliptic\+\_\+impl\+\_\+pub.\+cpp}}\item 
libraries/fc/src/crypto/\mbox{\hyperlink{elliptic__r1_8cpp}{elliptic\+\_\+r1.\+cpp}}\end{DoxyCompactItemize}
