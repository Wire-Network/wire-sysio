\chapter{tutorial}
\hypertarget{md_libraries_2sys-vm_2external_2_catch2_2docs_2tutorial}{}\label{md_libraries_2sys-vm_2external_2_catch2_2docs_2tutorial}\index{tutorial@{tutorial}}
\label{_top}%
 \doxysection*{Tutorial}

{\bfseries{Contents}}~\newline
 Getting Catch2~\newline
 Where to put it?~\newline
 Writing tests~\newline
 Test cases and sections~\newline
 BDD-\/\+Style~\newline
 Scaling up~\newline
 Type parametrised test cases~\newline
 Next steps~\newline


\doxysubsection*{Getting Catch2}

The simplest way to get Catch2 is to download the latest \href{https://raw.githubusercontent.com/catchorg/Catch2/master/single_include/catch2/catch.hpp}{\texttt{ single header version}}. The single header is generated by merging a set of individual headers but it is still just normal source code in a header file.

Alternative ways of getting Catch2 include using your system package manager, or installing it using \href{cmake-integration.md\#installing-catch2-from-git-repository}{\texttt{ its CMake package}}.

The full source for Catch2, including test projects, documentation, and other things, is hosted on Git\+Hub. \href{http://catch-lib.net}{\texttt{ http\+://catch-\/lib.\+net}} will redirect you there.

\doxysubsection*{Where to put it?}

Catch2 is header only. All you need to do is drop the file somewhere reachable from your project -\/ either in some central location you can set your header search path to find, or directly into your project tree itself! This is a particularly good option for other Open-\/\+Source projects that want to use \doxylink{namespace_catch}{Catch} for their test suite. See \href{https://levelofindirection.com/blog/unit-testing-in-cpp-and-objective-c-just-got-ridiculously-easier-still.html}{\texttt{ this blog entry for more on that}}.

The rest of this tutorial will assume that the Catch2 single-\/include header (or the include folder) is available unqualified -\/ but you may need to prefix it with a folder name if necessary.

{\itshape If you have installed Catch2 from system package manager, or CMake package, you need to include the header as {\ttfamily \#include \texorpdfstring{$<$}{<}\doxylink{single__include_2catch2_2catch_8hpp}{catch2/catch.\+hpp}\texorpdfstring{$>$}{>}}}

\doxysubsection*{Writing tests}

Let\textquotesingle{}s start with a really simple example (\href{../examples/010-TestCase.cpp}{\texttt{ code}}). Say you have written a function to calculate factorials and now you want to test it (let\textquotesingle{}s leave aside TDD for now).


\begin{DoxyCode}{0}
\DoxyCodeLine{\ ++}
\DoxyCodeLine{\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{sample1_8cc_a0e7da4d7a69c5b5afb707807aa177017}{Factorial}}(\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ number\ )\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{return}\ number\ <=\ 1\ ?\ number\ :\ \mbox{\hyperlink{sample1_8cc_a0e7da4d7a69c5b5afb707807aa177017}{Factorial}}(number-\/1)*number;}
\DoxyCodeLine{\}}

\end{DoxyCode}


To keep things simple we\textquotesingle{}ll put everything in a single file (\href{\#scaling-up}{\texttt{ see later for more on how to structure your test files}}).


\begin{DoxyCode}{0}
\DoxyCodeLine{\ ++}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ CATCH\_CONFIG\_MAIN\ \ }\textcolor{comment}{//\ This\ tells\ Catch\ to\ provide\ a\ main()\ -\/\ only\ do\ this\ in\ one\ cpp\ file}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}catch.hpp"{}}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{sample1_8cc_a0e7da4d7a69c5b5afb707807aa177017}{Factorial}}(\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ number\ )\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{return}\ number\ <=\ 1\ ?\ number\ :\ \mbox{\hyperlink{sample1_8cc_a0e7da4d7a69c5b5afb707807aa177017}{Factorial}}(number-\/1)*number;}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{include_2catch_8hpp_abd6e2aec703006b3da62cf7860c9808f}{TEST\_CASE}}(\ \textcolor{stringliteral}{"{}Factorials\ are\ computed"{}},\ \textcolor{stringliteral}{"{}[factorial]"{}}\ )\ \{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ \mbox{\hyperlink{sample1_8cc_a0e7da4d7a69c5b5afb707807aa177017}{Factorial}}(1)\ ==\ 1\ );}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ \mbox{\hyperlink{sample1_8cc_a0e7da4d7a69c5b5afb707807aa177017}{Factorial}}(2)\ ==\ 2\ );}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ \mbox{\hyperlink{sample1_8cc_a0e7da4d7a69c5b5afb707807aa177017}{Factorial}}(3)\ ==\ 6\ );}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ \mbox{\hyperlink{sample1_8cc_a0e7da4d7a69c5b5afb707807aa177017}{Factorial}}(10)\ ==\ 3628800\ );}
\DoxyCodeLine{\}}

\end{DoxyCode}


This will compile to a complete executable which responds to \href{command-line.md\#top}{\texttt{ command line arguments}}. If you just run it with no arguments it will execute all test cases (in this case there is just one), report any failures, report a summary of how many tests passed and failed and return the number of failed tests (useful for if you just want a yes/ no answer to\+: "{}did it work"{}).

If you run this as written it will pass. Everything is good. Right? Well, there is still a bug here. In fact the first version of this tutorial I posted here genuinely had the bug in! So it\textquotesingle{}s not completely contrived (thanks to Daryle Walker ({\ttfamily @CTMac\+User}) for pointing this out).

What is the bug? Well what is the factorial of zero? \href{http://mathforum.org/library/drmath/view/57128.html}{\texttt{ The factorial of zero is one}} -\/ which is just one of those things you have to know (and remember!).

Let\textquotesingle{}s add that to the test case\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\ ++}
\DoxyCodeLine{\mbox{\hyperlink{include_2catch_8hpp_abd6e2aec703006b3da62cf7860c9808f}{TEST\_CASE}}(\ \textcolor{stringliteral}{"{}Factorials\ are\ computed"{}},\ \textcolor{stringliteral}{"{}[factorial]"{}}\ )\ \{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ \mbox{\hyperlink{sample1_8cc_a0e7da4d7a69c5b5afb707807aa177017}{Factorial}}(0)\ ==\ 1\ );}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ \mbox{\hyperlink{sample1_8cc_a0e7da4d7a69c5b5afb707807aa177017}{Factorial}}(1)\ ==\ 1\ );}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ \mbox{\hyperlink{sample1_8cc_a0e7da4d7a69c5b5afb707807aa177017}{Factorial}}(2)\ ==\ 2\ );}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ \mbox{\hyperlink{sample1_8cc_a0e7da4d7a69c5b5afb707807aa177017}{Factorial}}(3)\ ==\ 6\ );}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ \mbox{\hyperlink{sample1_8cc_a0e7da4d7a69c5b5afb707807aa177017}{Factorial}}(10)\ ==\ 3628800\ );}
\DoxyCodeLine{\}}

\end{DoxyCode}


Now we get a failure -\/ something like\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{Example.cpp:9:\ FAILED:}
\DoxyCodeLine{\ \ REQUIRE(\ Factorial(0)\ ==\ 1\ )}
\DoxyCodeLine{with\ expansion:}
\DoxyCodeLine{\ \ 0\ ==\ 1}

\end{DoxyCode}


Note that we get the actual return value of Factorial(0) printed for us (0) -\/ even though we used a natural expression with the == operator. That lets us immediately see what the problem is.

Let\textquotesingle{}s change the factorial function to\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\ ++}
\DoxyCodeLine{\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{sample1_8cc_a0e7da4d7a69c5b5afb707807aa177017}{Factorial}}(\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ number\ )\ \{}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{return}\ number\ >\ 1\ ?\ \mbox{\hyperlink{sample1_8cc_a0e7da4d7a69c5b5afb707807aa177017}{Factorial}}(number-\/1)*number\ :\ 1;}
\DoxyCodeLine{\}}

\end{DoxyCode}


Now all the tests pass.

Of course there are still more issues to deal with. For example we\textquotesingle{}ll hit problems when the return value starts to exceed the range of an unsigned int. With factorials that can happen quite quickly. You might want to add tests for such cases and decide how to handle them. We\textquotesingle{}ll stop short of doing that here.

\doxysubsubsection*{What did we do here?}

Although this was a simple test it\textquotesingle{}s been enough to demonstrate a few things about how \doxylink{namespace_catch}{Catch} is used. Let\textquotesingle{}s take a moment to consider those before we move on.


\begin{DoxyEnumerate}
\item All we did was {\ttfamily \#define} one identifier and {\ttfamily \#include} one header and we got everything -\/ even an implementation of {\ttfamily \doxylink{platform__timer__posix__test_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}{main()}} that will \href{command-line.md\#top}{\texttt{ respond to command line arguments}}. You can only use that {\ttfamily \#define} in one implementation file, for (hopefully) obvious reasons. Once you have more than one file with unit tests in you\textquotesingle{}ll just {\ttfamily \#include "{}catch.\+hpp"{}} and go. Usually it\textquotesingle{}s a good idea to have a dedicated implementation file that just has {\ttfamily \#define CATCH\+\_\+\+CONFIG\+\_\+\+MAIN} and {\ttfamily \#include "{}catch.\+hpp"{}}. You can also provide your own implementation of main and drive \doxylink{namespace_catch}{Catch} yourself (see \href{own-main.md\#top}{\texttt{ Supplying-\/your-\/own-\/main()}}).
\item We introduce test cases with the {\ttfamily TEST\+\_\+\+CASE} macro. This macro takes one or two arguments -\/ a free form test name and, optionally, one or more tags (for more see \href{\#test-cases-and-sections}{\texttt{ Test cases and Sections}}, ). The test name must be unique. You can run sets of tests by specifying a wildcarded test name or a tag expression. See the \href{command-line.md\#top}{\texttt{ command line docs}} for more information on running tests.
\item The name and tags arguments are just strings. We haven\textquotesingle{}t had to declare a function or method -\/ or explicitly register the test case anywhere. Behind the scenes a function with a generated name is defined for you, and automatically registered using static registry classes. By abstracting the function name away we can name our tests without the constraints of identifier names.
\item We write our individual test assertions using the {\ttfamily REQUIRE} macro. Rather than a separate macro for each type of condition we express the condition naturally using C/\+C++ syntax. Behind the scenes a simple set of expression templates captures the left-\/hand-\/side and right-\/hand-\/side of the expression so we can display the values in our test report. As we\textquotesingle{}ll see later there {\itshape are} other assertion macros -\/ but because of this technique the number of them is drastically reduced.
\end{DoxyEnumerate}

\label{_test-cases-and-sections}%
 \doxysubsection*{\doxylink{class_test}{Test} cases and sections}

Most test frameworks have a class-\/based fixture mechanism. That is, test cases map to methods on a class and common setup and teardown can be performed in {\ttfamily setup()} and {\ttfamily teardown()} methods (or constructor/ destructor in languages, like C++, that support deterministic destruction).

While \doxylink{namespace_catch}{Catch} fully supports this way of working there are a few problems with the approach. In particular the way your code must be split up, and the blunt granularity of it, may cause problems. You can only have one setup/ teardown pair across a set of methods, but sometimes you want slightly different setup in each method, or you may even want several levels of setup (a concept which we will clarify later on in this tutorial). It was \href{http://jamesnewkirk.typepad.com/posts/2007/09/why-you-should-.html}{\texttt{ problems like these}} that led James Newkirk, who led the team that built NUnit, to start again from scratch and \href{http://jamesnewkirk.typepad.com/posts/2007/09/announcing-xuni.html}{\texttt{ build x\+Unit}}).

\doxylink{namespace_catch}{Catch} takes a different approach (to both NUnit and x\+Unit) that is a more natural fit for C++ and the C family of languages. This is best explained through an example (\href{../examples/100-Fix-Section.cpp}{\texttt{ code}})\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\ ++}
\DoxyCodeLine{\mbox{\hyperlink{include_2catch_8hpp_abd6e2aec703006b3da62cf7860c9808f}{TEST\_CASE}}(\ \textcolor{stringliteral}{"{}vectors\ can\ be\ sized\ and\ resized"{}},\ \textcolor{stringliteral}{"{}[vector]"{}}\ )\ \{}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ std::vector<int>\ v(\ 5\ );}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.size()\ ==\ 5\ );}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.capacity()\ >=\ 5\ );}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad512fd95a78b95770b9759823f8fbc21}{SECTION}}(\ \textcolor{stringliteral}{"{}resizing\ bigger\ changes\ size\ and\ capacity"{}}\ )\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ v.resize(\ 10\ );}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.size()\ ==\ 10\ );}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.capacity()\ >=\ 10\ );}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad512fd95a78b95770b9759823f8fbc21}{SECTION}}(\ \textcolor{stringliteral}{"{}resizing\ smaller\ changes\ size\ but\ not\ capacity"{}}\ )\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ v.resize(\ 0\ );}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.size()\ ==\ 0\ );}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.capacity()\ >=\ 5\ );}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad512fd95a78b95770b9759823f8fbc21}{SECTION}}(\ \textcolor{stringliteral}{"{}reserving\ bigger\ changes\ capacity\ but\ not\ size"{}}\ )\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ v.reserve(\ 10\ );}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.size()\ ==\ 5\ );}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.capacity()\ >=\ 10\ );}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad512fd95a78b95770b9759823f8fbc21}{SECTION}}(\ \textcolor{stringliteral}{"{}reserving\ smaller\ does\ not\ change\ size\ or\ capacity"{}}\ )\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ v.reserve(\ 0\ );}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.size()\ ==\ 5\ );}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.capacity()\ >=\ 5\ );}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}


For each {\ttfamily SECTION} the {\ttfamily TEST\+\_\+\+CASE} is executed from the start -\/ so as we enter each section we know that size is 5 and capacity is at least 5. We enforced those requirements with the {\ttfamily REQUIRE}s at the top level so we can be confident in them. This works because the {\ttfamily SECTION} macro contains an if statement that calls back into \doxylink{namespace_catch}{Catch} to see if the section should be executed. One leaf section is executed on each run through a {\ttfamily TEST\+\_\+\+CASE}. The other sections are skipped. Next time through the next section is executed, and so on until no new sections are encountered.

So far so good -\/ this is already an improvement on the setup/teardown approach because now we see our setup code inline and use the stack.

The power of sections really shows, however, when we need to execute a sequence of checked operations. Continuing the vector example, we might want to verify that attempting to reserve a capacity smaller than the current capacity of the vector changes nothing. We can do that, naturally, like so\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{++}
\DoxyCodeLine{\ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad512fd95a78b95770b9759823f8fbc21}{SECTION}}(\ \textcolor{stringliteral}{"{}reserving\ bigger\ changes\ capacity\ but\ not\ size"{}}\ )\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ v.reserve(\ 10\ );}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.size()\ ==\ 5\ );}
\DoxyCodeLine{\ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.capacity()\ >=\ 10\ );}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad512fd95a78b95770b9759823f8fbc21}{SECTION}}(\ \textcolor{stringliteral}{"{}reserving\ smaller\ again\ does\ not\ change\ capacity"{}}\ )\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ v.reserve(\ 7\ );}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.capacity()\ >=\ 10\ );}
\DoxyCodeLine{\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \}}

\end{DoxyCode}


Sections can be nested to an arbitrary depth (limited only by your stack size). Each leaf section (i.\+e. a section that contains no nested sections) will be executed exactly once, on a separate path of execution from any other leaf section (so no leaf section can interfere with another). \doxylink{struct_a}{A} failure in a parent section will prevent nested sections from running -\/ but then that\textquotesingle{}s the idea.

\doxysubsection*{BDD-\/\+Style}

If you name your test cases and sections appropriately you can achieve a BDD-\/style specification structure. This became such a useful way of working that first class support has been added to \doxylink{namespace_catch}{Catch}. Scenarios can be specified using {\ttfamily SCENARIO}, {\ttfamily GIVEN}, {\ttfamily WHEN} and {\ttfamily THEN} macros, which map on to {\ttfamily TEST\+\_\+\+CASE}s and {\ttfamily SECTION}s, respectively. For more details see \href{test-cases-and-sections.md\#top}{\texttt{ Test cases and sections}}.

The vector example can be adjusted to use these macros like so (\href{../examples/120-Bdd-ScenarioGivenWhenThen.cpp}{\texttt{ example code}})\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\ ++}
\DoxyCodeLine{\mbox{\hyperlink{include_2catch_8hpp_acf8f441c7b9d70251ccbb7ccd8b83183}{SCENARIO}}(\ \textcolor{stringliteral}{"{}vectors\ can\ be\ sized\ and\ resized"{}},\ \textcolor{stringliteral}{"{}[vector]"{}}\ )\ \{}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_a2b70c603786d759242856d883dbe93bd}{GIVEN}}(\ \textcolor{stringliteral}{"{}A\ vector\ with\ some\ items"{}}\ )\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ std::vector<int>\ v(\ 5\ );}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.size()\ ==\ 5\ );}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.capacity()\ >=\ 5\ );}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ab09e9b8186233f676ce6a23aebe89d6e}{WHEN}}(\ \textcolor{stringliteral}{"{}the\ size\ is\ increased"{}}\ )\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ v.resize(\ 10\ );}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_a27987092139727fd7a471b5f74dc62de}{THEN}}(\ \textcolor{stringliteral}{"{}the\ size\ and\ capacity\ change"{}}\ )\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.size()\ ==\ 10\ );}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.capacity()\ >=\ 10\ );}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ab09e9b8186233f676ce6a23aebe89d6e}{WHEN}}(\ \textcolor{stringliteral}{"{}the\ size\ is\ reduced"{}}\ )\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ v.resize(\ 0\ );}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_a27987092139727fd7a471b5f74dc62de}{THEN}}(\ \textcolor{stringliteral}{"{}the\ size\ changes\ but\ not\ capacity"{}}\ )\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.size()\ ==\ 0\ );}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.capacity()\ >=\ 5\ );}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ab09e9b8186233f676ce6a23aebe89d6e}{WHEN}}(\ \textcolor{stringliteral}{"{}more\ capacity\ is\ reserved"{}}\ )\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ v.reserve(\ 10\ );}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_a27987092139727fd7a471b5f74dc62de}{THEN}}(\ \textcolor{stringliteral}{"{}the\ capacity\ changes\ but\ not\ the\ size"{}}\ )\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.size()\ ==\ 5\ );}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.capacity()\ >=\ 10\ );}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ab09e9b8186233f676ce6a23aebe89d6e}{WHEN}}(\ \textcolor{stringliteral}{"{}less\ capacity\ is\ reserved"{}}\ )\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ v.reserve(\ 0\ );}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_a27987092139727fd7a471b5f74dc62de}{THEN}}(\ \textcolor{stringliteral}{"{}neither\ size\ nor\ capacity\ are\ changed"{}}\ )\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.size()\ ==\ 5\ );}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2catch_8hpp_ad57835ba8f1bb419a865ada6bd011a85}{REQUIRE}}(\ v.capacity()\ >=\ 5\ );}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}


Conveniently, these tests will be reported as follows when run\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{Scenario:\ vectors\ can\ be\ sized\ and\ resized}
\DoxyCodeLine{\ \ \ \ \ Given:\ A\ vector\ with\ some\ items}
\DoxyCodeLine{\ \ \ \ \ \ When:\ more\ capacity\ is\ reserved}
\DoxyCodeLine{\ \ \ \ \ \ Then:\ the\ capacity\ changes\ but\ not\ the\ size}

\end{DoxyCode}


\label{_scaling-up}%
 \doxysubsection*{Scaling up}

To keep the tutorial simple we put all our code in a single file. This is fine to get started -\/ and makes jumping into \doxylink{namespace_catch}{Catch} even quicker and easier. As you write more real-\/world tests, though, this is not really the best approach.

The requirement is that the following block of code (\href{own-main.md\#top}{\texttt{ or equivalent}})\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\ ++}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ CATCH\_CONFIG\_MAIN}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}catch.hpp"{}}}

\end{DoxyCode}


appears in {\itshape exactly one} source file. Use as many additional cpp files (or whatever you call your implementation files) as you need for your tests, partitioned however makes most sense for your way of working. Each additional file need only {\ttfamily \#include "{}catch.\+hpp"{}} -\/ do not repeat the {\ttfamily \#define}!

In fact it is usually a good idea to put the block with the {\ttfamily \#define} \href{slow-compiles.md\#top}{\texttt{ in its own source file}} (code example \href{../examples/020-TestCase-1.cpp}{\texttt{ main}}, \href{../examples/020-TestCase-2.cpp}{\texttt{ tests}}).

Do not write your tests in header files!

\doxysubsection*{Type parametrised test cases}

\doxylink{class_test}{Test} cases in Catch2 can be also parametrised by type, via the {\ttfamily TEMPLATE\+\_\+\+TEST\+\_\+\+CASE} and {\ttfamily TEMPLATE\+\_\+\+PRODUCT\+\_\+\+TEST\+\_\+\+CASE} macros, which behave in the same way the {\ttfamily TEST\+\_\+\+CASE} macro, but are run for every type or type combination.

For more details, see our documentation on \href{test-cases-and-sections.md\#type-parametrised-test-cases}{\texttt{ test cases and sections}}.

\doxysubsection*{Next steps}

This has been a brief introduction to get you up and running with \doxylink{namespace_catch}{Catch}, and to point out some of the key differences between \doxylink{namespace_catch}{Catch} and other frameworks you may already be familiar with. This will get you going quite far already and you are now in a position to dive in and write some tests.

Of course there is more to learn -\/ most of which you should be able to page-\/fault in as you go. Please see the ever-\/growing \href{Readme.md\#top}{\texttt{ Reference section}} for what\textquotesingle{}s available.

\DoxyHorRuler{0}


\href{Readme.md\#top}{\texttt{ Home}} 