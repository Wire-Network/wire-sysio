\doxysection{connection.\+hpp}
\hypertarget{transport_2iostream_2connection_8hpp_source}{}\label{transport_2iostream_2connection_8hpp_source}\index{libraries/fc/vendor/websocketpp/websocketpp/transport/iostream/connection.hpp@{libraries/fc/vendor/websocketpp/websocketpp/transport/iostream/connection.hpp}}
\mbox{\hyperlink{transport_2iostream_2connection_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00001}00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00002}00002\ \textcolor{comment}{\ *\ Copyright\ (c)\ 2014,\ Peter\ Thorson.\ All\ rights\ reserved.}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00003}00003\ \textcolor{comment}{\ *}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00004}00004\ \textcolor{comment}{\ *\ Redistribution\ and\ use\ in\ source\ and\ binary\ forms,\ with\ or\ without}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00005}00005\ \textcolor{comment}{\ *\ modification,\ are\ permitted\ provided\ that\ the\ following\ conditions\ are\ met:}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00006}00006\ \textcolor{comment}{\ *\ \ \ \ \ *\ Redistributions\ of\ source\ code\ must\ retain\ the\ above\ copyright}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00007}00007\ \textcolor{comment}{\ *\ \ \ \ \ \ \ notice,\ this\ list\ of\ conditions\ and\ the\ following\ disclaimer.}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00008}00008\ \textcolor{comment}{\ *\ \ \ \ \ *\ Redistributions\ in\ binary\ form\ must\ reproduce\ the\ above\ copyright}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00009}00009\ \textcolor{comment}{\ *\ \ \ \ \ \ \ notice,\ this\ list\ of\ conditions\ and\ the\ following\ disclaimer\ in\ the}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00010}00010\ \textcolor{comment}{\ *\ \ \ \ \ \ \ documentation\ and/or\ other\ materials\ provided\ with\ the\ distribution.}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00011}00011\ \textcolor{comment}{\ *\ \ \ \ \ *\ Neither\ the\ name\ of\ the\ WebSocket++\ Project\ nor\ the}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00012}00012\ \textcolor{comment}{\ *\ \ \ \ \ \ \ names\ of\ its\ contributors\ may\ be\ used\ to\ endorse\ or\ promote\ products}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00013}00013\ \textcolor{comment}{\ *\ \ \ \ \ \ \ derived\ from\ this\ software\ without\ specific\ prior\ written\ permission.}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00014}00014\ \textcolor{comment}{\ *}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00015}00015\ \textcolor{comment}{\ *\ THIS\ SOFTWARE\ IS\ PROVIDED\ BY\ THE\ COPYRIGHT\ HOLDERS\ AND\ CONTRIBUTORS\ "{}AS\ IS"{}}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00016}00016\ \textcolor{comment}{\ *\ AND\ ANY\ EXPRESS\ OR\ IMPLIED\ WARRANTIES,\ INCLUDING,\ BUT\ NOT\ LIMITED\ TO,\ THE}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00017}00017\ \textcolor{comment}{\ *\ IMPLIED\ WARRANTIES\ OF\ MERCHANTABILITY\ AND\ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00018}00018\ \textcolor{comment}{\ *\ ARE\ DISCLAIMED.\ IN\ NO\ EVENT\ SHALL\ PETER\ THORSON\ BE\ LIABLE\ FOR\ ANY}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00019}00019\ \textcolor{comment}{\ *\ DIRECT,\ INDIRECT,\ INCIDENTAL,\ SPECIAL,\ EXEMPLARY,\ OR\ CONSEQUENTIAL\ DAMAGES}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00020}00020\ \textcolor{comment}{\ *\ (INCLUDING,\ BUT\ NOT\ LIMITED\ TO,\ PROCUREMENT\ OF\ SUBSTITUTE\ GOODS\ OR\ SERVICES;}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00021}00021\ \textcolor{comment}{\ *\ LOSS\ OF\ USE,\ DATA,\ OR\ PROFITS;\ OR\ BUSINESS\ INTERRUPTION)\ HOWEVER\ CAUSED\ AND}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00022}00022\ \textcolor{comment}{\ *\ ON\ ANY\ THEORY\ OF\ LIABILITY,\ WHETHER\ IN\ CONTRACT,\ STRICT\ LIABILITY,\ OR\ TORT}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00023}00023\ \textcolor{comment}{\ *\ (INCLUDING\ NEGLIGENCE\ OR\ OTHERWISE)\ ARISING\ IN\ ANY\ WAY\ OUT\ OF\ THE\ USE\ OF\ THIS}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00024}00024\ \textcolor{comment}{\ *\ SOFTWARE,\ EVEN\ IF\ ADVISED\ OF\ THE\ POSSIBILITY\ OF\ SUCH\ DAMAGE.}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00025}00025\ \textcolor{comment}{\ *}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00026}00026\ \textcolor{comment}{\ */}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00028}00028\ \textcolor{preprocessor}{\#ifndef\ WEBSOCKETPP\_TRANSPORT\_IOSTREAM\_CON\_HPP}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00029}00029\ \textcolor{preprocessor}{\#define\ WEBSOCKETPP\_TRANSPORT\_IOSTREAM\_CON\_HPP}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00030}00030\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00031}00031\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{transport_2iostream_2base_8hpp}{websocketpp/transport/iostream/base.hpp}}>}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00032}00032\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00033}00033\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{transport_2base_2connection_8hpp}{websocketpp/transport/base/connection.hpp}}>}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00034}00034\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00035}00035\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{uri_8hpp}{websocketpp/uri.hpp}}>}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00036}00036\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00037}00037\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{levels_8hpp}{websocketpp/logger/levels.hpp}}>}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00038}00038\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00039}00039\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{connection__hdl_8hpp}{websocketpp/common/connection\_hdl.hpp}}>}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00040}00040\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{fc_2vendor_2websocketpp_2websocketpp_2common_2memory_8hpp}{websocketpp/common/memory.hpp}}>}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00041}00041\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{platforms_8hpp}{websocketpp/common/platforms.hpp}}>}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00043}00043\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00044}00044\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00045}00045\ \textcolor{preprocessor}{\#include\ <sstream>}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00046}00046\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00047}00047\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00048}00048\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00049}00049\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacewebsocketpp}{websocketpp}}\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00050}00050\ \textcolor{keyword}{namespace\ }transport\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00051}00051\ \textcolor{keyword}{namespace\ }iostream\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00052}00052\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00055}\mbox{\hyperlink{structwebsocketpp_1_1transport_1_1iostream_1_1timer}{00055}}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structwebsocketpp_1_1transport_1_1iostream_1_1timer}{timer}}\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00056}\mbox{\hyperlink{structwebsocketpp_1_1transport_1_1iostream_1_1timer_a5aca0296aba0bb6b6336b58c24053ec9}{00056}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structwebsocketpp_1_1transport_1_1iostream_1_1timer_a5aca0296aba0bb6b6336b58c24053ec9}{cancel}}()\ \{\}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00057}00057\ \};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00058}00058\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00059}00059\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ config>}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00060}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection}{00060}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection}{connection}}\ :\ \textcolor{keyword}{public}\ lib::enable\_shared\_from\_this<\ connection<config>\ >\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00061}00061\ \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00063}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_afda32ed083d4e272e378e75225e6e26e}{00063}}\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection}{connection<config>}}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_afda32ed083d4e272e378e75225e6e26e}{type}};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00065}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a5edb16646621ff775f2529c2a6910c82}{00065}}\ \ \ \ \ \textcolor{keyword}{typedef}\ lib::shared\_ptr<type>\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a5edb16646621ff775f2529c2a6910c82}{ptr}};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00066}00066\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00068}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a24d7deb9e9bdd0f7c48d3c5ff435914d}{00068}}\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ config::concurrency\_type\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a24d7deb9e9bdd0f7c48d3c5ff435914d}{concurrency\_type}};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00070}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a69b22a7cce2e247dca483bb22805c1be}{00070}}\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ config::alog\_type\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a69b22a7cce2e247dca483bb22805c1be}{alog\_type}};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00072}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a4d6d7400af7585fb72507c40a2575434}{00072}}\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ config::elog\_type\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a4d6d7400af7585fb72507c40a2575434}{elog\_type}};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00073}00073\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00074}00074\ \ \ \ \ \textcolor{comment}{//\ Concurrency\ policy\ types}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00075}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_af12d059c4beaffe3c4e4685a7f121a3e}{00075}}\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ concurrency\_type::scoped\_lock\_type\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_af12d059c4beaffe3c4e4685a7f121a3e}{scoped\_lock\_type}};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00076}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a5e7456b9b53e4c7a8497fc1ee53836ca}{00076}}\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ concurrency\_type::mutex\_type\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a5e7456b9b53e4c7a8497fc1ee53836ca}{mutex\_type}};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00077}00077\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00078}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_aa993f99a9b31b42fe3ef1ec471cbc2e8}{00078}}\ \ \ \ \ \textcolor{keyword}{typedef}\ lib::shared\_ptr<timer>\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_aa993f99a9b31b42fe3ef1ec471cbc2e8}{timer\_ptr}};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00079}00079\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00080}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a737fcfe26dfda316d9908b819d3580b0}{00080}}\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a737fcfe26dfda316d9908b819d3580b0}{connection}}(\textcolor{keywordtype}{bool}\ is\_server,\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a69b22a7cce2e247dca483bb22805c1be}{alog\_type}}\ \&\ alog,\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a4d6d7400af7585fb72507c40a2575434}{elog\_type}}\ \&\ \mbox{\hyperlink{logger_8hpp_a9e3cdbaecd5a34b42956e888f7326fad}{elog}})}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00081}00081\ \ \ \ \ \ \ :\ m\_output\_stream(NULL)}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00082}00082\ \ \ \ \ \ \ ,\ m\_reading(false)}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00083}00083\ \ \ \ \ \ \ ,\ m\_is\_server(is\_server)}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00084}00084\ \ \ \ \ \ \ ,\ m\_is\_secure(false)}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00085}00085\ \ \ \ \ \ \ ,\ m\_alog(alog)}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00086}00086\ \ \ \ \ \ \ ,\ m\_elog(\mbox{\hyperlink{logger_8hpp_a9e3cdbaecd5a34b42956e888f7326fad}{elog}})}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00087}00087\ \ \ \ \ \ \ ,\ m\_remote\_endpoint(\textcolor{stringliteral}{"{}iostream\ transport"{}})}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00088}00088\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00089}00089\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}iostream\ con\ transport\ constructor"{}});}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00090}00090\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00091}00091\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00093}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_afab9454b5af00a8edb494fdd2e32a41e}{00093}}\ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a5edb16646621ff775f2529c2a6910c82}{ptr}}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_afab9454b5af00a8edb494fdd2e32a41e}{get\_shared}}()\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00094}00094\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ type::shared\_from\_this();}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00095}00095\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00096}00096\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00098}00098\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00104}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_ad0d1f64845818bb6bebe43fe057e4da2}{00104}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_ad0d1f64845818bb6bebe43fe057e4da2}{register\_ostream}}(std::ostream\ *\ o)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00105}00105\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ lock\ transport\ state?}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00106}00106\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_af12d059c4beaffe3c4e4685a7f121a3e}{scoped\_lock\_type}}\ \mbox{\hyperlink{xbyak__mnemonic_8h_aa81aed607133209dade63a226818224d}{lock}}(m\_read\_mutex);}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00107}00107\ \ \ \ \ \ \ \ \ m\_output\_stream\ =\ o;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00108}00108\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00109}00109\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00111}00111\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00121}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a0f5d21e86961b0f3d75c417d5f45d4ac}{00121}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a0f5d21e86961b0f3d75c417d5f45d4ac}{set\_uri}}(\mbox{\hyperlink{namespacewebsocketpp_aae370ea5ac83a8ece7712cb39fc23f5b}{uri\_ptr}})\ \{\}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00122}00122\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00124}00124\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00142}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a9fe305b0c1b1ce99ac822960c3aeb5c7}{00142}}\ \ \ \ \ \textcolor{keyword}{friend}\ std::istream\ \&\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a9fe305b0c1b1ce99ac822960c3aeb5c7}{operator>>\ }}(std::istream\ \&\ in,\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection}{type}}\ \&\ t)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00143}00143\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this\ serializes\ calls\ to\ external\ read.}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00144}00144\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_af12d059c4beaffe3c4e4685a7f121a3e}{scoped\_lock\_type}}\ \mbox{\hyperlink{xbyak__mnemonic_8h_aa81aed607133209dade63a226818224d}{lock}}(t.m\_read\_mutex);}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00145}00145\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00146}00146\ \ \ \ \ \ \ \ \ t.read(in);}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00147}00147\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00148}00148\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ in;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00149}00149\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00150}00150\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00152}00152\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00165}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a4616555cbee050aec84da1e39a3c34a8}{00165}}\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a4616555cbee050aec84da1e39a3c34a8}{read\_some}}(\textcolor{keywordtype}{char}\ \textcolor{keyword}{const}\ *\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a855e99b645b13e7905d074d02fe0bff5}{buf}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a7360b55975153b822efc5217b7734e6a}{len}})\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00166}00166\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this\ serializes\ calls\ to\ external\ read.}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00167}00167\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_af12d059c4beaffe3c4e4685a7f121a3e}{scoped\_lock\_type}}\ \mbox{\hyperlink{xbyak__mnemonic_8h_aa81aed607133209dade63a226818224d}{lock}}(m\_read\_mutex);}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00168}00168\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00169}00169\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ this-\/>read\_some\_impl(\mbox{\hyperlink{yubihsm__pkcs11_8c_a855e99b645b13e7905d074d02fe0bff5}{buf}},\mbox{\hyperlink{yubihsm__pkcs11_8c_a7360b55975153b822efc5217b7734e6a}{len}});}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00170}00170\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00171}00171\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00173}00173\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00188}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a4a492425587bf02f557d8f03b8be8dc8}{00188}}\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a4a492425587bf02f557d8f03b8be8dc8}{read\_all}}(\textcolor{keywordtype}{char}\ \textcolor{keyword}{const}\ *\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a855e99b645b13e7905d074d02fe0bff5}{buf}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a7360b55975153b822efc5217b7734e6a}{len}})\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00189}00189\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this\ serializes\ calls\ to\ external\ read.}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00190}00190\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_af12d059c4beaffe3c4e4685a7f121a3e}{scoped\_lock\_type}}\ \mbox{\hyperlink{xbyak__mnemonic_8h_aa81aed607133209dade63a226818224d}{lock}}(m\_read\_mutex);}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00191}00191\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00192}00192\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ total\_read\ =\ 0;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00193}00193\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ temp\_read\ =\ 0;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00194}00194\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00195}00195\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00196}00196\ \ \ \ \ \ \ \ \ \ \ \ \ temp\_read\ =\ this-\/>read\_some\_impl(\mbox{\hyperlink{yubihsm__pkcs11_8c_a855e99b645b13e7905d074d02fe0bff5}{buf}}+total\_read,\mbox{\hyperlink{yubihsm__pkcs11_8c_a7360b55975153b822efc5217b7734e6a}{len}}-\/total\_read);}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00197}00197\ \ \ \ \ \ \ \ \ \ \ \ \ total\_read\ +=\ temp\_read;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00198}00198\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (temp\_read\ !=\ 0\ \&\&\ total\_read\ <\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a7360b55975153b822efc5217b7734e6a}{len}});}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00199}00199\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00200}00200\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ total\_read;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00201}00201\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00202}00202\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00204}00204\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00208}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a72f532fb0a8d339371b8ca112fdd3f66}{00208}}\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a72f532fb0a8d339371b8ca112fdd3f66}{readsome}}(\textcolor{keywordtype}{char}\ \textcolor{keyword}{const}\ *\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a855e99b645b13e7905d074d02fe0bff5}{buf}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a7360b55975153b822efc5217b7734e6a}{len}})\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00209}00209\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ this-\/>\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a4616555cbee050aec84da1e39a3c34a8}{read\_some}}(buf,\mbox{\hyperlink{yubihsm__pkcs11_8c_a7360b55975153b822efc5217b7734e6a}{len}});}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00210}00210\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00211}00211\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00213}00213\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00219}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a88529f4130f75beed493c84c861e66cf}{00219}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a88529f4130f75beed493c84c861e66cf}{eof}}()\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00220}00220\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this\ serializes\ calls\ to\ external\ read.}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00221}00221\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_af12d059c4beaffe3c4e4685a7f121a3e}{scoped\_lock\_type}}\ \mbox{\hyperlink{xbyak__mnemonic_8h_aa81aed607133209dade63a226818224d}{lock}}(m\_read\_mutex);}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00222}00222\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00223}00223\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_reading)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00224}00224\ \ \ \ \ \ \ \ \ \ \ \ \ complete\_read(make\_error\_code(\mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1error_a8d371a2562d813e5a2e106e2694d4fb0a73dd0d0f22cd67b7bcc031cd6bdef743}{transport::error::eof}}));}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00225}00225\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00226}00226\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00227}00227\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00229}00229\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00235}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a3fdd2b1f005daafa73bffe45063a7750}{00235}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a3fdd2b1f005daafa73bffe45063a7750}{fatal\_error}}()\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00236}00236\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this\ serializes\ calls\ to\ external\ read.}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00237}00237\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_af12d059c4beaffe3c4e4685a7f121a3e}{scoped\_lock\_type}}\ \mbox{\hyperlink{xbyak__mnemonic_8h_aa81aed607133209dade63a226818224d}{lock}}(m\_read\_mutex);}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00238}00238\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00239}00239\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_reading)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00240}00240\ \ \ \ \ \ \ \ \ \ \ \ \ complete\_read(make\_error\_code(\mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1error_a8d371a2562d813e5a2e106e2694d4fb0a6a7cb8ef776c9eabe2324a529e991732}{transport::error::pass\_through}}));}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00241}00241\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00242}00242\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00243}00243\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00245}00245\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00257}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a34443f9921e85115607304397d43cc8f}{00257}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a34443f9921e85115607304397d43cc8f}{set\_secure}}(\textcolor{keywordtype}{bool}\ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}})\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00258}00258\ \ \ \ \ \ \ \ \ m\_is\_secure\ =\ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00259}00259\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00260}00260\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00262}00262\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00271}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_aae6fa1869211e9dc8a18d609292bd833}{00271}}\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_aae6fa1869211e9dc8a18d609292bd833}{is\_secure}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00272}00272\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_is\_secure;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00273}00273\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00274}00274\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00276}00276\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00289}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a846340a41ebbce1a6a1cecfd9026c2e9}{00289}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a846340a41ebbce1a6a1cecfd9026c2e9}{set\_remote\_endpoint}}(std::string\ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}})\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00290}00290\ \ \ \ \ \ \ \ \ m\_remote\_endpoint\ =\ \mbox{\hyperlink{pkcs11_8h_a32aff7c6c4cd253fdf6563677afab5ce}{value}};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00291}00291\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00292}00292\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00294}00294\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00305}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_ac1c63528e36a2a60c0efc01a1c17584e}{00305}}\ \ \ \ \ std::string\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_ac1c63528e36a2a60c0efc01a1c17584e}{get\_remote\_endpoint}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00306}00306\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_remote\_endpoint;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00307}00307\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00308}00308\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00310}00310\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00313}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a06d23eee9c6c1bd1a48f7cf8a081bda9}{00313}}\ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_a6b3d26a10ee7229b84b776786332631d}{connection\_hdl}}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a06d23eee9c6c1bd1a48f7cf8a081bda9}{get\_handle}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00314}00314\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_connection\_hdl;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00315}00315\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00316}00316\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00318}00318\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00327}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a7852f9c0dc64d6e51b57b4a28302a602}{00327}}\ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_aa993f99a9b31b42fe3ef1ec471cbc2e8}{timer\_ptr}}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a7852f9c0dc64d6e51b57b4a28302a602}{set\_timer}}(\textcolor{keywordtype}{long},\ \mbox{\hyperlink{namespacewebsocketpp_1_1transport_a946cc56ff41139f3002149c15fd87bc9}{timer\_handler}})\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00328}00328\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_aa993f99a9b31b42fe3ef1ec471cbc2e8}{timer\_ptr}}();}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00329}00329\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00330}00330\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00332}00332\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00350}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a32740c33406e5484da7f030fb106ae22}{00350}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a32740c33406e5484da7f030fb106ae22}{set\_write\_handler}}(\mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1iostream_abc22b834c2d0c698d6c87e51d5bfad2c}{write\_handler}}\ h)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00351}00351\ \ \ \ \ \ \ \ \ m\_write\_handler\ =\ h;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00352}00352\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00353}00353\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00355}00355\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00380}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_aa035dc6275c5babb99c0cbada8521b5c}{00380}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_aa035dc6275c5babb99c0cbada8521b5c}{set\_vector\_write\_handler}}(\mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1iostream_a21982146513c0b5580786c3af5dd2878}{vector\_write\_handler}}\ h)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00381}00381\ \ \ \ \ \ \ \ \ m\_vector\_write\_handler\ =\ h;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00382}00382\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00383}00383\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00385}00385\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00400}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a37bb9ef90b3d183c238a32cf9f056d4b}{00400}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a37bb9ef90b3d183c238a32cf9f056d4b}{set\_shutdown\_handler}}(\mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1iostream_a3563ce2cca06b1466f7d76ecb8eb4a0b}{shutdown\_handler}}\ h)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00401}00401\ \ \ \ \ \ \ \ \ m\_shutdown\_handler\ =\ h;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00402}00402\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00403}00403\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00405}00405\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00410}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a771203b134cc012188a07c471907fc76}{00410}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a771203b134cc012188a07c471907fc76}{init}}(\mbox{\hyperlink{namespacewebsocketpp_1_1transport_aeae75e675c1a334b3b33ab7120b480a5}{init\_handler}}\ handler)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00411}00411\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}iostream\ connection\ init"{}});}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00412}00412\ \ \ \ \ \ \ \ \ handler(lib::error\_code());}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00413}00413\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00414}00414\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00416}00416\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00439}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_ad66fa146a7cdc19bfca3e32da23b9c60}{00439}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_ad66fa146a7cdc19bfca3e32da23b9c60}{async\_read\_at\_least}}(\textcolor{keywordtype}{size\_t}\ num\_bytes,\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{yubihsm__pkcs11_8c_a855e99b645b13e7905d074d02fe0bff5}{buf}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a7360b55975153b822efc5217b7734e6a}{len}},}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00440}00440\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_1_1transport_a3a9b2ed54dfcc6ebe7d7e6b4c02f53fb}{read\_handler}}\ handler)}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00441}00441\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00442}00442\ \ \ \ \ \ \ \ \ std::stringstream\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00443}00443\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}\ <<\ \textcolor{stringliteral}{"{}iostream\_con\ async\_read\_at\_least:\ "{}}\ <<\ num\_bytes;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00444}00444\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}.str());}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00445}00445\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00446}00446\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (num\_bytes\ >\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a7360b55975153b822efc5217b7734e6a}{len}})\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00447}00447\ \ \ \ \ \ \ \ \ \ \ \ \ handler(make\_error\_code(\mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1iostream_1_1error_a647b428e260748d7606c92255e1e9737aa185b313b5353e821c3fce4bf62f50a6}{error::invalid\_num\_bytes}}),\textcolor{keywordtype}{size\_t}(0));}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00448}00448\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00449}00449\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00450}00450\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00451}00451\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_reading\ ==\ \textcolor{keyword}{true})\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00452}00452\ \ \ \ \ \ \ \ \ \ \ \ \ handler(make\_error\_code(\mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1iostream_1_1error_a647b428e260748d7606c92255e1e9737ac1ae213118c53b4d7eceb10876d88266}{error::double\_read}}),\textcolor{keywordtype}{size\_t}(0));}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00453}00453\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00454}00454\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00455}00455\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00456}00456\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (num\_bytes\ ==\ 0\ ||\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a7360b55975153b822efc5217b7734e6a}{len}}\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00457}00457\ \ \ \ \ \ \ \ \ \ \ \ \ handler(lib::error\_code(),\textcolor{keywordtype}{size\_t}(0));}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00458}00458\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00459}00459\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00460}00460\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00461}00461\ \ \ \ \ \ \ \ \ m\_buf\ =\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a855e99b645b13e7905d074d02fe0bff5}{buf}};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00462}00462\ \ \ \ \ \ \ \ \ m\_len\ =\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a7360b55975153b822efc5217b7734e6a}{len}};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00463}00463\ \ \ \ \ \ \ \ \ m\_bytes\_needed\ =\ num\_bytes;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00464}00464\ \ \ \ \ \ \ \ \ m\_read\_handler\ =\ handler;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00465}00465\ \ \ \ \ \ \ \ \ m\_cursor\ =\ 0;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00466}00466\ \ \ \ \ \ \ \ \ m\_reading\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00467}00467\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00468}00468\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00470}00470\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00487}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a6bc18b4c6b20bb9bc5d0c41cad53d602}{00487}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a6bc18b4c6b20bb9bc5d0c41cad53d602}{async\_write}}(\textcolor{keywordtype}{char}\ \textcolor{keyword}{const}\ *\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a855e99b645b13e7905d074d02fe0bff5}{buf}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a7360b55975153b822efc5217b7734e6a}{len}},\ \mbox{\hyperlink{namespacewebsocketpp_1_1transport_addf5d728159e7aa2bce2a0df947b1560}{transport::write\_handler}}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00488}00488\ \ \ \ \ \ \ \ \ handler)}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00489}00489\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00490}00490\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}iostream\_con\ async\_write"{}});}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00491}00491\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ lock\ transport\ state?}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00492}00492\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00493}00493\ \ \ \ \ \ \ \ \ lib::error\_code\ ec;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00494}00494\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00495}00495\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_output\_stream)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00496}00496\ \ \ \ \ \ \ \ \ \ \ \ \ m\_output\_stream-\/>write(\mbox{\hyperlink{yubihsm__pkcs11_8c_a855e99b645b13e7905d074d02fe0bff5}{buf}},\mbox{\hyperlink{yubihsm__pkcs11_8c_a7360b55975153b822efc5217b7734e6a}{len}});}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00497}00497\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00498}00498\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_output\_stream-\/>bad())\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00499}00499\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ec\ =\ make\_error\_code(\mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1iostream_1_1error_a647b428e260748d7606c92255e1e9737ad46c640654d1d96c517444d95d24da45}{error::bad\_stream}});}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00500}00500\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00501}00501\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (m\_write\_handler)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00502}00502\ \ \ \ \ \ \ \ \ \ \ \ \ ec\ =\ m\_write\_handler(m\_connection\_hdl,\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a855e99b645b13e7905d074d02fe0bff5}{buf}},\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a7360b55975153b822efc5217b7734e6a}{len}});}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00503}00503\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00504}00504\ \ \ \ \ \ \ \ \ \ \ \ \ ec\ =\ make\_error\_code(\mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1iostream_1_1error_a647b428e260748d7606c92255e1e9737a92341254bd27c7cb97fb5e1aca5310f3}{error::output\_stream\_required}});}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00505}00505\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00506}00506\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00507}00507\ \ \ \ \ \ \ \ \ handler(ec);}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00508}00508\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00509}00509\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00511}00511\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00527}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_adcc51157786a27f08ffea25025b6d4f8}{00527}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_adcc51157786a27f08ffea25025b6d4f8}{async\_write}}(std::vector<buffer>\ \textcolor{keyword}{const}\ \&\ bufs,\ \mbox{\hyperlink{namespacewebsocketpp_1_1transport_addf5d728159e7aa2bce2a0df947b1560}{transport::write\_handler}}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00528}00528\ \ \ \ \ \ \ \ \ handler)}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00529}00529\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00530}00530\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}iostream\_con\ async\_write\ buffer\ list"{}});}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00531}00531\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ lock\ transport\ state?}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00532}00532\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00533}00533\ \ \ \ \ \ \ \ \ lib::error\_code\ ec;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00534}00534\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00535}00535\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_output\_stream)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00536}00536\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<buffer>::const\_iterator\ it;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00537}00537\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (it\ =\ bufs.begin();\ it\ !=\ bufs.end();\ it++)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00538}00538\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_output\_stream-\/>write((*it).buf,(*it).len);}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00539}00539\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00540}00540\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_output\_stream-\/>bad())\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00541}00541\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ec\ =\ make\_error\_code(\mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1iostream_1_1error_a647b428e260748d7606c92255e1e9737ad46c640654d1d96c517444d95d24da45}{error::bad\_stream}});}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00542}00542\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00543}00543\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00544}00544\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00545}00545\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (m\_vector\_write\_handler)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00546}00546\ \ \ \ \ \ \ \ \ \ \ \ \ ec\ =\ m\_vector\_write\_handler(m\_connection\_hdl,\ bufs);}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00547}00547\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (m\_write\_handler)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00548}00548\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<buffer>::const\_iterator\ it;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00549}00549\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (it\ =\ bufs.begin();\ it\ !=\ bufs.end();\ it++)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00550}00550\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ec\ =\ m\_write\_handler(m\_connection\_hdl,\ (*it).buf,\ (*it).len);}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00551}00551\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ec)\ \{\textcolor{keywordflow}{break};\}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00552}00552\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00553}00553\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00554}00554\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00555}00555\ \ \ \ \ \ \ \ \ \ \ \ \ ec\ =\ make\_error\_code(\mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1iostream_1_1error_a647b428e260748d7606c92255e1e9737a92341254bd27c7cb97fb5e1aca5310f3}{error::output\_stream\_required}});}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00556}00556\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00557}00557\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00558}00558\ \ \ \ \ \ \ \ \ handler(ec);}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00559}00559\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00560}00560\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00562}00562\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00565}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_ac565af9c7f9e86972fd1c20bc369f06d}{00565}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_ac565af9c7f9e86972fd1c20bc369f06d}{set\_handle}}(\mbox{\hyperlink{namespacewebsocketpp_a6b3d26a10ee7229b84b776786332631d}{connection\_hdl}}\ hdl)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00566}00566\ \ \ \ \ \ \ \ \ m\_connection\_hdl\ =\ hdl;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00567}00567\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00568}00568\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00570}00570\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00580}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a0c31a1546701021f547ae2f21126a473}{00580}}\ \ \ \ \ lib::error\_code\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a0c31a1546701021f547ae2f21126a473}{dispatch}}(\mbox{\hyperlink{namespacewebsocketpp_1_1transport_a6658447b2e10f4c712dd792aad0e0c78}{dispatch\_handler}}\ handler)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00581}00581\ \ \ \ \ \ \ \ \ handler();}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00582}00582\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ lib::error\_code();}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00583}00583\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00584}00584\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00586}00586\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00593}\mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a2db617fadc96d53034eae1d0f3f1a68a}{00593}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a2db617fadc96d53034eae1d0f3f1a68a}{async\_shutdown}}(\mbox{\hyperlink{namespacewebsocketpp_1_1transport_af39aff6fc4cb76f7df0d5322b734d156}{transport::shutdown\_handler}}\ handler)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00594}00594\ \ \ \ \ \ \ \ \ lib::error\_code\ ec;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00595}00595\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00596}00596\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_shutdown\_handler)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00597}00597\ \ \ \ \ \ \ \ \ \ \ \ \ ec\ =\ m\_shutdown\_handler(m\_connection\_hdl);}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00598}00598\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00599}00599\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00600}00600\ \ \ \ \ \ \ \ \ handler(ec);}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00601}00601\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00602}00602\ \textcolor{keyword}{private}:}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00603}00603\ \ \ \ \ \textcolor{keywordtype}{void}\ read(std::istream\ \&in)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00604}00604\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}iostream\_con\ read"{}});}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00605}00605\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00606}00606\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (in.good())\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00607}00607\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!m\_reading)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00608}00608\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_elog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_a0b1dbc650c6f2711522c096496423726}{log::elevel::devel}},\textcolor{stringliteral}{"{}write\ while\ not\ reading"{}});}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00609}00609\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00610}00610\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00611}00611\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00612}00612\ \ \ \ \ \ \ \ \ \ \ \ \ in.read(m\_buf+m\_cursor,\textcolor{keyword}{static\_cast<}std::streamsize\textcolor{keyword}{>}(m\_len-\/m\_cursor));}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00613}00613\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00614}00614\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (in.gcount()\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00615}00615\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_elog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_a0b1dbc650c6f2711522c096496423726}{log::elevel::devel}},\textcolor{stringliteral}{"{}read\ zero\ bytes"{}});}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00616}00616\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00617}00617\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00618}00618\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00619}00619\ \ \ \ \ \ \ \ \ \ \ \ \ m\_cursor\ +=\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(in.gcount());}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00620}00620\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00621}00621\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ error\ handling}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00622}00622\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (in.bad())\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00623}00623\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_reading\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00624}00624\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ complete\_read(make\_error\_code(\mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1iostream_1_1error_a647b428e260748d7606c92255e1e9737ad46c640654d1d96c517444d95d24da45}{error::bad\_stream}}));}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00625}00625\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00626}00626\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00627}00627\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_cursor\ >=\ m\_bytes\_needed)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00628}00628\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_reading\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00629}00629\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ complete\_read(lib::error\_code());}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00630}00630\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00631}00631\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00632}00632\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00633}00633\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00634}00634\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ read\_some\_impl(\textcolor{keywordtype}{char}\ \textcolor{keyword}{const}\ *\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a855e99b645b13e7905d074d02fe0bff5}{buf}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a7360b55975153b822efc5217b7734e6a}{len}})\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00635}00635\ \ \ \ \ \ \ \ \ m\_alog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1alevel_a65ec21c75999c993c25c72569018f576}{log::alevel::devel}},\textcolor{stringliteral}{"{}iostream\_con\ read\_some"{}});}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00636}00636\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00637}00637\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!m\_reading)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00638}00638\ \ \ \ \ \ \ \ \ \ \ \ \ m\_elog.write(\mbox{\hyperlink{structwebsocketpp_1_1log_1_1elevel_a0b1dbc650c6f2711522c096496423726}{log::elevel::devel}},\textcolor{stringliteral}{"{}write\ while\ not\ reading"{}});}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00639}00639\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00640}00640\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00641}00641\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00642}00642\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ bytes\_to\_copy\ =\ (std::min)(\mbox{\hyperlink{yubihsm__pkcs11_8c_a7360b55975153b822efc5217b7734e6a}{len}},m\_len-\/m\_cursor);}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00643}00643\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00644}00644\ \ \ \ \ \ \ \ \ std::copy(\mbox{\hyperlink{yubihsm__pkcs11_8c_a855e99b645b13e7905d074d02fe0bff5}{buf}},\mbox{\hyperlink{yubihsm__pkcs11_8c_a855e99b645b13e7905d074d02fe0bff5}{buf}}+bytes\_to\_copy,m\_buf+m\_cursor);}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00645}00645\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00646}00646\ \ \ \ \ \ \ \ \ m\_cursor\ +=\ bytes\_to\_copy;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00647}00647\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00648}00648\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_cursor\ >=\ m\_bytes\_needed)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00649}00649\ \ \ \ \ \ \ \ \ \ \ \ \ complete\_read(lib::error\_code());}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00650}00650\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00651}00651\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00652}00652\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ bytes\_to\_copy;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00653}00653\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00654}00654\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00656}00656\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00671}00671\ \ \ \ \ \textcolor{keywordtype}{void}\ complete\_read(lib::error\_code\ \textcolor{keyword}{const}\ \&\ ec)\ \{}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00672}00672\ \ \ \ \ \ \ \ \ m\_reading\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00673}00673\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00674}00674\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_1_1transport_a3a9b2ed54dfcc6ebe7d7e6b4c02f53fb}{read\_handler}}\ handler\ =\ m\_read\_handler;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00675}00675\ \ \ \ \ \ \ \ \ m\_read\_handler\ =\ \mbox{\hyperlink{namespacewebsocketpp_1_1transport_a3a9b2ed54dfcc6ebe7d7e6b4c02f53fb}{read\_handler}}();}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00676}00676\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00677}00677\ \ \ \ \ \ \ \ \ handler(ec,m\_cursor);}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00678}00678\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00679}00679\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00680}00680\ \ \ \ \ \textcolor{comment}{//\ Read\ space\ (Protected\ by\ m\_read\_mutex)}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00681}00681\ \ \ \ \ \textcolor{keywordtype}{char}\ *\ \ \ \ \ \ \ \ \ \ m\_buf;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00682}00682\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \ \ \ \ \ \ \ \ \ m\_len;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00683}00683\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \ \ \ \ \ \ \ \ \ m\_bytes\_needed;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00684}00684\ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_1_1transport_a3a9b2ed54dfcc6ebe7d7e6b4c02f53fb}{read\_handler}}\ \ \ \ m\_read\_handler;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00685}00685\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \ \ \ \ \ \ \ \ \ m\_cursor;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00686}00686\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00687}00687\ \ \ \ \ \textcolor{comment}{//\ transport\ resources}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00688}00688\ \ \ \ \ std::ostream\ *\ \ m\_output\_stream;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00689}00689\ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_a6b3d26a10ee7229b84b776786332631d}{connection\_hdl}}\ \ m\_connection\_hdl;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00690}00690\ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1iostream_abc22b834c2d0c698d6c87e51d5bfad2c}{write\_handler}}\ \ \ m\_write\_handler;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00691}00691\ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1iostream_a21982146513c0b5580786c3af5dd2878}{vector\_write\_handler}}\ m\_vector\_write\_handler;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00692}00692\ \ \ \ \ \mbox{\hyperlink{namespacewebsocketpp_1_1transport_1_1iostream_a3563ce2cca06b1466f7d76ecb8eb4a0b}{shutdown\_handler}}\ \ \ \ m\_shutdown\_handler;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00693}00693\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00694}00694\ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ m\_reading;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00695}00695\ \ \ \ \ \textcolor{keywordtype}{bool}\ \textcolor{keyword}{const}\ \ \ \ \ \ m\_is\_server;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00696}00696\ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ m\_is\_secure;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00697}00697\ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a69b22a7cce2e247dca483bb22805c1be}{alog\_type}}\ \&\ \ \ \ \ m\_alog;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00698}00698\ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a4d6d7400af7585fb72507c40a2575434}{elog\_type}}\ \&\ \ \ \ \ m\_elog;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00699}00699\ \ \ \ \ std::string\ \ \ \ \ m\_remote\_endpoint;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00700}00700\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00701}00701\ \ \ \ \ \textcolor{comment}{//\ This\ lock\ ensures\ that\ only\ one\ thread\ can\ edit\ read\ data\ for\ this}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00702}00702\ \ \ \ \ \textcolor{comment}{//\ connection.\ This\ is\ a\ very\ coarse\ lock\ that\ is\ basically\ locked\ all\ the}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00703}00703\ \ \ \ \ \textcolor{comment}{//\ time.\ The\ nature\ of\ the\ connection\ is\ such\ that\ it\ cannot\ be}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00704}00704\ \ \ \ \ \textcolor{comment}{//\ parallelized,\ the\ locking\ is\ here\ to\ prevent\ intra-\/connection\ concurrency}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00705}00705\ \ \ \ \ \textcolor{comment}{//\ in\ order\ to\ allow\ inter-\/connection\ concurrency.}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00706}00706\ \ \ \ \ \mbox{\hyperlink{classwebsocketpp_1_1transport_1_1iostream_1_1connection_a5e7456b9b53e4c7a8497fc1ee53836ca}{mutex\_type}}\ \ \ \ \ \ m\_read\_mutex;}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00707}00707\ \};}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00708}00708\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00709}00709\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00710}00710\ \}\ \textcolor{comment}{//\ namespace\ iostream}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00711}00711\ \}\ \textcolor{comment}{//\ namespace\ transport}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00712}00712\ \}\ \textcolor{comment}{//\ namespace\ websocketpp}}
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00713}00713\ }
\DoxyCodeLine{\Hypertarget{transport_2iostream_2connection_8hpp_source_l00714}00714\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ WEBSOCKETPP\_TRANSPORT\_IOSTREAM\_CON\_HPP}}

\end{DoxyCode}
