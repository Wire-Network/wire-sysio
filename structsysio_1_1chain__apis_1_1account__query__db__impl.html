<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wire Sysio: sysio::chain_apis::account_query_db_impl Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Wire Sysio<span id="projectnumber">&#160;Wire Sysion 1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('structsysio_1_1chain__apis_1_1account__query__db__impl.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structsysio_1_1chain__apis_1_1account__query__db__impl-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">sysio::chain_apis::account_query_db_impl Struct Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for sysio::chain_apis::account_query_db_impl:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1chain__apis_1_1account__query__db__impl__coll__graph.png" border="0" usemap="#asysio_1_1chain__apis_1_1account__query__db__impl_coll__map" alt="Collaboration graph"/></div>
<map name="asysio_1_1chain__apis_1_1account__query__db__impl_coll__map" id="asysio_1_1chain__apis_1_1account__query__db__impl_coll__map">
<area shape="rect" title=" " alt="" coords="661,164,819,205"/>
<area shape="rect" href="classsysio_1_1chain_1_1controller.html" title=" " alt="" coords="404,172,556,197"/>
<area shape="poly" title=" " alt="" coords="572,182,660,182,660,187,572,187"/>
<area shape="rect" title=" " alt="" coords="35,8,189,33"/>
<area shape="poly" title=" " alt="" coords="204,14,247,18,293,25,338,37,381,57,414,82,441,114,475,170,470,172,437,117,410,86,378,61,337,42,292,30,247,23,204,20"/>
<area shape="rect" title=" " alt="" coords="38,57,186,98"/>
<area shape="poly" title=" " alt="" coords="202,73,290,82,336,91,381,106,407,119,431,136,468,169,464,173,428,140,404,124,379,111,335,97,289,87,202,79"/>
<area shape="rect" title=" " alt="" coords="42,123,182,163"/>
<area shape="poly" title=" " alt="" coords="197,150,404,173,403,179,197,155"/>
<area shape="rect" title=" " alt="" coords="37,187,187,243"/>
<area shape="poly" title=" " alt="" coords="202,208,379,195,403,193,403,198,380,201,203,214"/>
<area shape="rect" title=" " alt="" coords="5,266,219,337"/>
<area shape="poly" title=" " alt="" coords="233,270,379,226,451,195,453,200,381,231,234,276"/>
<area shape="rect" title=" " alt="" coords="48,361,176,402"/>
<area shape="poly" title=" " alt="" coords="190,364,284,336,332,315,378,289,406,267,431,241,467,196,472,199,435,245,410,271,381,294,335,320,285,341,192,369"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a80e7966e67f2a780ce1f804ca2239f4c" id="r_a80e7966e67f2a780ce1f804ca2239f4c"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a80e7966e67f2a780ce1f804ca2239f4c">permission_set_t</a> = std::set&lt;<a class="el" href="structsysio_1_1chain_1_1permission__level.html">chain::permission_level</a>&gt;</td></tr>
<tr class="separator:a80e7966e67f2a780ce1f804ca2239f4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af147fd6d9ed179c6f379965feb0579a6" id="r_af147fd6d9ed179c6f379965feb0579a6"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af147fd6d9ed179c6f379965feb0579a6">cached_trace_map_t</a> = std::map&lt;<a class="el" href="namespacesysio_1_1chain.html#aa85a3b49b3b219d1e3840567579e7e63">chain::transaction_id_type</a>, <a class="el" href="namespacesysio_1_1chain.html#a4ee2867a6bec961c7a78b203cfd76be9">chain::transaction_trace_ptr</a>&gt;</td></tr>
<tr class="separator:af147fd6d9ed179c6f379965feb0579a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdd57326fce804f4a467539158816e88" id="r_abdd57326fce804f4a467539158816e88"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abdd57326fce804f4a467539158816e88">onblock_trace_t</a> = std::optional&lt;<a class="el" href="namespacesysio_1_1chain.html#a4ee2867a6bec961c7a78b203cfd76be9">chain::transaction_trace_ptr</a>&gt;</td></tr>
<tr class="separator:abdd57326fce804f4a467539158816e88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab624636989896e7e7aac983cd4eb12ec" id="r_ab624636989896e7e7aac983cd4eb12ec"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab624636989896e7e7aac983cd4eb12ec">time_map_t</a> = std::map&lt;<a class="el" href="classfc_1_1time__point.html">fc::time_point</a>, <a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;</td></tr>
<tr class="separator:ab624636989896e7e7aac983cd4eb12ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abebad38a4e12d41c47569dc60125cdcd" id="r_abebad38a4e12d41c47569dc60125cdcd"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abebad38a4e12d41c47569dc60125cdcd">name_bimap_t</a> = bimap&lt;multiset_of&lt;weighted&lt;<a class="el" href="structsysio_1_1chain_1_1permission__level.html">chain::permission_level</a>&gt;&gt;, multiset_of&lt;permission_info::cref&gt;&gt;</td></tr>
<tr class="separator:abebad38a4e12d41c47569dc60125cdcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea2e43cf58e004caaac0c903a10a076d" id="r_aea2e43cf58e004caaac0c903a10a076d"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aea2e43cf58e004caaac0c903a10a076d">key_bimap_t</a> = bimap&lt;multiset_of&lt;weighted&lt;<a class="el" href="namespacesysio_1_1chain.html#a0628a11f388cd2e43b1ccc1260a1042f">chain::public_key_type</a>&gt;&gt;, multiset_of&lt;permission_info::cref&gt;&gt;</td></tr>
<tr class="separator:aea2e43cf58e004caaac0c903a10a076d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7159b63787fb0ccdda7f45536bbbdf03" id="r_a7159b63787fb0ccdda7f45536bbbdf03"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7159b63787fb0ccdda7f45536bbbdf03">account_query_db_impl</a> (const <a class="el" href="classsysio_1_1chain_1_1controller.html">chain::controller</a> &amp;<a class="el" href="classsysio_1_1chain_1_1controller.html">controller</a>)</td></tr>
<tr class="separator:a7159b63787fb0ccdda7f45536bbbdf03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e19a7f902401bfa1de26cb0924c380f" id="r_a9e19a7f902401bfa1de26cb0924c380f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9e19a7f902401bfa1de26cb0924c380f">build_account_query_map</a> ()</td></tr>
<tr class="separator:a9e19a7f902401bfa1de26cb0924c380f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fda1043cb0c69e99385511e8a23c50f" id="r_a8fda1043cb0c69e99385511e8a23c50f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8fda1043cb0c69e99385511e8a23c50f">add_to_bimaps</a> (const permission_info &amp;pi, const <a class="el" href="classsysio_1_1chain_1_1permission__object.html">chain::permission_object</a> &amp;po)</td></tr>
<tr class="separator:a8fda1043cb0c69e99385511e8a23c50f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91acce27e2dee3eee42bc63d1d589919" id="r_a91acce27e2dee3eee42bc63d1d589919"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a91acce27e2dee3eee42bc63d1d589919">remove_from_bimaps</a> (const permission_info &amp;pi)</td></tr>
<tr class="separator:a91acce27e2dee3eee42bc63d1d589919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f81334b9ee80d92a1971d03e0bb0e36" id="r_a0f81334b9ee80d92a1971d03e0bb0e36"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0f81334b9ee80d92a1971d03e0bb0e36">is_rollback_required</a> (const <a class="el" href="namespacesysio_1_1chain.html#ab9b14f4554cc4a0da2c361e9757b1662">chain::block_state_ptr</a> &amp;bsp) const</td></tr>
<tr class="separator:a0f81334b9ee80d92a1971d03e0bb0e36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2789aac6391a10191d5aeb728fbe6410" id="r_a2789aac6391a10191d5aeb728fbe6410"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2789aac6391a10191d5aeb728fbe6410">last_updated_time_to_height</a> (const <a class="el" href="classfc_1_1time__point.html">fc::time_point</a> &amp;last_updated)</td></tr>
<tr class="separator:a2789aac6391a10191d5aeb728fbe6410"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55b5594b7d59cd2c7c38207cb988a44c" id="r_a55b5594b7d59cd2c7c38207cb988a44c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a55b5594b7d59cd2c7c38207cb988a44c">rollback_to_before</a> (const <a class="el" href="namespacesysio_1_1chain.html#ab9b14f4554cc4a0da2c361e9757b1662">chain::block_state_ptr</a> &amp;bsp)</td></tr>
<tr class="separator:a55b5594b7d59cd2c7c38207cb988a44c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af06f4fce80c950b9b1c20a552b4a2a15" id="r_af06f4fce80c950b9b1c20a552b4a2a15"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af06f4fce80c950b9b1c20a552b4a2a15">cache_transaction_trace</a> (const <a class="el" href="namespacesysio_1_1chain.html#a4ee2867a6bec961c7a78b203cfd76be9">chain::transaction_trace_ptr</a> &amp;trace)</td></tr>
<tr class="separator:af06f4fce80c950b9b1c20a552b4a2a15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa224e5ba2c6565d1626adbd9cc9d997a" id="r_aa224e5ba2c6565d1626adbd9cc9d997a"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa224e5ba2c6565d1626adbd9cc9d997a">commit_block_prelock</a> (const <a class="el" href="namespacesysio_1_1chain.html#ab9b14f4554cc4a0da2c361e9757b1662">chain::block_state_ptr</a> &amp;bsp) const</td></tr>
<tr class="separator:aa224e5ba2c6565d1626adbd9cc9d997a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa184af1bc686f0c89bb5837f05ef30fb" id="r_aa184af1bc686f0c89bb5837f05ef30fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa184af1bc686f0c89bb5837f05ef30fb">commit_block</a> (const <a class="el" href="namespacesysio_1_1chain.html#ab9b14f4554cc4a0da2c361e9757b1662">chain::block_state_ptr</a> &amp;bsp)</td></tr>
<tr class="separator:aa184af1bc686f0c89bb5837f05ef30fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12a133f315d14e1fda76e6ee64e0c078" id="r_a12a133f315d14e1fda76e6ee64e0c078"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsysio_1_1chain__apis_1_1account__query__db_1_1get__accounts__by__authorizers__result.html">account_query_db::get_accounts_by_authorizers_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a12a133f315d14e1fda76e6ee64e0c078">get_accounts_by_authorizers</a> (const <a class="el" href="structsysio_1_1chain__apis_1_1account__query__db_1_1get__accounts__by__authorizers__params.html">account_query_db::get_accounts_by_authorizers_params</a> &amp;args) const</td></tr>
<tr class="separator:a12a133f315d14e1fda76e6ee64e0c078"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a0eaaa63915f583ca51f38307d557f7e9" id="r_a0eaaa63915f583ca51f38307d557f7e9"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classsysio_1_1chain_1_1controller.html">chain::controller</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0eaaa63915f583ca51f38307d557f7e9">controller</a></td></tr>
<tr class="memdesc:a0eaaa63915f583ca51f38307d557f7e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">the controller to read data from  <br /></td></tr>
<tr class="separator:a0eaaa63915f583ca51f38307d557f7e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfb769f3aefd6346ad9172f6726d253d" id="r_acfb769f3aefd6346ad9172f6726d253d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#af147fd6d9ed179c6f379965feb0579a6">cached_trace_map_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acfb769f3aefd6346ad9172f6726d253d">cached_trace_map</a></td></tr>
<tr class="memdesc:acfb769f3aefd6346ad9172f6726d253d"><td class="mdescLeft">&#160;</td><td class="mdescRight">temporary cache of uncommitted traces  <br /></td></tr>
<tr class="separator:acfb769f3aefd6346ad9172f6726d253d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a6e477d5ab8af17385632e6cc16bbdd" id="r_a6a6e477d5ab8af17385632e6cc16bbdd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#abdd57326fce804f4a467539158816e88">onblock_trace_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6a6e477d5ab8af17385632e6cc16bbdd">onblock_trace</a></td></tr>
<tr class="memdesc:a6a6e477d5ab8af17385632e6cc16bbdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">temporary cache of on_block trace  <br /></td></tr>
<tr class="separator:a6a6e477d5ab8af17385632e6cc16bbdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf9eb275a2909c7f837e9514146468d5" id="r_adf9eb275a2909c7f837e9514146468d5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#ab624636989896e7e7aac983cd4eb12ec">time_map_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adf9eb275a2909c7f837e9514146468d5">time_to_block_num</a></td></tr>
<tr class="separator:adf9eb275a2909c7f837e9514146468d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba57026fbb7d549b2431c788a5bd3a2d" id="r_aba57026fbb7d549b2431c788a5bd3a2d"><td class="memItemLeft" align="right" valign="top">permission_info_index_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aba57026fbb7d549b2431c788a5bd3a2d">permission_info_index</a></td></tr>
<tr class="memdesc:aba57026fbb7d549b2431c788a5bd3a2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">multi-index that holds ephemeral indices  <br /></td></tr>
<tr class="separator:aba57026fbb7d549b2431c788a5bd3a2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bf2e9f0ed9cd1f0762888b22ad55024" id="r_a6bf2e9f0ed9cd1f0762888b22ad55024"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#abebad38a4e12d41c47569dc60125cdcd">name_bimap_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6bf2e9f0ed9cd1f0762888b22ad55024">name_bimap</a></td></tr>
<tr class="memdesc:a6bf2e9f0ed9cd1f0762888b22ad55024"><td class="mdescLeft">&#160;</td><td class="mdescRight">many:many bimap of names:permission_infos  <br /></td></tr>
<tr class="separator:a6bf2e9f0ed9cd1f0762888b22ad55024"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaaa7d466a003a720717341ca7fda6c5" id="r_adaaa7d466a003a720717341ca7fda6c5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#aea2e43cf58e004caaac0c903a10a076d">key_bimap_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adaaa7d466a003a720717341ca7fda6c5">key_bimap</a></td></tr>
<tr class="memdesc:adaaa7d466a003a720717341ca7fda6c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">many:many bimap of keys:permission_infos  <br /></td></tr>
<tr class="separator:adaaa7d466a003a720717341ca7fda6c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad111bde83946593be763eeb7e3541fdf" id="r_ad111bde83946593be763eeb7e3541fdf"><td class="memItemLeft" align="right" valign="top">std::shared_mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad111bde83946593be763eeb7e3541fdf">rw_mutex</a></td></tr>
<tr class="memdesc:ad111bde83946593be763eeb7e3541fdf"><td class="mdescLeft">&#160;</td><td class="mdescRight">mutex for read/write locking on the Multi-index and bimaps  <br /></td></tr>
<tr class="separator:ad111bde83946593be763eeb7e3541fdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation details of the account query DB </p>

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00131">131</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="af147fd6d9ed179c6f379965feb0579a6" name="af147fd6d9ed179c6f379965feb0579a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af147fd6d9ed179c6f379965feb0579a6">&#9670;&#160;</a></span>cached_trace_map_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="#af147fd6d9ed179c6f379965feb0579a6">sysio::chain_apis::account_query_db_impl::cached_trace_map_t</a> = std::map&lt;<a class="el" href="namespacesysio_1_1chain.html#aa85a3b49b3b219d1e3840567579e7e63">chain::transaction_id_type</a>, <a class="el" href="namespacesysio_1_1chain.html#a4ee2867a6bec961c7a78b203cfd76be9">chain::transaction_trace_ptr</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convenience aliases </p>

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00482">482</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>

</div>
</div>
<a id="aea2e43cf58e004caaac0c903a10a076d" name="aea2e43cf58e004caaac0c903a10a076d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea2e43cf58e004caaac0c903a10a076d">&#9670;&#160;</a></span>key_bimap_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="#aea2e43cf58e004caaac0c903a10a076d">sysio::chain_apis::account_query_db_impl::key_bimap_t</a> = bimap&lt;multiset_of&lt;weighted&lt;<a class="el" href="namespacesysio_1_1chain.html#a0628a11f388cd2e43b1ccc1260a1042f">chain::public_key_type</a>&gt;&gt;, multiset_of&lt;permission_info::cref&gt;&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00495">495</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>

</div>
</div>
<a id="abebad38a4e12d41c47569dc60125cdcd" name="abebad38a4e12d41c47569dc60125cdcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abebad38a4e12d41c47569dc60125cdcd">&#9670;&#160;</a></span>name_bimap_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="#abebad38a4e12d41c47569dc60125cdcd">sysio::chain_apis::account_query_db_impl::name_bimap_t</a> = bimap&lt;multiset_of&lt;weighted&lt;<a class="el" href="structsysio_1_1chain_1_1permission__level.html">chain::permission_level</a>&gt;&gt;, multiset_of&lt;permission_info::cref&gt;&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00494">494</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>

</div>
</div>
<a id="abdd57326fce804f4a467539158816e88" name="abdd57326fce804f4a467539158816e88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdd57326fce804f4a467539158816e88">&#9670;&#160;</a></span>onblock_trace_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="#abdd57326fce804f4a467539158816e88">sysio::chain_apis::account_query_db_impl::onblock_trace_t</a> = std::optional&lt;<a class="el" href="namespacesysio_1_1chain.html#a4ee2867a6bec961c7a78b203cfd76be9">chain::transaction_trace_ptr</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00483">483</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>

</div>
</div>
<a id="a80e7966e67f2a780ce1f804ca2239f4c" name="a80e7966e67f2a780ce1f804ca2239f4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80e7966e67f2a780ce1f804ca2239f4c">&#9670;&#160;</a></span>permission_set_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="#a80e7966e67f2a780ce1f804ca2239f4c">sysio::chain_apis::account_query_db_impl::permission_set_t</a> = std::set&lt;<a class="el" href="structsysio_1_1chain_1_1permission__level.html">chain::permission_level</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00302">302</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>

</div>
</div>
<a id="ab624636989896e7e7aac983cd4eb12ec" name="ab624636989896e7e7aac983cd4eb12ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab624636989896e7e7aac983cd4eb12ec">&#9670;&#160;</a></span>time_map_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="#ab624636989896e7e7aac983cd4eb12ec">sysio::chain_apis::account_query_db_impl::time_map_t</a> = std::map&lt;<a class="el" href="classfc_1_1time__point.html">fc::time_point</a>, <a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00489">489</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7159b63787fb0ccdda7f45536bbbdf03" name="a7159b63787fb0ccdda7f45536bbbdf03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7159b63787fb0ccdda7f45536bbbdf03">&#9670;&#160;</a></span>account_query_db_impl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sysio::chain_apis::account_query_db_impl::account_query_db_impl </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classsysio_1_1chain_1_1controller.html">chain::controller</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>controller</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00132">132</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  133</span>      :<a class="code hl_variable" href="#a0eaaa63915f583ca51f38307d557f7e9">controller</a>(<a class="code hl_class" href="classsysio_1_1chain_1_1controller.html">controller</a>)</div>
<div class="line"><span class="lineno">  134</span>      {}</div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html">sysio::chain::controller</a></div><div class="ttdef"><b>Definition</b> <a href="controller_8hpp_source.html#l00063">controller.hpp:63</a></div></div>
<div class="ttc" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_html_a0eaaa63915f583ca51f38307d557f7e9"><div class="ttname"><a href="#a0eaaa63915f583ca51f38307d557f7e9">sysio::chain_apis::account_query_db_impl::controller</a></div><div class="ttdeci">const chain::controller &amp; controller</div><div class="ttdoc">the controller to read data from</div><div class="ttdef"><b>Definition</b> <a href="account__query__db_8cpp_source.html#l00485">account_query_db.cpp:485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a8fda1043cb0c69e99385511e8a23c50f" name="a8fda1043cb0c69e99385511e8a23c50f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fda1043cb0c69e99385511e8a23c50f">&#9670;&#160;</a></span>add_to_bimaps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain_apis::account_query_db_impl::add_to_bimaps </td>
          <td>(</td>
          <td class="paramtype">const permission_info &amp;</td>          <td class="paramname"><span class="paramname"><em>pi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classsysio_1_1chain_1_1permission__object.html">chain::permission_object</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>po</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Add a permission to the bimaps for keys and accounts </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pi</td><td>- the ephemeral permission info structure being added </td></tr>
    <tr><td class="paramname">po</td><td>- the chain data associted with this permission </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00171">171</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  171</span>                                                                                        {</div>
<div class="line"><span class="lineno">  172</span>         <span class="comment">// For each account, add this permission info&#39;s non-owning reference to the bimap for accounts</span></div>
<div class="line"><span class="lineno">  173</span>         <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a> : po.auth.accounts) {</div>
<div class="line"><span class="lineno">  174</span>            <a class="code hl_variable" href="#a6bf2e9f0ed9cd1f0762888b22ad55024">name_bimap</a>.insert(name_bimap_t::value_type {{<a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.permission, <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.weight}, pi});</div>
<div class="line"><span class="lineno">  175</span>         }</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span>         <span class="comment">// for each key, add this permission info&#39;s non-owning reference to the bimap for keys</span></div>
<div class="line"><span class="lineno">  178</span>         <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; k: po.auth.keys) {</div>
<div class="line"><span class="lineno">  179</span>            <a class="code hl_typedef" href="namespacesysio_1_1chain.html#a0628a11f388cd2e43b1ccc1260a1042f">chain::public_key_type</a> key = k.key;</div>
<div class="line"><span class="lineno">  180</span>            <a class="code hl_variable" href="#adaaa7d466a003a720717341ca7fda6c5">key_bimap</a>.insert(key_bimap_t::value_type {{std::move(key), k.weight}, pi});</div>
<div class="line"><span class="lineno">  181</span>         }</div>
<div class="line"><span class="lineno">  182</span>      }</div>
<div class="ttc" id="anamespacesysio_1_1chain_html_a0628a11f388cd2e43b1ccc1260a1042f"><div class="ttname"><a href="namespacesysio_1_1chain.html#a0628a11f388cd2e43b1ccc1260a1042f">sysio::chain::public_key_type</a></div><div class="ttdeci">fc::crypto::public_key public_key_type</div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2types_8hpp_source.html#l00076">types.hpp:76</a></div></div>
<div class="ttc" id="apointer_8h_html_aeeddce917cf130d62c370b8f216026dd"><div class="ttname"><a href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a></div><div class="ttdeci">const GenericPointer&lt; typename T::ValueType &gt; T2 T::AllocatorType &amp; a</div><div class="ttdef"><b>Definition</b> <a href="pointer_8h_source.html#l01181">pointer.h:1181</a></div></div>
<div class="ttc" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_html_a6bf2e9f0ed9cd1f0762888b22ad55024"><div class="ttname"><a href="#a6bf2e9f0ed9cd1f0762888b22ad55024">sysio::chain_apis::account_query_db_impl::name_bimap</a></div><div class="ttdeci">name_bimap_t name_bimap</div><div class="ttdoc">many:many bimap of names:permission_infos</div><div class="ttdef"><b>Definition</b> <a href="account__query__db_8cpp_source.html#l00502">account_query_db.cpp:502</a></div></div>
<div class="ttc" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_html_adaaa7d466a003a720717341ca7fda6c5"><div class="ttname"><a href="#adaaa7d466a003a720717341ca7fda6c5">sysio::chain_apis::account_query_db_impl::key_bimap</a></div><div class="ttdeci">key_bimap_t key_bimap</div><div class="ttdoc">many:many bimap of keys:permission_infos</div><div class="ttdef"><b>Definition</b> <a href="account__query__db_8cpp_source.html#l00503">account_query_db.cpp:503</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1chain__apis_1_1account__query__db__impl_a8fda1043cb0c69e99385511e8a23c50f_icgraph.png" border="0" usemap="#astructsysio_1_1chain__apis_1_1account__query__db__impl_a8fda1043cb0c69e99385511e8a23c50f_icgraph" alt=""/></div>
<map name="astructsysio_1_1chain__apis_1_1account__query__db__impl_a8fda1043cb0c69e99385511e8a23c50f_icgraph" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_a8fda1043cb0c69e99385511e8a23c50f_icgraph">
<area shape="rect" title=" " alt="" coords="440,71,598,126"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#a9e19a7f902401bfa1de26cb0924c380f" title=" " alt="" coords="212,5,392,61"/>
<area shape="poly" title=" " alt="" coords="424,73,392,63,393,58,426,68"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#aa184af1bc686f0c89bb5837f05ef30fb" title=" " alt="" coords="5,104,164,160"/>
<area shape="poly" title=" " alt="" coords="425,108,164,128,164,123,424,103"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#a55b5594b7d59cd2c7c38207cb988a44c" title=" " alt="" coords="223,136,381,192"/>
<area shape="poly" title=" " alt="" coords="426,129,382,143,381,137,425,124"/>
<area shape="poly" title=" " alt="" coords="207,153,164,146,165,141,208,147"/>
</map>
</div>

</div>
</div>
<a id="a9e19a7f902401bfa1de26cb0924c380f" name="a9e19a7f902401bfa1de26cb0924c380f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e19a7f902401bfa1de26cb0924c380f">&#9670;&#160;</a></span>build_account_query_map()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain_apis::account_query_db_impl::build_account_query_map </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Build the initial database from the chain controller by extracting the information contained in the blockchain state at the current HEAD </p>

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00140">140</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  140</span>                                     {</div>
<div class="line"><span class="lineno">  141</span>         std::unique_lock write_lock(<a class="code hl_variable" href="#ad111bde83946593be763eeb7e3541fdf">rw_mutex</a>);</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>         <a class="code hl_define" href="logger_8hpp.html#a831cf08dc63704c11fd154132c6e8bdb">ilog</a>(<span class="stringliteral">&quot;Building account query DB&quot;</span>);</div>
<div class="line"><span class="lineno">  144</span>         <span class="keyword">auto</span> <a class="code hl_enumvalue" href="namespace_w_a_s_m.html#a9690a14428419003297ae35f505b5103aea2b2676c28c0db26d39331a336c6b92">start</a> = <a class="code hl_function" href="classfc_1_1time__point.html#aa164ff1268a16d4b32afcff181f6100e">fc::time_point::now</a>();</div>
<div class="line"><span class="lineno">  145</span>         <span class="keyword">const</span> <span class="keyword">auto</span>&amp; index = <a class="code hl_class" href="classsysio_1_1chain_1_1controller.html">controller</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0c79d00dae8c0d90efc18f4d091b2391">db</a>().<a class="code hl_function" href="classchainbase_1_1database.html#a4d5297635dcf70be481d9b600da9bc13">get_index</a>&lt;<a class="code hl_typedef" href="namespacesysio_1_1chain.html#a4e24a1668746342d40487d1019880986">chain::permission_index</a>&gt;().indices().get&lt;by_id&gt;();</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>         <span class="comment">// build a initial time to block number map</span></div>
<div class="line"><span class="lineno">  148</span>         <span class="keyword">const</span> <span class="keyword">auto</span> lib_num = <a class="code hl_class" href="classsysio_1_1chain_1_1controller.html">controller</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a53495de416021a4e56e889e771b25a52">last_irreversible_block_num</a>();</div>
<div class="line"><span class="lineno">  149</span>         <span class="keyword">const</span> <span class="keyword">auto</span> head_num = <a class="code hl_class" href="classsysio_1_1chain_1_1controller.html">controller</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a33704b4936bb9bbd2ea6b0874ca521b4">head_block_num</a>();</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>         <span class="keywordflow">for</span> (<a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> block_num = lib_num + 1; block_num &lt;= head_num; block_num++) {</div>
<div class="line"><span class="lineno">  152</span>            <span class="keyword">const</span> <span class="keyword">auto</span> block_p = <a class="code hl_class" href="classsysio_1_1chain_1_1controller.html">controller</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a1379e43325b7e517a058bddce15571eb">fetch_block_by_number</a>(block_num);</div>
<div class="line"><span class="lineno">  153</span>            <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(block_p, chain::plugin_exception, <span class="stringliteral">&quot;cannot fetch reversible block ${block_num}, required for account_db initialization&quot;</span>, (<span class="stringliteral">&quot;block_num&quot;</span>, block_num));</div>
<div class="line"><span class="lineno">  154</span>            <a class="code hl_variable" href="#adf9eb275a2909c7f837e9514146468d5">time_to_block_num</a>.emplace(block_p-&gt;timestamp.to_time_point(), block_num);</div>
<div class="line"><span class="lineno">  155</span>         }</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>         <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; po : index ) {</div>
<div class="line"><span class="lineno">  158</span>            <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> last_updated_height = <a class="code hl_function" href="#a2789aac6391a10191d5aeb728fbe6410">last_updated_time_to_height</a>(po.last_updated);</div>
<div class="line"><span class="lineno">  159</span>            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; pi = <a class="code hl_variable" href="#aba57026fbb7d549b2431c788a5bd3a2d">permission_info_index</a>.emplace( permission_info{ po.owner, po.name, last_updated_height, po.auth.threshold } ).first;</div>
<div class="line"><span class="lineno">  160</span>            <a class="code hl_function" href="#a8fda1043cb0c69e99385511e8a23c50f">add_to_bimaps</a>(*pi, po);</div>
<div class="line"><span class="lineno">  161</span>         }</div>
<div class="line"><span class="lineno">  162</span>         <span class="keyword">auto</span> duration = <a class="code hl_function" href="classfc_1_1time__point.html#aa164ff1268a16d4b32afcff181f6100e">fc::time_point::now</a>() - <a class="code hl_enumvalue" href="namespace_w_a_s_m.html#a9690a14428419003297ae35f505b5103aea2b2676c28c0db26d39331a336c6b92">start</a>;</div>
<div class="line"><span class="lineno">  163</span>         <a class="code hl_define" href="logger_8hpp.html#a831cf08dc63704c11fd154132c6e8bdb">ilog</a>(<span class="stringliteral">&quot;Finished building account query DB in ${sec}&quot;</span>, (<span class="stringliteral">&quot;sec&quot;</span>, (duration.count() / 1&#39;000&#39;000.0 )));</div>
<div class="line"><span class="lineno">  164</span>      }</div>
<div class="ttc" id="achain_2include_2sysio_2chain_2exceptions_8hpp_html_a40c2826a6fba35c1ffbf912bdf559792"><div class="ttname"><a href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a></div><div class="ttdeci">#define SYS_ASSERT(expr, exc_type, FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2exceptions_8hpp_source.html#l00007">exceptions.hpp:7</a></div></div>
<div class="ttc" id="aclasschainbase_1_1database_html_a4d5297635dcf70be481d9b600da9bc13"><div class="ttname"><a href="classchainbase_1_1database.html#a4d5297635dcf70be481d9b600da9bc13">chainbase::database::get_index</a></div><div class="ttdeci">const generic_index&lt; MultiIndexType &gt; &amp; get_index() const</div><div class="ttdef"><b>Definition</b> <a href="chainbase_8hpp_source.html#l00425">chainbase.hpp:425</a></div></div>
<div class="ttc" id="aclassfc_1_1time__point_html_aa164ff1268a16d4b32afcff181f6100e"><div class="ttname"><a href="classfc_1_1time__point.html#aa164ff1268a16d4b32afcff181f6100e">fc::time_point::now</a></div><div class="ttdeci">static time_point now()</div><div class="ttdef"><b>Definition</b> <a href="time_8cpp_source.html#l00014">time.cpp:14</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_a0c79d00dae8c0d90efc18f4d091b2391"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#a0c79d00dae8c0d90efc18f4d091b2391">sysio::chain::controller::db</a></div><div class="ttdeci">const chainbase::database &amp; db() const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l02646">controller.cpp:2646</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_a1379e43325b7e517a058bddce15571eb"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#a1379e43325b7e517a058bddce15571eb">sysio::chain::controller::fetch_block_by_number</a></div><div class="ttdeci">signed_block_ptr fetch_block_by_number(uint32_t block_num) const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l03074">controller.cpp:3074</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_a33704b4936bb9bbd2ea6b0874ca521b4"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#a33704b4936bb9bbd2ea6b0874ca521b4">sysio::chain::controller::head_block_num</a></div><div class="ttdeci">uint32_t head_block_num() const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l02949">controller.cpp:2949</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_a53495de416021a4e56e889e771b25a52"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#a53495de416021a4e56e889e771b25a52">sysio::chain::controller::last_irreversible_block_num</a></div><div class="ttdeci">uint32_t last_irreversible_block_num() const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l03046">controller.cpp:3046</a></div></div>
<div class="ttc" id="alogger_8hpp_html_a831cf08dc63704c11fd154132c6e8bdb"><div class="ttname"><a href="logger_8hpp.html#a831cf08dc63704c11fd154132c6e8bdb">ilog</a></div><div class="ttdeci">#define ilog(FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="logger_8hpp_source.html#l00118">logger.hpp:118</a></div></div>
<div class="ttc" id="anamespace_w_a_s_m_html_a9690a14428419003297ae35f505b5103aea2b2676c28c0db26d39331a336c6b92"><div class="ttname"><a href="namespace_w_a_s_m.html#a9690a14428419003297ae35f505b5103aea2b2676c28c0db26d39331a336c6b92">WASM::SectionType::start</a></div><div class="ttdeci">@ start</div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_a4e24a1668746342d40487d1019880986"><div class="ttname"><a href="namespacesysio_1_1chain.html#a4e24a1668746342d40487d1019880986">sysio::chain::permission_index</a></div><div class="ttdeci">chainbase::shared_multi_index_container&lt; permission_object, indexed_by&lt; ordered_unique&lt; tag&lt; by_id &gt;, member&lt; permission_object, permission_object::id_type, &amp;permission_object::id &gt; &gt;, ordered_unique&lt; tag&lt; by_parent &gt;, composite_key&lt; permission_object, member&lt; permission_object, permission_object::id_type, &amp;permission_object::parent &gt;, member&lt; permission_object, permission_object::id_type, &amp;permission_object::id &gt; &gt; &gt;, ordered_unique&lt; tag&lt; by_owner &gt;, composite_key&lt; permission_object, member&lt; permission_object, account_name, &amp;permission_object::owner &gt;, member&lt; permission_object, permission_name, &amp;permission_object::name &gt; &gt; &gt;, ordered_unique&lt; tag&lt; by_name &gt;, composite_key&lt; permission_object, member&lt; permission_object, permission_name, &amp;permission_object::name &gt;, member&lt; permission_object, permission_object::id_type, &amp;permission_object::id &gt; &gt; &gt; &gt; &gt; permission_index</div><div class="ttdef"><b>Definition</b> <a href="permission__object_8hpp_source.html#l00086">permission_object.hpp:86</a></div></div>
<div class="ttc" id="astdint_8h_html_a435d1572bf3f880d55459d9805097f62"><div class="ttname"><a href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></div><div class="ttdeci">unsigned int uint32_t</div><div class="ttdef"><b>Definition</b> <a href="stdint_8h_source.html#l00126">stdint.h:126</a></div></div>
<div class="ttc" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_html_a2789aac6391a10191d5aeb728fbe6410"><div class="ttname"><a href="#a2789aac6391a10191d5aeb728fbe6410">sysio::chain_apis::account_query_db_impl::last_updated_time_to_height</a></div><div class="ttdeci">uint32_t last_updated_time_to_height(const fc::time_point &amp;last_updated)</div><div class="ttdef"><b>Definition</b> <a href="account__query__db_8cpp_source.html#l00215">account_query_db.cpp:215</a></div></div>
<div class="ttc" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_html_a8fda1043cb0c69e99385511e8a23c50f"><div class="ttname"><a href="#a8fda1043cb0c69e99385511e8a23c50f">sysio::chain_apis::account_query_db_impl::add_to_bimaps</a></div><div class="ttdeci">void add_to_bimaps(const permission_info &amp;pi, const chain::permission_object &amp;po)</div><div class="ttdef"><b>Definition</b> <a href="account__query__db_8cpp_source.html#l00171">account_query_db.cpp:171</a></div></div>
<div class="ttc" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_html_aba57026fbb7d549b2431c788a5bd3a2d"><div class="ttname"><a href="#aba57026fbb7d549b2431c788a5bd3a2d">sysio::chain_apis::account_query_db_impl::permission_info_index</a></div><div class="ttdeci">permission_info_index_t permission_info_index</div><div class="ttdoc">multi-index that holds ephemeral indices</div><div class="ttdef"><b>Definition</b> <a href="account__query__db_8cpp_source.html#l00501">account_query_db.cpp:501</a></div></div>
<div class="ttc" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_html_ad111bde83946593be763eeb7e3541fdf"><div class="ttname"><a href="#ad111bde83946593be763eeb7e3541fdf">sysio::chain_apis::account_query_db_impl::rw_mutex</a></div><div class="ttdeci">std::shared_mutex rw_mutex</div><div class="ttdoc">mutex for read/write locking on the Multi-index and bimaps</div><div class="ttdef"><b>Definition</b> <a href="account__query__db_8cpp_source.html#l00505">account_query_db.cpp:505</a></div></div>
<div class="ttc" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_html_adf9eb275a2909c7f837e9514146468d5"><div class="ttname"><a href="#adf9eb275a2909c7f837e9514146468d5">sysio::chain_apis::account_query_db_impl::time_to_block_num</a></div><div class="ttdeci">time_map_t time_to_block_num</div><div class="ttdef"><b>Definition</b> <a href="account__query__db_8cpp_source.html#l00490">account_query_db.cpp:490</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1chain__apis_1_1account__query__db__impl_a9e19a7f902401bfa1de26cb0924c380f_cgraph.png" border="0" usemap="#astructsysio_1_1chain__apis_1_1account__query__db__impl_a9e19a7f902401bfa1de26cb0924c380f_cgraph" alt=""/></div>
<map name="astructsysio_1_1chain__apis_1_1account__query__db__impl_a9e19a7f902401bfa1de26cb0924c380f_cgraph" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_a9e19a7f902401bfa1de26cb0924c380f_cgraph">
<area shape="rect" title=" " alt="" coords="5,227,186,282"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#a8fda1043cb0c69e99385511e8a23c50f" title=" " alt="" coords="242,5,400,61"/>
<area shape="poly" title=" " alt="" coords="110,225,159,150,193,108,232,71,237,68,240,72,235,75,197,112,163,153,114,228"/>
<area shape="rect" href="classsysio_1_1chain_1_1controller.html#a0c79d00dae8c0d90efc18f4d091b2391" title=" " alt="" coords="234,86,408,111"/>
<area shape="poly" title=" " alt="" coords="117,225,166,172,198,145,232,122,245,115,247,120,235,126,201,149,170,176,121,228"/>
<area shape="rect" href="classsysio_1_1chain_1_1controller.html#a1379e43325b7e517a058bddce15571eb" title=" " alt="" coords="237,136,404,176"/>
<area shape="poly" title=" " alt="" coords="153,224,233,187,249,180,251,185,235,192,155,228"/>
<area shape="rect" href="classchainbase_1_1database.html#a4d5297635dcf70be481d9b600da9bc13" title=" " alt="" coords="250,201,392,242"/>
<area shape="poly" title=" " alt="" coords="186,238,234,231,235,236,187,244"/>
<area shape="rect" href="classsysio_1_1chain_1_1controller.html#a33704b4936bb9bbd2ea6b0874ca521b4" title=" " alt="" coords="245,266,397,307"/>
<area shape="poly" title=" " alt="" coords="186,265,229,271,229,276,186,270"/>
<area shape="rect" href="classsysio_1_1chain_1_1controller.html#a53495de416021a4e56e889e771b25a52" title=" " alt="" coords="462,325,653,366"/>
<area shape="poly" title=" " alt="" coords="148,281,189,300,234,316,288,328,343,336,447,343,447,348,342,341,287,333,233,321,187,305,145,285"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#a2789aac6391a10191d5aeb728fbe6410" title=" " alt="" coords="242,382,400,452"/>
<area shape="poly" title=" " alt="" coords="132,280,235,360,250,371,247,375,232,365,129,285"/>
<area shape="rect" href="classfc_1_1time__point.html#aa164ff1268a16d4b32afcff181f6100e" title=" " alt="" coords="255,532,387,558"/>
<area shape="poly" title=" " alt="" coords="115,281,165,365,199,414,236,462,294,520,290,524,232,466,195,418,161,368,110,284"/>
<area shape="rect" href="classsysio_1_1chain_1_1controller.html#a04f3c55da09b359224510af99502490f" title=" " alt="" coords="456,136,659,176"/>
<area shape="poly" title=" " alt="" coords="405,153,440,153,440,158,405,158"/>
<area shape="rect" href="classchainbase_1_1database.html#afcfe00f81a526c1376d4f51197dd3a9a" title=" " alt="" coords="474,204,641,230"/>
<area shape="poly" title=" " alt="" coords="392,217,458,216,458,222,392,223"/>
<area shape="rect" href="classchainbase_1_1database.html#aa5a2ca0da0092693ac49b36b7ec6817a" title=" " alt="" coords="723,197,864,238"/>
<area shape="poly" title=" " alt="" coords="642,223,707,223,707,229,642,228"/>
<area shape="poly" title=" " alt="" coords="723,236,660,245,558,251,456,245,406,239,407,234,456,240,558,246,659,240,722,230"/>
<area shape="poly" title=" " alt="" coords="722,212,657,211,657,206,722,206"/>
<area shape="poly" title=" " alt="" coords="399,391,473,368,474,373,401,396"/>
<area shape="rect" href="classsysio_1_1chain_1_1controller.html#a878ff6368c473051417382a9d485030d" title=" " alt="" coords="462,394,653,435"/>
<area shape="poly" title=" " alt="" coords="400,414,447,413,447,418,400,419"/>
<area shape="rect" href="classfc_1_1mock__time__traits.html#a0bed781012a73b8c15882648397b56be" title=" " alt="" coords="488,460,628,500"/>
<area shape="poly" title=" " alt="" coords="369,529,472,501,473,506,371,534"/>
<area shape="rect" href="classfc_1_1mock__time__traits.html#adddeebdf472c33f927827c111ddbf0b1" title=" " alt="" coords="488,525,628,566"/>
<area shape="poly" title=" " alt="" coords="387,542,472,542,472,548,387,548"/>
<area shape="rect" href="classfc_1_1time__point.html#ab46781dcaab4880902bc136f36e39e5e" title=" " alt="" coords="491,590,624,631"/>
<area shape="poly" title=" " alt="" coords="371,556,477,586,475,591,369,561"/>
<area shape="rect" href="classfc_1_1time__point.html#abfea5efbe9ef58024cda814395ee9945" title=" " alt="" coords="491,656,624,696"/>
<area shape="poly" title=" " alt="" coords="339,556,390,597,457,640,477,649,475,654,455,645,386,601,336,561"/>
<area shape="rect" href="classfc_1_1mock__time__traits.html#a0d7245b32fd62b3bc712f658250cc4db" title=" " alt="" coords="707,467,880,493"/>
<area shape="poly" title=" " alt="" coords="628,477,692,477,692,482,628,482"/>
</map>
</div>

</div>
</div>
<a id="af06f4fce80c950b9b1c20a552b4a2a15" name="af06f4fce80c950b9b1c20a552b4a2a15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af06f4fce80c950b9b1c20a552b4a2a15">&#9670;&#160;</a></span>cache_transaction_trace()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain_apis::account_query_db_impl::cache_transaction_trace </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#a4ee2867a6bec961c7a78b203cfd76be9">chain::transaction_trace_ptr</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>trace</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Store a potentially relevant transaction trace in a short lived cache so that it can be processed if its committed to by a block </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trace</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00286">286</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  286</span>                                                                              {</div>
<div class="line"><span class="lineno">  287</span>         <span class="keywordflow">if</span>( !trace-&gt;receipt ) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  288</span>         <span class="comment">// include only executed transactions; soft_fail included so that onerror (and any inlines via onerror) are included</span></div>
<div class="line"><span class="lineno">  289</span>         <span class="keywordflow">if</span>((trace-&gt;receipt-&gt;status != <a class="code hl_enumvalue" href="structsysio_1_1chain_1_1transaction__receipt__header.html#a2bb00bac16048e6f624c2ded867ebf55a7a6de58f1f84063a5f85bbfb59b43608">chain::transaction_receipt_header::executed</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  290</span>             trace-&gt;receipt-&gt;status != <a class="code hl_enumvalue" href="structsysio_1_1chain_1_1transaction__receipt__header.html#a2bb00bac16048e6f624c2ded867ebf55a98d0df834b74445e549f5d2123443b4e">chain::transaction_receipt_header::soft_fail</a>)) {</div>
<div class="line"><span class="lineno">  291</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  292</span>         }</div>
<div class="line"><span class="lineno">  293</span>         <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacesysio_1_1chain.html#a9a9946a27c3832394b9b2b3911e0733c">is_onblock</a>( trace )) {</div>
<div class="line"><span class="lineno">  294</span>            <a class="code hl_variable" href="#a6a6e477d5ab8af17385632e6cc16bbdd">onblock_trace</a>.emplace( trace );</div>
<div class="line"><span class="lineno">  295</span>         } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( trace-&gt;failed_dtrx_trace ) {</div>
<div class="line"><span class="lineno">  296</span>            <a class="code hl_variable" href="#acfb769f3aefd6346ad9172f6726d253d">cached_trace_map</a>[trace-&gt;failed_dtrx_trace-&gt;id] = trace;</div>
<div class="line"><span class="lineno">  297</span>         } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  298</span>            <a class="code hl_variable" href="#acfb769f3aefd6346ad9172f6726d253d">cached_trace_map</a>[trace-&gt;id] = trace;</div>
<div class="line"><span class="lineno">  299</span>         }</div>
<div class="line"><span class="lineno">  300</span>      }</div>
<div class="ttc" id="anamespacesysio_1_1chain_html_a9a9946a27c3832394b9b2b3911e0733c"><div class="ttname"><a href="namespacesysio_1_1chain.html#a9a9946a27c3832394b9b2b3911e0733c">sysio::chain::is_onblock</a></div><div class="ttdeci">bool is_onblock(const transaction_trace &amp;tt)</div><div class="ttdef"><b>Definition</b> <a href="libraries_2chain_2include_2sysio_2chain_2trace_8hpp_source.html#l00071">trace.hpp:71</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1transaction__receipt__header_html_a2bb00bac16048e6f624c2ded867ebf55a7a6de58f1f84063a5f85bbfb59b43608"><div class="ttname"><a href="structsysio_1_1chain_1_1transaction__receipt__header.html#a2bb00bac16048e6f624c2ded867ebf55a7a6de58f1f84063a5f85bbfb59b43608">sysio::chain::transaction_receipt_header::executed</a></div><div class="ttdeci">@ executed</div><div class="ttdoc">succeed, no error handler executed</div><div class="ttdef"><b>Definition</b> <a href="block_8hpp_source.html#l00014">block.hpp:14</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1transaction__receipt__header_html_a2bb00bac16048e6f624c2ded867ebf55a98d0df834b74445e549f5d2123443b4e"><div class="ttname"><a href="structsysio_1_1chain_1_1transaction__receipt__header.html#a2bb00bac16048e6f624c2ded867ebf55a98d0df834b74445e549f5d2123443b4e">sysio::chain::transaction_receipt_header::soft_fail</a></div><div class="ttdeci">@ soft_fail</div><div class="ttdoc">objectively failed (not executed), error handler executed</div><div class="ttdef"><b>Definition</b> <a href="block_8hpp_source.html#l00015">block.hpp:15</a></div></div>
<div class="ttc" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_html_a6a6e477d5ab8af17385632e6cc16bbdd"><div class="ttname"><a href="#a6a6e477d5ab8af17385632e6cc16bbdd">sysio::chain_apis::account_query_db_impl::onblock_trace</a></div><div class="ttdeci">onblock_trace_t onblock_trace</div><div class="ttdoc">temporary cache of on_block trace</div><div class="ttdef"><b>Definition</b> <a href="account__query__db_8cpp_source.html#l00487">account_query_db.cpp:487</a></div></div>
<div class="ttc" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_html_acfb769f3aefd6346ad9172f6726d253d"><div class="ttname"><a href="#acfb769f3aefd6346ad9172f6726d253d">sysio::chain_apis::account_query_db_impl::cached_trace_map</a></div><div class="ttdeci">cached_trace_map_t cached_trace_map</div><div class="ttdoc">temporary cache of uncommitted traces</div><div class="ttdef"><b>Definition</b> <a href="account__query__db_8cpp_source.html#l00486">account_query_db.cpp:486</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1chain__apis_1_1account__query__db__impl_af06f4fce80c950b9b1c20a552b4a2a15_cgraph.png" border="0" usemap="#astructsysio_1_1chain__apis_1_1account__query__db__impl_af06f4fce80c950b9b1c20a552b4a2a15_cgraph" alt=""/></div>
<map name="astructsysio_1_1chain__apis_1_1account__query__db__impl_af06f4fce80c950b9b1c20a552b4a2a15_cgraph" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_af06f4fce80c950b9b1c20a552b4a2a15_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,177,61"/>
<area shape="rect" href="namespacesysio_1_1chain.html#a9a9946a27c3832394b9b2b3911e0733c" title=" " alt="" coords="225,20,386,46"/>
<area shape="poly" title=" " alt="" coords="177,30,209,30,209,36,177,36"/>
<area shape="rect" href="structsysio_1_1chain_1_1name.html#a8847252c767dea5c3e8b60cc9d78505f" title=" " alt="" coords="434,13,565,54"/>
<area shape="poly" title=" " alt="" coords="386,30,418,30,418,36,386,36"/>
</map>
</div>

</div>
</div>
<a id="aa184af1bc686f0c89bb5837f05ef30fb" name="aa184af1bc686f0c89bb5837f05ef30fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa184af1bc686f0c89bb5837f05ef30fb">&#9670;&#160;</a></span>commit_block()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain_apis::account_query_db_impl::commit_block </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#ab9b14f4554cc4a0da2c361e9757b1662">chain::block_state_ptr</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>bsp</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Commit a block of transactions to the account query DB transaction traces need to be in the cache prior to this call </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bsp</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00363">363</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  363</span>                                                          {</div>
<div class="line"><span class="lineno">  364</span>         <a class="code hl_typedef" href="#a80e7966e67f2a780ce1f804ca2239f4c">permission_set_t</a> updated;</div>
<div class="line"><span class="lineno">  365</span>         <a class="code hl_typedef" href="#a80e7966e67f2a780ce1f804ca2239f4c">permission_set_t</a> deleted;</div>
<div class="line"><span class="lineno">  366</span>         <span class="keywordtype">bool</span> rollback_required = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  367</span> </div>
<div class="line"><span class="lineno">  368</span>         std::tie(updated, deleted, rollback_required) = <a class="code hl_function" href="#aa224e5ba2c6565d1626adbd9cc9d997a">commit_block_prelock</a>(bsp);</div>
<div class="line"><span class="lineno">  369</span> </div>
<div class="line"><span class="lineno">  370</span>         <span class="comment">// optimistic skip of locking section if there is nothing to do</span></div>
<div class="line"><span class="lineno">  371</span>         <span class="keywordflow">if</span> (!updated.empty() || !deleted.empty() || rollback_required) {</div>
<div class="line"><span class="lineno">  372</span>            std::unique_lock write_lock(<a class="code hl_variable" href="#ad111bde83946593be763eeb7e3541fdf">rw_mutex</a>);</div>
<div class="line"><span class="lineno">  373</span> </div>
<div class="line"><span class="lineno">  374</span>            <a class="code hl_function" href="#a55b5594b7d59cd2c7c38207cb988a44c">rollback_to_before</a>(bsp);</div>
<div class="line"><span class="lineno">  375</span> </div>
<div class="line"><span class="lineno">  376</span>            <span class="comment">// insert this blocks time into the time map</span></div>
<div class="line"><span class="lineno">  377</span>            <a class="code hl_variable" href="#adf9eb275a2909c7f837e9514146468d5">time_to_block_num</a>.emplace(bsp-&gt;header.timestamp, bsp-&gt;block_num);</div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span>            <span class="keyword">const</span> <span class="keyword">auto</span> bnum = bsp-&gt;block_num;</div>
<div class="line"><span class="lineno">  380</span>            <span class="keyword">auto</span>&amp; index = <a class="code hl_variable" href="#aba57026fbb7d549b2431c788a5bd3a2d">permission_info_index</a>.get&lt;by_owner_name&gt;();</div>
<div class="line"><span class="lineno">  381</span>            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; permission_by_owner = <a class="code hl_class" href="classsysio_1_1chain_1_1controller.html">controller</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0c79d00dae8c0d90efc18f4d091b2391">db</a>().<a class="code hl_function" href="classchainbase_1_1database.html#a4d5297635dcf70be481d9b600da9bc13">get_index</a>&lt;<a class="code hl_typedef" href="namespacesysio_1_1chain.html#a4e24a1668746342d40487d1019880986">chain::permission_index</a>&gt;().indices().get&lt;chain::by_owner&gt;();</div>
<div class="line"><span class="lineno">  382</span> </div>
<div class="line"><span class="lineno">  383</span>            <span class="comment">// for each updated permission, find the new values and update the account query db</span></div>
<div class="line"><span class="lineno">  384</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; up: updated) {</div>
<div class="line"><span class="lineno">  385</span>               <span class="keyword">auto</span> key = std::make_tuple(up.actor, up.permission);</div>
<div class="line"><span class="lineno">  386</span>               <span class="keyword">auto</span> source_itr = permission_by_owner.find(key);</div>
<div class="line"><span class="lineno">  387</span>               <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(source_itr != permission_by_owner.end(), chain::plugin_exception, <span class="stringliteral">&quot;chain data is missing&quot;</span>);</div>
<div class="line"><span class="lineno">  388</span>               <span class="keyword">auto</span> itr = index.find(key);</div>
<div class="line"><span class="lineno">  389</span>               <span class="keywordflow">if</span> (itr == index.end()) {</div>
<div class="line"><span class="lineno">  390</span>                  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; po = *source_itr;</div>
<div class="line"><span class="lineno">  391</span>                  itr = index.emplace(permission_info{ po.owner, po.name, bnum, po.auth.threshold }).first;</div>
<div class="line"><span class="lineno">  392</span>               } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  393</span>                  <a class="code hl_function" href="#a91acce27e2dee3eee42bc63d1d589919">remove_from_bimaps</a>(*itr);</div>
<div class="line"><span class="lineno">  394</span>                  index.modify(itr, [&amp;](<span class="keyword">auto</span>&amp; mutable_pi){</div>
<div class="line"><span class="lineno">  395</span>                     mutable_pi.last_updated_height = bnum;</div>
<div class="line"><span class="lineno">  396</span>                     mutable_pi.threshold = source_itr-&gt;auth.threshold;</div>
<div class="line"><span class="lineno">  397</span>                  });</div>
<div class="line"><span class="lineno">  398</span>               }</div>
<div class="line"><span class="lineno">  399</span> </div>
<div class="line"><span class="lineno">  400</span>               <a class="code hl_function" href="#a8fda1043cb0c69e99385511e8a23c50f">add_to_bimaps</a>(*itr, *source_itr);</div>
<div class="line"><span class="lineno">  401</span>            }</div>
<div class="line"><span class="lineno">  402</span> </div>
<div class="line"><span class="lineno">  403</span>            <span class="comment">// for all deleted permissions, process their removal from the account query DB</span></div>
<div class="line"><span class="lineno">  404</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; dp: deleted) {</div>
<div class="line"><span class="lineno">  405</span>               <span class="keyword">auto</span> key = std::make_tuple(dp.actor, dp.permission);</div>
<div class="line"><span class="lineno">  406</span>               <span class="keyword">auto</span> itr = index.find(key);</div>
<div class="line"><span class="lineno">  407</span>               <span class="keywordflow">if</span> (itr != index.end()) {</div>
<div class="line"><span class="lineno">  408</span>                  <a class="code hl_function" href="#a91acce27e2dee3eee42bc63d1d589919">remove_from_bimaps</a>(*itr);</div>
<div class="line"><span class="lineno">  409</span>                  index.erase(itr);</div>
<div class="line"><span class="lineno">  410</span>               }</div>
<div class="line"><span class="lineno">  411</span>            }</div>
<div class="line"><span class="lineno">  412</span>         }</div>
<div class="line"><span class="lineno">  413</span> </div>
<div class="line"><span class="lineno">  414</span>         <span class="comment">// drop any unprocessed cached traces</span></div>
<div class="line"><span class="lineno">  415</span>         <a class="code hl_variable" href="#acfb769f3aefd6346ad9172f6726d253d">cached_trace_map</a>.clear();</div>
<div class="line"><span class="lineno">  416</span>         <a class="code hl_variable" href="#a6a6e477d5ab8af17385632e6cc16bbdd">onblock_trace</a>.reset();</div>
<div class="line"><span class="lineno">  417</span>      }</div>
<div class="ttc" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_html_a55b5594b7d59cd2c7c38207cb988a44c"><div class="ttname"><a href="#a55b5594b7d59cd2c7c38207cb988a44c">sysio::chain_apis::account_query_db_impl::rollback_to_before</a></div><div class="ttdeci">void rollback_to_before(const chain::block_state_ptr &amp;bsp)</div><div class="ttdef"><b>Definition</b> <a href="account__query__db_8cpp_source.html#l00237">account_query_db.cpp:237</a></div></div>
<div class="ttc" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_html_a80e7966e67f2a780ce1f804ca2239f4c"><div class="ttname"><a href="#a80e7966e67f2a780ce1f804ca2239f4c">sysio::chain_apis::account_query_db_impl::permission_set_t</a></div><div class="ttdeci">std::set&lt; chain::permission_level &gt; permission_set_t</div><div class="ttdef"><b>Definition</b> <a href="account__query__db_8cpp_source.html#l00302">account_query_db.cpp:302</a></div></div>
<div class="ttc" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_html_a91acce27e2dee3eee42bc63d1d589919"><div class="ttname"><a href="#a91acce27e2dee3eee42bc63d1d589919">sysio::chain_apis::account_query_db_impl::remove_from_bimaps</a></div><div class="ttdeci">void remove_from_bimaps(const permission_info &amp;pi)</div><div class="ttdef"><b>Definition</b> <a href="account__query__db_8cpp_source.html#l00188">account_query_db.cpp:188</a></div></div>
<div class="ttc" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_html_aa224e5ba2c6565d1626adbd9cc9d997a"><div class="ttname"><a href="#aa224e5ba2c6565d1626adbd9cc9d997a">sysio::chain_apis::account_query_db_impl::commit_block_prelock</a></div><div class="ttdeci">auto commit_block_prelock(const chain::block_state_ptr &amp;bsp) const</div><div class="ttdef"><b>Definition</b> <a href="account__query__db_8cpp_source.html#l00308">account_query_db.cpp:308</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1chain__apis_1_1account__query__db__impl_aa184af1bc686f0c89bb5837f05ef30fb_cgraph.png" border="0" usemap="#astructsysio_1_1chain__apis_1_1account__query__db__impl_aa184af1bc686f0c89bb5837f05ef30fb_cgraph" alt=""/></div>
<map name="astructsysio_1_1chain__apis_1_1account__query__db__impl_aa184af1bc686f0c89bb5837f05ef30fb_cgraph" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_aa184af1bc686f0c89bb5837f05ef30fb_cgraph">
<area shape="rect" title=" " alt="" coords="5,187,164,242"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#a8fda1043cb0c69e99385511e8a23c50f" title=" " alt="" coords="427,5,585,61"/>
<area shape="poly" title=" " alt="" coords="107,185,152,139,180,117,210,97,260,76,312,59,411,39,412,45,313,65,262,81,213,102,183,121,155,143,111,188"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#aa224e5ba2c6565d1626adbd9cc9d997a" title=" " alt="" coords="212,432,371,488"/>
<area shape="poly" title=" " alt="" coords="111,241,259,419,255,422,107,244"/>
<area shape="rect" href="classsysio_1_1chain_1_1controller.html#a0c79d00dae8c0d90efc18f4d091b2391" title=" " alt="" coords="419,86,593,111"/>
<area shape="poly" title=" " alt="" coords="120,184,162,156,211,132,259,118,309,108,403,97,404,103,309,113,260,123,213,137,164,160,122,188"/>
<area shape="rect" href="classchainbase_1_1database.html#a4d5297635dcf70be481d9b600da9bc13" title=" " alt="" coords="436,230,577,271"/>
<area shape="poly" title=" " alt="" coords="164,219,420,241,420,246,164,224"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#a91acce27e2dee3eee42bc63d1d589919" title=" " alt="" coords="427,295,585,350"/>
<area shape="poly" title=" " alt="" coords="165,232,413,296,411,301,163,237"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#a55b5594b7d59cd2c7c38207cb988a44c" title=" " alt="" coords="212,147,370,202"/>
<area shape="poly" title=" " alt="" coords="164,197,196,190,197,195,165,202"/>
<area shape="rect" href="structsysio_1_1chain_1_1deleteauth.html#add712cbf63b55d0e2db2b874dca6576d" title=" " alt="" coords="426,584,586,624"/>
<area shape="poly" title=" " alt="" coords="320,486,365,528,420,570,429,574,426,579,418,574,361,533,317,490"/>
<area shape="rect" href="structsysio_1_1chain_1_1newaccount.html#a962c693e8d73cb4314453c348ababbde" title=" " alt="" coords="422,374,591,415"/>
<area shape="poly" title=" " alt="" coords="370,433,422,417,423,422,372,438"/>
<area shape="rect" href="structsysio_1_1chain_1_1updateauth.html#afc31c0680242885924f64fc347780814" title=" " alt="" coords="424,440,588,480"/>
<area shape="poly" title=" " alt="" coords="371,457,409,457,409,462,371,462"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#a0f81334b9ee80d92a1971d03e0bb0e36" title=" " alt="" coords="427,504,585,560"/>
<area shape="poly" title=" " alt="" coords="372,484,413,498,411,503,370,489"/>
<area shape="rect" href="classchainbase_1_1database.html#afcfe00f81a526c1376d4f51197dd3a9a" title=" " alt="" coords="653,232,820,258"/>
<area shape="poly" title=" " alt="" coords="577,246,637,245,637,250,577,252"/>
<area shape="rect" href="classchainbase_1_1database.html#aa5a2ca0da0092693ac49b36b7ec6817a" title=" " alt="" coords="880,225,1021,266"/>
<area shape="poly" title=" " alt="" coords="821,251,864,251,864,257,821,257"/>
<area shape="poly" title=" " alt="" coords="880,265,832,273,737,279,641,273,592,268,592,262,642,268,737,274,831,268,879,260"/>
<area shape="poly" title=" " alt="" coords="879,239,836,239,836,234,879,234"/>
<area shape="poly" title=" " alt="" coords="322,144,366,107,418,71,425,66,428,71,420,75,369,112,325,148"/>
<area shape="poly" title=" " alt="" coords="357,144,418,120,438,114,439,119,420,125,359,149"/>
<area shape="poly" title=" " alt="" coords="372,200,433,222,432,227,370,205"/>
<area shape="poly" title=" " alt="" coords="323,201,367,240,420,280,428,285,425,289,418,285,364,245,319,205"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#a2789aac6391a10191d5aeb728fbe6410" title=" " alt="" coords="427,135,585,206"/>
<area shape="poly" title=" " alt="" coords="371,170,411,170,411,175,371,176"/>
<area shape="rect" href="classsysio_1_1chain_1_1controller.html#a53495de416021a4e56e889e771b25a52" title=" " alt="" coords="641,92,832,132"/>
<area shape="poly" title=" " alt="" coords="585,148,639,134,640,139,587,153"/>
<area shape="rect" href="classsysio_1_1chain_1_1controller.html#a878ff6368c473051417382a9d485030d" title=" " alt="" coords="641,157,832,198"/>
<area shape="poly" title=" " alt="" coords="586,170,626,171,626,177,586,175"/>
</map>
</div>

</div>
</div>
<a id="aa224e5ba2c6565d1626adbd9cc9d997a" name="aa224e5ba2c6565d1626adbd9cc9d997a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa224e5ba2c6565d1626adbd9cc9d997a">&#9670;&#160;</a></span>commit_block_prelock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto sysio::chain_apis::account_query_db_impl::commit_block_prelock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#ab9b14f4554cc4a0da2c361e9757b1662">chain::block_state_ptr</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>bsp</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pre-Commit step with const qualifier to guarantee it does not mutate the thread-safe data set </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bsp</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>process traces to find <code>updateauth</code> and <code>deleteauth</code> calls maintaining a final set of permissions to either update or delete. Intra-block changes are discarded</p>

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00308">308</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  308</span>                                                                         {</div>
<div class="line"><span class="lineno">  309</span>         <a class="code hl_typedef" href="#a80e7966e67f2a780ce1f804ca2239f4c">permission_set_t</a> updated;</div>
<div class="line"><span class="lineno">  310</span>         <a class="code hl_typedef" href="#a80e7966e67f2a780ce1f804ca2239f4c">permission_set_t</a> deleted;</div>
<div class="line"><span class="lineno">  311</span> </div>
<div class="line"><span class="lineno">  316</span>         <span class="keyword">auto</span> process_trace = [&amp;](<span class="keyword">const</span> <a class="code hl_typedef" href="namespacesysio_1_1chain.html#a4ee2867a6bec961c7a78b203cfd76be9">chain::transaction_trace_ptr</a>&amp; trace) {</div>
<div class="line"><span class="lineno">  317</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp; at : trace-&gt;action_traces ) {</div>
<div class="line"><span class="lineno">  318</span>               <span class="keywordflow">if</span> (std::tie(at.receiver, at.act.account) != std::tie(chain::config::system_account_name,chain::config::system_account_name)) {</div>
<div class="line"><span class="lineno">  319</span>                  <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  320</span>               }</div>
<div class="line"><span class="lineno">  321</span> </div>
<div class="line"><span class="lineno">  322</span>               <span class="keywordflow">if</span> (at.act.name == <a class="code hl_function" href="structsysio_1_1chain_1_1updateauth.html#afc31c0680242885924f64fc347780814">chain::updateauth::get_name</a>()) {</div>
<div class="line"><span class="lineno">  323</span>                  <span class="keyword">auto</span> data = at.act.data_as&lt;chain::updateauth&gt;();</div>
<div class="line"><span class="lineno">  324</span>                  <span class="keyword">auto</span> itr = updated.emplace(chain::permission_level{data.account, data.permission}).first;</div>
<div class="line"><span class="lineno">  325</span>                  deleted.erase(*itr);</div>
<div class="line"><span class="lineno">  326</span>               } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (at.act.name == <a class="code hl_function" href="structsysio_1_1chain_1_1deleteauth.html#add712cbf63b55d0e2db2b874dca6576d">chain::deleteauth::get_name</a>()) {</div>
<div class="line"><span class="lineno">  327</span>                  <span class="keyword">auto</span> data = at.act.data_as&lt;chain::deleteauth&gt;();</div>
<div class="line"><span class="lineno">  328</span>                  <span class="keyword">auto</span> itr = deleted.emplace(chain::permission_level{data.account, data.permission}).first;</div>
<div class="line"><span class="lineno">  329</span>                  updated.erase(*itr);</div>
<div class="line"><span class="lineno">  330</span>               } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (at.act.name == <a class="code hl_function" href="structsysio_1_1chain_1_1newaccount.html#a962c693e8d73cb4314453c348ababbde">chain::newaccount::get_name</a>()) {</div>
<div class="line"><span class="lineno">  331</span>                  <span class="keyword">auto</span> data = at.act.data_as&lt;chain::newaccount&gt;();</div>
<div class="line"><span class="lineno">  332</span>                  updated.emplace(chain::permission_level{data.name, <span class="stringliteral">&quot;owner&quot;</span>_n});</div>
<div class="line"><span class="lineno">  333</span>                  updated.emplace(chain::permission_level{data.name, <span class="stringliteral">&quot;active&quot;</span>_n});</div>
<div class="line"><span class="lineno">  334</span>               }</div>
<div class="line"><span class="lineno">  335</span>            }</div>
<div class="line"><span class="lineno">  336</span>         };</div>
<div class="line"><span class="lineno">  337</span> </div>
<div class="line"><span class="lineno">  338</span>         <span class="keywordflow">if</span>( <a class="code hl_variable" href="#a6a6e477d5ab8af17385632e6cc16bbdd">onblock_trace</a> )</div>
<div class="line"><span class="lineno">  339</span>            process_trace(*<a class="code hl_variable" href="#a6a6e477d5ab8af17385632e6cc16bbdd">onblock_trace</a>);</div>
<div class="line"><span class="lineno">  340</span> </div>
<div class="line"><span class="lineno">  341</span>         <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_variable" href="bn_8cpp.html#af0a5201ca8846f05f25435b41d7f39f7">r</a> : bsp-&gt;block-&gt;transactions ) {</div>
<div class="line"><span class="lineno">  342</span>            <a class="code hl_typedef" href="namespacesysio_1_1chain.html#aa85a3b49b3b219d1e3840567579e7e63">chain::transaction_id_type</a> <a class="code hl_variable" href="code__cache_8cpp.html#aa0efefe21f4700d78692edc823e763be">id</a>;</div>
<div class="line"><span class="lineno">  343</span>            <span class="keywordflow">if</span>( std::holds_alternative&lt;chain::transaction_id_type&gt;(<a class="code hl_variable" href="bn_8cpp.html#af0a5201ca8846f05f25435b41d7f39f7">r</a>.trx)) {</div>
<div class="line"><span class="lineno">  344</span>               <span class="keywordtype">id</span> = std::get&lt;chain::transaction_id_type&gt;(<a class="code hl_variable" href="bn_8cpp.html#af0a5201ca8846f05f25435b41d7f39f7">r</a>.trx);</div>
<div class="line"><span class="lineno">  345</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  346</span>               <span class="keywordtype">id</span> = std::get&lt;chain::packed_transaction&gt;(<a class="code hl_variable" href="bn_8cpp.html#af0a5201ca8846f05f25435b41d7f39f7">r</a>.trx).id();</div>
<div class="line"><span class="lineno">  347</span>            }</div>
<div class="line"><span class="lineno">  348</span> </div>
<div class="line"><span class="lineno">  349</span>            <span class="keyword">const</span> <span class="keyword">auto</span> it = <a class="code hl_variable" href="#acfb769f3aefd6346ad9172f6726d253d">cached_trace_map</a>.find( <span class="keywordtype">id</span> );</div>
<div class="line"><span class="lineno">  350</span>            <span class="keywordflow">if</span>( it != <a class="code hl_variable" href="#acfb769f3aefd6346ad9172f6726d253d">cached_trace_map</a>.end() ) {</div>
<div class="line"><span class="lineno">  351</span>               process_trace( it-&gt;second );</div>
<div class="line"><span class="lineno">  352</span>            }</div>
<div class="line"><span class="lineno">  353</span>         }</div>
<div class="line"><span class="lineno">  354</span> </div>
<div class="line"><span class="lineno">  355</span>         <span class="keywordflow">return</span> std::make_tuple(std::move(updated), std::move(deleted), <a class="code hl_function" href="#a0f81334b9ee80d92a1971d03e0bb0e36">is_rollback_required</a>(bsp));</div>
<div class="line"><span class="lineno">  356</span>      }</div>
<div class="ttc" id="abn_8cpp_html_af0a5201ca8846f05f25435b41d7f39f7"><div class="ttname"><a href="bn_8cpp.html#af0a5201ca8846f05f25435b41d7f39f7">r</a></div><div class="ttdeci">const mie::Vuint &amp; r</div><div class="ttdef"><b>Definition</b> <a href="bn_8cpp_source.html#l00028">bn.cpp:28</a></div></div>
<div class="ttc" id="acode__cache_8cpp_html_aa0efefe21f4700d78692edc823e763be"><div class="ttname"><a href="code__cache_8cpp.html#aa0efefe21f4700d78692edc823e763be">id</a></div><div class="ttdeci">uint64_t id</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8cpp_source.html#l00000">code_cache.cpp:0</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_a4ee2867a6bec961c7a78b203cfd76be9"><div class="ttname"><a href="namespacesysio_1_1chain.html#a4ee2867a6bec961c7a78b203cfd76be9">sysio::chain::transaction_trace_ptr</a></div><div class="ttdeci">std::shared_ptr&lt; transaction_trace &gt; transaction_trace_ptr</div><div class="ttdef"><b>Definition</b> <a href="libraries_2chain_2include_2sysio_2chain_2trace_8hpp_source.html#l00020">trace.hpp:20</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_aa85a3b49b3b219d1e3840567579e7e63"><div class="ttname"><a href="namespacesysio_1_1chain.html#aa85a3b49b3b219d1e3840567579e7e63">sysio::chain::transaction_id_type</a></div><div class="ttdeci">checksum_type transaction_id_type</div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2types_8hpp_source.html#l00236">types.hpp:236</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1deleteauth_html_add712cbf63b55d0e2db2b874dca6576d"><div class="ttname"><a href="structsysio_1_1chain_1_1deleteauth.html#add712cbf63b55d0e2db2b874dca6576d">sysio::chain::deleteauth::get_name</a></div><div class="ttdeci">static action_name get_name()</div><div class="ttdef"><b>Definition</b> <a href="contract__types_8hpp_source.html#l00082">contract_types.hpp:82</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1newaccount_html_a962c693e8d73cb4314453c348ababbde"><div class="ttname"><a href="structsysio_1_1chain_1_1newaccount.html#a962c693e8d73cb4314453c348ababbde">sysio::chain::newaccount::get_name</a></div><div class="ttdeci">static action_name get_name()</div><div class="ttdef"><b>Definition</b> <a href="contract__types_8hpp_source.html#l00020">contract_types.hpp:20</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1updateauth_html_afc31c0680242885924f64fc347780814"><div class="ttname"><a href="structsysio_1_1chain_1_1updateauth.html#afc31c0680242885924f64fc347780814">sysio::chain::updateauth::get_name</a></div><div class="ttdeci">static action_name get_name()</div><div class="ttdef"><b>Definition</b> <a href="contract__types_8hpp_source.html#l00064">contract_types.hpp:64</a></div></div>
<div class="ttc" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_html_a0f81334b9ee80d92a1971d03e0bb0e36"><div class="ttname"><a href="#a0f81334b9ee80d92a1971d03e0bb0e36">sysio::chain_apis::account_query_db_impl::is_rollback_required</a></div><div class="ttdeci">bool is_rollback_required(const chain::block_state_ptr &amp;bsp) const</div><div class="ttdef"><b>Definition</b> <a href="account__query__db_8cpp_source.html#l00198">account_query_db.cpp:198</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1chain__apis_1_1account__query__db__impl_aa224e5ba2c6565d1626adbd9cc9d997a_cgraph.png" border="0" usemap="#astructsysio_1_1chain__apis_1_1account__query__db__impl_aa224e5ba2c6565d1626adbd9cc9d997a_cgraph" alt=""/></div>
<map name="astructsysio_1_1chain__apis_1_1account__query__db__impl_aa224e5ba2c6565d1626adbd9cc9d997a_cgraph" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_aa224e5ba2c6565d1626adbd9cc9d997a_cgraph">
<area shape="rect" title=" " alt="" coords="5,96,165,152"/>
<area shape="rect" href="structsysio_1_1chain_1_1deleteauth.html#add712cbf63b55d0e2db2b874dca6576d" title=" " alt="" coords="218,5,377,46"/>
<area shape="poly" title=" " alt="" coords="137,93,212,57,226,50,228,55,214,61,140,98"/>
<area shape="rect" href="structsysio_1_1chain_1_1newaccount.html#a962c693e8d73cb4314453c348ababbde" title=" " alt="" coords="213,71,382,111"/>
<area shape="poly" title=" " alt="" coords="165,109,197,104,198,109,165,114"/>
<area shape="rect" href="structsysio_1_1chain_1_1updateauth.html#afc31c0680242885924f64fc347780814" title=" " alt="" coords="216,136,379,177"/>
<area shape="poly" title=" " alt="" coords="165,134,201,139,200,144,165,139"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#a0f81334b9ee80d92a1971d03e0bb0e36" title=" " alt="" coords="218,200,376,256"/>
<area shape="poly" title=" " alt="" coords="143,150,214,186,224,191,221,196,211,191,140,155"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1chain__apis_1_1account__query__db__impl_aa224e5ba2c6565d1626adbd9cc9d997a_icgraph.png" border="0" usemap="#astructsysio_1_1chain__apis_1_1account__query__db__impl_aa224e5ba2c6565d1626adbd9cc9d997a_icgraph" alt=""/></div>
<map name="astructsysio_1_1chain__apis_1_1account__query__db__impl_aa224e5ba2c6565d1626adbd9cc9d997a_icgraph" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_aa224e5ba2c6565d1626adbd9cc9d997a_icgraph">
<area shape="rect" title=" " alt="" coords="212,5,371,61"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#aa184af1bc686f0c89bb5837f05ef30fb" title=" " alt="" coords="5,5,164,61"/>
<area shape="poly" title=" " alt="" coords="196,36,164,36,164,30,196,30"/>
</map>
</div>

</div>
</div>
<a id="a12a133f315d14e1fda76e6ee64e0c078" name="a12a133f315d14e1fda76e6ee64e0c078"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12a133f315d14e1fda76e6ee64e0c078">&#9670;&#160;</a></span>get_accounts_by_authorizers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsysio_1_1chain__apis_1_1account__query__db_1_1get__accounts__by__authorizers__result.html">account_query_db::get_accounts_by_authorizers_result</a> sysio::chain_apis::account_query_db_impl::get_accounts_by_authorizers </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsysio_1_1chain__apis_1_1account__query__db_1_1get__accounts__by__authorizers__params.html">account_query_db::get_accounts_by_authorizers_params</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>args</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Add a range of results</p>

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00420">420</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  420</span>                                                                                                         {</div>
<div class="line"><span class="lineno">  421</span>         std::shared_lock <a class="code hl_typedef" href="namespacechainbase.html#af9c751cb717344c32889e0a797c50803">read_lock</a>(<a class="code hl_variable" href="#ad111bde83946593be763eeb7e3541fdf">rw_mutex</a>);</div>
<div class="line"><span class="lineno">  422</span> </div>
<div class="line"><span class="lineno">  423</span>         <span class="keyword">using </span>result_t = account_query_db::get_accounts_by_authorizers_result;</div>
<div class="line"><span class="lineno">  424</span>         result_t result;</div>
<div class="line"><span class="lineno">  425</span> </div>
<div class="line"><span class="lineno">  426</span>         <span class="comment">// deduplicate inputs</span></div>
<div class="line"><span class="lineno">  427</span>         <span class="keyword">auto</span> account_set = std::set&lt;chain::permission_level&gt;(args.accounts.begin(), args.accounts.end());</div>
<div class="line"><span class="lineno">  428</span>         <span class="keyword">const</span> <span class="keyword">auto</span> key_set = std::set&lt;chain::public_key_type&gt;(args.keys.begin(), args.keys.end());</div>
<div class="line"><span class="lineno">  429</span> </div>
<div class="line"><span class="lineno">  433</span>         <span class="keyword">auto</span> push_results = [&amp;result](<span class="keyword">const</span> <span class="keyword">auto</span>&amp; begin, <span class="keyword">const</span> <span class="keyword">auto</span>&amp; end) {</div>
<div class="line"><span class="lineno">  434</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> itr = begin; itr != end; ++itr) {</div>
<div class="line"><span class="lineno">  435</span>               <span class="keyword">const</span> <span class="keyword">auto</span>&amp; pi = itr-&gt;second.get();</div>
<div class="line"><span class="lineno">  436</span>               <span class="keyword">const</span> <span class="keyword">auto</span>&amp; authorizer = itr-&gt;first.value;</div>
<div class="line"><span class="lineno">  437</span>               <span class="keyword">auto</span> weight = itr-&gt;first.weight;</div>
<div class="line"><span class="lineno">  438</span> </div>
<div class="line"><span class="lineno">  439</span>               result.accounts.emplace_back(result_t::account_result{</div>
<div class="line"><span class="lineno">  440</span>                     pi.owner,</div>
<div class="line"><span class="lineno">  441</span>                     pi.name,</div>
<div class="line"><span class="lineno">  442</span>                     make_optional_authorizer&lt;chain::permission_level&gt;(authorizer),</div>
<div class="line"><span class="lineno">  443</span>                     make_optional_authorizer&lt;chain::public_key_type&gt;(authorizer),</div>
<div class="line"><span class="lineno">  444</span>                     weight,</div>
<div class="line"><span class="lineno">  445</span>                     pi.threshold</div>
<div class="line"><span class="lineno">  446</span>               });</div>
<div class="line"><span class="lineno">  447</span>            }</div>
<div class="line"><span class="lineno">  448</span>         };</div>
<div class="line"><span class="lineno">  449</span> </div>
<div class="line"><span class="lineno">  450</span> </div>
<div class="line"><span class="lineno">  451</span>         <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>: account_set) {</div>
<div class="line"><span class="lineno">  452</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.permission.empty()) {</div>
<div class="line"><span class="lineno">  453</span>               <span class="comment">// empty permission is a wildcard</span></div>
<div class="line"><span class="lineno">  454</span>               <span class="comment">// construct a range between the lower bound of the given account and the lower bound of the</span></div>
<div class="line"><span class="lineno">  455</span>               <span class="comment">// next possible account name</span></div>
<div class="line"><span class="lineno">  456</span>               <span class="keyword">const</span> <span class="keyword">auto</span> begin = <a class="code hl_variable" href="#a6bf2e9f0ed9cd1f0762888b22ad55024">name_bimap</a>.left.lower_bound(weighted&lt;chain::permission_level&gt;::lower_bound_for({<a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.actor, <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.permission}));</div>
<div class="line"><span class="lineno">  457</span>               <span class="keyword">const</span> <span class="keyword">auto</span> next_account_name = chain::name(<a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.actor.to_uint64_t() + 1);</div>
<div class="line"><span class="lineno">  458</span>               <span class="keyword">const</span> <span class="keyword">auto</span> end = <a class="code hl_variable" href="#a6bf2e9f0ed9cd1f0762888b22ad55024">name_bimap</a>.left.lower_bound(weighted&lt;chain::permission_level&gt;::lower_bound_for({next_account_name, <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.permission}));</div>
<div class="line"><span class="lineno">  459</span>               push_results(begin, end);</div>
<div class="line"><span class="lineno">  460</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  461</span>               <span class="comment">// construct a range of all possible weights for an account/permission pair</span></div>
<div class="line"><span class="lineno">  462</span>               <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a> = chain::permission_level{<a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.actor, <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.permission};</div>
<div class="line"><span class="lineno">  463</span>               <span class="keyword">const</span> <span class="keyword">auto</span> begin = <a class="code hl_variable" href="#a6bf2e9f0ed9cd1f0762888b22ad55024">name_bimap</a>.left.lower_bound(weighted&lt;chain::permission_level&gt;::lower_bound_for(<a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a>));</div>
<div class="line"><span class="lineno">  464</span>               <span class="keyword">const</span> <span class="keyword">auto</span> end = <a class="code hl_variable" href="#a6bf2e9f0ed9cd1f0762888b22ad55024">name_bimap</a>.left.upper_bound(weighted&lt;chain::permission_level&gt;::upper_bound_for(<a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a>));</div>
<div class="line"><span class="lineno">  465</span>               push_results(begin, end);</div>
<div class="line"><span class="lineno">  466</span>            }</div>
<div class="line"><span class="lineno">  467</span>         }</div>
<div class="line"><span class="lineno">  468</span> </div>
<div class="line"><span class="lineno">  469</span>         <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; k: key_set) {</div>
<div class="line"><span class="lineno">  470</span>            <span class="comment">// construct a range of all possible weights for a key</span></div>
<div class="line"><span class="lineno">  471</span>            <span class="keyword">const</span> <span class="keyword">auto</span> begin = <a class="code hl_variable" href="#adaaa7d466a003a720717341ca7fda6c5">key_bimap</a>.left.lower_bound(weighted&lt;chain::public_key_type&gt;::lower_bound_for(k));</div>
<div class="line"><span class="lineno">  472</span>            <span class="keyword">const</span> <span class="keyword">auto</span> end = <a class="code hl_variable" href="#adaaa7d466a003a720717341ca7fda6c5">key_bimap</a>.left.upper_bound(weighted&lt;chain::public_key_type&gt;::upper_bound_for(k));</div>
<div class="line"><span class="lineno">  473</span>            push_results(begin, end);</div>
<div class="line"><span class="lineno">  474</span>         }</div>
<div class="line"><span class="lineno">  475</span> </div>
<div class="line"><span class="lineno">  476</span>         <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  477</span>      }</div>
<div class="ttc" id="abn_8cpp_html_a8b0eadcc506862e9d751ab45185053aa"><div class="ttname"><a href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a></div><div class="ttdeci">const mie::Vuint &amp; p</div><div class="ttdef"><b>Definition</b> <a href="bn_8cpp_source.html#l00027">bn.cpp:27</a></div></div>
<div class="ttc" id="anamespacechainbase_html_af9c751cb717344c32889e0a797c50803"><div class="ttname"><a href="namespacechainbase.html#af9c751cb717344c32889e0a797c50803">chainbase::read_lock</a></div><div class="ttdeci">boost::interprocess::sharable_lock&lt; read_write_mutex &gt; read_lock</div><div class="ttdef"><b>Definition</b> <a href="chainbase_8hpp_source.html#l00064">chainbase.hpp:64</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0f81334b9ee80d92a1971d03e0bb0e36" name="a0f81334b9ee80d92a1971d03e0bb0e36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f81334b9ee80d92a1971d03e0bb0e36">&#9670;&#160;</a></span>is_rollback_required()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool sysio::chain_apis::account_query_db_impl::is_rollback_required </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#ab9b14f4554cc4a0da2c361e9757b1662">chain::block_state_ptr</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>bsp</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00198">198</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  198</span>                                                                         {</div>
<div class="line"><span class="lineno">  199</span>         std::shared_lock <a class="code hl_typedef" href="namespacechainbase.html#af9c751cb717344c32889e0a797c50803">read_lock</a>(<a class="code hl_variable" href="#ad111bde83946593be763eeb7e3541fdf">rw_mutex</a>);</div>
<div class="line"><span class="lineno">  200</span>         <span class="keyword">const</span> <span class="keyword">auto</span> bnum = bsp-&gt;block-&gt;block_num();</div>
<div class="line"><span class="lineno">  201</span>         <span class="keyword">const</span> <span class="keyword">auto</span>&amp; index = <a class="code hl_variable" href="#aba57026fbb7d549b2431c788a5bd3a2d">permission_info_index</a>.get&lt;by_last_updated_height&gt;();</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>         <span class="keywordflow">if</span> (index.empty()) {</div>
<div class="line"><span class="lineno">  204</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  205</span>         } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  206</span>            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; pi = (*index.rbegin());</div>
<div class="line"><span class="lineno">  207</span>            <span class="keywordflow">if</span> (pi.last_updated_height &lt; bnum) {</div>
<div class="line"><span class="lineno">  208</span>               <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  209</span>            }</div>
<div class="line"><span class="lineno">  210</span>         }</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>         <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  213</span>      }</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1chain__apis_1_1account__query__db__impl_a0f81334b9ee80d92a1971d03e0bb0e36_icgraph.png" border="0" usemap="#astructsysio_1_1chain__apis_1_1account__query__db__impl_a0f81334b9ee80d92a1971d03e0bb0e36_icgraph" alt=""/></div>
<map name="astructsysio_1_1chain__apis_1_1account__query__db__impl_a0f81334b9ee80d92a1971d03e0bb0e36_icgraph" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_a0f81334b9ee80d92a1971d03e0bb0e36_icgraph">
<area shape="rect" title=" " alt="" coords="419,5,577,61"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#aa224e5ba2c6565d1626adbd9cc9d997a" title=" " alt="" coords="212,5,371,61"/>
<area shape="poly" title=" " alt="" coords="403,36,371,36,371,30,403,30"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#aa184af1bc686f0c89bb5837f05ef30fb" title=" " alt="" coords="5,5,164,61"/>
<area shape="poly" title=" " alt="" coords="196,36,164,36,164,30,196,30"/>
</map>
</div>

</div>
</div>
<a id="a2789aac6391a10191d5aeb728fbe6410" name="a2789aac6391a10191d5aeb728fbe6410"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2789aac6391a10191d5aeb728fbe6410">&#9670;&#160;</a></span>last_updated_time_to_height()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> sysio::chain_apis::account_query_db_impl::last_updated_time_to_height </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfc_1_1time__point.html">fc::time_point</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>last_updated</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00215">215</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  215</span>                                                                              {</div>
<div class="line"><span class="lineno">  216</span>         <span class="keyword">const</span> <span class="keyword">auto</span> lib_num = <a class="code hl_class" href="classsysio_1_1chain_1_1controller.html">controller</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a53495de416021a4e56e889e771b25a52">last_irreversible_block_num</a>();</div>
<div class="line"><span class="lineno">  217</span>         <span class="keyword">const</span> <span class="keyword">auto</span> lib_time = <a class="code hl_class" href="classsysio_1_1chain_1_1controller.html">controller</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a878ff6368c473051417382a9d485030d">last_irreversible_block_time</a>();</div>
<div class="line"><span class="lineno">  218</span> </div>
<div class="line"><span class="lineno">  219</span>         <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> last_updated_height = lib_num;</div>
<div class="line"><span class="lineno">  220</span>         <span class="keywordflow">if</span> (last_updated &gt; lib_time) {</div>
<div class="line"><span class="lineno">  221</span>            <span class="keyword">const</span> <span class="keyword">auto</span> iter = <a class="code hl_variable" href="#adf9eb275a2909c7f837e9514146468d5">time_to_block_num</a>.find(last_updated);</div>
<div class="line"><span class="lineno">  222</span>            <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(iter != <a class="code hl_variable" href="#adf9eb275a2909c7f837e9514146468d5">time_to_block_num</a>.end(), chain::plugin_exception, <span class="stringliteral">&quot;invalid block time encountered in on-chain accounts ${time}&quot;</span>, (<span class="stringliteral">&quot;time&quot;</span>, last_updated));</div>
<div class="line"><span class="lineno">  223</span>            last_updated_height = iter-&gt;second;</div>
<div class="line"><span class="lineno">  224</span>         }</div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>         <span class="keywordflow">return</span> last_updated_height;</div>
<div class="line"><span class="lineno">  227</span>      }</div>
<div class="ttc" id="aclasssysio_1_1chain_1_1controller_html_a878ff6368c473051417382a9d485030d"><div class="ttname"><a href="classsysio_1_1chain_1_1controller.html#a878ff6368c473051417382a9d485030d">sysio::chain::controller::last_irreversible_block_time</a></div><div class="ttdeci">time_point last_irreversible_block_time() const</div><div class="ttdef"><b>Definition</b> <a href="controller_8cpp_source.html#l03054">controller.cpp:3054</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1chain__apis_1_1account__query__db__impl_a2789aac6391a10191d5aeb728fbe6410_cgraph.png" border="0" usemap="#astructsysio_1_1chain__apis_1_1account__query__db__impl_a2789aac6391a10191d5aeb728fbe6410_cgraph" alt=""/></div>
<map name="astructsysio_1_1chain__apis_1_1account__query__db__impl_a2789aac6391a10191d5aeb728fbe6410_cgraph" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_a2789aac6391a10191d5aeb728fbe6410_cgraph">
<area shape="rect" title=" " alt="" coords="5,24,164,94"/>
<area shape="rect" href="classsysio_1_1chain_1_1controller.html#a53495de416021a4e56e889e771b25a52" title=" " alt="" coords="212,5,402,46"/>
<area shape="poly" title=" " alt="" coords="163,45,196,40,197,45,164,50"/>
<area shape="rect" href="classsysio_1_1chain_1_1controller.html#a878ff6368c473051417382a9d485030d" title=" " alt="" coords="212,71,402,111"/>
<area shape="poly" title=" " alt="" coords="164,68,197,72,196,78,164,73"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1chain__apis_1_1account__query__db__impl_a2789aac6391a10191d5aeb728fbe6410_icgraph.png" border="0" usemap="#astructsysio_1_1chain__apis_1_1account__query__db__impl_a2789aac6391a10191d5aeb728fbe6410_icgraph" alt=""/></div>
<map name="astructsysio_1_1chain__apis_1_1account__query__db__impl_a2789aac6391a10191d5aeb728fbe6410_icgraph" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_a2789aac6391a10191d5aeb728fbe6410_icgraph">
<area shape="rect" title=" " alt="" coords="440,38,598,108"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#a9e19a7f902401bfa1de26cb0924c380f" title=" " alt="" coords="212,5,392,61"/>
<area shape="poly" title=" " alt="" coords="424,58,392,52,393,47,425,53"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#a55b5594b7d59cd2c7c38207cb988a44c" title=" " alt="" coords="223,85,381,141"/>
<area shape="poly" title=" " alt="" coords="425,93,382,101,381,96,424,88"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#aa184af1bc686f0c89bb5837f05ef30fb" title=" " alt="" coords="5,85,164,141"/>
<area shape="poly" title=" " alt="" coords="207,116,164,116,164,110,207,110"/>
</map>
</div>

</div>
</div>
<a id="a91acce27e2dee3eee42bc63d1d589919" name="a91acce27e2dee3eee42bc63d1d589919"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91acce27e2dee3eee42bc63d1d589919">&#9670;&#160;</a></span>remove_from_bimaps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain_apis::account_query_db_impl::remove_from_bimaps </td>
          <td>(</td>
          <td class="paramtype">const permission_info &amp;</td>          <td class="paramname"><span class="paramname"><em>pi</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Remove a permission from the bimaps for keys and accounts </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pi</td><td>- the ephemeral permission info structure being removed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00188">188</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  188</span>                                                           {</div>
<div class="line"><span class="lineno">  189</span>         <span class="comment">// remove all entries from the name bimap that refer to this permission_info&#39;s reference</span></div>
<div class="line"><span class="lineno">  190</span>         <span class="keyword">const</span> <span class="keyword">auto</span> name_range = <a class="code hl_variable" href="#a6bf2e9f0ed9cd1f0762888b22ad55024">name_bimap</a>.right.equal_range(pi);</div>
<div class="line"><span class="lineno">  191</span>         <a class="code hl_variable" href="#a6bf2e9f0ed9cd1f0762888b22ad55024">name_bimap</a>.right.erase(name_range.first, name_range.second);</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>         <span class="comment">// remove all entries from the key bimap that refer to this permission_info&#39;s reference</span></div>
<div class="line"><span class="lineno">  194</span>         <span class="keyword">const</span> <span class="keyword">auto</span> key_range = <a class="code hl_variable" href="#adaaa7d466a003a720717341ca7fda6c5">key_bimap</a>.right.equal_range(pi);</div>
<div class="line"><span class="lineno">  195</span>         <a class="code hl_variable" href="#adaaa7d466a003a720717341ca7fda6c5">key_bimap</a>.right.erase(key_range.first, key_range.second);</div>
<div class="line"><span class="lineno">  196</span>      }</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1chain__apis_1_1account__query__db__impl_a91acce27e2dee3eee42bc63d1d589919_icgraph.png" border="0" usemap="#astructsysio_1_1chain__apis_1_1account__query__db__impl_a91acce27e2dee3eee42bc63d1d589919_icgraph" alt=""/></div>
<map name="astructsysio_1_1chain__apis_1_1account__query__db__impl_a91acce27e2dee3eee42bc63d1d589919_icgraph" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_a91acce27e2dee3eee42bc63d1d589919_icgraph">
<area shape="rect" title=" " alt="" coords="418,5,576,61"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#aa184af1bc686f0c89bb5837f05ef30fb" title=" " alt="" coords="5,5,164,61"/>
<area shape="poly" title=" " alt="" coords="402,29,370,28,212,28,164,30,164,25,212,23,370,23,402,24"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#a55b5594b7d59cd2c7c38207cb988a44c" title=" " alt="" coords="212,37,370,93"/>
<area shape="poly" title=" " alt="" coords="403,50,371,56,370,50,402,45"/>
<area shape="poly" title=" " alt="" coords="196,53,164,48,165,43,197,48"/>
</map>
</div>

</div>
</div>
<a id="a55b5594b7d59cd2c7c38207cb988a44c" name="a55b5594b7d59cd2c7c38207cb988a44c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55b5594b7d59cd2c7c38207cb988a44c">&#9670;&#160;</a></span>rollback_to_before()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::chain_apis::account_query_db_impl::rollback_to_before </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#ab9b14f4554cc4a0da2c361e9757b1662">chain::block_state_ptr</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>bsp</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Given a block number, remove all permissions that were last updated at or after that block number this will effectively roll back the database to just before the incoming block</p>
<p>For each removed entry, this will create a new entry if there exists an equivalent {owner, name} permission at the HEAD state of the chain. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bsp</td><td>- the block to rollback before </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00237">237</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  237</span>                                                                 {</div>
<div class="line"><span class="lineno">  238</span>         <span class="keyword">const</span> <span class="keyword">auto</span> bnum = bsp-&gt;block-&gt;block_num();</div>
<div class="line"><span class="lineno">  239</span>         <span class="keyword">auto</span>&amp; index = <a class="code hl_variable" href="#aba57026fbb7d549b2431c788a5bd3a2d">permission_info_index</a>.get&lt;by_last_updated_height&gt;();</div>
<div class="line"><span class="lineno">  240</span>         <span class="keyword">const</span> <span class="keyword">auto</span>&amp; permission_by_owner = <a class="code hl_class" href="classsysio_1_1chain_1_1controller.html">controller</a>.<a class="code hl_function" href="classsysio_1_1chain_1_1controller.html#a0c79d00dae8c0d90efc18f4d091b2391">db</a>().<a class="code hl_function" href="classchainbase_1_1database.html#a4d5297635dcf70be481d9b600da9bc13">get_index</a>&lt;<a class="code hl_typedef" href="namespacesysio_1_1chain.html#a4e24a1668746342d40487d1019880986">chain::permission_index</a>&gt;().indices().get&lt;chain::by_owner&gt;();</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span>         <span class="comment">// roll back time-map</span></div>
<div class="line"><span class="lineno">  243</span>         <span class="keyword">auto</span> time_iter = <a class="code hl_variable" href="#adf9eb275a2909c7f837e9514146468d5">time_to_block_num</a>.rbegin();</div>
<div class="line"><span class="lineno">  244</span>         <span class="keywordflow">while</span> (time_iter != <a class="code hl_variable" href="#adf9eb275a2909c7f837e9514146468d5">time_to_block_num</a>.rend() &amp;&amp; time_iter-&gt;second &gt;= bnum) {</div>
<div class="line"><span class="lineno">  245</span>            time_iter = <span class="keyword">decltype</span>(time_iter){<a class="code hl_variable" href="#adf9eb275a2909c7f837e9514146468d5">time_to_block_num</a>.erase( std::next(time_iter).base() )};</div>
<div class="line"><span class="lineno">  246</span>         }</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>         <span class="keyword">auto</span> curr_iter = index.rbegin();</div>
<div class="line"><span class="lineno">  249</span>         <span class="keywordflow">while</span> (!index.empty()) {</div>
<div class="line"><span class="lineno">  250</span>            <span class="keywordflow">if</span> (curr_iter == index.rend()) {</div>
<div class="line"><span class="lineno">  251</span>               <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  252</span>            }</div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span>            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; pi = (*curr_iter);</div>
<div class="line"><span class="lineno">  255</span>            <span class="keywordflow">if</span> (pi.last_updated_height &lt; bnum) {</div>
<div class="line"><span class="lineno">  256</span>               <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  257</span>            }</div>
<div class="line"><span class="lineno">  258</span> </div>
<div class="line"><span class="lineno">  259</span>            <span class="comment">// remove this entry from the bimaps</span></div>
<div class="line"><span class="lineno">  260</span>            <a class="code hl_function" href="#a91acce27e2dee3eee42bc63d1d589919">remove_from_bimaps</a>(pi);</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>            <span class="keyword">auto</span> itr = permission_by_owner.find(std::make_tuple(pi.owner, pi.name));</div>
<div class="line"><span class="lineno">  263</span>            <span class="keywordflow">if</span> (itr == permission_by_owner.end()) {</div>
<div class="line"><span class="lineno">  264</span>               <span class="comment">// this permission does not exist at this point in the chains history</span></div>
<div class="line"><span class="lineno">  265</span>               curr_iter = <span class="keyword">decltype</span>(curr_iter)( index.erase(index.iterator_to(pi)) );</div>
<div class="line"><span class="lineno">  266</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  267</span>               <span class="keyword">const</span> <span class="keyword">auto</span>&amp; po = *itr;</div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span>               <a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> last_updated_height = po.last_updated == bsp-&gt;header.timestamp ? bsp-&gt;block_num : <a class="code hl_function" href="#a2789aac6391a10191d5aeb728fbe6410">last_updated_time_to_height</a>(po.last_updated);</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>               index.modify(index.iterator_to(pi), [&amp;po, last_updated_height](<span class="keyword">auto</span>&amp; mutable_pi) {</div>
<div class="line"><span class="lineno">  272</span>                  mutable_pi.last_updated_height = last_updated_height;</div>
<div class="line"><span class="lineno">  273</span>                  mutable_pi.threshold = po.auth.threshold;</div>
<div class="line"><span class="lineno">  274</span>               });</div>
<div class="line"><span class="lineno">  275</span>               <a class="code hl_function" href="#a8fda1043cb0c69e99385511e8a23c50f">add_to_bimaps</a>(pi, po);</div>
<div class="line"><span class="lineno">  276</span>               ++curr_iter;</div>
<div class="line"><span class="lineno">  277</span>            }</div>
<div class="line"><span class="lineno">  278</span>         }</div>
<div class="line"><span class="lineno">  279</span>      }</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1chain__apis_1_1account__query__db__impl_a55b5594b7d59cd2c7c38207cb988a44c_cgraph.png" border="0" usemap="#astructsysio_1_1chain__apis_1_1account__query__db__impl_a55b5594b7d59cd2c7c38207cb988a44c_cgraph" alt=""/></div>
<map name="astructsysio_1_1chain__apis_1_1account__query__db__impl_a55b5594b7d59cd2c7c38207cb988a44c_cgraph" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_a55b5594b7d59cd2c7c38207cb988a44c_cgraph">
<area shape="rect" title=" " alt="" coords="5,128,164,184"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#a8fda1043cb0c69e99385511e8a23c50f" title=" " alt="" coords="220,5,378,61"/>
<area shape="poly" title=" " alt="" coords="124,125,210,71,219,66,221,71,213,75,127,130"/>
<area shape="rect" href="classsysio_1_1chain_1_1controller.html#a0c79d00dae8c0d90efc18f4d091b2391" title=" " alt="" coords="212,86,386,111"/>
<area shape="poly" title=" " alt="" coords="163,132,233,113,234,118,165,137"/>
<area shape="rect" href="classchainbase_1_1database.html#a4d5297635dcf70be481d9b600da9bc13" title=" " alt="" coords="228,136,370,176"/>
<area shape="poly" title=" " alt="" coords="164,153,213,153,213,158,164,158"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#a2789aac6391a10191d5aeb728fbe6410" title=" " alt="" coords="220,200,378,271"/>
<area shape="poly" title=" " alt="" coords="162,182,206,198,204,203,160,187"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#a91acce27e2dee3eee42bc63d1d589919" title=" " alt="" coords="220,295,378,350"/>
<area shape="poly" title=" " alt="" coords="110,182,156,231,213,280,219,284,216,289,210,285,152,235,107,186"/>
<area shape="rect" href="classchainbase_1_1database.html#afcfe00f81a526c1376d4f51197dd3a9a" title=" " alt="" coords="446,99,613,125"/>
<area shape="poly" title=" " alt="" coords="369,140,443,126,444,131,370,145"/>
<area shape="rect" href="classchainbase_1_1database.html#aa5a2ca0da0092693ac49b36b7ec6817a" title=" " alt="" coords="672,92,814,132"/>
<area shape="poly" title=" " alt="" coords="613,118,656,118,656,123,613,123"/>
<area shape="poly" title=" " alt="" coords="672,131,625,140,499,152,385,157,385,152,499,147,624,135,671,126"/>
<area shape="poly" title=" " alt="" coords="672,106,628,106,628,100,672,101"/>
<area shape="rect" href="classsysio_1_1chain_1_1controller.html#a53495de416021a4e56e889e771b25a52" title=" " alt="" coords="434,210,624,251"/>
<area shape="poly" title=" " alt="" coords="378,231,418,230,419,236,379,237"/>
<area shape="rect" href="classsysio_1_1chain_1_1controller.html#a878ff6368c473051417382a9d485030d" title=" " alt="" coords="434,276,624,316"/>
<area shape="poly" title=" " alt="" coords="379,254,434,268,433,274,378,259"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structsysio_1_1chain__apis_1_1account__query__db__impl_a55b5594b7d59cd2c7c38207cb988a44c_icgraph.png" border="0" usemap="#astructsysio_1_1chain__apis_1_1account__query__db__impl_a55b5594b7d59cd2c7c38207cb988a44c_icgraph" alt=""/></div>
<map name="astructsysio_1_1chain__apis_1_1account__query__db__impl_a55b5594b7d59cd2c7c38207cb988a44c_icgraph" id="astructsysio_1_1chain__apis_1_1account__query__db__impl_a55b5594b7d59cd2c7c38207cb988a44c_icgraph">
<area shape="rect" title=" " alt="" coords="212,5,370,61"/>
<area shape="rect" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html#aa184af1bc686f0c89bb5837f05ef30fb" title=" " alt="" coords="5,5,164,61"/>
<area shape="poly" title=" " alt="" coords="196,36,164,36,164,30,196,30"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="acfb769f3aefd6346ad9172f6726d253d" name="acfb769f3aefd6346ad9172f6726d253d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfb769f3aefd6346ad9172f6726d253d">&#9670;&#160;</a></span>cached_trace_map</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#af147fd6d9ed179c6f379965feb0579a6">cached_trace_map_t</a> sysio::chain_apis::account_query_db_impl::cached_trace_map</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00486">486</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>

</div>
</div>
<a id="a0eaaa63915f583ca51f38307d557f7e9" name="a0eaaa63915f583ca51f38307d557f7e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0eaaa63915f583ca51f38307d557f7e9">&#9670;&#160;</a></span>controller</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classsysio_1_1chain_1_1controller.html">chain::controller</a>&amp; sysio::chain_apis::account_query_db_impl::controller</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00485">485</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>

</div>
</div>
<a id="adaaa7d466a003a720717341ca7fda6c5" name="adaaa7d466a003a720717341ca7fda6c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaaa7d466a003a720717341ca7fda6c5">&#9670;&#160;</a></span>key_bimap</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#aea2e43cf58e004caaac0c903a10a076d">key_bimap_t</a> sysio::chain_apis::account_query_db_impl::key_bimap</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00503">503</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>

</div>
</div>
<a id="a6bf2e9f0ed9cd1f0762888b22ad55024" name="a6bf2e9f0ed9cd1f0762888b22ad55024"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bf2e9f0ed9cd1f0762888b22ad55024">&#9670;&#160;</a></span>name_bimap</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#abebad38a4e12d41c47569dc60125cdcd">name_bimap_t</a> sysio::chain_apis::account_query_db_impl::name_bimap</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00502">502</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>

</div>
</div>
<a id="a6a6e477d5ab8af17385632e6cc16bbdd" name="a6a6e477d5ab8af17385632e6cc16bbdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a6e477d5ab8af17385632e6cc16bbdd">&#9670;&#160;</a></span>onblock_trace</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#abdd57326fce804f4a467539158816e88">onblock_trace_t</a> sysio::chain_apis::account_query_db_impl::onblock_trace</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00487">487</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>

</div>
</div>
<a id="aba57026fbb7d549b2431c788a5bd3a2d" name="aba57026fbb7d549b2431c788a5bd3a2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba57026fbb7d549b2431c788a5bd3a2d">&#9670;&#160;</a></span>permission_info_index</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">permission_info_index_t sysio::chain_apis::account_query_db_impl::permission_info_index</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00501">501</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>

</div>
</div>
<a id="ad111bde83946593be763eeb7e3541fdf" name="ad111bde83946593be763eeb7e3541fdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad111bde83946593be763eeb7e3541fdf">&#9670;&#160;</a></span>rw_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_mutex sysio::chain_apis::account_query_db_impl::rw_mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00505">505</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>

</div>
</div>
<a id="adf9eb275a2909c7f837e9514146468d5" name="adf9eb275a2909c7f837e9514146468d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf9eb275a2909c7f837e9514146468d5">&#9670;&#160;</a></span>time_to_block_num</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#ab624636989896e7e7aac983cd4eb12ec">time_map_t</a> sysio::chain_apis::account_query_db_impl::time_to_block_num</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="account__query__db_8cpp_source.html#l00490">490</a> of file <a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>plugins/chain_plugin/<a class="el" href="account__query__db_8cpp_source.html">account_query_db.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacesysio.html">sysio</a></li><li class="navelem"><a class="el" href="namespacesysio_1_1chain__apis.html">chain_apis</a></li><li class="navelem"><a class="el" href="structsysio_1_1chain__apis_1_1account__query__db__impl.html">account_query_db_impl</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
