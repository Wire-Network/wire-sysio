<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wire Sysio: libraries/chain/webassembly/runtimes/sys-vm-oc/LLVMJIT.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Wire Sysio<span id="projectnumber">&#160;Wire Sysion 1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_l_l_v_m_j_i_t_8cpp_source.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">LLVMJIT.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="_l_l_v_m_j_i_t_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">The SYS VM Optimized Compiler was created in part based on WAVM</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">https://github.com/WebAssembly/wasm-jit-prototype</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">subject the following:</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment"></span> </div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">Copyright (c) 2016-2019, Andrew Scheidecker</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">All rights reserved.</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment"></span> </div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">* Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">* Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">* Neither the name of WAVM nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment"></span> </div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL &lt;COPYRIGHT HOLDER&gt; BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment">*/</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span> </div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &quot;<a class="code" href="chain_2webassembly_2runtimes_2sys-vm-oc_2_l_l_v_m_j_i_t_8h.html">LLVMJIT.h</a>&quot;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span> </div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &quot;llvm/ExecutionEngine/ExecutionEngine.h&quot;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &quot;llvm/ExecutionEngine/RTDyldMemoryManager.h&quot;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &quot;llvm/ExecutionEngine/Orc/CompileUtils.h&quot;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &quot;llvm/ExecutionEngine/Orc/IRCompileLayer.h&quot;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &quot;llvm/ExecutionEngine/Orc/LambdaResolver.h&quot;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &quot;llvm/ExecutionEngine/Orc/RTDyldObjectLinkingLayer.h&quot;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &quot;llvm/ExecutionEngine/Orc/NullResolver.h&quot;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &quot;llvm/ExecutionEngine/Orc/Core.h&quot;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span> </div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &quot;llvm/Analysis/Passes.h&quot;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#include &quot;llvm/IR/DataLayout.h&quot;</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &quot;llvm/IR/DerivedTypes.h&quot;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &quot;llvm/IR/IRBuilder.h&quot;</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &quot;llvm/IR/LLVMContext.h&quot;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &quot;llvm/IR/LegacyPassManager.h&quot;</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &quot;llvm/IR/Module.h&quot;</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">#include &quot;llvm/IR/Intrinsics.h&quot;</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#include &quot;llvm/IR/Verifier.h&quot;</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#include &quot;llvm/IR/ValueHandle.h&quot;</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="preprocessor">#include &quot;llvm/IR/DebugLoc.h&quot;</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="preprocessor">#include &quot;llvm/Object/ObjectFile.h&quot;</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="preprocessor">#include &quot;llvm/Object/SymbolSize.h&quot;</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="preprocessor">#include &quot;llvm/Support/Debug.h&quot;</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="preprocessor">#include &quot;llvm/Support/DataTypes.h&quot;</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="preprocessor">#include &quot;llvm/Support/FileSystem.h&quot;</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="preprocessor">#include &quot;llvm/Support/TargetSelect.h&quot;</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="preprocessor">#include &quot;llvm/Support/Host.h&quot;</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="preprocessor">#include &quot;llvm/Support/DynamicLibrary.h&quot;</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="preprocessor">#include &quot;llvm/Transforms/Scalar.h&quot;</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="preprocessor">#include &quot;llvm/IR/DIBuilder.h&quot;</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="preprocessor">#include &quot;llvm/Transforms/InstCombine/InstCombine.h&quot;</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span><span class="preprocessor">#include &quot;llvm/Transforms/Utils.h&quot;</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span> </div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span><span class="preprocessor">#include &lt;<a class="code" href="datastream_8hpp.html">fc/io/datastream.hpp</a>&gt;</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="preprocessor">#include &lt;<a class="code" href="raw_8hpp.html">fc/io/raw.hpp</a>&gt;</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="preprocessor">#include &lt;<a class="code" href="typename_8hpp.html">fc/reflect/typename.hpp</a>&gt;</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span> </div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span><span class="preprocessor">#include &quot;llvm/Support/LEB128.h&quot;</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span> </div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span><span class="preprocessor">#if LLVM_VERSION_MAJOR == 7</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span><span class="keyword">namespace </span>llvm { <span class="keyword">namespace </span>orc {</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>    <span class="keyword">using </span>LegacyRTDyldObjectLinkingLayer = RTDyldObjectLinkingLayer;</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> A, <span class="keyword">typename</span> B&gt;</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    <span class="keyword">using </span>LegacyIRCompileLayer = IRCompileLayer&lt;A, B&gt;;</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>}}</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span> </div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno"><a class="line" href="_l_l_v_m_j_i_t_8cpp.html#a5c74e15987848b85dbb98a9da695ae26">   67</a></span><span class="preprocessor">#define DUMP_UNOPTIMIZED_MODULE 0</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno"><a class="line" href="_l_l_v_m_j_i_t_8cpp.html#af2b23fa859365a0fcfe493e9ac40b6aa">   68</a></span><span class="preprocessor">#define VERIFY_MODULE 0</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno"><a class="line" href="_l_l_v_m_j_i_t_8cpp.html#a22b37db990db6936e315c47f946e07b8">   69</a></span><span class="preprocessor">#define DUMP_OPTIMIZED_MODULE 0</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno"><a class="line" href="_l_l_v_m_j_i_t_8cpp.html#a5fa484a6e6f50b0e0c22852a3dfc2ec5">   70</a></span><span class="preprocessor">#define PRINT_DISASSEMBLY 0</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span> </div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="preprocessor">#if PRINT_DISASSEMBLY</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span><span class="preprocessor">#include &quot;llvm-c/Disassembler.h&quot;</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span><span class="keyword">static</span> <span class="keywordtype">void</span> disassembleFunction(<a class="code hl_typedef" href="_basic_types_8h.html#aa63ef7b996d5487ce35a5a66601f3e73">U8</a>* bytes,<a class="code hl_typedef" href="_basic_types_8h.html#af4b74e6229378a16db5de05834273c54">Uptr</a> numBytes)</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>{</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    LLVMDisasmContextRef disasmRef = LLVMCreateDisasm(llvm::sys::getProcessTriple().c_str(),<span class="keyword">nullptr</span>,0,<span class="keyword">nullptr</span>,<span class="keyword">nullptr</span>);</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span> </div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>    <a class="code hl_typedef" href="_basic_types_8h.html#aa63ef7b996d5487ce35a5a66601f3e73">U8</a>* nextByte = bytes;</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>    <a class="code hl_typedef" href="_basic_types_8h.html#af4b74e6229378a16db5de05834273c54">Uptr</a> numBytesRemaining = numBytes;</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    <span class="keywordflow">while</span>(numBytesRemaining)</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>    {</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>        <span class="keywordtype">char</span> instructionBuffer[256];</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>        <span class="keyword">const</span> <a class="code hl_typedef" href="_basic_types_8h.html#af4b74e6229378a16db5de05834273c54">Uptr</a> numInstructionBytes = LLVMDisasmInstruction(</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>            disasmRef,</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>            nextByte,</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>            numBytesRemaining,</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>            <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_typedef" href="_basic_types_8h.html#af4b74e6229378a16db5de05834273c54">Uptr</a><span class="keyword">&gt;</span>(nextByte),</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>            instructionBuffer,</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>            <span class="keyword">sizeof</span>(instructionBuffer)</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>            );</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>        <span class="keywordflow">if</span>(numInstructionBytes == 0 || numInstructionBytes &gt; numBytesRemaining)</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>        numBytesRemaining -= numInstructionBytes;</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>        nextByte += numInstructionBytes;</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span> </div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>        printf(<span class="stringliteral">&quot;\t\t%s\n&quot;</span>,instructionBuffer);</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    };</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span> </div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>    LLVMDisasmDispose(disasmRef);</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>}</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span> </div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacesysio.html">sysio</a> { <span class="keyword">namespace </span>chain { <span class="keyword">namespace </span>eosvmoc {</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span> </div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespace_l_l_v_m_j_i_t.html">LLVMJIT</a></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>{</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno"><a class="line" href="namespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t.html#a60cb0d30b54b5e84e4fd23a6b2764dfa">  107</a></span>    llvm::TargetMachine* <a class="code hl_variable" href="namespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t.html#a60cb0d30b54b5e84e4fd23a6b2764dfa">targetMachine</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span> </div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    <span class="comment">// Allocates memory for the LLVM object loader.</span></div>
<div class="foldopen" id="foldopen00110" data-start="{" data-end="};">
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html">  110</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html">UnitMemoryManager</a> : llvm::RTDyldMemoryManager</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    {</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a6eac125f2645bc0ad2d04378de421053">  112</a></span>        <a class="code hl_function" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a6eac125f2645bc0ad2d04378de421053">UnitMemoryManager</a>() {}</div>
<div class="foldopen" id="foldopen00113" data-start="{" data-end="}">
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a891c8c03841cd0f4216e0be4acbdf44d">  113</a></span>        <span class="keyword">virtual</span> <a class="code hl_function" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a891c8c03841cd0f4216e0be4acbdf44d">~UnitMemoryManager</a>()<span class="keyword"> override</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span><span class="keyword">        </span>{}</div>
</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span> </div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#adff81bd00cdd1e72118f7c787a32c14b">  116</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#adff81bd00cdd1e72118f7c787a32c14b">registerEHFrames</a>(<a class="code hl_typedef" href="_basic_types_8h.html#aa63ef7b996d5487ce35a5a66601f3e73">U8</a>* addr, <a class="code hl_typedef" href="_basic_types_8h.html#a25809e0734a149248fcf5831efa4e33d">U64</a> loadAddr,<a class="code hl_typedef" href="stdint_8h.html#a31b85deecb45924320becd11d3ee16ce">uintptr_t</a> numBytes)<span class="keyword"> override </span>{}</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a57a55e0792209f4a2d3a80017e7f3bff">  117</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a57a55e0792209f4a2d3a80017e7f3bff">deregisterEHFrames</a>()<span class="keyword"> override </span>{}</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>        </div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#ad2c6b5fd3ea9a3686db69d90b1e85c4d">  119</a></span>        <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#ad2c6b5fd3ea9a3686db69d90b1e85c4d">needsToReserveAllocationSpace</a>()<span class="keyword"> override </span>{ <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div>
<div class="foldopen" id="foldopen00120" data-start="{" data-end="}">
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a724ecfa076aa21352fc2e4ccd19f8b55">  120</a></span>        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a724ecfa076aa21352fc2e4ccd19f8b55">reserveAllocationSpace</a>(<a class="code hl_typedef" href="stdint_8h.html#a31b85deecb45924320becd11d3ee16ce">uintptr_t</a> numCodeBytes,<a class="code hl_typedef" href="_basic_types_8h.html#a696390429f2f3b644bde8d0322a24124">U32</a> codeAlignment,<a class="code hl_typedef" href="stdint_8h.html#a31b85deecb45924320becd11d3ee16ce">uintptr_t</a> numReadOnlyBytes,<a class="code hl_typedef" href="_basic_types_8h.html#a696390429f2f3b644bde8d0322a24124">U32</a> readOnlyAlignment,<a class="code hl_typedef" href="stdint_8h.html#a31b85deecb45924320becd11d3ee16ce">uintptr_t</a> numReadWriteBytes,<a class="code hl_typedef" href="_basic_types_8h.html#a696390429f2f3b644bde8d0322a24124">U32</a> readWriteAlignment)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>            code = std::make_unique&lt;std::vector&lt;uint8_t&gt;&gt;(numCodeBytes + numReadOnlyBytes + numReadWriteBytes);</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>            <a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a07c6e5a6ef21274ca9fbb83bd852a202">ptr</a> = code-&gt;data();</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>        }</div>
</div>
<div class="foldopen" id="foldopen00124" data-start="{" data-end="}">
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a43ccf480d8eb772858d59e098bc3ec0e">  124</a></span>        <span class="keyword">virtual</span> <a class="code hl_typedef" href="_basic_types_8h.html#aa63ef7b996d5487ce35a5a66601f3e73">U8</a>* <a class="code hl_function" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a43ccf480d8eb772858d59e098bc3ec0e">allocateCodeSection</a>(<a class="code hl_typedef" href="stdint_8h.html#a31b85deecb45924320becd11d3ee16ce">uintptr_t</a> numBytes,<a class="code hl_typedef" href="_basic_types_8h.html#a696390429f2f3b644bde8d0322a24124">U32</a> alignment,<a class="code hl_typedef" href="_basic_types_8h.html#a696390429f2f3b644bde8d0322a24124">U32</a> sectionID,llvm::StringRef sectionName)<span class="keyword"> override</span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span><span class="keyword">        </span>{</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a146ca7e5c73c73e6034aa4ca3a88192e">get_next_code_ptr</a>(numBytes, alignment);</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>        }</div>
</div>
<div class="foldopen" id="foldopen00128" data-start="{" data-end="}">
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a4b89abefce475ea35baa5ee8a6a7d540">  128</a></span>        <span class="keyword">virtual</span> <a class="code hl_typedef" href="_basic_types_8h.html#aa63ef7b996d5487ce35a5a66601f3e73">U8</a>* <a class="code hl_function" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a4b89abefce475ea35baa5ee8a6a7d540">allocateDataSection</a>(<a class="code hl_typedef" href="stdint_8h.html#a31b85deecb45924320becd11d3ee16ce">uintptr_t</a> numBytes,<a class="code hl_typedef" href="_basic_types_8h.html#a696390429f2f3b644bde8d0322a24124">U32</a> alignment,<a class="code hl_typedef" href="_basic_types_8h.html#a696390429f2f3b644bde8d0322a24124">U32</a> sectionID,llvm::StringRef SectionName,<span class="keywordtype">bool</span> isReadOnly)<span class="keyword"> override</span></div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span><span class="keyword">        </span>{</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>            <span class="keywordflow">if</span>(SectionName == <span class="stringliteral">&quot;.eh_frame&quot;</span>) {</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>                <a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#adf615a5a7fd7b1cba4e47570c3f4ec31">dumpster</a>.resize(numBytes);</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>                <span class="keywordflow">return</span> <a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#adf615a5a7fd7b1cba4e47570c3f4ec31">dumpster</a>.data();</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>            }</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>            <span class="keywordflow">if</span>(SectionName == <span class="stringliteral">&quot;.stack_sizes&quot;</span>) {</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>                <span class="keywordflow">return</span> <a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a6b8e73a94e41a72ffcb94bd398d5a150">stack_sizes</a>.emplace_back(numBytes).data();</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>            }</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>            <a class="code hl_define" href="_errors_8h.html#a03bec6af3af0dd492e348b40cbe40a46">WAVM_ASSERT_THROW</a>(isReadOnly);</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span> </div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a146ca7e5c73c73e6034aa4ca3a88192e">get_next_code_ptr</a>(numBytes, alignment);</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>        }</div>
</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span> </div>
<div class="foldopen" id="foldopen00142" data-start="{" data-end="}">
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a44ef1aa87060e55632ecb309b8f9b3e5">  142</a></span>        <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a44ef1aa87060e55632ecb309b8f9b3e5">finalizeMemory</a>(std::string* ErrMsg = <span class="keyword">nullptr</span>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>            code-&gt;resize(<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a07c6e5a6ef21274ca9fbb83bd852a202">ptr</a> - code-&gt;data());</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>        }</div>
</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span> </div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a276b169f9fe69897d8f66689c9ae3491">  147</a></span>        std::unique_ptr&lt;std::vector&lt;uint8_t&gt;&gt; <a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a276b169f9fe69897d8f66689c9ae3491">code</a>;</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a07c6e5a6ef21274ca9fbb83bd852a202">  148</a></span>        <a class="code hl_typedef" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>* <a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a07c6e5a6ef21274ca9fbb83bd852a202">ptr</a>;</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span> </div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#adf615a5a7fd7b1cba4e47570c3f4ec31">  150</a></span>        std::vector&lt;uint8_t&gt; <a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#adf615a5a7fd7b1cba4e47570c3f4ec31">dumpster</a>;</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a6b8e73a94e41a72ffcb94bd398d5a150">  151</a></span>        std::list&lt;std::vector&lt;uint8_t&gt;&gt; <a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a6b8e73a94e41a72ffcb94bd398d5a150">stack_sizes</a>;</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span> </div>
<div class="foldopen" id="foldopen00153" data-start="{" data-end="}">
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a146ca7e5c73c73e6034aa4ca3a88192e">  153</a></span>        <a class="code hl_typedef" href="_basic_types_8h.html#aa63ef7b996d5487ce35a5a66601f3e73">U8</a>* <a class="code hl_function" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a146ca7e5c73c73e6034aa4ca3a88192e">get_next_code_ptr</a>(<a class="code hl_typedef" href="stdint_8h.html#a31b85deecb45924320becd11d3ee16ce">uintptr_t</a> numBytes, <a class="code hl_typedef" href="_basic_types_8h.html#a696390429f2f3b644bde8d0322a24124">U32</a> alignment) {</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>            <a class="code hl_define" href="exception_8hpp.html#abed525eeff3ae581be7e4e2fcd3b7bf4">FC_ASSERT</a>(alignment &lt;= <span class="keyword">alignof</span>(std::max_align_t), <span class="stringliteral">&quot;alignment of section exceeds max_align_t&quot;</span>);</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>            <a class="code hl_typedef" href="stdint_8h.html#a31b85deecb45924320becd11d3ee16ce">uintptr_t</a> <a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a> = (<a class="code hl_typedef" href="stdint_8h.html#a31b85deecb45924320becd11d3ee16ce">uintptr_t</a>)<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a07c6e5a6ef21274ca9fbb83bd852a202">ptr</a>;</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>            <a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a> += alignment - 1LL;</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>            <a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a> &amp;= ~(alignment - 1LL);</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>            <a class="code hl_typedef" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>* this_section = (<a class="code hl_typedef" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>*)<a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a>;</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>            <a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a07c6e5a6ef21274ca9fbb83bd852a202">ptr</a> = this_section + numBytes;</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span> </div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>            <span class="keywordflow">return</span> this_section;</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>        }</div>
</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span> </div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#ac1906bbe37006648426c76c6d1ed2718">  164</a></span>        <a class="code hl_function" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#ac1906bbe37006648426c76c6d1ed2718">UnitMemoryManager</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html">UnitMemoryManager</a>&amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#ab8399f87dce5beeba2b4b8757e800d0f">  165</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#ab8399f87dce5beeba2b4b8757e800d0f">operator=</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html">UnitMemoryManager</a>&amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    };</div>
</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span> </div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    <span class="comment">// The JIT compilation unit for a WebAssembly module instance.</span></div>
<div class="foldopen" id="foldopen00169" data-start="{" data-end="};">
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html">  169</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html">JITModule</a></div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    {</div>
<div class="foldopen" id="foldopen00171" data-start="{" data-end="}">
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#a79b68c9356f7d9066f7a0cc8ac3cd98e">  171</a></span>        <a class="code hl_function" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#a79b68c9356f7d9066f7a0cc8ac3cd98e">JITModule</a>() {</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>            objectLayer = std::make_unique&lt;llvm::orc::LegacyRTDyldObjectLinkingLayer&gt;(ES,[<span class="keyword">this</span>](llvm::orc::VModuleKey <a class="code hl_variable" href="make__512_8cpp.html#a3d4e997ddc51e0c06c306fe4862826c0">K</a>) {</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>                                    <span class="keywordflow">return</span> llvm::orc::LegacyRTDyldObjectLinkingLayer::Resources{</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>                                        <a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#ab7f0aebbdbe4a4c17b3e7f2d71745556">unitmemorymanager</a>, std::make_shared&lt;llvm::orc::NullResolver&gt;()</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>                                        };</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>                              },</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>                              [](llvm::orc::VModuleKey, <span class="keyword">const</span> llvm::object::ObjectFile &amp;<a class="code hl_struct" href="struct_obj.html">Obj</a>, <span class="keyword">const</span> llvm::RuntimeDyld::LoadedObjectInfo &amp;o) {</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>                                  <span class="comment">//nothing to do</span></div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>                              },</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>                              [<span class="keyword">this</span>](llvm::orc::VModuleKey, <span class="keyword">const</span> llvm::object::ObjectFile &amp;<a class="code hl_struct" href="struct_obj.html">Obj</a>, <span class="keyword">const</span> llvm::RuntimeDyld::LoadedObjectInfo &amp;o) {</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>                                    <span class="keywordflow">for</span>(<span class="keyword">auto</span> symbolSizePair : llvm::object::computeSymbolSizes(<a class="code hl_struct" href="struct_obj.html">Obj</a>)) {</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>                                        <span class="keyword">auto</span> <a class="code hl_class" href="classsysio_1_1chain_1_1symbol.html">symbol</a> = symbolSizePair.first;</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>                                        <span class="keyword">auto</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> = <a class="code hl_class" href="classsysio_1_1chain_1_1symbol.html">symbol</a>.getName();</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>                                        <span class="keyword">auto</span> address = <a class="code hl_class" href="classsysio_1_1chain_1_1symbol.html">symbol</a>.getAddress();</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>                                        <span class="keywordflow">if</span>(<a class="code hl_class" href="classsysio_1_1chain_1_1symbol.html">symbol</a>.getType() &amp;&amp; <a class="code hl_class" href="classsysio_1_1chain_1_1symbol.html">symbol</a>.getType().get() == llvm::object::SymbolRef::ST_Function &amp;&amp; <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> &amp;&amp; address) {</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>                                            <a class="code hl_typedef" href="_basic_types_8h.html#af4b74e6229378a16db5de05834273c54">Uptr</a> loadedAddress = <a class="code hl_typedef" href="_basic_types_8h.html#af4b74e6229378a16db5de05834273c54">Uptr</a>(*address);</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>                                            <span class="keyword">auto</span> symbolSection = <a class="code hl_class" href="classsysio_1_1chain_1_1symbol.html">symbol</a>.getSection();</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>                                            <span class="keywordflow">if</span>(symbolSection)</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>                                                loadedAddress += (<a class="code hl_typedef" href="_basic_types_8h.html#af4b74e6229378a16db5de05834273c54">Uptr</a>)o.getSectionLoadAddress(*symbolSection.get());</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>                                            <a class="code hl_typedef" href="_basic_types_8h.html#af4b74e6229378a16db5de05834273c54">Uptr</a> functionDefIndex;</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>                                            <span class="keywordflow">if</span>(<a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t.html#a6a845a4c43fc6bf05d5f301aef56ff77">getFunctionIndexFromExternalName</a>(<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>-&gt;data(),functionDefIndex))</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>                                                <a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#ad1bc934c90c201e1a5be2e3e55d159d8">function_to_offsets</a>[functionDefIndex] = loadedAddress-(<a class="code hl_typedef" href="stdint_8h.html#a31b85deecb45924320becd11d3ee16ce">uintptr_t</a>)<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#ab7f0aebbdbe4a4c17b3e7f2d71745556">unitmemorymanager</a>-&gt;code-&gt;data();</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span><span class="preprocessor">#if PRINT_DISASSEMBLY</span></div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>                                            disassembleFunction((<a class="code hl_typedef" href="_basic_types_8h.html#aa63ef7b996d5487ce35a5a66601f3e73">U8</a>*)loadedAddress, symbolSizePair.second);</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>                                        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code hl_class" href="classsysio_1_1chain_1_1symbol.html">symbol</a>.getType() &amp;&amp; <a class="code hl_class" href="classsysio_1_1chain_1_1symbol.html">symbol</a>.getType().get() == llvm::object::SymbolRef::ST_Data &amp;&amp; <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> &amp;&amp; *<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> == <a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t.html#ad225d9ff7b3c8d52e2e7128b937ca42e">getTableSymbolName</a>()) {</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>                                            <a class="code hl_typedef" href="_basic_types_8h.html#af4b74e6229378a16db5de05834273c54">Uptr</a> loadedAddress = <a class="code hl_typedef" href="_basic_types_8h.html#af4b74e6229378a16db5de05834273c54">Uptr</a>(*address);</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>                                            <span class="keyword">auto</span> symbolSection = <a class="code hl_class" href="classsysio_1_1chain_1_1symbol.html">symbol</a>.getSection();</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>                                            <span class="keywordflow">if</span>(symbolSection)</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>                                                loadedAddress += (<a class="code hl_typedef" href="_basic_types_8h.html#af4b74e6229378a16db5de05834273c54">Uptr</a>)o.getSectionLoadAddress(*symbolSection.get());</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>                                            <a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#a967949e4139b99d7d07f571347133d4f">table_offset</a> = loadedAddress-(<a class="code hl_typedef" href="stdint_8h.html#a31b85deecb45924320becd11d3ee16ce">uintptr_t</a>)<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#ab7f0aebbdbe4a4c17b3e7f2d71745556">unitmemorymanager</a>-&gt;code-&gt;data();</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>                                        }</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>                                    }</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>                              }</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>                              );</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>            objectLayer-&gt;setProcessAllSections(<span class="keyword">true</span>);</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>            compileLayer = std::make_unique&lt;CompileLayer&gt;(*objectLayer,llvm::orc::SimpleCompiler(*<a class="code hl_variable" href="namespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t.html#a60cb0d30b54b5e84e4fd23a6b2764dfa">targetMachine</a>));</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>        }</div>
</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span> </div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>        <span class="keywordtype">void</span> <a class="code hl_function" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#acdaca1b71e8a1795bf2b4d89569700f4">compile</a>(llvm::Module* llvmModule);</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span> </div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#ab7f0aebbdbe4a4c17b3e7f2d71745556">  212</a></span>        std::shared_ptr&lt;UnitMemoryManager&gt; <a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#ab7f0aebbdbe4a4c17b3e7f2d71745556">unitmemorymanager</a> = std::make_shared&lt;UnitMemoryManager&gt;();</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span> </div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#ad1bc934c90c201e1a5be2e3e55d159d8">  214</a></span>        std::map&lt;unsigned, uintptr_t&gt; <a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#ad1bc934c90c201e1a5be2e3e55d159d8">function_to_offsets</a>;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#aa7e31b17a71b4f64554deb2b9a75f22c">  215</a></span>        std::vector&lt;uint8_t&gt; <a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#aa7e31b17a71b4f64554deb2b9a75f22c">final_pic_code</a>;</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#a967949e4139b99d7d07f571347133d4f">  216</a></span>        <a class="code hl_typedef" href="stdint_8h.html#a31b85deecb45924320becd11d3ee16ce">uintptr_t</a> <a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#a967949e4139b99d7d07f571347133d4f">table_offset</a> = 0;</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span> </div>
<div class="foldopen" id="foldopen00218" data-start="{" data-end="}">
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#ad54ff7cf85db86378e159dc9ae4fd6b2">  218</a></span>        <a class="code hl_function" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#ad54ff7cf85db86378e159dc9ae4fd6b2">~JITModule</a>()</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>        {</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>        }</div>
</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>    <span class="keyword">private</span>:</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>        <span class="keyword">typedef</span> llvm::orc::LegacyIRCompileLayer&lt;llvm::orc::LegacyRTDyldObjectLinkingLayer, llvm::orc::SimpleCompiler&gt; CompileLayer;</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span> </div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>        llvm::orc::ExecutionSession ES;</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>        std::unique_ptr&lt;llvm::orc::LegacyRTDyldObjectLinkingLayer&gt; objectLayer;</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>        std::unique_ptr&lt;CompileLayer&gt; compileLayer;</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    };</div>
</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span> </div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>    <span class="keyword">static</span> <a class="code hl_typedef" href="_basic_types_8h.html#af4b74e6229378a16db5de05834273c54">Uptr</a> printedModuleId = 0;</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span> </div>
<div class="foldopen" id="foldopen00231" data-start="{" data-end="}">
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno"><a class="line" href="namespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t.html#ad380b9c76f5f65db2c744a9c46815c3b">  231</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t.html#ad380b9c76f5f65db2c744a9c46815c3b">printModule</a>(<span class="keyword">const</span> llvm::Module* llvmModule,<span class="keyword">const</span> <span class="keywordtype">char</span>* filename)</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>    {</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>        std::error_code errorCode;</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>        std::string augmentedFilename = std::string(filename) + std::to_string(printedModuleId++) + <span class="stringliteral">&quot;.ll&quot;</span>;</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>        llvm::raw_fd_ostream dumpFileStream(augmentedFilename,errorCode,llvm::sys::fs::OpenFlags::F_Text);</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>        llvmModule-&gt;print(dumpFileStream,<span class="keyword">nullptr</span>);</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>    }</div>
</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span> </div>
<div class="foldopen" id="foldopen00240" data-start="{" data-end="}">
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno"><a class="line" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#acdaca1b71e8a1795bf2b4d89569700f4">  240</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#acdaca1b71e8a1795bf2b4d89569700f4">JITModule::compile</a>(llvm::Module* llvmModule)</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>    {</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>        <span class="comment">// Get a target machine object for this host, and set the module to use its data layout.</span></div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>        llvmModule-&gt;setDataLayout(<a class="code hl_variable" href="namespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t.html#a60cb0d30b54b5e84e4fd23a6b2764dfa">targetMachine</a>-&gt;createDataLayout());</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span> </div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>        <span class="comment">// Verify the module.</span></div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>        <span class="keywordflow">if</span>(<a class="code hl_define" href="_l_l_v_m_j_i_t_8cpp.html#a5c74e15987848b85dbb98a9da695ae26">DUMP_UNOPTIMIZED_MODULE</a>) { <a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t.html#ad380b9c76f5f65db2c744a9c46815c3b">printModule</a>(llvmModule,<span class="stringliteral">&quot;llvmDump&quot;</span>); }</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>        <span class="keywordflow">if</span>(<a class="code hl_define" href="_l_l_v_m_j_i_t_8cpp.html#af2b23fa859365a0fcfe493e9ac40b6aa">VERIFY_MODULE</a>)</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>        {</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>            std::string verifyOutputString;</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>            llvm::raw_string_ostream verifyOutputStream(verifyOutputString);</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>            <span class="keywordflow">if</span>(llvm::verifyModule(*llvmModule,&amp;verifyOutputStream))</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>            { <a class="code hl_function" href="namespace_errors.html#a719a329951edb01e45afe1443dfa2a92">Errors::fatalf</a>(<span class="stringliteral">&quot;LLVM verification errors:\n%s\n&quot;</span>,verifyOutputString.c_str()); }</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>        }</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span> </div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>        <span class="keyword">auto</span> fpm = <span class="keyword">new</span> llvm::legacy::FunctionPassManager(llvmModule);</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>        fpm-&gt;add(llvm::createPromoteMemoryToRegisterPass());</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>        fpm-&gt;add(llvm::createInstructionCombiningPass());</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>        fpm-&gt;add(llvm::createCFGSimplificationPass());</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>        fpm-&gt;add(llvm::createJumpThreadingPass());</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>        fpm-&gt;add(llvm::createConstantPropagationPass());</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>        fpm-&gt;doInitialization();</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span> </div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span> functionIt = llvmModule-&gt;begin();functionIt != llvmModule-&gt;end();++functionIt)</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>        { fpm-&gt;run(*functionIt); }</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>        <span class="keyword">delete</span> fpm;</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span> </div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>        <span class="keywordflow">if</span>(<a class="code hl_define" href="_l_l_v_m_j_i_t_8cpp.html#a22b37db990db6936e315c47f946e07b8">DUMP_OPTIMIZED_MODULE</a>) { <a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t.html#ad380b9c76f5f65db2c744a9c46815c3b">printModule</a>(llvmModule,<span class="stringliteral">&quot;llvmOptimizedDump&quot;</span>); }</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span> </div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>        llvm::orc::VModuleKey <a class="code hl_variable" href="make__512_8cpp.html#a3d4e997ddc51e0c06c306fe4862826c0">K</a> = ES.allocateVModule();</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>        std::unique_ptr&lt;llvm::Module&gt; mod(llvmModule);</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>        <a class="code hl_define" href="_errors_8h.html#a03bec6af3af0dd492e348b40cbe40a46">WAVM_ASSERT_THROW</a>(!compileLayer-&gt;addModule(<a class="code hl_variable" href="make__512_8cpp.html#a3d4e997ddc51e0c06c306fe4862826c0">K</a>, std::move(mod)));</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>        <a class="code hl_define" href="_errors_8h.html#a03bec6af3af0dd492e348b40cbe40a46">WAVM_ASSERT_THROW</a>(!compileLayer-&gt;emitAndFinalize(<a class="code hl_variable" href="make__512_8cpp.html#a3d4e997ddc51e0c06c306fe4862826c0">K</a>));</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span> </div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>        <a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#aa7e31b17a71b4f64554deb2b9a75f22c">final_pic_code</a> = std::move(*<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#ab7f0aebbdbe4a4c17b3e7f2d71745556">unitmemorymanager</a>-&gt;code);</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>    }</div>
</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span> </div>
<div class="foldopen" id="foldopen00278" data-start="{" data-end="}">
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno"><a class="line" href="namespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t.html#a5bd12a2d92a270ecd02902006bc53f59">  278</a></span>    <a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1instantiated__code.html">instantiated_code</a> <a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t.html#a5bd12a2d92a270ecd02902006bc53f59">instantiateModule</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_i_r_1_1_module.html">IR::Module</a>&amp; module)</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    {</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>        <span class="keyword">static</span> <span class="keywordtype">bool</span> inited;</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>        <span class="keywordflow">if</span>(!inited) {</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>            inited = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>            llvm::InitializeNativeTarget();</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>            llvm::InitializeNativeTargetAsmPrinter();</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>            llvm::InitializeNativeTargetAsmParser();</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>            llvm::InitializeNativeTargetDisassembler();</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>            llvm::sys::DynamicLibrary::LoadLibraryPermanently(<span class="keyword">nullptr</span>);</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span> </div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>            <span class="keyword">auto</span> targetTriple = llvm::sys::getProcessTriple();</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span> </div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>            llvm::TargetOptions to;</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>            to.EmitStackSizeSection = 1;</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span> </div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>            <a class="code hl_variable" href="namespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t.html#a60cb0d30b54b5e84e4fd23a6b2764dfa">targetMachine</a> = llvm::EngineBuilder().setRelocationModel(llvm::Reloc::PIC_).setCodeModel(llvm::CodeModel::Small).setTargetOptions(to).selectTarget(</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>                llvm::Triple(targetTriple),<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,llvm::SmallVector&lt;std::string,0&gt;()</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>                );</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>        }</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span> </div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>        <span class="comment">// Emit LLVM IR for the module.</span></div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>        <span class="keyword">auto</span> llvmModule = <a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t.html#a988f69eb1e3c3722b9b899034d86d146">emitModule</a>(module);</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span> </div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>        <span class="comment">// Construct the JIT compilation pipeline for this module.</span></div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>        <span class="keyword">auto</span> jitModule = <span class="keyword">new</span> <a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html">JITModule</a>();</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>        <span class="comment">// Compile the module.</span></div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>        jitModule-&gt;compile(llvmModule);</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span> </div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>        <span class="keywordtype">unsigned</span> num_functions_stack_size_found = 0;</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>        <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; stacksizes : jitModule-&gt;unitmemorymanager-&gt;stack_sizes) {</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>            <a class="code hl_class" href="classfc_1_1datastream.html">fc::datastream&lt;const char*&gt;</a> ds(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(stacksizes.data()), stacksizes.size());</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>            <span class="keywordflow">while</span>(ds.remaining()) {</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>                <a class="code hl_typedef" href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> funcaddr;</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>                <a class="code hl_struct" href="structfc_1_1unsigned__int.html">fc::unsigned_int</a> stack_size;</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>                <a class="code hl_function" href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab">fc::raw::unpack</a>(ds, funcaddr);</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>                <a class="code hl_function" href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab">fc::raw::unpack</a>(ds, stack_size);</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span> </div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>                ++num_functions_stack_size_found;</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>                <span class="keywordflow">if</span>(stack_size &gt; 16u*1024u)</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>                    _exit(1);</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>            }</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>        }</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>        <span class="keywordflow">if</span>(num_functions_stack_size_found != module.functions.defs.size())</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>            _exit(1);</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>        <span class="keywordflow">if</span>(jitModule-&gt;final_pic_code.size() &gt;= 16u*1024u*1024u)</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>            _exit(1);</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span> </div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>        <a class="code hl_struct" href="structsysio_1_1chain_1_1eosvmoc_1_1instantiated__code.html">instantiated_code</a> <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a3d854b6efad16a16e4d7b4539d4fc71f">ret</a>;</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>        <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a3d854b6efad16a16e4d7b4539d4fc71f">ret</a>.<a class="code hl_variable" href="structsysio_1_1chain_1_1eosvmoc_1_1instantiated__code.html#a2e421c7dd25bd2e007277247b8facea9">code</a> = jitModule-&gt;final_pic_code;</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>        <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a3d854b6efad16a16e4d7b4539d4fc71f">ret</a>.function_offsets = jitModule-&gt;function_to_offsets;</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>        <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a3d854b6efad16a16e4d7b4539d4fc71f">ret</a>.table_offset = jitModule-&gt;table_offset;</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a3d854b6efad16a16e4d7b4539d4fc71f">ret</a>;</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    }</div>
</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>}</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>}}}</div>
<div class="ttc" id="a_basic_types_8h_html_a25809e0734a149248fcf5831efa4e33d"><div class="ttname"><a href="_basic_types_8h.html#a25809e0734a149248fcf5831efa4e33d">U64</a></div><div class="ttdeci">uint64_t U64</div><div class="ttdef"><b>Definition</b> <a href="_basic_types_8h_source.html#l00011">BasicTypes.h:11</a></div></div>
<div class="ttc" id="a_basic_types_8h_html_a696390429f2f3b644bde8d0322a24124"><div class="ttname"><a href="_basic_types_8h.html#a696390429f2f3b644bde8d0322a24124">U32</a></div><div class="ttdeci">uint32_t U32</div><div class="ttdef"><b>Definition</b> <a href="_basic_types_8h_source.html#l00009">BasicTypes.h:9</a></div></div>
<div class="ttc" id="a_basic_types_8h_html_aa63ef7b996d5487ce35a5a66601f3e73"><div class="ttname"><a href="_basic_types_8h.html#aa63ef7b996d5487ce35a5a66601f3e73">U8</a></div><div class="ttdeci">uint8_t U8</div><div class="ttdef"><b>Definition</b> <a href="_basic_types_8h_source.html#l00005">BasicTypes.h:5</a></div></div>
<div class="ttc" id="a_basic_types_8h_html_af4b74e6229378a16db5de05834273c54"><div class="ttname"><a href="_basic_types_8h.html#af4b74e6229378a16db5de05834273c54">Uptr</a></div><div class="ttdeci">PointerIntHelper&lt; sizeof(size_t)&gt;::UnsignedIntType Uptr</div><div class="ttdef"><b>Definition</b> <a href="_basic_types_8h_source.html#l00022">BasicTypes.h:22</a></div></div>
<div class="ttc" id="a_errors_8h_html_a03bec6af3af0dd492e348b40cbe40a46"><div class="ttname"><a href="_errors_8h.html#a03bec6af3af0dd492e348b40cbe40a46">WAVM_ASSERT_THROW</a></div><div class="ttdeci">#define WAVM_ASSERT_THROW(cond)</div><div class="ttdef"><b>Definition</b> <a href="_errors_8h_source.html#l00029">Errors.h:29</a></div></div>
<div class="ttc" id="a_l_l_v_m_j_i_t_8cpp_html_a22b37db990db6936e315c47f946e07b8"><div class="ttname"><a href="_l_l_v_m_j_i_t_8cpp.html#a22b37db990db6936e315c47f946e07b8">DUMP_OPTIMIZED_MODULE</a></div><div class="ttdeci">#define DUMP_OPTIMIZED_MODULE</div><div class="ttdef"><b>Definition</b> <a href="#l00069">LLVMJIT.cpp:69</a></div></div>
<div class="ttc" id="a_l_l_v_m_j_i_t_8cpp_html_a5c74e15987848b85dbb98a9da695ae26"><div class="ttname"><a href="_l_l_v_m_j_i_t_8cpp.html#a5c74e15987848b85dbb98a9da695ae26">DUMP_UNOPTIMIZED_MODULE</a></div><div class="ttdeci">#define DUMP_UNOPTIMIZED_MODULE</div><div class="ttdef"><b>Definition</b> <a href="#l00067">LLVMJIT.cpp:67</a></div></div>
<div class="ttc" id="a_l_l_v_m_j_i_t_8cpp_html_af2b23fa859365a0fcfe493e9ac40b6aa"><div class="ttname"><a href="_l_l_v_m_j_i_t_8cpp.html#af2b23fa859365a0fcfe493e9ac40b6aa">VERIFY_MODULE</a></div><div class="ttdeci">#define VERIFY_MODULE</div><div class="ttdef"><b>Definition</b> <a href="#l00068">LLVMJIT.cpp:68</a></div></div>
<div class="ttc" id="abn_8cpp_html_a8b0eadcc506862e9d751ab45185053aa"><div class="ttname"><a href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a></div><div class="ttdeci">const mie::Vuint &amp; p</div><div class="ttdef"><b>Definition</b> <a href="bn_8cpp_source.html#l00027">bn.cpp:27</a></div></div>
<div class="ttc" id="achain_2webassembly_2runtimes_2sys-vm-oc_2_l_l_v_m_j_i_t_8h_html"><div class="ttname"><a href="chain_2webassembly_2runtimes_2sys-vm-oc_2_l_l_v_m_j_i_t_8h.html">LLVMJIT.h</a></div></div>
<div class="ttc" id="aclassfc_1_1datastream_html"><div class="ttname"><a href="classfc_1_1datastream.html">fc::datastream</a></div><div class="ttdef"><b>Definition</b> <a href="datastream_8hpp_source.html#l00018">datastream.hpp:18</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1symbol_html"><div class="ttname"><a href="classsysio_1_1chain_1_1symbol.html">sysio::chain::symbol</a></div><div class="ttdef"><b>Definition</b> <a href="symbol_8hpp_source.html#l00057">symbol.hpp:57</a></div></div>
<div class="ttc" id="adatastream_8hpp_html"><div class="ttname"><a href="datastream_8hpp.html">datastream.hpp</a></div></div>
<div class="ttc" id="aexception_8hpp_html_abed525eeff3ae581be7e4e2fcd3b7bf4"><div class="ttname"><a href="exception_8hpp.html#abed525eeff3ae581be7e4e2fcd3b7bf4">FC_ASSERT</a></div><div class="ttdeci">#define FC_ASSERT(TEST,...)</div><div class="ttdoc">Checks a condition and throws an assert_exception if the test is FALSE.</div><div class="ttdef"><b>Definition</b> <a href="exception_8hpp_source.html#l00362">exception.hpp:362</a></div></div>
<div class="ttc" id="amake__512_8cpp_html_a3d4e997ddc51e0c06c306fe4862826c0"><div class="ttname"><a href="make__512_8cpp.html#a3d4e997ddc51e0c06c306fe4862826c0">K</a></div><div class="ttdeci">const uint64 K</div><div class="ttdef"><b>Definition</b> <a href="make__512_8cpp_source.html#l00078">make_512.cpp:78</a></div></div>
<div class="ttc" id="anamespace_errors_html_a719a329951edb01e45afe1443dfa2a92"><div class="ttname"><a href="namespace_errors.html#a719a329951edb01e45afe1443dfa2a92">Errors::fatalf</a></div><div class="ttdeci">void fatalf(const char *messageFormat,...)</div><div class="ttdef"><b>Definition</b> <a href="_errors_8h_source.html#l00012">Errors.h:12</a></div></div>
<div class="ttc" id="anamespace_l_l_v_m_j_i_t_html"><div class="ttname"><a href="namespace_l_l_v_m_j_i_t.html">LLVMJIT</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-jit_2_source_2_runtime_2_l_l_v_m_j_i_t_8h_source.html#l00042">LLVMJIT.h:43</a></div></div>
<div class="ttc" id="anamespacefc_1_1raw_html_a0b442d98ceb22dd5a6ae84745e43ffab"><div class="ttname"><a href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab">fc::raw::unpack</a></div><div class="ttdeci">void unpack(Stream &amp;s, std::deque&lt; T &gt; &amp;value)</div><div class="ttdef"><b>Definition</b> <a href="raw_8hpp_source.html#l00540">raw.hpp:540</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_html_a5bd12a2d92a270ecd02902006bc53f59"><div class="ttname"><a href="namespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t.html#a5bd12a2d92a270ecd02902006bc53f59">sysio::chain::eosvmoc::LLVMJIT::instantiateModule</a></div><div class="ttdeci">instantiated_code instantiateModule(const IR::Module &amp;module)</div><div class="ttdef"><b>Definition</b> <a href="#l00278">LLVMJIT.cpp:278</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_html_a60cb0d30b54b5e84e4fd23a6b2764dfa"><div class="ttname"><a href="namespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t.html#a60cb0d30b54b5e84e4fd23a6b2764dfa">sysio::chain::eosvmoc::LLVMJIT::targetMachine</a></div><div class="ttdeci">llvm::TargetMachine * targetMachine</div><div class="ttdef"><b>Definition</b> <a href="#l00107">LLVMJIT.cpp:107</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_html_a6a845a4c43fc6bf05d5f301aef56ff77"><div class="ttname"><a href="namespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t.html#a6a845a4c43fc6bf05d5f301aef56ff77">sysio::chain::eosvmoc::LLVMJIT::getFunctionIndexFromExternalName</a></div><div class="ttdeci">bool getFunctionIndexFromExternalName(const char *externalName, Uptr &amp;outFunctionDefIndex)</div><div class="ttdef"><b>Definition</b> <a href="_l_l_v_m_emit_i_r_8cpp_source.html#l00066">LLVMEmitIR.cpp:66</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_html_a988f69eb1e3c3722b9b899034d86d146"><div class="ttname"><a href="namespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t.html#a988f69eb1e3c3722b9b899034d86d146">sysio::chain::eosvmoc::LLVMJIT::emitModule</a></div><div class="ttdeci">llvm::Module * emitModule(const Module &amp;module)</div><div class="ttdef"><b>Definition</b> <a href="_l_l_v_m_emit_i_r_8cpp_source.html#l01326">LLVMEmitIR.cpp:1326</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_html_ad225d9ff7b3c8d52e2e7128b937ca42e"><div class="ttname"><a href="namespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t.html#ad225d9ff7b3c8d52e2e7128b937ca42e">sysio::chain::eosvmoc::LLVMJIT::getTableSymbolName</a></div><div class="ttdeci">const char * getTableSymbolName()</div><div class="ttdef"><b>Definition</b> <a href="_l_l_v_m_emit_i_r_8cpp_source.html#l00062">LLVMEmitIR.cpp:62</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_html_ad380b9c76f5f65db2c744a9c46815c3b"><div class="ttname"><a href="namespacesysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t.html#ad380b9c76f5f65db2c744a9c46815c3b">sysio::chain::eosvmoc::LLVMJIT::printModule</a></div><div class="ttdeci">void printModule(const llvm::Module *llvmModule, const char *filename)</div><div class="ttdef"><b>Definition</b> <a href="#l00231">LLVMJIT.cpp:231</a></div></div>
<div class="ttc" id="anamespacesysio_html"><div class="ttname"><a href="namespacesysio.html">sysio</a></div><div class="ttdef"><b>Definition</b> <a href="abi__serializer_8cpp_source.html#l00008">abi_serializer.cpp:8</a></div></div>
<div class="ttc" id="araw_8hpp_html"><div class="ttname"><a href="raw_8hpp.html">raw.hpp</a></div></div>
<div class="ttc" id="astdint_8h_html_a31b85deecb45924320becd11d3ee16ce"><div class="ttname"><a href="stdint_8h.html#a31b85deecb45924320becd11d3ee16ce">uintptr_t</a></div><div class="ttdeci">_W64 unsigned int uintptr_t</div><div class="ttdef"><b>Definition</b> <a href="stdint_8h_source.html#l00165">stdint.h:165</a></div></div>
<div class="ttc" id="astdint_8h_html_aba7bc1797add20fe3efdf37ced1182c5"><div class="ttname"><a href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></div><div class="ttdeci">unsigned char uint8_t</div><div class="ttdef"><b>Definition</b> <a href="stdint_8h_source.html#l00124">stdint.h:124</a></div></div>
<div class="ttc" id="astdint_8h_html_aec6fcb673ff035718c238c8c9d544c47"><div class="ttname"><a href="stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a></div><div class="ttdeci">unsigned __int64 uint64_t</div><div class="ttdef"><b>Definition</b> <a href="stdint_8h_source.html#l00136">stdint.h:136</a></div></div>
<div class="ttc" id="astruct_i_r_1_1_module_html"><div class="ttname"><a href="struct_i_r_1_1_module.html">IR::Module</a></div><div class="ttdef"><b>Definition</b> <a href="_module_8h_source.html#l00129">Module.h:130</a></div></div>
<div class="ttc" id="astruct_obj_html"><div class="ttname"><a href="struct_obj.html">Obj</a></div><div class="ttdef"><b>Definition</b> <a href="_tricky_8tests_8cpp_source.html#l00187">Tricky.tests.cpp:188</a></div></div>
<div class="ttc" id="astructfc_1_1unsigned__int_html"><div class="ttname"><a href="structfc_1_1unsigned__int.html">fc::unsigned_int</a></div><div class="ttdef"><b>Definition</b> <a href="varint_8hpp_source.html#l00006">varint.hpp:6</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module_html"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html">sysio::chain::eosvmoc::LLVMJIT::JITModule</a></div><div class="ttdef"><b>Definition</b> <a href="#l00169">LLVMJIT.cpp:170</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module_html_a79b68c9356f7d9066f7a0cc8ac3cd98e"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#a79b68c9356f7d9066f7a0cc8ac3cd98e">sysio::chain::eosvmoc::LLVMJIT::JITModule::JITModule</a></div><div class="ttdeci">JITModule()</div><div class="ttdef"><b>Definition</b> <a href="#l00171">LLVMJIT.cpp:171</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module_html_a967949e4139b99d7d07f571347133d4f"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#a967949e4139b99d7d07f571347133d4f">sysio::chain::eosvmoc::LLVMJIT::JITModule::table_offset</a></div><div class="ttdeci">uintptr_t table_offset</div><div class="ttdef"><b>Definition</b> <a href="#l00216">LLVMJIT.cpp:216</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module_html_aa7e31b17a71b4f64554deb2b9a75f22c"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#aa7e31b17a71b4f64554deb2b9a75f22c">sysio::chain::eosvmoc::LLVMJIT::JITModule::final_pic_code</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; final_pic_code</div><div class="ttdef"><b>Definition</b> <a href="#l00215">LLVMJIT.cpp:215</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module_html_ab7f0aebbdbe4a4c17b3e7f2d71745556"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#ab7f0aebbdbe4a4c17b3e7f2d71745556">sysio::chain::eosvmoc::LLVMJIT::JITModule::unitmemorymanager</a></div><div class="ttdeci">std::shared_ptr&lt; UnitMemoryManager &gt; unitmemorymanager</div><div class="ttdef"><b>Definition</b> <a href="#l00212">LLVMJIT.cpp:212</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module_html_acdaca1b71e8a1795bf2b4d89569700f4"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#acdaca1b71e8a1795bf2b4d89569700f4">sysio::chain::eosvmoc::LLVMJIT::JITModule::compile</a></div><div class="ttdeci">void compile(llvm::Module *llvmModule)</div><div class="ttdef"><b>Definition</b> <a href="#l00240">LLVMJIT.cpp:240</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module_html_ad1bc934c90c201e1a5be2e3e55d159d8"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#ad1bc934c90c201e1a5be2e3e55d159d8">sysio::chain::eosvmoc::LLVMJIT::JITModule::function_to_offsets</a></div><div class="ttdeci">std::map&lt; unsigned, uintptr_t &gt; function_to_offsets</div><div class="ttdef"><b>Definition</b> <a href="#l00214">LLVMJIT.cpp:214</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module_html_ad54ff7cf85db86378e159dc9ae4fd6b2"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_j_i_t_module.html#ad54ff7cf85db86378e159dc9ae4fd6b2">sysio::chain::eosvmoc::LLVMJIT::JITModule::~JITModule</a></div><div class="ttdeci">~JITModule()</div><div class="ttdef"><b>Definition</b> <a href="#l00218">LLVMJIT.cpp:218</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager_html"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html">sysio::chain::eosvmoc::LLVMJIT::UnitMemoryManager</a></div><div class="ttdef"><b>Definition</b> <a href="#l00110">LLVMJIT.cpp:111</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager_html_a07c6e5a6ef21274ca9fbb83bd852a202"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a07c6e5a6ef21274ca9fbb83bd852a202">sysio::chain::eosvmoc::LLVMJIT::UnitMemoryManager::ptr</a></div><div class="ttdeci">uint8_t * ptr</div><div class="ttdef"><b>Definition</b> <a href="#l00148">LLVMJIT.cpp:148</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager_html_a146ca7e5c73c73e6034aa4ca3a88192e"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a146ca7e5c73c73e6034aa4ca3a88192e">sysio::chain::eosvmoc::LLVMJIT::UnitMemoryManager::get_next_code_ptr</a></div><div class="ttdeci">U8 * get_next_code_ptr(uintptr_t numBytes, U32 alignment)</div><div class="ttdef"><b>Definition</b> <a href="#l00153">LLVMJIT.cpp:153</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager_html_a276b169f9fe69897d8f66689c9ae3491"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a276b169f9fe69897d8f66689c9ae3491">sysio::chain::eosvmoc::LLVMJIT::UnitMemoryManager::code</a></div><div class="ttdeci">std::unique_ptr&lt; std::vector&lt; uint8_t &gt; &gt; code</div><div class="ttdef"><b>Definition</b> <a href="#l00147">LLVMJIT.cpp:147</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager_html_a43ccf480d8eb772858d59e098bc3ec0e"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a43ccf480d8eb772858d59e098bc3ec0e">sysio::chain::eosvmoc::LLVMJIT::UnitMemoryManager::allocateCodeSection</a></div><div class="ttdeci">virtual U8 * allocateCodeSection(uintptr_t numBytes, U32 alignment, U32 sectionID, llvm::StringRef sectionName) override</div><div class="ttdef"><b>Definition</b> <a href="#l00124">LLVMJIT.cpp:124</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager_html_a44ef1aa87060e55632ecb309b8f9b3e5"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a44ef1aa87060e55632ecb309b8f9b3e5">sysio::chain::eosvmoc::LLVMJIT::UnitMemoryManager::finalizeMemory</a></div><div class="ttdeci">virtual bool finalizeMemory(std::string *ErrMsg=nullptr) override</div><div class="ttdef"><b>Definition</b> <a href="#l00142">LLVMJIT.cpp:142</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager_html_a4b89abefce475ea35baa5ee8a6a7d540"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a4b89abefce475ea35baa5ee8a6a7d540">sysio::chain::eosvmoc::LLVMJIT::UnitMemoryManager::allocateDataSection</a></div><div class="ttdeci">virtual U8 * allocateDataSection(uintptr_t numBytes, U32 alignment, U32 sectionID, llvm::StringRef SectionName, bool isReadOnly) override</div><div class="ttdef"><b>Definition</b> <a href="#l00128">LLVMJIT.cpp:128</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager_html_a57a55e0792209f4a2d3a80017e7f3bff"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a57a55e0792209f4a2d3a80017e7f3bff">sysio::chain::eosvmoc::LLVMJIT::UnitMemoryManager::deregisterEHFrames</a></div><div class="ttdeci">void deregisterEHFrames() override</div><div class="ttdef"><b>Definition</b> <a href="#l00117">LLVMJIT.cpp:117</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager_html_a6b8e73a94e41a72ffcb94bd398d5a150"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a6b8e73a94e41a72ffcb94bd398d5a150">sysio::chain::eosvmoc::LLVMJIT::UnitMemoryManager::stack_sizes</a></div><div class="ttdeci">std::list&lt; std::vector&lt; uint8_t &gt; &gt; stack_sizes</div><div class="ttdef"><b>Definition</b> <a href="#l00151">LLVMJIT.cpp:151</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager_html_a6eac125f2645bc0ad2d04378de421053"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a6eac125f2645bc0ad2d04378de421053">sysio::chain::eosvmoc::LLVMJIT::UnitMemoryManager::UnitMemoryManager</a></div><div class="ttdeci">UnitMemoryManager()</div><div class="ttdef"><b>Definition</b> <a href="#l00112">LLVMJIT.cpp:112</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager_html_a724ecfa076aa21352fc2e4ccd19f8b55"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a724ecfa076aa21352fc2e4ccd19f8b55">sysio::chain::eosvmoc::LLVMJIT::UnitMemoryManager::reserveAllocationSpace</a></div><div class="ttdeci">virtual void reserveAllocationSpace(uintptr_t numCodeBytes, U32 codeAlignment, uintptr_t numReadOnlyBytes, U32 readOnlyAlignment, uintptr_t numReadWriteBytes, U32 readWriteAlignment) override</div><div class="ttdef"><b>Definition</b> <a href="#l00120">LLVMJIT.cpp:120</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager_html_a891c8c03841cd0f4216e0be4acbdf44d"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#a891c8c03841cd0f4216e0be4acbdf44d">sysio::chain::eosvmoc::LLVMJIT::UnitMemoryManager::~UnitMemoryManager</a></div><div class="ttdeci">virtual ~UnitMemoryManager() override</div><div class="ttdef"><b>Definition</b> <a href="#l00113">LLVMJIT.cpp:113</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager_html_ab8399f87dce5beeba2b4b8757e800d0f"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#ab8399f87dce5beeba2b4b8757e800d0f">sysio::chain::eosvmoc::LLVMJIT::UnitMemoryManager::operator=</a></div><div class="ttdeci">void operator=(const UnitMemoryManager &amp;)=delete</div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager_html_ac1906bbe37006648426c76c6d1ed2718"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#ac1906bbe37006648426c76c6d1ed2718">sysio::chain::eosvmoc::LLVMJIT::UnitMemoryManager::UnitMemoryManager</a></div><div class="ttdeci">UnitMemoryManager(const UnitMemoryManager &amp;)=delete</div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager_html_ad2c6b5fd3ea9a3686db69d90b1e85c4d"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#ad2c6b5fd3ea9a3686db69d90b1e85c4d">sysio::chain::eosvmoc::LLVMJIT::UnitMemoryManager::needsToReserveAllocationSpace</a></div><div class="ttdeci">virtual bool needsToReserveAllocationSpace() override</div><div class="ttdef"><b>Definition</b> <a href="#l00119">LLVMJIT.cpp:119</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager_html_adf615a5a7fd7b1cba4e47570c3f4ec31"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#adf615a5a7fd7b1cba4e47570c3f4ec31">sysio::chain::eosvmoc::LLVMJIT::UnitMemoryManager::dumpster</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; dumpster</div><div class="ttdef"><b>Definition</b> <a href="#l00150">LLVMJIT.cpp:150</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager_html_adff81bd00cdd1e72118f7c787a32c14b"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1_l_l_v_m_j_i_t_1_1_unit_memory_manager.html#adff81bd00cdd1e72118f7c787a32c14b">sysio::chain::eosvmoc::LLVMJIT::UnitMemoryManager::registerEHFrames</a></div><div class="ttdeci">void registerEHFrames(U8 *addr, U64 loadAddr, uintptr_t numBytes) override</div><div class="ttdef"><b>Definition</b> <a href="#l00116">LLVMJIT.cpp:116</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1instantiated__code_html"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1instantiated__code.html">sysio::chain::eosvmoc::instantiated_code</a></div><div class="ttdef"><b>Definition</b> <a href="chain_2webassembly_2runtimes_2sys-vm-oc_2_l_l_v_m_j_i_t_8h_source.html#l00015">LLVMJIT.h:15</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1eosvmoc_1_1instantiated__code_html_a2e421c7dd25bd2e007277247b8facea9"><div class="ttname"><a href="structsysio_1_1chain_1_1eosvmoc_1_1instantiated__code.html#a2e421c7dd25bd2e007277247b8facea9">sysio::chain::eosvmoc::instantiated_code::code</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; code</div><div class="ttdef"><b>Definition</b> <a href="chain_2webassembly_2runtimes_2sys-vm-oc_2_l_l_v_m_j_i_t_8h_source.html#l00016">LLVMJIT.h:16</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1name_html"><div class="ttname"><a href="structsysio_1_1chain_1_1name.html">sysio::chain::name</a></div><div class="ttdoc">Immutable except for fc::from_variant.</div><div class="ttdef"><b>Definition</b> <a href="name_8hpp_source.html#l00043">name.hpp:43</a></div></div>
<div class="ttc" id="atypename_8hpp_html"><div class="ttname"><a href="typename_8hpp.html">typename.hpp</a></div></div>
<div class="ttc" id="ayubihsm__pkcs11_8c_html_a3d854b6efad16a16e4d7b4539d4fc71f"><div class="ttname"><a href="yubihsm__pkcs11_8c.html#a3d854b6efad16a16e4d7b4539d4fc71f">ret</a></div><div class="ttdeci">CK_RV ret</div><div class="ttdef"><b>Definition</b> <a href="yubihsm__pkcs11_8c_source.html#l00973">yubihsm_pkcs11.c:973</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_428556e0652617aa37d2f7d8bcaf7fdf.html">libraries</a></li><li class="navelem"><a class="el" href="dir_0d4aba5c25a4be0a24c819a636048cb8.html">chain</a></li><li class="navelem"><a class="el" href="dir_5ce26c810a83f17a95a83ff8b63a1157.html">webassembly</a></li><li class="navelem"><a class="el" href="dir_c2960930e3b06cebf37819099d4f5ebd.html">runtimes</a></li><li class="navelem"><a class="el" href="dir_cd6419f50f332a9255201564fabdf79a.html">sys-vm-oc</a></li><li class="navelem"><a class="el" href="_l_l_v_m_j_i_t_8cpp.html">LLVMJIT.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
