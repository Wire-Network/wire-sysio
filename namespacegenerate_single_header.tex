\doxysection{generate\+Single\+Header Namespace Reference}
\hypertarget{namespacegenerate_single_header}{}\label{namespacegenerate_single_header}\index{generateSingleHeader@{generateSingleHeader}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacegenerate_single_header_a68b36c55964b0e4d53413e63f8597fb5}{generate}} (v)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\Hypertarget{namespacegenerate_single_header_a68b36c55964b0e4d53413e63f8597fb5}\index{generateSingleHeader@{generateSingleHeader}!generate@{generate}}
\index{generate@{generate}!generateSingleHeader@{generateSingleHeader}}
\doxysubsubsection{\texorpdfstring{generate()}{generate()}}
{\footnotesize\ttfamily \label{namespacegenerate_single_header_a68b36c55964b0e4d53413e63f8597fb5} 
generate\+Single\+Header.\+generate (\begin{DoxyParamCaption}\item[{}]{v}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{generate_single_header_8py_source_l00014}{14}} of file \mbox{\hyperlink{generate_single_header_8py_source}{generate\+Single\+Header.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00014\ \textcolor{keyword}{def\ }generate(v):}
\DoxyCodeLine{00015\ \ \ \ \ includesParser\ =\ re.compile(\ \textcolor{stringliteral}{r'\(\backslash\)s*\#\(\backslash\)s*include\(\backslash\)s*"{}(.*)"{}'}\ )}
\DoxyCodeLine{00016\ \ \ \ \ guardParser\ =\ re.compile(\ \textcolor{stringliteral}{r'\(\backslash\)s*\#.*(TWOBLUECUBES\_)?CATCH\_.*\_INCLUDED'})}
\DoxyCodeLine{00017\ \ \ \ \ defineParser\ =\ re.compile(\ \textcolor{stringliteral}{r'\(\backslash\)s*\#define\(\backslash\)s+(TWOBLUECUBES\_)?CATCH\_.*\_INCLUDED'})}
\DoxyCodeLine{00018\ \ \ \ \ ifParser\ =\ re.compile(\ \textcolor{stringliteral}{r'\(\backslash\)s*\#ifndef\ (TWOBLUECUBES\_)?CATCH\_.*\_INCLUDED'})}
\DoxyCodeLine{00019\ \ \ \ \ endIfParser\ =\ re.compile(\ \textcolor{stringliteral}{r'\(\backslash\)s*\#endif\ //\ (TWOBLUECUBES\_)?CATCH\_.*\_INCLUDED'})}
\DoxyCodeLine{00020\ \ \ \ \ ifImplParser\ =\ re.compile(\ \textcolor{stringliteral}{r'\(\backslash\)s*\#ifdef\ CATCH\_CONFIG\_RUNNER'}\ )}
\DoxyCodeLine{00021\ \ \ \ \ commentParser1\ =\ re.compile(\ \textcolor{stringliteral}{r'\string^\(\backslash\)s*/\(\backslash\)*'})}
\DoxyCodeLine{00022\ \ \ \ \ commentParser2\ =\ re.compile(\ \textcolor{stringliteral}{r'\string^\ \(\backslash\)*'})}
\DoxyCodeLine{00023\ \ \ \ \ blankParser\ =\ re.compile(\ \textcolor{stringliteral}{r'\string^\(\backslash\)s*\$'})}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \ \ \ \ seenHeaders\ =\ set([])}
\DoxyCodeLine{00026\ \ \ \ \ rootPath\ =\ os.path.join(\ catchPath,\ \textcolor{stringliteral}{'include/'}\ )}
\DoxyCodeLine{00027\ \ \ \ \ outputPath\ =\ os.path.join(\ catchPath,\ \textcolor{stringliteral}{'single\_include/catch2/catch.hpp'}\ )}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \ \ globals\ =\ \{}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'includeImpl'}\ :\ \textcolor{keyword}{True},}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'ifdefs'}\ \ \ \ \ \ :\ \ 0,}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'implIfDefs'}\ \ :\ -\/1}
\DoxyCodeLine{00033\ \ \ \ \ \}}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordflow}{for}\ arg\ \textcolor{keywordflow}{in}\ sys.argv[1:]:}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ arg\ =\ arg.lower()}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ arg\ ==\ \textcolor{stringliteral}{"{}noimpl"{}}:}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ globals[\textcolor{stringliteral}{'includeImpl'}]\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{210-_evt-_event_listeners_8cpp_a91b9457094088a57b7ba14d485a8771e}{print}}(\ \textcolor{stringliteral}{"{}Not\ including\ impl\ code"{}}\ )}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{210-_evt-_event_listeners_8cpp_a91b9457094088a57b7ba14d485a8771e}{print}}(\ \textcolor{stringliteral}{"{}\(\backslash\)n**\ Unrecognised\ argument:\ "{}}\ +\ arg\ +\ \textcolor{stringliteral}{"{}\ **\(\backslash\)n"{}}\ )}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \ \ \ \ exit(1)}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{comment}{\#\ ensure\ that\ the\ output\ directory\ exists\ (hopefully\ no\ races)}}
\DoxyCodeLine{00046\ \ \ \ \ outDir\ =\ os.path.dirname(outputPath)}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ os.path.exists(outDir):}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ os.makedirs(outDir)}
\DoxyCodeLine{00049\ \ \ \ \ out\ =\ io.open(\ outputPath,\ \textcolor{stringliteral}{'w'},\ newline=\textcolor{stringliteral}{'\(\backslash\)n'},\ encoding=\textcolor{stringliteral}{'utf-\/8'})}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keyword}{def\ }write(\ line\ ):}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ globals[\textcolor{stringliteral}{'includeImpl'}]\ \textcolor{keywordflow}{or}\ globals[\textcolor{stringliteral}{'implIfDefs'}]\ ==\ -\/1:}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ out.write(\ line\ )}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keyword}{def\ }insertCpps():}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ dirs\ =\ [os.path.join(\ rootPath,\ s)\ \textcolor{keywordflow}{for}\ s\ \textcolor{keywordflow}{in}\ [\textcolor{stringliteral}{''},\ \textcolor{stringliteral}{'internal'},\ \textcolor{stringliteral}{'reporters'}]]}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ cppFiles\ =\ []}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ dir\ \textcolor{keywordflow}{in}\ dirs:}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ cppFiles\ +=\ glob(os.path.join(dir,\ \textcolor{stringliteral}{'*.cpp'}))}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ To\ minimize\ random\ diffs,\ sort\ the\ files\ before\ processing\ them}}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ fname\ \textcolor{keywordflow}{in}\ sorted(cppFiles):}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ dir,\ name\ =\ fname.rsplit(os.path.sep,\ 1)}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ dir\ +=\ os.path.sep}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ parseFile(dir,\ name)}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keyword}{def\ }parseFile(\ path,\ filename\ ):}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ f\ =\ io.open(\ os.path.join(path,\ filename),\ \textcolor{stringliteral}{'r'},\ encoding=\textcolor{stringliteral}{'utf-\/8'}\ )}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ blanks\ =\ 0}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ write(\ \textcolor{stringliteral}{u"{}//\ start\ \{0\}\(\backslash\)n"{}}.\mbox{\hyperlink{yubihsm-shell_8h_ae425c09a4c40409de33790765339cb97}{format}}(\ filename\ )\ )}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ line\ \textcolor{keywordflow}{in}\ f:}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{stringliteral}{'//\ \string~*\string~*\ CATCH\_CPP\_STITCH\_PLACE\ *\string~*\string~'}\ \textcolor{keywordflow}{in}\ line:}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ insertCpps()}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ ifParser.match(\ line\ ):}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ globals[\textcolor{stringliteral}{'ifdefs'}]\ +=\ 1}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ endIfParser.match(\ line\ ):}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ globals[\textcolor{stringliteral}{'ifdefs'}]\ -\/=\ 1}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ globals[\textcolor{stringliteral}{'ifdefs'}]\ ==\ globals[\textcolor{stringliteral}{'implIfDefs'}]:}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ globals[\textcolor{stringliteral}{'implIfDefs'}]\ =\ -\/1}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ m\ =\ includesParser.match(\ line\ )}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ m:}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ header\ =\ m.group(1)}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ headerPath,\ sep,\ headerFile\ =\ header.rpartition(\ \textcolor{stringliteral}{"{}/"{}}\ )}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ headerFile\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ seenHeaders:}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ headerFile\ !=\ \textcolor{stringliteral}{"{}tbc\_text\_format.h"{}}\ \textcolor{keywordflow}{and}\ headerFile\ !=\ \textcolor{stringliteral}{"{}clara.h"{}}:}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ seenHeaders.add(\ headerFile\ )}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ headerPath\ ==\ \textcolor{stringliteral}{"{}internal"{}}\ \textcolor{keywordflow}{and}\ path.endswith(\textcolor{stringliteral}{"{}internal/"{}}):}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ headerPath\ =\ \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sep\ =\ \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ os.path.exists(\ path\ +\ headerPath\ +\ sep\ +\ headerFile\ ):}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parseFile(\ path\ +\ headerPath\ +\ sep,\ headerFile\ )}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parseFile(\ rootPath\ +\ headerPath\ +\ sep,\ headerFile\ )}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ifImplParser.match(line):}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ globals[\textcolor{stringliteral}{'implIfDefs'}]\ =\ globals[\textcolor{stringliteral}{'ifdefs'}]}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keywordflow}{not}\ guardParser.match(\ line\ )\ \textcolor{keywordflow}{or}\ defineParser.match(\ line\ )\ )\ \textcolor{keywordflow}{and}\ \textcolor{keywordflow}{not}\ commentParser1.match(\ line\ )\textcolor{keywordflow}{and}\ \textcolor{keywordflow}{not}\ commentParser2.match(\ line\ ):}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ blankParser.match(\ line\ ):}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ blanks\ =\ blanks\ +\ 1}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ blanks\ =\ 0}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ blanks\ <\ 2\ \textcolor{keywordflow}{and}\ \textcolor{keywordflow}{not}\ defineParser.match(line):}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ write(\ line.rstrip()\ +\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}\ )}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ write(\ \textcolor{stringliteral}{u'//\ end\ \{\}\(\backslash\)n'}.\mbox{\hyperlink{yubihsm-shell_8h_ae425c09a4c40409de33790765339cb97}{format}}(filename)\ )}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ write(\ \textcolor{stringliteral}{u"{}/*\(\backslash\)n"{}}\ )}
\DoxyCodeLine{00108\ \ \ \ \ write(\ \textcolor{stringliteral}{u"{}\ *\ \ Catch\ v\{0\}\(\backslash\)n"{}}.\mbox{\hyperlink{yubihsm-shell_8h_ae425c09a4c40409de33790765339cb97}{format}}(\ v.getVersionString()\ )\ )}
\DoxyCodeLine{00109\ \ \ \ \ write(\ \textcolor{stringliteral}{u"{}\ *\ \ Generated:\ \{0\}\(\backslash\)n"{}}.\mbox{\hyperlink{yubihsm-shell_8h_ae425c09a4c40409de33790765339cb97}{format}}(\ datetime.datetime.now()\ )\ )}
\DoxyCodeLine{00110\ \ \ \ \ write(\ \textcolor{stringliteral}{u"{}\ *\ \ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)n"{}}\ )}
\DoxyCodeLine{00111\ \ \ \ \ write(\ \textcolor{stringliteral}{u"{}\ *\ \ This\ file\ has\ been\ merged\ from\ multiple\ headers.\ Please\ don't\ edit\ it\ directly\(\backslash\)n"{}}\ )}
\DoxyCodeLine{00112\ \ \ \ \ write(\ \textcolor{stringliteral}{u"{}\ *\ \ Copyright\ (c)\ \{\}\ Two\ Blue\ Cubes\ Ltd.\ All\ rights\ reserved.\(\backslash\)n"{}}.\mbox{\hyperlink{yubihsm-shell_8h_ae425c09a4c40409de33790765339cb97}{format}}(\ datetime.date.today().year\ )\ )}
\DoxyCodeLine{00113\ \ \ \ \ write(\ \textcolor{stringliteral}{u"{}\ *\(\backslash\)n"{}}\ )}
\DoxyCodeLine{00114\ \ \ \ \ write(\ \textcolor{stringliteral}{u"{}\ *\ \ Distributed\ under\ the\ Boost\ Software\ License,\ Version\ 1.0.\ (See\ accompanying\(\backslash\)n"{}}\ )}
\DoxyCodeLine{00115\ \ \ \ \ write(\ \textcolor{stringliteral}{u"{}\ *\ \ file\ LICENSE\_1\_0.txt\ or\ copy\ at\ http://www.boost.org/LICENSE\_1\_0.txt)\(\backslash\)n"{}}\ )}
\DoxyCodeLine{00116\ \ \ \ \ write(\ \textcolor{stringliteral}{u"{}\ */\(\backslash\)n"{}}\ )}
\DoxyCodeLine{00117\ \ \ \ \ write(\ \textcolor{stringliteral}{u"{}\#ifndef\ TWOBLUECUBES\_SINGLE\_INCLUDE\_CATCH\_HPP\_INCLUDED\(\backslash\)n"{}}\ )}
\DoxyCodeLine{00118\ \ \ \ \ write(\ \textcolor{stringliteral}{u"{}\#define\ TWOBLUECUBES\_SINGLE\_INCLUDE\_CATCH\_HPP\_INCLUDED\(\backslash\)n"{}}\ )}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \ \ parseFile(\ rootPath,\ \textcolor{stringliteral}{'catch.hpp'}\ )}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \ \ write(\ \textcolor{stringliteral}{u"{}\#endif\ //\ TWOBLUECUBES\_SINGLE\_INCLUDE\_CATCH\_HPP\_INCLUDED\(\backslash\)n\(\backslash\)n"{}}\ )}
\DoxyCodeLine{00123\ \ \ \ \ out.close()}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keywordflow}{print}\ (\textcolor{stringliteral}{"{}Generated\ single\ include\ for\ Catch\ v\{0\}\(\backslash\)n"{}}.\mbox{\hyperlink{yubihsm-shell_8h_ae425c09a4c40409de33790765339cb97}{format}}(\ v.getVersionString()\ )\ )}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacegenerate_single_header_a68b36c55964b0e4d53413e63f8597fb5_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacegenerate_single_header_a68b36c55964b0e4d53413e63f8597fb5_icgraph}
\end{center}
\end{figure}
