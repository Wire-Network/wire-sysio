\doxysection{jsoncheckertest.\+cpp}
\hypertarget{jsoncheckertest_8cpp_source}{}\label{jsoncheckertest_8cpp_source}\index{libraries/fc/include/fc/crypto/webauthn\_json/test/unittest/jsoncheckertest.cpp@{libraries/fc/include/fc/crypto/webauthn\_json/test/unittest/jsoncheckertest.cpp}}
\mbox{\hyperlink{jsoncheckertest_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00001}00001\ \textcolor{comment}{//\ Tencent\ is\ pleased\ to\ support\ the\ open\ source\ community\ by\ making\ RapidJSON\ available.}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00002}00002\ \textcolor{comment}{//\ }}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00003}00003\ \textcolor{comment}{//\ Copyright\ (C)\ 2015\ THL\ A29\ Limited,\ a\ Tencent\ company,\ and\ Milo\ Yip.\ All\ rights\ reserved.}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00004}00004\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00005}00005\ \textcolor{comment}{//\ Licensed\ under\ the\ MIT\ License\ (the\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00006}00006\ \textcolor{comment}{//\ in\ compliance\ with\ the\ License.\ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00007}00007\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00008}00008\ \textcolor{comment}{//\ http://opensource.org/licenses/MIT}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00009}00009\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00010}00010\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software\ distributed\ }}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00011}00011\ \textcolor{comment}{//\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ }}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00012}00012\ \textcolor{comment}{//\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.\ See\ the\ License\ for\ the\ }}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00013}00013\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations\ under\ the\ License.}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00015}00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{unittest_8h}{unittest.h}}"{}}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00017}00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{document_8h}{rapidjson/document.h}}"{}}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00019}00019\ \textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespacerapidjson}{rapidjson}};}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00020}00020\ }
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00021}00021\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{char}*\ ReadFile(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ filename,\ \textcolor{keywordtype}{size\_t}\&\ length)\ \{}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00022}00022\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *paths[]\ =\ \{}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00023}00023\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}jsonchecker"{}},}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00024}00024\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}bin/jsonchecker"{}},}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00025}00025\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}../bin/jsonchecker"{}},}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00026}00026\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}../../bin/jsonchecker"{}},}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00027}00027\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}../../../bin/jsonchecker"{}}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00028}00028\ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00029}00029\ \ \ \ \ \textcolor{keywordtype}{char}\ buffer[1024];}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00030}00030\ \ \ \ \ FILE\ *fp\ =\ 0;}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00031}00031\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ \textcolor{keyword}{sizeof}(paths)\ /\ \textcolor{keyword}{sizeof}(paths[0]);\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00032}00032\ \ \ \ \ \ \ \ \ sprintf(buffer,\ \textcolor{stringliteral}{"{}\%s/\%s"{}},\ paths[i],\ filename);}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00033}00033\ \ \ \ \ \ \ \ \ fp\ =\ fopen(buffer,\ \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00034}00034\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (fp)}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00035}00035\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00036}00036\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00037}00037\ }
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00038}00038\ \ \ \ \ \textcolor{keywordflow}{if}\ (!fp)}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00039}00039\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00040}00040\ }
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00041}00041\ \ \ \ \ fseek(fp,\ 0,\ SEEK\_END);}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00042}00042\ \ \ \ \ length\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(ftell(fp));}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00043}00043\ \ \ \ \ fseek(fp,\ 0,\ SEEK\_SET);}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00044}00044\ \ \ \ \ \textcolor{keywordtype}{char}*\ json\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(malloc(length\ +\ 1));}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00045}00045\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ readLength\ =\ fread(json,\ 1,\ length,\ fp);}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00046}00046\ \ \ \ \ json[readLength]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00047}00047\ \ \ \ \ fclose(fp);}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00048}00048\ \ \ \ \ \textcolor{keywordflow}{return}\ json;}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00049}00049\ \}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00050}00050\ }
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00051}\mbox{\hyperlink{struct_no_op_handler}{00051}}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_no_op_handler}{NoOpHandler}}\ \{}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00052}\mbox{\hyperlink{struct_no_op_handler_a4add8ca2d72537403f497bc3a84d42d5}{00052}}\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_no_op_handler_a4add8ca2d72537403f497bc3a84d42d5}{Null}}()\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00053}\mbox{\hyperlink{struct_no_op_handler_a563101a92a1f2a15e6a200a618adc1a6}{00053}}\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_no_op_handler_a563101a92a1f2a15e6a200a618adc1a6}{Bool}}(\textcolor{keywordtype}{bool})\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00054}\mbox{\hyperlink{struct_no_op_handler_aa1acd69bf7981367227aad2f568e2d30}{00054}}\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_no_op_handler_aa1acd69bf7981367227aad2f568e2d30}{Int}}(\textcolor{keywordtype}{int})\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00055}\mbox{\hyperlink{struct_no_op_handler_a56d69a61b750b893adefee2ea30a1264}{00055}}\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_no_op_handler_a56d69a61b750b893adefee2ea30a1264}{Uint}}(\textcolor{keywordtype}{unsigned})\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00056}\mbox{\hyperlink{struct_no_op_handler_afdcacc546b3a633a1c6330a5b57c490b}{00056}}\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_no_op_handler_afdcacc546b3a633a1c6330a5b57c490b}{Int64}}(\mbox{\hyperlink{stdint_8h_a414156feea104f8f75b4ed9e3121b2f6}{int64\_t}})\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00057}\mbox{\hyperlink{struct_no_op_handler_a9d986fde441fbb8a9660fbc1c906247e}{00057}}\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_no_op_handler_a9d986fde441fbb8a9660fbc1c906247e}{Uint64}}(\mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}})\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00058}\mbox{\hyperlink{struct_no_op_handler_a269ab4f29fb4fe3819bbfb2c58aa5ef3}{00058}}\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_no_op_handler_a269ab4f29fb4fe3819bbfb2c58aa5ef3}{Double}}(\textcolor{keywordtype}{double})\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00059}\mbox{\hyperlink{struct_no_op_handler_a1f1deddfb1e6bd378e420777d526af58}{00059}}\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_no_op_handler_a1f1deddfb1e6bd378e420777d526af58}{RawNumber}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*,\ \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}},\ \textcolor{keywordtype}{bool})\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00060}\mbox{\hyperlink{struct_no_op_handler_a1151e1ecd0a90ebe7ac3b0c9847e486b}{00060}}\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_no_op_handler_a1151e1ecd0a90ebe7ac3b0c9847e486b}{String}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*,\ \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}},\ \textcolor{keywordtype}{bool})\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00061}\mbox{\hyperlink{struct_no_op_handler_a0718496c99aa8fd8958faa6c124af286}{00061}}\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_no_op_handler_a0718496c99aa8fd8958faa6c124af286}{StartObject}}()\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00062}\mbox{\hyperlink{struct_no_op_handler_a19d6cd42eafad2146b77e0fc3418863f}{00062}}\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_no_op_handler_a19d6cd42eafad2146b77e0fc3418863f}{Key}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*,\ \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}},\ \textcolor{keywordtype}{bool})\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00063}\mbox{\hyperlink{struct_no_op_handler_a22ea74eed0dd4747dc55dff643050b13}{00063}}\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_no_op_handler_a22ea74eed0dd4747dc55dff643050b13}{EndObject}}(\mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}})\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00064}\mbox{\hyperlink{struct_no_op_handler_a13bd4b7c0e782a3598e6ffd4b9b25592}{00064}}\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_no_op_handler_a13bd4b7c0e782a3598e6ffd4b9b25592}{StartArray}}()\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00065}\mbox{\hyperlink{struct_no_op_handler_a2358a50cff4349b8035baafd7d19de92}{00065}}\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_no_op_handler_a2358a50cff4349b8035baafd7d19de92}{EndArray}}(\mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}})\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00066}00066\ \};}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00067}00067\ }
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00068}00068\ }
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00069}\mbox{\hyperlink{jsoncheckertest_8cpp_a4d38202adffe61dff1743cfce7c6da8f}{00069}}\ \mbox{\hyperlink{gtest_8h_ad8b332753515c0ab8baada563c2547eb}{TEST}}(JsonChecker,\ \mbox{\hyperlink{class_generic_reader}{Reader}})\ \{}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00070}00070\ \ \ \ \ \textcolor{keywordtype}{char}\ filename[256];}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00071}00071\ }
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00072}00072\ \ \ \ \ \textcolor{comment}{//\ jsonchecker/failXX.json}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00073}00073\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 1;\ i\ <=\ 33;\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00074}00074\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ 1)\ \textcolor{comment}{//\ fail1.json\ is\ valid\ in\ rapidjson,\ which\ has\ no\ limitation\ on\ type\ of\ root\ element\ (RFC\ 7159).}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00075}00075\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00076}00076\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ 18)\ \ \ \ \textcolor{comment}{//\ fail18.json\ is\ valid\ in\ rapidjson,\ which\ has\ no\ limitation\ on\ depth\ of\ nesting.}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00077}00077\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00078}00078\ }
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00079}00079\ \ \ \ \ \ \ \ \ sprintf(filename,\ \textcolor{stringliteral}{"{}fail\%d.json"{}},\ i);}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00080}00080\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ length;}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00081}00081\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}*\ json\ =\ ReadFile(filename,\ length);}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00082}00082\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!json)\ \{}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00083}00083\ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}jsonchecker\ file\ \%s\ not\ found"{}},\ filename);}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00084}00084\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gtest_8h_adc16b5b0a740c39084ea5c9e960e3063}{ADD\_FAILURE}}();}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00085}00085\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00086}00086\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00087}00087\ }
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00088}00088\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Test\ stack-\/based\ parsing.}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00089}00089\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_generic_document}{GenericDocument<UTF8<>}},\ \mbox{\hyperlink{class_crt_allocator}{CrtAllocator}}>\ document;\ \textcolor{comment}{//\ Use\ Crt\ allocator\ to\ check\ exception-\/safety\ (no\ memory\ leak)}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00090}00090\ \ \ \ \ \ \ \ \ document.\mbox{\hyperlink{class_generic_document_a901db1678f99a1b550003eed75bc380a}{Parse}}(json);}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00091}00091\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gtest_8h_ac33e7cdfb5d44a7a0f0ab552eb5c3c6a}{EXPECT\_TRUE}}(document.\mbox{\hyperlink{class_generic_document_a510a0588db4eb372f5d81bc3646578fb}{HasParseError}}())\ <<\ filename;}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00092}00092\ }
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00093}00093\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Test\ iterative\ parsing.}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00094}00094\ \ \ \ \ \ \ \ \ document.\mbox{\hyperlink{class_generic_document_a901db1678f99a1b550003eed75bc380a}{Parse}}<\mbox{\hyperlink{reader_8h_ab7be7dabe6ffcba60fad441505583450aadb14f5a3b6b33e28055e913a2eae5e9}{kParseIterativeFlag}}>(json);}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00095}00095\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gtest_8h_ac33e7cdfb5d44a7a0f0ab552eb5c3c6a}{EXPECT\_TRUE}}(document.\mbox{\hyperlink{class_generic_document_a510a0588db4eb372f5d81bc3646578fb}{HasParseError}}())\ <<\ filename;}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00096}00096\ }
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00097}00097\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Test\ iterative\ pull-\/parsing.}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00098}00098\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_generic_reader}{Reader}}\ reader;}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00099}00099\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_generic_string_stream}{StringStream}}\ ss(json);}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00100}00100\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_no_op_handler}{NoOpHandler}}\ h;}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00101}00101\ \ \ \ \ \ \ \ \ reader.\mbox{\hyperlink{class_generic_reader_a7de472eda2ad9de13cfd8c1de74f1754}{IterativeParseInit}}();}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00102}00102\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!reader.\mbox{\hyperlink{class_generic_reader_aa1e9e1eef614fde971550ed2f955151d}{IterativeParseComplete}}())\ \{}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00103}00103\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!reader.\mbox{\hyperlink{class_generic_reader_a257891331e0c259903e7066fb4cebf92}{IterativeParseNext}}<\mbox{\hyperlink{reader_8h_ab7be7dabe6ffcba60fad441505583450a9104b0946d648e9467cb7a967401ec80}{kParseDefaultFlags}}>(ss,\ h))}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00104}00104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00105}00105\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00106}00106\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gtest_8h_ac33e7cdfb5d44a7a0f0ab552eb5c3c6a}{EXPECT\_TRUE}}(reader.\mbox{\hyperlink{class_generic_reader_ac417441794477ea747b63adb6d3653a9}{HasParseError}}())\ <<\ filename;}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00107}00107\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00108}00108\ \ \ \ \ \ \ \ \ free(json);}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00109}00109\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00110}00110\ }
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00111}00111\ \ \ \ \ \textcolor{comment}{//\ passX.json}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00112}00112\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 1;\ i\ <=\ 3;\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00113}00113\ \ \ \ \ \ \ \ \ sprintf(filename,\ \textcolor{stringliteral}{"{}pass\%d.json"{}},\ i);}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00114}00114\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ length;}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00115}00115\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}*\ json\ =\ ReadFile(filename,\ length);}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00116}00116\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!json)\ \{}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00117}00117\ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}jsonchecker\ file\ \%s\ not\ found"{}},\ filename);}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00118}00118\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00119}00119\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00120}00120\ }
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00121}00121\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Test\ stack-\/based\ parsing.}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00122}00122\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_generic_document}{GenericDocument<UTF8<>}},\ \mbox{\hyperlink{class_crt_allocator}{CrtAllocator}}>\ document;\ \textcolor{comment}{//\ Use\ Crt\ allocator\ to\ check\ exception-\/safety\ (no\ memory\ leak)}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00123}00123\ \ \ \ \ \ \ \ \ document.\mbox{\hyperlink{class_generic_document_a901db1678f99a1b550003eed75bc380a}{Parse}}(json);}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00124}00124\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gtest_8h_aeb6c7ae89f440c90c1a1815951c836da}{EXPECT\_FALSE}}(document.\mbox{\hyperlink{class_generic_document_a510a0588db4eb372f5d81bc3646578fb}{HasParseError}}())\ <<\ filename;}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00125}00125\ }
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00126}00126\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Test\ iterative\ parsing.}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00127}00127\ \ \ \ \ \ \ \ \ document.\mbox{\hyperlink{class_generic_document_a901db1678f99a1b550003eed75bc380a}{Parse}}<\mbox{\hyperlink{reader_8h_ab7be7dabe6ffcba60fad441505583450aadb14f5a3b6b33e28055e913a2eae5e9}{kParseIterativeFlag}}>(json);}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00128}00128\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gtest_8h_aeb6c7ae89f440c90c1a1815951c836da}{EXPECT\_FALSE}}(document.\mbox{\hyperlink{class_generic_document_a510a0588db4eb372f5d81bc3646578fb}{HasParseError}}())\ <<\ filename;}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00129}00129\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00130}00130\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Test\ iterative\ pull-\/parsing.}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00131}00131\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_generic_reader}{Reader}}\ reader;}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00132}00132\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_generic_string_stream}{StringStream}}\ ss(json);}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00133}00133\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_no_op_handler}{NoOpHandler}}\ h;}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00134}00134\ \ \ \ \ \ \ \ \ reader.\mbox{\hyperlink{class_generic_reader_a7de472eda2ad9de13cfd8c1de74f1754}{IterativeParseInit}}();}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00135}00135\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!reader.\mbox{\hyperlink{class_generic_reader_aa1e9e1eef614fde971550ed2f955151d}{IterativeParseComplete}}())\ \{}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00136}00136\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!reader.\mbox{\hyperlink{class_generic_reader_a257891331e0c259903e7066fb4cebf92}{IterativeParseNext}}<\mbox{\hyperlink{reader_8h_ab7be7dabe6ffcba60fad441505583450a9104b0946d648e9467cb7a967401ec80}{kParseDefaultFlags}}>(ss,\ h))}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00137}00137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00138}00138\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00139}00139\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gtest_8h_aeb6c7ae89f440c90c1a1815951c836da}{EXPECT\_FALSE}}(reader.\mbox{\hyperlink{class_generic_reader_ac417441794477ea747b63adb6d3653a9}{HasParseError}}())\ <<\ filename;}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00140}00140\ }
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00141}00141\ \ \ \ \ \ \ \ \ free(json);}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00142}00142\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{jsoncheckertest_8cpp_source_l00143}00143\ \}}

\end{DoxyCode}
