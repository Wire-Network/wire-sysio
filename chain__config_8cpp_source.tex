\doxysection{chain\+\_\+config.\+cpp}
\hypertarget{chain__config_8cpp_source}{}\label{chain__config_8cpp_source}\index{libraries/chain/chain\_config.cpp@{libraries/chain/chain\_config.cpp}}
\mbox{\hyperlink{chain__config_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00001}00001\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{chain__config_8hpp}{sysio/chain/chain\_config.hpp}}>}}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00002}00002\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp}{sysio/chain/exceptions.hpp}}>}}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00003}00003\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{controller_8hpp}{sysio/chain/controller.hpp}}>}}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00005}00005\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacesysio}{sysio}}\ \{\ \textcolor{keyword}{namespace\ }chain\ \{}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00006}00006\ }
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00007}\mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_ae96e3222e7161e113ef4182829823595}{00007}}\ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_ae96e3222e7161e113ef4182829823595}{chain\_config\_v0::validate}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00008}00008\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_a216d150c1c6ad9ea64aaf82d86926d19}{target\_block\_net\_usage\_pct}}\ <=\ config::percent\_100,\ \mbox{\hyperlink{namespacesysio_1_1chain_a764b50974b9b72a0e233e72176913d6b}{action\_validate\_exception}},}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00009}00009\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}target\ block\ net\ usage\ percentage\ cannot\ exceed\ 100\%"{}}\ );}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00010}00010\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_a216d150c1c6ad9ea64aaf82d86926d19}{target\_block\_net\_usage\_pct}}\ >=\ config::percent\_1/10,\ \mbox{\hyperlink{namespacesysio_1_1chain_a764b50974b9b72a0e233e72176913d6b}{action\_validate\_exception}},}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00011}00011\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}target\ block\ net\ usage\ percentage\ must\ be\ at\ least\ 0.1\%"{}}\ );}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00012}00012\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_af2b14c2153bc64969ca85c8df8fbb7f9}{target\_block\_cpu\_usage\_pct}}\ <=\ config::percent\_100,\ \mbox{\hyperlink{namespacesysio_1_1chain_a764b50974b9b72a0e233e72176913d6b}{action\_validate\_exception}},}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00013}00013\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}target\ block\ cpu\ usage\ percentage\ cannot\ exceed\ 100\%"{}}\ );}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00014}00014\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_af2b14c2153bc64969ca85c8df8fbb7f9}{target\_block\_cpu\_usage\_pct}}\ >=\ config::percent\_1/10,\ \mbox{\hyperlink{namespacesysio_1_1chain_a764b50974b9b72a0e233e72176913d6b}{action\_validate\_exception}},}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00015}00015\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}target\ block\ cpu\ usage\ percentage\ must\ be\ at\ least\ 0.1\%"{}}\ );}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00017}00017\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_ab817deae6ddf13840297eae4fe6f8345}{max\_transaction\_net\_usage}}\ <\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_a796dada63527fcff40f838efc42a04ec}{max\_block\_net\_usage}},\ \mbox{\hyperlink{namespacesysio_1_1chain_a764b50974b9b72a0e233e72176913d6b}{action\_validate\_exception}},}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00018}00018\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}max\ transaction\ net\ usage\ must\ be\ less\ than\ max\ block\ net\ usage"{}}\ );}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00019}00019\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_a27ec75a65de87237c8f7ed2728db3ba5}{max\_transaction\_cpu\_usage}}\ <\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_a292759d9e893bccf78a5d22279fb5752}{max\_block\_cpu\_usage}},\ \mbox{\hyperlink{namespacesysio_1_1chain_a764b50974b9b72a0e233e72176913d6b}{action\_validate\_exception}},}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00020}00020\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}max\ transaction\ cpu\ usage\ must\ be\ less\ than\ max\ block\ cpu\ usage"{}}\ );}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00021}00021\ }
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00022}00022\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_ad96077f2371a87e736383b1ae63a2942}{base\_per\_transaction\_net\_usage}}\ <\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_ab817deae6ddf13840297eae4fe6f8345}{max\_transaction\_net\_usage}},\ \mbox{\hyperlink{namespacesysio_1_1chain_a764b50974b9b72a0e233e72176913d6b}{action\_validate\_exception}},}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00023}00023\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}base\ net\ usage\ per\ transaction\ must\ be\ less\ than\ the\ max\ transaction\ net\ usage"{}}\ );}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00024}00024\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ (\mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_ab817deae6ddf13840297eae4fe6f8345}{max\_transaction\_net\_usage}}\ -\/\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_ad96077f2371a87e736383b1ae63a2942}{base\_per\_transaction\_net\_usage}})\ >=\ config::min\_net\_usage\_delta\_between\_base\_and\_max\_for\_trx,}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00025}00025\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesysio_1_1chain_a764b50974b9b72a0e233e72176913d6b}{action\_validate\_exception}},}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00026}00026\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}max\ transaction\ net\ usage\ must\ be\ at\ least\ \$\{delta\}\ bytes\ larger\ than\ base\ net\ usage\ per\ transaction"{}},}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00027}00027\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{stringliteral}{"{}delta"{}},\ config::min\_net\_usage\_delta\_between\_base\_and\_max\_for\_trx)\ );}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00028}00028\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_ab6eca0d78bfbc7a23b250ce38a527d43}{context\_free\_discount\_net\_usage\_den}}\ >\ 0,\ \mbox{\hyperlink{namespacesysio_1_1chain_a764b50974b9b72a0e233e72176913d6b}{action\_validate\_exception}},}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00029}00029\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}net\ usage\ discount\ ratio\ for\ context\ free\ data\ cannot\ have\ a\ 0\ denominator"{}}\ );}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00030}00030\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_a216d6c8dad55925ff3eebde858a30fef}{context\_free\_discount\_net\_usage\_num}}\ <=\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_ab6eca0d78bfbc7a23b250ce38a527d43}{context\_free\_discount\_net\_usage\_den}},\ \mbox{\hyperlink{namespacesysio_1_1chain_a764b50974b9b72a0e233e72176913d6b}{action\_validate\_exception}},}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00031}00031\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}net\ usage\ discount\ ratio\ for\ context\ free\ data\ cannot\ exceed\ 1"{}}\ );}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00032}00032\ }
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00033}00033\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_a460f6b269c9da35d40b1cc5927c2205a}{min\_transaction\_cpu\_usage}}\ <=\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_a27ec75a65de87237c8f7ed2728db3ba5}{max\_transaction\_cpu\_usage}},\ \mbox{\hyperlink{namespacesysio_1_1chain_a764b50974b9b72a0e233e72176913d6b}{action\_validate\_exception}},}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00034}00034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}min\ transaction\ cpu\ usage\ cannot\ exceed\ max\ transaction\ cpu\ usage"{}}\ );}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00035}00035\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_a27ec75a65de87237c8f7ed2728db3ba5}{max\_transaction\_cpu\_usage}}\ <\ (\mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_a292759d9e893bccf78a5d22279fb5752}{max\_block\_cpu\_usage}}\ -\/\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_a460f6b269c9da35d40b1cc5927c2205a}{min\_transaction\_cpu\_usage}}),\ \mbox{\hyperlink{namespacesysio_1_1chain_a764b50974b9b72a0e233e72176913d6b}{action\_validate\_exception}},}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00036}00036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}max\ transaction\ cpu\ usage\ must\ be\ at\ less\ than\ the\ difference\ between\ the\ max\ block\ cpu\ usage\ and\ the\ min\ transaction\ cpu\ usage"{}}\ );}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00037}00037\ }
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00038}00038\ \ \ \ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ 1\ <=\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_ab919615c14dd47bfb30dea47443e8f6a}{max\_authority\_depth}},\ \mbox{\hyperlink{namespacesysio_1_1chain_a764b50974b9b72a0e233e72176913d6b}{action\_validate\_exception}},}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00039}00039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}max\ authority\ depth\ should\ be\ at\ least\ 1"{}}\ );}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00040}00040\ \}}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00041}00041\ }
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00042}\mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v1_a176ca08bbc7a48727a71e1ba7d5ea795}{00042}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v1_a176ca08bbc7a48727a71e1ba7d5ea795}{chain\_config\_v1::validate}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00043}00043\ \ \ \ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v0_ae96e3222e7161e113ef4182829823595}{chain\_config\_v0::validate}}();}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00044}00044\ \ \ \ \mbox{\hyperlink{chain_2include_2sysio_2chain_2exceptions_8hpp_a40c2826a6fba35c1ffbf912bdf559792}{SYS\_ASSERT}}(\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v1_a3c1a801259d0520ace0d51964fdfa984}{max\_action\_return\_value\_size}}\ <=\ \mbox{\hyperlink{utility_8hpp_a5e3c645782d12166c98f3654471efd61}{MAX\_SIZE\_OF\_BYTE\_ARRAYS}},\ \mbox{\hyperlink{namespacesysio_1_1chain_a764b50974b9b72a0e233e72176913d6b}{action\_validate\_exception}},}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00045}00045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}max\ action\ return\ value\ size\ should\ be\ less\ than\ MAX\_SIZE\_OF\_BYTE\_ARRAYS"{}}\ );}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00046}00046\ \}}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00048}\mbox{\hyperlink{structsysio_1_1chain_1_1config__entry__validator_a382e03f499feaf341582fbafe5a1d5f1}{00048}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structsysio_1_1chain_1_1config__entry__validator_a382e03f499feaf341582fbafe5a1d5f1}{config\_entry\_validator::operator()}}(\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ \textcolor{keywordtype}{id})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00049}00049\ \ \ \ \textcolor{keywordtype}{bool}\ allowed\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00050}00050\ \ \ \ \textcolor{keywordflow}{switch}(\textcolor{keywordtype}{id})\{}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00051}00051\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{structsysio_1_1chain_1_1chain__config__v1_a5000ca17abb32e72f6a6fe4d36bab91fade99bcd127eb42daf0316c8115e28f91}{chain\_config\_v1::max\_action\_return\_value\_size\_id}}:}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00052}00052\ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00053}00053\ \ \ \ \ \ \ \ \ \ allowed\ =\ \mbox{\hyperlink{structsysio_1_1chain_1_1config__entry__validator_ac7e69c0841af15acfa6a2c98af4e5d17}{control}}.\mbox{\hyperlink{classsysio_1_1chain_1_1controller_aa808acf858e93c567ff983ccbf8fb6d3}{is\_builtin\_activated}}(\mbox{\hyperlink{namespacesysio_1_1chain_a406d45a184cdba0af316b5bf34bf56cfa7d76bd2f931e7c1f1c2b7413c93a25b0}{builtin\_protocol\_feature\_t::action\_return\_value}});}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00054}00054\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!allowed)\{}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00055}00055\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8hpp_a1759e5c9691d8ad754bdf5eff8bb23ac}{wlog}}(\textcolor{stringliteral}{"{}action\_return\_value\ protocol\ feature\ is\ not\ active,\ max\_action\_return\_value\_size\ config\ is\ not\ allowed"{}});}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00056}00056\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00057}00057\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00058}00058\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00059}00059\ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00060}00060\ }
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00061}00061\ \ \ \ \textcolor{keywordflow}{return}\ allowed;}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00062}00062\ \}}
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00063}00063\ }
\DoxyCodeLine{\Hypertarget{chain__config_8cpp_source_l00064}00064\ \}\ \}\ \textcolor{comment}{//\ namespace\ sysio::chain}}

\end{DoxyCode}
