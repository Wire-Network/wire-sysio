<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wire Sysio: sysio::chain::eosvmoc::code_cache_sync Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Wire Sysio<span id="projectnumber">&#160;Wire Sysion 1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classsysio_1_1chain_1_1eosvmoc_1_1code__cache__sync.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__sync-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">sysio::chain::eosvmoc::code_cache_sync Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="code__cache_8hpp_source.html">code_cache.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for sysio::chain::eosvmoc::code_cache_sync:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__sync__inherit__graph.png" border="0" usemap="#asysio_1_1chain_1_1eosvmoc_1_1code__cache__sync_inherit__map" alt="Inheritance graph"/></div>
<map name="asysio_1_1chain_1_1eosvmoc_1_1code__cache__sync_inherit__map" id="asysio_1_1chain_1_1eosvmoc_1_1code__cache__sync_inherit__map">
<area shape="rect" title=" " alt="" coords="5,94,158,135"/>
<area shape="rect" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html" title=" " alt="" coords="5,5,158,46"/>
<area shape="poly" title=" " alt="" coords="84,62,84,94,79,94,79,62"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for sysio::chain::eosvmoc::code_cache_sync:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__sync__coll__graph.png" border="0" usemap="#asysio_1_1chain_1_1eosvmoc_1_1code__cache__sync_coll__map" alt="Collaboration graph"/></div>
<map name="asysio_1_1chain_1_1eosvmoc_1_1code__cache__sync_coll__map" id="asysio_1_1chain_1_1eosvmoc_1_1code__cache__sync_coll__map">
<area shape="rect" title=" " alt="" coords="61,199,214,240"/>
<area shape="rect" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html" title=" " alt="" coords="61,109,214,150"/>
<area shape="poly" title=" " alt="" coords="140,165,140,199,135,199,135,165"/>
<area shape="rect" href="classchainbase_1_1database.html" title=" " alt="" coords="5,5,147,31"/>
<area shape="poly" title=" " alt="" coords="93,43,129,107,124,110,88,46"/>
<area shape="rect" title=" " alt="" coords="170,5,227,31"/>
<area shape="poly" title=" " alt="" coords="187,46,151,110,146,107,182,43"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad8925611879b3ff1c1975952543d17d3" id="r_ad8925611879b3ff1c1975952543d17d3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad8925611879b3ff1c1975952543d17d3">~code_cache_sync</a> ()</td></tr>
<tr class="separator:ad8925611879b3ff1c1975952543d17d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6cb5ce5742de26979b108d2e5d908db" id="r_ab6cb5ce5742de26979b108d2e5d908db"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html">code_descriptor</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab6cb5ce5742de26979b108d2e5d908db">get_descriptor_for_code_sync</a> (const <a class="el" href="namespacesysio_1_1chain.html#a357fd9478475457e5bb386a3143079b6">digest_type</a> &amp;code_id, const <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> &amp;vm_version)</td></tr>
<tr class="separator:ab6cb5ce5742de26979b108d2e5d908db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab31065b1fab5b6d5910d1cae71bb15cf" id="r_ab31065b1fab5b6d5910d1cae71bb15cf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab31065b1fab5b6d5910d1cae71bb15cf">code_cache_base</a> (const bfs::path data_dir, const <a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1config.html">eosvmoc::config</a> &amp;eosvmoc_config, const <a class="el" href="classchainbase_1_1database.html">chainbase::database</a> &amp;db)</td></tr>
<tr class="separator:ab31065b1fab5b6d5910d1cae71bb15cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_methods_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html">sysio::chain::eosvmoc::code_cache_base</a></td></tr>
<tr class="memitem:ab31065b1fab5b6d5910d1cae71bb15cf inherit pub_methods_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base" id="r_ab31065b1fab5b6d5910d1cae71bb15cf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#ab31065b1fab5b6d5910d1cae71bb15cf">code_cache_base</a> (const bfs::path data_dir, const <a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1config.html">eosvmoc::config</a> &amp;eosvmoc_config, const <a class="el" href="classchainbase_1_1database.html">chainbase::database</a> &amp;db)</td></tr>
<tr class="separator:ab31065b1fab5b6d5910d1cae71bb15cf inherit pub_methods_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac04c389f3eef6d9860d507ce690a4781 inherit pub_methods_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base" id="r_ac04c389f3eef6d9860d507ce690a4781"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#ac04c389f3eef6d9860d507ce690a4781">~code_cache_base</a> ()</td></tr>
<tr class="separator:ac04c389f3eef6d9860d507ce690a4781 inherit pub_methods_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad77b7e524be52fdfab8d5faef376b4db inherit pub_methods_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base" id="r_ad77b7e524be52fdfab8d5faef376b4db"><td class="memItemLeft" align="right" valign="top">const int &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#ad77b7e524be52fdfab8d5faef376b4db">fd</a> () const</td></tr>
<tr class="separator:ad77b7e524be52fdfab8d5faef376b4db inherit pub_methods_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a898c78da95cb62a1fc2fbdb197f2836d inherit pub_methods_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base" id="r_a898c78da95cb62a1fc2fbdb197f2836d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a898c78da95cb62a1fc2fbdb197f2836d">free_code</a> (const <a class="el" href="namespacesysio_1_1chain.html#a357fd9478475457e5bb386a3143079b6">digest_type</a> &amp;code_id, const <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> &amp;vm_version)</td></tr>
<tr class="separator:a898c78da95cb62a1fc2fbdb197f2836d inherit pub_methods_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_types_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pro_types_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base')"><img src="closed.png" alt="-"/>&#160;Protected Types inherited from <a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html">sysio::chain::eosvmoc::code_cache_base</a></td></tr>
<tr class="memitem:a30f70ce315e8da4166face9c8b4ea5e5 inherit pro_types_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base" id="r_a30f70ce315e8da4166face9c8b4ea5e5"><td class="memItemLeft" align="right" valign="top">typedef boost::multi_index_container&lt; <a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html">code_descriptor</a>, indexed_by&lt; sequenced&lt;&gt;, hashed_unique&lt; tag&lt; by_hash &gt;, composite_key&lt; <a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html">code_descriptor</a>, member&lt; <a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html">code_descriptor</a>, <a class="el" href="namespacesysio_1_1chain.html#a357fd9478475457e5bb386a3143079b6">digest_type</a>, &amp;<a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html#ada2be2602cbf3bad4ae32cfed797abde">code_descriptor::code_hash</a> &gt;, member&lt; <a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html">code_descriptor</a>, <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, &amp;<a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html#aea83d482172d4dedadbc9dd54e9a5a29">code_descriptor::vm_version</a> &gt; &gt; &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a30f70ce315e8da4166face9c8b4ea5e5">code_cache_index</a></td></tr>
<tr class="separator:a30f70ce315e8da4166face9c8b4ea5e5 inherit pro_types_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pro_methods_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html">sysio::chain::eosvmoc::code_cache_base</a></td></tr>
<tr class="memitem:a249bdb27d2796f53a728b85a2889db44 inherit pro_methods_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base" id="r_a249bdb27d2796f53a728b85a2889db44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a249bdb27d2796f53a728b85a2889db44">check_eviction_threshold</a> (size_t free_bytes)</td></tr>
<tr class="separator:a249bdb27d2796f53a728b85a2889db44 inherit pro_methods_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a543e8301b86cc0682a715686279dc1c3 inherit pro_methods_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base" id="r_a543e8301b86cc0682a715686279dc1c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a543e8301b86cc0682a715686279dc1c3">run_eviction_round</a> ()</td></tr>
<tr class="separator:a543e8301b86cc0682a715686279dc1c3 inherit pro_methods_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9933307339971ede770f460277491587 inherit pro_methods_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base" id="r_a9933307339971ede770f460277491587"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a9933307339971ede770f460277491587">set_on_disk_region_dirty</a> (bool)</td></tr>
<tr class="separator:a9933307339971ede770f460277491587 inherit pro_methods_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06095b550460307a8e11b2b8a1083230 inherit pro_methods_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base" id="r_a06095b550460307a8e11b2b8a1083230"><td class="memTemplParams" colspan="2">template&lt;typename <a class="el" href="prettywritertest_8cpp.html#a6283df8c4e365cc8a01727e2d7ad44bf">T</a> &gt; </td></tr>
<tr class="memitem:a06095b550460307a8e11b2b8a1083230 inherit pro_methods_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a06095b550460307a8e11b2b8a1083230">serialize_cache_index</a> (<a class="el" href="classfc_1_1datastream.html">fc::datastream</a>&lt; <a class="el" href="prettywritertest_8cpp.html#a6283df8c4e365cc8a01727e2d7ad44bf">T</a> &gt; &amp;ds)</td></tr>
<tr class="separator:a06095b550460307a8e11b2b8a1083230 inherit pro_methods_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pro_attribs_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html">sysio::chain::eosvmoc::code_cache_base</a></td></tr>
<tr class="memitem:adb969be895a25820aa4e599304dfa252 inherit pro_attribs_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base" id="r_adb969be895a25820aa4e599304dfa252"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a30f70ce315e8da4166face9c8b4ea5e5">code_cache_index</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a></td></tr>
<tr class="separator:adb969be895a25820aa4e599304dfa252 inherit pro_attribs_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7e0e5b63b94e48e35baacc15644b0b7 inherit pro_attribs_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base" id="r_ad7e0e5b63b94e48e35baacc15644b0b7"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classchainbase_1_1database.html">chainbase::database</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#ad7e0e5b63b94e48e35baacc15644b0b7">_db</a></td></tr>
<tr class="separator:ad7e0e5b63b94e48e35baacc15644b0b7 inherit pro_attribs_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbf29e52e658f8089958c93ae87402ac inherit pro_attribs_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base" id="r_abbf29e52e658f8089958c93ae87402ac"><td class="memItemLeft" align="right" valign="top">bfs::path&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a></td></tr>
<tr class="separator:abbf29e52e658f8089958c93ae87402ac inherit pro_attribs_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaee1ae29b4dc9f8f3cb0b86f32998dc4 inherit pro_attribs_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base" id="r_aaee1ae29b4dc9f8f3cb0b86f32998dc4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#aaee1ae29b4dc9f8f3cb0b86f32998dc4">_cache_fd</a></td></tr>
<tr class="separator:aaee1ae29b4dc9f8f3cb0b86f32998dc4 inherit pro_attribs_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acccb3fc4fe49eb154ea915ee8b350f70 inherit pro_attribs_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base" id="r_acccb3fc4fe49eb154ea915ee8b350f70"><td class="memItemLeft" align="right" valign="top">io_context&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#acccb3fc4fe49eb154ea915ee8b350f70">_ctx</a></td></tr>
<tr class="separator:acccb3fc4fe49eb154ea915ee8b350f70 inherit pro_attribs_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ea07bb510f7b82ecfb324bca6225728 inherit pro_attribs_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base" id="r_a1ea07bb510f7b82ecfb324bca6225728"><td class="memItemLeft" align="right" valign="top">local::datagram_protocol::socket&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a1ea07bb510f7b82ecfb324bca6225728">_compile_monitor_write_socket</a> {<a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#acccb3fc4fe49eb154ea915ee8b350f70">_ctx</a>}</td></tr>
<tr class="separator:a1ea07bb510f7b82ecfb324bca6225728 inherit pro_attribs_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3422663ea869e784bf6b6e72cb43f96b inherit pro_attribs_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base" id="r_a3422663ea869e784bf6b6e72cb43f96b"><td class="memItemLeft" align="right" valign="top">local::datagram_protocol::socket&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a3422663ea869e784bf6b6e72cb43f96b">_compile_monitor_read_socket</a> {<a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#acccb3fc4fe49eb154ea915ee8b350f70">_ctx</a>}</td></tr>
<tr class="separator:a3422663ea869e784bf6b6e72cb43f96b inherit pro_attribs_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44c50f4deb837180fa47026465c55d8a inherit pro_attribs_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base" id="r_a44c50f4deb837180fa47026465c55d8a"><td class="memItemLeft" align="right" valign="top">std::unordered_set&lt; <a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__tuple.html">code_tuple</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a44c50f4deb837180fa47026465c55d8a">_queued_compiles</a></td></tr>
<tr class="separator:a44c50f4deb837180fa47026465c55d8a inherit pro_attribs_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f9d3065fa9328cb776d6c68b0c9ef1f inherit pro_attribs_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base" id="r_a6f9d3065fa9328cb776d6c68b0c9ef1f"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__tuple.html">code_tuple</a>, bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a6f9d3065fa9328cb776d6c68b0c9ef1f">_outstanding_compiles_and_poison</a></td></tr>
<tr class="separator:a6f9d3065fa9328cb776d6c68b0c9ef1f inherit pro_attribs_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4b8115d88fae51bcaf70a15bd3db3bc inherit pro_attribs_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base" id="r_aa4b8115d88fae51bcaf70a15bd3db3bc"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#aa4b8115d88fae51bcaf70a15bd3db3bc">_free_bytes_eviction_threshold</a></td></tr>
<tr class="separator:aa4b8115d88fae51bcaf70a15bd3db3bc inherit pro_attribs_classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="code__cache_8hpp_source.html#l00108">108</a> of file <a class="el" href="code__cache_8hpp_source.html">code_cache.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad8925611879b3ff1c1975952543d17d3" name="ad8925611879b3ff1c1975952543d17d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8925611879b3ff1c1975952543d17d3">&#9670;&#160;</a></span>~code_cache_sync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sysio::chain::eosvmoc::code_cache_sync::~code_cache_sync </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="code__cache_8cpp_source.html#l00168">168</a> of file <a class="el" href="code__cache_8cpp_source.html">code_cache.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  168</span>                                  {</div>
<div class="line"><span class="lineno">  169</span>   <span class="comment">//it&#39;s exceedingly critical that we wait for the compile monitor to be done with all its work</span></div>
<div class="line"><span class="lineno">  170</span>   <span class="comment">//This is easy in the sync case</span></div>
<div class="line"><span class="lineno">  171</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a1ea07bb510f7b82ecfb324bca6225728">_compile_monitor_write_socket</a>.shutdown(local::datagram_protocol::socket::shutdown_send);</div>
<div class="line"><span class="lineno">  172</span>   <span class="keyword">auto</span> [<a class="code hl_enumvalue" href="namespacesysio_1_1chain_1_1webassembly.html#a72ffd6653260a2dedcc4b55e39e10973a4e09c20e9a85794807a130e8283e8769">success</a>, message, fds] = <a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc.html#aa65c4d6c02a0823262c6627a86cc74bc">read_message_with_fds</a>(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a3422663ea869e784bf6b6e72cb43f96b">_compile_monitor_read_socket</a>);</div>
<div class="line"><span class="lineno">  173</span>   <span class="keywordflow">if</span>(success)</div>
<div class="line"><span class="lineno">  174</span>      <a class="code hl_define" href="logger_8hpp.html#a9e3cdbaecd5a34b42956e888f7326fad">elog</a>(<span class="stringliteral">&quot;unexpected response from SYS VM OC compile monitor during shutdown&quot;</span>);</div>
<div class="line"><span class="lineno">  175</span>}</div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_a1ea07bb510f7b82ecfb324bca6225728"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a1ea07bb510f7b82ecfb324bca6225728">sysio::chain::eosvmoc::code_cache_base::_compile_monitor_write_socket</a></div><div class="ttdeci">local::datagram_protocol::socket _compile_monitor_write_socket</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00071">code_cache.hpp:71</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_a3422663ea869e784bf6b6e72cb43f96b"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a3422663ea869e784bf6b6e72cb43f96b">sysio::chain::eosvmoc::code_cache_base::_compile_monitor_read_socket</a></div><div class="ttdeci">local::datagram_protocol::socket _compile_monitor_read_socket</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00072">code_cache.hpp:72</a></div></div>
<div class="ttc" id="alogger_8hpp_html_a9e3cdbaecd5a34b42956e888f7326fad"><div class="ttname"><a href="logger_8hpp.html#a9e3cdbaecd5a34b42956e888f7326fad">elog</a></div><div class="ttdeci">#define elog(FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="logger_8hpp_source.html#l00130">logger.hpp:130</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1eosvmoc_html_aa65c4d6c02a0823262c6627a86cc74bc"><div class="ttname"><a href="namespacesysio_1_1chain_1_1eosvmoc.html#aa65c4d6c02a0823262c6627a86cc74bc">sysio::chain::eosvmoc::read_message_with_fds</a></div><div class="ttdeci">std::tuple&lt; bool, eosvmoc_message, std::vector&lt; wrapped_fd &gt; &gt; read_message_with_fds(boost::asio::local::datagram_protocol::socket &amp;s)</div><div class="ttdef"><b>Definition</b> <a href="ipc__helpers_8cpp_source.html#l00009">ipc_helpers.cpp:9</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1webassembly_html_a72ffd6653260a2dedcc4b55e39e10973a4e09c20e9a85794807a130e8283e8769"><div class="ttname"><a href="namespacesysio_1_1chain_1_1webassembly.html#a72ffd6653260a2dedcc4b55e39e10973a4e09c20e9a85794807a130e8283e8769">sysio::chain::webassembly::success</a></div><div class="ttdeci">@ success</div><div class="ttdef"><b>Definition</b> <a href="return__codes_8hpp_source.html#l00008">return_codes.hpp:8</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__sync_ad8925611879b3ff1c1975952543d17d3_cgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__sync_ad8925611879b3ff1c1975952543d17d3_cgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__sync_ad8925611879b3ff1c1975952543d17d3_cgraph" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__sync_ad8925611879b3ff1c1975952543d17d3_cgraph">
<area shape="rect" title=" " alt="" coords="5,22,184,78"/>
<area shape="rect" href="namespacesysio_1_1chain_1_1eosvmoc.html#aa65c4d6c02a0823262c6627a86cc74bc" title=" " alt="" coords="232,29,402,70"/>
<area shape="poly" title=" " alt="" coords="184,47,216,47,216,52,184,52"/>
<area shape="poly" title=" " alt="" coords="275,29,273,19,280,10,294,5,317,3,341,5,355,11,353,16,340,10,317,8,296,10,283,15,278,21,280,28"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab31065b1fab5b6d5910d1cae71bb15cf" name="ab31065b1fab5b6d5910d1cae71bb15cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab31065b1fab5b6d5910d1cae71bb15cf">&#9670;&#160;</a></span>code_cache_base()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sysio::chain::eosvmoc::code_cache_base::code_cache_base </td>
          <td>(</td>
          <td class="paramtype">const bfs::path</td>          <td class="paramname"><span class="paramname"><em>data_dir</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1config.html">eosvmoc::config</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>eosvmoc_config</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classchainbase_1_1database.html">chainbase::database</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>db</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="code__cache_8cpp_source.html#l00041">41</a> of file <a class="el" href="code__cache_8cpp_source.html">code_cache.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  205</span>                                                                                                                                     :</div>
<div class="line"><span class="lineno">  206</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#ad7e0e5b63b94e48e35baacc15644b0b7">_db</a>(db),</div>
<div class="line"><span class="lineno">  207</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>(data_dir/<span class="stringliteral">&quot;code_cache.bin&quot;</span>)</div>
<div class="line"><span class="lineno">  208</span>{</div>
<div class="line"><span class="lineno">  209</span>   <span class="keyword">static_assert</span>(<span class="keyword">sizeof</span>(<a class="code hl_typedef" href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">allocator_t</a>) &lt;= header_offset, <span class="stringliteral">&quot;header offset intersects with allocator&quot;</span>);</div>
<div class="line"><span class="lineno">  210</span> </div>
<div class="line"><span class="lineno">  211</span>   bfs::create_directories(data_dir);</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>   <span class="keywordflow">if</span>(!bfs::exists(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>)) {</div>
<div class="line"><span class="lineno">  214</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(eosvmoc_config.cache_size &gt;= allocator_t::get_min_size(total_header_size), <a class="code hl_variable" href="namespacesysio_1_1chain.html#a6b9cb254135911c4a6d577a9ab7fdd4e">database_exception</a>, <span class="stringliteral">&quot;configured code cache size is too small&quot;</span>);</div>
<div class="line"><span class="lineno">  215</span>      std::ofstream ofs(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>.generic_string(), std::ofstream::trunc);</div>
<div class="line"><span class="lineno">  216</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(ofs.good(), <a class="code hl_variable" href="namespacesysio_1_1chain.html#a6b9cb254135911c4a6d577a9ab7fdd4e">database_exception</a>, <span class="stringliteral">&quot;unable to create SYS VM Optimized Compiler code cache&quot;</span>);</div>
<div class="line"><span class="lineno">  217</span>      bfs::resize_file(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>, eosvmoc_config.cache_size);</div>
<div class="line"><span class="lineno">  218</span>      bip::file_mapping creation_mapping(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>.generic_string().c_str(), bip::read_write);</div>
<div class="line"><span class="lineno">  219</span>      bip::mapped_region creation_region(creation_mapping, bip::read_write);</div>
<div class="line"><span class="lineno">  220</span>      <span class="keyword">new</span> (creation_region.get_address()) <a class="code hl_typedef" href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">allocator_t</a>(eosvmoc_config.cache_size, total_header_size);</div>
<div class="line"><span class="lineno">  221</span>      <span class="keyword">new</span> ((<span class="keywordtype">char</span>*)creation_region.get_address() + header_offset) code_cache_header;</div>
<div class="line"><span class="lineno">  222</span>   }</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>   code_cache_header cache_header;</div>
<div class="line"><span class="lineno">  225</span>   {</div>
<div class="line"><span class="lineno">  226</span>      <span class="keywordtype">char</span> header_buff[total_header_size];</div>
<div class="line"><span class="lineno">  227</span>      std::ifstream hs(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>.generic_string(), std::ifstream::binary);</div>
<div class="line"><span class="lineno">  228</span>      hs.read(header_buff, <span class="keyword">sizeof</span>(header_buff));</div>
<div class="line"><span class="lineno">  229</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(!hs.fail(), bad_database_version_exception, <span class="stringliteral">&quot;failed to read code cache header&quot;</span>);</div>
<div class="line"><span class="lineno">  230</span>      <a class="code hl_function" href="yubihsm__pkcs11_8c.html#ae785d5badbf1f08b491af31f32a135a1">memcpy</a>((<span class="keywordtype">char</span>*)&amp;cache_header, header_buff + header_offset, <span class="keyword">sizeof</span>(cache_header));</div>
<div class="line"><span class="lineno">  231</span>   }</div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(cache_header.id == header_id, bad_database_version_exception, <span class="stringliteral">&quot;existing SYS VM OC code cache not compatible with this version&quot;</span>);</div>
<div class="line"><span class="lineno">  234</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(!cache_header.dirty, <a class="code hl_variable" href="namespacesysio_1_1chain.html#a6b9cb254135911c4a6d577a9ab7fdd4e">database_exception</a>, <span class="stringliteral">&quot;code cache is dirty&quot;</span>);</div>
<div class="line"><span class="lineno">  235</span> </div>
<div class="line"><span class="lineno">  236</span>   <a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a9933307339971ede770f460277491587">set_on_disk_region_dirty</a>(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>   <span class="keyword">auto</span> existing_file_size = bfs::file_size(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>);</div>
<div class="line"><span class="lineno">  239</span>   <span class="keywordflow">if</span>(eosvmoc_config.cache_size &gt; existing_file_size) {</div>
<div class="line"><span class="lineno">  240</span>      bfs::resize_file(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>, eosvmoc_config.cache_size);</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span>      bip::file_mapping resize_mapping(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>.generic_string().c_str(), bip::read_write);</div>
<div class="line"><span class="lineno">  243</span>      bip::mapped_region resize_region(resize_mapping, bip::read_write);</div>
<div class="line"><span class="lineno">  244</span> </div>
<div class="line"><span class="lineno">  245</span>      <a class="code hl_typedef" href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">allocator_t</a>* resize_allocator = <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_typedef" href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">allocator_t</a>*<span class="keyword">&gt;</span>(resize_region.get_address());</div>
<div class="line"><span class="lineno">  246</span>      resize_allocator-&gt;grow(eosvmoc_config.cache_size - existing_file_size);</div>
<div class="line"><span class="lineno">  247</span>   }</div>
<div class="line"><span class="lineno">  248</span> </div>
<div class="line"><span class="lineno">  249</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#aaee1ae29b4dc9f8f3cb0b86f32998dc4">_cache_fd</a> = ::open(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">_cache_file_path</a>.generic_string().c_str(), O_RDWR | O_CLOEXEC);</div>
<div class="line"><span class="lineno">  250</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#aaee1ae29b4dc9f8f3cb0b86f32998dc4">_cache_fd</a> &gt;= 0, <a class="code hl_variable" href="namespacesysio_1_1chain.html#a6b9cb254135911c4a6d577a9ab7fdd4e">database_exception</a>, <span class="stringliteral">&quot;failure to open code cache&quot;</span>);</div>
<div class="line"><span class="lineno">  251</span> </div>
<div class="line"><span class="lineno">  252</span>   <span class="comment">//load up the previous cache index</span></div>
<div class="line"><span class="lineno">  253</span>   <span class="keywordtype">char</span>* code_mapping = (<span class="keywordtype">char</span>*)mmap(<span class="keyword">nullptr</span>, eosvmoc_config.cache_size, PROT_READ|PROT_WRITE, MAP_SHARED, <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#aaee1ae29b4dc9f8f3cb0b86f32998dc4">_cache_fd</a>, 0);</div>
<div class="line"><span class="lineno">  254</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(code_mapping != MAP_FAILED, <a class="code hl_variable" href="namespacesysio_1_1chain.html#a6b9cb254135911c4a6d577a9ab7fdd4e">database_exception</a>, <span class="stringliteral">&quot;failure to mmap code cache&quot;</span>);</div>
<div class="line"><span class="lineno">  255</span> </div>
<div class="line"><span class="lineno">  256</span>   <a class="code hl_typedef" href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">allocator_t</a>* <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a> = <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_typedef" href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">allocator_t</a>*<span class="keyword">&gt;</span>(code_mapping);</div>
<div class="line"><span class="lineno">  257</span> </div>
<div class="line"><span class="lineno">  258</span>   <span class="keywordflow">if</span>(cache_header.serialized_descriptor_index) {</div>
<div class="line"><span class="lineno">  259</span>      <a class="code hl_class" href="classfc_1_1datastream.html">fc::datastream&lt;const char*&gt;</a> <a class="code hl_function" href="namespace_xbyak_1_1util.html#a4b2aef26182d21706896022467868f7c">ds</a>(code_mapping + cache_header.serialized_descriptor_index, eosvmoc_config.cache_size - cache_header.serialized_descriptor_index);</div>
<div class="line"><span class="lineno">  260</span>      <span class="keywordtype">unsigned</span> number_entries;</div>
<div class="line"><span class="lineno">  261</span>      <a class="code hl_function" href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab">fc::raw::unpack</a>(ds, number_entries);</div>
<div class="line"><span class="lineno">  262</span>      <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> i = 0; i &lt; number_entries; ++i) {</div>
<div class="line"><span class="lineno">  263</span>         code_descriptor cd;</div>
<div class="line"><span class="lineno">  264</span>         <a class="code hl_function" href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab">fc::raw::unpack</a>(ds, cd);</div>
<div class="line"><span class="lineno">  265</span>         <span class="keywordflow">if</span>(cd.codegen_version != current_codegen_version) {</div>
<div class="line"><span class="lineno">  266</span>            <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;deallocate(code_mapping + cd.code_begin);</div>
<div class="line"><span class="lineno">  267</span>            <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;deallocate(code_mapping + cd.initdata_begin);</div>
<div class="line"><span class="lineno">  268</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  269</span>         }</div>
<div class="line"><span class="lineno">  270</span>         <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.push_back(std::move(cd));</div>
<div class="line"><span class="lineno">  271</span>      }</div>
<div class="line"><span class="lineno">  272</span>      <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;deallocate(code_mapping + cache_header.serialized_descriptor_index);</div>
<div class="line"><span class="lineno">  273</span> </div>
<div class="line"><span class="lineno">  274</span>      <a class="code hl_define" href="logger_8hpp.html#a831cf08dc63704c11fd154132c6e8bdb">ilog</a>(<span class="stringliteral">&quot;SYS VM Optimized Compiler code cache loaded with ${c} entries; ${f} of ${t} bytes free&quot;</span>, (<span class="stringliteral">&quot;c&quot;</span>, number_entries)(<span class="stringliteral">&quot;f&quot;</span>, <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;get_free_memory())(<span class="stringliteral">&quot;t&quot;</span>, <a class="code hl_typedef" href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">allocator</a>-&gt;get_size()));</div>
<div class="line"><span class="lineno">  275</span>   }</div>
<div class="line"><span class="lineno">  276</span>   munmap(code_mapping, eosvmoc_config.cache_size);</div>
<div class="line"><span class="lineno">  277</span> </div>
<div class="line"><span class="lineno">  278</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#aa4b8115d88fae51bcaf70a15bd3db3bc">_free_bytes_eviction_threshold</a> = eosvmoc_config.cache_size * .1;</div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>   wrapped_fd compile_monitor_conn = <a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc.html#af77847bae59b1a2878f14d00e46d6bab">get_connection_to_compile_monitor</a>(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#aaee1ae29b4dc9f8f3cb0b86f32998dc4">_cache_fd</a>);</div>
<div class="line"><span class="lineno">  281</span> </div>
<div class="line"><span class="lineno">  282</span>   <span class="comment">//okay, let&#39;s do this by the book: we&#39;re not allowed to write &amp; read on different threads to the same asio socket. So create two fds</span></div>
<div class="line"><span class="lineno">  283</span>   <span class="comment">//representing the same unix socket. we&#39;ll read on one and write on the other</span></div>
<div class="line"><span class="lineno">  284</span>   <span class="keywordtype">int</span> duped = dup(compile_monitor_conn);</div>
<div class="line"><span class="lineno">  285</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a1ea07bb510f7b82ecfb324bca6225728">_compile_monitor_write_socket</a>.assign(local::datagram_protocol(), duped);</div>
<div class="line"><span class="lineno">  286</span>   <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a3422663ea869e784bf6b6e72cb43f96b">_compile_monitor_read_socket</a>.assign(local::datagram_protocol(), compile_monitor_conn.release());</div>
<div class="line"><span class="lineno">  287</span>}</div>
<div class="ttc" id="achain_2include_2sysio_2chain_2exceptions_8hpp_html_a40c2826a6fba35c1ffbf912bdf559792"><div class="ttname"><a href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a></div><div class="ttdeci">#define SYS_ASSERT(expr, exc_type, FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2exceptions_8hpp_source.html#l00007">exceptions.hpp:7</a></div></div>
<div class="ttc" id="aclassfc_1_1datastream_html"><div class="ttname"><a href="classfc_1_1datastream.html">fc::datastream</a></div><div class="ttdef"><b>Definition</b> <a href="datastream_8hpp_source.html#l00018">datastream.hpp:18</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_a9933307339971ede770f460277491587"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a9933307339971ede770f460277491587">sysio::chain::eosvmoc::code_cache_base::set_on_disk_region_dirty</a></div><div class="ttdeci">void set_on_disk_region_dirty(bool)</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8cpp_source.html#l00289">code_cache.cpp:289</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_aa4b8115d88fae51bcaf70a15bd3db3bc"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#aa4b8115d88fae51bcaf70a15bd3db3bc">sysio::chain::eosvmoc::code_cache_base::_free_bytes_eviction_threshold</a></div><div class="ttdeci">size_t _free_bytes_eviction_threshold</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00079">code_cache.hpp:79</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_aaee1ae29b4dc9f8f3cb0b86f32998dc4"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#aaee1ae29b4dc9f8f3cb0b86f32998dc4">sysio::chain::eosvmoc::code_cache_base::_cache_fd</a></div><div class="ttdeci">int _cache_fd</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00068">code_cache.hpp:68</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_abbf29e52e658f8089958c93ae87402ac"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#abbf29e52e658f8089958c93ae87402ac">sysio::chain::eosvmoc::code_cache_base::_cache_file_path</a></div><div class="ttdeci">bfs::path _cache_file_path</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00067">code_cache.hpp:67</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_ad7e0e5b63b94e48e35baacc15644b0b7"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#ad7e0e5b63b94e48e35baacc15644b0b7">sysio::chain::eosvmoc::code_cache_base::_db</a></div><div class="ttdeci">const chainbase::database &amp; _db</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00065">code_cache.hpp:65</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_adb969be895a25820aa4e599304dfa252"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">sysio::chain::eosvmoc::code_cache_base::_cache_index</a></div><div class="ttdeci">code_cache_index _cache_index</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00063">code_cache.hpp:63</a></div></div>
<div class="ttc" id="alogger_8hpp_html_a831cf08dc63704c11fd154132c6e8bdb"><div class="ttname"><a href="logger_8hpp.html#a831cf08dc63704c11fd154132c6e8bdb">ilog</a></div><div class="ttdeci">#define ilog(FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="logger_8hpp_source.html#l00118">logger.hpp:118</a></div></div>
<div class="ttc" id="anamespace_xbyak_1_1util_html_a4b2aef26182d21706896022467868f7c"><div class="ttname"><a href="namespace_xbyak_1_1util.html#a4b2aef26182d21706896022467868f7c">Xbyak::util::ds</a></div><div class="ttdeci">static const Segment ds(Segment::ds)</div></div>
<div class="ttc" id="anamespacechainbase_html_add7d4cf66ab3f2808fe613e6b0343b89"><div class="ttname"><a href="namespacechainbase.html#add7d4cf66ab3f2808fe613e6b0343b89">chainbase::allocator</a></div><div class="ttdeci">bip::allocator&lt; T, pinnable_mapped_file::segment_manager &gt; allocator</div><div class="ttdef"><b>Definition</b> <a href="chainbase_8hpp_source.html#l00056">chainbase.hpp:56</a></div></div>
<div class="ttc" id="anamespacefc_1_1raw_html_a0b442d98ceb22dd5a6ae84745e43ffab"><div class="ttname"><a href="namespacefc_1_1raw.html#a0b442d98ceb22dd5a6ae84745e43ffab">fc::raw::unpack</a></div><div class="ttdeci">void unpack(Stream &amp;s, std::deque&lt; T &gt; &amp;value)</div><div class="ttdef"><b>Definition</b> <a href="raw_8hpp_source.html#l00540">raw.hpp:540</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1eosvmoc_html_a113f05ff7d17d44ce4cee37bcb2caad7"><div class="ttname"><a href="namespacesysio_1_1chain_1_1eosvmoc.html#a113f05ff7d17d44ce4cee37bcb2caad7">sysio::chain::eosvmoc::allocator_t</a></div><div class="ttdeci">bip::rbtree_best_fit&lt; bip::null_mutex_family, bip::offset_ptr&lt; void &gt;, alignof(std::max_align_t)&gt; allocator_t</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8hpp_source.html#l00035">code_cache.hpp:35</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1eosvmoc_html_af77847bae59b1a2878f14d00e46d6bab"><div class="ttname"><a href="namespacesysio_1_1chain_1_1eosvmoc.html#af77847bae59b1a2878f14d00e46d6bab">sysio::chain::eosvmoc::get_connection_to_compile_monitor</a></div><div class="ttdeci">wrapped_fd get_connection_to_compile_monitor(int cache_fd)</div><div class="ttdef"><b>Definition</b> <a href="compile__monitor_8cpp_source.html#l00306">compile_monitor.cpp:306</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_html_a6b9cb254135911c4a6d577a9ab7fdd4e"><div class="ttname"><a href="namespacesysio_1_1chain.html#a6b9cb254135911c4a6d577a9ab7fdd4e">sysio::chain::database_exception</a></div><div class="ttdeci">key Invalid authority Invalid transaction Invalid block ID Invalid packed transaction Invalid chain ID Invalid symbol Signature type is not a currently activated type Block can not be found Unlinkable block Block does not guarantee concurrent execution without conflicts Block exhausted allowed resources Block is from the future Block is not signed by expected producer Block includes an ill formed protocol feature activation extension Block includes an ill formed additional block signature extension Error decompressing transaction Transaction should have at least one required authority Expired Transaction Invalid Reference Block Duplicate deferred transaction The transaction can not be found Transaction is too big Invalid transaction extension Transaction includes disallowed Transaction exceeded transient resource limit Account name already exists sysio_assert_message assertion failure Action can not be found Attempt to use unaccessible API Inline Action exceeds maximum size limit sysio_assert_code assertion failure uses restricted error code value action return value size too big database_exception</div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2exceptions_8hpp_source.html#l00314">exceptions.hpp:314</a></div></div>
<div class="ttc" id="ayubihsm__pkcs11_8c_html_ae785d5badbf1f08b491af31f32a135a1"><div class="ttname"><a href="yubihsm__pkcs11_8c.html#ae785d5badbf1f08b491af31f32a135a1">memcpy</a></div><div class="ttdeci">memcpy((char *) pInfo-&gt;slotDescription, s, l)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab6cb5ce5742de26979b108d2e5d908db" name="ab6cb5ce5742de26979b108d2e5d908db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6cb5ce5742de26979b108d2e5d908db">&#9670;&#160;</a></span>get_descriptor_for_code_sync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structsysio_1_1chain_1_1eosvmoc_1_1code__descriptor.html">code_descriptor</a> *const sysio::chain::eosvmoc::code_cache_sync::get_descriptor_for_code_sync </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#a357fd9478475457e5bb386a3143079b6">digest_type</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>code_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>vm_version</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="code__cache_8cpp_source.html#l00177">177</a> of file <a class="el" href="code__cache_8cpp_source.html">code_cache.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  177</span>                                                                                                                                {</div>
<div class="line"><span class="lineno">  178</span>   <span class="comment">//check for entry in cache</span></div>
<div class="line"><span class="lineno">  179</span>   code_cache_index::index&lt;by_hash&gt;::type::iterator it = <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.get&lt;by_hash&gt;().<a class="code hl_function" href="namespace_intrinsics.html#a7b30616029cc015f330ebf338c3fb454">find</a>(boost::make_tuple(code_id, vm_version));</div>
<div class="line"><span class="lineno">  180</span>   <span class="keywordflow">if</span>(it != <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.get&lt;by_hash&gt;().end()) {</div>
<div class="line"><span class="lineno">  181</span>      <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.relocate(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.begin(), <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.project&lt;0&gt;(it));</div>
<div class="line"><span class="lineno">  182</span>      <span class="keywordflow">return</span> &amp;*it;</div>
<div class="line"><span class="lineno">  183</span>   }</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>   <span class="keyword">const</span> code_object* <span class="keyword">const</span> codeobject = <a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#ad7e0e5b63b94e48e35baacc15644b0b7">_db</a>.<a class="code hl_function" href="classchainbase_1_1database.html#aa5a2ca0da0092693ac49b36b7ec6817a">find</a>&lt;code_object,by_code_hash&gt;(boost::make_tuple(code_id, 0, vm_version));</div>
<div class="line"><span class="lineno">  186</span>   <span class="keywordflow">if</span>(!codeobject) <span class="comment">//should be impossible right?</span></div>
<div class="line"><span class="lineno">  187</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>   std::vector&lt;wrapped_fd&gt; fds_to_pass;</div>
<div class="line"><span class="lineno">  190</span>   fds_to_pass.emplace_back(<a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc.html#afe4909c18643f64d0c67a83885aefd90">memfd_for_bytearray</a>(codeobject-&gt;code));</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>   <a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc.html#a8715d32fd2e6a4a668578ca0d946b58b">write_message_with_fds</a>(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a1ea07bb510f7b82ecfb324bca6225728">_compile_monitor_write_socket</a>, compile_wasm_message{ {code_id, vm_version} }, fds_to_pass);</div>
<div class="line"><span class="lineno">  193</span>   <span class="keyword">auto</span> [<a class="code hl_enumvalue" href="namespacesysio_1_1chain_1_1webassembly.html#a72ffd6653260a2dedcc4b55e39e10973a4e09c20e9a85794807a130e8283e8769">success</a>, message, fds] = <a class="code hl_function" href="namespacesysio_1_1chain_1_1eosvmoc.html#aa65c4d6c02a0823262c6627a86cc74bc">read_message_with_fds</a>(<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a3422663ea869e784bf6b6e72cb43f96b">_compile_monitor_read_socket</a>);</div>
<div class="line"><span class="lineno">  194</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(success, wasm_execution_error, <span class="stringliteral">&quot;failed to read response from monitor process&quot;</span>);</div>
<div class="line"><span class="lineno">  195</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(std::holds_alternative&lt;wasm_compilation_result_message&gt;(message), wasm_execution_error, <span class="stringliteral">&quot;unexpected response from monitor process&quot;</span>);</div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>   wasm_compilation_result_message result = std::get&lt;wasm_compilation_result_message&gt;(message);</div>
<div class="line"><span class="lineno">  198</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(std::holds_alternative&lt;code_descriptor&gt;(result.result), wasm_execution_error, <span class="stringliteral">&quot;failed to compile wasm&quot;</span>);</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>   <a class="code hl_function" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a249bdb27d2796f53a728b85a2889db44">check_eviction_threshold</a>(result.cache_free_bytes);</div>
<div class="line"><span class="lineno">  201</span> </div>
<div class="line"><span class="lineno">  202</span>   <span class="keywordflow">return</span> &amp;*<a class="code hl_variable" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#adb969be895a25820aa4e599304dfa252">_cache_index</a>.push_front(std::move(std::get&lt;code_descriptor&gt;(result.result))).first;</div>
<div class="line"><span class="lineno">  203</span>}</div>
<div class="ttc" id="aclasschainbase_1_1database_html_aa5a2ca0da0092693ac49b36b7ec6817a"><div class="ttname"><a href="classchainbase_1_1database.html#aa5a2ca0da0092693ac49b36b7ec6817a">chainbase::database::find</a></div><div class="ttdeci">const ObjectType * find(CompatibleKey &amp;&amp;key) const</div><div class="ttdef"><b>Definition</b> <a href="chainbase_8hpp_source.html#l00458">chainbase.hpp:458</a></div></div>
<div class="ttc" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__base_html_a249bdb27d2796f53a728b85a2889db44"><div class="ttname"><a href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a249bdb27d2796f53a728b85a2889db44">sysio::chain::eosvmoc::code_cache_base::check_eviction_threshold</a></div><div class="ttdeci">void check_eviction_threshold(size_t free_bytes)</div><div class="ttdef"><b>Definition</b> <a href="code__cache_8cpp_source.html#l00380">code_cache.cpp:380</a></div></div>
<div class="ttc" id="anamespace_intrinsics_html_a7b30616029cc015f330ebf338c3fb454"><div class="ttname"><a href="namespace_intrinsics.html#a7b30616029cc015f330ebf338c3fb454">Intrinsics::find</a></div><div class="ttdeci">RUNTIME_API Runtime::ObjectInstance * find(const std::string &amp;name, const IR::ObjectType &amp;type)</div><div class="ttdef"><b>Definition</b> <a href="_intrinsics_8cpp_source.html#l00048">Intrinsics.cpp:48</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1eosvmoc_html_a8715d32fd2e6a4a668578ca0d946b58b"><div class="ttname"><a href="namespacesysio_1_1chain_1_1eosvmoc.html#a8715d32fd2e6a4a668578ca0d946b58b">sysio::chain::eosvmoc::write_message_with_fds</a></div><div class="ttdeci">bool write_message_with_fds(boost::asio::local::datagram_protocol::socket &amp;s, const eosvmoc_message &amp;message, const std::vector&lt; wrapped_fd &gt; &amp;fds=std::vector&lt; wrapped_fd &gt;())</div><div class="ttdef"><b>Definition</b> <a href="ipc__helpers_8cpp_source.html#l00064">ipc_helpers.cpp:64</a></div></div>
<div class="ttc" id="anamespacesysio_1_1chain_1_1eosvmoc_html_afe4909c18643f64d0c67a83885aefd90"><div class="ttname"><a href="namespacesysio_1_1chain_1_1eosvmoc.html#afe4909c18643f64d0c67a83885aefd90">sysio::chain::eosvmoc::memfd_for_bytearray</a></div><div class="ttdeci">wrapped_fd memfd_for_bytearray(const T &amp;bytes)</div><div class="ttdef"><b>Definition</b> <a href="ipc__helpers_8hpp_source.html#l00056">ipc_helpers.hpp:56</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__sync_ab6cb5ce5742de26979b108d2e5d908db_cgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__sync_ab6cb5ce5742de26979b108d2e5d908db_cgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__sync_ab6cb5ce5742de26979b108d2e5d908db_cgraph" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__sync_ab6cb5ce5742de26979b108d2e5d908db_cgraph">
<area shape="rect" title=" " alt="" coords="5,133,183,189"/>
<area shape="rect" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a249bdb27d2796f53a728b85a2889db44" title=" " alt="" coords="231,5,408,61"/>
<area shape="poly" title=" " alt="" coords="140,130,229,78,249,66,252,71,232,82,143,135"/>
<area shape="rect" href="namespacesysio_1_1chain_1_1eosvmoc.html#a8715d32fd2e6a4a668578ca0d946b58b" title=" " alt="" coords="664,46,838,87"/>
<area shape="poly" title=" " alt="" coords="183,136,230,127,454,94,649,73,649,78,455,99,231,132,184,142"/>
<area shape="rect" href="classchainbase_1_1database.html#aa5a2ca0da0092693ac49b36b7ec6817a" title=" " alt="" coords="249,141,390,182"/>
<area shape="poly" title=" " alt="" coords="183,158,233,158,233,164,183,164"/>
<area shape="rect" href="namespacesysio_1_1chain_1_1eosvmoc.html#afe4909c18643f64d0c67a83885aefd90" title=" " alt="" coords="243,206,396,247"/>
<area shape="poly" title=" " alt="" coords="183,184,233,199,231,204,182,189"/>
<area shape="rect" href="namespacesysio_1_1chain_1_1eosvmoc.html#aa65c4d6c02a0823262c6627a86cc74bc" title=" " alt="" coords="234,296,404,336"/>
<area shape="poly" title=" " alt="" coords="135,187,232,256,274,285,271,289,229,261,132,191"/>
<area shape="rect" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__base.html#a543e8301b86cc0682a715686279dc1c3" title=" " alt="" coords="456,5,616,61"/>
<area shape="poly" title=" " alt="" coords="408,30,440,30,440,36,408,36"/>
<area shape="poly" title=" " alt="" coords="617,43,649,48,649,53,616,48"/>
<area shape="poly" title=" " alt="" coords="710,46,708,36,715,27,729,22,751,20,774,22,788,28,786,33,773,27,751,25,731,27,718,31,714,37,716,45"/>
<area shape="rect" href="classchainbase_1_1database.html#afcfe00f81a526c1376d4f51197dd3a9a" title=" " alt="" coords="667,148,835,174"/>
<area shape="poly" title=" " alt="" coords="391,165,652,166,652,172,391,171"/>
<area shape="rect" href="classchainbase_1_1database.html#a4d5297635dcf70be481d9b600da9bc13" title=" " alt="" coords="466,210,607,251"/>
<area shape="poly" title=" " alt="" coords="386,180,457,202,455,208,385,185"/>
<area shape="poly" title=" " alt="" coords="667,157,406,156,406,151,667,151"/>
<area shape="poly" title=" " alt="" coords="601,207,693,177,695,182,603,212"/>
<area shape="rect" href="yubihsm__pkcs11_8c.html#ae785d5badbf1f08b491af31f32a135a1" title=" " alt="" coords="500,275,572,301"/>
<area shape="poly" title=" " alt="" coords="395,245,486,271,484,276,393,250"/>
<area shape="poly" title=" " alt="" coords="278,295,276,286,283,277,298,271,319,269,343,271,357,277,355,282,341,276,319,274,299,276,286,281,282,287,284,294"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__sync_ab6cb5ce5742de26979b108d2e5d908db_icgraph.png" border="0" usemap="#aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__sync_ab6cb5ce5742de26979b108d2e5d908db_icgraph" alt=""/></div>
<map name="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__sync_ab6cb5ce5742de26979b108d2e5d908db_icgraph" id="aclasssysio_1_1chain_1_1eosvmoc_1_1code__cache__sync_ab6cb5ce5742de26979b108d2e5d908db_icgraph">
<area shape="rect" title=" " alt="" coords="271,5,448,61"/>
<area shape="rect" href="classsysio_1_1chain_1_1webassembly_1_1eosvmoc_1_1eosvmoc__instantiated__module.html#a4832906addea3310a04753ee52792b21" title=" " alt="" coords="5,5,223,61"/>
<area shape="poly" title=" " alt="" coords="255,36,223,36,223,30,255,30"/>
</map>
</div>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>libraries/chain/include/sysio/chain/webassembly/sys-vm-oc/<a class="el" href="code__cache_8hpp_source.html">code_cache.hpp</a></li>
<li>libraries/chain/webassembly/runtimes/sys-vm-oc/<a class="el" href="code__cache_8cpp_source.html">code_cache.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacesysio.html">sysio</a></li><li class="navelem"><a class="el" href="namespacesysio_1_1chain.html">chain</a></li><li class="navelem"><a class="el" href="namespacesysio_1_1chain_1_1eosvmoc.html">eosvmoc</a></li><li class="navelem"><a class="el" href="classsysio_1_1chain_1_1eosvmoc_1_1code__cache__sync.html">code_cache_sync</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
