\doxysection{fc\+::dmlog\+\_\+appender Class Reference}
\hypertarget{classfc_1_1dmlog__appender}{}\label{classfc_1_1dmlog__appender}\index{fc::dmlog\_appender@{fc::dmlog\_appender}}


{\ttfamily \#include $<$dmlog\+\_\+appender.\+hpp$>$}



Inheritance diagram for fc\+::dmlog\+\_\+appender\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=182pt]{classfc_1_1dmlog__appender__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for fc\+::dmlog\+\_\+appender\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=182pt]{classfc_1_1dmlog__appender__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structfc_1_1dmlog__appender_1_1config}{config}}
\item 
class \mbox{\hyperlink{classfc_1_1dmlog__appender_1_1impl}{impl}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classfc_1_1dmlog__appender_af528a4e9c4c27adf5c15c1a6f228d7e7}{dmlog\+\_\+appender}} (const \mbox{\hyperlink{classfc_1_1variant}{variant}} \&args)
\item 
\mbox{\hyperlink{classfc_1_1dmlog__appender_a50d846e87ac3f46fa6ab5163ed7e4a94}{dmlog\+\_\+appender}} (const std\+::optional$<$ \mbox{\hyperlink{structfc_1_1dmlog__appender_1_1config}{config}} $>$ \&args)
\item 
virtual \mbox{\hyperlink{classfc_1_1dmlog__appender_aebd667ed3a974dc557f3ac3b95c593c6}{\texorpdfstring{$\sim$}{\string~}dmlog\+\_\+appender}} ()
\item 
virtual void \mbox{\hyperlink{classfc_1_1dmlog__appender_a1ed404efec9f684dcfdbe56cfc3821fc}{initialize}} (boost\+::asio\+::io\+\_\+service \&io\+\_\+service) override
\item 
virtual void \mbox{\hyperlink{classfc_1_1dmlog__appender_a7ad23d287447893ca7ee30059fbffe9b}{log}} (const \mbox{\hyperlink{classfc_1_1log__message}{log\+\_\+message}} \&m) override
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classfc_1_1appender}{fc\+::appender}}}
\doxysubsubsection*{Additional Inherited Members}
\doxysubsection*{Public Types inherited from \mbox{\hyperlink{classfc_1_1appender}{fc\+::appender}}}
\begin{DoxyCompactItemize}
\item 
typedef std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classfc_1_1appender}{appender}} $>$ \mbox{\hyperlink{classfc_1_1appender_a860a005f416319eee3b733bb375308c9}{ptr}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Specialized appender for deep mind tracer that sends log messages through {\ttfamily stdout} correctly formatted for latter consumption by deep mind postprocessing tools from dfuse. 

Definition at line \mbox{\hyperlink{dmlog__appender_8hpp_source_l00012}{12}} of file \mbox{\hyperlink{dmlog__appender_8hpp_source}{dmlog\+\_\+appender.\+hpp}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classfc_1_1dmlog__appender_af528a4e9c4c27adf5c15c1a6f228d7e7}\index{fc::dmlog\_appender@{fc::dmlog\_appender}!dmlog\_appender@{dmlog\_appender}}
\index{dmlog\_appender@{dmlog\_appender}!fc::dmlog\_appender@{fc::dmlog\_appender}}
\doxysubsubsection{\texorpdfstring{dmlog\_appender()}{dmlog\_appender()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classfc_1_1dmlog__appender_af528a4e9c4c27adf5c15c1a6f228d7e7} 
fc\+::dmlog\+\_\+appender\+::dmlog\+\_\+appender (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classfc_1_1variant}{variant}} \&}]{args}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Definition at line \mbox{\hyperlink{dmlog__appender_8cpp_source_l00046}{46}} of file \mbox{\hyperlink{dmlog__appender_8cpp_source}{dmlog\+\_\+appender.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00047\ \ \ \ :\mbox{\hyperlink{classfc_1_1dmlog__appender_af528a4e9c4c27adf5c15c1a6f228d7e7}{dmlog\_appender}}(\mbox{\hyperlink{namespacebenchmark_compile_ad0ed96ae1454e4347ca61ac3887c379e}{args}}.as<std::optional<config>>())\{\}}

\end{DoxyCode}
\Hypertarget{classfc_1_1dmlog__appender_a50d846e87ac3f46fa6ab5163ed7e4a94}\index{fc::dmlog\_appender@{fc::dmlog\_appender}!dmlog\_appender@{dmlog\_appender}}
\index{dmlog\_appender@{dmlog\_appender}!fc::dmlog\_appender@{fc::dmlog\_appender}}
\doxysubsubsection{\texorpdfstring{dmlog\_appender()}{dmlog\_appender()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classfc_1_1dmlog__appender_a50d846e87ac3f46fa6ab5163ed7e4a94} 
fc\+::dmlog\+\_\+appender\+::dmlog\+\_\+appender (\begin{DoxyParamCaption}\item[{const std\+::optional$<$ \mbox{\hyperlink{structfc_1_1dmlog__appender_1_1config}{config}} $>$ \&}]{args}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}

\Hypertarget{classfc_1_1dmlog__appender_aebd667ed3a974dc557f3ac3b95c593c6}\index{fc::dmlog\_appender@{fc::dmlog\_appender}!````~dmlog\_appender@{\texorpdfstring{$\sim$}{\string~}dmlog\_appender}}
\index{````~dmlog\_appender@{\texorpdfstring{$\sim$}{\string~}dmlog\_appender}!fc::dmlog\_appender@{fc::dmlog\_appender}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}dmlog\_appender()}{\string~dmlog\_appender()}}
{\footnotesize\ttfamily \label{classfc_1_1dmlog__appender_aebd667ed3a974dc557f3ac3b95c593c6} 
fc\+::dmlog\+\_\+appender\+::\texorpdfstring{$\sim$}{\string~}dmlog\+\_\+appender (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Definition at line \mbox{\hyperlink{dmlog__appender_8cpp_source_l00052}{52}} of file \mbox{\hyperlink{dmlog__appender_8cpp_source}{dmlog\+\_\+appender.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (my-\/>owns\_out)}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ std::fclose(my-\/>out);}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00057\ \ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classfc_1_1dmlog__appender_a1ed404efec9f684dcfdbe56cfc3821fc}\index{fc::dmlog\_appender@{fc::dmlog\_appender}!initialize@{initialize}}
\index{initialize@{initialize}!fc::dmlog\_appender@{fc::dmlog\_appender}}
\doxysubsubsection{\texorpdfstring{initialize()}{initialize()}}
{\footnotesize\ttfamily \label{classfc_1_1dmlog__appender_a1ed404efec9f684dcfdbe56cfc3821fc} 
void fc\+::dmlog\+\_\+appender\+::initialize (\begin{DoxyParamCaption}\item[{boost\+::asio\+::io\+\_\+service \&}]{io\+\_\+service}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{classfc_1_1appender_ae86b4e5cfde6548556295692ba2badca}{fc\+::appender}}.



Definition at line \mbox{\hyperlink{dmlog__appender_8cpp_source_l00059}{59}} of file \mbox{\hyperlink{dmlog__appender_8cpp_source}{dmlog\+\_\+appender.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00059\ \{\}}

\end{DoxyCode}
\Hypertarget{classfc_1_1dmlog__appender_a7ad23d287447893ca7ee30059fbffe9b}\index{fc::dmlog\_appender@{fc::dmlog\_appender}!log@{log}}
\index{log@{log}!fc::dmlog\_appender@{fc::dmlog\_appender}}
\doxysubsubsection{\texorpdfstring{log()}{log()}}
{\footnotesize\ttfamily \label{classfc_1_1dmlog__appender_a7ad23d287447893ca7ee30059fbffe9b} 
void fc\+::dmlog\+\_\+appender\+::log (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classfc_1_1log__message}{log\+\_\+message}} \&}]{m}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{classfc_1_1appender_a2c7c23788e18c882ced73b8a6f24e3c9}{fc\+::appender}}.



Definition at line \mbox{\hyperlink{dmlog__appender_8cpp_source_l00061}{61}} of file \mbox{\hyperlink{dmlog__appender_8cpp_source}{dmlog\+\_\+appender.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ FILE*\ out\ =\ my-\/>out;}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ message\ =\ \mbox{\hyperlink{namespacefc_acd5129981ae93fce3154d3fed6f6acbc}{format\_string}}(\ \textcolor{stringliteral}{"{}DMLOG\ "{}}\ +\ m.get\_format()\ +\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}},\ m.get\_data()\ );}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ remaining\_size\ =\ message.size();}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{debug__client_8cpp_a08398c4d31a4dc3e42d1b9a9ef64c6ad}{message\_ptr}}\ =\ message.c\_str();}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!my-\/>is\_stopped\ \&\&\ remaining\_size)\ \{}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ written\ =\ fwrite(\mbox{\hyperlink{debug__client_8cpp_a08398c4d31a4dc3e42d1b9a9ef64c6ad}{message\_ptr}},\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}),\ remaining\_size,\ out);}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ EINTR\ shouldn't\ happen\ anymore,\ but\ keep\ this\ detection,\ just\ in\ case.}}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(written\ ==\ 0\ \&\&\ errno\ !=\ EINTR)}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ my-\/>is\_stopped\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(written\ !=\ remaining\_size)}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ fprintf(stderr,\ \textcolor{stringliteral}{"{}DMLOG\ FPRINTF\_FAILED\ failed\ written=\%lu\ remaining=\%lu\ \%d\ \%s\(\backslash\)n"{}},\ written,\ remaining\_size,\ ferror(out),\ strerror(errno));}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ clearerr(out);}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(my-\/>is\_stopped)}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ fprintf(stderr,\ \textcolor{stringliteral}{"{}DMLOG\ FPRINTF\_FAILURE\_TERMINATED\(\backslash\)n"{}});}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Depending\ on\ the\ error,\ we\ might\ have\ already\ gotten\ a\ SIGPIPE}}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ An\ extra\ signal\ is\ harmless,\ though.\ \ Use\ a\ process\ targeted}}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ signal\ (not\ raise)\ because\ the\ SIGTERM\ may\ be\ blocked\ in\ this}}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ thread.}}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ kill(getpid(),\ SIGTERM);}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{debug__client_8cpp_a08398c4d31a4dc3e42d1b9a9ef64c6ad}{message\_ptr}}\ =\ \&\mbox{\hyperlink{debug__client_8cpp_a08398c4d31a4dc3e42d1b9a9ef64c6ad}{message\_ptr}}[written];}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ remaining\_size\ -\/=\ written;}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00096\ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfc_1_1dmlog__appender_a7ad23d287447893ca7ee30059fbffe9b_cgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
libraries/fc/include/fc/log/\mbox{\hyperlink{dmlog__appender_8hpp}{dmlog\+\_\+appender.\+hpp}}\item 
libraries/fc/src/log/\mbox{\hyperlink{dmlog__appender_8cpp}{dmlog\+\_\+appender.\+cpp}}\end{DoxyCompactItemize}
