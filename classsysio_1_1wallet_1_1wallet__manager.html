<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wire Sysio: sysio::wallet::wallet_manager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Wire Sysio<span id="projectnumber">&#160;Wire Sysion 1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classsysio_1_1wallet_1_1wallet__manager.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classsysio_1_1wallet_1_1wallet__manager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">sysio::wallet::wallet_manager Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="wallet__manager_8hpp_source.html">wallet_manager.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a21033bf369566df07a2305d23bdd26d2" id="r_a21033bf369566df07a2305d23bdd26d2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a21033bf369566df07a2305d23bdd26d2">wallet_manager</a> ()</td></tr>
<tr class="separator:a21033bf369566df07a2305d23bdd26d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4da134f518c4d1c9f440fbfda6bde907" id="r_a4da134f518c4d1c9f440fbfda6bde907"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4da134f518c4d1c9f440fbfda6bde907">wallet_manager</a> (const <a class="el" href="classsysio_1_1wallet_1_1wallet__manager.html">wallet_manager</a> &amp;)=delete</td></tr>
<tr class="separator:a4da134f518c4d1c9f440fbfda6bde907"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75b660b3a994d3a6052a00851798085f" id="r_a75b660b3a994d3a6052a00851798085f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a75b660b3a994d3a6052a00851798085f">wallet_manager</a> (<a class="el" href="classsysio_1_1wallet_1_1wallet__manager.html">wallet_manager</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a75b660b3a994d3a6052a00851798085f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace255539e23f9b452790404bd8f82dfd" id="r_ace255539e23f9b452790404bd8f82dfd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsysio_1_1wallet_1_1wallet__manager.html">wallet_manager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ace255539e23f9b452790404bd8f82dfd">operator=</a> (const <a class="el" href="classsysio_1_1wallet_1_1wallet__manager.html">wallet_manager</a> &amp;)=delete</td></tr>
<tr class="separator:ace255539e23f9b452790404bd8f82dfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab51693ac8b433e803108a8c84ac580a7" id="r_ab51693ac8b433e803108a8c84ac580a7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsysio_1_1wallet_1_1wallet__manager.html">wallet_manager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab51693ac8b433e803108a8c84ac580a7">operator=</a> (<a class="el" href="classsysio_1_1wallet_1_1wallet__manager.html">wallet_manager</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:ab51693ac8b433e803108a8c84ac580a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91f87ee286b1ad524277ad1b9a89d362" id="r_a91f87ee286b1ad524277ad1b9a89d362"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a91f87ee286b1ad524277ad1b9a89d362">~wallet_manager</a> ()</td></tr>
<tr class="separator:a91f87ee286b1ad524277ad1b9a89d362"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac330332e56fe16ba2d2b855acc551a44" id="r_ac330332e56fe16ba2d2b855acc551a44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac330332e56fe16ba2d2b855acc551a44">set_dir</a> (const boost::filesystem::path &amp;<a class="el" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a>)</td></tr>
<tr class="separator:ac330332e56fe16ba2d2b855acc551a44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31ff8d23227bdca61ae4d53d228e7988" id="r_a31ff8d23227bdca61ae4d53d228e7988"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a31ff8d23227bdca61ae4d53d228e7988">set_timeout</a> (const std::chrono::seconds &amp;t)</td></tr>
<tr class="separator:a31ff8d23227bdca61ae4d53d228e7988"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0b19fba064d2db5a813e6e934638a3a" id="r_aa0b19fba064d2db5a813e6e934638a3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa0b19fba064d2db5a813e6e934638a3a">set_timeout</a> (<a class="el" href="stdint_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> secs)</td></tr>
<tr class="separator:aa0b19fba064d2db5a813e6e934638a3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5603a17a529a1e55788a1cb42d73af89" id="r_a5603a17a529a1e55788a1cb42d73af89"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsysio_1_1chain_1_1signed__transaction.html">chain::signed_transaction</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5603a17a529a1e55788a1cb42d73af89">sign_transaction</a> (const <a class="el" href="structsysio_1_1chain_1_1signed__transaction.html">chain::signed_transaction</a> &amp;txn, const flat_set&lt; <a class="el" href="namespacesysio_1_1chain.html#a0628a11f388cd2e43b1ccc1260a1042f">public_key_type</a> &gt; &amp;keys, const <a class="el" href="structsysio_1_1chain_1_1chain__id__type.html">chain::chain_id_type</a> &amp;<a class="el" href="code__cache_8cpp.html#aa0efefe21f4700d78692edc823e763be">id</a>)</td></tr>
<tr class="separator:a5603a17a529a1e55788a1cb42d73af89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdd2a00c00061934ba7899e41f6b5a09" id="r_abdd2a00c00061934ba7899e41f6b5a09"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacesysio_1_1chain.html#af141a69eb789b86fa0eb93c2d263f0df">chain::signature_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abdd2a00c00061934ba7899e41f6b5a09">sign_digest</a> (const <a class="el" href="namespacesysio_1_1chain.html#a357fd9478475457e5bb386a3143079b6">chain::digest_type</a> &amp;<a class="el" href="namespacefc.html#a150ca4cd9c0318ca45dc0dc7df5d58b9">digest</a>, const <a class="el" href="namespacesysio_1_1chain.html#a0628a11f388cd2e43b1ccc1260a1042f">public_key_type</a> &amp;key)</td></tr>
<tr class="separator:abdd2a00c00061934ba7899e41f6b5a09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c1673ae072e569c07ab5af68fc3ae34" id="r_a9c1673ae072e569c07ab5af68fc3ae34"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9c1673ae072e569c07ab5af68fc3ae34">create</a> (const std::string &amp;<a class="el" href="structsysio_1_1chain_1_1name.html">name</a>)</td></tr>
<tr class="separator:a9c1673ae072e569c07ab5af68fc3ae34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2afccf9173458e34f4ce2aba878efb4" id="r_aa2afccf9173458e34f4ce2aba878efb4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa2afccf9173458e34f4ce2aba878efb4">open</a> (const std::string &amp;<a class="el" href="structsysio_1_1chain_1_1name.html">name</a>)</td></tr>
<tr class="separator:aa2afccf9173458e34f4ce2aba878efb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afad689d414b3d3e08a90e6e631111838" id="r_afad689d414b3d3e08a90e6e631111838"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afad689d414b3d3e08a90e6e631111838">list_wallets</a> ()</td></tr>
<tr class="separator:afad689d414b3d3e08a90e6e631111838"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a319251983b7f931e0a5b3dbc78cceac9" id="r_a319251983b7f931e0a5b3dbc78cceac9"><td class="memItemLeft" align="right" valign="top">map&lt; <a class="el" href="namespacesysio_1_1chain.html#a0628a11f388cd2e43b1ccc1260a1042f">public_key_type</a>, <a class="el" href="namespacesysio_1_1chain.html#ac31c0e1bc25b7e5fcf2b3c7f41a23fd6">private_key_type</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a319251983b7f931e0a5b3dbc78cceac9">list_keys</a> (const <a class="el" href="namespacefc.html#a0f3d84fe9e7adcd2d1e0bb7b60b49aa0">string</a> &amp;<a class="el" href="structsysio_1_1chain_1_1name.html">name</a>, const <a class="el" href="namespacefc.html#a0f3d84fe9e7adcd2d1e0bb7b60b49aa0">string</a> &amp;pw)</td></tr>
<tr class="separator:a319251983b7f931e0a5b3dbc78cceac9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a761fbbaa05ca80aa08d9de80a1d2f224" id="r_a761fbbaa05ca80aa08d9de80a1d2f224"><td class="memItemLeft" align="right" valign="top">flat_set&lt; <a class="el" href="namespacesysio_1_1chain.html#a0628a11f388cd2e43b1ccc1260a1042f">public_key_type</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a761fbbaa05ca80aa08d9de80a1d2f224">get_public_keys</a> ()</td></tr>
<tr class="separator:a761fbbaa05ca80aa08d9de80a1d2f224"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a386ae05dc788545f920226be4c4e8f24" id="r_a386ae05dc788545f920226be4c4e8f24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a386ae05dc788545f920226be4c4e8f24">lock_all</a> ()</td></tr>
<tr class="memdesc:a386ae05dc788545f920226be4c4e8f24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locks all the unlocked wallets.  <br /></td></tr>
<tr class="separator:a386ae05dc788545f920226be4c4e8f24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb4ea349b3e8337ba01b61417bba505d" id="r_afb4ea349b3e8337ba01b61417bba505d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afb4ea349b3e8337ba01b61417bba505d">lock</a> (const std::string &amp;<a class="el" href="structsysio_1_1chain_1_1name.html">name</a>)</td></tr>
<tr class="separator:afb4ea349b3e8337ba01b61417bba505d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a108a129e4176fb7a1b782344e9cecc8f" id="r_a108a129e4176fb7a1b782344e9cecc8f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a108a129e4176fb7a1b782344e9cecc8f">unlock</a> (const std::string &amp;<a class="el" href="structsysio_1_1chain_1_1name.html">name</a>, const std::string &amp;password)</td></tr>
<tr class="separator:a108a129e4176fb7a1b782344e9cecc8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7af27f75346e69c7037dc648129e878b" id="r_a7af27f75346e69c7037dc648129e878b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7af27f75346e69c7037dc648129e878b">import_key</a> (const std::string &amp;<a class="el" href="structsysio_1_1chain_1_1name.html">name</a>, const std::string &amp;wif_key)</td></tr>
<tr class="separator:a7af27f75346e69c7037dc648129e878b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6aafecc1ed2761dc39d963d45321acf" id="r_ab6aafecc1ed2761dc39d963d45321acf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab6aafecc1ed2761dc39d963d45321acf">remove_key</a> (const std::string &amp;<a class="el" href="structsysio_1_1chain_1_1name.html">name</a>, const std::string &amp;password, const std::string &amp;key)</td></tr>
<tr class="separator:ab6aafecc1ed2761dc39d963d45321acf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcbda806e839ef15affb1f090d44cac3" id="r_abcbda806e839ef15affb1f090d44cac3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacefc.html#a0f3d84fe9e7adcd2d1e0bb7b60b49aa0">string</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abcbda806e839ef15affb1f090d44cac3">create_key</a> (const std::string &amp;<a class="el" href="structsysio_1_1chain_1_1name.html">name</a>, const std::string &amp;<a class="el" href="yubihsm__pkcs11_8c.html#afa4592d59d085cf06cad9000120eba84">key_type</a>)</td></tr>
<tr class="separator:abcbda806e839ef15affb1f090d44cac3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a313c62b87f7dc75063341bdbed750eef" id="r_a313c62b87f7dc75063341bdbed750eef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a313c62b87f7dc75063341bdbed750eef">own_and_use_wallet</a> (const <a class="el" href="namespacefc.html#a0f3d84fe9e7adcd2d1e0bb7b60b49aa0">string</a> &amp;<a class="el" href="structsysio_1_1chain_1_1name.html">name</a>, std::unique_ptr&lt; <a class="el" href="classsysio_1_1wallet_1_1wallet__api.html">wallet_api</a> &gt; &amp;&amp;wallet)</td></tr>
<tr class="memdesc:a313c62b87f7dc75063341bdbed750eef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Takes ownership of a wallet to use.  <br /></td></tr>
<tr class="separator:a313c62b87f7dc75063341bdbed750eef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides associate of wallet name to wallet and manages the interaction with each wallet.</p>
<p>The name of the wallet is also used as part of the file name by <a class="el" href="classsysio_1_1wallet_1_1soft__wallet.html">soft_wallet</a>. See <a class="el" href="#a9c1673ae072e569c07ab5af68fc3ae34">wallet_manager::create</a>. No const methods because timeout may cause <a class="el" href="#a386ae05dc788545f920226be4c4e8f24" title="Locks all the unlocked wallets.">lock_all()</a> to be called. </p>

<p class="definition">Definition at line <a class="el" href="wallet__manager_8hpp_source.html#l00018">18</a> of file <a class="el" href="wallet__manager_8hpp_source.html">wallet_manager.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a21033bf369566df07a2305d23bdd26d2" name="a21033bf369566df07a2305d23bdd26d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21033bf369566df07a2305d23bdd26d2">&#9670;&#160;</a></span>wallet_manager() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sysio::wallet::wallet_manager::wallet_manager </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wallet__manager_8cpp_source.html#l00025">25</a> of file <a class="el" href="wallet__manager_8cpp_source.html">wallet_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   25</span>                               {</div>
<div class="line"><span class="lineno">   26</span><span class="preprocessor">#ifdef __APPLE__</span></div>
<div class="line"><span class="lineno">   27</span>   <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">   28</span>      wallets.emplace(<span class="stringliteral">&quot;SecureEnclave&quot;</span>, std::make_unique&lt;se_wallet&gt;());</div>
<div class="line"><span class="lineno">   29</span>   } <span class="keywordflow">catch</span>(<span class="keyword">const</span> std::exception&amp; ) {}</div>
<div class="line"><span class="lineno">   30</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">   31</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4da134f518c4d1c9f440fbfda6bde907" name="a4da134f518c4d1c9f440fbfda6bde907"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4da134f518c4d1c9f440fbfda6bde907">&#9670;&#160;</a></span>wallet_manager() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sysio::wallet::wallet_manager::wallet_manager </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classsysio_1_1wallet_1_1wallet__manager.html">wallet_manager</a> &amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a75b660b3a994d3a6052a00851798085f" name="a75b660b3a994d3a6052a00851798085f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75b660b3a994d3a6052a00851798085f">&#9670;&#160;</a></span>wallet_manager() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sysio::wallet::wallet_manager::wallet_manager </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsysio_1_1wallet_1_1wallet__manager.html">wallet_manager</a> &amp;&amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a91f87ee286b1ad524277ad1b9a89d362" name="a91f87ee286b1ad524277ad1b9a89d362"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91f87ee286b1ad524277ad1b9a89d362">&#9670;&#160;</a></span>~wallet_manager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sysio::wallet::wallet_manager::~wallet_manager </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wallet__manager_8cpp_source.html#l00033">33</a> of file <a class="el" href="wallet__manager_8cpp_source.html">wallet_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   33</span>                                {</div>
<div class="line"><span class="lineno">   34</span>   <span class="comment">//not really required, but may spook users</span></div>
<div class="line"><span class="lineno">   35</span>   <span class="keywordflow">if</span>(wallet_dir_lock)</div>
<div class="line"><span class="lineno">   36</span>      boost::filesystem::remove(lock_path);</div>
<div class="line"><span class="lineno">   37</span>}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9c1673ae072e569c07ab5af68fc3ae34" name="a9c1673ae072e569c07ab5af68fc3ae34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c1673ae072e569c07ab5af68fc3ae34">&#9670;&#160;</a></span>create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string sysio::wallet::wallet_manager::create </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>name</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new wallet. <a class="el" href="struct_a.html">A</a> new wallet is created in file dir/{name}.wallet see set_dir. The new wallet is unlocked after creation. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>of the wallet and name of the file without ext .wallet. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Plaintext password that is needed to unlock wallet. Caller is responsible for saving password otherwise they will not be able to unlock their wallet. Note user supplied passwords are not supported. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classfc_1_1exception.html" title="Used to generate a useful error report when an exception is thrown.">fc::exception</a></td><td>if wallet with name already exists (or filename already exists) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="wallet__manager_8cpp_source.html#l00057">57</a> of file <a class="el" href="wallet__manager_8cpp_source.html">wallet_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   57</span>                                                      {</div>
<div class="line"><span class="lineno">   58</span>   check_timeout();</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(<a class="code hl_function" href="namespacesysio_1_1wallet.html#aec99b3a63cebacb7d46a30201e7e806b">valid_filename</a>(<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>), wallet_exception, <span class="stringliteral">&quot;Invalid filename, path not allowed in wallet name ${n}&quot;</span>, (<span class="stringliteral">&quot;n&quot;</span>, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>));</div>
<div class="line"><span class="lineno">   61</span> </div>
<div class="line"><span class="lineno">   62</span>   <span class="keyword">auto</span> wallet_filename = dir / (<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> + <a class="code hl_variable" href="namespacesysio_1_1wallet.html#afc44f526472a47e0ee8e39eca7cde17b">file_ext</a>);</div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>   <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacefc.html#a3fcf0d920aea28014aacae50a51d8485">fc::exists</a>(wallet_filename)) {</div>
<div class="line"><span class="lineno">   65</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a1bfa656552ea0534b2c91ee0fe33f850">SYS_THROW</a>(chain::wallet_exist_exception, <span class="stringliteral">&quot;Wallet with name: &#39;${n}&#39; already exists at ${path}&quot;</span>, (<span class="stringliteral">&quot;n&quot;</span>, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>)(<span class="stringliteral">&quot;path&quot;</span>,<a class="code hl_class" href="classfc_1_1path.html">fc::path</a>(wallet_filename)));</div>
<div class="line"><span class="lineno">   66</span>   }</div>
<div class="line"><span class="lineno">   67</span> </div>
<div class="line"><span class="lineno">   68</span>   std::string password = <a class="code hl_function" href="namespacesysio_1_1wallet.html#a5cbf37650ae10182ec2ee887e21dadb6">gen_password</a>();</div>
<div class="line"><span class="lineno">   69</span>   wallet_data <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a107648633008a7f2d872b4b3d98c2f96">d</a>;</div>
<div class="line"><span class="lineno">   70</span>   <span class="keyword">auto</span> wallet = make_unique&lt;soft_wallet&gt;(d);</div>
<div class="line"><span class="lineno">   71</span>   wallet-&gt;set_password(password);</div>
<div class="line"><span class="lineno">   72</span>   wallet-&gt;set_wallet_filename(wallet_filename.string());</div>
<div class="line"><span class="lineno">   73</span>   wallet-&gt;unlock(password);</div>
<div class="line"><span class="lineno">   74</span>   wallet-&gt;lock();</div>
<div class="line"><span class="lineno">   75</span>   wallet-&gt;unlock(password);</div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span>   <span class="comment">// Explicitly save the wallet file here, to ensure it now exists.</span></div>
<div class="line"><span class="lineno">   78</span>   wallet-&gt;save_wallet_file();</div>
<div class="line"><span class="lineno">   79</span> </div>
<div class="line"><span class="lineno">   80</span>   <span class="comment">// If we have name in our map then remove it since we want the emplace below to replace.</span></div>
<div class="line"><span class="lineno">   81</span>   <span class="comment">// This can happen if the wallet file is removed while eos-walletd is running.</span></div>
<div class="line"><span class="lineno">   82</span>   <span class="keyword">auto</span> it = wallets.find(<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>);</div>
<div class="line"><span class="lineno">   83</span>   <span class="keywordflow">if</span> (it != wallets.end()) {</div>
<div class="line"><span class="lineno">   84</span>      wallets.erase(it);</div>
<div class="line"><span class="lineno">   85</span>   }</div>
<div class="line"><span class="lineno">   86</span>   wallets.emplace(<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>, std::move(wallet));</div>
<div class="line"><span class="lineno">   87</span> </div>
<div class="line"><span class="lineno">   88</span>   <span class="keywordflow">return</span> <a class="code hl_variable" href="attest_8c.html#abd7f8a696584d8ab4b9f4d1e1970be37">password</a>;</div>
<div class="line"><span class="lineno">   89</span>}</div>
<div class="ttc" id="aattest_8c_html_abd7f8a696584d8ab4b9f4d1e1970be37"><div class="ttname"><a href="attest_8c.html#abd7f8a696584d8ab4b9f4d1e1970be37">password</a></div><div class="ttdeci">const uint8_t password[]</div><div class="ttdef"><b>Definition</b> <a href="attest_8c_source.html#l00039">attest.c:39</a></div></div>
<div class="ttc" id="achain_2include_2sysio_2chain_2exceptions_8hpp_html_a1bfa656552ea0534b2c91ee0fe33f850"><div class="ttname"><a href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a1bfa656552ea0534b2c91ee0fe33f850">SYS_THROW</a></div><div class="ttdeci">#define SYS_THROW(exc_type, FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2exceptions_8hpp_source.html#l00013">exceptions.hpp:13</a></div></div>
<div class="ttc" id="achain_2include_2sysio_2chain_2exceptions_8hpp_html_a40c2826a6fba35c1ffbf912bdf559792"><div class="ttname"><a href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a></div><div class="ttdeci">#define SYS_ASSERT(expr, exc_type, FORMAT,...)</div><div class="ttdef"><b>Definition</b> <a href="chain_2include_2sysio_2chain_2exceptions_8hpp_source.html#l00007">exceptions.hpp:7</a></div></div>
<div class="ttc" id="aclassfc_1_1path_html"><div class="ttname"><a href="classfc_1_1path.html">fc::path</a></div><div class="ttdoc">wraps boost::filesystem::path to provide platform independent path manipulation.</div><div class="ttdef"><b>Definition</b> <a href="filesystem_8hpp_source.html#l00028">filesystem.hpp:28</a></div></div>
<div class="ttc" id="anamespacefc_html_a3fcf0d920aea28014aacae50a51d8485"><div class="ttname"><a href="namespacefc.html#a3fcf0d920aea28014aacae50a51d8485">fc::exists</a></div><div class="ttdeci">bool exists(const path &amp;p)</div><div class="ttdef"><b>Definition</b> <a href="filesystem_8cpp_source.html#l00217">filesystem.cpp:217</a></div></div>
<div class="ttc" id="anamespacesysio_1_1wallet_html_a5cbf37650ae10182ec2ee887e21dadb6"><div class="ttname"><a href="namespacesysio_1_1wallet.html#a5cbf37650ae10182ec2ee887e21dadb6">sysio::wallet::gen_password</a></div><div class="ttdeci">std::string gen_password()</div><div class="ttdef"><b>Definition</b> <a href="wallet__manager_8cpp_source.html#l00013">wallet_manager.cpp:13</a></div></div>
<div class="ttc" id="anamespacesysio_1_1wallet_html_aec99b3a63cebacb7d46a30201e7e806b"><div class="ttname"><a href="namespacesysio_1_1wallet.html#aec99b3a63cebacb7d46a30201e7e806b">sysio::wallet::valid_filename</a></div><div class="ttdeci">bool valid_filename(const string &amp;name)</div><div class="ttdef"><b>Definition</b> <a href="wallet__manager_8cpp_source.html#l00019">wallet_manager.cpp:19</a></div></div>
<div class="ttc" id="anamespacesysio_1_1wallet_html_afc44f526472a47e0ee8e39eca7cde17b"><div class="ttname"><a href="namespacesysio_1_1wallet.html#afc44f526472a47e0ee8e39eca7cde17b">sysio::wallet::file_ext</a></div><div class="ttdeci">constexpr auto file_ext</div><div class="ttdef"><b>Definition</b> <a href="wallet__manager_8cpp_source.html#l00010">wallet_manager.cpp:10</a></div></div>
<div class="ttc" id="astructsysio_1_1chain_1_1name_html"><div class="ttname"><a href="structsysio_1_1chain_1_1name.html">sysio::chain::name</a></div><div class="ttdoc">Immutable except for fc::from_variant.</div><div class="ttdef"><b>Definition</b> <a href="name_8hpp_source.html#l00043">name.hpp:43</a></div></div>
<div class="ttc" id="ayubihsm__pkcs11_8c_html_a107648633008a7f2d872b4b3d98c2f96"><div class="ttname"><a href="yubihsm__pkcs11_8c.html#a107648633008a7f2d872b4b3d98c2f96">d</a></div><div class="ttdeci">CK_ULONG d</div><div class="ttdef"><b>Definition</b> <a href="yubihsm__pkcs11_8c_source.html#l01238">yubihsm_pkcs11.c:1238</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1wallet_1_1wallet__manager_a9c1673ae072e569c07ab5af68fc3ae34_cgraph.png" border="0" usemap="#aclasssysio_1_1wallet_1_1wallet__manager_a9c1673ae072e569c07ab5af68fc3ae34_cgraph" alt=""/></div>
<map name="aclasssysio_1_1wallet_1_1wallet__manager_a9c1673ae072e569c07ab5af68fc3ae34_cgraph" id="aclasssysio_1_1wallet_1_1wallet__manager_a9c1673ae072e569c07ab5af68fc3ae34_cgraph">
<area shape="rect" title=" " alt="" coords="5,55,142,96"/>
<area shape="rect" href="namespacefc.html#a3fcf0d920aea28014aacae50a51d8485" title=" " alt="" coords="217,5,292,31"/>
<area shape="poly" title=" " alt="" coords="139,52,201,32,203,37,140,57"/>
<area shape="rect" href="namespacesysio_1_1wallet.html#a5cbf37650ae10182ec2ee887e21dadb6" title=" " alt="" coords="193,55,316,96"/>
<area shape="poly" title=" " alt="" coords="142,73,177,73,177,78,142,78"/>
<area shape="rect" href="namespacesysio_1_1wallet.html#aec99b3a63cebacb7d46a30201e7e806b" title=" " alt="" coords="190,120,319,161"/>
<area shape="poly" title=" " alt="" coords="133,94,183,112,181,117,131,99"/>
<area shape="rect" href="classfc_1_1crypto_1_1private__key.html#a54177eb6dda9421bb6e9661478f29807" title=" " alt="" coords="371,55,494,96"/>
<area shape="poly" title=" " alt="" coords="317,73,355,73,355,78,317,78"/>
<area shape="rect" href="classfc_1_1crypto_1_1private__key.html#a7b5870d9705e5edce319e77cfbf5e9fb" title=" " alt="" coords="546,55,671,96"/>
<area shape="poly" title=" " alt="" coords="495,73,531,73,531,78,495,78"/>
<area shape="rect" href="structsysio_1_1chain_1_1name.html#ac074a360785947747ebec83c2cab287a" title=" " alt="" coords="367,120,498,161"/>
<area shape="poly" title=" " alt="" coords="320,138,352,138,352,144,320,144"/>
</map>
</div>

</div>
</div>
<a id="abcbda806e839ef15affb1f090d44cac3" name="abcbda806e839ef15affb1f090d44cac3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcbda806e839ef15affb1f090d44cac3">&#9670;&#160;</a></span>create_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacefc.html#a0f3d84fe9e7adcd2d1e0bb7b60b49aa0">string</a> sysio::wallet::wallet_manager::create_key </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>key_type</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a key within the specified wallet. Wallet must be opened and unlocked </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>of the wallet to create key in </td></tr>
    <tr><td class="paramname">type</td><td>of key to create </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classfc_1_1exception.html" title="Used to generate a useful error report when an exception is thrown.">fc::exception</a></td><td>if wallet not found or locked, or if the wallet cannot create said type of key </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The public key of the created key </dd></dl>

<p class="definition">Definition at line <a class="el" href="wallet__manager_8cpp_source.html#l00213">213</a> of file <a class="el" href="wallet__manager_8cpp_source.html">wallet_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  213</span>                                                                                  {</div>
<div class="line"><span class="lineno">  214</span>   check_timeout();</div>
<div class="line"><span class="lineno">  215</span>   <span class="keywordflow">if</span> (wallets.count(<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>) == 0) {</div>
<div class="line"><span class="lineno">  216</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a1bfa656552ea0534b2c91ee0fe33f850">SYS_THROW</a>(chain::wallet_nonexistent_exception, <span class="stringliteral">&quot;Wallet not found: ${w}&quot;</span>, (<span class="stringliteral">&quot;w&quot;</span>, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>));</div>
<div class="line"><span class="lineno">  217</span>   }</div>
<div class="line"><span class="lineno">  218</span>   <span class="keyword">auto</span>&amp; w = wallets.at(<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>);</div>
<div class="line"><span class="lineno">  219</span>   <span class="keywordflow">if</span> (w-&gt;is_locked()) {</div>
<div class="line"><span class="lineno">  220</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a1bfa656552ea0534b2c91ee0fe33f850">SYS_THROW</a>(chain::wallet_locked_exception, <span class="stringliteral">&quot;Wallet is locked: ${w}&quot;</span>, (<span class="stringliteral">&quot;w&quot;</span>, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>));</div>
<div class="line"><span class="lineno">  221</span>   }</div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span>   <span class="keywordtype">string</span> upper_key_type = boost::to_upper_copy&lt;std::string&gt;(<a class="code hl_variable" href="yubihsm__pkcs11_8c.html#afa4592d59d085cf06cad9000120eba84">key_type</a>);</div>
<div class="line"><span class="lineno">  224</span>   <span class="keywordflow">return</span> w-&gt;create_key(upper_key_type);</div>
<div class="line"><span class="lineno">  225</span>}</div>
<div class="ttc" id="ayubihsm__pkcs11_8c_html_afa4592d59d085cf06cad9000120eba84"><div class="ttname"><a href="yubihsm__pkcs11_8c.html#afa4592d59d085cf06cad9000120eba84">key_type</a></div><div class="ttdeci">struct @108 key_type</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a761fbbaa05ca80aa08d9de80a1d2f224" name="a761fbbaa05ca80aa08d9de80a1d2f224"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a761fbbaa05ca80aa08d9de80a1d2f224">&#9670;&#160;</a></span>get_public_keys()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">flat_set&lt; <a class="el" href="namespacesysio_1_1chain.html#a0628a11f388cd2e43b1ccc1260a1042f">public_key_type</a> &gt; sysio::wallet::wallet_manager::get_public_keys </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="struct_a.html">A</a> set of public keys from all unlocked wallets, use with chain_controller::get_required_keys. </dd></dl>

<p class="definition">Definition at line <a class="el" href="wallet__manager_8cpp_source.html#l00138">138</a> of file <a class="el" href="wallet__manager_8cpp_source.html">wallet_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  138</span>                                                          {</div>
<div class="line"><span class="lineno">  139</span>   check_timeout();</div>
<div class="line"><span class="lineno">  140</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(!wallets.empty(), wallet_not_available_exception, <span class="stringliteral">&quot;You don&#39;t have any wallet!&quot;</span>);</div>
<div class="line"><span class="lineno">  141</span>   flat_set&lt;public_key_type&gt; result;</div>
<div class="line"><span class="lineno">  142</span>   <span class="keywordtype">bool</span> is_all_wallet_locked = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  143</span>   <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; i : wallets) {</div>
<div class="line"><span class="lineno">  144</span>      <span class="keywordflow">if</span> (!i.second-&gt;is_locked()) {</div>
<div class="line"><span class="lineno">  145</span>         result.merge(i.second-&gt;list_public_keys());</div>
<div class="line"><span class="lineno">  146</span>      }</div>
<div class="line"><span class="lineno">  147</span>      is_all_wallet_locked &amp;= i.second-&gt;is_locked();</div>
<div class="line"><span class="lineno">  148</span>   }</div>
<div class="line"><span class="lineno">  149</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(!is_all_wallet_locked, wallet_locked_exception, <span class="stringliteral">&quot;You don&#39;t have any unlocked wallet!&quot;</span>);</div>
<div class="line"><span class="lineno">  150</span>   <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  151</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7af27f75346e69c7037dc648129e878b" name="a7af27f75346e69c7037dc648129e878b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7af27f75346e69c7037dc648129e878b">&#9670;&#160;</a></span>import_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::wallet::wallet_manager::import_key </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>wif_key</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Import private key into specified wallet. Imports a WIF Private Key into specified wallet. Wallet must be opened and unlocked. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the name of the wallet to import into. </td></tr>
    <tr><td class="paramname">wif_key</td><td>the WIF Private Key to import, e.g. 5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3 </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classfc_1_1exception.html" title="Used to generate a useful error report when an exception is thrown.">fc::exception</a></td><td>if wallet not found or locked. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="wallet__manager_8cpp_source.html#l00188">188</a> of file <a class="el" href="wallet__manager_8cpp_source.html">wallet_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  188</span>                                                                               {</div>
<div class="line"><span class="lineno">  189</span>   check_timeout();</div>
<div class="line"><span class="lineno">  190</span>   <span class="keywordflow">if</span> (wallets.count(<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>) == 0) {</div>
<div class="line"><span class="lineno">  191</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a1bfa656552ea0534b2c91ee0fe33f850">SYS_THROW</a>(chain::wallet_nonexistent_exception, <span class="stringliteral">&quot;Wallet not found: ${w}&quot;</span>, (<span class="stringliteral">&quot;w&quot;</span>, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>));</div>
<div class="line"><span class="lineno">  192</span>   }</div>
<div class="line"><span class="lineno">  193</span>   <span class="keyword">auto</span>&amp; w = wallets.at(<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>);</div>
<div class="line"><span class="lineno">  194</span>   <span class="keywordflow">if</span> (w-&gt;is_locked()) {</div>
<div class="line"><span class="lineno">  195</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a1bfa656552ea0534b2c91ee0fe33f850">SYS_THROW</a>(chain::wallet_locked_exception, <span class="stringliteral">&quot;Wallet is locked: ${w}&quot;</span>, (<span class="stringliteral">&quot;w&quot;</span>, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>));</div>
<div class="line"><span class="lineno">  196</span>   }</div>
<div class="line"><span class="lineno">  197</span>   w-&gt;import_key(wif_key);</div>
<div class="line"><span class="lineno">  198</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a319251983b7f931e0a5b3dbc78cceac9" name="a319251983b7f931e0a5b3dbc78cceac9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a319251983b7f931e0a5b3dbc78cceac9">&#9670;&#160;</a></span>list_keys()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">map&lt; <a class="el" href="namespacesysio_1_1chain.html#a0628a11f388cd2e43b1ccc1260a1042f">public_key_type</a>, <a class="el" href="namespacesysio_1_1chain.html#ac31c0e1bc25b7e5fcf2b3c7f41a23fd6">private_key_type</a> &gt; sysio::wallet::wallet_manager::list_keys </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacefc.html#a0f3d84fe9e7adcd2d1e0bb7b60b49aa0">string</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacefc.html#a0f3d84fe9e7adcd2d1e0bb7b60b49aa0">string</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pw</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="struct_a.html">A</a> list of private keys from a wallet provided password is correct to said wallet </dd></dl>

<p class="definition">Definition at line <a class="el" href="wallet__manager_8cpp_source.html#l00126">126</a> of file <a class="el" href="wallet__manager_8cpp_source.html">wallet_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  126</span>                                                                                                    {</div>
<div class="line"><span class="lineno">  127</span>   check_timeout();</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>   <span class="keywordflow">if</span> (wallets.count(<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>) == 0)</div>
<div class="line"><span class="lineno">  130</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a1bfa656552ea0534b2c91ee0fe33f850">SYS_THROW</a>(chain::wallet_nonexistent_exception, <span class="stringliteral">&quot;Wallet not found: ${w}&quot;</span>, (<span class="stringliteral">&quot;w&quot;</span>, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>));</div>
<div class="line"><span class="lineno">  131</span>   <span class="keyword">auto</span>&amp; w = wallets.at(<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>);</div>
<div class="line"><span class="lineno">  132</span>   <span class="keywordflow">if</span> (w-&gt;is_locked())</div>
<div class="line"><span class="lineno">  133</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a1bfa656552ea0534b2c91ee0fe33f850">SYS_THROW</a>(chain::wallet_locked_exception, <span class="stringliteral">&quot;Wallet is locked: ${w}&quot;</span>, (<span class="stringliteral">&quot;w&quot;</span>, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>));</div>
<div class="line"><span class="lineno">  134</span>   w-&gt;check_password(pw); <span class="comment">//throws if bad password</span></div>
<div class="line"><span class="lineno">  135</span>   <span class="keywordflow">return</span> w-&gt;list_keys();</div>
<div class="line"><span class="lineno">  136</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afad689d414b3d3e08a90e6e631111838" name="afad689d414b3d3e08a90e6e631111838"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afad689d414b3d3e08a90e6e631111838">&#9670;&#160;</a></span>list_wallets()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::string &gt; sysio::wallet::wallet_manager::list_wallets </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="struct_a.html">A</a> list of wallet names with " *" appended if the wallet is unlocked. </dd></dl>

<p class="definition">Definition at line <a class="el" href="wallet__manager_8cpp_source.html#l00113">113</a> of file <a class="el" href="wallet__manager_8cpp_source.html">wallet_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  113</span>                                                  {</div>
<div class="line"><span class="lineno">  114</span>   check_timeout();</div>
<div class="line"><span class="lineno">  115</span>   std::vector&lt;std::string&gt; result;</div>
<div class="line"><span class="lineno">  116</span>   <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; i : wallets) {</div>
<div class="line"><span class="lineno">  117</span>      <span class="keywordflow">if</span> (i.second-&gt;is_locked()) {</div>
<div class="line"><span class="lineno">  118</span>         result.emplace_back(i.first);</div>
<div class="line"><span class="lineno">  119</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  120</span>         result.emplace_back(i.first + <span class="stringliteral">&quot; *&quot;</span>);</div>
<div class="line"><span class="lineno">  121</span>      }</div>
<div class="line"><span class="lineno">  122</span>   }</div>
<div class="line"><span class="lineno">  123</span>   <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  124</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afb4ea349b3e8337ba01b61417bba505d" name="afb4ea349b3e8337ba01b61417bba505d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb4ea349b3e8337ba01b61417bba505d">&#9670;&#160;</a></span>lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::wallet::wallet_manager::lock </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>name</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lock the specified wallet. No-op if wallet already locked. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the name of the wallet to lock. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classfc_1_1exception.html" title="Used to generate a useful error report when an exception is thrown.">fc::exception</a></td><td>if wallet with name not found. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="wallet__manager_8cpp_source.html#l00163">163</a> of file <a class="el" href="wallet__manager_8cpp_source.html">wallet_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  163</span>                                               {</div>
<div class="line"><span class="lineno">  164</span>   check_timeout();</div>
<div class="line"><span class="lineno">  165</span>   <span class="keywordflow">if</span> (wallets.count(<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>) == 0) {</div>
<div class="line"><span class="lineno">  166</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a1bfa656552ea0534b2c91ee0fe33f850">SYS_THROW</a>(chain::wallet_nonexistent_exception, <span class="stringliteral">&quot;Wallet not found: ${w}&quot;</span>, (<span class="stringliteral">&quot;w&quot;</span>, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>));</div>
<div class="line"><span class="lineno">  167</span>   }</div>
<div class="line"><span class="lineno">  168</span>   <span class="keyword">auto</span>&amp; w = wallets.at(<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>);</div>
<div class="line"><span class="lineno">  169</span>   <span class="keywordflow">if</span> (w-&gt;is_locked()) {</div>
<div class="line"><span class="lineno">  170</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  171</span>   }</div>
<div class="line"><span class="lineno">  172</span>   w-&gt;lock();</div>
<div class="line"><span class="lineno">  173</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a386ae05dc788545f920226be4c4e8f24" name="a386ae05dc788545f920226be4c4e8f24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a386ae05dc788545f920226be4c4e8f24">&#9670;&#160;</a></span>lock_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::wallet::wallet_manager::lock_all </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wallet__manager_8cpp_source.html#l00154">154</a> of file <a class="el" href="wallet__manager_8cpp_source.html">wallet_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  154</span>                              {</div>
<div class="line"><span class="lineno">  155</span>   <span class="comment">// no call to check_timeout since we are locking all anyway</span></div>
<div class="line"><span class="lineno">  156</span>   <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; i : wallets) {</div>
<div class="line"><span class="lineno">  157</span>      <span class="keywordflow">if</span> (!i.second-&gt;is_locked()) {</div>
<div class="line"><span class="lineno">  158</span>         i.second-&gt;lock();</div>
<div class="line"><span class="lineno">  159</span>      }</div>
<div class="line"><span class="lineno">  160</span>   }</div>
<div class="line"><span class="lineno">  161</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa2afccf9173458e34f4ce2aba878efb4" name="aa2afccf9173458e34f4ce2aba878efb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2afccf9173458e34f4ce2aba878efb4">&#9670;&#160;</a></span>open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::wallet::wallet_manager::open </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>name</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Open an existing wallet file dir/{name}.wallet. Note this does not unlock the wallet, see <a class="el" href="#a108a129e4176fb7a1b782344e9cecc8f">wallet_manager::unlock</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>of the wallet file (minus ext .wallet) to open. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classfc_1_1exception.html" title="Used to generate a useful error report when an exception is thrown.">fc::exception</a></td><td>if unable to find/open the wallet file. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="wallet__manager_8cpp_source.html#l00091">91</a> of file <a class="el" href="wallet__manager_8cpp_source.html">wallet_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   91</span>                                               {</div>
<div class="line"><span class="lineno">   92</span>   check_timeout();</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(<a class="code hl_function" href="namespacesysio_1_1wallet.html#aec99b3a63cebacb7d46a30201e7e806b">valid_filename</a>(<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>), wallet_exception, <span class="stringliteral">&quot;Invalid filename, path not allowed in wallet name ${n}&quot;</span>, (<span class="stringliteral">&quot;n&quot;</span>, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>));</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>   wallet_data <a class="code hl_variable" href="yubihsm__pkcs11_8c.html#a107648633008a7f2d872b4b3d98c2f96">d</a>;</div>
<div class="line"><span class="lineno">   97</span>   <span class="keyword">auto</span> wallet = std::make_unique&lt;soft_wallet&gt;(d);</div>
<div class="line"><span class="lineno">   98</span>   <span class="keyword">auto</span> wallet_filename = dir / (<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> + <a class="code hl_variable" href="namespacesysio_1_1wallet.html#afc44f526472a47e0ee8e39eca7cde17b">file_ext</a>);</div>
<div class="line"><span class="lineno">   99</span>   wallet-&gt;set_wallet_filename(wallet_filename.string());</div>
<div class="line"><span class="lineno">  100</span>   <span class="keywordflow">if</span> (!wallet-&gt;load_wallet_file()) {</div>
<div class="line"><span class="lineno">  101</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a1bfa656552ea0534b2c91ee0fe33f850">SYS_THROW</a>(chain::wallet_nonexistent_exception, <span class="stringliteral">&quot;Unable to open file: ${f}&quot;</span>, (<span class="stringliteral">&quot;f&quot;</span>, wallet_filename.string()));</div>
<div class="line"><span class="lineno">  102</span>   }</div>
<div class="line"><span class="lineno">  103</span> </div>
<div class="line"><span class="lineno">  104</span>   <span class="comment">// If we have name in our map then remove it since we want the emplace below to replace.</span></div>
<div class="line"><span class="lineno">  105</span>   <span class="comment">// This can happen if the wallet file is added while eos-walletd is running.</span></div>
<div class="line"><span class="lineno">  106</span>   <span class="keyword">auto</span> it = wallets.find(<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>);</div>
<div class="line"><span class="lineno">  107</span>   <span class="keywordflow">if</span> (it != wallets.end()) {</div>
<div class="line"><span class="lineno">  108</span>      wallets.erase(it);</div>
<div class="line"><span class="lineno">  109</span>   }</div>
<div class="line"><span class="lineno">  110</span>   wallets.emplace(<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>, std::move(wallet));</div>
<div class="line"><span class="lineno">  111</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1wallet_1_1wallet__manager_aa2afccf9173458e34f4ce2aba878efb4_cgraph.png" border="0" usemap="#aclasssysio_1_1wallet_1_1wallet__manager_aa2afccf9173458e34f4ce2aba878efb4_cgraph" alt=""/></div>
<map name="aclasssysio_1_1wallet_1_1wallet__manager_aa2afccf9173458e34f4ce2aba878efb4_cgraph" id="aclasssysio_1_1wallet_1_1wallet__manager_aa2afccf9173458e34f4ce2aba878efb4_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,142,46"/>
<area shape="rect" href="namespacesysio_1_1wallet.html#aec99b3a63cebacb7d46a30201e7e806b" title=" " alt="" coords="190,5,319,46"/>
<area shape="poly" title=" " alt="" coords="142,23,174,23,174,28,142,28"/>
<area shape="rect" href="structsysio_1_1chain_1_1name.html#ac074a360785947747ebec83c2cab287a" title=" " alt="" coords="367,5,498,46"/>
<area shape="poly" title=" " alt="" coords="320,23,352,23,352,28,320,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1wallet_1_1wallet__manager_aa2afccf9173458e34f4ce2aba878efb4_icgraph.png" border="0" usemap="#aclasssysio_1_1wallet_1_1wallet__manager_aa2afccf9173458e34f4ce2aba878efb4_icgraph" alt=""/></div>
<map name="aclasssysio_1_1wallet_1_1wallet__manager_aa2afccf9173458e34f4ce2aba878efb4_icgraph" id="aclasssysio_1_1wallet_1_1wallet__manager_aa2afccf9173458e34f4ce2aba878efb4_icgraph">
<area shape="rect" title=" " alt="" coords="190,5,326,46"/>
<area shape="rect" href="classsysio_1_1wallet_1_1wallet__manager.html#a108a129e4176fb7a1b782344e9cecc8f" title=" " alt="" coords="5,5,142,46"/>
<area shape="poly" title=" " alt="" coords="174,28,142,28,142,23,174,23"/>
</map>
</div>

</div>
</div>
<a id="ace255539e23f9b452790404bd8f82dfd" name="ace255539e23f9b452790404bd8f82dfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace255539e23f9b452790404bd8f82dfd">&#9670;&#160;</a></span>operator=() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsysio_1_1wallet_1_1wallet__manager.html">wallet_manager</a> &amp; sysio::wallet::wallet_manager::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classsysio_1_1wallet_1_1wallet__manager.html">wallet_manager</a> &amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab51693ac8b433e803108a8c84ac580a7" name="ab51693ac8b433e803108a8c84ac580a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab51693ac8b433e803108a8c84ac580a7">&#9670;&#160;</a></span>operator=() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsysio_1_1wallet_1_1wallet__manager.html">wallet_manager</a> &amp; sysio::wallet::wallet_manager::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsysio_1_1wallet_1_1wallet__manager.html">wallet_manager</a> &amp;&amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a313c62b87f7dc75063341bdbed750eef" name="a313c62b87f7dc75063341bdbed750eef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a313c62b87f7dc75063341bdbed750eef">&#9670;&#160;</a></span>own_and_use_wallet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::wallet::wallet_manager::own_and_use_wallet </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacefc.html#a0f3d84fe9e7adcd2d1e0bb7b60b49aa0">string</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classsysio_1_1wallet_1_1wallet__api.html">wallet_api</a> &gt; &amp;&amp;</td>          <td class="paramname"><span class="paramname"><em>wallet</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wallet__manager_8cpp_source.html#l00269">269</a> of file <a class="el" href="wallet__manager_8cpp_source.html">wallet_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  269</span>                                                                                              {</div>
<div class="line"><span class="lineno">  270</span>   <span class="keywordflow">if</span>(wallets.find(<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>) != wallets.end())</div>
<div class="line"><span class="lineno">  271</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a1bfa656552ea0534b2c91ee0fe33f850">SYS_THROW</a>(wallet_exception, <span class="stringliteral">&quot;Tried to use wallet name that already exists.&quot;</span>);</div>
<div class="line"><span class="lineno">  272</span>   wallets.emplace(<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>, std::move(wallet));</div>
<div class="line"><span class="lineno">  273</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab6aafecc1ed2761dc39d963d45321acf" name="ab6aafecc1ed2761dc39d963d45321acf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6aafecc1ed2761dc39d963d45321acf">&#9670;&#160;</a></span>remove_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::wallet::wallet_manager::remove_key </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>password</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>key</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes a key from the specified wallet. Wallet must be opened and unlocked. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the name of the wallet to remove the key from. </td></tr>
    <tr><td class="paramname">password</td><td>the plaintext password returned from <a class="el" href="#a9c1673ae072e569c07ab5af68fc3ae34">create</a>. </td></tr>
    <tr><td class="paramname">key</td><td>the Public Key to remove, e.g. SYS6MRyAjQq8ud7hVNYcfnVPJqcVpscN5So8BhtHuGYqET5GDW5CV </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classfc_1_1exception.html" title="Used to generate a useful error report when an exception is thrown.">fc::exception</a></td><td>if wallet not found or locked or key is not removed. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="wallet__manager_8cpp_source.html#l00200">200</a> of file <a class="el" href="wallet__manager_8cpp_source.html">wallet_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  200</span>                                                                                                      {</div>
<div class="line"><span class="lineno">  201</span>   check_timeout();</div>
<div class="line"><span class="lineno">  202</span>   <span class="keywordflow">if</span> (wallets.count(<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>) == 0) {</div>
<div class="line"><span class="lineno">  203</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a1bfa656552ea0534b2c91ee0fe33f850">SYS_THROW</a>(chain::wallet_nonexistent_exception, <span class="stringliteral">&quot;Wallet not found: ${w}&quot;</span>, (<span class="stringliteral">&quot;w&quot;</span>, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>));</div>
<div class="line"><span class="lineno">  204</span>   }</div>
<div class="line"><span class="lineno">  205</span>   <span class="keyword">auto</span>&amp; w = wallets.at(<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>);</div>
<div class="line"><span class="lineno">  206</span>   <span class="keywordflow">if</span> (w-&gt;is_locked()) {</div>
<div class="line"><span class="lineno">  207</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a1bfa656552ea0534b2c91ee0fe33f850">SYS_THROW</a>(chain::wallet_locked_exception, <span class="stringliteral">&quot;Wallet is locked: ${w}&quot;</span>, (<span class="stringliteral">&quot;w&quot;</span>, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>));</div>
<div class="line"><span class="lineno">  208</span>   }</div>
<div class="line"><span class="lineno">  209</span>   w-&gt;check_password(password); <span class="comment">//throws if bad password</span></div>
<div class="line"><span class="lineno">  210</span>   w-&gt;remove_key(key);</div>
<div class="line"><span class="lineno">  211</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac330332e56fe16ba2d2b855acc551a44" name="ac330332e56fe16ba2d2b855acc551a44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac330332e56fe16ba2d2b855acc551a44">&#9670;&#160;</a></span>set_dir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::wallet::wallet_manager::set_dir </td>
          <td>(</td>
          <td class="paramtype">const boost::filesystem::path &amp;</td>          <td class="paramname"><span class="paramname"><em>p</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set the path for location of wallet files. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>path to override default ./ location of wallet files. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="wallet__manager_8hpp_source.html#l00029">29</a> of file <a class="el" href="wallet__manager_8hpp_source.html">wallet_manager.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   29</span>                                              {</div>
<div class="line"><span class="lineno">   30</span>      dir = <a class="code hl_variable" href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a>;</div>
<div class="line"><span class="lineno">   31</span>      initialize_lock();</div>
<div class="line"><span class="lineno">   32</span>   }</div>
<div class="ttc" id="abn_8cpp_html_a8b0eadcc506862e9d751ab45185053aa"><div class="ttname"><a href="bn_8cpp.html#a8b0eadcc506862e9d751ab45185053aa">p</a></div><div class="ttdeci">const mie::Vuint &amp; p</div><div class="ttdef"><b>Definition</b> <a href="bn_8cpp_source.html#l00027">bn.cpp:27</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a31ff8d23227bdca61ae4d53d228e7988" name="a31ff8d23227bdca61ae4d53d228e7988"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31ff8d23227bdca61ae4d53d228e7988">&#9670;&#160;</a></span>set_timeout() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::wallet::wallet_manager::set_timeout </td>
          <td>(</td>
          <td class="paramtype">const std::chrono::seconds &amp;</td>          <td class="paramname"><span class="paramname"><em>t</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the timeout for locking all wallets. If set then after t seconds of inactivity then <a class="el" href="#a386ae05dc788545f920226be4c4e8f24" title="Locks all the unlocked wallets.">lock_all()</a>. Activity is defined as any <a class="el" href="classsysio_1_1wallet_1_1wallet__manager.html">wallet_manager</a> method call below. </p>

<p class="definition">Definition at line <a class="el" href="wallet__manager_8cpp_source.html#l00039">39</a> of file <a class="el" href="wallet__manager_8cpp_source.html">wallet_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   39</span>                                                          {</div>
<div class="line"><span class="lineno">   40</span>   timeout = t;</div>
<div class="line"><span class="lineno">   41</span>   <span class="keyword">auto</span> now = std::chrono::system_clock::now();</div>
<div class="line"><span class="lineno">   42</span>   timeout_time = now + timeout;</div>
<div class="line"><span class="lineno">   43</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a40c2826a6fba35c1ffbf912bdf559792">SYS_ASSERT</a>(timeout_time &gt;= now &amp;&amp; timeout_time.time_since_epoch().count() &gt; 0, invalid_lock_timeout_exception, <span class="stringliteral">&quot;Overflow on timeout_time, specified ${t}, now ${now}, timeout_time ${timeout_time}&quot;</span>,</div>
<div class="line"><span class="lineno">   44</span>             (<span class="stringliteral">&quot;t&quot;</span>, t.count())(<span class="stringliteral">&quot;now&quot;</span>, now.time_since_epoch().count())(<span class="stringliteral">&quot;timeout_time&quot;</span>, timeout_time.time_since_epoch().count()));</div>
<div class="line"><span class="lineno">   45</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa0b19fba064d2db5a813e6e934638a3a" name="aa0b19fba064d2db5a813e6e934638a3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0b19fba064d2db5a813e6e934638a3a">&#9670;&#160;</a></span>set_timeout() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::wallet::wallet_manager::set_timeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a></td>          <td class="paramname"><span class="paramname"><em>secs</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#a31ff8d23227bdca61ae4d53d228e7988">wallet_manager::set_timeout(const std::chrono::seconds&amp; t)</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">secs</td><td>The timeout in seconds. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="wallet__manager_8hpp_source.html#l00041">41</a> of file <a class="el" href="wallet__manager_8hpp_source.html">wallet_manager.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   41</span>{ <a class="code hl_function" href="#a31ff8d23227bdca61ae4d53d228e7988">set_timeout</a>(std::chrono::seconds(secs)); }</div>
<div class="ttc" id="aclasssysio_1_1wallet_1_1wallet__manager_html_a31ff8d23227bdca61ae4d53d228e7988"><div class="ttname"><a href="#a31ff8d23227bdca61ae4d53d228e7988">sysio::wallet::wallet_manager::set_timeout</a></div><div class="ttdeci">void set_timeout(const std::chrono::seconds &amp;t)</div><div class="ttdef"><b>Definition</b> <a href="wallet__manager_8cpp_source.html#l00039">wallet_manager.cpp:39</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1wallet_1_1wallet__manager_aa0b19fba064d2db5a813e6e934638a3a_cgraph.png" border="0" usemap="#aclasssysio_1_1wallet_1_1wallet__manager_aa0b19fba064d2db5a813e6e934638a3a_cgraph" alt=""/></div>
<map name="aclasssysio_1_1wallet_1_1wallet__manager_aa0b19fba064d2db5a813e6e934638a3a_cgraph" id="aclasssysio_1_1wallet_1_1wallet__manager_aa0b19fba064d2db5a813e6e934638a3a_cgraph">
<area shape="rect" title=" " alt="" coords="5,29,160,70"/>
<area shape="poly" title=" " alt="" coords="53,29,51,19,56,11,67,5,83,3,100,5,110,11,107,16,98,10,82,8,68,10,60,14,56,20,58,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1wallet_1_1wallet__manager_aa0b19fba064d2db5a813e6e934638a3a_icgraph.png" border="0" usemap="#aclasssysio_1_1wallet_1_1wallet__manager_aa0b19fba064d2db5a813e6e934638a3a_icgraph" alt=""/></div>
<map name="aclasssysio_1_1wallet_1_1wallet__manager_aa0b19fba064d2db5a813e6e934638a3a_icgraph" id="aclasssysio_1_1wallet_1_1wallet__manager_aa0b19fba064d2db5a813e6e934638a3a_icgraph">
<area shape="rect" title=" " alt="" coords="5,29,160,70"/>
<area shape="poly" title=" " alt="" coords="107,16,98,10,82,8,68,10,60,14,56,20,58,28,53,29,51,19,56,11,67,5,83,3,100,5,110,11"/>
</map>
</div>

</div>
</div>
<a id="abdd2a00c00061934ba7899e41f6b5a09" name="abdd2a00c00061934ba7899e41f6b5a09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdd2a00c00061934ba7899e41f6b5a09">&#9670;&#160;</a></span>sign_digest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacesysio_1_1chain.html#af141a69eb789b86fa0eb93c2d263f0df">chain::signature_type</a> sysio::wallet::wallet_manager::sign_digest </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#a357fd9478475457e5bb386a3143079b6">chain::digest_type</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>digest</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacesysio_1_1chain.html#a0628a11f388cd2e43b1ccc1260a1042f">public_key_type</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>key</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sign digest with the private keys specified via their public keys. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">digest</td><td>the digest to sign. </td></tr>
    <tr><td class="paramname">key</td><td>the public key of the corresponding private key to sign the digest with </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>signature over the digest </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classfc_1_1exception.html" title="Used to generate a useful error report when an exception is thrown.">fc::exception</a></td><td>if corresponding private keys not found in unlocked wallets </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="wallet__manager_8cpp_source.html#l00253">253</a> of file <a class="el" href="wallet__manager_8cpp_source.html">wallet_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  253</span>                                                                                      {</div>
<div class="line"><span class="lineno">  254</span>   check_timeout();</div>
<div class="line"><span class="lineno">  255</span> </div>
<div class="line"><span class="lineno">  256</span>   <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  257</span>      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; i : wallets) {</div>
<div class="line"><span class="lineno">  258</span>         <span class="keywordflow">if</span> (!i.second-&gt;is_locked()) {</div>
<div class="line"><span class="lineno">  259</span>            std::optional&lt;signature_type&gt; sig = i.second-&gt;try_sign_digest(<a class="code hl_function" href="namespacefc.html#a150ca4cd9c0318ca45dc0dc7df5d58b9">digest</a>, key);</div>
<div class="line"><span class="lineno">  260</span>            <span class="keywordflow">if</span> (sig)</div>
<div class="line"><span class="lineno">  261</span>               <span class="keywordflow">return</span> *sig;</div>
<div class="line"><span class="lineno">  262</span>         }</div>
<div class="line"><span class="lineno">  263</span>      }</div>
<div class="line"><span class="lineno">  264</span>   } <a class="code hl_define" href="exception_8hpp.html#ae70bfa24f5a3bc0917382b3c17fc033c">FC_LOG_AND_RETHROW</a>();</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>   <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a1bfa656552ea0534b2c91ee0fe33f850">SYS_THROW</a>(chain::wallet_missing_pub_key_exception, <span class="stringliteral">&quot;Public key not found in unlocked wallets ${k}&quot;</span>, (<span class="stringliteral">&quot;k&quot;</span>, key));</div>
<div class="line"><span class="lineno">  267</span>}</div>
<div class="ttc" id="aexception_8hpp_html_ae70bfa24f5a3bc0917382b3c17fc033c"><div class="ttname"><a href="exception_8hpp.html#ae70bfa24f5a3bc0917382b3c17fc033c">FC_LOG_AND_RETHROW</a></div><div class="ttdeci">#define FC_LOG_AND_RETHROW()</div><div class="ttdef"><b>Definition</b> <a href="exception_8hpp_source.html#l00411">exception.hpp:411</a></div></div>
<div class="ttc" id="anamespacefc_html_a150ca4cd9c0318ca45dc0dc7df5d58b9"><div class="ttname"><a href="namespacefc.html#a150ca4cd9c0318ca45dc0dc7df5d58b9">fc::digest</a></div><div class="ttdeci">fc::sha256 digest(const T &amp;value)</div><div class="ttdef"><b>Definition</b> <a href="digest_8hpp_source.html#l00009">digest.hpp:9</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1wallet_1_1wallet__manager_abdd2a00c00061934ba7899e41f6b5a09_cgraph.png" border="0" usemap="#aclasssysio_1_1wallet_1_1wallet__manager_abdd2a00c00061934ba7899e41f6b5a09_cgraph" alt=""/></div>
<map name="aclasssysio_1_1wallet_1_1wallet__manager_abdd2a00c00061934ba7899e41f6b5a09_cgraph" id="aclasssysio_1_1wallet_1_1wallet__manager_abdd2a00c00061934ba7899e41f6b5a09_cgraph">
<area shape="rect" title=" " alt="" coords="5,51,158,92"/>
<area shape="rect" href="namespacefc.html#a150ca4cd9c0318ca45dc0dc7df5d58b9" title=" " alt="" coords="206,59,281,84"/>
<area shape="poly" title=" " alt="" coords="158,69,190,69,190,74,158,74"/>
<area shape="rect" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1" title=" " alt="" coords="348,29,446,55"/>
<area shape="poly" title=" " alt="" coords="281,62,333,52,334,57,282,67"/>
<area shape="rect" href="classfc_1_1sha256_1_1encoder.html#a4d8b8181e912194cf98a56164671adf8" title=" " alt="" coords="329,79,465,120"/>
<area shape="poly" title=" " alt="" coords="282,76,314,82,313,87,281,81"/>
<area shape="poly" title=" " alt="" coords="371,30,366,21,369,11,380,5,397,3,416,5,426,12,423,16,414,10,397,8,381,10,373,15,371,20,375,28"/>
<area shape="rect" href="classfc_1_1sha256.html#ab897537f6c524085b28049be51ed370d" title=" " alt="" coords="513,87,629,112"/>
<area shape="poly" title=" " alt="" coords="466,97,497,97,497,102,466,102"/>
</map>
</div>

</div>
</div>
<a id="a5603a17a529a1e55788a1cb42d73af89" name="a5603a17a529a1e55788a1cb42d73af89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5603a17a529a1e55788a1cb42d73af89">&#9670;&#160;</a></span>sign_transaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsysio_1_1chain_1_1signed__transaction.html">chain::signed_transaction</a> sysio::wallet::wallet_manager::sign_transaction </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsysio_1_1chain_1_1signed__transaction.html">chain::signed_transaction</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>txn</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const flat_set&lt; <a class="el" href="namespacesysio_1_1chain.html#a0628a11f388cd2e43b1ccc1260a1042f">public_key_type</a> &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>keys</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structsysio_1_1chain_1_1chain__id__type.html">chain::chain_id_type</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>id</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sign transaction with the private keys specified via their public keys. Use chain_controller::get_required_keys to determine which keys are needed for txn. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">txn</td><td>the transaction to sign. </td></tr>
    <tr><td class="paramname">keys</td><td>the public keys of the corresponding private keys to sign the transaction with </td></tr>
    <tr><td class="paramname">id</td><td>the chain_id to sign transaction with. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>txn signed </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classfc_1_1exception.html" title="Used to generate a useful error report when an exception is thrown.">fc::exception</a></td><td>if corresponding private keys not found in unlocked wallets </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="wallet__manager_8cpp_source.html#l00228">228</a> of file <a class="el" href="wallet__manager_8cpp_source.html">wallet_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  228</span>                                                                                                                                        {</div>
<div class="line"><span class="lineno">  229</span>   check_timeout();</div>
<div class="line"><span class="lineno">  230</span>   chain::signed_transaction stxn(txn);</div>
<div class="line"><span class="lineno">  231</span> </div>
<div class="line"><span class="lineno">  232</span>   <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; pk : keys) {</div>
<div class="line"><span class="lineno">  233</span>      <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  234</span>      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; i : wallets) {</div>
<div class="line"><span class="lineno">  235</span>         <span class="keywordflow">if</span> (!i.second-&gt;is_locked()) {</div>
<div class="line"><span class="lineno">  236</span>            std::optional&lt;signature_type&gt; sig = i.second-&gt;try_sign_digest(stxn.sig_digest(<span class="keywordtype">id</span>, stxn.context_free_data), pk);</div>
<div class="line"><span class="lineno">  237</span>            <span class="keywordflow">if</span> (sig) {</div>
<div class="line"><span class="lineno">  238</span>               stxn.signatures.push_back(*sig);</div>
<div class="line"><span class="lineno">  239</span>               found = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  240</span>               <span class="keywordflow">break</span>; <span class="comment">// inner for</span></div>
<div class="line"><span class="lineno">  241</span>            }</div>
<div class="line"><span class="lineno">  242</span>         }</div>
<div class="line"><span class="lineno">  243</span>      }</div>
<div class="line"><span class="lineno">  244</span>      <span class="keywordflow">if</span> (!found) {</div>
<div class="line"><span class="lineno">  245</span>         <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a1bfa656552ea0534b2c91ee0fe33f850">SYS_THROW</a>(chain::wallet_missing_pub_key_exception, <span class="stringliteral">&quot;Public key not found in unlocked wallets ${k}&quot;</span>, (<span class="stringliteral">&quot;k&quot;</span>, pk));</div>
<div class="line"><span class="lineno">  246</span>      }</div>
<div class="line"><span class="lineno">  247</span>   }</div>
<div class="line"><span class="lineno">  248</span> </div>
<div class="line"><span class="lineno">  249</span>   <span class="keywordflow">return</span> stxn;</div>
<div class="line"><span class="lineno">  250</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1wallet_1_1wallet__manager_a5603a17a529a1e55788a1cb42d73af89_cgraph.png" border="0" usemap="#aclasssysio_1_1wallet_1_1wallet__manager_a5603a17a529a1e55788a1cb42d73af89_cgraph" alt=""/></div>
<map name="aclasssysio_1_1wallet_1_1wallet__manager_a5603a17a529a1e55788a1cb42d73af89_cgraph" id="aclasssysio_1_1wallet_1_1wallet__manager_a5603a17a529a1e55788a1cb42d73af89_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,187,97"/>
<area shape="rect" href="structsysio_1_1chain_1_1transaction.html#ad88db1a0d648057a88a0e009affb1372" title=" " alt="" coords="235,56,398,97"/>
<area shape="poly" title=" " alt="" coords="187,74,219,74,219,79,187,79"/>
<area shape="rect" href="classfc_1_1sha256.html#a474784de7d6213b855abd7e952df5e36" title=" " alt="" coords="446,64,564,89"/>
<area shape="poly" title=" " alt="" coords="398,74,430,74,430,79,398,79"/>
<area shape="rect" href="classfc_1_1sha256_1_1encoder.html#a4d8b8181e912194cf98a56164671adf8" title=" " alt="" coords="612,5,749,46"/>
<area shape="poly" title=" " alt="" coords="398,57,446,48,597,30,598,35,446,54,399,62"/>
<area shape="rect" href="namespacefc_1_1raw.html#a3a18d8161aa5b4f4f02b6fcfdff5e5d1" title=" " alt="" coords="456,137,554,162"/>
<area shape="poly" title=" " alt="" coords="371,95,456,128,455,133,370,100"/>
<area shape="poly" title=" " alt="" coords="552,60,596,47,598,52,553,65"/>
<area shape="rect" href="classfc_1_1sha256_1_1encoder.html#a4a246dfb33e3eb78ba167446bee92e30" title=" " alt="" coords="612,71,749,111"/>
<area shape="poly" title=" " alt="" coords="565,79,597,81,597,87,565,84"/>
<area shape="rect" href="classfc_1_1sha256.html#ab897537f6c524085b28049be51ed370d" title=" " alt="" coords="797,13,912,38"/>
<area shape="poly" title=" " alt="" coords="749,23,781,23,781,28,749,28"/>
<area shape="poly" title=" " alt="" coords="475,138,470,128,473,119,485,112,505,110,526,113,538,119,535,124,525,118,505,115,487,117,477,122,475,128,480,135"/>
</map>
</div>

</div>
</div>
<a id="a108a129e4176fb7a1b782344e9cecc8f" name="a108a129e4176fb7a1b782344e9cecc8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a108a129e4176fb7a1b782344e9cecc8f">&#9670;&#160;</a></span>unlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysio::wallet::wallet_manager::unlock </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>password</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unlock the specified wallet. The wallet remains unlocked until <a class="el" href="#afb4ea349b3e8337ba01b61417bba505d">lock</a> is called or program exit. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the name of the wallet to lock. </td></tr>
    <tr><td class="paramname">password</td><td>the plaintext password returned from <a class="el" href="#a9c1673ae072e569c07ab5af68fc3ae34">create</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classfc_1_1exception.html" title="Used to generate a useful error report when an exception is thrown.">fc::exception</a></td><td>if wallet not found or invalid password or already unlocked. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="wallet__manager_8cpp_source.html#l00175">175</a> of file <a class="el" href="wallet__manager_8cpp_source.html">wallet_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  175</span>                                                                            {</div>
<div class="line"><span class="lineno">  176</span>   check_timeout();</div>
<div class="line"><span class="lineno">  177</span>   <span class="keywordflow">if</span> (wallets.count(<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>) == 0) {</div>
<div class="line"><span class="lineno">  178</span>      <a class="code hl_function" href="#aa2afccf9173458e34f4ce2aba878efb4">open</a>( <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a> );</div>
<div class="line"><span class="lineno">  179</span>   }</div>
<div class="line"><span class="lineno">  180</span>   <span class="keyword">auto</span>&amp; w = wallets.at(<a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>);</div>
<div class="line"><span class="lineno">  181</span>   <span class="keywordflow">if</span> (!w-&gt;is_locked()) {</div>
<div class="line"><span class="lineno">  182</span>      <a class="code hl_define" href="chain_2include_2sysio_2chain_2exceptions_8hpp.html#a1bfa656552ea0534b2c91ee0fe33f850">SYS_THROW</a>(chain::wallet_unlocked_exception, <span class="stringliteral">&quot;Wallet is already unlocked: ${w}&quot;</span>, (<span class="stringliteral">&quot;w&quot;</span>, <a class="code hl_struct" href="structsysio_1_1chain_1_1name.html">name</a>));</div>
<div class="line"><span class="lineno">  183</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  184</span>   }</div>
<div class="line"><span class="lineno">  185</span>   w-&gt;unlock(password);</div>
<div class="line"><span class="lineno">  186</span>}</div>
<div class="ttc" id="aclasssysio_1_1wallet_1_1wallet__manager_html_aa2afccf9173458e34f4ce2aba878efb4"><div class="ttname"><a href="#aa2afccf9173458e34f4ce2aba878efb4">sysio::wallet::wallet_manager::open</a></div><div class="ttdeci">void open(const std::string &amp;name)</div><div class="ttdef"><b>Definition</b> <a href="wallet__manager_8cpp_source.html#l00091">wallet_manager.cpp:91</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsysio_1_1wallet_1_1wallet__manager_a108a129e4176fb7a1b782344e9cecc8f_cgraph.png" border="0" usemap="#aclasssysio_1_1wallet_1_1wallet__manager_a108a129e4176fb7a1b782344e9cecc8f_cgraph" alt=""/></div>
<map name="aclasssysio_1_1wallet_1_1wallet__manager_a108a129e4176fb7a1b782344e9cecc8f_cgraph" id="aclasssysio_1_1wallet_1_1wallet__manager_a108a129e4176fb7a1b782344e9cecc8f_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,142,46"/>
<area shape="rect" href="classsysio_1_1wallet_1_1wallet__manager.html#aa2afccf9173458e34f4ce2aba878efb4" title=" " alt="" coords="190,5,326,46"/>
<area shape="poly" title=" " alt="" coords="142,23,174,23,174,28,142,28"/>
<area shape="rect" href="namespacesysio_1_1wallet.html#aec99b3a63cebacb7d46a30201e7e806b" title=" " alt="" coords="374,5,503,46"/>
<area shape="poly" title=" " alt="" coords="327,23,358,23,358,28,327,28"/>
<area shape="rect" href="structsysio_1_1chain_1_1name.html#ac074a360785947747ebec83c2cab287a" title=" " alt="" coords="551,5,683,46"/>
<area shape="poly" title=" " alt="" coords="504,23,536,23,536,28,504,28"/>
</map>
</div>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>plugins/wallet_plugin/include/sysio/wallet_plugin/<a class="el" href="wallet__manager_8hpp_source.html">wallet_manager.hpp</a></li>
<li>plugins/wallet_plugin/<a class="el" href="wallet__manager_8cpp_source.html">wallet_manager.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacesysio.html">sysio</a></li><li class="navelem"><a class="el" href="namespacesysio_1_1wallet.html">wallet</a></li><li class="navelem"><a class="el" href="classsysio_1_1wallet_1_1wallet__manager.html">wallet_manager</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
