\doxysection{authorization.\+cpp}
\hypertarget{authorization_8cpp_source}{}\label{authorization_8cpp_source}\index{libraries/chain/webassembly/authorization.cpp@{libraries/chain/webassembly/authorization.cpp}}
\mbox{\hyperlink{authorization_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00001}00001\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{interface_8hpp}{sysio/chain/webassembly/interface.hpp}}>}}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00002}00002\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{apply__context_8hpp}{sysio/chain/apply\_context.hpp}}>}}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00003}00003\ }
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00004}00004\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacesysio}{sysio}}\ \{\ \textcolor{keyword}{namespace\ }chain\ \{\ \textcolor{keyword}{namespace\ }webassembly\ \{}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00005}\mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_a6310782583f8340c59c657c1d28f5049}{00005}}\ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_a6310782583f8340c59c657c1d28f5049}{interface::require\_auth}}(\ \mbox{\hyperlink{structsysio_1_1chain_1_1name}{account\_name}}\ account\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00006}00006\ \ \ \ \ \ \ \mbox{\hyperlink{structcontext}{context}}.require\_authorization(\ account\ );}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00007}00007\ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00008}00008\ }
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00009}\mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_ad16ee681319c169e5690f814f7f02e67}{00009}}\ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_ad16ee681319c169e5690f814f7f02e67}{interface::has\_auth}}(\ \mbox{\hyperlink{structsysio_1_1chain_1_1name}{account\_name}}\ account\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00010}00010\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structcontext}{context}}.has\_authorization(\ account\ );}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00011}00011\ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00012}00012\ }
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00013}\mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_a6667cac04c87218a902576124126ce9d}{00013}}\ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_a6667cac04c87218a902576124126ce9d}{interface::require\_auth2}}(\ \mbox{\hyperlink{structsysio_1_1chain_1_1name}{account\_name}}\ account,}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00014}00014\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structsysio_1_1chain_1_1name}{permission\_name}}\ permission\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00015}00015\ \ \ \ \ \ \ \mbox{\hyperlink{structcontext}{context}}.require\_authorization(\ account,\ permission\ );}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00016}00016\ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00018}\mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_aeba54b7e3e2d7843addaa1d002d2c3ff}{00018}}\ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_aeba54b7e3e2d7843addaa1d002d2c3ff}{interface::require\_recipient}}(\ \mbox{\hyperlink{structsysio_1_1chain_1_1name}{account\_name}}\ recipient\ )\ \{}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00019}00019\ \ \ \ \ \ \ \mbox{\hyperlink{structcontext}{context}}.require\_recipient(\ recipient\ );}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00020}00020\ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00021}00021\ }
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00022}\mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_a1be4ece741c3fa6a891a54e10495a161}{00022}}\ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_a1be4ece741c3fa6a891a54e10495a161}{interface::is\_account}}(\ \mbox{\hyperlink{structsysio_1_1chain_1_1name}{account\_name}}\ account\ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00023}00023\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structcontext}{context}}.is\_account(\ account\ );}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00024}00024\ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00025}00025\ }
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00026}\mbox{\hyperlink{structsysio_1_1chain_1_1webassembly_1_1get__code__hash__result}{00026}}\ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structsysio_1_1chain_1_1webassembly_1_1get__code__hash__result}{get\_code\_hash\_result}}\ \{}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00027}\mbox{\hyperlink{structsysio_1_1chain_1_1webassembly_1_1get__code__hash__result_a085ce3c61865a4b311dcbb950cacf155}{00027}}\ \ \ \ \ \ \ \mbox{\hyperlink{structfc_1_1unsigned__int}{unsigned\_int}}\ \mbox{\hyperlink{structsysio_1_1chain_1_1webassembly_1_1get__code__hash__result_a085ce3c61865a4b311dcbb950cacf155}{struct\_version}};}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00028}\mbox{\hyperlink{structsysio_1_1chain_1_1webassembly_1_1get__code__hash__result_a613ca53b0c72700eaa9ab4feef33c614}{00028}}\ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_aec6fcb673ff035718c238c8c9d544c47}{uint64\_t}}\ \mbox{\hyperlink{structsysio_1_1chain_1_1webassembly_1_1get__code__hash__result_a613ca53b0c72700eaa9ab4feef33c614}{code\_sequence}};}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00029}\mbox{\hyperlink{structsysio_1_1chain_1_1webassembly_1_1get__code__hash__result_adeb52e7b6bb65a1e3548e2c843a55a56}{00029}}\ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1sha256}{fc::sha256}}\ \mbox{\hyperlink{structsysio_1_1chain_1_1webassembly_1_1get__code__hash__result_adeb52e7b6bb65a1e3548e2c843a55a56}{code\_hash}};}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00030}\mbox{\hyperlink{structsysio_1_1chain_1_1webassembly_1_1get__code__hash__result_a960ad8165bd91f06a7ea4f79754d0917}{00030}}\ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}\ \mbox{\hyperlink{structsysio_1_1chain_1_1webassembly_1_1get__code__hash__result_a960ad8165bd91f06a7ea4f79754d0917}{vm\_type}};}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00031}\mbox{\hyperlink{structsysio_1_1chain_1_1webassembly_1_1get__code__hash__result_a172a3c66166e168930c97735a5106610}{00031}}\ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}}\ \mbox{\hyperlink{structsysio_1_1chain_1_1webassembly_1_1get__code__hash__result_a172a3c66166e168930c97735a5106610}{vm\_version}};}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00032}00032\ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00034}\mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_aca63eee90d48fb627b39e3c95da5d028}{00034}}\ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ \mbox{\hyperlink{classsysio_1_1chain_1_1webassembly_1_1interface_aca63eee90d48fb627b39e3c95da5d028}{interface::get\_code\_hash}}(}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00035}00035\ \ \ \ \ \ \ \mbox{\hyperlink{structsysio_1_1chain_1_1name}{account\_name}}\ account,}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00036}00036\ \ \ \ \ \ \ \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ struct\_version,}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00037}00037\ \ \ \ \ \ \ \mbox{\hyperlink{classsysio_1_1vm_1_1span}{vm::span<char>}}\ packed\_result}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00038}00038\ \ \ \ )\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00039}00039\ \ \ \ \ \ \ struct\_version\ =\ std::min(\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}(0),\ struct\_version);}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00040}00040\ \ \ \ \ \ \ \mbox{\hyperlink{structsysio_1_1chain_1_1webassembly_1_1get__code__hash__result}{get\_code\_hash\_result}}\ result\ =\ \{struct\_version\};}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00041}00041\ \ \ \ \ \ \ \mbox{\hyperlink{structcontext}{context}}.get\_code\_hash(account,\ result.code\_sequence,\ result.code\_hash,\ result.vm\_type,\ result.vm\_version);}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00043}00043\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}\ =\ \mbox{\hyperlink{namespacefc_1_1raw_a64937a5adc8041247f7007882224e225}{fc::raw::pack\_size}}(result);}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00044}00044\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}}\ <=\ packed\_result.\mbox{\hyperlink{classsysio_1_1vm_1_1span_a584ee0404e01edf225142e86d23d6d7d}{size}}())\ \{}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00045}00045\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classfc_1_1datastream}{datastream<char*>}}\ ds(packed\_result.\mbox{\hyperlink{classsysio_1_1vm_1_1span_a65d9e2641d763c860ae175a9a936a309}{data}}(),\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}});}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00046}00046\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacefc_1_1raw_a3a18d8161aa5b4f4f02b6fcfdff5e5d1}{fc::raw::pack}}(ds,\ result);}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00047}00047\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00048}00048\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{yubihsm__pkcs11_8c_a506da415c9307c897ca9be93acfe1d0f}{s}};}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00049}00049\ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00050}00050\ \}\}\}\ \textcolor{comment}{//\ ns\ sysio::chain::webassembly}}
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{authorization_8cpp_source_l00052}00052\ \mbox{\hyperlink{reflect_8hpp_a2ace850e636b1ca0b18fe3177e413d99}{FC\_REFLECT}}(\mbox{\hyperlink{structsysio_1_1chain_1_1webassembly_1_1get__code__hash__result}{sysio::chain::webassembly::get\_code\_hash\_result}},\ (struct\_version)(code\_sequence)(code\_hash)(vm\_type)(vm\_version))}

\end{DoxyCode}
